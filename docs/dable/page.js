var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var check=function(t){return t&&t.Math===Math&&t},globalThis_1=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof commonjsGlobal&&commonjsGlobal)||check("object"==typeof globalThis_1&&globalThis_1)||function(){return this}()||Function("return this")(),globalThis$H=globalThis_1,path$1=globalThis$H,fails$t=function(t){try{return!!t()}catch(t){return!0}},fails$s=fails$t,functionBindNative=!fails$s(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}),NATIVE_BIND$3=functionBindNative,FunctionPrototype$2=Function.prototype,call$v=FunctionPrototype$2.call,uncurryThisWithBind=NATIVE_BIND$3&&FunctionPrototype$2.bind.bind(call$v,call$v),functionUncurryThis=NATIVE_BIND$3?uncurryThisWithBind:function(t){return function(){return call$v.apply(t,arguments)}},isNullOrUndefined$5=function(t){return null==t},isNullOrUndefined$4=isNullOrUndefined$5,$TypeError$o=TypeError,requireObjectCoercible$9=function(t){if(isNullOrUndefined$4(t))throw new $TypeError$o("Can't call method on "+t);return t},requireObjectCoercible$8=requireObjectCoercible$9,$Object$4=Object,toObject$5=function(t){return $Object$4(requireObjectCoercible$8(t))},uncurryThis$B=functionUncurryThis,toObject$4=toObject$5,hasOwnProperty=uncurryThis$B({}.hasOwnProperty),hasOwnProperty_1=Object.hasOwn||function(t,s){return hasOwnProperty(toObject$4(t),s)},wellKnownSymbolWrapped={},sharedStore={exports:{}},isPure=!1,globalThis$G=globalThis_1,defineProperty$6=Object.defineProperty,defineGlobalProperty$3=function(t,s){try{defineProperty$6(globalThis$G,t,{value:s,configurable:!0,writable:!0})}catch(e){globalThis$G[t]=s}return s},globalThis$F=globalThis_1,defineGlobalProperty$2=defineGlobalProperty$3,SHARED="__core-js_shared__",store$3=sharedStore.exports=globalThis$F[SHARED]||defineGlobalProperty$2(SHARED,{});(store$3.versions||(store$3.versions=[])).push({version:"3.47.0",mode:"global",copyright:"Â© 2014-2025 Denis Pushkarev (zloirock.ru), 2025 CoreJS Company (core-js.io)",license:"https://github.com/zloirock/core-js/blob/v3.47.0/LICENSE",source:"https://github.com/zloirock/core-js"});var match,version,sharedStoreExports=sharedStore.exports,store$2=sharedStoreExports,shared$4=function(t,s){return store$2[t]||(store$2[t]=s||{})},uncurryThis$A=functionUncurryThis,id$1=0,postfix=Math.random(),toString$b=uncurryThis$A(1.1.toString),uid$4=function(t){return"Symbol("+(void 0===t?"":t)+")_"+toString$b(++id$1+postfix,36)},globalThis$E=globalThis_1,navigator$1=globalThis$E.navigator,userAgent$3=navigator$1&&navigator$1.userAgent,environmentUserAgent=userAgent$3?String(userAgent$3):"",globalThis$D=globalThis_1,userAgent$2=environmentUserAgent,process$1=globalThis$D.process,Deno$1=globalThis$D.Deno,versions=process$1&&process$1.versions||Deno$1&&Deno$1.version,v8=versions&&versions.v8;v8&&(version=(match=v8.split("."))[0]>0&&match[0]<4?1:+(match[0]+match[1])),!version&&userAgent$2&&(!(match=userAgent$2.match(/Edge\/(\d+)/))||match[1]>=74)&&(match=userAgent$2.match(/Chrome\/(\d+)/))&&(version=+match[1]);var environmentV8Version=version,V8_VERSION$1=environmentV8Version,fails$r=fails$t,globalThis$C=globalThis_1,$String$6=globalThis$C.String,symbolConstructorDetection=!!Object.getOwnPropertySymbols&&!fails$r(function(){var t=Symbol("symbol detection");return!$String$6(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&V8_VERSION$1&&V8_VERSION$1<41}),NATIVE_SYMBOL$1=symbolConstructorDetection,useSymbolAsUid=NATIVE_SYMBOL$1&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,globalThis$B=globalThis_1,shared$3=shared$4,hasOwn$i=hasOwnProperty_1,uid$3=uid$4,NATIVE_SYMBOL=symbolConstructorDetection,USE_SYMBOL_AS_UID$1=useSymbolAsUid,Symbol$3=globalThis$B.Symbol,WellKnownSymbolsStore=shared$3("wks"),createWellKnownSymbol=USE_SYMBOL_AS_UID$1?Symbol$3.for||Symbol$3:Symbol$3&&Symbol$3.withoutSetter||uid$3,wellKnownSymbol$k=function(t){return hasOwn$i(WellKnownSymbolsStore,t)||(WellKnownSymbolsStore[t]=NATIVE_SYMBOL&&hasOwn$i(Symbol$3,t)?Symbol$3[t]:createWellKnownSymbol("Symbol."+t)),WellKnownSymbolsStore[t]},wellKnownSymbol$j=wellKnownSymbol$k;wellKnownSymbolWrapped.f=wellKnownSymbol$j;var objectDefineProperty={},fails$q=fails$t,descriptors=!fails$q(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}),documentAll="object"==typeof document&&document.all,isCallable$l=void 0===documentAll&&void 0!==documentAll?function(t){return"function"==typeof t||t===documentAll}:function(t){return"function"==typeof t},isCallable$k=isCallable$l,isObject$f=function(t){return"object"==typeof t?null!==t:isCallable$k(t)},globalThis$A=globalThis_1,isObject$e=isObject$f,document$1=globalThis$A.document,EXISTS$1=isObject$e(document$1)&&isObject$e(document$1.createElement),documentCreateElement$1=function(t){return EXISTS$1?document$1.createElement(t):{}},DESCRIPTORS$h=descriptors,fails$p=fails$t,createElement$1=documentCreateElement$1,ie8DomDefine=!DESCRIPTORS$h&&!fails$p(function(){return 7!==Object.defineProperty(createElement$1("div"),"a",{get:function(){return 7}}).a}),DESCRIPTORS$g=descriptors,fails$o=fails$t,v8PrototypeDefineBug=DESCRIPTORS$g&&fails$o(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),isObject$d=isObject$f,$String$5=String,$TypeError$n=TypeError,anObject$s=function(t){if(isObject$d(t))return t;throw new $TypeError$n($String$5(t)+" is not an object")},NATIVE_BIND$2=functionBindNative,call$u=Function.prototype.call,functionCall=NATIVE_BIND$2?call$u.bind(call$u):function(){return call$u.apply(call$u,arguments)},globalThis$z=globalThis_1,isCallable$j=isCallable$l,aFunction=function(t){return isCallable$j(t)?t:void 0},getBuiltIn$j=function(t,s){return arguments.length<2?aFunction(globalThis$z[t]):globalThis$z[t]&&globalThis$z[t][s]},uncurryThis$z=functionUncurryThis,objectIsPrototypeOf=uncurryThis$z({}.isPrototypeOf),getBuiltIn$i=getBuiltIn$j,isCallable$i=isCallable$l,isPrototypeOf$5=objectIsPrototypeOf,USE_SYMBOL_AS_UID=useSymbolAsUid,$Object$3=Object,isSymbol$4=USE_SYMBOL_AS_UID?function(t){return"symbol"==typeof t}:function(t){var s=getBuiltIn$i("Symbol");return isCallable$i(s)&&isPrototypeOf$5(s.prototype,$Object$3(t))},$String$4=String,tryToString$3=function(t){try{return $String$4(t)}catch(t){return"Object"}},isCallable$h=isCallable$l,tryToString$2=tryToString$3,$TypeError$m=TypeError,aCallable$l=function(t){if(isCallable$h(t))return t;throw new $TypeError$m(tryToString$2(t)+" is not a function")},aCallable$k=aCallable$l,isNullOrUndefined$3=isNullOrUndefined$5,getMethod$b=function(t,s){var e=t[s];return isNullOrUndefined$3(e)?void 0:aCallable$k(e)},call$t=functionCall,isCallable$g=isCallable$l,isObject$c=isObject$f,$TypeError$l=TypeError,ordinaryToPrimitive$1=function(t,s){var e,B;if("string"===s&&isCallable$g(e=t.toString)&&!isObject$c(B=call$t(e,t)))return B;if(isCallable$g(e=t.valueOf)&&!isObject$c(B=call$t(e,t)))return B;if("string"!==s&&isCallable$g(e=t.toString)&&!isObject$c(B=call$t(e,t)))return B;throw new $TypeError$l("Can't convert object to primitive value")},call$s=functionCall,isObject$b=isObject$f,isSymbol$3=isSymbol$4,getMethod$a=getMethod$b,ordinaryToPrimitive=ordinaryToPrimitive$1,wellKnownSymbol$i=wellKnownSymbol$k,$TypeError$k=TypeError,TO_PRIMITIVE=wellKnownSymbol$i("toPrimitive"),toPrimitive$2=function(t,s){if(!isObject$b(t)||isSymbol$3(t))return t;var e,B=getMethod$a(t,TO_PRIMITIVE);if(B){if(void 0===s&&(s="default"),e=call$s(B,t,s),!isObject$b(e)||isSymbol$3(e))return e;throw new $TypeError$k("Can't convert object to primitive value")}return void 0===s&&(s="number"),ordinaryToPrimitive(t,s)},toPrimitive$1=toPrimitive$2,isSymbol$2=isSymbol$4,toPropertyKey$3=function(t){var s=toPrimitive$1(t,"string");return isSymbol$2(s)?s:s+""},DESCRIPTORS$f=descriptors,IE8_DOM_DEFINE$1=ie8DomDefine,V8_PROTOTYPE_DEFINE_BUG$1=v8PrototypeDefineBug,anObject$r=anObject$s,toPropertyKey$2=toPropertyKey$3,$TypeError$j=TypeError,$defineProperty=Object.defineProperty,$getOwnPropertyDescriptor$1=Object.getOwnPropertyDescriptor,ENUMERABLE="enumerable",CONFIGURABLE$1="configurable",WRITABLE="writable";objectDefineProperty.f=DESCRIPTORS$f?V8_PROTOTYPE_DEFINE_BUG$1?function(t,s,e){if(anObject$r(t),s=toPropertyKey$2(s),anObject$r(e),"function"==typeof t&&"prototype"===s&&"value"in e&&WRITABLE in e&&!e[WRITABLE]){var B=$getOwnPropertyDescriptor$1(t,s);B&&B[WRITABLE]&&(t[s]=e.value,e={configurable:CONFIGURABLE$1 in e?e[CONFIGURABLE$1]:B[CONFIGURABLE$1],enumerable:ENUMERABLE in e?e[ENUMERABLE]:B[ENUMERABLE],writable:!1})}return $defineProperty(t,s,e)}:$defineProperty:function(t,s,e){if(anObject$r(t),s=toPropertyKey$2(s),anObject$r(e),IE8_DOM_DEFINE$1)try{return $defineProperty(t,s,e)}catch(t){}if("get"in e||"set"in e)throw new $TypeError$j("Accessors not supported");return"value"in e&&(t[s]=e.value),t};var path=path$1,hasOwn$h=hasOwnProperty_1,wrappedWellKnownSymbolModule=wellKnownSymbolWrapped,defineProperty$5=objectDefineProperty.f,wellKnownSymbolDefine=function(t){var s=path.Symbol||(path.Symbol={});hasOwn$h(s,t)||defineProperty$5(s,t,{value:wrappedWellKnownSymbolModule.f(t)})},objectGetOwnPropertyDescriptor={},objectPropertyIsEnumerable={},$propertyIsEnumerable={}.propertyIsEnumerable,getOwnPropertyDescriptor$4=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor$4&&!$propertyIsEnumerable.call({1:2},1);objectPropertyIsEnumerable.f=NASHORN_BUG?function(t){var s=getOwnPropertyDescriptor$4(this,t);return!!s&&s.enumerable}:$propertyIsEnumerable;var createPropertyDescriptor$6=function(t,s){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:s}},uncurryThis$y=functionUncurryThis,toString$a=uncurryThis$y({}.toString),stringSlice$3=uncurryThis$y("".slice),classofRaw$2=function(t){return stringSlice$3(toString$a(t),8,-1)},uncurryThis$x=functionUncurryThis,fails$n=fails$t,classof$d=classofRaw$2,$Object$2=Object,split=uncurryThis$x("".split),indexedObject=fails$n(function(){return!$Object$2("z").propertyIsEnumerable(0)})?function(t){return"String"===classof$d(t)?split(t,""):$Object$2(t)}:$Object$2,IndexedObject=indexedObject,requireObjectCoercible$7=requireObjectCoercible$9,toIndexedObject$5=function(t){return IndexedObject(requireObjectCoercible$7(t))},DESCRIPTORS$e=descriptors,call$r=functionCall,propertyIsEnumerableModule=objectPropertyIsEnumerable,createPropertyDescriptor$5=createPropertyDescriptor$6,toIndexedObject$4=toIndexedObject$5,toPropertyKey$1=toPropertyKey$3,hasOwn$g=hasOwnProperty_1,IE8_DOM_DEFINE=ie8DomDefine,$getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;objectGetOwnPropertyDescriptor.f=DESCRIPTORS$e?$getOwnPropertyDescriptor:function(t,s){if(t=toIndexedObject$4(t),s=toPropertyKey$1(s),IE8_DOM_DEFINE)try{return $getOwnPropertyDescriptor(t,s)}catch(t){}if(hasOwn$g(t,s))return createPropertyDescriptor$5(!call$r(propertyIsEnumerableModule.f,t,s),t[s])};var globalThis$y=globalThis_1,defineWellKnownSymbol$1=wellKnownSymbolDefine,defineProperty$4=objectDefineProperty.f,getOwnPropertyDescriptor$3=objectGetOwnPropertyDescriptor.f,Symbol$2=globalThis$y.Symbol;if(defineWellKnownSymbol$1("asyncDispose"),Symbol$2){var descriptor$2=getOwnPropertyDescriptor$3(Symbol$2,"asyncDispose");descriptor$2.enumerable&&descriptor$2.configurable&&descriptor$2.writable&&defineProperty$4(Symbol$2,"asyncDispose",{value:descriptor$2.value,enumerable:!1,configurable:!1,writable:!1})}var globalThis$x=globalThis_1,defineWellKnownSymbol=wellKnownSymbolDefine,defineProperty$3=objectDefineProperty.f,getOwnPropertyDescriptor$2=objectGetOwnPropertyDescriptor.f,Symbol$1=globalThis$x.Symbol;if(defineWellKnownSymbol("dispose"),Symbol$1){var descriptor$1=getOwnPropertyDescriptor$2(Symbol$1,"dispose");descriptor$1.enumerable&&descriptor$1.configurable&&descriptor$1.writable&&defineProperty$3(Symbol$1,"dispose",{value:descriptor$1.value,enumerable:!1,configurable:!1,writable:!1})}var DESCRIPTORS$d=descriptors,definePropertyModule$4=objectDefineProperty,createPropertyDescriptor$4=createPropertyDescriptor$6,createNonEnumerableProperty$7=DESCRIPTORS$d?function(t,s,e){return definePropertyModule$4.f(t,s,createPropertyDescriptor$4(1,e))}:function(t,s,e){return t[s]=e,t},makeBuiltIn$3={exports:{}},DESCRIPTORS$c=descriptors,hasOwn$f=hasOwnProperty_1,FunctionPrototype$1=Function.prototype,getDescriptor=DESCRIPTORS$c&&Object.getOwnPropertyDescriptor,EXISTS=hasOwn$f(FunctionPrototype$1,"name"),CONFIGURABLE=EXISTS&&(!DESCRIPTORS$c||DESCRIPTORS$c&&getDescriptor(FunctionPrototype$1,"name").configurable),functionName={CONFIGURABLE:CONFIGURABLE},uncurryThis$w=functionUncurryThis,isCallable$f=isCallable$l,store$1=sharedStoreExports,functionToString=uncurryThis$w(Function.toString);isCallable$f(store$1.inspectSource)||(store$1.inspectSource=function(t){return functionToString(t)});var set$4,get$3,has$7,inspectSource$2=store$1.inspectSource,globalThis$w=globalThis_1,isCallable$e=isCallable$l,WeakMap$2=globalThis$w.WeakMap,weakMapBasicDetection=isCallable$e(WeakMap$2)&&/native code/.test(String(WeakMap$2)),shared$2=shared$4,uid$2=uid$4,keys$1=shared$2("keys"),sharedKey$3=function(t){return keys$1[t]||(keys$1[t]=uid$2(t))},hiddenKeys$4={},NATIVE_WEAK_MAP=weakMapBasicDetection,globalThis$v=globalThis_1,isObject$a=isObject$f,createNonEnumerableProperty$6=createNonEnumerableProperty$7,hasOwn$e=hasOwnProperty_1,shared$1=sharedStoreExports,sharedKey$2=sharedKey$3,hiddenKeys$3=hiddenKeys$4,OBJECT_ALREADY_INITIALIZED="Object already initialized",TypeError$5=globalThis$v.TypeError,WeakMap$1=globalThis$v.WeakMap,enforce=function(t){return has$7(t)?get$3(t):set$4(t,{})},getterFor=function(t){return function(s){var e;if(!isObject$a(s)||(e=get$3(s)).type!==t)throw new TypeError$5("Incompatible receiver, "+t+" required");return e}};if(NATIVE_WEAK_MAP||shared$1.state){var store=shared$1.state||(shared$1.state=new WeakMap$1);store.get=store.get,store.has=store.has,store.set=store.set,set$4=function(t,s){if(store.has(t))throw new TypeError$5(OBJECT_ALREADY_INITIALIZED);return s.facade=t,store.set(t,s),s},get$3=function(t){return store.get(t)||{}},has$7=function(t){return store.has(t)}}else{var STATE=sharedKey$2("state");hiddenKeys$3[STATE]=!0,set$4=function(t,s){if(hasOwn$e(t,STATE))throw new TypeError$5(OBJECT_ALREADY_INITIALIZED);return s.facade=t,createNonEnumerableProperty$6(t,STATE,s),s},get$3=function(t){return hasOwn$e(t,STATE)?t[STATE]:{}},has$7=function(t){return hasOwn$e(t,STATE)}}var internalState={set:set$4,get:get$3,has:has$7,enforce:enforce,getterFor:getterFor},uncurryThis$v=functionUncurryThis,fails$m=fails$t,isCallable$d=isCallable$l,hasOwn$d=hasOwnProperty_1,DESCRIPTORS$b=descriptors,CONFIGURABLE_FUNCTION_NAME=functionName.CONFIGURABLE,inspectSource$1=inspectSource$2,InternalStateModule$5=internalState,enforceInternalState$1=InternalStateModule$5.enforce,getInternalState$2=InternalStateModule$5.get,$String$3=String,defineProperty$2=Object.defineProperty,stringSlice$2=uncurryThis$v("".slice),replace$1=uncurryThis$v("".replace),join$2=uncurryThis$v([].join),CONFIGURABLE_LENGTH=DESCRIPTORS$b&&!fails$m(function(){return 8!==defineProperty$2(function(){},"length",{value:8}).length}),TEMPLATE=String(String).split("String"),makeBuiltIn$2=makeBuiltIn$3.exports=function(t,s,e){"Symbol("===stringSlice$2($String$3(s),0,7)&&(s="["+replace$1($String$3(s),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),e&&e.getter&&(s="get "+s),e&&e.setter&&(s="set "+s),(!hasOwn$d(t,"name")||CONFIGURABLE_FUNCTION_NAME&&t.name!==s)&&(DESCRIPTORS$b?defineProperty$2(t,"name",{value:s,configurable:!0}):t.name=s),CONFIGURABLE_LENGTH&&e&&hasOwn$d(e,"arity")&&t.length!==e.arity&&defineProperty$2(t,"length",{value:e.arity});try{e&&hasOwn$d(e,"constructor")&&e.constructor?DESCRIPTORS$b&&defineProperty$2(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var B=enforceInternalState$1(t);return hasOwn$d(B,"source")||(B.source=join$2(TEMPLATE,"string"==typeof s?s:"")),t};Function.prototype.toString=makeBuiltIn$2(function(){return isCallable$d(this)&&getInternalState$2(this).source||inspectSource$1(this)},"toString");var makeBuiltInExports=makeBuiltIn$3.exports,isCallable$c=isCallable$l,definePropertyModule$3=objectDefineProperty,makeBuiltIn$1=makeBuiltInExports,defineGlobalProperty$1=defineGlobalProperty$3,defineBuiltIn$b=function(t,s,e,B){B||(B={});var i=B.enumerable,F=void 0!==B.name?B.name:s;if(isCallable$c(e)&&makeBuiltIn$1(e,F,B),B.global)i?t[s]=e:defineGlobalProperty$1(s,e);else{try{B.unsafe?t[s]&&(i=!0):delete t[s]}catch(t){}i?t[s]=e:definePropertyModule$3.f(t,s,{value:e,enumerable:!1,configurable:!B.nonConfigurable,writable:!B.nonWritable})}return t},objectGetOwnPropertyNames={},ceil$1=Math.ceil,floor=Math.floor,mathTrunc=Math.trunc||function(t){var s=+t;return(s>0?floor:ceil$1)(s)},trunc=mathTrunc,toIntegerOrInfinity$8=function(t){var s=+t;return s!=s||0===s?0:trunc(s)},toIntegerOrInfinity$7=toIntegerOrInfinity$8,max$3=Math.max,min$5=Math.min,toAbsoluteIndex$1=function(t,s){var e=toIntegerOrInfinity$7(t);return e<0?max$3(e+s,0):min$5(e,s)},toIntegerOrInfinity$6=toIntegerOrInfinity$8,min$4=Math.min,toLength$3=function(t){var s=toIntegerOrInfinity$6(t);return s>0?min$4(s,9007199254740991):0},toLength$2=toLength$3,lengthOfArrayLike$6=function(t){return toLength$2(t.length)},toIndexedObject$3=toIndexedObject$5,toAbsoluteIndex=toAbsoluteIndex$1,lengthOfArrayLike$5=lengthOfArrayLike$6,createMethod$2=function(t){return function(s,e,B){var i=toIndexedObject$3(s),F=lengthOfArrayLike$5(i);if(0===F)return!t&&-1;var Q,l=toAbsoluteIndex(B,F);if(t&&e!=e){for(;F>l;)if((Q=i[l++])!=Q)return!0}else for(;F>l;l++)if((t||l in i)&&i[l]===e)return t||l||0;return!t&&-1}},arrayIncludes={indexOf:createMethod$2(!1)},uncurryThis$u=functionUncurryThis,hasOwn$c=hasOwnProperty_1,toIndexedObject$2=toIndexedObject$5,indexOf$1=arrayIncludes.indexOf,hiddenKeys$2=hiddenKeys$4,push$7=uncurryThis$u([].push),objectKeysInternal=function(t,s){var e,B=toIndexedObject$2(t),i=0,F=[];for(e in B)!hasOwn$c(hiddenKeys$2,e)&&hasOwn$c(B,e)&&push$7(F,e);for(;s.length>i;)hasOwn$c(B,e=s[i++])&&(~indexOf$1(F,e)||push$7(F,e));return F},enumBugKeys$3=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],internalObjectKeys$1=objectKeysInternal,enumBugKeys$2=enumBugKeys$3,hiddenKeys$1=enumBugKeys$2.concat("length","prototype");objectGetOwnPropertyNames.f=Object.getOwnPropertyNames||function(t){return internalObjectKeys$1(t,hiddenKeys$1)};var objectGetOwnPropertySymbols={};objectGetOwnPropertySymbols.f=Object.getOwnPropertySymbols;var getBuiltIn$h=getBuiltIn$j,uncurryThis$t=functionUncurryThis,getOwnPropertyNamesModule=objectGetOwnPropertyNames,getOwnPropertySymbolsModule=objectGetOwnPropertySymbols,anObject$q=anObject$s,concat=uncurryThis$t([].concat),ownKeys$2=getBuiltIn$h("Reflect","ownKeys")||function(t){var s=getOwnPropertyNamesModule.f(anObject$q(t)),e=getOwnPropertySymbolsModule.f;return e?concat(s,e(t)):s},hasOwn$b=hasOwnProperty_1,ownKeys$1=ownKeys$2,getOwnPropertyDescriptorModule=objectGetOwnPropertyDescriptor,definePropertyModule$2=objectDefineProperty,copyConstructorProperties$2=function(t,s,e){for(var B=ownKeys$1(s),i=definePropertyModule$2.f,F=getOwnPropertyDescriptorModule.f,Q=0;Q<B.length;Q++){var l=B[Q];hasOwn$b(t,l)||e&&hasOwn$b(e,l)||i(t,l,F(s,l))}},fails$l=fails$t,isCallable$b=isCallable$l,replacement=/#|\.prototype\./,isForced$1=function(t,s){var e=data$4[normalize$1(t)];return e===POLYFILL||e!==NATIVE&&(isCallable$b(s)?fails$l(s):!!s)},normalize$1=isForced$1.normalize=function(t){return String(t).replace(replacement,".").toLowerCase()},data$4=isForced$1.data={},NATIVE=isForced$1.NATIVE="N",POLYFILL=isForced$1.POLYFILL="P",isForced_1=isForced$1,globalThis$u=globalThis_1,getOwnPropertyDescriptor$1=objectGetOwnPropertyDescriptor.f,createNonEnumerableProperty$5=createNonEnumerableProperty$7,defineBuiltIn$a=defineBuiltIn$b,defineGlobalProperty=defineGlobalProperty$3,copyConstructorProperties$1=copyConstructorProperties$2,isForced=isForced_1,_export=function(t,s){var e,B,i,F,Q,l=t.target,U=t.global,a=t.stat;if(e=U?globalThis$u:a?globalThis$u[l]||defineGlobalProperty(l,{}):globalThis$u[l]&&globalThis$u[l].prototype)for(B in s){if(F=s[B],i=t.dontCallGetSet?(Q=getOwnPropertyDescriptor$1(e,B))&&Q.value:e[B],!isForced(U?B:l+(a?".":"#")+B,t.forced)&&void 0!==i){if(typeof F==typeof i)continue;copyConstructorProperties$1(F,i)}(t.sham||i&&i.sham)&&createNonEnumerableProperty$5(F,"sham",!0),defineBuiltIn$a(e,B,F,t)}},wellKnownSymbol$h=wellKnownSymbol$k,TO_STRING_TAG$7=wellKnownSymbol$h("toStringTag"),test={};test[TO_STRING_TAG$7]="z";var toStringTagSupport="[object z]"===String(test),TO_STRING_TAG_SUPPORT=toStringTagSupport,isCallable$a=isCallable$l,classofRaw$1=classofRaw$2,wellKnownSymbol$g=wellKnownSymbol$k,TO_STRING_TAG$6=wellKnownSymbol$g("toStringTag"),$Object$1=Object,CORRECT_ARGUMENTS="Arguments"===classofRaw$1(function(){return arguments}()),tryGet=function(t,s){try{return t[s]}catch(t){}},classof$c=TO_STRING_TAG_SUPPORT?classofRaw$1:function(t){var s,e,B;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=tryGet(s=$Object$1(t),TO_STRING_TAG$6))?e:CORRECT_ARGUMENTS?classofRaw$1(s):"Object"===(B=classofRaw$1(s))&&isCallable$a(s.callee)?"Arguments":B},$$Q=_export,getBuiltIn$g=getBuiltIn$j,isObject$9=isObject$f,classof$b=classof$c,fails$k=fails$t,ERROR="Error",DOM_EXCEPTION$1="DOMException",PROTOTYPE_SETTING_AVAILABLE=Object.setPrototypeOf||{}.__proto__,DOMException$1=getBuiltIn$g(DOM_EXCEPTION$1),$Error$2=Error,$isError=$Error$2.isError,FORCED$c=!$isError||!PROTOTYPE_SETTING_AVAILABLE||fails$k(function(){return DOMException$1&&!$isError(new DOMException$1(DOM_EXCEPTION$1))||!$isError(new $Error$2(ERROR,{cause:function(){}}))||$isError(getBuiltIn$g("Object","create")($Error$2.prototype))});$$Q({target:"Error",stat:!0,sham:!0,forced:FORCED$c},{isError:function(t){if(!isObject$9(t))return!1;var s=classof$b(t);return s===ERROR||s===DOM_EXCEPTION$1}});var fails$j=fails$t,correctPrototypeGetter=!fails$j(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),hasOwn$a=hasOwnProperty_1,isCallable$9=isCallable$l,toObject$3=toObject$5,sharedKey$1=sharedKey$3,CORRECT_PROTOTYPE_GETTER=correctPrototypeGetter,IE_PROTO$1=sharedKey$1("IE_PROTO"),$Object=Object,ObjectPrototype$1=$Object.prototype,objectGetPrototypeOf=CORRECT_PROTOTYPE_GETTER?$Object.getPrototypeOf:function(t){var s=toObject$3(t);if(hasOwn$a(s,IE_PROTO$1))return s[IE_PROTO$1];var e=s.constructor;return isCallable$9(e)&&s instanceof e?e.prototype:s instanceof $Object?ObjectPrototype$1:null},uncurryThis$s=functionUncurryThis,aCallable$j=aCallable$l,functionUncurryThisAccessor=function(t,s,e){try{return uncurryThis$s(aCallable$j(Object.getOwnPropertyDescriptor(t,s)[e]))}catch(t){}},isObject$8=isObject$f,isPossiblePrototype$1=function(t){return isObject$8(t)||null===t},isPossiblePrototype=isPossiblePrototype$1,$String$2=String,$TypeError$i=TypeError,aPossiblePrototype$1=function(t){if(isPossiblePrototype(t))return t;throw new $TypeError$i("Can't set "+$String$2(t)+" as a prototype")},uncurryThisAccessor$3=functionUncurryThisAccessor,isObject$7=isObject$f,requireObjectCoercible$6=requireObjectCoercible$9,aPossiblePrototype=aPossiblePrototype$1,objectSetPrototypeOf=Object.setPrototypeOf||("__proto__"in{}?function(){var t,s=!1,e={};try{(t=uncurryThisAccessor$3(Object.prototype,"__proto__","set"))(e,[]),s=e instanceof Array}catch(t){}return function(e,B){return requireObjectCoercible$6(e),aPossiblePrototype(B),isObject$7(e)?(s?t(e,B):e.__proto__=B,e):e}}():void 0),objectDefineProperties={},internalObjectKeys=objectKeysInternal,enumBugKeys$1=enumBugKeys$3,objectKeys$2=Object.keys||function(t){return internalObjectKeys(t,enumBugKeys$1)},DESCRIPTORS$a=descriptors,V8_PROTOTYPE_DEFINE_BUG=v8PrototypeDefineBug,definePropertyModule$1=objectDefineProperty,anObject$p=anObject$s,toIndexedObject$1=toIndexedObject$5,objectKeys$1=objectKeys$2;objectDefineProperties.f=DESCRIPTORS$a&&!V8_PROTOTYPE_DEFINE_BUG?Object.defineProperties:function(t,s){anObject$p(t);for(var e,B=toIndexedObject$1(s),i=objectKeys$1(s),F=i.length,Q=0;F>Q;)definePropertyModule$1.f(t,e=i[Q++],B[e]);return t};var activeXDocument,getBuiltIn$f=getBuiltIn$j,html$2=getBuiltIn$f("document","documentElement"),anObject$o=anObject$s,definePropertiesModule=objectDefineProperties,enumBugKeys=enumBugKeys$3,hiddenKeys=hiddenKeys$4,html$1=html$2,documentCreateElement=documentCreateElement$1,sharedKey=sharedKey$3,GT=">",LT="<",PROTOTYPE="prototype",SCRIPT="script",IE_PROTO=sharedKey("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(t){return LT+SCRIPT+GT+t+LT+"/"+SCRIPT+GT},NullProtoObjectViaActiveX=function(t){t.write(scriptTag("")),t.close();var s=t.parentWindow.Object;return t=null,s},NullProtoObjectViaIFrame=function(){var t,s=documentCreateElement("iframe"),e="java"+SCRIPT+":";return s.style.display="none",html$1.appendChild(s),s.src=String(e),(t=s.contentWindow.document).open(),t.write(scriptTag("document.F=Object")),t.close(),t.F},NullProtoObject=function(){try{activeXDocument=new ActiveXObject("htmlfile")}catch(t){}NullProtoObject="undefined"!=typeof document?document.domain&&activeXDocument?NullProtoObjectViaActiveX(activeXDocument):NullProtoObjectViaIFrame():NullProtoObjectViaActiveX(activeXDocument);for(var t=enumBugKeys.length;t--;)delete NullProtoObject[PROTOTYPE][enumBugKeys[t]];return NullProtoObject()};hiddenKeys[IE_PROTO]=!0;var objectCreate=Object.create||function(t,s){var e;return null!==t?(EmptyConstructor[PROTOTYPE]=anObject$o(t),e=new EmptyConstructor,EmptyConstructor[PROTOTYPE]=null,e[IE_PROTO]=t):e=NullProtoObject(),void 0===s?e:definePropertiesModule.f(e,s)},uncurryThis$r=functionUncurryThis,$Error$1=Error,replace=uncurryThis$r("".replace),TEST=String(new $Error$1("zxcasd").stack),V8_OR_CHAKRA_STACK_ENTRY=/\n\s*at [^:]*:[^\n]*/,IS_V8_OR_CHAKRA_STACK=V8_OR_CHAKRA_STACK_ENTRY.test(TEST),errorStackClear=function(t,s){if(IS_V8_OR_CHAKRA_STACK&&"string"==typeof t&&!$Error$1.prepareStackTrace)for(;s--;)t=replace(t,V8_OR_CHAKRA_STACK_ENTRY,"");return t},fails$i=fails$t,createPropertyDescriptor$3=createPropertyDescriptor$6,errorStackInstallable=!fails$i(function(){var t=new Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",createPropertyDescriptor$3(1,7)),7!==t.stack)}),createNonEnumerableProperty$4=createNonEnumerableProperty$7,clearErrorStack$1=errorStackClear,ERROR_STACK_INSTALLABLE$1=errorStackInstallable,captureStackTrace=Error.captureStackTrace,errorStackInstall=function(t,s,e,B){ERROR_STACK_INSTALLABLE$1&&(captureStackTrace?captureStackTrace(t,s):createNonEnumerableProperty$4(t,"stack",clearErrorStack$1(e,B)))},classof$a=classof$c,$String$1=String,toString$9=function(t){if("Symbol"===classof$a(t))throw new TypeError("Cannot convert a Symbol value to a string");return $String$1(t)},toString$8=toString$9,normalizeStringArgument$2=function(t,s){return void 0===t?arguments.length<2?"":s:toString$8(t)},$$P=_export,globalThis$t=globalThis_1,isPrototypeOf$4=objectIsPrototypeOf,getPrototypeOf$4=objectGetPrototypeOf,setPrototypeOf$2=objectSetPrototypeOf,copyConstructorProperties=copyConstructorProperties$2,create$5=objectCreate,createNonEnumerableProperty$3=createNonEnumerableProperty$7,createPropertyDescriptor$2=createPropertyDescriptor$6,installErrorStack=errorStackInstall,normalizeStringArgument$1=normalizeStringArgument$2,wellKnownSymbol$f=wellKnownSymbol$k,fails$h=fails$t,NativeSuppressedError=globalThis$t.SuppressedError,TO_STRING_TAG$5=wellKnownSymbol$f("toStringTag"),$Error=Error,WRONG_ARITY$1=!!NativeSuppressedError&&3!==NativeSuppressedError.length,EXTRA_ARGS_SUPPORT=!!NativeSuppressedError&&fails$h(function(){return 4===new NativeSuppressedError(1,2,3,{cause:4}).cause}),PATCH=WRONG_ARITY$1||EXTRA_ARGS_SUPPORT,$SuppressedError=function(t,s,e){var B,i=isPrototypeOf$4(SuppressedErrorPrototype,this);return setPrototypeOf$2?B=!PATCH||i&&getPrototypeOf$4(this)!==SuppressedErrorPrototype?setPrototypeOf$2(new $Error,i?getPrototypeOf$4(this):SuppressedErrorPrototype):new NativeSuppressedError:(B=i?this:create$5(SuppressedErrorPrototype),createNonEnumerableProperty$3(B,TO_STRING_TAG$5,"Error")),void 0!==e&&createNonEnumerableProperty$3(B,"message",normalizeStringArgument$1(e)),installErrorStack(B,$SuppressedError,B.stack,1),createNonEnumerableProperty$3(B,"error",t),createNonEnumerableProperty$3(B,"suppressed",s),B};setPrototypeOf$2?setPrototypeOf$2($SuppressedError,$Error):copyConstructorProperties($SuppressedError,$Error,{name:!0});var SuppressedErrorPrototype=$SuppressedError.prototype=PATCH?NativeSuppressedError.prototype:create$5($Error.prototype,{constructor:createPropertyDescriptor$2(1,$SuppressedError),message:createPropertyDescriptor$2(1,""),name:createPropertyDescriptor$2(1,"SuppressedError")});PATCH&&(SuppressedErrorPrototype.constructor=$SuppressedError),$$P({global:!0,constructor:!0,arity:3,forced:PATCH},{SuppressedError:$SuppressedError});var classof$9=classofRaw$2,isArray$2=Array.isArray||function(t){return"Array"===classof$9(t)},DESCRIPTORS$9=descriptors,isArray$1=isArray$2,$TypeError$h=TypeError,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,SILENT_ON_NON_WRITABLE_LENGTH_SET=DESCRIPTORS$9&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}(),arraySetLength=SILENT_ON_NON_WRITABLE_LENGTH_SET?function(t,s){if(isArray$1(t)&&!getOwnPropertyDescriptor(t,"length").writable)throw new $TypeError$h("Cannot set read only .length");return t.length=s}:function(t,s){return t.length=s},$TypeError$g=TypeError,MAX_SAFE_INTEGER$1=9007199254740991,doesNotExceedSafeInteger$2=function(t){if(t>MAX_SAFE_INTEGER$1)throw $TypeError$g("Maximum allowed index exceeded");return t},$$O=_export,toObject$2=toObject$5,lengthOfArrayLike$4=lengthOfArrayLike$6,setArrayLength=arraySetLength,doesNotExceedSafeInteger$1=doesNotExceedSafeInteger$2,fails$g=fails$t,INCORRECT_TO_LENGTH=fails$g(function(){return 4294967297!==[].push.call({length:4294967296},1)}),properErrorOnNonWritableLength=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},FORCED$b=INCORRECT_TO_LENGTH||!properErrorOnNonWritableLength();$$O({target:"Array",proto:!0,arity:1,forced:FORCED$b},{push:function(t){var s=toObject$2(this),e=lengthOfArrayLike$4(s),B=arguments.length;doesNotExceedSafeInteger$1(e+B);for(var i=0;i<B;i++)s[e]=arguments[i],e++;return setArrayLength(s,e),e}});var lengthOfArrayLike$3=lengthOfArrayLike$6,toIntegerOrInfinity$5=toIntegerOrInfinity$8,$RangeError$6=RangeError,arrayWith$2=function(t,s,e,B){var i=lengthOfArrayLike$3(t),F=toIntegerOrInfinity$5(e),Q=F<0?i+F:F;if(Q>=i||Q<0)throw new $RangeError$6("Incorrect index");for(var l=new s(i),U=0;U<i;U++)l[U]=U===Q?B:t[U];return l},$$N=_export,arrayWith$1=arrayWith$2,toIndexedObject=toIndexedObject$5,$Array$2=Array,INCORRECT_EXCEPTION_ON_COERCION_FAIL=function(){try{[].with({valueOf:function(){throw 4}},null)}catch(t){return 4!==t}}();$$N({target:"Array",proto:!0,forced:INCORRECT_EXCEPTION_ON_COERCION_FAIL},{with:function(t,s){return arrayWith$1(toIndexedObject(this),$Array$2,t,s)}});var $$M=_export,uncurryThis$q=functionUncurryThis,pow$4=Math.pow,EXP_MASK16=31,SIGNIFICAND_MASK16=1023,MIN_SUBNORMAL16=pow$4(2,-24),SIGNIFICAND_DENOM16=.0009765625,unpackFloat16=function(t){var s=t>>>15,e=t>>>10&EXP_MASK16,B=t&SIGNIFICAND_MASK16;return e===EXP_MASK16?0===B?0===s?1/0:-1/0:NaN:0===e?B*(0===s?MIN_SUBNORMAL16:-MIN_SUBNORMAL16):pow$4(2,e-15)*(0===s?1+B*SIGNIFICAND_DENOM16:-1-B*SIGNIFICAND_DENOM16)},getUint16=uncurryThis$q(DataView.prototype.getUint16);$$M({target:"DataView",proto:!0},{getFloat16:function(t){return unpackFloat16(getUint16(this,t,arguments.length>1&&arguments[1]))}});var classof$8=classof$c,$TypeError$f=TypeError,aDataView$1=function(t){if("DataView"===classof$8(t))return t;throw new $TypeError$f("Argument is not a DataView")},toIntegerOrInfinity$4=toIntegerOrInfinity$8,toLength$1=toLength$3,$RangeError$5=RangeError,toIndex$2=function(t){if(void 0===t)return 0;var s=toIntegerOrInfinity$4(t),e=toLength$1(s);if(s!==e)throw new $RangeError$5("Wrong length or index");return e},log$2=Math.log,LN2=Math.LN2,mathLog2=Math.log2||function(t){return log$2(t)/LN2},EPSILON$1=2220446049250313e-31,INVERSE_EPSILON=1/EPSILON$1,mathRoundTiesToEven=function(t){return t+INVERSE_EPSILON-INVERSE_EPSILON},$$L=_export,uncurryThis$p=functionUncurryThis,aDataView=aDataView$1,toIndex$1=toIndex$2,log2=mathLog2,roundTiesToEven$1=mathRoundTiesToEven,pow$3=Math.pow,MIN_INFINITY16=65520,MIN_NORMAL16=61005353927612305e-21,REC_MIN_SUBNORMAL16=16777216,REC_SIGNIFICAND_DENOM16=1024,packFloat16=function(t){if(t!=t)return 32256;if(0===t)return(1/t==-1/0)<<15;var s=t<0;if(s&&(t=-t),t>=MIN_INFINITY16)return s<<15|31744;if(t<MIN_NORMAL16)return s<<15|roundTiesToEven$1(t*REC_MIN_SUBNORMAL16);var e=0|log2(t);if(-15===e)return s<<15|REC_SIGNIFICAND_DENOM16;var B=roundTiesToEven$1((t*pow$3(2,-e)-1)*REC_SIGNIFICAND_DENOM16);return B===REC_SIGNIFICAND_DENOM16?s<<15|e+16<<10:s<<15|e+15<<10|B},setUint16=uncurryThis$p(DataView.prototype.setUint16);$$L({target:"DataView",proto:!0},{setFloat16:function(t,s){setUint16(aDataView(this),toIndex$1(t),packFloat16(+s),arguments.length>2&&arguments[2])}});var makeBuiltIn=makeBuiltInExports,defineProperty$1=objectDefineProperty,defineBuiltInAccessor$6=function(t,s,e){return e.get&&makeBuiltIn(e.get,s,{getter:!0}),e.set&&makeBuiltIn(e.set,s,{setter:!0}),defineProperty$1.f(t,s,e)},arrayBufferBasicDetection="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,globalThis$s=globalThis_1,uncurryThisAccessor$2=functionUncurryThisAccessor,classof$7=classofRaw$2,ArrayBuffer$2=globalThis$s.ArrayBuffer,TypeError$4=globalThis$s.TypeError,arrayBufferByteLength$2=ArrayBuffer$2&&uncurryThisAccessor$2(ArrayBuffer$2.prototype,"byteLength","get")||function(t){if("ArrayBuffer"!==classof$7(t))throw new TypeError$4("ArrayBuffer expected");return t.byteLength},globalThis$r=globalThis_1,NATIVE_ARRAY_BUFFER$1=arrayBufferBasicDetection,arrayBufferByteLength$1=arrayBufferByteLength$2,DataView$2=globalThis$r.DataView,arrayBufferIsDetached=function(t){if(!NATIVE_ARRAY_BUFFER$1||0!==arrayBufferByteLength$1(t))return!1;try{return new DataView$2(t),!1}catch(t){return!0}},DESCRIPTORS$8=descriptors,defineBuiltInAccessor$5=defineBuiltInAccessor$6,isDetached$1=arrayBufferIsDetached,ArrayBufferPrototype$1=ArrayBuffer.prototype;DESCRIPTORS$8&&!("detached"in ArrayBufferPrototype$1)&&defineBuiltInAccessor$5(ArrayBufferPrototype$1,"detached",{configurable:!0,get:function(){return isDetached$1(this)}});var WorkerThreads,channel$1,buffer,$detach,isDetached=arrayBufferIsDetached,$TypeError$e=TypeError,arrayBufferNotDetached=function(t){if(isDetached(t))throw new $TypeError$e("ArrayBuffer is detached");return t},globalThis$q=globalThis_1,userAgent$1=environmentUserAgent,classof$6=classofRaw$2,userAgentStartsWith=function(t){return userAgent$1.slice(0,t.length)===t},environment=userAgentStartsWith("Bun/")?"BUN":userAgentStartsWith("Cloudflare-Workers")?"CLOUDFLARE":userAgentStartsWith("Deno/")?"DENO":userAgentStartsWith("Node.js/")?"NODE":globalThis$q.Bun&&"string"==typeof Bun.version?"BUN":globalThis$q.Deno&&"object"==typeof Deno.version?"DENO":"process"===classof$6(globalThis$q.process)?"NODE":globalThis$q.window&&globalThis$q.document?"BROWSER":"REST",ENVIRONMENT$2=environment,environmentIsNode="NODE"===ENVIRONMENT$2,globalThis$p=globalThis_1,IS_NODE$1=environmentIsNode,getBuiltInNodeModule$1=function(t){if(IS_NODE$1){try{return globalThis$p.process.getBuiltinModule(t)}catch(t){}try{return Function('return require("'+t+'")')()}catch(t){}}},globalThis$o=globalThis_1,fails$f=fails$t,V8=environmentV8Version,ENVIRONMENT$1=environment,structuredClone$3=globalThis$o.structuredClone,structuredCloneProperTransfer=!!structuredClone$3&&!fails$f(function(){if("DENO"===ENVIRONMENT$1&&V8>92||"NODE"===ENVIRONMENT$1&&V8>94||"BROWSER"===ENVIRONMENT$1&&V8>97)return!1;var t=new ArrayBuffer(8),s=structuredClone$3(t,{transfer:[t]});return 0!==t.byteLength||8!==s.byteLength}),globalThis$n=globalThis_1,getBuiltInNodeModule=getBuiltInNodeModule$1,PROPER_STRUCTURED_CLONE_TRANSFER$2=structuredCloneProperTransfer,structuredClone$2=globalThis$n.structuredClone,$ArrayBuffer=globalThis$n.ArrayBuffer,$MessageChannel=globalThis$n.MessageChannel,detach=!1;if(PROPER_STRUCTURED_CLONE_TRANSFER$2)detach=function(t){structuredClone$2(t,{transfer:[t]})};else if($ArrayBuffer)try{$MessageChannel||(WorkerThreads=getBuiltInNodeModule("worker_threads"))&&($MessageChannel=WorkerThreads.MessageChannel),$MessageChannel&&(channel$1=new $MessageChannel,buffer=new $ArrayBuffer(2),$detach=function(t){channel$1.port1.postMessage(null,[t])},2===buffer.byteLength&&($detach(buffer),0===buffer.byteLength&&(detach=$detach)))}catch(t){}var detachTransferable$2=detach,globalThis$m=globalThis_1,uncurryThis$o=functionUncurryThis,uncurryThisAccessor$1=functionUncurryThisAccessor,toIndex=toIndex$2,notDetached$4=arrayBufferNotDetached,arrayBufferByteLength=arrayBufferByteLength$2,detachTransferable$1=detachTransferable$2,PROPER_STRUCTURED_CLONE_TRANSFER$1=structuredCloneProperTransfer,structuredClone$1=globalThis$m.structuredClone,ArrayBuffer$1=globalThis$m.ArrayBuffer,DataView$1=globalThis$m.DataView,min$3=Math.min,ArrayBufferPrototype=ArrayBuffer$1.prototype,DataViewPrototype=DataView$1.prototype,slice$4=uncurryThis$o(ArrayBufferPrototype.slice),isResizable=uncurryThisAccessor$1(ArrayBufferPrototype,"resizable","get"),maxByteLength=uncurryThisAccessor$1(ArrayBufferPrototype,"maxByteLength","get"),getInt8=uncurryThis$o(DataViewPrototype.getInt8),setInt8=uncurryThis$o(DataViewPrototype.setInt8),arrayBufferTransfer=(PROPER_STRUCTURED_CLONE_TRANSFER$1||detachTransferable$1)&&function(t,s,e){var B,i=arrayBufferByteLength(t),F=void 0===s?i:toIndex(s),Q=!isResizable||!isResizable(t);if(notDetached$4(t),PROPER_STRUCTURED_CLONE_TRANSFER$1&&(t=structuredClone$1(t,{transfer:[t]}),i===F&&(e||Q)))return t;if(i>=F&&(!e||Q))B=slice$4(t,0,F);else{var l=e&&!Q&&maxByteLength?{maxByteLength:maxByteLength(t)}:void 0;B=new ArrayBuffer$1(F,l);for(var U=new DataView$1(t),a=new DataView$1(B),g=min$3(F,i),I=0;I<g;I++)setInt8(a,I,getInt8(U,I))}return PROPER_STRUCTURED_CLONE_TRANSFER$1||detachTransferable$1(t),B},$$K=_export,$transfer$1=arrayBufferTransfer;$transfer$1&&$$K({target:"ArrayBuffer",proto:!0},{transfer:function(){return $transfer$1(this,arguments.length?arguments[0]:void 0,!0)}});var $$J=_export,$transfer=arrayBufferTransfer;$transfer&&$$J({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return $transfer(this,arguments.length?arguments[0]:void 0,!1)}});var isPrototypeOf$3=objectIsPrototypeOf,$TypeError$d=TypeError,anInstance$4=function(t,s){if(isPrototypeOf$3(s,t))return t;throw new $TypeError$d("Incorrect invocation")},defineBuiltIn$9=defineBuiltIn$b,defineBuiltIns$4=function(t,s,e){for(var B in s)defineBuiltIn$9(t,B,s[B],e);return t},classofRaw=classofRaw$2,uncurryThis$n=functionUncurryThis,functionUncurryThisClause=function(t){if("Function"===classofRaw(t))return uncurryThis$n(t)},uncurryThis$m=functionUncurryThisClause,aCallable$i=aCallable$l,NATIVE_BIND$1=functionBindNative,bind$4=functionUncurryThisClause(functionUncurryThisClause.bind),functionBindContext=function(t,s){return aCallable$i(t),void 0===s?t:NATIVE_BIND$1?bind$4(t,s):function(){return t.apply(s,arguments)}},getBuiltIn$e=getBuiltIn$j,call$q=functionCall,uncurryThis$l=functionUncurryThis,bind$3=functionBindContext,anObject$n=anObject$s,aCallable$h=aCallable$l,isNullOrUndefined$2=isNullOrUndefined$5,getMethod$9=getMethod$b,wellKnownSymbol$e=wellKnownSymbol$k,ASYNC_DISPOSE$2=wellKnownSymbol$e("asyncDispose"),DISPOSE$2=wellKnownSymbol$e("dispose"),push$6=uncurryThis$l([].push),getDisposeMethod=function(t,s){if("async-dispose"===s){var e=getMethod$9(t,ASYNC_DISPOSE$2);return void 0!==e||void 0===(e=getMethod$9(t,DISPOSE$2))?e:function(){var t=this;return new(getBuiltIn$e("Promise"))(function(s){call$q(e,t),s(void 0)})}}return getMethod$9(t,DISPOSE$2)},createDisposableResource=function(t,s,e){return arguments.length<3&&!isNullOrUndefined$2(t)&&(e=aCallable$h(getDisposeMethod(anObject$n(t),s))),void 0===e?function(){}:bind$3(e,t)},addDisposableResource$2=function(t,s,e,B){var i;if(arguments.length<4){if(isNullOrUndefined$2(s)&&"sync-dispose"===e)return;i=createDisposableResource(s,e)}else i=createDisposableResource(void 0,e,B);push$6(t.stack,i)},$$I=_export,DESCRIPTORS$7=descriptors,getBuiltIn$d=getBuiltIn$j,aCallable$g=aCallable$l,anInstance$3=anInstance$4,defineBuiltIn$8=defineBuiltIn$b,defineBuiltIns$3=defineBuiltIns$4,defineBuiltInAccessor$4=defineBuiltInAccessor$6,wellKnownSymbol$d=wellKnownSymbol$k,InternalStateModule$4=internalState,addDisposableResource$1=addDisposableResource$2,SuppressedError$1=getBuiltIn$d("SuppressedError"),$ReferenceError$1=ReferenceError,DISPOSE$1=wellKnownSymbol$d("dispose"),TO_STRING_TAG$4=wellKnownSymbol$d("toStringTag"),DISPOSABLE_STACK="DisposableStack",setInternalState$3=InternalStateModule$4.set,getDisposableStackInternalState=InternalStateModule$4.getterFor(DISPOSABLE_STACK),HINT$1="sync-dispose",DISPOSED$1="disposed",PENDING$1="pending",getPendingDisposableStackInternalState=function(t){var s=getDisposableStackInternalState(t);if(s.state===DISPOSED$1)throw new $ReferenceError$1(DISPOSABLE_STACK+" already disposed");return s},$DisposableStack=function(){setInternalState$3(anInstance$3(this,DisposableStackPrototype),{type:DISPOSABLE_STACK,state:PENDING$1,stack:[]}),DESCRIPTORS$7||(this.disposed=!1)},DisposableStackPrototype=$DisposableStack.prototype;defineBuiltIns$3(DisposableStackPrototype,{dispose:function(){var t=getDisposableStackInternalState(this);if(t.state!==DISPOSED$1){t.state=DISPOSED$1,DESCRIPTORS$7||(this.disposed=!0);for(var s,e=t.stack,B=e.length,i=!1;B;){var F=e[--B];e[B]=null;try{F()}catch(t){i?s=new SuppressedError$1(t,s):(i=!0,s=t)}}if(t.stack=null,i)throw s}},use:function(t){return addDisposableResource$1(getPendingDisposableStackInternalState(this),t,HINT$1),t},adopt:function(t,s){var e=getPendingDisposableStackInternalState(this);return aCallable$g(s),addDisposableResource$1(e,void 0,HINT$1,function(){s(t)}),t},defer:function(t){var s=getPendingDisposableStackInternalState(this);aCallable$g(t),addDisposableResource$1(s,void 0,HINT$1,t)},move:function(){var t=getPendingDisposableStackInternalState(this),s=new $DisposableStack;return getDisposableStackInternalState(s).stack=t.stack,t.stack=[],t.state=DISPOSED$1,DESCRIPTORS$7||(this.disposed=!0),s}}),DESCRIPTORS$7&&defineBuiltInAccessor$4(DisposableStackPrototype,"disposed",{configurable:!0,get:function(){return getDisposableStackInternalState(this).state===DISPOSED$1}}),defineBuiltIn$8(DisposableStackPrototype,DISPOSE$1,DisposableStackPrototype.dispose,{name:"dispose"}),defineBuiltIn$8(DisposableStackPrototype,TO_STRING_TAG$4,DISPOSABLE_STACK,{nonWritable:!0}),$$I({global:!0,constructor:!0},{DisposableStack:$DisposableStack});var IteratorPrototype$4,PrototypeOfArrayIteratorPrototype,arrayIterator$1,DESCRIPTORS$6=descriptors,definePropertyModule=objectDefineProperty,createPropertyDescriptor$1=createPropertyDescriptor$6,createProperty$3=function(t,s,e){DESCRIPTORS$6?definePropertyModule.f(t,s,createPropertyDescriptor$1(0,e)):t[s]=e},fails$e=fails$t,isCallable$8=isCallable$l,isObject$6=isObject$f,getPrototypeOf$3=objectGetPrototypeOf,defineBuiltIn$7=defineBuiltIn$b,wellKnownSymbol$c=wellKnownSymbol$k,ITERATOR$4=wellKnownSymbol$c("iterator");[].keys&&"next"in(arrayIterator$1=[].keys())&&(PrototypeOfArrayIteratorPrototype=getPrototypeOf$3(getPrototypeOf$3(arrayIterator$1)))!==Object.prototype&&(IteratorPrototype$4=PrototypeOfArrayIteratorPrototype);var NEW_ITERATOR_PROTOTYPE=!isObject$6(IteratorPrototype$4)||fails$e(function(){var t={};return IteratorPrototype$4[ITERATOR$4].call(t)!==t});NEW_ITERATOR_PROTOTYPE&&(IteratorPrototype$4={}),isCallable$8(IteratorPrototype$4[ITERATOR$4])||defineBuiltIn$7(IteratorPrototype$4,ITERATOR$4,function(){return this});var iteratorsCore={IteratorPrototype:IteratorPrototype$4},$$H=_export,globalThis$l=globalThis_1,anInstance$2=anInstance$4,anObject$m=anObject$s,isCallable$7=isCallable$l,getPrototypeOf$2=objectGetPrototypeOf,defineBuiltInAccessor$3=defineBuiltInAccessor$6,createProperty$2=createProperty$3,fails$d=fails$t,hasOwn$9=hasOwnProperty_1,wellKnownSymbol$b=wellKnownSymbol$k,IteratorPrototype$3=iteratorsCore.IteratorPrototype,DESCRIPTORS$5=descriptors,CONSTRUCTOR="constructor",ITERATOR$3="Iterator",TO_STRING_TAG$3=wellKnownSymbol$b("toStringTag"),$TypeError$c=TypeError,NativeIterator=globalThis$l[ITERATOR$3],FORCED$a=!isCallable$7(NativeIterator)||NativeIterator.prototype!==IteratorPrototype$3||!fails$d(function(){NativeIterator({})}),IteratorConstructor=function(){if(anInstance$2(this,IteratorPrototype$3),getPrototypeOf$2(this)===IteratorPrototype$3)throw new $TypeError$c("Abstract class Iterator not directly constructable")},defineIteratorPrototypeAccessor=function(t,s){DESCRIPTORS$5?defineBuiltInAccessor$3(IteratorPrototype$3,t,{configurable:!0,get:function(){return s},set:function(s){if(anObject$m(this),this===IteratorPrototype$3)throw new $TypeError$c("You can't redefine this property");hasOwn$9(this,t)?this[t]=s:createProperty$2(this,t,s)}}):IteratorPrototype$3[t]=s};hasOwn$9(IteratorPrototype$3,TO_STRING_TAG$3)||defineIteratorPrototypeAccessor(TO_STRING_TAG$3,ITERATOR$3),!FORCED$a&&hasOwn$9(IteratorPrototype$3,CONSTRUCTOR)&&IteratorPrototype$3[CONSTRUCTOR]!==Object||defineIteratorPrototypeAccessor(CONSTRUCTOR,IteratorConstructor),IteratorConstructor.prototype=IteratorPrototype$3,$$H({global:!0,constructor:!0,forced:FORCED$a},{Iterator:IteratorConstructor});var call$p=functionCall,defineBuiltIn$6=defineBuiltIn$b,getMethod$8=getMethod$b,hasOwn$8=hasOwnProperty_1,wellKnownSymbol$a=wellKnownSymbol$k,IteratorPrototype$2=iteratorsCore.IteratorPrototype,DISPOSE=wellKnownSymbol$a("dispose");hasOwn$8(IteratorPrototype$2,DISPOSE)||defineBuiltIn$6(IteratorPrototype$2,DISPOSE,function(){var t=getMethod$8(this,"return");t&&call$p(t,this)});var getIteratorDirect$g=function(t){return{iterator:t,next:t.next,done:!1}},$RangeError$4=RangeError,notANan=function(t){if(t==t)return t;throw new $RangeError$4("NaN is not allowed")},toIntegerOrInfinity$3=toIntegerOrInfinity$8,$RangeError$3=RangeError,toPositiveInteger$2=function(t){var s=toIntegerOrInfinity$3(t);if(s<0)throw new $RangeError$3("The argument can't be less than 0");return s},call$o=functionCall,anObject$l=anObject$s,getMethod$7=getMethod$b,iteratorClose$h=function(t,s,e){var B,i;anObject$l(t);try{if(!(B=getMethod$7(t,"return"))){if("throw"===s)throw e;return e}B=call$o(B,t)}catch(t){i=!0,B=t}if("throw"===s)throw e;if(i)throw B;return anObject$l(B),e},createIterResultObject$2=function(t,s){return{value:t,done:s}},iteratorClose$g=iteratorClose$h,iteratorCloseAll$1=function(t,s,e){for(var B=t.length-1;B>=0;B--)if(void 0!==t[B])try{e=iteratorClose$g(t[B].iterator,s,e)}catch(t){s="throw",e=t}if("throw"===s)throw e;return e},call$n=functionCall,create$4=objectCreate,createNonEnumerableProperty$2=createNonEnumerableProperty$7,defineBuiltIns$2=defineBuiltIns$4,wellKnownSymbol$9=wellKnownSymbol$k,InternalStateModule$3=internalState,getMethod$6=getMethod$b,IteratorPrototype$1=iteratorsCore.IteratorPrototype,createIterResultObject$1=createIterResultObject$2,iteratorClose$f=iteratorClose$h,iteratorCloseAll=iteratorCloseAll$1,TO_STRING_TAG$2=wellKnownSymbol$9("toStringTag"),ITERATOR_HELPER="IteratorHelper",WRAP_FOR_VALID_ITERATOR="WrapForValidIterator",NORMAL="normal",THROW="throw",setInternalState$2=InternalStateModule$3.set,createIteratorProxyPrototype=function(t){var s=InternalStateModule$3.getterFor(t?WRAP_FOR_VALID_ITERATOR:ITERATOR_HELPER);return defineBuiltIns$2(create$4(IteratorPrototype$1),{next:function(){var e=s(this);if(t)return e.nextHandler();if(e.done)return createIterResultObject$1(void 0,!0);try{var B=e.nextHandler();return e.returnHandlerResult?B:createIterResultObject$1(B,e.done)}catch(t){throw e.done=!0,t}},return:function(){var e=s(this),B=e.iterator;if(e.done=!0,t){var i=getMethod$6(B,"return");return i?call$n(i,B):createIterResultObject$1(void 0,!0)}if(e.inner)try{iteratorClose$f(e.inner.iterator,NORMAL)}catch(t){return iteratorClose$f(B,THROW,t)}if(e.openIters)try{iteratorCloseAll(e.openIters,NORMAL)}catch(t){return iteratorClose$f(B,THROW,t)}return B&&iteratorClose$f(B,NORMAL),createIterResultObject$1(void 0,!0)}})},WrapForValidIteratorPrototype=createIteratorProxyPrototype(!0),IteratorHelperPrototype=createIteratorProxyPrototype(!1);createNonEnumerableProperty$2(IteratorHelperPrototype,TO_STRING_TAG$2,"Iterator Helper");var iteratorCreateProxy=function(t,s,e){var B=function(B,i){i?(i.iterator=B.iterator,i.next=B.next):i=B,i.type=s?WRAP_FOR_VALID_ITERATOR:ITERATOR_HELPER,i.returnHandlerResult=!!e,i.nextHandler=t,i.counter=0,i.done=!1,setInternalState$2(this,i)};return B.prototype=s?WrapForValidIteratorPrototype:IteratorHelperPrototype,B},iteratorHelperThrowsOnInvalidIterator$4=function(t,s){var e="function"==typeof Iterator&&Iterator.prototype[t];if(e)try{e.call({next:null},s).next()}catch(t){return!0}},globalThis$k=globalThis_1,iteratorHelperWithoutClosingOnEarlyError$a=function(t,s){var e=globalThis$k.Iterator,B=e&&e.prototype,i=B&&B[t],F=!1;if(i)try{i.call({next:function(){return{done:!0}},return:function(){F=!0}},-1)}catch(t){t instanceof s||(F=!1)}if(!F)return i},$$G=_export,call$m=functionCall,anObject$k=anObject$s,getIteratorDirect$f=getIteratorDirect$g,notANaN$1=notANan,toPositiveInteger$1=toPositiveInteger$2,iteratorClose$e=iteratorClose$h,createIteratorProxy$5=iteratorCreateProxy,iteratorHelperThrowsOnInvalidIterator$3=iteratorHelperThrowsOnInvalidIterator$4,iteratorHelperWithoutClosingOnEarlyError$9=iteratorHelperWithoutClosingOnEarlyError$a,DROP_WITHOUT_THROWING_ON_INVALID_ITERATOR=!iteratorHelperThrowsOnInvalidIterator$3("drop",0),dropWithoutClosingOnEarlyError=!DROP_WITHOUT_THROWING_ON_INVALID_ITERATOR&&iteratorHelperWithoutClosingOnEarlyError$9("drop",RangeError),FORCED$9=DROP_WITHOUT_THROWING_ON_INVALID_ITERATOR||dropWithoutClosingOnEarlyError,IteratorProxy$5=createIteratorProxy$5(function(){for(var t,s=this.iterator,e=this.next;this.remaining;)if(this.remaining--,t=anObject$k(call$m(e,s)),this.done=!!t.done)return;if(t=anObject$k(call$m(e,s)),!(this.done=!!t.done))return t.value});$$G({target:"Iterator",proto:!0,real:!0,forced:FORCED$9},{drop:function(t){var s;anObject$k(this);try{s=toPositiveInteger$1(notANaN$1(+t))}catch(t){iteratorClose$e(this,"throw",t)}return dropWithoutClosingOnEarlyError?call$m(dropWithoutClosingOnEarlyError,this,s):new IteratorProxy$5(getIteratorDirect$f(this),{remaining:s})}});var iterators={},wellKnownSymbol$8=wellKnownSymbol$k,Iterators$1=iterators,ITERATOR$2=wellKnownSymbol$8("iterator"),ArrayPrototype=Array.prototype,isArrayIteratorMethod$1=function(t){return void 0!==t&&(Iterators$1.Array===t||ArrayPrototype[ITERATOR$2]===t)},classof$5=classof$c,getMethod$5=getMethod$b,isNullOrUndefined$1=isNullOrUndefined$5,Iterators=iterators,wellKnownSymbol$7=wellKnownSymbol$k,ITERATOR$1=wellKnownSymbol$7("iterator"),getIteratorMethod$4=function(t){if(!isNullOrUndefined$1(t))return getMethod$5(t,ITERATOR$1)||getMethod$5(t,"@@iterator")||Iterators[classof$5(t)]},call$l=functionCall,aCallable$f=aCallable$l,anObject$j=anObject$s,tryToString$1=tryToString$3,getIteratorMethod$3=getIteratorMethod$4,$TypeError$b=TypeError,getIterator$3=function(t,s){var e=arguments.length<2?getIteratorMethod$3(t):s;if(aCallable$f(e))return anObject$j(call$l(e,t));throw new $TypeError$b(tryToString$1(t)+" is not iterable")},bind$2=functionBindContext,call$k=functionCall,anObject$i=anObject$s,tryToString=tryToString$3,isArrayIteratorMethod=isArrayIteratorMethod$1,lengthOfArrayLike$2=lengthOfArrayLike$6,isPrototypeOf$2=objectIsPrototypeOf,getIterator$2=getIterator$3,getIteratorMethod$2=getIteratorMethod$4,iteratorClose$d=iteratorClose$h,$TypeError$a=TypeError,Result=function(t,s){this.stopped=t,this.result=s},ResultPrototype=Result.prototype,iterate$c=function(t,s,e){var B,i,F,Q,l,U,a,g=e&&e.that,I=!(!e||!e.AS_ENTRIES),c=!(!e||!e.IS_RECORD),n=!(!e||!e.IS_ITERATOR),r=!(!e||!e.INTERRUPTED),o=bind$2(s,g),d=function(t){return B&&iteratorClose$d(B,"normal"),new Result(!0,t)},C=function(t){return I?(anObject$i(t),r?o(t[0],t[1],d):o(t[0],t[1])):r?o(t,d):o(t)};if(c)B=t.iterator;else if(n)B=t;else{if(!(i=getIteratorMethod$2(t)))throw new $TypeError$a(tryToString(t)+" is not iterable");if(isArrayIteratorMethod(i)){for(F=0,Q=lengthOfArrayLike$2(t);Q>F;F++)if((l=C(t[F]))&&isPrototypeOf$2(ResultPrototype,l))return l;return new Result(!1)}B=getIterator$2(t,i)}for(U=c?t.next:B.next;!(a=call$k(U,B)).done;){try{l=C(a.value)}catch(t){iteratorClose$d(B,"throw",t)}if("object"==typeof l&&l&&isPrototypeOf$2(ResultPrototype,l))return l}return new Result(!1)},$$F=_export,call$j=functionCall,iterate$b=iterate$c,aCallable$e=aCallable$l,anObject$h=anObject$s,getIteratorDirect$e=getIteratorDirect$g,iteratorClose$c=iteratorClose$h,iteratorHelperWithoutClosingOnEarlyError$8=iteratorHelperWithoutClosingOnEarlyError$a,everyWithoutClosingOnEarlyError=iteratorHelperWithoutClosingOnEarlyError$8("every",TypeError);$$F({target:"Iterator",proto:!0,real:!0,forced:everyWithoutClosingOnEarlyError},{every:function(t){anObject$h(this);try{aCallable$e(t)}catch(t){iteratorClose$c(this,"throw",t)}if(everyWithoutClosingOnEarlyError)return call$j(everyWithoutClosingOnEarlyError,this,t);var s=getIteratorDirect$e(this),e=0;return!iterate$b(s,function(s,B){if(!t(s,e++))return B()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}});var anObject$g=anObject$s,iteratorClose$b=iteratorClose$h,callWithSafeIterationClosing$2=function(t,s,e,B){try{return B?s(anObject$g(e)[0],e[1]):s(e)}catch(s){iteratorClose$b(t,"throw",s)}},$$E=_export,call$i=functionCall,aCallable$d=aCallable$l,anObject$f=anObject$s,getIteratorDirect$d=getIteratorDirect$g,createIteratorProxy$4=iteratorCreateProxy,callWithSafeIterationClosing$1=callWithSafeIterationClosing$2,iteratorClose$a=iteratorClose$h,iteratorHelperThrowsOnInvalidIterator$2=iteratorHelperThrowsOnInvalidIterator$4,iteratorHelperWithoutClosingOnEarlyError$7=iteratorHelperWithoutClosingOnEarlyError$a,FILTER_WITHOUT_THROWING_ON_INVALID_ITERATOR=!iteratorHelperThrowsOnInvalidIterator$2("filter",function(){}),filterWithoutClosingOnEarlyError=!FILTER_WITHOUT_THROWING_ON_INVALID_ITERATOR&&iteratorHelperWithoutClosingOnEarlyError$7("filter",TypeError),FORCED$8=FILTER_WITHOUT_THROWING_ON_INVALID_ITERATOR||filterWithoutClosingOnEarlyError,IteratorProxy$4=createIteratorProxy$4(function(){for(var t,s,e=this.iterator,B=this.predicate,i=this.next;;){if(t=anObject$f(call$i(i,e)),this.done=!!t.done)return;if(s=t.value,callWithSafeIterationClosing$1(e,B,[s,this.counter++],!0))return s}});$$E({target:"Iterator",proto:!0,real:!0,forced:FORCED$8},{filter:function(t){anObject$f(this);try{aCallable$d(t)}catch(t){iteratorClose$a(this,"throw",t)}return filterWithoutClosingOnEarlyError?call$i(filterWithoutClosingOnEarlyError,this,t):new IteratorProxy$4(getIteratorDirect$d(this),{predicate:t})}});var $$D=_export,call$h=functionCall,iterate$a=iterate$c,aCallable$c=aCallable$l,anObject$e=anObject$s,getIteratorDirect$c=getIteratorDirect$g,iteratorClose$9=iteratorClose$h,iteratorHelperWithoutClosingOnEarlyError$6=iteratorHelperWithoutClosingOnEarlyError$a,findWithoutClosingOnEarlyError=iteratorHelperWithoutClosingOnEarlyError$6("find",TypeError);$$D({target:"Iterator",proto:!0,real:!0,forced:findWithoutClosingOnEarlyError},{find:function(t){anObject$e(this);try{aCallable$c(t)}catch(t){iteratorClose$9(this,"throw",t)}if(findWithoutClosingOnEarlyError)return call$h(findWithoutClosingOnEarlyError,this,t);var s=getIteratorDirect$c(this),e=0;return iterate$a(s,function(s,B){if(t(s,e++))return B(s)},{IS_RECORD:!0,INTERRUPTED:!0}).result}});var call$g=functionCall,anObject$d=anObject$s,getIteratorDirect$b=getIteratorDirect$g,getIteratorMethod$1=getIteratorMethod$4,getIteratorFlattenable$2=function(t,s){s&&"string"==typeof t||anObject$d(t);var e=getIteratorMethod$1(t);return getIteratorDirect$b(anObject$d(void 0!==e?call$g(e,t):t))},$$C=_export,call$f=functionCall,aCallable$b=aCallable$l,anObject$c=anObject$s,getIteratorDirect$a=getIteratorDirect$g,getIteratorFlattenable$1=getIteratorFlattenable$2,createIteratorProxy$3=iteratorCreateProxy,iteratorClose$8=iteratorClose$h,iteratorHelperThrowsOnInvalidIterator$1=iteratorHelperThrowsOnInvalidIterator$4,iteratorHelperWithoutClosingOnEarlyError$5=iteratorHelperWithoutClosingOnEarlyError$a,FLAT_MAP_WITHOUT_THROWING_ON_INVALID_ITERATOR=!iteratorHelperThrowsOnInvalidIterator$1("flatMap",function(){}),flatMapWithoutClosingOnEarlyError=!FLAT_MAP_WITHOUT_THROWING_ON_INVALID_ITERATOR&&iteratorHelperWithoutClosingOnEarlyError$5("flatMap",TypeError),FORCED$7=FLAT_MAP_WITHOUT_THROWING_ON_INVALID_ITERATOR||flatMapWithoutClosingOnEarlyError,IteratorProxy$3=createIteratorProxy$3(function(){for(var t,s,e=this.iterator,B=this.mapper;;){if(s=this.inner)try{if(!(t=anObject$c(call$f(s.next,s.iterator))).done)return t.value;this.inner=null}catch(t){iteratorClose$8(e,"throw",t)}if(t=anObject$c(call$f(this.next,e)),this.done=!!t.done)return;try{this.inner=getIteratorFlattenable$1(B(t.value,this.counter++),!1)}catch(t){iteratorClose$8(e,"throw",t)}}});$$C({target:"Iterator",proto:!0,real:!0,forced:FORCED$7},{flatMap:function(t){anObject$c(this);try{aCallable$b(t)}catch(t){iteratorClose$8(this,"throw",t)}return flatMapWithoutClosingOnEarlyError?call$f(flatMapWithoutClosingOnEarlyError,this,t):new IteratorProxy$3(getIteratorDirect$a(this),{mapper:t,inner:null})}});var $$B=_export,call$e=functionCall,iterate$9=iterate$c,aCallable$a=aCallable$l,anObject$b=anObject$s,getIteratorDirect$9=getIteratorDirect$g,iteratorClose$7=iteratorClose$h,iteratorHelperWithoutClosingOnEarlyError$4=iteratorHelperWithoutClosingOnEarlyError$a,forEachWithoutClosingOnEarlyError=iteratorHelperWithoutClosingOnEarlyError$4("forEach",TypeError);$$B({target:"Iterator",proto:!0,real:!0,forced:forEachWithoutClosingOnEarlyError},{forEach:function(t){anObject$b(this);try{aCallable$a(t)}catch(t){iteratorClose$7(this,"throw",t)}if(forEachWithoutClosingOnEarlyError)return call$e(forEachWithoutClosingOnEarlyError,this,t);var s=getIteratorDirect$9(this),e=0;iterate$9(s,function(s){t(s,e++)},{IS_RECORD:!0})}});var $$A=_export,call$d=functionCall,toObject$1=toObject$5,isPrototypeOf$1=objectIsPrototypeOf,IteratorPrototype=iteratorsCore.IteratorPrototype,createIteratorProxy$2=iteratorCreateProxy,getIteratorFlattenable=getIteratorFlattenable$2,FORCED$6=function(){try{Iterator.from({return:null}).return()}catch(t){return!0}}(),IteratorProxy$2=createIteratorProxy$2(function(){return call$d(this.next,this.iterator)},!0);$$A({target:"Iterator",stat:!0,forced:FORCED$6},{from:function(t){var s=getIteratorFlattenable("string"==typeof t?toObject$1(t):t,!0);return isPrototypeOf$1(IteratorPrototype,s.iterator)?s.iterator:new IteratorProxy$2(s)}});var $$z=_export,call$c=functionCall,aCallable$9=aCallable$l,anObject$a=anObject$s,getIteratorDirect$8=getIteratorDirect$g,createIteratorProxy$1=iteratorCreateProxy,callWithSafeIterationClosing=callWithSafeIterationClosing$2,iteratorClose$6=iteratorClose$h,iteratorHelperThrowsOnInvalidIterator=iteratorHelperThrowsOnInvalidIterator$4,iteratorHelperWithoutClosingOnEarlyError$3=iteratorHelperWithoutClosingOnEarlyError$a,MAP_WITHOUT_THROWING_ON_INVALID_ITERATOR=!iteratorHelperThrowsOnInvalidIterator("map",function(){}),mapWithoutClosingOnEarlyError=!MAP_WITHOUT_THROWING_ON_INVALID_ITERATOR&&iteratorHelperWithoutClosingOnEarlyError$3("map",TypeError),FORCED$5=MAP_WITHOUT_THROWING_ON_INVALID_ITERATOR||mapWithoutClosingOnEarlyError,IteratorProxy$1=createIteratorProxy$1(function(){var t=this.iterator,s=anObject$a(call$c(this.next,t));if(!(this.done=!!s.done))return callWithSafeIterationClosing(t,this.mapper,[s.value,this.counter++],!0)});$$z({target:"Iterator",proto:!0,real:!0,forced:FORCED$5},{map:function(t){anObject$a(this);try{aCallable$9(t)}catch(t){iteratorClose$6(this,"throw",t)}return mapWithoutClosingOnEarlyError?call$c(mapWithoutClosingOnEarlyError,this,t):new IteratorProxy$1(getIteratorDirect$8(this),{mapper:t})}});var NATIVE_BIND=functionBindNative,FunctionPrototype=Function.prototype,apply$5=FunctionPrototype.apply,call$b=FunctionPrototype.call,functionApply="object"==typeof Reflect&&Reflect.apply||(NATIVE_BIND?call$b.bind(apply$5):function(){return call$b.apply(apply$5,arguments)}),$$y=_export,iterate$8=iterate$c,aCallable$8=aCallable$l,anObject$9=anObject$s,getIteratorDirect$7=getIteratorDirect$g,iteratorClose$5=iteratorClose$h,iteratorHelperWithoutClosingOnEarlyError$2=iteratorHelperWithoutClosingOnEarlyError$a,apply$4=functionApply,fails$c=fails$t,$TypeError$9=TypeError,FAILS_ON_INITIAL_UNDEFINED=fails$c(function(){[].keys().reduce(function(){},void 0)}),reduceWithoutClosingOnEarlyError=!FAILS_ON_INITIAL_UNDEFINED&&iteratorHelperWithoutClosingOnEarlyError$2("reduce",$TypeError$9);$$y({target:"Iterator",proto:!0,real:!0,forced:FAILS_ON_INITIAL_UNDEFINED||reduceWithoutClosingOnEarlyError},{reduce:function(t){anObject$9(this);try{aCallable$8(t)}catch(t){iteratorClose$5(this,"throw",t)}var s=arguments.length<2,e=s?void 0:arguments[1];if(reduceWithoutClosingOnEarlyError)return apply$4(reduceWithoutClosingOnEarlyError,this,s?[t]:[t,e]);var B=getIteratorDirect$7(this),i=0;if(iterate$8(B,function(B){s?(s=!1,e=B):e=t(e,B,i),i++},{IS_RECORD:!0}),s)throw new $TypeError$9("Reduce of empty iterator with no initial value");return e}});var $$x=_export,call$a=functionCall,iterate$7=iterate$c,aCallable$7=aCallable$l,anObject$8=anObject$s,getIteratorDirect$6=getIteratorDirect$g,iteratorClose$4=iteratorClose$h,iteratorHelperWithoutClosingOnEarlyError$1=iteratorHelperWithoutClosingOnEarlyError$a,someWithoutClosingOnEarlyError=iteratorHelperWithoutClosingOnEarlyError$1("some",TypeError);$$x({target:"Iterator",proto:!0,real:!0,forced:someWithoutClosingOnEarlyError},{some:function(t){anObject$8(this);try{aCallable$7(t)}catch(t){iteratorClose$4(this,"throw",t)}if(someWithoutClosingOnEarlyError)return call$a(someWithoutClosingOnEarlyError,this,t);var s=getIteratorDirect$6(this),e=0;return iterate$7(s,function(s,B){if(t(s,e++))return B()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}});var $$w=_export,call$9=functionCall,anObject$7=anObject$s,getIteratorDirect$5=getIteratorDirect$g,notANaN=notANan,toPositiveInteger=toPositiveInteger$2,createIteratorProxy=iteratorCreateProxy,iteratorClose$3=iteratorClose$h,iteratorHelperWithoutClosingOnEarlyError=iteratorHelperWithoutClosingOnEarlyError$a,takeWithoutClosingOnEarlyError=iteratorHelperWithoutClosingOnEarlyError("take",RangeError),IteratorProxy=createIteratorProxy(function(){var t=this.iterator;if(!this.remaining--)return this.done=!0,iteratorClose$3(t,"normal",void 0);var s=anObject$7(call$9(this.next,t));return(this.done=!!s.done)?void 0:s.value});$$w({target:"Iterator",proto:!0,real:!0,forced:takeWithoutClosingOnEarlyError},{take:function(t){var s;anObject$7(this);try{s=toPositiveInteger(notANaN(+t))}catch(t){iteratorClose$3(this,"throw",t)}return takeWithoutClosingOnEarlyError?call$9(takeWithoutClosingOnEarlyError,this,s):new IteratorProxy(getIteratorDirect$5(this),{remaining:s})}});var $$v=_export,anObject$6=anObject$s,iterate$6=iterate$c,getIteratorDirect$4=getIteratorDirect$g,push$5=[].push;$$v({target:"Iterator",proto:!0,real:!0},{toArray:function(){var t=[];return iterate$6(getIteratorDirect$4(anObject$6(this)),push$5,{that:t,IS_RECORD:!0}),t}});var uncurryThis$k=functionUncurryThis,MapPrototype=Map.prototype,mapHelpers={Map:Map,set:uncurryThis$k(MapPrototype.set),get:uncurryThis$k(MapPrototype.get),has:uncurryThis$k(MapPrototype.has),remove:uncurryThis$k(MapPrototype.delete)},$$u=_export,uncurryThis$j=functionUncurryThis,aCallable$6=aCallable$l,requireObjectCoercible$5=requireObjectCoercible$9,iterate$5=iterate$c,MapHelpers$1=mapHelpers,fails$b=fails$t,Map$2=MapHelpers$1.Map,has$6=MapHelpers$1.has,get$2=MapHelpers$1.get,set$3=MapHelpers$1.set,push$4=uncurryThis$j([].push),DOES_NOT_WORK_WITH_PRIMITIVES$1=fails$b(function(){return 1!==Map$2.groupBy("ab",function(t){return t}).get("a").length});$$u({target:"Map",stat:!0,forced:DOES_NOT_WORK_WITH_PRIMITIVES$1},{groupBy:function(t,s){requireObjectCoercible$5(t),aCallable$6(s);var e=new Map$2,B=0;return iterate$5(t,function(t){var i=s(t,B++);has$6(e,i)?push$4(get$2(e,i),t):set$3(e,i,[t])}),e}});var mathSign=Math.sign||function(t){var s=+t;return 0===s||s!=s?s:s<0?-1:1},sign$2=mathSign,roundTiesToEven=mathRoundTiesToEven,abs$3=Math.abs,EPSILON=2220446049250313e-31,mathFloatRound=function(t,s,e,B){var i=+t,F=abs$3(i),Q=sign$2(i);if(F<B)return Q*roundTiesToEven(F/B/s)*B*s;var l=(1+s/EPSILON)*F,U=l-(l-F);return U>e||U!=U?Q*(1/0):Q*U},$$t=_export,floatRound=mathFloatRound,FLOAT16_EPSILON=.0009765625,FLOAT16_MAX_VALUE=65504,FLOAT16_MIN_VALUE=6103515625e-14;$$t({target:"Math",stat:!0},{f16round:function(t){return floatRound(t,FLOAT16_EPSILON,FLOAT16_MAX_VALUE,FLOAT16_MIN_VALUE)}});var $$s=_export,uncurryThis$i=functionUncurryThis,iterate$4=iterate$c,$RangeError$2=RangeError,$TypeError$8=TypeError,$Infinity=1/0,$NaN=NaN,abs$2=Math.abs,pow$2=Math.pow,push$3=uncurryThis$i([].push),POW_2_1023=pow$2(2,1023),MAX_SAFE_INTEGER=pow$2(2,53)-1,MAX_DOUBLE=Number.MAX_VALUE,MAX_ULP=pow$2(2,971),NOT_A_NUMBER={},MINUS_INFINITY={},PLUS_INFINITY={},MINUS_ZERO={},FINITE={},twosum=function(t,s){var e=t+s;return{hi:e,lo:s-(e-t)}};$$s({target:"Math",stat:!0},{sumPrecise:function(t){var s=[],e=0,B=MINUS_ZERO;switch(iterate$4(t,function(t){if(++e>=MAX_SAFE_INTEGER)throw new $RangeError$2("Maximum allowed index exceeded");if("number"!=typeof t)throw new $TypeError$8("Value is not a number");B!==NOT_A_NUMBER&&(t!=t?B=NOT_A_NUMBER:t===$Infinity?B=B===MINUS_INFINITY?NOT_A_NUMBER:PLUS_INFINITY:t===-$Infinity?B=B===PLUS_INFINITY?NOT_A_NUMBER:MINUS_INFINITY:0===t&&1/t!==$Infinity||B!==MINUS_ZERO&&B!==FINITE||(B=FINITE,push$3(s,t)))}),B){case NOT_A_NUMBER:return $NaN;case MINUS_INFINITY:return-$Infinity;case PLUS_INFINITY:return $Infinity;case MINUS_ZERO:return-0}for(var i,F,Q,l,U,a,g=[],I=0,c=0;c<s.length;c++){i=s[c];for(var n=0,r=0;r<g.length;r++){if(F=g[r],abs$2(i)<abs$2(F)&&(a=i,i=F,F=a),l=(Q=twosum(i,F)).hi,U=Q.lo,abs$2(l)===$Infinity){var o=l===$Infinity?1:-1;I+=o,abs$2(i=i-o*POW_2_1023-o*POW_2_1023)<abs$2(F)&&(a=i,i=F,F=a),l=(Q=twosum(i,F)).hi,U=Q.lo}0!==U&&(g[n++]=U),i=l}g.length=n,0!==i&&push$3(g,i)}var d=g.length-1;if(l=0,U=0,0!==I){var C=d>=0?g[d]:0;if(d--,abs$2(I)>1||I>0&&C>0||I<0&&C<0)return I>0?$Infinity:-$Infinity;if(l=(Q=twosum(I*POW_2_1023,C/2)).hi,U=Q.lo,U*=2,abs$2(2*l)===$Infinity)return l>0?l===POW_2_1023&&U===-MAX_ULP/2&&d>=0&&g[d]<0?MAX_DOUBLE:$Infinity:l===-POW_2_1023&&U===MAX_ULP/2&&d>=0&&g[d]>0?-MAX_DOUBLE:-$Infinity;0!==U&&(g[++d]=U,U=0),l*=2}for(;d>=0&&(l=(Q=twosum(l,g[d--])).hi,0===(U=Q.lo)););return d>=0&&(U<0&&g[d]<0||U>0&&g[d]>0)&&(F=2*U)===(i=l+F)-l&&(l=i),l}});var $$r=_export,createProperty$1=createProperty$3,getBuiltIn$c=getBuiltIn$j,uncurryThis$h=functionUncurryThis,aCallable$5=aCallable$l,requireObjectCoercible$4=requireObjectCoercible$9,toPropertyKey=toPropertyKey$3,iterate$3=iterate$c,fails$a=fails$t,nativeGroupBy=Object.groupBy,create$3=getBuiltIn$c("Object","create"),push$2=uncurryThis$h([].push),DOES_NOT_WORK_WITH_PRIMITIVES=!nativeGroupBy||fails$a(function(){return 1!==nativeGroupBy("ab",function(t){return t}).a.length});$$r({target:"Object",stat:!0,forced:DOES_NOT_WORK_WITH_PRIMITIVES},{groupBy:function(t,s){requireObjectCoercible$4(t),aCallable$5(s);var e=create$3(null),B=0;return iterate$3(t,function(t){var i=toPropertyKey(s(t,B++));i in e?push$2(e[i],t):createProperty$1(e,i,[t])}),e}});var uncurryThis$g=functionUncurryThis,arraySlice$2=uncurryThis$g([].slice),newPromiseCapability={},aCallable$4=aCallable$l,$TypeError$7=TypeError,PromiseCapability=function(t){var s,e;this.promise=new t(function(t,B){if(void 0!==s||void 0!==e)throw new $TypeError$7("Bad Promise constructor");s=t,e=B}),this.resolve=aCallable$4(s),this.reject=aCallable$4(e)};newPromiseCapability.f=function(t){return new PromiseCapability(t)};var perform$1=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},$$q=_export,globalThis$j=globalThis_1,apply$3=functionApply,slice$3=arraySlice$2,newPromiseCapabilityModule$1=newPromiseCapability,aCallable$3=aCallable$l,perform=perform$1,Promise$4=globalThis$j.Promise,ACCEPT_ARGUMENTS=!1,FORCED$4=!Promise$4||!Promise$4.try||perform(function(){Promise$4.try(function(t){ACCEPT_ARGUMENTS=8===t},8)}).error||!ACCEPT_ARGUMENTS;$$q({target:"Promise",stat:!0,forced:FORCED$4},{try:function(t){var s=arguments.length>1?slice$3(arguments,1):[],e=newPromiseCapabilityModule$1.f(this),B=perform(function(){return apply$3(aCallable$3(t),void 0,s)});return(B.error?e.reject:e.resolve)(B.value),e.promise}});var $$p=_export,newPromiseCapabilityModule=newPromiseCapability;$$p({target:"Promise",stat:!0},{withResolvers:function(){var t=newPromiseCapabilityModule.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}});var uncurryThis$f=functionUncurryThis,fails$9=fails$t,isCallable$6=isCallable$l,classof$4=classof$c,getBuiltIn$b=getBuiltIn$j,inspectSource=inspectSource$2,noop$4=function(){},construct=getBuiltIn$b("Reflect","construct"),constructorRegExp=/^\s*(?:class|function)\b/,exec$2=uncurryThis$f(constructorRegExp.exec),INCORRECT_TO_STRING=!constructorRegExp.test(noop$4),isConstructorModern=function(t){if(!isCallable$6(t))return!1;try{return construct(noop$4,[],t),!0}catch(t){return!1}},isConstructorLegacy=function(t){if(!isCallable$6(t))return!1;switch(classof$4(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return INCORRECT_TO_STRING||!!exec$2(constructorRegExp,inspectSource(t))}catch(t){return!0}};isConstructorLegacy.sham=!0;var AsyncIteratorPrototype$2,prototype,isConstructor$2=!construct||fails$9(function(){var t;return isConstructorModern(isConstructorModern.call)||!isConstructorModern(Object)||!isConstructorModern(function(){t=!0})||t})?isConstructorLegacy:isConstructorModern,globalThis$i=globalThis_1,shared=sharedStoreExports,isCallable$5=isCallable$l,getPrototypeOf$1=objectGetPrototypeOf,defineBuiltIn$5=defineBuiltIn$b,wellKnownSymbol$6=wellKnownSymbol$k,USE_FUNCTION_CONSTRUCTOR="USE_FUNCTION_CONSTRUCTOR",ASYNC_ITERATOR$2=wellKnownSymbol$6("asyncIterator"),AsyncIterator=globalThis$i.AsyncIterator,PassedAsyncIteratorPrototype=shared.AsyncIteratorPrototype;if(PassedAsyncIteratorPrototype)AsyncIteratorPrototype$2=PassedAsyncIteratorPrototype;else if(isCallable$5(AsyncIterator))AsyncIteratorPrototype$2=AsyncIterator.prototype;else if(shared[USE_FUNCTION_CONSTRUCTOR]||globalThis$i[USE_FUNCTION_CONSTRUCTOR])try{prototype=getPrototypeOf$1(getPrototypeOf$1(getPrototypeOf$1(Function("return async function*(){}()")()))),getPrototypeOf$1(prototype)===Object.prototype&&(AsyncIteratorPrototype$2=prototype)}catch(t){}AsyncIteratorPrototype$2||(AsyncIteratorPrototype$2={}),isCallable$5(AsyncIteratorPrototype$2[ASYNC_ITERATOR$2])||defineBuiltIn$5(AsyncIteratorPrototype$2,ASYNC_ITERATOR$2,function(){return this});var asyncIteratorPrototype=AsyncIteratorPrototype$2,call$8=functionCall,anObject$5=anObject$s,create$2=objectCreate,getMethod$4=getMethod$b,defineBuiltIns$1=defineBuiltIns$4,InternalStateModule$2=internalState,iteratorClose$2=iteratorClose$h,getBuiltIn$a=getBuiltIn$j,AsyncIteratorPrototype$1=asyncIteratorPrototype,createIterResultObject=createIterResultObject$2,Promise$3=getBuiltIn$a("Promise"),ASYNC_FROM_SYNC_ITERATOR="AsyncFromSyncIterator",setInternalState$1=InternalStateModule$2.set,getInternalState$1=InternalStateModule$2.getterFor(ASYNC_FROM_SYNC_ITERATOR),asyncFromSyncIteratorContinuation=function(t,s,e,B,i){var F=t.done;Promise$3.resolve(t.value).then(function(t){s(createIterResultObject(t,F))},function(t){if(!F&&i)try{iteratorClose$2(B,"throw",t)}catch(s){t=s}e(t)})},AsyncFromSyncIterator$2=function(t){t.type=ASYNC_FROM_SYNC_ITERATOR,setInternalState$1(this,t)};AsyncFromSyncIterator$2.prototype=defineBuiltIns$1(create$2(AsyncIteratorPrototype$1),{next:function(){var t=getInternalState$1(this);return new Promise$3(function(s,e){var B=anObject$5(call$8(t.next,t.iterator));asyncFromSyncIteratorContinuation(B,s,e,t.iterator,!0)})},return:function(){var t=getInternalState$1(this).iterator;return new Promise$3(function(s,e){var B=getMethod$4(t,"return");if(void 0===B)return s(createIterResultObject(void 0,!0));var i=anObject$5(call$8(B,t));asyncFromSyncIteratorContinuation(i,s,e,t)})}});var asyncFromSyncIterator=AsyncFromSyncIterator$2,call$7=functionCall,AsyncFromSyncIterator$1=asyncFromSyncIterator,anObject$4=anObject$s,getIterator$1=getIterator$3,getIteratorDirect$3=getIteratorDirect$g,getMethod$3=getMethod$b,wellKnownSymbol$5=wellKnownSymbol$k,ASYNC_ITERATOR$1=wellKnownSymbol$5("asyncIterator"),getAsyncIterator$1=function(t,s){var e=arguments.length<2?getMethod$3(t,ASYNC_ITERATOR$1):s;return e?anObject$4(call$7(e,t)):new AsyncFromSyncIterator$1(getIteratorDirect$3(getIterator$1(t)))},globalThis$h=globalThis_1,getBuiltInPrototypeMethod$1=function(t,s){var e=globalThis$h[t],B=e&&e.prototype;return B&&B[s]},call$6=functionCall,getBuiltIn$9=getBuiltIn$j,getMethod$2=getMethod$b,asyncIteratorClose=function(t,s,e,B){try{var i=getMethod$2(t,"return");if(i)return getBuiltIn$9("Promise").resolve(call$6(i,t)).then(function(){s(e)},function(t){B(t)})}catch(t){return B(t)}s(e)},call$5=functionCall,aCallable$2=aCallable$l,anObject$3=anObject$s,isObject$5=isObject$f,doesNotExceedSafeInteger=doesNotExceedSafeInteger$2,getBuiltIn$8=getBuiltIn$j,getIteratorDirect$2=getIteratorDirect$g,closeAsyncIteration=asyncIteratorClose,createMethod$1=function(t){var s=0===t,e=1===t,B=2===t,i=3===t;return function(t,F,Q){anObject$3(t);var l=void 0!==F;!l&&s||aCallable$2(F);var U=getIteratorDirect$2(t),a=getBuiltIn$8("Promise"),g=U.iterator,I=U.next,c=0;return new a(function(t,U){var n=function(t){closeAsyncIteration(g,U,t,U)},r=function(){try{if(l)try{doesNotExceedSafeInteger(c)}catch(t){n(t)}a.resolve(anObject$3(call$5(I,g))).then(function(I){try{if(anObject$3(I).done)s?(Q.length=c,t(Q)):t(!i&&(B||void 0));else{var o=I.value;try{if(l){var d=F(o,c),C=function(F){if(e)r();else if(B)F?r():closeAsyncIteration(g,t,!1,U);else if(s)try{Q[c++]=F,r()}catch(t){n(t)}else F?closeAsyncIteration(g,t,i||o,U):r()};isObject$5(d)?a.resolve(d).then(C,n):C(d)}else Q[c++]=o,r()}catch(t){n(t)}}}catch(t){U(t)}},U)}catch(t){U(t)}};r()})}},asyncIteratorIteration={toArray:createMethod$1(0)},bind$1=functionBindContext,uncurryThis$e=functionUncurryThis,toObject=toObject$5,isConstructor$1=isConstructor$2,getAsyncIterator=getAsyncIterator$1,getIterator=getIterator$3,getIteratorDirect$1=getIteratorDirect$g,getIteratorMethod=getIteratorMethod$4,getMethod$1=getMethod$b,getBuiltIn$7=getBuiltIn$j,getBuiltInPrototypeMethod=getBuiltInPrototypeMethod$1,wellKnownSymbol$4=wellKnownSymbol$k,AsyncFromSyncIterator=asyncFromSyncIterator,toArray=asyncIteratorIteration.toArray,ASYNC_ITERATOR=wellKnownSymbol$4("asyncIterator"),arrayIterator=uncurryThis$e(getBuiltInPrototypeMethod("Array","values")),arrayIteratorNext=uncurryThis$e(arrayIterator([]).next),safeArrayIterator=function(){return new SafeArrayIterator(this)},SafeArrayIterator=function(t){this.iterator=arrayIterator(t)};SafeArrayIterator.prototype.next=function(){return arrayIteratorNext(this.iterator)};var arrayFromAsync=function(t){var s=this,e=arguments.length,B=e>1?arguments[1]:void 0,i=e>2?arguments[2]:void 0;return new(getBuiltIn$7("Promise"))(function(e){var F=toObject(t);void 0!==B&&(B=bind$1(B,i));var Q=getMethod$1(F,ASYNC_ITERATOR),l=Q?void 0:getIteratorMethod(F)||safeArrayIterator,U=isConstructor$1(s)?new s:[],a=Q?getAsyncIterator(F,Q):new AsyncFromSyncIterator(getIteratorDirect$1(getIterator(F,l)));e(toArray(a,B,U))})},$$o=_export,fromAsync=arrayFromAsync,fails$8=fails$t,nativeFromAsync=Array.fromAsync,INCORRECT_CONSTRUCTURING=!nativeFromAsync||fails$8(function(){var t=0;return nativeFromAsync.call(function(){return t++,[]},{length:0}),1!==t});$$o({target:"Array",stat:!0,forced:INCORRECT_CONSTRUCTURING},{fromAsync:fromAsync});var $$n=_export,DESCRIPTORS$4=descriptors,getBuiltIn$6=getBuiltIn$j,aCallable$1=aCallable$l,anInstance$1=anInstance$4,defineBuiltIn$4=defineBuiltIn$b,defineBuiltIns=defineBuiltIns$4,defineBuiltInAccessor$2=defineBuiltInAccessor$6,wellKnownSymbol$3=wellKnownSymbol$k,InternalStateModule$1=internalState,addDisposableResource=addDisposableResource$2,V8_VERSION=environmentV8Version,Promise$2=getBuiltIn$6("Promise"),SuppressedError=getBuiltIn$6("SuppressedError"),$ReferenceError=ReferenceError,ASYNC_DISPOSE$1=wellKnownSymbol$3("asyncDispose"),TO_STRING_TAG$1=wellKnownSymbol$3("toStringTag"),ASYNC_DISPOSABLE_STACK="AsyncDisposableStack",setInternalState=InternalStateModule$1.set,getAsyncDisposableStackInternalState=InternalStateModule$1.getterFor(ASYNC_DISPOSABLE_STACK),HINT="async-dispose",DISPOSED="disposed",PENDING="pending",getPendingAsyncDisposableStackInternalState=function(t){var s=getAsyncDisposableStackInternalState(t);if(s.state===DISPOSED)throw new $ReferenceError(ASYNC_DISPOSABLE_STACK+" already disposed");return s},$AsyncDisposableStack=function(){setInternalState(anInstance$1(this,AsyncDisposableStackPrototype),{type:ASYNC_DISPOSABLE_STACK,state:PENDING,stack:[]}),DESCRIPTORS$4||(this.disposed=!1)},AsyncDisposableStackPrototype=$AsyncDisposableStack.prototype;defineBuiltIns(AsyncDisposableStackPrototype,{disposeAsync:function(){var t=this;return new Promise$2(function(s,e){var B=getAsyncDisposableStackInternalState(t);if(B.state===DISPOSED)return s(void 0);B.state=DISPOSED,DESCRIPTORS$4||(t.disposed=!0);var i,F=B.stack,Q=F.length,l=!1,U=function(t){l?i=new SuppressedError(t,i):(l=!0,i=t),a()},a=function(){if(Q){var t=F[--Q];F[Q]=null;try{Promise$2.resolve(t()).then(a,U)}catch(t){U(t)}}else B.stack=null,l?e(i):s(void 0)};a()})},use:function(t){return addDisposableResource(getPendingAsyncDisposableStackInternalState(this),t,HINT),t},adopt:function(t,s){var e=getPendingAsyncDisposableStackInternalState(this);return aCallable$1(s),addDisposableResource(e,void 0,HINT,function(){return s(t)}),t},defer:function(t){var s=getPendingAsyncDisposableStackInternalState(this);aCallable$1(t),addDisposableResource(s,void 0,HINT,t)},move:function(){var t=getPendingAsyncDisposableStackInternalState(this),s=new $AsyncDisposableStack;return getAsyncDisposableStackInternalState(s).stack=t.stack,t.stack=[],t.state=DISPOSED,DESCRIPTORS$4||(this.disposed=!0),s}}),DESCRIPTORS$4&&defineBuiltInAccessor$2(AsyncDisposableStackPrototype,"disposed",{configurable:!0,get:function(){return getAsyncDisposableStackInternalState(this).state===DISPOSED}}),defineBuiltIn$4(AsyncDisposableStackPrototype,ASYNC_DISPOSE$1,AsyncDisposableStackPrototype.disposeAsync,{name:"disposeAsync"}),defineBuiltIn$4(AsyncDisposableStackPrototype,TO_STRING_TAG$1,ASYNC_DISPOSABLE_STACK,{nonWritable:!0});var SYNC_DISPOSE_RETURNING_PROMISE_RESOLUTION_BUG=V8_VERSION&&V8_VERSION<136;$$n({global:!0,constructor:!0,forced:SYNC_DISPOSE_RETURNING_PROMISE_RESOLUTION_BUG},{AsyncDisposableStack:$AsyncDisposableStack});var call$4=functionCall,defineBuiltIn$3=defineBuiltIn$b,getBuiltIn$5=getBuiltIn$j,getMethod=getMethod$b,hasOwn$7=hasOwnProperty_1,wellKnownSymbol$2=wellKnownSymbol$k,AsyncIteratorPrototype=asyncIteratorPrototype,ASYNC_DISPOSE=wellKnownSymbol$2("asyncDispose"),Promise$1=getBuiltIn$5("Promise");hasOwn$7(AsyncIteratorPrototype,ASYNC_DISPOSE)||defineBuiltIn$3(AsyncIteratorPrototype,ASYNC_DISPOSE,function(){var t=this;return new Promise$1(function(s,e){var B=getMethod(t,"return");B?Promise$1.resolve(call$4(B,t)).then(function(){s(void 0)},e):s(void 0)})});var $TypeError$6=TypeError,aString$4=function(t){if("string"==typeof t)return t;throw new $TypeError$6("Argument is not a string")},toIntegerOrInfinity$2=toIntegerOrInfinity$8,toString$7=toString$9,requireObjectCoercible$3=requireObjectCoercible$9,$RangeError$1=RangeError,stringRepeat=function(t){var s=toString$7(requireObjectCoercible$3(this)),e="",B=toIntegerOrInfinity$2(t);if(B<0||B===1/0)throw new $RangeError$1("Wrong number of repetitions");for(;B>0;(B>>>=1)&&(s+=s))1&B&&(e+=s);return e},uncurryThis$d=functionUncurryThis,toLength=toLength$3,toString$6=toString$9,$repeat=stringRepeat,requireObjectCoercible$2=requireObjectCoercible$9,repeat=uncurryThis$d($repeat),stringSlice$1=uncurryThis$d("".slice),ceil=Math.ceil,createMethod=function(t){return function(s,e,B){var i,F,Q=toString$6(requireObjectCoercible$2(s)),l=toLength(e),U=Q.length,a=void 0===B?" ":toString$6(B);return l<=U||""===a?Q:((F=repeat(a,ceil((i=l-U)/a.length))).length>i&&(F=stringSlice$1(F,0,i)),t?Q+F:F+Q)}},stringPad={start:createMethod(!1)},whitespaces="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",$$m=_export,uncurryThis$c=functionUncurryThis,aString$3=aString$4,hasOwn$6=hasOwnProperty_1,padStart=stringPad.start,WHITESPACES=whitespaces,$Array$1=Array,$escape=RegExp.escape,charAt$2=uncurryThis$c("".charAt),charCodeAt$2=uncurryThis$c("".charCodeAt),numberToString$1=uncurryThis$c(1.1.toString),join$1=uncurryThis$c([].join),FIRST_DIGIT_OR_ASCII=/^[0-9a-z]/i,SYNTAX_SOLIDUS=/^[$()*+./?[\\\]^{|}]/,OTHER_PUNCTUATORS_AND_WHITESPACES=RegExp("^[!\"#%&',\\-:;<=>@`~"+WHITESPACES+"]"),exec$1=uncurryThis$c(FIRST_DIGIT_OR_ASCII.exec),ControlEscape={"\t":"t","\n":"n","\v":"v","\f":"f","\r":"r"},escapeChar=function(t){var s=numberToString$1(charCodeAt$2(t,0),16);return s.length<3?"\\x"+padStart(s,2,"0"):"\\u"+padStart(s,4,"0")},FORCED$3=!$escape||"\\x61b"!==$escape("ab");$$m({target:"RegExp",stat:!0,forced:FORCED$3},{escape:function(t){aString$3(t);for(var s=t.length,e=$Array$1(s),B=0;B<s;B++){var i=charAt$2(t,B);if(0===B&&exec$1(FIRST_DIGIT_OR_ASCII,i))e[B]=escapeChar(i);else if(hasOwn$6(ControlEscape,i))e[B]="\\"+ControlEscape[i];else if(exec$1(SYNTAX_SOLIDUS,i))e[B]="\\"+i;else if(exec$1(OTHER_PUNCTUATORS_AND_WHITESPACES,i))e[B]=escapeChar(i);else{var F=charCodeAt$2(i,0);55296!=(63488&F)?e[B]=i:F>=56320||B+1>=s||56320!=(64512&charCodeAt$2(t,B+1))?e[B]=escapeChar(i):(e[B]=i,e[++B]=charAt$2(t,B))}}return join$1(e,"")}});var uncurryThis$b=functionUncurryThis,SetPrototype$1=Set.prototype,setHelpers={Set:Set,add:uncurryThis$b(SetPrototype$1.add),has:uncurryThis$b(SetPrototype$1.has),remove:uncurryThis$b(SetPrototype$1.delete),proto:SetPrototype$1},has$5=setHelpers.has,aSet$7=function(t){return has$5(t),t},call$3=functionCall,iterateSimple$7=function(t,s,e){for(var B,i,F=e?t:t.iterator,Q=t.next;!(B=call$3(Q,F)).done;)if(void 0!==(i=s(B.value)))return i},uncurryThis$a=functionUncurryThis,iterateSimple$6=iterateSimple$7,SetHelpers$6=setHelpers,Set$4=SetHelpers$6.Set,SetPrototype=SetHelpers$6.proto,forEach$2=uncurryThis$a(SetPrototype.forEach),keys=uncurryThis$a(SetPrototype.keys),next=keys(new Set$4).next,setIterate$1=function(t,s,e){return e?iterateSimple$6({iterator:keys(t),next:next},s):forEach$2(t,s)},SetHelpers$5=setHelpers,iterate$2=setIterate$1,Set$3=SetHelpers$5.Set,add$3=SetHelpers$5.add,setClone=function(t){var s=new Set$3;return iterate$2(t,function(t){add$3(s,t)}),s},uncurryThisAccessor=functionUncurryThisAccessor,SetHelpers$4=setHelpers,setSize=uncurryThisAccessor(SetHelpers$4.proto,"size","get")||function(t){return t.size},aCallable=aCallable$l,anObject$2=anObject$s,call$2=functionCall,toIntegerOrInfinity$1=toIntegerOrInfinity$8,getIteratorDirect=getIteratorDirect$g,INVALID_SIZE="Invalid size",$RangeError=RangeError,$TypeError$5=TypeError,max$2=Math.max,SetRecord=function(t,s){this.set=t,this.size=max$2(s,0),this.has=aCallable(t.has),this.keys=aCallable(t.keys)};SetRecord.prototype={getIterator:function(){return getIteratorDirect(anObject$2(call$2(this.keys,this.set)))},includes:function(t){return call$2(this.has,this.set,t)}};var getSetRecord$7=function(t){anObject$2(t);var s=+t.size;if(s!=s)throw new $TypeError$5(INVALID_SIZE);var e=toIntegerOrInfinity$1(s);if(e<0)throw new $RangeError(INVALID_SIZE);return new SetRecord(t,e)},aSet$6=aSet$7,SetHelpers$3=setHelpers,clone$2=setClone,size$4=setSize,getSetRecord$6=getSetRecord$7,iterateSet$2=setIterate$1,iterateSimple$5=iterateSimple$7,has$4=SetHelpers$3.has,remove$2=SetHelpers$3.remove,setDifference=function(t){var s=aSet$6(this),e=getSetRecord$6(t),B=clone$2(s);return size$4(s)<=e.size?iterateSet$2(s,function(t){e.includes(t)&&remove$2(B,t)}):iterateSimple$5(e.getIterator(),function(t){has$4(B,t)&&remove$2(B,t)}),B},getBuiltIn$4=getBuiltIn$j,createSetLike=function(t){return{size:t,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},createSetLikeWithInfinitySize=function(t){return{size:t,has:function(){return!0},keys:function(){throw new Error("e")}}},setMethodAcceptSetLike$7=function(t,s){var e=getBuiltIn$4("Set");try{(new e)[t](createSetLike(0));try{return(new e)[t](createSetLike(-1)),!1}catch(B){if(!s)return!0;try{return(new e)[t](createSetLikeWithInfinitySize(-1/0)),!1}catch(B){return s(new e([1,2])[t](createSetLikeWithInfinitySize(1/0)))}}}catch(t){return!1}},$$l=_export,difference$1=setDifference,fails$7=fails$t,setMethodAcceptSetLike$6=setMethodAcceptSetLike$7,SET_LIKE_INCORRECT_BEHAVIOR=!setMethodAcceptSetLike$6("difference",function(t){return 0===t.size}),FORCED$2=SET_LIKE_INCORRECT_BEHAVIOR||fails$7(function(){var t={size:1,has:function(){return!0},keys:function(){var t=0;return{next:function(){var e=t++>1;return s.has(1)&&s.clear(),{done:e,value:2}}}}},s=new Set([1,2,3,4]);return 3!==s.difference(t).size});$$l({target:"Set",proto:!0,real:!0,forced:FORCED$2},{difference:difference$1});var aSet$5=aSet$7,SetHelpers$2=setHelpers,size$3=setSize,getSetRecord$5=getSetRecord$7,iterateSet$1=setIterate$1,iterateSimple$4=iterateSimple$7,Set$2=SetHelpers$2.Set,add$2=SetHelpers$2.add,has$3=SetHelpers$2.has,setIntersection=function(t){var s=aSet$5(this),e=getSetRecord$5(t),B=new Set$2;return size$3(s)>e.size?iterateSimple$4(e.getIterator(),function(t){has$3(s,t)&&add$2(B,t)}):iterateSet$1(s,function(t){e.includes(t)&&add$2(B,t)}),B},$$k=_export,fails$6=fails$t,intersection=setIntersection,setMethodAcceptSetLike$5=setMethodAcceptSetLike$7,INCORRECT$3=!setMethodAcceptSetLike$5("intersection",function(t){return 2===t.size&&t.has(1)&&t.has(2)})||fails$6(function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))});$$k({target:"Set",proto:!0,real:!0,forced:INCORRECT$3},{intersection:intersection});var aSet$4=aSet$7,has$2=setHelpers.has,size$2=setSize,getSetRecord$4=getSetRecord$7,iterateSet=setIterate$1,iterateSimple$3=iterateSimple$7,iteratorClose$1=iteratorClose$h,setIsDisjointFrom=function(t){var s=aSet$4(this),e=getSetRecord$4(t);if(size$2(s)<=e.size)return!1!==iterateSet(s,function(t){if(e.includes(t))return!1},!0);var B=e.getIterator();return!1!==iterateSimple$3(B,function(t){if(has$2(s,t))return iteratorClose$1(B,"normal",!1)})},$$j=_export,isDisjointFrom=setIsDisjointFrom,setMethodAcceptSetLike$4=setMethodAcceptSetLike$7,INCORRECT$2=!setMethodAcceptSetLike$4("isDisjointFrom",function(t){return!t});$$j({target:"Set",proto:!0,real:!0,forced:INCORRECT$2},{isDisjointFrom:isDisjointFrom});var aSet$3=aSet$7,size$1=setSize,iterate$1=setIterate$1,getSetRecord$3=getSetRecord$7,setIsSubsetOf=function(t){var s=aSet$3(this),e=getSetRecord$3(t);return!(size$1(s)>e.size)&&!1!==iterate$1(s,function(t){if(!e.includes(t))return!1},!0)},$$i=_export,isSubsetOf=setIsSubsetOf,setMethodAcceptSetLike$3=setMethodAcceptSetLike$7,INCORRECT$1=!setMethodAcceptSetLike$3("isSubsetOf",function(t){return t});$$i({target:"Set",proto:!0,real:!0,forced:INCORRECT$1},{isSubsetOf:isSubsetOf});var aSet$2=aSet$7,has$1=setHelpers.has,size=setSize,getSetRecord$2=getSetRecord$7,iterateSimple$2=iterateSimple$7,iteratorClose=iteratorClose$h,setIsSupersetOf=function(t){var s=aSet$2(this),e=getSetRecord$2(t);if(size(s)<e.size)return!1;var B=e.getIterator();return!1!==iterateSimple$2(B,function(t){if(!has$1(s,t))return iteratorClose(B,"normal",!1)})},$$h=_export,isSupersetOf=setIsSupersetOf,setMethodAcceptSetLike$2=setMethodAcceptSetLike$7,INCORRECT=!setMethodAcceptSetLike$2("isSupersetOf",function(t){return!t});$$h({target:"Set",proto:!0,real:!0,forced:INCORRECT},{isSupersetOf:isSupersetOf});var aSet$1=aSet$7,SetHelpers$1=setHelpers,clone$1=setClone,getSetRecord$1=getSetRecord$7,iterateSimple$1=iterateSimple$7,add$1=SetHelpers$1.add,has=SetHelpers$1.has,remove$1=SetHelpers$1.remove,setSymmetricDifference=function(t){var s=aSet$1(this),e=getSetRecord$1(t).getIterator(),B=clone$1(s);return iterateSimple$1(e,function(t){has(s,t)?remove$1(B,t):add$1(B,t)}),B},setMethodGetKeysBeforeCloningDetection=function(t){try{var s=new Set,e={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return s.clear(),s.add(4),function(){return{done:!0}}}})}},B=s[t](e);return 1===B.size&&4===B.values().next().value}catch(t){return!1}},$$g=_export,symmetricDifference=setSymmetricDifference,setMethodGetKeysBeforeCloning$1=setMethodGetKeysBeforeCloningDetection,setMethodAcceptSetLike$1=setMethodAcceptSetLike$7,FORCED$1=!setMethodAcceptSetLike$1("symmetricDifference")||!setMethodGetKeysBeforeCloning$1("symmetricDifference");$$g({target:"Set",proto:!0,real:!0,forced:FORCED$1},{symmetricDifference:symmetricDifference});var aSet=aSet$7,add=setHelpers.add,clone=setClone,getSetRecord=getSetRecord$7,iterateSimple=iterateSimple$7,setUnion=function(t){var s=aSet(this),e=getSetRecord(t).getIterator(),B=clone(s);return iterateSimple(e,function(t){add(B,t)}),B},$$f=_export,union=setUnion,setMethodGetKeysBeforeCloning=setMethodGetKeysBeforeCloningDetection,setMethodAcceptSetLike=setMethodAcceptSetLike$7,FORCED=!setMethodAcceptSetLike("union")||!setMethodGetKeysBeforeCloning("union");$$f({target:"Set",proto:!0,real:!0,forced:FORCED},{union:union});var $$e=_export,uncurryThis$9=functionUncurryThis,requireObjectCoercible$1=requireObjectCoercible$9,toString$5=toString$9,charCodeAt$1=uncurryThis$9("".charCodeAt);$$e({target:"String",proto:!0},{isWellFormed:function(){for(var t=toString$5(requireObjectCoercible$1(this)),s=t.length,e=0;e<s;e++){var B=charCodeAt$1(t,e);if(55296==(63488&B)&&(B>=56320||++e>=s||56320!=(64512&charCodeAt$1(t,e))))return!1}return!0}});var $$d=_export,call$1=functionCall,uncurryThis$8=functionUncurryThis,requireObjectCoercible=requireObjectCoercible$9,toString$4=toString$9,fails$5=fails$t,$Array=Array,charAt$1=uncurryThis$8("".charAt),charCodeAt=uncurryThis$8("".charCodeAt),join=uncurryThis$8([].join),$toWellFormed="".toWellFormed,REPLACEMENT_CHARACTER="ï¿½",TO_STRING_CONVERSION_BUG=$toWellFormed&&fails$5(function(){return"1"!==call$1($toWellFormed,1)});$$d({target:"String",proto:!0,forced:TO_STRING_CONVERSION_BUG},{toWellFormed:function(){var t=toString$4(requireObjectCoercible(this));if(TO_STRING_CONVERSION_BUG)return call$1($toWellFormed,t);for(var s=t.length,e=$Array(s),B=0;B<s;B++){var i=charCodeAt(t,B);55296!=(63488&i)?e[B]=charAt$1(t,B):i>=56320||B+1>=s||56320!=(64512&charCodeAt(t,B+1))?e[B]=REPLACEMENT_CHARACTER:(e[B]=charAt$1(t,B),e[++B]=charAt$1(t,B))}return join(e,"")}});var NAME$2,Constructor,Prototype,NATIVE_ARRAY_BUFFER=arrayBufferBasicDetection,DESCRIPTORS$3=descriptors,globalThis$g=globalThis_1,isCallable$4=isCallable$l,isObject$4=isObject$f,hasOwn$5=hasOwnProperty_1,classof$3=classof$c,createNonEnumerableProperty$1=createNonEnumerableProperty$7,defineBuiltIn$2=defineBuiltIn$b,defineBuiltInAccessor$1=defineBuiltInAccessor$6,getPrototypeOf=objectGetPrototypeOf,setPrototypeOf$1=objectSetPrototypeOf,wellKnownSymbol$1=wellKnownSymbol$k,uid$1=uid$4,InternalStateModule=internalState,enforceInternalState=InternalStateModule.enforce,getInternalState=InternalStateModule.get,Int8Array$1=globalThis$g.Int8Array,Int8ArrayPrototype=Int8Array$1&&Int8Array$1.prototype,Uint8ClampedArray=globalThis$g.Uint8ClampedArray,Uint8ClampedArrayPrototype=Uint8ClampedArray&&Uint8ClampedArray.prototype,TypedArray$1=Int8Array$1&&getPrototypeOf(Int8Array$1),TypedArrayPrototype=Int8ArrayPrototype&&getPrototypeOf(Int8ArrayPrototype),ObjectPrototype=Object.prototype,TypeError$3=globalThis$g.TypeError,TO_STRING_TAG=wellKnownSymbol$1("toStringTag"),TYPED_ARRAY_TAG=uid$1("TYPED_ARRAY_TAG"),TYPED_ARRAY_CONSTRUCTOR="TypedArrayConstructor",NATIVE_ARRAY_BUFFER_VIEWS=NATIVE_ARRAY_BUFFER&&!!setPrototypeOf$1&&"Opera"!==classof$3(globalThis$g.opera),TypedArrayConstructorsList={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},BigIntArrayConstructorsList={BigInt64Array:8,BigUint64Array:8},getTypedArrayConstructor$1=function(t){var s=getPrototypeOf(t);if(isObject$4(s)){var e=getInternalState(s);return e&&hasOwn$5(e,TYPED_ARRAY_CONSTRUCTOR)?e[TYPED_ARRAY_CONSTRUCTOR]:getTypedArrayConstructor$1(s)}},isTypedArray=function(t){if(!isObject$4(t))return!1;var s=classof$3(t);return hasOwn$5(TypedArrayConstructorsList,s)||hasOwn$5(BigIntArrayConstructorsList,s)},aTypedArray$1=function(t){if(isTypedArray(t))return t;throw new TypeError$3("Target is not a typed array")},exportTypedArrayMethod$1=function(t,s,e,B){if(DESCRIPTORS$3){if(e)for(var i in TypedArrayConstructorsList){var F=globalThis$g[i];if(F&&hasOwn$5(F.prototype,t))try{delete F.prototype[t]}catch(e){try{F.prototype[t]=s}catch(t){}}}TypedArrayPrototype[t]&&!e||defineBuiltIn$2(TypedArrayPrototype,t,e?s:NATIVE_ARRAY_BUFFER_VIEWS&&Int8ArrayPrototype[t]||s,B)}};for(NAME$2 in TypedArrayConstructorsList)(Prototype=(Constructor=globalThis$g[NAME$2])&&Constructor.prototype)?enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR]=Constructor:NATIVE_ARRAY_BUFFER_VIEWS=!1;for(NAME$2 in BigIntArrayConstructorsList)(Prototype=(Constructor=globalThis$g[NAME$2])&&Constructor.prototype)&&(enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR]=Constructor);if((!NATIVE_ARRAY_BUFFER_VIEWS||!isCallable$4(TypedArray$1)||TypedArray$1===Function.prototype)&&(TypedArray$1=function(){throw new TypeError$3("Incorrect invocation")},NATIVE_ARRAY_BUFFER_VIEWS))for(NAME$2 in TypedArrayConstructorsList)globalThis$g[NAME$2]&&setPrototypeOf$1(globalThis$g[NAME$2],TypedArray$1);if((!NATIVE_ARRAY_BUFFER_VIEWS||!TypedArrayPrototype||TypedArrayPrototype===ObjectPrototype)&&(TypedArrayPrototype=TypedArray$1.prototype,NATIVE_ARRAY_BUFFER_VIEWS))for(NAME$2 in TypedArrayConstructorsList)globalThis$g[NAME$2]&&setPrototypeOf$1(globalThis$g[NAME$2].prototype,TypedArrayPrototype);if(NATIVE_ARRAY_BUFFER_VIEWS&&getPrototypeOf(Uint8ClampedArrayPrototype)!==TypedArrayPrototype&&setPrototypeOf$1(Uint8ClampedArrayPrototype,TypedArrayPrototype),DESCRIPTORS$3&&!hasOwn$5(TypedArrayPrototype,TO_STRING_TAG))for(NAME$2 in defineBuiltInAccessor$1(TypedArrayPrototype,TO_STRING_TAG,{configurable:!0,get:function(){return isObject$4(this)?this[TYPED_ARRAY_TAG]:void 0}}),TypedArrayConstructorsList)globalThis$g[NAME$2]&&createNonEnumerableProperty$1(globalThis$g[NAME$2],TYPED_ARRAY_TAG,NAME$2);var arrayBufferViewCore={aTypedArray:aTypedArray$1,exportTypedArrayMethod:exportTypedArrayMethod$1,getTypedArrayConstructor:getTypedArrayConstructor$1},classof$2=classof$c,isBigIntArray$2=function(t){var s=classof$2(t);return"BigInt64Array"===s||"BigUint64Array"===s},toPrimitive=toPrimitive$2,$TypeError$4=TypeError,toBigInt$1=function(t){var s=toPrimitive(t,"number");if("number"==typeof s)throw new $TypeError$4("Can't convert number to bigint");return BigInt(s)},arrayWith=arrayWith$2,ArrayBufferViewCore=arrayBufferViewCore,isBigIntArray$1=isBigIntArray$2,toIntegerOrInfinity=toIntegerOrInfinity$8,toBigInt=toBigInt$1,aTypedArray=ArrayBufferViewCore.aTypedArray,getTypedArrayConstructor=ArrayBufferViewCore.getTypedArrayConstructor,exportTypedArrayMethod=ArrayBufferViewCore.exportTypedArrayMethod,PROPER_ORDER=function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}(),THROW_ON_NEGATIVE_FRACTIONAL_INDEX=PROPER_ORDER&&function(){try{new Int8Array(1).with(-.5,1)}catch(t){return!0}}();exportTypedArrayMethod("with",{with:function(t,s){var e=aTypedArray(this),B=toIntegerOrInfinity(t),i=isBigIntArray$1(e)?toBigInt(s):+s;return arrayWith(e,getTypedArrayConstructor(e),B,i)}}.with,!PROPER_ORDER||THROW_ON_NEGATIVE_FRACTIONAL_INDEX);var lengthOfArrayLike$1=lengthOfArrayLike$6,arrayFromConstructorAndList$1=function(t,s,e){for(var B=0,i=arguments.length>2?e:lengthOfArrayLike$1(s),F=new t(i);i>B;)F[B]=s[B++];return F},isObject$3=isObject$f,$String=String,$TypeError$3=TypeError,anObjectOrUndefined$2=function(t){if(void 0===t||isObject$3(t))return t;throw new $TypeError$3($String(t)+" is not an object or undefined")},commonAlphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",base64Alphabet$2=commonAlphabet+"+/",base64UrlAlphabet$2=commonAlphabet+"-_",inverse=function(t){for(var s={},e=0;e<64;e++)s[t.charAt(e)]=e;return s},base64Map$2={i2c:base64Alphabet$2,c2i:inverse(base64Alphabet$2),i2cUrl:base64UrlAlphabet$2,c2iUrl:inverse(base64UrlAlphabet$2)},$TypeError$2=TypeError,getAlphabetOption$2=function(t){var s=t&&t.alphabet;if(void 0===s||"base64"===s||"base64url"===s)return s||"base64";throw new $TypeError$2("Incorrect `alphabet` option")},globalThis$f=globalThis_1,uncurryThis$7=functionUncurryThis,anObjectOrUndefined$1=anObjectOrUndefined$2,aString$2=aString$4,hasOwn$4=hasOwnProperty_1,base64Map$1=base64Map$2,getAlphabetOption$1=getAlphabetOption$2,notDetached$3=arrayBufferNotDetached,base64Alphabet$1=base64Map$1.c2i,base64UrlAlphabet$1=base64Map$1.c2iUrl,SyntaxError$1=globalThis$f.SyntaxError,TypeError$2=globalThis$f.TypeError,at=uncurryThis$7("".charAt),skipAsciiWhitespace=function(t,s){for(var e=t.length;s<e;s++){var B=at(t,s);if(" "!==B&&"\t"!==B&&"\n"!==B&&"\f"!==B&&"\r"!==B)break}return s},decodeBase64Chunk=function(t,s,e){var B=t.length;B<4&&(t+=2===B?"AA":"A");var i=(s[at(t,0)]<<18)+(s[at(t,1)]<<12)+(s[at(t,2)]<<6)+s[at(t,3)],F=[i>>16&255,i>>8&255,255&i];if(2===B){if(e&&0!==F[1])throw new SyntaxError$1("Extra bits");return[F[0]]}if(3===B){if(e&&0!==F[2])throw new SyntaxError$1("Extra bits");return[F[0],F[1]]}return F},writeBytes=function(t,s,e){for(var B=s.length,i=0;i<B;i++)t[e+i]=s[i];return e+B},uint8FromBase64=function(t,s,e,B){aString$2(t),anObjectOrUndefined$1(s);var i="base64"===getAlphabetOption$1(s)?base64Alphabet$1:base64UrlAlphabet$1,F=s?s.lastChunkHandling:void 0;if(void 0===F&&(F="loose"),"loose"!==F&&"strict"!==F&&"stop-before-partial"!==F)throw new TypeError$2("Incorrect `lastChunkHandling` option");e&&notDetached$3(e.buffer);var Q=t.length,l=e||[],U=0,a=0,g="",I=0;if(B)for(;;){if((I=skipAsciiWhitespace(t,I))===Q){if(g.length>0){if("stop-before-partial"===F)break;if("loose"!==F)throw new SyntaxError$1("Missing padding");if(1===g.length)throw new SyntaxError$1("Malformed padding: exactly one additional character");U=writeBytes(l,decodeBase64Chunk(g,i,!1),U)}a=Q;break}var c=at(t,I);if(++I,"="===c){if(g.length<2)throw new SyntaxError$1("Padding is too early");if(I=skipAsciiWhitespace(t,I),2===g.length){if(I===Q){if("stop-before-partial"===F)break;throw new SyntaxError$1("Malformed padding: only one =")}"="===at(t,I)&&(++I,I=skipAsciiWhitespace(t,I))}if(I<Q)throw new SyntaxError$1("Unexpected character after padding");U=writeBytes(l,decodeBase64Chunk(g,i,"strict"===F),U),a=Q;break}if(!hasOwn$4(i,c))throw new SyntaxError$1("Unexpected character");var n=B-U;if(1===n&&2===g.length||2===n&&3===g.length)break;if(4===(g+=c).length&&(U=writeBytes(l,decodeBase64Chunk(g,i,!1),U),g="",a=I,U===B))break}return{bytes:l,read:a,written:U}},$$c=_export,globalThis$e=globalThis_1,arrayFromConstructorAndList=arrayFromConstructorAndList$1,$fromBase64$1=uint8FromBase64,Uint8Array$5=globalThis$e.Uint8Array,INCORRECT_BEHAVIOR_OR_DOESNT_EXISTS$3=!Uint8Array$5||!Uint8Array$5.fromBase64||!function(){try{return void Uint8Array$5.fromBase64("a")}catch(t){}try{Uint8Array$5.fromBase64("",null)}catch(t){return!0}}();Uint8Array$5&&$$c({target:"Uint8Array",stat:!0,forced:INCORRECT_BEHAVIOR_OR_DOESNT_EXISTS$3},{fromBase64:function(t){var s=$fromBase64$1(t,arguments.length>1?arguments[1]:void 0,null,9007199254740991);return arrayFromConstructorAndList(Uint8Array$5,s.bytes)}});var globalThis$d=globalThis_1,uncurryThis$6=functionUncurryThis,Uint8Array$4=globalThis$d.Uint8Array,SyntaxError=globalThis$d.SyntaxError,parseInt$1=globalThis$d.parseInt,min$2=Math.min,NOT_HEX=/[^\da-f]/i,exec=uncurryThis$6(NOT_HEX.exec),stringSlice=uncurryThis$6("".slice),uint8FromHex=function(t,s){var e=t.length;if(e%2!=0)throw new SyntaxError("String should be an even number of characters");for(var B=s?min$2(s.length,e/2):e/2,i=s||new Uint8Array$4(B),F=0,Q=0;Q<B;){var l=stringSlice(t,F,F+=2);if(exec(NOT_HEX,l))throw new SyntaxError("String should only contain hex characters");i[Q++]=parseInt$1(l,16)}return{bytes:i,read:F}},$$b=_export,globalThis$c=globalThis_1,aString$1=aString$4,$fromHex$1=uint8FromHex;globalThis$c.Uint8Array&&$$b({target:"Uint8Array",stat:!0},{fromHex:function(t){return $fromHex$1(aString$1(t)).bytes}});var classof$1=classof$c,$TypeError$1=TypeError,anUint8Array$4=function(t){if("Uint8Array"===classof$1(t))return t;throw new $TypeError$1("Argument is not an Uint8Array")},$$a=_export,globalThis$b=globalThis_1,$fromBase64=uint8FromBase64,anUint8Array$3=anUint8Array$4,Uint8Array$3=globalThis$b.Uint8Array,INCORRECT_BEHAVIOR_OR_DOESNT_EXISTS$2=!Uint8Array$3||!Uint8Array$3.prototype.setFromBase64||!function(){var t=new Uint8Array$3([255,255,255,255,255]);try{return void t.setFromBase64("",null)}catch(t){}try{return void t.setFromBase64("a")}catch(t){}try{t.setFromBase64("MjYyZg===")}catch(s){return 50===t[0]&&54===t[1]&&50===t[2]&&255===t[3]&&255===t[4]}}();Uint8Array$3&&$$a({target:"Uint8Array",proto:!0,forced:INCORRECT_BEHAVIOR_OR_DOESNT_EXISTS$2},{setFromBase64:function(t){anUint8Array$3(this);var s=$fromBase64(t,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:s.read,written:s.written}}});var $$9=_export,globalThis$a=globalThis_1,aString=aString$4,anUint8Array$2=anUint8Array$4,notDetached$2=arrayBufferNotDetached,$fromHex=uint8FromHex;globalThis$a.Uint8Array&&$$9({target:"Uint8Array",proto:!0},{setFromHex:function(t){anUint8Array$2(this),aString(t),notDetached$2(this.buffer);var s=$fromHex(t,this).read;return{read:s,written:s/2}}});var $$8=_export,globalThis$9=globalThis_1,uncurryThis$5=functionUncurryThis,anObjectOrUndefined=anObjectOrUndefined$2,anUint8Array$1=anUint8Array$4,notDetached$1=arrayBufferNotDetached,base64Map=base64Map$2,getAlphabetOption=getAlphabetOption$2,base64Alphabet=base64Map.i2c,base64UrlAlphabet=base64Map.i2cUrl,charAt=uncurryThis$5("".charAt),Uint8Array$2=globalThis$9.Uint8Array,INCORRECT_BEHAVIOR_OR_DOESNT_EXISTS$1=!Uint8Array$2||!Uint8Array$2.prototype.toBase64||!function(){try{(new Uint8Array$2).toBase64(null)}catch(t){return!0}}();Uint8Array$2&&$$8({target:"Uint8Array",proto:!0,forced:INCORRECT_BEHAVIOR_OR_DOESNT_EXISTS$1},{toBase64:function(){var t=anUint8Array$1(this),s=arguments.length?anObjectOrUndefined(arguments[0]):void 0,e="base64"===getAlphabetOption(s)?base64Alphabet:base64UrlAlphabet,B=!!s&&!!s.omitPadding;notDetached$1(this.buffer);for(var i,F="",Q=0,l=t.length,U=function(t){return charAt(e,i>>6*t&63)};Q+2<l;Q+=3)i=(t[Q]<<16)+(t[Q+1]<<8)+t[Q+2],F+=U(3)+U(2)+U(1)+U(0);return Q+2===l?(i=(t[Q]<<16)+(t[Q+1]<<8),F+=U(3)+U(2)+U(1)+(B?"":"=")):Q+1===l&&(i=t[Q]<<16,F+=U(3)+U(2)+(B?"":"==")),F}});var $$7=_export,globalThis$8=globalThis_1,uncurryThis$4=functionUncurryThis,anUint8Array=anUint8Array$4,notDetached=arrayBufferNotDetached,numberToString=uncurryThis$4(1.1.toString),Uint8Array$1=globalThis$8.Uint8Array,INCORRECT_BEHAVIOR_OR_DOESNT_EXISTS=!Uint8Array$1||!Uint8Array$1.prototype.toHex||!function(){try{return"ffffffffffffffff"===new Uint8Array$1([255,255,255,255,255,255,255,255]).toHex()}catch(t){return!1}}();Uint8Array$1&&$$7({target:"Uint8Array",proto:!0,forced:INCORRECT_BEHAVIOR_OR_DOESNT_EXISTS},{toHex:function(){anUint8Array(this),notDetached(this.buffer);for(var t="",s=0,e=this.length;s<e;s++){var B=numberToString(this[s],16);t+=1===B.length?"0"+B:B}return t}});var isCallable$3=isCallable$l,isObject$2=isObject$f,setPrototypeOf=objectSetPrototypeOf,inheritIfRequired$1=function(t,s,e){var B,i;return setPrototypeOf&&isCallable$3(B=s.constructor)&&B!==e&&isObject$2(i=B.prototype)&&i!==e.prototype&&setPrototypeOf(t,i),t},domExceptionConstants={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}},$$6=_export,globalThis$7=globalThis_1,getBuiltIn$3=getBuiltIn$j,createPropertyDescriptor=createPropertyDescriptor$6,defineProperty=objectDefineProperty.f,hasOwn$3=hasOwnProperty_1,anInstance=anInstance$4,inheritIfRequired=inheritIfRequired$1,normalizeStringArgument=normalizeStringArgument$2,DOMExceptionConstants=domExceptionConstants,clearErrorStack=errorStackClear,DESCRIPTORS$2=descriptors,DOM_EXCEPTION="DOMException",Error$2=getBuiltIn$3("Error"),NativeDOMException=getBuiltIn$3(DOM_EXCEPTION),$DOMException=function(){anInstance(this,DOMExceptionPrototype);var t=arguments.length,s=normalizeStringArgument(t<1?void 0:arguments[0]),e=normalizeStringArgument(t<2?void 0:arguments[1],"Error"),B=new NativeDOMException(s,e),i=new Error$2(s);return i.name=DOM_EXCEPTION,defineProperty(B,"stack",createPropertyDescriptor(1,clearErrorStack(i.stack,1))),inheritIfRequired(B,this,$DOMException),B},DOMExceptionPrototype=$DOMException.prototype=NativeDOMException.prototype,ERROR_HAS_STACK="stack"in new Error$2(DOM_EXCEPTION),DOM_EXCEPTION_HAS_STACK="stack"in new NativeDOMException(1,2),descriptor=NativeDOMException&&DESCRIPTORS$2&&Object.getOwnPropertyDescriptor(globalThis$7,DOM_EXCEPTION),BUGGY_DESCRIPTOR=!(!descriptor||descriptor.writable&&descriptor.configurable),FORCED_CONSTRUCTOR=ERROR_HAS_STACK&&!BUGGY_DESCRIPTOR&&!DOM_EXCEPTION_HAS_STACK;$$6({global:!0,constructor:!0,forced:FORCED_CONSTRUCTOR},{DOMException:FORCED_CONSTRUCTOR?$DOMException:NativeDOMException});var PolyfilledDOMException=getBuiltIn$3(DOM_EXCEPTION),PolyfilledDOMExceptionPrototype=PolyfilledDOMException.prototype;if(PolyfilledDOMExceptionPrototype.constructor!==PolyfilledDOMException)for(var key in defineProperty(PolyfilledDOMExceptionPrototype,"constructor",createPropertyDescriptor(1,PolyfilledDOMException)),DOMExceptionConstants)if(hasOwn$3(DOMExceptionConstants,key)){var constant$7=DOMExceptionConstants[key],constantName=constant$7.s;hasOwn$3(PolyfilledDOMException,constantName)||defineProperty(PolyfilledDOMException,constantName,createPropertyDescriptor(6,constant$7.c))}var $location,defer,channel,port,$TypeError=TypeError,validateArgumentsLength$7=function(t,s){if(t<s)throw new $TypeError("Not enough arguments");return t},userAgent=environmentUserAgent,environmentIsIos=/(?:ipad|iphone|ipod).*applewebkit/i.test(userAgent),globalThis$6=globalThis_1,apply$2=functionApply,bind=functionBindContext,isCallable$2=isCallable$l,hasOwn$2=hasOwnProperty_1,fails$4=fails$t,html=html$2,arraySlice$1=arraySlice$2,createElement=documentCreateElement$1,validateArgumentsLength$6=validateArgumentsLength$7,IS_IOS=environmentIsIos,IS_NODE=environmentIsNode,set$2=globalThis$6.setImmediate,clear=globalThis$6.clearImmediate,process=globalThis$6.process,Dispatch$1=globalThis$6.Dispatch,Function$2=globalThis$6.Function,MessageChannel=globalThis$6.MessageChannel,String$1=globalThis$6.String,counter=0,queue={},ONREADYSTATECHANGE="onreadystatechange";fails$4(function(){$location=globalThis$6.location});var run=function(t){if(hasOwn$2(queue,t)){var s=queue[t];delete queue[t],s()}},runner=function(t){return function(){run(t)}},eventListener=function(t){run(t.data)},globalPostMessageDefer=function(t){globalThis$6.postMessage(String$1(t),$location.protocol+"//"+$location.host)};set$2&&clear||(set$2=function(t){validateArgumentsLength$6(arguments.length,1);var s=isCallable$2(t)?t:Function$2(t),e=arraySlice$1(arguments,1);return queue[++counter]=function(){apply$2(s,void 0,e)},defer(counter),counter},clear=function(t){delete queue[t]},IS_NODE?defer=function(t){process.nextTick(runner(t))}:Dispatch$1&&Dispatch$1.now?defer=function(t){Dispatch$1.now(runner(t))}:MessageChannel&&!IS_IOS?(port=(channel=new MessageChannel).port2,channel.port1.onmessage=eventListener,defer=bind(port.postMessage,port)):globalThis$6.addEventListener&&isCallable$2(globalThis$6.postMessage)&&!globalThis$6.importScripts&&$location&&"file:"!==$location.protocol&&!fails$4(globalPostMessageDefer)?(defer=globalPostMessageDefer,globalThis$6.addEventListener("message",eventListener,!1)):defer=ONREADYSTATECHANGE in createElement("script")?function(t){html.appendChild(createElement("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this),run(t)}}:function(t){setTimeout(runner(t),0)});var task={set:set$2,clear:clear},$$5=_export,globalThis$5=globalThis_1,clearImmediate=task.clear;$$5({global:!0,bind:!0,enumerable:!0,forced:globalThis$5.clearImmediate!==clearImmediate},{clearImmediate:clearImmediate});var globalThis$4=globalThis_1,apply$1=functionApply,isCallable$1=isCallable$l,ENVIRONMENT=environment,USER_AGENT=environmentUserAgent,arraySlice=arraySlice$2,validateArgumentsLength$5=validateArgumentsLength$7,Function$1=globalThis$4.Function,WRAP=/MSIE .\./.test(USER_AGENT)||"BUN"===ENVIRONMENT&&function(){var t=globalThis$4.Bun.version.split(".");return t.length<3||"0"===t[0]&&(t[1]<3||"3"===t[1]&&"0"===t[2])}(),schedulersFix$1=function(t,s){var e=s?2:1;return WRAP?function(B,i){var F=validateArgumentsLength$5(arguments.length,1)>e,Q=isCallable$1(B)?B:Function$1(B),l=F?arraySlice(arguments,e):[],U=F?function(){apply$1(Q,this,l)}:Q;return s?t(U,i):t(U)}:t},$$4=_export,globalThis$3=globalThis_1,setTask=task.set,schedulersFix=schedulersFix$1,setImmediate=globalThis$3.setImmediate?schedulersFix(setTask,!1):setTask;$$4({global:!0,bind:!0,enumerable:!0,forced:globalThis$3.setImmediate!==setImmediate},{setImmediate:setImmediate});var globalThis$2=globalThis_1,fails$3=fails$t,RegExp$1=globalThis$2.RegExp,FLAGS_GETTER_IS_CORRECT=!fails$3(function(){var t=!0;try{RegExp$1(".","d")}catch(s){t=!1}var s={},e="",B=t?"dgimsy":"gimsy",i=function(t,B){Object.defineProperty(s,t,{get:function(){return e+=B,!0}})},F={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var Q in t&&(F.hasIndices="d"),F)i(Q,F[Q]);return Object.getOwnPropertyDescriptor(RegExp$1.prototype,"flags").get.call(s)!==B||e!==B}),regexpFlagsDetection={correct:FLAGS_GETTER_IS_CORRECT},anObject$1=anObject$s,regexpFlags=function(){var t=anObject$1(this),s="";return t.hasIndices&&(s+="d"),t.global&&(s+="g"),t.ignoreCase&&(s+="i"),t.multiline&&(s+="m"),t.dotAll&&(s+="s"),t.unicode&&(s+="u"),t.unicodeSets&&(s+="v"),t.sticky&&(s+="y"),s},call=functionCall,hasOwn$1=hasOwnProperty_1,isPrototypeOf=objectIsPrototypeOf,regExpFlagsDetection=regexpFlagsDetection,regExpFlagsGetterImplementation=regexpFlags,RegExpPrototype=RegExp.prototype,regexpGetFlags=regExpFlagsDetection.correct?function(t){return t.flags}:function(t){return regExpFlagsDetection.correct||!isPrototypeOf(RegExpPrototype,t)||hasOwn$1(t,"flags")?t.flags:call(regExpFlagsGetterImplementation,t)},$$3=_export,globalThis$1=globalThis_1,getBuiltIn$2=getBuiltIn$j,uncurryThis$3=functionUncurryThis,fails$2=fails$t,uid=uid$4,isCallable=isCallable$l,isConstructor=isConstructor$2,isNullOrUndefined=isNullOrUndefined$5,isObject$1=isObject$f,isSymbol$1=isSymbol$4,iterate=iterate$c,anObject=anObject$s,classof=classof$c,hasOwn=hasOwnProperty_1,createProperty=createProperty$3,createNonEnumerableProperty=createNonEnumerableProperty$7,lengthOfArrayLike=lengthOfArrayLike$6,validateArgumentsLength$4=validateArgumentsLength$7,getRegExpFlags=regexpGetFlags,MapHelpers=mapHelpers,SetHelpers=setHelpers,setIterate=setIterate$1,detachTransferable=detachTransferable$2,ERROR_STACK_INSTALLABLE=errorStackInstallable,PROPER_STRUCTURED_CLONE_TRANSFER=structuredCloneProperTransfer,Object$1=globalThis$1.Object,Array$1=globalThis$1.Array,Date$1=globalThis$1.Date,Error$1=globalThis$1.Error,TypeError$1=globalThis$1.TypeError,PerformanceMark=globalThis$1.PerformanceMark,DOMException=getBuiltIn$2("DOMException"),Map$1=MapHelpers.Map,mapHas=MapHelpers.has,mapGet=MapHelpers.get,mapSet=MapHelpers.set,Set$1=SetHelpers.Set,setAdd=SetHelpers.add,setHas=SetHelpers.has,objectKeys=getBuiltIn$2("Object","keys"),push$1=uncurryThis$3([].push),thisBooleanValue=uncurryThis$3((!0).valueOf),thisNumberValue=uncurryThis$3(1.1.valueOf),thisStringValue=uncurryThis$3("".valueOf),thisTimeValue=uncurryThis$3(Date$1.prototype.getTime),PERFORMANCE_MARK=uid("structuredClone"),DATA_CLONE_ERROR="DataCloneError",TRANSFERRING="Transferring",checkBasicSemantic=function(t){return!fails$2(function(){var s=new globalThis$1.Set([7]),e=t(s),B=t(Object$1(7));return e===s||!e.has(7)||!isObject$1(B)||7!==+B})&&t},checkErrorsCloning=function(t,s){return!fails$2(function(){var e=new s,B=t({a:e,b:e});return!(B&&B.a===B.b&&B.a instanceof s&&B.a.stack===e.stack)})},checkNewErrorsCloningSemantic=function(t){return!fails$2(function(){var s=t(new globalThis$1.AggregateError([1],PERFORMANCE_MARK,{cause:3}));return"AggregateError"!==s.name||1!==s.errors[0]||s.message!==PERFORMANCE_MARK||3!==s.cause})},nativeStructuredClone=globalThis$1.structuredClone,FORCED_REPLACEMENT=!checkErrorsCloning(nativeStructuredClone,Error$1)||!checkErrorsCloning(nativeStructuredClone,DOMException)||!checkNewErrorsCloningSemantic(nativeStructuredClone),structuredCloneFromMark=!nativeStructuredClone&&checkBasicSemantic(function(t){return new PerformanceMark(PERFORMANCE_MARK,{detail:t}).detail}),nativeRestrictedStructuredClone=checkBasicSemantic(nativeStructuredClone)||structuredCloneFromMark,throwUncloneable=function(t){throw new DOMException("Uncloneable type: "+t,DATA_CLONE_ERROR)},throwUnpolyfillable=function(t,s){throw new DOMException((s||"Cloning")+" of "+t+" cannot be properly polyfilled in this engine",DATA_CLONE_ERROR)},tryNativeRestrictedStructuredClone=function(t,s){return nativeRestrictedStructuredClone||throwUnpolyfillable(s),nativeRestrictedStructuredClone(t)},createDataTransfer=function(){var t;try{t=new globalThis$1.DataTransfer}catch(s){try{t=new globalThis$1.ClipboardEvent("").clipboardData}catch(t){}}return t&&t.items&&t.files?t:null},cloneBuffer=function(t,s,e){if(mapHas(s,t))return mapGet(s,t);var B,i,F,Q,l,U;if("SharedArrayBuffer"===(e||classof(t)))B=nativeRestrictedStructuredClone?nativeRestrictedStructuredClone(t):t;else{var a=globalThis$1.DataView;a||isCallable(t.slice)||throwUnpolyfillable("ArrayBuffer");try{if(isCallable(t.slice)&&!t.resizable)B=t.slice(0);else{i=t.byteLength,F="maxByteLength"in t?{maxByteLength:t.maxByteLength}:void 0,B=new ArrayBuffer(i,F),Q=new a(t),l=new a(B);for(U=0;U<i;U++)l.setUint8(U,Q.getUint8(U))}}catch(t){throw new DOMException("ArrayBuffer is detached",DATA_CLONE_ERROR)}}return mapSet(s,t,B),B},cloneView=function(t,s,e,B,i){var F=globalThis$1[s];return isObject$1(F)||throwUnpolyfillable(s),new F(cloneBuffer(t.buffer,i),e,B)},structuredCloneInternal=function(t,s){if(isSymbol$1(t)&&throwUncloneable("Symbol"),!isObject$1(t))return t;if(s){if(mapHas(s,t))return mapGet(s,t)}else s=new Map$1;var e,B,i,F,Q,l,U,a,g=classof(t);switch(g){case"Array":i=Array$1(lengthOfArrayLike(t));break;case"Object":i={};break;case"Map":i=new Map$1;break;case"Set":i=new Set$1;break;case"RegExp":i=new RegExp(t.source,getRegExpFlags(t));break;case"Error":switch(B=t.name){case"AggregateError":i=new(getBuiltIn$2(B))([]);break;case"EvalError":case"RangeError":case"ReferenceError":case"SuppressedError":case"SyntaxError":case"TypeError":case"URIError":i=new(getBuiltIn$2(B));break;case"CompileError":case"LinkError":case"RuntimeError":i=new(getBuiltIn$2("WebAssembly",B));break;default:i=new Error$1}break;case"DOMException":i=new DOMException(t.message,t.name);break;case"ArrayBuffer":case"SharedArrayBuffer":i=cloneBuffer(t,s,g);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":l="DataView"===g?t.byteLength:t.length,i=cloneView(t,g,t.byteOffset,l,s);break;case"DOMQuad":try{i=new DOMQuad(structuredCloneInternal(t.p1,s),structuredCloneInternal(t.p2,s),structuredCloneInternal(t.p3,s),structuredCloneInternal(t.p4,s))}catch(s){i=tryNativeRestrictedStructuredClone(t,g)}break;case"File":if(nativeRestrictedStructuredClone)try{i=nativeRestrictedStructuredClone(t),classof(i)!==g&&(i=void 0)}catch(t){}if(!i)try{i=new File([t],t.name,t)}catch(t){}i||throwUnpolyfillable(g);break;case"FileList":if(F=createDataTransfer()){for(Q=0,l=lengthOfArrayLike(t);Q<l;Q++)F.items.add(structuredCloneInternal(t[Q],s));i=F.files}else i=tryNativeRestrictedStructuredClone(t,g);break;case"ImageData":try{i=new ImageData(structuredCloneInternal(t.data,s),t.width,t.height,{colorSpace:t.colorSpace})}catch(s){i=tryNativeRestrictedStructuredClone(t,g)}break;default:if(nativeRestrictedStructuredClone)i=nativeRestrictedStructuredClone(t);else switch(g){case"BigInt":i=Object$1(t.valueOf());break;case"Boolean":i=Object$1(thisBooleanValue(t));break;case"Number":i=Object$1(thisNumberValue(t));break;case"String":i=Object$1(thisStringValue(t));break;case"Date":i=new Date$1(thisTimeValue(t));break;case"Blob":try{i=t.slice(0,t.size,t.type)}catch(t){throwUnpolyfillable(g)}break;case"DOMPoint":case"DOMPointReadOnly":e=globalThis$1[g];try{i=e.fromPoint?e.fromPoint(t):new e(t.x,t.y,t.z,t.w)}catch(t){throwUnpolyfillable(g)}break;case"DOMRect":case"DOMRectReadOnly":e=globalThis$1[g];try{i=e.fromRect?e.fromRect(t):new e(t.x,t.y,t.width,t.height)}catch(t){throwUnpolyfillable(g)}break;case"DOMMatrix":case"DOMMatrixReadOnly":e=globalThis$1[g];try{i=e.fromMatrix?e.fromMatrix(t):new e(t)}catch(t){throwUnpolyfillable(g)}break;case"AudioData":case"VideoFrame":isCallable(t.clone)||throwUnpolyfillable(g);try{i=t.clone()}catch(t){throwUncloneable(g)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":throwUnpolyfillable(g);default:throwUncloneable(g)}}switch(mapSet(s,t,i),g){case"Array":case"Object":for(U=objectKeys(t),Q=0,l=lengthOfArrayLike(U);Q<l;Q++)a=U[Q],createProperty(i,a,structuredCloneInternal(t[a],s));break;case"Map":t.forEach(function(t,e){mapSet(i,structuredCloneInternal(e,s),structuredCloneInternal(t,s))});break;case"Set":t.forEach(function(t){setAdd(i,structuredCloneInternal(t,s))});break;case"Error":createNonEnumerableProperty(i,"message",structuredCloneInternal(t.message,s)),hasOwn(t,"cause")&&createNonEnumerableProperty(i,"cause",structuredCloneInternal(t.cause,s)),"AggregateError"===B?i.errors=structuredCloneInternal(t.errors,s):"SuppressedError"===B&&(i.error=structuredCloneInternal(t.error,s),i.suppressed=structuredCloneInternal(t.suppressed,s));case"DOMException":ERROR_STACK_INSTALLABLE&&createNonEnumerableProperty(i,"stack",structuredCloneInternal(t.stack,s))}return i},tryToTransfer=function(t,s){if(!isObject$1(t))throw new TypeError$1("Transfer option cannot be converted to a sequence");var e=[];iterate(t,function(t){push$1(e,anObject(t))});for(var B,i,F,Q,l,U=0,a=lengthOfArrayLike(e),g=new Set$1;U<a;){if(B=e[U++],"ArrayBuffer"===(i=classof(B))?setHas(g,B):mapHas(s,B))throw new DOMException("Duplicate transferable",DATA_CLONE_ERROR);if("ArrayBuffer"!==i){if(PROPER_STRUCTURED_CLONE_TRANSFER)Q=nativeStructuredClone(B,{transfer:[B]});else switch(i){case"ImageBitmap":F=globalThis$1.OffscreenCanvas,isConstructor(F)||throwUnpolyfillable(i,TRANSFERRING);try{(l=new F(B.width,B.height)).getContext("bitmaprenderer").transferFromImageBitmap(B),Q=l.transferToImageBitmap()}catch(t){}break;case"AudioData":case"VideoFrame":isCallable(B.clone)&&isCallable(B.close)||throwUnpolyfillable(i,TRANSFERRING);try{Q=B.clone(),B.close()}catch(t){}break;case"MediaSourceHandle":case"MessagePort":case"MIDIAccess":case"OffscreenCanvas":case"ReadableStream":case"RTCDataChannel":case"TransformStream":case"WebTransportReceiveStream":case"WebTransportSendStream":case"WritableStream":throwUnpolyfillable(i,TRANSFERRING)}if(void 0===Q)throw new DOMException("This object cannot be transferred: "+i,DATA_CLONE_ERROR);mapSet(s,B,Q)}else setAdd(g,B)}return g},detachBuffers=function(t){setIterate(t,function(t){PROPER_STRUCTURED_CLONE_TRANSFER?nativeRestrictedStructuredClone(t,{transfer:[t]}):isCallable(t.transfer)?t.transfer():detachTransferable?detachTransferable(t):throwUnpolyfillable("ArrayBuffer",TRANSFERRING)})};$$3({global:!0,enumerable:!0,sham:!PROPER_STRUCTURED_CLONE_TRANSFER,forced:FORCED_REPLACEMENT},{structuredClone:function(t){var s,e,B=validateArgumentsLength$4(arguments.length,1)>1&&!isNullOrUndefined(arguments[1])?anObject(arguments[1]):void 0,i=B?B.transfer:void 0;void 0!==i&&(s=new Map$1,e=tryToTransfer(i,s));var F=structuredCloneInternal(t,s);return e&&detachBuffers(e),F}});var fails$1=fails$t,wellKnownSymbol=wellKnownSymbol$k,DESCRIPTORS$1=descriptors,IS_PURE=isPure,ITERATOR=wellKnownSymbol("iterator"),urlConstructorDetection=!fails$1(function(){var t=new URL("b?a=1&b=2&c=3","https://a"),s=t.searchParams,e=new URLSearchParams("a=1&a=2&b=3"),B="";return t.pathname="c%20d",s.forEach(function(t,e){s.delete("b"),B+=e+t}),e.delete("a",2),e.delete("b",void 0),IS_PURE&&(!t.toJSON||!e.has("a",1)||e.has("a",2)||!e.has("a",void 0)||e.has("b"))||!s.size&&(IS_PURE||!DESCRIPTORS$1)||!s.sort||"https://a/c%20d?a=1&c=3"!==t.href||"3"!==s.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!s[ITERATOR]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("https://ÑÐµÑÑ").host||"#%D0%B1"!==new URL("https://a#Ð±").hash||"a1c3"!==B||"x"!==new URL("https://x",void 0).host}),$$2=_export,getBuiltIn$1=getBuiltIn$j,fails=fails$t,validateArgumentsLength$3=validateArgumentsLength$7,toString$3=toString$9,USE_NATIVE_URL$1=urlConstructorDetection,URL$2=getBuiltIn$1("URL"),THROWS_WITHOUT_ARGUMENTS=USE_NATIVE_URL$1&&fails(function(){URL$2.canParse()}),WRONG_ARITY=fails(function(){return 1!==URL$2.canParse.length});$$2({target:"URL",stat:!0,forced:!THROWS_WITHOUT_ARGUMENTS||WRONG_ARITY},{canParse:function(t){var s=validateArgumentsLength$3(arguments.length,1),e=toString$3(t),B=s<2||void 0===arguments[1]?void 0:toString$3(arguments[1]);try{return!!new URL$2(e,B)}catch(t){return!1}}});var $$1=_export,getBuiltIn=getBuiltIn$j,validateArgumentsLength$2=validateArgumentsLength$7,toString$2=toString$9,USE_NATIVE_URL=urlConstructorDetection,URL$1=getBuiltIn("URL");$$1({target:"URL",stat:!0,forced:!USE_NATIVE_URL},{parse:function(t){var s=validateArgumentsLength$2(arguments.length,1),e=toString$2(t),B=s<2||void 0===arguments[1]?void 0:toString$2(arguments[1]);try{return new URL$1(e,B)}catch(t){return null}}});var defineBuiltIn$1=defineBuiltIn$b,uncurryThis$2=functionUncurryThis,toString$1=toString$9,validateArgumentsLength$1=validateArgumentsLength$7,$URLSearchParams$1=URLSearchParams,URLSearchParamsPrototype$2=$URLSearchParams$1.prototype,append$2=uncurryThis$2(URLSearchParamsPrototype$2.append),$delete=uncurryThis$2(URLSearchParamsPrototype$2.delete),forEach$1=uncurryThis$2(URLSearchParamsPrototype$2.forEach),push=uncurryThis$2([].push),params$1=new $URLSearchParams$1("a=1&a=2&b=3");params$1.delete("a",1),params$1.delete("b",void 0),params$1+""!="a=2"&&defineBuiltIn$1(URLSearchParamsPrototype$2,"delete",function(t){var s=arguments.length,e=s<2?void 0:arguments[1];if(s&&void 0===e)return $delete(this,t);var B=[];forEach$1(this,function(t,s){push(B,{key:s,value:t})}),validateArgumentsLength$1(s,1);for(var i,F=toString$1(t),Q=toString$1(e),l=0,U=0,a=!1,g=B.length;l<g;)i=B[l++],a||i.key===F?(a=!0,$delete(this,i.key)):U++;for(;U<g;)(i=B[U++]).key===F&&i.value===Q||append$2(this,i.key,i.value)},{enumerable:!0,unsafe:!0});var defineBuiltIn=defineBuiltIn$b,uncurryThis$1=functionUncurryThis,toString=toString$9,validateArgumentsLength=validateArgumentsLength$7,$URLSearchParams=URLSearchParams,URLSearchParamsPrototype$1=$URLSearchParams.prototype,getAll=uncurryThis$1(URLSearchParamsPrototype$1.getAll),$has=uncurryThis$1(URLSearchParamsPrototype$1.has),params=new $URLSearchParams("a=1");!params.has("a",2)&&params.has("a",void 0)||defineBuiltIn(URLSearchParamsPrototype$1,"has",function(t){var s=arguments.length,e=s<2?void 0:arguments[1];if(s&&void 0===e)return $has(this,t);var B=getAll(this,t);validateArgumentsLength(s,1);for(var i=toString(e),F=0;F<B.length;)if(B[F++]===i)return!0;return!1},{enumerable:!0,unsafe:!0});var DESCRIPTORS=descriptors,uncurryThis=functionUncurryThis,defineBuiltInAccessor=defineBuiltInAccessor$6,URLSearchParamsPrototype=URLSearchParams.prototype,forEach=uncurryThis(URLSearchParamsPrototype.forEach);DESCRIPTORS&&!("size"in URLSearchParamsPrototype)&&defineBuiltInAccessor(URLSearchParamsPrototype,"size",{get:function(){var t=0;return forEach(this,function(){t++}),t},configurable:!0,enumerable:!0});const elementMap=new Map;var Data={set(t,s,e){elementMap.has(t)||elementMap.set(t,new Map);const B=elementMap.get(t);B.has(s)||0===B.size?B.set(s,e):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(B.keys())[0]}.`)},get:(t,s)=>elementMap.has(t)&&elementMap.get(t).get(s)||null,remove(t,s){if(!elementMap.has(t))return;const e=elementMap.get(t);e.delete(s),0===e.size&&elementMap.delete(t)}};const MILLISECONDS_MULTIPLIER=1e3,TRANSITION_END="transitionend",parseSelector=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,(t,s)=>`#${CSS.escape(s)}`)),t),toType=t=>null==t?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),getTransitionDurationFromElement=t=>{if(!t)return 0;let{transitionDuration:s,transitionDelay:e}=window.getComputedStyle(t);const B=Number.parseFloat(s),i=Number.parseFloat(e);return B||i?(s=s.split(",")[0],e=e.split(",")[0],1e3*(Number.parseFloat(s)+Number.parseFloat(e))):0},triggerTransitionEnd=t=>{t.dispatchEvent(new Event(TRANSITION_END))},isElement=t=>!(!t||"object"!=typeof t)&&(void 0!==t.jquery&&(t=t[0]),void 0!==t.nodeType),getElement=t=>isElement(t)?t.jquery?t[0]:t:"string"==typeof t&&t.length>0?document.querySelector(parseSelector(t)):null,isVisible=t=>{if(!isElement(t)||0===t.getClientRects().length)return!1;const s="visible"===getComputedStyle(t).getPropertyValue("visibility"),e=t.closest("details:not([open])");if(!e)return s;if(e!==t){const s=t.closest("summary");if(s&&s.parentNode!==e)return!1;if(null===s)return!1}return s},isDisabled=t=>!t||t.nodeType!==Node.ELEMENT_NODE||(!!t.classList.contains("disabled")||(void 0!==t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled"))),reflow=t=>{t.offsetHeight},getjQuery=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,DOMContentLoadedCallbacks=[],onDOMContentLoaded=t=>{"loading"===document.readyState?(DOMContentLoadedCallbacks.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of DOMContentLoadedCallbacks)t()}),DOMContentLoadedCallbacks.push(t)):t()},defineJQueryPlugin=t=>{onDOMContentLoaded(()=>{const s=getjQuery();if(s){const e=t.NAME,B=s.fn[e];s.fn[e]=t.jQueryInterface,s.fn[e].Constructor=t,s.fn[e].noConflict=()=>(s.fn[e]=B,t.jQueryInterface)}})},execute=(t,s=[],e=t)=>"function"==typeof t?t.call(...s):e,executeAfterTransition=(t,s,e=!0)=>{if(!e)return void execute(t);const B=getTransitionDurationFromElement(s)+5;let i=!1;const F=({target:e})=>{e===s&&(i=!0,s.removeEventListener(TRANSITION_END,F),execute(t))};s.addEventListener(TRANSITION_END,F),setTimeout(()=>{i||triggerTransitionEnd(s)},B)},namespaceRegex=/[^.]*(?=\..*)\.|.*/,stripNameRegex=/\..*/,stripUidRegex=/::\d+$/,eventRegistry={};let uidEvent=1;const customEvents={mouseenter:"mouseover",mouseleave:"mouseout"},nativeEvents=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function makeEventUid(t,s){return s&&`${s}::${uidEvent++}`||t.uidEvent||uidEvent++}function getElementEvents(t){const s=makeEventUid(t);return t.uidEvent=s,eventRegistry[s]=eventRegistry[s]||{},eventRegistry[s]}function bootstrapHandler(t,s){return function e(B){return hydrateObj(B,{delegateTarget:t}),e.oneOff&&EventHandler.off(t,B.type,s),s.apply(t,[B])}}function bootstrapDelegationHandler(t,s,e){return function B(i){const F=t.querySelectorAll(s);for(let{target:Q}=i;Q&&Q!==this;Q=Q.parentNode)for(const l of F)if(l===Q)return hydrateObj(i,{delegateTarget:Q}),B.oneOff&&EventHandler.off(t,i.type,s,e),e.apply(Q,[i])}}function findHandler(t,s,e=null){return Object.values(t).find(t=>t.callable===s&&t.delegationSelector===e)}function normalizeParameters(t,s,e){const B="string"==typeof s,i=B?e:s||e;let F=getTypeEvent(t);return nativeEvents.has(F)||(F=t),[B,i,F]}function addHandler(t,s,e,B,i){if("string"!=typeof s||!t)return;let[F,Q,l]=normalizeParameters(s,e,B);if(s in customEvents){const t=t=>function(s){if(!s.relatedTarget||s.relatedTarget!==s.delegateTarget&&!s.delegateTarget.contains(s.relatedTarget))return t.call(this,s)};Q=t(Q)}const U=getElementEvents(t),a=U[l]||(U[l]={}),g=findHandler(a,Q,F?e:null);if(g)return void(g.oneOff=g.oneOff&&i);const I=makeEventUid(Q,s.replace(namespaceRegex,"")),c=F?bootstrapDelegationHandler(t,e,Q):bootstrapHandler(t,Q);c.delegationSelector=F?e:null,c.callable=Q,c.oneOff=i,c.uidEvent=I,a[I]=c,t.addEventListener(l,c,F)}function removeHandler(t,s,e,B,i){const F=findHandler(s[e],B,i);F&&(t.removeEventListener(e,F,Boolean(i)),delete s[e][F.uidEvent])}function removeNamespacedHandlers(t,s,e,B){const i=s[e]||{};for(const[F,Q]of Object.entries(i))F.includes(B)&&removeHandler(t,s,e,Q.callable,Q.delegationSelector)}function getTypeEvent(t){return t=t.replace(stripNameRegex,""),customEvents[t]||t}const EventHandler={on(t,s,e,B){addHandler(t,s,e,B,!1)},one(t,s,e,B){addHandler(t,s,e,B,!0)},off(t,s,e,B){if("string"!=typeof s||!t)return;const[i,F,Q]=normalizeParameters(s,e,B),l=Q!==s,U=getElementEvents(t),a=U[Q]||{},g=s.startsWith(".");if(void 0===F){if(g)for(const e of Object.keys(U))removeNamespacedHandlers(t,U,e,s.slice(1));for(const[e,B]of Object.entries(a)){const i=e.replace(stripUidRegex,"");l&&!s.includes(i)||removeHandler(t,U,Q,B.callable,B.delegationSelector)}}else{if(!Object.keys(a).length)return;removeHandler(t,U,Q,F,i?e:null)}},trigger(t,s,e){if("string"!=typeof s||!t)return null;const B=getjQuery();let i=null,F=!0,Q=!0,l=!1;s!==getTypeEvent(s)&&B&&(i=B.Event(s,e),B(t).trigger(i),F=!i.isPropagationStopped(),Q=!i.isImmediatePropagationStopped(),l=i.isDefaultPrevented());const U=hydrateObj(new Event(s,{bubbles:F,cancelable:!0}),e);return l&&U.preventDefault(),Q&&t.dispatchEvent(U),U.defaultPrevented&&i&&i.preventDefault(),U}};function hydrateObj(t,s={}){for(const[e,B]of Object.entries(s))try{t[e]=B}catch{Object.defineProperty(t,e,{configurable:!0,get:()=>B})}return t}function normalizeData(t){if("true"===t)return!0;if("false"===t)return!1;if(t===Number(t).toString())return Number(t);if(""===t||"null"===t)return null;if("string"!=typeof t)return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function normalizeDataKey(t){return t.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const Manipulator={setDataAttribute(t,s,e){t.setAttribute(`data-bs-${normalizeDataKey(s)}`,e)},removeDataAttribute(t,s){t.removeAttribute(`data-bs-${normalizeDataKey(s)}`)},getDataAttributes(t){if(!t)return{};const s={},e=Object.keys(t.dataset).filter(t=>t.startsWith("bs")&&!t.startsWith("bsConfig"));for(const B of e){let e=B.replace(/^bs/,"");e=e.charAt(0).toLowerCase()+e.slice(1),s[e]=normalizeData(t.dataset[B])}return s},getDataAttribute:(t,s)=>normalizeData(t.getAttribute(`data-bs-${normalizeDataKey(s)}`))};class Config{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,s){const e=isElement(s)?Manipulator.getDataAttribute(s,"config"):{};return{...this.constructor.Default,..."object"==typeof e?e:{},...isElement(s)?Manipulator.getDataAttributes(s):{},..."object"==typeof t?t:{}}}_typeCheckConfig(t,s=this.constructor.DefaultType){for(const[e,B]of Object.entries(s)){const s=t[e],i=isElement(s)?"element":toType(s);if(!new RegExp(B).test(i))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${e}" provided type "${i}" but expected type "${B}".`)}}}const VERSION="5.3.8";class BaseComponent extends Config{constructor(t,s){super(),(t=getElement(t))&&(this._element=t,this._config=this._getConfig(s),Data.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Data.remove(this._element,this.constructor.DATA_KEY),EventHandler.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,s,e=!0){executeAfterTransition(t,s,e)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return Data.get(getElement(t),this.DATA_KEY)}static getOrCreateInstance(t,s={}){return this.getInstance(t)||new this(t,"object"==typeof s?s:null)}static get VERSION(){return"5.3.8"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const NAME$1="button",DATA_KEY$1="bs.button",EVENT_KEY$1=`.${DATA_KEY$1}`,DATA_API_KEY$1=".data-api",CLASS_NAME_ACTIVE="active",SELECTOR_DATA_TOGGLE$1='[data-bs-toggle="button"]',EVENT_CLICK_DATA_API$1=`click${EVENT_KEY$1}.data-api`;class Button extends BaseComponent{static get NAME(){return NAME$1}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(t){return this.each(function(){const s=Button.getOrCreateInstance(this);"toggle"===t&&s[t]()})}}EventHandler.on(document,EVENT_CLICK_DATA_API$1,SELECTOR_DATA_TOGGLE$1,t=>{t.preventDefault();const s=t.target.closest(SELECTOR_DATA_TOGGLE$1);Button.getOrCreateInstance(s).toggle()}),defineJQueryPlugin(Button);const getSelector=t=>{let s=t.getAttribute("data-bs-target");if(!s||"#"===s){let e=t.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith("."))return null;e.includes("#")&&!e.startsWith("#")&&(e=`#${e.split("#")[1]}`),s=e&&"#"!==e?e.trim():null}return s?s.split(",").map(t=>parseSelector(t)).join(","):null},SelectorEngine={find:(t,s=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(s,t)),findOne:(t,s=document.documentElement)=>Element.prototype.querySelector.call(s,t),children:(t,s)=>[].concat(...t.children).filter(t=>t.matches(s)),parents(t,s){const e=[];let B=t.parentNode.closest(s);for(;B;)e.push(B),B=B.parentNode.closest(s);return e},prev(t,s){let e=t.previousElementSibling;for(;e;){if(e.matches(s))return[e];e=e.previousElementSibling}return[]},next(t,s){let e=t.nextElementSibling;for(;e;){if(e.matches(s))return[e];e=e.nextElementSibling}return[]},focusableChildren(t){const s=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(t=>`${t}:not([tabindex^="-"])`).join(",");return this.find(s,t).filter(t=>!isDisabled(t)&&isVisible(t))},getSelectorFromElement(t){const s=getSelector(t);return s&&SelectorEngine.findOne(s)?s:null},getElementFromSelector(t){const s=getSelector(t);return s?SelectorEngine.findOne(s):null},getMultipleElementsFromSelector(t){const s=getSelector(t);return s?SelectorEngine.find(s):[]}},NAME="collapse",DATA_KEY="bs.collapse",EVENT_KEY=`.${DATA_KEY}`,DATA_API_KEY=".data-api",EVENT_SHOW=`show${EVENT_KEY}`,EVENT_SHOWN=`shown${EVENT_KEY}`,EVENT_HIDE=`hide${EVENT_KEY}`,EVENT_HIDDEN=`hidden${EVENT_KEY}`,EVENT_CLICK_DATA_API=`click${EVENT_KEY}.data-api`,CLASS_NAME_SHOW="show",CLASS_NAME_COLLAPSE="collapse",CLASS_NAME_COLLAPSING="collapsing",CLASS_NAME_COLLAPSED="collapsed",CLASS_NAME_DEEPER_CHILDREN=":scope .collapse .collapse",CLASS_NAME_HORIZONTAL="collapse-horizontal",WIDTH="width",HEIGHT="height",SELECTOR_ACTIVES=".collapse.show, .collapse.collapsing",SELECTOR_DATA_TOGGLE='[data-bs-toggle="collapse"]',Default={parent:null,toggle:!0},DefaultType={parent:"(null|element)",toggle:"boolean"};class Collapse extends BaseComponent{constructor(t,s){super(t,s),this._isTransitioning=!1,this._triggerArray=[];const e=SelectorEngine.find(SELECTOR_DATA_TOGGLE);for(const t of e){const s=SelectorEngine.getSelectorFromElement(t),e=SelectorEngine.find(s).filter(t=>t===this._element);null!==s&&e.length&&this._triggerArray.push(t)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Default}static get DefaultType(){return DefaultType}static get NAME(){return NAME}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(SELECTOR_ACTIVES).filter(t=>t!==this._element).map(t=>Collapse.getOrCreateInstance(t,{toggle:!1}))),t.length&&t[0]._isTransitioning)return;if(EventHandler.trigger(this._element,EVENT_SHOW).defaultPrevented)return;for(const s of t)s.hide();const s=this._getDimension();this._element.classList.remove("collapse"),this._element.classList.add("collapsing"),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const e=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove("collapsing"),this._element.classList.add("collapse","show"),this._element.style[s]="",EventHandler.trigger(this._element,EVENT_SHOWN)},this._element,!0),this._element.style[s]=`${this._element[e]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(EventHandler.trigger(this._element,EVENT_HIDE).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,reflow(this._element),this._element.classList.add("collapsing"),this._element.classList.remove("collapse","show");for(const t of this._triggerArray){const s=SelectorEngine.getElementFromSelector(t);s&&!this._isShown(s)&&this._addAriaAndCollapsedClass([t],!1)}this._isTransitioning=!0;this._element.style[t]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove("collapsing"),this._element.classList.add("collapse"),EventHandler.trigger(this._element,EVENT_HIDDEN)},this._element,!0)}_isShown(t=this._element){return t.classList.contains("show")}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=getElement(t.parent),t}_getDimension(){return this._element.classList.contains("collapse-horizontal")?WIDTH:HEIGHT}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(SELECTOR_DATA_TOGGLE);for(const s of t){const t=SelectorEngine.getElementFromSelector(s);t&&this._addAriaAndCollapsedClass([s],this._isShown(t))}}_getFirstLevelChildren(t){const s=SelectorEngine.find(CLASS_NAME_DEEPER_CHILDREN,this._config.parent);return SelectorEngine.find(t,this._config.parent).filter(t=>!s.includes(t))}_addAriaAndCollapsedClass(t,s){if(t.length)for(const e of t)e.classList.toggle("collapsed",!s),e.setAttribute("aria-expanded",s)}static jQueryInterface(t){const s={};return"string"==typeof t&&/show|hide/.test(t)&&(s.toggle=!1),this.each(function(){const e=Collapse.getOrCreateInstance(this,s);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}})}}EventHandler.on(document,EVENT_CLICK_DATA_API,SELECTOR_DATA_TOGGLE,function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();for(const t of SelectorEngine.getMultipleElementsFromSelector(this))Collapse.getOrCreateInstance(t,{toggle:!1}).toggle()}),defineJQueryPlugin(Collapse);
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const t$2=globalThis,e$3=t$2.ShadowRoot&&(void 0===t$2.ShadyCSS||t$2.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s$4=Symbol(),o$6=new WeakMap;let n$4=class{constructor(t,s,e){if(this._$cssResult$=!0,e!==s$4)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=s}get styleSheet(){let t=this.o;const s=this.t;if(e$3&&void 0===t){const e=void 0!==s&&1===s.length;e&&(t=o$6.get(s)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),e&&o$6.set(s,t))}return t}toString(){return this.cssText}};const r$4=t=>new n$4("string"==typeof t?t:t+"",void 0,s$4),i$5=(t,...s)=>{const e=1===t.length?t[0]:s.reduce((s,e,B)=>s+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(e)+t[B+1],t[0]);return new n$4(e,t,s$4)},S$1=(t,s)=>{if(e$3)t.adoptedStyleSheets=s.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const e of s){const s=document.createElement("style"),B=t$2.litNonce;void 0!==B&&s.setAttribute("nonce",B),s.textContent=e.cssText,t.appendChild(s)}},c$6=e$3?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let s="";for(const e of t.cssRules)s+=e.cssText;return r$4(s)})(t):t,{is:i$4,defineProperty:e$2,getOwnPropertyDescriptor:h$2,getOwnPropertyNames:r$3,getOwnPropertySymbols:o$5,getPrototypeOf:n$3}=Object,a$3=globalThis,c$5=a$3.trustedTypes,l$1=c$5?c$5.emptyScript:"",p$1=a$3.reactiveElementPolyfillSupport,d$2=(t,s)=>t,u$1={toAttribute(t,s){switch(s){case Boolean:t=t?l$1:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,s){let e=t;switch(s){case Boolean:e=null!==t;break;case Number:e=null===t?null:Number(t);break;case Object:case Array:try{e=JSON.parse(t)}catch(t){e=null}}return e}},f$3=(t,s)=>!i$4(t,s),b$2={attribute:!0,type:String,converter:u$1,reflect:!1,useDefault:!1,hasChanged:f$3};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */Symbol.metadata??=Symbol("metadata"),a$3.litPropertyMetadata??=new WeakMap;let y$3=class extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,s=b$2){if(s.state&&(s.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((s=Object.create(s)).wrapped=!0),this.elementProperties.set(t,s),!s.noAccessor){const e=Symbol(),B=this.getPropertyDescriptor(t,e,s);void 0!==B&&e$2(this.prototype,t,B)}}static getPropertyDescriptor(t,s,e){const{get:B,set:i}=h$2(this.prototype,t)??{get(){return this[s]},set(t){this[s]=t}};return{get:B,set(s){const F=B?.call(this);i?.call(this,s),this.requestUpdate(t,F,e)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??b$2}static _$Ei(){if(this.hasOwnProperty(d$2("elementProperties")))return;const t=n$3(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(d$2("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(d$2("properties"))){const t=this.properties,s=[...r$3(t),...o$5(t)];for(const e of s)this.createProperty(e,t[e])}const t=this[Symbol.metadata];if(null!==t){const s=litPropertyMetadata.get(t);if(void 0!==s)for(const[t,e]of s)this.elementProperties.set(t,e)}this._$Eh=new Map;for(const[t,s]of this.elementProperties){const e=this._$Eu(t,s);void 0!==e&&this._$Eh.set(e,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const s=[];if(Array.isArray(t)){const e=new Set(t.flat(1/0).reverse());for(const t of e)s.unshift(c$6(t))}else void 0!==t&&s.push(c$6(t));return s}static _$Eu(t,s){const e=s.attribute;return!1===e?void 0:"string"==typeof e?e:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(t=>t(this))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,s=this.constructor.elementProperties;for(const e of s.keys())this.hasOwnProperty(e)&&(t.set(e,this[e]),delete this[e]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return S$1(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(t=>t.hostConnected?.())}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach(t=>t.hostDisconnected?.())}attributeChangedCallback(t,s,e){this._$AK(t,e)}_$ET(t,s){const e=this.constructor.elementProperties.get(t),B=this.constructor._$Eu(t,e);if(void 0!==B&&!0===e.reflect){const i=(void 0!==e.converter?.toAttribute?e.converter:u$1).toAttribute(s,e.type);this._$Em=t,null==i?this.removeAttribute(B):this.setAttribute(B,i),this._$Em=null}}_$AK(t,s){const e=this.constructor,B=e._$Eh.get(t);if(void 0!==B&&this._$Em!==B){const t=e.getPropertyOptions(B),i="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:u$1;this._$Em=B;const F=i.fromAttribute(s,t.type);this[B]=F??this._$Ej?.get(B)??F,this._$Em=null}}requestUpdate(t,s,e){if(void 0!==t){const B=this.constructor,i=this[t];if(e??=B.getPropertyOptions(t),!((e.hasChanged??f$3)(i,s)||e.useDefault&&e.reflect&&i===this._$Ej?.get(t)&&!this.hasAttribute(B._$Eu(t,e))))return;this.C(t,s,e)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(t,s,{useDefault:e,reflect:B,wrapped:i},F){e&&!(this._$Ej??=new Map).has(t)&&(this._$Ej.set(t,F??s??this[t]),!0!==i||void 0!==F)||(this._$AL.has(t)||(this.hasUpdated||e||(s=void 0),this._$AL.set(t,s)),!0===B&&this._$Em!==t&&(this._$Eq??=new Set).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,s]of this._$Ep)this[t]=s;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[s,e]of t){const{wrapped:t}=e,B=this[s];!0!==t||this._$AL.has(s)||void 0===B||this.C(s,void 0,e,B)}}let t=!1;const s=this._$AL;try{t=this.shouldUpdate(s),t?(this.willUpdate(s),this._$EO?.forEach(t=>t.hostUpdate?.()),this.update(s)):this._$EM()}catch(s){throw t=!1,this._$EM(),s}t&&this._$AE(s)}willUpdate(t){}_$AE(t){this._$EO?.forEach(t=>t.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&=this._$Eq.forEach(t=>this._$ET(t,this[t])),this._$EM()}updated(t){}firstUpdated(t){}};y$3.elementStyles=[],y$3.shadowRootOptions={mode:"open"},y$3[d$2("elementProperties")]=new Map,y$3[d$2("finalized")]=new Map,p$1?.({ReactiveElement:y$3}),(a$3.reactiveElementVersions??=[]).push("2.1.1");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const t$1=globalThis,i$3=t$1.trustedTypes,s$3=i$3?i$3.createPolicy("lit-html",{createHTML:t=>t}):void 0,e$1="$lit$",h$1=`lit$${Math.random().toFixed(9).slice(2)}$`,o$4="?"+h$1,n$2=`<${o$4}>`,r$2=document,l=()=>r$2.createComment(""),c$4=t=>null===t||"object"!=typeof t&&"function"!=typeof t,a$2=Array.isArray,u=t=>a$2(t)||"function"==typeof t?.[Symbol.iterator],d$1="[ \t\n\f\r]",f$2=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,v$1=/-->/g,_=/>/g,m=RegExp(`>|${d$1}(?:([^\\s"'>=/]+)(${d$1}*=${d$1}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),p=/'/g,g$1=/"/g,$=/^(?:script|style|textarea|title)$/i,y$2=t=>(s,...e)=>({_$litType$:t,strings:s,values:e}),x$3=y$2(1),b$1=y$2(2),T=Symbol.for("lit-noChange"),E$1=Symbol.for("lit-nothing"),A$2=new WeakMap,C$1=r$2.createTreeWalker(r$2,129);function P(t,s){if(!a$2(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==s$3?s$3.createHTML(s):s}const V=(t,s)=>{const e=t.length-1,B=[];let i,F=2===s?"<svg>":3===s?"<math>":"",Q=f$2;for(let s=0;s<e;s++){const e=t[s];let l,U,a=-1,g=0;for(;g<e.length&&(Q.lastIndex=g,U=Q.exec(e),null!==U);)g=Q.lastIndex,Q===f$2?"!--"===U[1]?Q=v$1:void 0!==U[1]?Q=_:void 0!==U[2]?($.test(U[2])&&(i=RegExp("</"+U[2],"g")),Q=m):void 0!==U[3]&&(Q=m):Q===m?">"===U[0]?(Q=i??f$2,a=-1):void 0===U[1]?a=-2:(a=Q.lastIndex-U[2].length,l=U[1],Q=void 0===U[3]?m:'"'===U[3]?g$1:p):Q===g$1||Q===p?Q=m:Q===v$1||Q===_?Q=f$2:(Q=m,i=void 0);const I=Q===m&&t[s+1].startsWith("/>")?" ":"";F+=Q===f$2?e+n$2:a>=0?(B.push(l),e.slice(0,a)+e$1+e.slice(a)+h$1+I):e+h$1+(-2===a?s:I)}return[P(t,F+(t[e]||"<?>")+(2===s?"</svg>":3===s?"</math>":"")),B]};let N$1=class t{constructor({strings:s,_$litType$:e},B){let i;this.parts=[];let F=0,Q=0;const U=s.length-1,a=this.parts,[g,c]=V(s,e);if(this.el=t.createElement(g,B),C$1.currentNode=this.el.content,2===e||3===e){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(i=C$1.nextNode())&&a.length<U;){if(1===i.nodeType){if(i.hasAttributes())for(const t of i.getAttributeNames())if(t.endsWith(e$1)){const s=c[Q++],e=i.getAttribute(t).split(h$1),B=/([.?@])?(.*)/.exec(s);a.push({type:1,index:F,name:B[2],strings:e,ctor:"."===B[1]?H:"?"===B[1]?I:"@"===B[1]?L:k$1}),i.removeAttribute(t)}else t.startsWith(h$1)&&(a.push({type:6,index:F}),i.removeAttribute(t));if($.test(i.tagName)){const t=i.textContent.split(h$1),s=t.length-1;if(s>0){i.textContent=i$3?i$3.emptyScript:"";for(let e=0;e<s;e++)i.append(t[e],l()),C$1.nextNode(),a.push({type:2,index:++F});i.append(t[s],l())}}}else if(8===i.nodeType)if(i.data===o$4)a.push({type:2,index:F});else{let t=-1;for(;-1!==(t=i.data.indexOf(h$1,t+1));)a.push({type:7,index:F}),t+=h$1.length-1}F++}}static createElement(t,s){const e=r$2.createElement("template");return e.innerHTML=t,e}};function S(t,s,e=t,B){if(s===T)return s;let i=void 0!==B?e._$Co?.[B]:e._$Cl;const F=c$4(s)?void 0:s._$litDirective$;return i?.constructor!==F&&(i?._$AO?.(!1),void 0===F?i=void 0:(i=new F(t),i._$AT(t,e,B)),void 0!==B?(e._$Co??=[])[B]=i:e._$Cl=i),void 0!==i&&(s=S(t,i._$AS(t,s.values),i,B)),s}let M$1=class{constructor(t,s){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=s}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:s},parts:e}=this._$AD,B=(t?.creationScope??r$2).importNode(s,!0);C$1.currentNode=B;let i=C$1.nextNode(),F=0,Q=0,l=e[0];for(;void 0!==l;){if(F===l.index){let s;2===l.type?s=new R(i,i.nextSibling,this,t):1===l.type?s=new l.ctor(i,l.name,l.strings,this,t):6===l.type&&(s=new z$1(i,this,t)),this._$AV.push(s),l=e[++Q]}F!==l?.index&&(i=C$1.nextNode(),F++)}return C$1.currentNode=r$2,B}p(t){let s=0;for(const e of this._$AV)void 0!==e&&(void 0!==e.strings?(e._$AI(t,e,s),s+=e.strings.length-2):e._$AI(t[s])),s++}};class R{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,s,e,B){this.type=2,this._$AH=E$1,this._$AN=void 0,this._$AA=t,this._$AB=s,this._$AM=e,this.options=B,this._$Cv=B?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const s=this._$AM;return void 0!==s&&11===t?.nodeType&&(t=s.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,s=this){t=S(this,t,s),c$4(t)?t===E$1||null==t||""===t?(this._$AH!==E$1&&this._$AR(),this._$AH=E$1):t!==this._$AH&&t!==T&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):u(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==E$1&&c$4(this._$AH)?this._$AA.nextSibling.data=t:this.T(r$2.createTextNode(t)),this._$AH=t}$(t){const{values:s,_$litType$:e}=t,B="number"==typeof e?this._$AC(t):(void 0===e.el&&(e.el=N$1.createElement(P(e.h,e.h[0]),this.options)),e);if(this._$AH?._$AD===B)this._$AH.p(s);else{const t=new M$1(B,this),e=t.u(this.options);t.p(s),this.T(e),this._$AH=t}}_$AC(t){let s=A$2.get(t.strings);return void 0===s&&A$2.set(t.strings,s=new N$1(t)),s}k(t){a$2(this._$AH)||(this._$AH=[],this._$AR());const s=this._$AH;let e,B=0;for(const i of t)B===s.length?s.push(e=new R(this.O(l()),this.O(l()),this,this.options)):e=s[B],e._$AI(i),B++;B<s.length&&(this._$AR(e&&e._$AB.nextSibling,B),s.length=B)}_$AR(t=this._$AA.nextSibling,s){for(this._$AP?.(!1,!0,s);t!==this._$AB;){const s=t.nextSibling;t.remove(),t=s}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}let k$1=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,s,e,B,i){this.type=1,this._$AH=E$1,this._$AN=void 0,this.element=t,this.name=s,this._$AM=B,this.options=i,e.length>2||""!==e[0]||""!==e[1]?(this._$AH=Array(e.length-1).fill(new String),this.strings=e):this._$AH=E$1}_$AI(t,s=this,e,B){const i=this.strings;let F=!1;if(void 0===i)t=S(this,t,s,0),F=!c$4(t)||t!==this._$AH&&t!==T,F&&(this._$AH=t);else{const B=t;let Q,l;for(t=i[0],Q=0;Q<i.length-1;Q++)l=S(this,B[e+Q],s,Q),l===T&&(l=this._$AH[Q]),F||=!c$4(l)||l!==this._$AH[Q],l===E$1?t=E$1:t!==E$1&&(t+=(l??"")+i[Q+1]),this._$AH[Q]=l}F&&!B&&this.j(t)}j(t){t===E$1?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}};class H extends k$1{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===E$1?void 0:t}}class I extends k$1{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==E$1)}}class L extends k$1{constructor(t,s,e,B,i){super(t,s,e,B,i),this.type=5}_$AI(t,s=this){if((t=S(this,t,s,0)??E$1)===T)return;const e=this._$AH,B=t===E$1&&e!==E$1||t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive,i=t!==E$1&&(e===E$1||B);B&&this.element.removeEventListener(this.name,this,e),i&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}let z$1=class{constructor(t,s,e){this.element=t,this.type=6,this._$AN=void 0,this._$AM=s,this.options=e}get _$AU(){return this._$AM._$AU}_$AI(t){S(this,t)}};const j$1=t$1.litHtmlPolyfillSupport;j$1?.(N$1,R),(t$1.litHtmlVersions??=[]).push("3.3.1");const B$1=(t,s,e)=>{const B=e?.renderBefore??s;let i=B._$litPart$;if(void 0===i){const t=e?.renderBefore??null;B._$litPart$=i=new R(s.insertBefore(l(),t),t,void 0,e??{})}return i._$AI(t),i},s$2=globalThis;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let i$2=class extends y$3{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const s=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=B$1(s,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return T}};i$2._$litElement$=!0,i$2.finalized=!0,s$2.litElementHydrateSupport?.({LitElement:i$2});const o$3=s$2.litElementPolyfillSupport;function ascending$2(t,s){return null==t||null==s?NaN:t<s?-1:t>s?1:t>=s?0:NaN}function descending$1(t,s){return null==t||null==s?NaN:s<t?-1:s>t?1:s>=t?0:NaN}function bisector(t){let s,e,B;function i(t,B,i=0,F=t.length){if(i<F){if(0!==s(B,B))return F;do{const s=i+F>>>1;e(t[s],B)<0?i=s+1:F=s}while(i<F)}return i}return 2!==t.length?(s=ascending$2,e=(s,e)=>ascending$2(t(s),e),B=(s,e)=>t(s)-e):(s=t===ascending$2||t===descending$1?t:zero$1,e=t,B=t),{left:i,center:function(t,s,e=0,F=t.length){const Q=i(t,s,e,F-1);return Q>e&&B(t[Q-1],s)>-B(t[Q],s)?Q-1:Q},right:function(t,B,i=0,F=t.length){if(i<F){if(0!==s(B,B))return F;do{const s=i+F>>>1;e(t[s],B)<=0?i=s+1:F=s}while(i<F)}return i}}}function zero$1(){return 0}function number$4(t){return null===t?NaN:+t}function*numbers(t,s){if(void 0===s)for(let s of t)null!=s&&(s=+s)>=s&&(yield s);else{let e=-1;for(let B of t)null!=(B=s(B,++e,t))&&(B=+B)>=B&&(yield B)}}o$3?.({LitElement:i$2}),(s$2.litElementVersions??=[]).push("4.2.1");const ascendingBisect=bisector(ascending$2),bisectRight=ascendingBisect.right;function count(t,s){let e=0;for(let s of t)null!=s&&(s=+s)>=s&&++e;return e}function length$1(t){return 0|t.length}function empty$1(t){return!(t>0)}function arrayify$1(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function reducer(t){return s=>t(...s)}function cross(...t){const s="function"==typeof t[t.length-1]&&reducer(t.pop()),e=(t=t.map(arrayify$1)).map(length$1),B=t.length-1,i=new Array(B+1).fill(0),F=[];if(B<0||e.some(empty$1))return F;for(;;){F.push(i.map((s,e)=>t[e][s]));let Q=B;for(;++i[Q]===e[Q];){if(0===Q)return s?F.map(s):F;i[Q--]=0}}}function cumsum(t,s){var e=0;return Float64Array.from(t,t=>e+=+t||0)}function variance(t,s){let e,B=0,i=0,F=0;if(void 0===s)for(let s of t)null!=s&&(s=+s)>=s&&(e=s-i,i+=e/++B,F+=e*(s-i));else{let Q=-1;for(let l of t)null!=(l=s(l,++Q,t))&&(l=+l)>=l&&(e=l-i,i+=e/++B,F+=e*(l-i))}if(B>1)return F/(B-1)}function deviation(t,s){const e=variance(t,s);return e?Math.sqrt(e):e}function extent$1(t,s){let e,B;if(void 0===s)for(const s of t)null!=s&&(void 0===e?s>=s&&(e=B=s):(e>s&&(e=s),B<s&&(B=s)));else{let i=-1;for(let F of t)null!=(F=s(F,++i,t))&&(void 0===e?F>=F&&(e=B=F):(e>F&&(e=F),B<F&&(B=F)))}return[e,B]}bisector(number$4).center;class Adder{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const s=this._partials;let e=0;for(let B=0;B<this._n&&B<32;B++){const i=s[B],F=t+i,Q=Math.abs(t)<Math.abs(i)?t-(F-i):i-(F-t);Q&&(s[e++]=Q),t=F}return s[e]=t,this._n=e+1,this}valueOf(){const t=this._partials;let s,e,B,i=this._n,F=0;if(i>0){for(F=t[--i];i>0&&(s=F,e=t[--i],F=s+e,B=e-(F-s),!B););i>0&&(B<0&&t[i-1]<0||B>0&&t[i-1]>0)&&(e=2*B,s=F+e,e==s-F&&(F=s))}return F}}class InternMap extends Map{constructor(t,s=keyof$1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:s}}),null!=t)for(const[s,e]of t)this.set(s,e)}get(t){return super.get(intern_get(this,t))}has(t){return super.has(intern_get(this,t))}set(t,s){return super.set(intern_set(this,t),s)}delete(t){return super.delete(intern_delete(this,t))}}class InternSet extends Set{constructor(t,s=keyof$1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:s}}),null!=t)for(const s of t)this.add(s)}has(t){return super.has(intern_get(this,t))}add(t){return super.add(intern_set(this,t))}delete(t){return super.delete(intern_delete(this,t))}}function intern_get({_intern:t,_key:s},e){const B=s(e);return t.has(B)?t.get(B):e}function intern_set({_intern:t,_key:s},e){const B=s(e);return t.has(B)?t.get(B):(t.set(B,e),e)}function intern_delete({_intern:t,_key:s},e){const B=s(e);return t.has(B)&&(e=t.get(B),t.delete(B)),e}function keyof$1(t){return null!==t&&"object"==typeof t?t.valueOf():t}function identity$a(t){return t}function group(t,...s){return nest(t,identity$a,identity$a,s)}function rollup(t,s,...e){return nest(t,identity$a,s,e)}function rollups(t,s,...e){return nest(t,Array.from,s,e)}function nest(t,s,e,B){return function t(i,F){if(F>=B.length)return e(i);const Q=new InternMap,l=B[F++];let U=-1;for(const t of i){const s=l(t,++U,i),e=Q.get(s);e?e.push(t):Q.set(s,[t])}for(const[s,e]of Q)Q.set(s,t(e,F));return s(Q)}(t,0)}function permute(t,s){return Array.from(s,s=>t[s])}function sort$2(t,...s){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");t=Array.from(t);let[e]=s;if(e&&2!==e.length||s.length>1){const B=Uint32Array.from(t,(t,s)=>s);return s.length>1?(s=s.map(s=>t.map(s)),B.sort((t,e)=>{for(const B of s){const s=ascendingDefined$1(B[t],B[e]);if(s)return s}})):(e=t.map(e),B.sort((t,s)=>ascendingDefined$1(e[t],e[s]))),permute(t,B)}return t.sort(compareDefined(e))}function compareDefined(t=ascending$2){if(t===ascending$2)return ascendingDefined$1;if("function"!=typeof t)throw new TypeError("compare is not a function");return(s,e)=>{const B=t(s,e);return B||0===B?B:(0===t(e,e))-(0===t(s,s))}}function ascendingDefined$1(t,s){return(null==t||!(t>=t))-(null==s||!(s>=s))||(t<s?-1:t>s?1:0)}function groupSort(t,s,e){return(2!==s.length?sort$2(rollup(t,s,e),([t,s],[e,B])=>ascending$2(s,B)||ascending$2(t,e)):sort$2(group(t,e),([t,e],[B,i])=>s(e,i)||ascending$2(t,B))).map(([t])=>t)}var array$3=Array.prototype,slice$2=array$3.slice;function constant$6(t){return()=>t}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(t,s,e){const B=(s-t)/Math.max(0,e),i=Math.floor(Math.log10(B)),F=B/Math.pow(10,i),Q=F>=e10?10:F>=e5?5:F>=e2?2:1;let l,U,a;return i<0?(a=Math.pow(10,-i)/Q,l=Math.round(t*a),U=Math.round(s*a),l/a<t&&++l,U/a>s&&--U,a=-a):(a=Math.pow(10,i)*Q,l=Math.round(t/a),U=Math.round(s/a),l*a<t&&++l,U*a>s&&--U),U<l&&.5<=e&&e<2?tickSpec(t,s,2*e):[l,U,a]}function ticks(t,s,e){if(!((e=+e)>0))return[];if((t=+t)===(s=+s))return[t];const B=s<t,[i,F,Q]=B?tickSpec(s,t,e):tickSpec(t,s,e);if(!(F>=i))return[];const l=F-i+1,U=new Array(l);if(B)if(Q<0)for(let t=0;t<l;++t)U[t]=(F-t)/-Q;else for(let t=0;t<l;++t)U[t]=(F-t)*Q;else if(Q<0)for(let t=0;t<l;++t)U[t]=(i+t)/-Q;else for(let t=0;t<l;++t)U[t]=(i+t)*Q;return U}function tickIncrement(t,s,e){return tickSpec(t=+t,s=+s,e=+e)[2]}function tickStep(t,s,e){e=+e;const B=(s=+s)<(t=+t),i=B?tickIncrement(s,t,e):tickIncrement(t,s,e);return(B?-1:1)*(i<0?1/-i:i)}function nice$1(t,s,e){let B;for(;;){const i=tickIncrement(t,s,e);if(i===B||0===i||!isFinite(i))return[t,s];i>0?(t=Math.floor(t/i)*i,s=Math.ceil(s/i)*i):i<0&&(t=Math.ceil(t*i)/i,s=Math.floor(s*i)/i),B=i}}function thresholdSturges(t){return Math.max(1,Math.ceil(Math.log(count(t))/Math.LN2)+1)}function bin(){var t=identity$a,s=extent$1,e=thresholdSturges;function B(B){Array.isArray(B)||(B=Array.from(B));var i,F,Q,l=B.length,U=new Array(l);for(i=0;i<l;++i)U[i]=t(B[i],i,B);var a=s(U),g=a[0],I=a[1],c=e(U,g,I);if(!Array.isArray(c)){const t=I,e=+c;if(s===extent$1&&([g,I]=nice$1(g,I,e)),(c=ticks(g,I,e))[0]<=g&&(Q=tickIncrement(g,I,e)),c[c.length-1]>=I)if(t>=I&&s===extent$1){const t=tickIncrement(g,I,e);isFinite(t)&&(t>0?I=(Math.floor(I/t)+1)*t:t<0&&(I=(Math.ceil(I*-t)+1)/-t))}else c.pop()}for(var n=c.length,r=0,o=n;c[r]<=g;)++r;for(;c[o-1]>I;)--o;(r||o<n)&&(c=c.slice(r,o),n=o-r);var d,C=new Array(n+1);for(i=0;i<=n;++i)(d=C[i]=[]).x0=i>0?c[i-1]:g,d.x1=i<n?c[i]:I;if(isFinite(Q)){if(Q>0)for(i=0;i<l;++i)null!=(F=U[i])&&g<=F&&F<=I&&C[Math.min(n,Math.floor((F-g)/Q))].push(B[i]);else if(Q<0)for(i=0;i<l;++i)if(null!=(F=U[i])&&g<=F&&F<=I){const t=Math.floor((g-F)*Q);C[Math.min(n,t+(c[t]<=F))].push(B[i])}}else for(i=0;i<l;++i)null!=(F=U[i])&&g<=F&&F<=I&&C[bisectRight(c,F,0,n)].push(B[i]);return C}return B.value=function(s){return arguments.length?(t="function"==typeof s?s:constant$6(s),B):t},B.domain=function(t){return arguments.length?(s="function"==typeof t?t:constant$6([t[0],t[1]]),B):s},B.thresholds=function(t){return arguments.length?(e="function"==typeof t?t:constant$6(Array.isArray(t)?slice$2.call(t):t),B):e},B}function max$1(t,s){let e;if(void 0===s)for(const s of t)null!=s&&(e<s||void 0===e&&s>=s)&&(e=s);else{let B=-1;for(let i of t)null!=(i=s(i,++B,t))&&(e<i||void 0===e&&i>=i)&&(e=i)}return e}function maxIndex(t,s){let e,B=-1,i=-1;if(void 0===s)for(const s of t)++i,null!=s&&(e<s||void 0===e&&s>=s)&&(e=s,B=i);else for(let F of t)null!=(F=s(F,++i,t))&&(e<F||void 0===e&&F>=F)&&(e=F,B=i);return B}function min$1(t,s){let e;if(void 0===s)for(const s of t)null!=s&&(e>s||void 0===e&&s>=s)&&(e=s);else{let B=-1;for(let i of t)null!=(i=s(i,++B,t))&&(e>i||void 0===e&&i>=i)&&(e=i)}return e}function minIndex(t,s){let e,B=-1,i=-1;if(void 0===s)for(const s of t)++i,null!=s&&(e>s||void 0===e&&s>=s)&&(e=s,B=i);else for(let F of t)null!=(F=s(F,++i,t))&&(e>F||void 0===e&&F>=F)&&(e=F,B=i);return B}function quickselect(t,s,e=0,B=1/0,i){if(s=Math.floor(s),e=Math.floor(Math.max(0,e)),B=Math.floor(Math.min(t.length-1,B)),!(e<=s&&s<=B))return t;for(i=void 0===i?ascendingDefined$1:compareDefined(i);B>e;){if(B-e>600){const F=B-e+1,Q=s-e+1,l=Math.log(F),U=.5*Math.exp(2*l/3),a=.5*Math.sqrt(l*U*(F-U)/F)*(Q-F/2<0?-1:1);quickselect(t,s,Math.max(e,Math.floor(s-Q*U/F+a)),Math.min(B,Math.floor(s+(F-Q)*U/F+a)),i)}const F=t[s];let Q=e,l=B;for(swap(t,e,s),i(t[B],F)>0&&swap(t,e,B);Q<l;){for(swap(t,Q,l),++Q,--l;i(t[Q],F)<0;)++Q;for(;i(t[l],F)>0;)--l}0===i(t[e],F)?swap(t,e,l):(++l,swap(t,l,B)),l<=s&&(e=l+1),s<=l&&(B=l-1)}return t}function swap(t,s,e){const B=t[s];t[s]=t[e],t[e]=B}function greatest(t,s=ascending$2){let e,B=!1;if(1===s.length){let i;for(const F of t){const t=s(F);(B?ascending$2(t,i)>0:0===ascending$2(t,t))&&(e=F,i=t,B=!0)}}else for(const i of t)(B?s(i,e)>0:0===s(i,i))&&(e=i,B=!0);return e}function quantile$1(t,s,e){if((B=(t=Float64Array.from(numbers(t,e))).length)&&!isNaN(s=+s)){if(s<=0||B<2)return min$1(t);if(s>=1)return max$1(t);var B,i=(B-1)*s,F=Math.floor(i),Q=max$1(quickselect(t,F).subarray(0,F+1));return Q+(min$1(t.subarray(F+1))-Q)*(i-F)}}function quantileSorted(t,s,e=number$4){if((B=t.length)&&!isNaN(s=+s)){if(s<=0||B<2)return+e(t[0],0,t);if(s>=1)return+e(t[B-1],B-1,t);var B,i=(B-1)*s,F=Math.floor(i),Q=+e(t[F],F,t);return Q+(+e(t[F+1],F+1,t)-Q)*(i-F)}}function thresholdFreedmanDiaconis(t,s,e){const B=count(t),i=quantile$1(t,.75)-quantile$1(t,.25);return B&&i?Math.ceil((e-s)/(2*i*Math.pow(B,-1/3))):1}function thresholdScott(t,s,e){const B=count(t),i=deviation(t);return B&&i?Math.ceil((e-s)*Math.cbrt(B)/(3.49*i)):1}function mean(t,s){let e=0,B=0;if(void 0===s)for(let s of t)null!=s&&(s=+s)>=s&&(++e,B+=s);else{let i=-1;for(let F of t)null!=(F=s(F,++i,t))&&(F=+F)>=F&&(++e,B+=F)}if(e)return B/e}function median(t,s){return quantile$1(t,.5,s)}function*flatten(t){for(const s of t)yield*s}function merge(t){return Array.from(flatten(t))}function mode(t,s){const e=new InternMap;if(void 0===s)for(let s of t)null!=s&&s>=s&&e.set(s,(e.get(s)||0)+1);else{let B=-1;for(let i of t)null!=(i=s(i,++B,t))&&i>=i&&e.set(i,(e.get(i)||0)+1)}let B,i=0;for(const[t,s]of e)s>i&&(i=s,B=t);return B}function pairs(t,s=pair){const e=[];let B,i=!1;for(const F of t)i&&e.push(s(B,F)),B=F,i=!0;return e}function pair(t,s){return[t,s]}function range$1(t,s,e){t=+t,s=+s,e=(i=arguments.length)<2?(s=t,t=0,1):i<3?1:+e;for(var B=-1,i=0|Math.max(0,Math.ceil((s-t)/e)),F=new Array(i);++B<i;)F[B]=t+B*e;return F}function sum(t,s){let e=0;if(void 0===s)for(let s of t)(s=+s)&&(e+=s);else{let B=-1;for(let i of t)(i=+s(i,++B,t))&&(e+=i)}return e}function reverse(t){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(t).reverse()}function identity$9(t){return t}var top=1,right=2,bottom=3,left=4,epsilon$3=1e-6;function translateX(t){return"translate("+t+",0)"}function translateY(t){return"translate(0,"+t+")"}function number$3(t){return s=>+t(s)}function center(t,s){return s=Math.max(0,t.bandwidth()-2*s)/2,t.round()&&(s=Math.round(s)),e=>+t(e)+s}function entering(){return!this.__axis}function axis(t,s){var e=[],B=null,i=null,F=6,Q=6,l=3,U="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,a=t===top||t===left?-1:1,g=t===left||t===right?"x":"y",I=t===top||t===bottom?translateX:translateY;function c(c){var n=null==B?s.ticks?s.ticks.apply(s,e):s.domain():B,r=null==i?s.tickFormat?s.tickFormat.apply(s,e):identity$9:i,o=Math.max(F,0)+l,d=s.range(),C=+d[0]+U,b=+d[d.length-1]+U,u=(s.bandwidth?center:number$3)(s.copy(),U),h=c.selection?c.selection():c,y=h.selectAll(".domain").data([null]),x=h.selectAll(".tick").data(n,s).order(),A=x.exit(),G=x.enter().append("g").attr("class","tick"),R=x.select("line"),L=x.select("text");y=y.merge(y.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(G),R=R.merge(G.append("line").attr("stroke","currentColor").attr(g+"2",a*F)),L=L.merge(G.append("text").attr("fill","currentColor").attr(g,a*o).attr("dy",t===top?"0em":t===bottom?"0.71em":"0.32em")),c!==h&&(y=y.transition(c),x=x.transition(c),R=R.transition(c),L=L.transition(c),A=A.transition(c).attr("opacity",epsilon$3).attr("transform",function(t){return isFinite(t=u(t))?I(t+U):this.getAttribute("transform")}),G.attr("opacity",epsilon$3).attr("transform",function(t){var s=this.parentNode.__axis;return I((s&&isFinite(s=s(t))?s:u(t))+U)})),A.remove(),y.attr("d",t===left||t===right?Q?"M"+a*Q+","+C+"H"+U+"V"+b+"H"+a*Q:"M"+U+","+C+"V"+b:Q?"M"+C+","+a*Q+"V"+U+"H"+b+"V"+a*Q:"M"+C+","+U+"H"+b),x.attr("opacity",1).attr("transform",function(t){return I(u(t)+U)}),R.attr(g+"2",a*F),L.attr(g,a*o).text(r),h.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===right?"start":t===left?"end":"middle"),h.each(function(){this.__axis=u})}return c.scale=function(t){return arguments.length?(s=t,c):s},c.ticks=function(){return e=Array.from(arguments),c},c.tickArguments=function(t){return arguments.length?(e=null==t?[]:Array.from(t),c):e.slice()},c.tickValues=function(t){return arguments.length?(B=null==t?null:Array.from(t),c):B&&B.slice()},c.tickFormat=function(t){return arguments.length?(i=t,c):i},c.tickSize=function(t){return arguments.length?(F=Q=+t,c):F},c.tickSizeInner=function(t){return arguments.length?(F=+t,c):F},c.tickSizeOuter=function(t){return arguments.length?(Q=+t,c):Q},c.tickPadding=function(t){return arguments.length?(l=+t,c):l},c.offset=function(t){return arguments.length?(U=+t,c):U},c}function axisRight(t){return axis(right,t)}function axisBottom(t){return axis(bottom,t)}function axisLeft(t){return axis(left,t)}var noop$3={value:()=>{}};function dispatch(){for(var t,s=0,e=arguments.length,B={};s<e;++s){if(!(t=arguments[s]+"")||t in B||/[\s.]/.test(t))throw new Error("illegal type: "+t);B[t]=[]}return new Dispatch(B)}function Dispatch(t){this._=t}function parseTypenames$1(t,s){return t.trim().split(/^|\s+/).map(function(t){var e="",B=t.indexOf(".");if(B>=0&&(e=t.slice(B+1),t=t.slice(0,B)),t&&!s.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})}function get$1(t,s){for(var e,B=0,i=t.length;B<i;++B)if((e=t[B]).name===s)return e.value}function set$1(t,s,e){for(var B=0,i=t.length;B<i;++B)if(t[B].name===s){t[B]=noop$3,t=t.slice(0,B).concat(t.slice(B+1));break}return null!=e&&t.push({name:s,value:e}),t}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(t,s){var e,B=this._,i=parseTypenames$1(t+"",B),F=-1,Q=i.length;if(!(arguments.length<2)){if(null!=s&&"function"!=typeof s)throw new Error("invalid callback: "+s);for(;++F<Q;)if(e=(t=i[F]).type)B[e]=set$1(B[e],t.name,s);else if(null==s)for(e in B)B[e]=set$1(B[e],t.name,null);return this}for(;++F<Q;)if((e=(t=i[F]).type)&&(e=get$1(B[e],t.name)))return e},copy:function(){var t={},s=this._;for(var e in s)t[e]=s[e].slice();return new Dispatch(t)},call:function(t,s){if((e=arguments.length-2)>0)for(var e,B,i=new Array(e),F=0;F<e;++F)i[F]=arguments[F+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(F=0,e=(B=this._[t]).length;F<e;++F)B[F].value.apply(s,i)},apply:function(t,s,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var B=this._[t],i=0,F=B.length;i<F;++i)B[i].value.apply(s,e)}};var xhtml="http://www.w3.org/1999/xhtml",namespaces={svg:"http://www.w3.org/2000/svg",xhtml:xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(t){var s=t+="",e=s.indexOf(":");return e>=0&&"xmlns"!==(s=t.slice(0,e))&&(t=t.slice(e+1)),namespaces.hasOwnProperty(s)?{space:namespaces[s],local:t}:t}function creatorInherit(t){return function(){var s=this.ownerDocument,e=this.namespaceURI;return e===xhtml&&s.documentElement.namespaceURI===xhtml?s.createElement(t):s.createElementNS(e,t)}}function creatorFixed(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function creator(t){var s=namespace(t);return(s.local?creatorFixed:creatorInherit)(s)}function none(){}function selector(t){return null==t?none:function(){return this.querySelector(t)}}function selection_select(t){"function"!=typeof t&&(t=selector(t));for(var s=this._groups,e=s.length,B=new Array(e),i=0;i<e;++i)for(var F,Q,l=s[i],U=l.length,a=B[i]=new Array(U),g=0;g<U;++g)(F=l[g])&&(Q=t.call(F,F.__data__,g,l))&&("__data__"in F&&(Q.__data__=F.__data__),a[g]=Q);return new Selection$1(B,this._parents)}function array$2(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function empty(){return[]}function selectorAll(t){return null==t?empty:function(){return this.querySelectorAll(t)}}function arrayAll(t){return function(){return array$2(t.apply(this,arguments))}}function selection_selectAll(t){t="function"==typeof t?arrayAll(t):selectorAll(t);for(var s=this._groups,e=s.length,B=[],i=[],F=0;F<e;++F)for(var Q,l=s[F],U=l.length,a=0;a<U;++a)(Q=l[a])&&(B.push(t.call(Q,Q.__data__,a,l)),i.push(Q));return new Selection$1(B,i)}function matcher(t){return function(){return this.matches(t)}}function childMatcher(t){return function(s){return s.matches(t)}}var find=Array.prototype.find;function childFind(t){return function(){return find.call(this.children,t)}}function childFirst(){return this.firstElementChild}function selection_selectChild(t){return this.select(null==t?childFirst:childFind("function"==typeof t?t:childMatcher(t)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(t){return function(){return filter.call(this.children,t)}}function selection_selectChildren(t){return this.selectAll(null==t?children:childrenFilter("function"==typeof t?t:childMatcher(t)))}function selection_filter(t){"function"!=typeof t&&(t=matcher(t));for(var s=this._groups,e=s.length,B=new Array(e),i=0;i<e;++i)for(var F,Q=s[i],l=Q.length,U=B[i]=[],a=0;a<l;++a)(F=Q[a])&&t.call(F,F.__data__,a,Q)&&U.push(F);return new Selection$1(B,this._parents)}function sparse(t){return new Array(t.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(t,s){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=s}function constant$5(t){return function(){return t}}function bindIndex(t,s,e,B,i,F){for(var Q,l=0,U=s.length,a=F.length;l<a;++l)(Q=s[l])?(Q.__data__=F[l],B[l]=Q):e[l]=new EnterNode(t,F[l]);for(;l<U;++l)(Q=s[l])&&(i[l]=Q)}function bindKey(t,s,e,B,i,F,Q){var l,U,a,g=new Map,I=s.length,c=F.length,n=new Array(I);for(l=0;l<I;++l)(U=s[l])&&(n[l]=a=Q.call(U,U.__data__,l,s)+"",g.has(a)?i[l]=U:g.set(a,U));for(l=0;l<c;++l)a=Q.call(t,F[l],l,F)+"",(U=g.get(a))?(B[l]=U,U.__data__=F[l],g.delete(a)):e[l]=new EnterNode(t,F[l]);for(l=0;l<I;++l)(U=s[l])&&g.get(n[l])===U&&(i[l]=U)}function datum(t){return t.__data__}function selection_data(t,s){if(!arguments.length)return Array.from(this,datum);var e=s?bindKey:bindIndex,B=this._parents,i=this._groups;"function"!=typeof t&&(t=constant$5(t));for(var F=i.length,Q=new Array(F),l=new Array(F),U=new Array(F),a=0;a<F;++a){var g=B[a],I=i[a],c=I.length,n=arraylike(t.call(g,g&&g.__data__,a,B)),r=n.length,o=l[a]=new Array(r),d=Q[a]=new Array(r);e(g,I,o,d,U[a]=new Array(c),n,s);for(var C,b,u=0,h=0;u<r;++u)if(C=o[u]){for(u>=h&&(h=u+1);!(b=d[h])&&++h<r;);C._next=b||null}}return(Q=new Selection$1(Q,B))._enter=l,Q._exit=U,Q}function arraylike(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(t,s,e){var B=this.enter(),i=this,F=this.exit();return"function"==typeof t?(B=t(B))&&(B=B.selection()):B=B.append(t+""),null!=s&&(i=s(i))&&(i=i.selection()),null==e?F.remove():e(F),B&&i?B.merge(i).order():i}function selection_merge(t){for(var s=t.selection?t.selection():t,e=this._groups,B=s._groups,i=e.length,F=B.length,Q=Math.min(i,F),l=new Array(i),U=0;U<Q;++U)for(var a,g=e[U],I=B[U],c=g.length,n=l[U]=new Array(c),r=0;r<c;++r)(a=g[r]||I[r])&&(n[r]=a);for(;U<i;++U)l[U]=e[U];return new Selection$1(l,this._parents)}function selection_order(){for(var t=this._groups,s=-1,e=t.length;++s<e;)for(var B,i=t[s],F=i.length-1,Q=i[F];--F>=0;)(B=i[F])&&(Q&&4^B.compareDocumentPosition(Q)&&Q.parentNode.insertBefore(B,Q),Q=B);return this}function selection_sort(t){function s(s,e){return s&&e?t(s.__data__,e.__data__):!s-!e}t||(t=ascending$1);for(var e=this._groups,B=e.length,i=new Array(B),F=0;F<B;++F){for(var Q,l=e[F],U=l.length,a=i[F]=new Array(U),g=0;g<U;++g)(Q=l[g])&&(a[g]=Q);a.sort(s)}return new Selection$1(i,this._parents).order()}function ascending$1(t,s){return t<s?-1:t>s?1:t>=s?0:NaN}function selection_call(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var t=this._groups,s=0,e=t.length;s<e;++s)for(var B=t[s],i=0,F=B.length;i<F;++i){var Q=B[i];if(Q)return Q}return null}function selection_size(){let t=0;for(const s of this)++t;return t}function selection_empty(){return!this.node()}function selection_each(t){for(var s=this._groups,e=0,B=s.length;e<B;++e)for(var i,F=s[e],Q=0,l=F.length;Q<l;++Q)(i=F[Q])&&t.call(i,i.__data__,Q,F);return this}function attrRemove$1(t){return function(){this.removeAttribute(t)}}function attrRemoveNS$1(t){return function(){this.removeAttributeNS(t.space,t.local)}}function attrConstant$1(t,s){return function(){this.setAttribute(t,s)}}function attrConstantNS$1(t,s){return function(){this.setAttributeNS(t.space,t.local,s)}}function attrFunction$1(t,s){return function(){var e=s.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function attrFunctionNS$1(t,s){return function(){var e=s.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function selection_attr(t,s){var e=namespace(t);if(arguments.length<2){var B=this.node();return e.local?B.getAttributeNS(e.space,e.local):B.getAttribute(e)}return this.each((null==s?e.local?attrRemoveNS$1:attrRemove$1:"function"==typeof s?e.local?attrFunctionNS$1:attrFunction$1:e.local?attrConstantNS$1:attrConstant$1)(e,s))}function defaultView(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function styleRemove$1(t){return function(){this.style.removeProperty(t)}}function styleConstant$1(t,s,e){return function(){this.style.setProperty(t,s,e)}}function styleFunction$1(t,s,e){return function(){var B=s.apply(this,arguments);null==B?this.style.removeProperty(t):this.style.setProperty(t,B,e)}}function selection_style(t,s,e){return arguments.length>1?this.each((null==s?styleRemove$1:"function"==typeof s?styleFunction$1:styleConstant$1)(t,s,null==e?"":e)):styleValue(this.node(),t)}function styleValue(t,s){return t.style.getPropertyValue(s)||defaultView(t).getComputedStyle(t,null).getPropertyValue(s)}function propertyRemove(t){return function(){delete this[t]}}function propertyConstant(t,s){return function(){this[t]=s}}function propertyFunction(t,s){return function(){var e=s.apply(this,arguments);null==e?delete this[t]:this[t]=e}}function selection_property(t,s){return arguments.length>1?this.each((null==s?propertyRemove:"function"==typeof s?propertyFunction:propertyConstant)(t,s)):this.node()[t]}function classArray(t){return t.trim().split(/^|\s+/)}function classList(t){return t.classList||new ClassList(t)}function ClassList(t){this._node=t,this._names=classArray(t.getAttribute("class")||"")}function classedAdd(t,s){for(var e=classList(t),B=-1,i=s.length;++B<i;)e.add(s[B])}function classedRemove(t,s){for(var e=classList(t),B=-1,i=s.length;++B<i;)e.remove(s[B])}function classedTrue(t){return function(){classedAdd(this,t)}}function classedFalse(t){return function(){classedRemove(this,t)}}function classedFunction(t,s){return function(){(s.apply(this,arguments)?classedAdd:classedRemove)(this,t)}}function selection_classed(t,s){var e=classArray(t+"");if(arguments.length<2){for(var B=classList(this.node()),i=-1,F=e.length;++i<F;)if(!B.contains(e[i]))return!1;return!0}return this.each(("function"==typeof s?classedFunction:s?classedTrue:classedFalse)(e,s))}function textRemove(){this.textContent=""}function textConstant$1(t){return function(){this.textContent=t}}function textFunction$1(t){return function(){var s=t.apply(this,arguments);this.textContent=null==s?"":s}}function selection_text(t){return arguments.length?this.each(null==t?textRemove:("function"==typeof t?textFunction$1:textConstant$1)(t)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(t){return function(){this.innerHTML=t}}function htmlFunction(t){return function(){var s=t.apply(this,arguments);this.innerHTML=null==s?"":s}}function selection_html(t){return arguments.length?this.each(null==t?htmlRemove:("function"==typeof t?htmlFunction:htmlConstant)(t)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(t){var s="function"==typeof t?t:creator(t);return this.select(function(){return this.appendChild(s.apply(this,arguments))})}function constantNull(){return null}function selection_insert(t,s){var e="function"==typeof t?t:creator(t),B=null==s?constantNull:"function"==typeof s?s:selector(s);return this.select(function(){return this.insertBefore(e.apply(this,arguments),B.apply(this,arguments)||null)})}function remove(){var t=this.parentNode;t&&t.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var t=this.cloneNode(!1),s=this.parentNode;return s?s.insertBefore(t,this.nextSibling):t}function selection_cloneDeep(){var t=this.cloneNode(!0),s=this.parentNode;return s?s.insertBefore(t,this.nextSibling):t}function selection_clone(t){return this.select(t?selection_cloneDeep:selection_cloneShallow)}function selection_datum(t){return arguments.length?this.property("__data__",t):this.node().__data__}function contextListener(t){return function(s){t.call(this,s,this.__data__)}}function parseTypenames(t){return t.trim().split(/^|\s+/).map(function(t){var s="",e=t.indexOf(".");return e>=0&&(s=t.slice(e+1),t=t.slice(0,e)),{type:t,name:s}})}function onRemove(t){return function(){var s=this.__on;if(s){for(var e,B=0,i=-1,F=s.length;B<F;++B)e=s[B],t.type&&e.type!==t.type||e.name!==t.name?s[++i]=e:this.removeEventListener(e.type,e.listener,e.options);++i?s.length=i:delete this.__on}}}function onAdd(t,s,e){return function(){var B,i=this.__on,F=contextListener(s);if(i)for(var Q=0,l=i.length;Q<l;++Q)if((B=i[Q]).type===t.type&&B.name===t.name)return this.removeEventListener(B.type,B.listener,B.options),this.addEventListener(B.type,B.listener=F,B.options=e),void(B.value=s);this.addEventListener(t.type,F,e),B={type:t.type,name:t.name,value:s,listener:F,options:e},i?i.push(B):this.__on=[B]}}function selection_on(t,s,e){var B,i,F=parseTypenames(t+""),Q=F.length;if(!(arguments.length<2)){for(l=s?onAdd:onRemove,B=0;B<Q;++B)this.each(l(F[B],s,e));return this}var l=this.node().__on;if(l)for(var U,a=0,g=l.length;a<g;++a)for(B=0,U=l[a];B<Q;++B)if((i=F[B]).type===U.type&&i.name===U.name)return U.value}function dispatchEvent(t,s,e){var B=defaultView(t),i=B.CustomEvent;"function"==typeof i?i=new i(s,e):(i=B.document.createEvent("Event"),e?(i.initEvent(s,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(s,!1,!1)),t.dispatchEvent(i)}function dispatchConstant(t,s){return function(){return dispatchEvent(this,t,s)}}function dispatchFunction(t,s){return function(){return dispatchEvent(this,t,s.apply(this,arguments))}}function selection_dispatch(t,s){return this.each(("function"==typeof s?dispatchFunction:dispatchConstant)(t,s))}function*selection_iterator(){for(var t=this._groups,s=0,e=t.length;s<e;++s)for(var B,i=t[s],F=0,Q=i.length;F<Q;++F)(B=i[F])&&(yield B)}EnterNode.prototype={constructor:EnterNode,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,s){return this._parent.insertBefore(t,s)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},ClassList.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var s=this._names.indexOf(t);s>=0&&(this._names.splice(s,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var root=[null];function Selection$1(t,s){this._groups=t,this._parents=s}function selection(){return new Selection$1([[document.documentElement]],root)}function selection_selection(){return this}function select(t){return"string"==typeof t?new Selection$1([[document.querySelector(t)]],[document.documentElement]):new Selection$1([[t]],root)}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};var nextId=0;function local(){return new Local}function Local(){this._="@"+(++nextId).toString(36)}function sourceEvent(t){let s;for(;s=t.sourceEvent;)t=s;return t}function pointof(t,s){if(t=sourceEvent(t),void 0===s&&(s=t.currentTarget),s){var e=s.ownerSVGElement||s;if(e.createSVGPoint){var B=e.createSVGPoint();return B.x=t.clientX,B.y=t.clientY,[(B=B.matrixTransform(s.getScreenCTM().inverse())).x,B.y]}if(s.getBoundingClientRect){var i=s.getBoundingClientRect();return[t.clientX-i.left-s.clientLeft,t.clientY-i.top-s.clientTop]}}return[t.pageX,t.pageY]}Local.prototype=local.prototype={constructor:Local,get:function(t){for(var s=this._;!(s in t);)if(!(t=t.parentNode))return;return t[s]},set:function(t,s){return t[this._]=s},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};const nonpassive={passive:!1},nonpassivecapture={capture:!0,passive:!1};function nopropagation(t){t.stopImmediatePropagation()}function noevent(t){t.preventDefault(),t.stopImmediatePropagation()}function dragDisable(t){var s=t.document.documentElement,e=select(t).on("dragstart.drag",noevent,nonpassivecapture);"onselectstart"in s?e.on("selectstart.drag",noevent,nonpassivecapture):(s.__noselect=s.style.MozUserSelect,s.style.MozUserSelect="none")}function yesdrag(t,s){var e=t.document.documentElement,B=select(t).on("dragstart.drag",null);s&&(B.on("click.drag",noevent,nonpassivecapture),setTimeout(function(){B.on("click.drag",null)},0)),"onselectstart"in e?B.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}var constant$4=t=>()=>t;function DragEvent(t,{sourceEvent:s,subject:e,target:B,identifier:i,active:F,x:Q,y:l,dx:U,dy:a,dispatch:g}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:s,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:B,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:F,enumerable:!0,configurable:!0},x:{value:Q,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:U,enumerable:!0,configurable:!0},dy:{value:a,enumerable:!0,configurable:!0},_:{value:g}})}function defaultFilter(t){return!t.ctrlKey&&!t.button}function defaultContainer(){return this.parentNode}function defaultSubject(t,s){return null==s?{x:t.x,y:t.y}:s}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function drag(){var t,s,e,B,i=defaultFilter,F=defaultContainer,Q=defaultSubject,l=defaultTouchable,U={},a=dispatch("start","drag","end"),g=0,I=0;function c(t){t.on("mousedown.drag",n).filter(l).on("touchstart.drag",d).on("touchmove.drag",C,nonpassive).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function n(Q,l){if(!B&&i.call(this,Q,l)){var U=u(this,F.call(this,Q,l),Q,l,"mouse");U&&(select(Q.view).on("mousemove.drag",r,nonpassivecapture).on("mouseup.drag",o,nonpassivecapture),dragDisable(Q.view),nopropagation(Q),e=!1,t=Q.clientX,s=Q.clientY,U("start",Q))}}function r(B){if(noevent(B),!e){var i=B.clientX-t,F=B.clientY-s;e=i*i+F*F>I}U.mouse("drag",B)}function o(t){select(t.view).on("mousemove.drag mouseup.drag",null),yesdrag(t.view,e),noevent(t),U.mouse("end",t)}function d(t,s){if(i.call(this,t,s)){var e,B,Q=t.changedTouches,l=F.call(this,t,s),U=Q.length;for(e=0;e<U;++e)(B=u(this,l,t,s,Q[e].identifier,Q[e]))&&(nopropagation(t),B("start",t,Q[e]))}}function C(t){var s,e,B=t.changedTouches,i=B.length;for(s=0;s<i;++s)(e=U[B[s].identifier])&&(noevent(t),e("drag",t,B[s]))}function b(t){var s,e,i=t.changedTouches,F=i.length;for(B&&clearTimeout(B),B=setTimeout(function(){B=null},500),s=0;s<F;++s)(e=U[i[s].identifier])&&(nopropagation(t),e("end",t,i[s]))}function u(t,s,e,B,i,F){var l,I,n,r=a.copy(),o=pointof(F||e,s);if(null!=(n=Q.call(t,new DragEvent("beforestart",{sourceEvent:e,target:c,identifier:i,active:g,x:o[0],y:o[1],dx:0,dy:0,dispatch:r}),B)))return l=n.x-o[0]||0,I=n.y-o[1]||0,function e(F,Q,a){var d,C=o;switch(F){case"start":U[i]=e,d=g++;break;case"end":delete U[i],--g;case"drag":o=pointof(a||Q,s),d=g}r.call(F,t,new DragEvent(F,{sourceEvent:Q,subject:n,target:c,identifier:i,active:d,x:o[0]+l,y:o[1]+I,dx:o[0]-C[0],dy:o[1]-C[1],dispatch:r}),B)}}return c.filter=function(t){return arguments.length?(i="function"==typeof t?t:constant$4(!!t),c):i},c.container=function(t){return arguments.length?(F="function"==typeof t?t:constant$4(t),c):F},c.subject=function(t){return arguments.length?(Q="function"==typeof t?t:constant$4(t),c):Q},c.touchable=function(t){return arguments.length?(l="function"==typeof t?t:constant$4(!!t),c):l},c.on=function(){var t=a.on.apply(a,arguments);return t===a?c:t},c.clickDistance=function(t){return arguments.length?(I=(t=+t)*t,c):Math.sqrt(I)},c}function define(t,s,e){t.prototype=s.prototype=e,e.constructor=t}function extend$1(t,s){var e=Object.create(t.prototype);for(var B in s)e[B]=s[B];return e}function Color$1(){}DragEvent.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named$1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color$1(t){var s,e;return t=(t+"").trim().toLowerCase(),(s=reHex.exec(t))?(e=s[1].length,s=parseInt(s[1],16),6===e?rgbn(s):3===e?new Rgb(s>>8&15|s>>4&240,s>>4&15|240&s,(15&s)<<4|15&s,1):8===e?rgba(s>>24&255,s>>16&255,s>>8&255,(255&s)/255):4===e?rgba(s>>12&15|s>>8&240,s>>8&15|s>>4&240,s>>4&15|240&s,((15&s)<<4|15&s)/255):null):(s=reRgbInteger.exec(t))?new Rgb(s[1],s[2],s[3],1):(s=reRgbPercent.exec(t))?new Rgb(255*s[1]/100,255*s[2]/100,255*s[3]/100,1):(s=reRgbaInteger.exec(t))?rgba(s[1],s[2],s[3],s[4]):(s=reRgbaPercent.exec(t))?rgba(255*s[1]/100,255*s[2]/100,255*s[3]/100,s[4]):(s=reHslPercent.exec(t))?hsla(s[1],s[2]/100,s[3]/100,1):(s=reHslaPercent.exec(t))?hsla(s[1],s[2]/100,s[3]/100,s[4]):named$1.hasOwnProperty(t)?rgbn(named$1[t]):"transparent"===t?new Rgb(NaN,NaN,NaN,0):null}function rgbn(t){return new Rgb(t>>16&255,t>>8&255,255&t,1)}function rgba(t,s,e,B){return B<=0&&(t=s=e=NaN),new Rgb(t,s,e,B)}function rgbConvert(t){return t instanceof Color$1||(t=color$1(t)),t?new Rgb((t=t.rgb()).r,t.g,t.b,t.opacity):new Rgb}function rgb(t,s,e,B){return 1===arguments.length?rgbConvert(t):new Rgb(t,s,e,null==B?1:B)}function Rgb(t,s,e,B){this.r=+t,this.g=+s,this.b=+e,this.opacity=+B}function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex(255*(isNaN(this.opacity)?1:this.opacity))}`}function rgb_formatRgb(){const t=clampa(this.opacity);return`${1===t?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${1===t?")":`, ${t})`}`}function clampa(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function clampi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function hex(t){return((t=clampi(t))<16?"0":"")+t.toString(16)}function hsla(t,s,e,B){return B<=0?t=s=e=NaN:e<=0||e>=1?t=s=NaN:s<=0&&(t=NaN),new Hsl(t,s,e,B)}function hslConvert(t){if(t instanceof Hsl)return new Hsl(t.h,t.s,t.l,t.opacity);if(t instanceof Color$1||(t=color$1(t)),!t)return new Hsl;if(t instanceof Hsl)return t;var s=(t=t.rgb()).r/255,e=t.g/255,B=t.b/255,i=Math.min(s,e,B),F=Math.max(s,e,B),Q=NaN,l=F-i,U=(F+i)/2;return l?(Q=s===F?(e-B)/l+6*(e<B):e===F?(B-s)/l+2:(s-e)/l+4,l/=U<.5?F+i:2-F-i,Q*=60):l=U>0&&U<1?0:Q,new Hsl(Q,l,U,t.opacity)}function hsl$1(t,s,e,B){return 1===arguments.length?hslConvert(t):new Hsl(t,s,e,null==B?1:B)}function Hsl(t,s,e,B){this.h=+t,this.s=+s,this.l=+e,this.opacity=+B}function clamph(t){return(t=(t||0)%360)<0?t+360:t}function clampt(t){return Math.max(0,Math.min(1,t||0))}function hsl2rgb(t,s,e){return 255*(t<60?s+(e-s)*t/60:t<180?e:t<240?s+(e-s)*(240-t)/60:s)}define(Color$1,color$1,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb}),define(Rgb,rgb,extend$1(Color$1,{brighter(t){return t=null==t?brighter:Math.pow(brighter,t),new Rgb(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?darker:Math.pow(darker,t),new Rgb(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb})),define(Hsl,hsl$1,extend$1(Color$1,{brighter(t){return t=null==t?brighter:Math.pow(brighter,t),new Hsl(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?darker:Math.pow(darker,t),new Hsl(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),s=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,B=e+(e<.5?e:1-e)*s,i=2*e-B;return new Rgb(hsl2rgb(t>=240?t-240:t+120,i,B),hsl2rgb(t,i,B),hsl2rgb(t<120?t+240:t-120,i,B),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=clampa(this.opacity);return`${1===t?"hsl(":"hsla("}${clamph(this.h)}, ${100*clampt(this.s)}%, ${100*clampt(this.l)}%${1===t?")":`, ${t})`}`}}));const radians$2=Math.PI/180,degrees$2=180/Math.PI,K=18,Xn=.96422,Yn=1,Zn=.82521,t0$1=4/29,t1$1=6/29,t2=3*t1$1*t1$1,t3=t1$1*t1$1*t1$1;function labConvert(t){if(t instanceof Lab)return new Lab(t.l,t.a,t.b,t.opacity);if(t instanceof Hcl)return hcl2lab(t);t instanceof Rgb||(t=rgbConvert(t));var s,e,B=rgb2lrgb(t.r),i=rgb2lrgb(t.g),F=rgb2lrgb(t.b),Q=xyz2lab((.2225045*B+.7168786*i+.0606169*F)/1);return B===i&&i===F?s=e=Q:(s=xyz2lab((.4360747*B+.3850649*i+.1430804*F)/Xn),e=xyz2lab((.0139322*B+.0971045*i+.7141733*F)/Zn)),new Lab(116*Q-16,500*(s-Q),200*(Q-e),t.opacity)}function lab$1(t,s,e,B){return 1===arguments.length?labConvert(t):new Lab(t,s,e,null==B?1:B)}function Lab(t,s,e,B){this.l=+t,this.a=+s,this.b=+e,this.opacity=+B}function xyz2lab(t){return t>t3?Math.pow(t,1/3):t/t2+t0$1}function lab2xyz(t){return t>t1$1?t*t*t:t2*(t-t0$1)}function lrgb2rgb(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function rgb2lrgb(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function hclConvert(t){if(t instanceof Hcl)return new Hcl(t.h,t.c,t.l,t.opacity);if(t instanceof Lab||(t=labConvert(t)),0===t.a&&0===t.b)return new Hcl(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var s=Math.atan2(t.b,t.a)*degrees$2;return new Hcl(s<0?s+360:s,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function hcl$1(t,s,e,B){return 1===arguments.length?hclConvert(t):new Hcl(t,s,e,null==B?1:B)}function Hcl(t,s,e,B){this.h=+t,this.c=+s,this.l=+e,this.opacity=+B}function hcl2lab(t){if(isNaN(t.h))return new Lab(t.l,0,0,t.opacity);var s=t.h*radians$2;return new Lab(t.l,Math.cos(s)*t.c,Math.sin(s)*t.c,t.opacity)}define(Lab,lab$1,extend$1(Color$1,{brighter(t){return new Lab(this.l+K*(null==t?1:t),this.a,this.b,this.opacity)},darker(t){return new Lab(this.l-K*(null==t?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,s=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return new Rgb(lrgb2rgb(3.1338561*(s=Xn*lab2xyz(s))-1.6168667*(t=1*lab2xyz(t))-.4906146*(e=Zn*lab2xyz(e))),lrgb2rgb(-.9787684*s+1.9161415*t+.033454*e),lrgb2rgb(.0719453*s-.2289914*t+1.4052427*e),this.opacity)}})),define(Hcl,hcl$1,extend$1(Color$1,{brighter(t){return new Hcl(this.h,this.c,this.l+K*(null==t?1:t),this.opacity)},darker(t){return new Hcl(this.h,this.c,this.l-K*(null==t?1:t),this.opacity)},rgb(){return hcl2lab(this).rgb()}}));var A$1=-.14861,B=1.78277,C=-.29227,D=-.90649,E=1.97294,ED=E*D,EB=E*B,BC_DA=B*C-D*A$1;function cubehelixConvert(t){if(t instanceof Cubehelix)return new Cubehelix(t.h,t.s,t.l,t.opacity);t instanceof Rgb||(t=rgbConvert(t));var s=t.r/255,e=t.g/255,B=t.b/255,i=(BC_DA*B+ED*s-EB*e)/(BC_DA+ED-EB),F=B-i,Q=(E*(e-i)-C*F)/D,l=Math.sqrt(Q*Q+F*F)/(E*i*(1-i)),U=l?Math.atan2(Q,F)*degrees$2-120:NaN;return new Cubehelix(U<0?U+360:U,l,i,t.opacity)}function cubehelix$1(t,s,e,B){return 1===arguments.length?cubehelixConvert(t):new Cubehelix(t,s,e,null==B?1:B)}function Cubehelix(t,s,e,B){this.h=+t,this.s=+s,this.l=+e,this.opacity=+B}function basis(t,s,e,B,i){var F=t*t,Q=F*t;return((1-3*t+3*F-Q)*s+(4-6*F+3*Q)*e+(1+3*t+3*F-3*Q)*B+Q*i)/6}function basis$1(t){var s=t.length-1;return function(e){var B=e<=0?e=0:e>=1?(e=1,s-1):Math.floor(e*s),i=t[B],F=t[B+1],Q=B>0?t[B-1]:2*i-F,l=B<s-1?t[B+2]:2*F-i;return basis((e-B/s)*s,Q,i,F,l)}}define(Cubehelix,cubehelix$1,extend$1(Color$1,{brighter(t){return t=null==t?brighter:Math.pow(brighter,t),new Cubehelix(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?darker:Math.pow(darker,t),new Cubehelix(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*radians$2,s=+this.l,e=isNaN(this.s)?0:this.s*s*(1-s),i=Math.cos(t),F=Math.sin(t);return new Rgb(255*(s+e*(A$1*i+B*F)),255*(s+e*(C*i+D*F)),255*(s+e*(E*i)),this.opacity)}}));var constant$3=t=>()=>t;function linear$2(t,s){return function(e){return t+e*s}}function exponential(t,s,e){return t=Math.pow(t,e),s=Math.pow(s,e)-t,e=1/e,function(B){return Math.pow(t+B*s,e)}}function hue(t,s){var e=s-t;return e?linear$2(t,e>180||e<-180?e-360*Math.round(e/360):e):constant$3(isNaN(t)?s:t)}function gamma(t){return 1===(t=+t)?nogamma:function(s,e){return e-s?exponential(s,e,t):constant$3(isNaN(s)?e:s)}}function nogamma(t,s){var e=s-t;return e?linear$2(t,e):constant$3(isNaN(t)?s:t)}var interpolateRgb=function t(s){var e=gamma(s);function B(t,s){var B=e((t=rgb(t)).r,(s=rgb(s)).r),i=e(t.g,s.g),F=e(t.b,s.b),Q=nogamma(t.opacity,s.opacity);return function(s){return t.r=B(s),t.g=i(s),t.b=F(s),t.opacity=Q(s),t+""}}return B.gamma=t,B}(1);function rgbSpline(t){return function(s){var e,B,i=s.length,F=new Array(i),Q=new Array(i),l=new Array(i);for(e=0;e<i;++e)B=rgb(s[e]),F[e]=B.r||0,Q[e]=B.g||0,l[e]=B.b||0;return F=t(F),Q=t(Q),l=t(l),B.opacity=1,function(t){return B.r=F(t),B.g=Q(t),B.b=l(t),B+""}}}var rgbBasis=rgbSpline(basis$1);function numberArray(t,s){s||(s=[]);var e,B=t?Math.min(s.length,t.length):0,i=s.slice();return function(F){for(e=0;e<B;++e)i[e]=t[e]*(1-F)+s[e]*F;return i}}function isNumberArray$1(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function genericArray(t,s){var e,B=s?s.length:0,i=t?Math.min(B,t.length):0,F=new Array(i),Q=new Array(B);for(e=0;e<i;++e)F[e]=interpolate$1(t[e],s[e]);for(;e<B;++e)Q[e]=s[e];return function(t){for(e=0;e<i;++e)Q[e]=F[e](t);return Q}}function date$1(t,s){var e=new Date;return t=+t,s=+s,function(B){return e.setTime(t*(1-B)+s*B),e}}function interpolateNumber(t,s){return t=+t,s=+s,function(e){return t*(1-e)+s*e}}function object(t,s){var e,B={},i={};for(e in null!==t&&"object"==typeof t||(t={}),null!==s&&"object"==typeof s||(s={}),s)e in t?B[e]=interpolate$1(t[e],s[e]):i[e]=s[e];return function(t){for(e in B)i[e]=B[e](t);return i}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(t){return function(){return t}}function one$1(t){return function(s){return t(s)+""}}function interpolateString(t,s){var e,B,i,F=reA.lastIndex=reB.lastIndex=0,Q=-1,l=[],U=[];for(t+="",s+="";(e=reA.exec(t))&&(B=reB.exec(s));)(i=B.index)>F&&(i=s.slice(F,i),l[Q]?l[Q]+=i:l[++Q]=i),(e=e[0])===(B=B[0])?l[Q]?l[Q]+=B:l[++Q]=B:(l[++Q]=null,U.push({i:Q,x:interpolateNumber(e,B)})),F=reB.lastIndex;return F<s.length&&(i=s.slice(F),l[Q]?l[Q]+=i:l[++Q]=i),l.length<2?U[0]?one$1(U[0].x):zero(s):(s=U.length,function(t){for(var e,B=0;B<s;++B)l[(e=U[B]).i]=e.x(t);return l.join("")})}function interpolate$1(t,s){var e,B=typeof s;return null==s||"boolean"===B?constant$3(s):("number"===B?interpolateNumber:"string"===B?(e=color$1(s))?(s=e,interpolateRgb):interpolateString:s instanceof color$1?interpolateRgb:s instanceof Date?date$1:isNumberArray$1(s)?numberArray:Array.isArray(s)?genericArray:"function"!=typeof s.valueOf&&"function"!=typeof s.toString||isNaN(s)?object:interpolateNumber)(t,s)}function interpolateRound(t,s){return t=+t,s=+s,function(e){return Math.round(t*(1-e)+s*e)}}var svgNode,degrees$1=180/Math.PI,identity$8={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(t,s,e,B,i,F){var Q,l,U;return(Q=Math.sqrt(t*t+s*s))&&(t/=Q,s/=Q),(U=t*e+s*B)&&(e-=t*U,B-=s*U),(l=Math.sqrt(e*e+B*B))&&(e/=l,B/=l,U/=l),t*B<s*e&&(t=-t,s=-s,U=-U,Q=-Q),{translateX:i,translateY:F,rotate:Math.atan2(s,t)*degrees$1,skewX:Math.atan(U)*degrees$1,scaleX:Q,scaleY:l}}function parseCss(t){const s=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return s.isIdentity?identity$8:decompose(s.a,s.b,s.c,s.d,s.e,s.f)}function parseSvg(t){return null==t?identity$8:(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",t),(t=svgNode.transform.baseVal.consolidate())?decompose((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):identity$8)}function interpolateTransform(t,s,e,B){function i(t){return t.length?t.pop()+" ":""}return function(F,Q){var l=[],U=[];return F=t(F),Q=t(Q),function(t,B,i,F,Q,l){if(t!==i||B!==F){var U=Q.push("translate(",null,s,null,e);l.push({i:U-4,x:interpolateNumber(t,i)},{i:U-2,x:interpolateNumber(B,F)})}else(i||F)&&Q.push("translate("+i+s+F+e)}(F.translateX,F.translateY,Q.translateX,Q.translateY,l,U),function(t,s,e,F){t!==s?(t-s>180?s+=360:s-t>180&&(t+=360),F.push({i:e.push(i(e)+"rotate(",null,B)-2,x:interpolateNumber(t,s)})):s&&e.push(i(e)+"rotate("+s+B)}(F.rotate,Q.rotate,l,U),function(t,s,e,F){t!==s?F.push({i:e.push(i(e)+"skewX(",null,B)-2,x:interpolateNumber(t,s)}):s&&e.push(i(e)+"skewX("+s+B)}(F.skewX,Q.skewX,l,U),function(t,s,e,B,F,Q){if(t!==e||s!==B){var l=F.push(i(F)+"scale(",null,",",null,")");Q.push({i:l-4,x:interpolateNumber(t,e)},{i:l-2,x:interpolateNumber(s,B)})}else 1===e&&1===B||F.push(i(F)+"scale("+e+","+B+")")}(F.scaleX,F.scaleY,Q.scaleX,Q.scaleY,l,U),F=Q=null,function(t){for(var s,e=-1,B=U.length;++e<B;)l[(s=U[e]).i]=s.x(t);return l.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")");function hsl(t){return function(s,e){var B=t((s=hsl$1(s)).h,(e=hsl$1(e)).h),i=nogamma(s.s,e.s),F=nogamma(s.l,e.l),Q=nogamma(s.opacity,e.opacity);return function(t){return s.h=B(t),s.s=i(t),s.l=F(t),s.opacity=Q(t),s+""}}}var interpolateHsl=hsl(hue);function lab(t,s){var e=nogamma((t=lab$1(t)).l,(s=lab$1(s)).l),B=nogamma(t.a,s.a),i=nogamma(t.b,s.b),F=nogamma(t.opacity,s.opacity);return function(s){return t.l=e(s),t.a=B(s),t.b=i(s),t.opacity=F(s),t+""}}function hcl(t){return function(s,e){var B=t((s=hcl$1(s)).h,(e=hcl$1(e)).h),i=nogamma(s.c,e.c),F=nogamma(s.l,e.l),Q=nogamma(s.opacity,e.opacity);return function(t){return s.h=B(t),s.c=i(t),s.l=F(t),s.opacity=Q(t),s+""}}}var interpolateHcl=hcl(hue);function cubehelix(t){return function s(e){function B(s,B){var i=t((s=cubehelix$1(s)).h,(B=cubehelix$1(B)).h),F=nogamma(s.s,B.s),Q=nogamma(s.l,B.l),l=nogamma(s.opacity,B.opacity);return function(t){return s.h=i(t),s.s=F(t),s.l=Q(Math.pow(t,e)),s.opacity=l(t),s+""}}return e=+e,B.gamma=s,B}(1)}cubehelix(hue);var cubehelixLong=cubehelix(nogamma);function piecewise(t,s){void 0===s&&(s=t,t=interpolate$1);for(var e=0,B=s.length-1,i=s[0],F=new Array(B<0?0:B);e<B;)F[e]=t(i,i=s[++e]);return function(t){var s=Math.max(0,Math.min(B-1,Math.floor(t*=B)));return F[s](t-s)}}function quantize(t,s){for(var e=new Array(s),B=0;B<s;++B)e[B]=t(B/(s-1));return e}var taskHead,taskTail,frame$1=0,timeout$1=0,interval$1=0,pokeDelay=1e3,clockLast=0,clockNow=0,clockSkew=0,clock="object"==typeof performance&&performance.now?performance:Date,setFrame="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}function timer(t,s,e){var B=new Timer;return B.restart(t,s,e),B}function timerFlush(){now(),++frame$1;for(var t,s=taskHead;s;)(t=clockNow-s._time)>=0&&s._call.call(void 0,t),s=s._next;--frame$1}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame$1=timeout$1=0;try{timerFlush()}finally{frame$1=0,nap(),clockNow=0}}function poke(){var t=clock.now(),s=t-clockLast;s>pokeDelay&&(clockSkew-=s,clockLast=t)}function nap(){for(var t,s,e=taskHead,B=1/0;e;)e._call?(B>e._time&&(B=e._time),t=e,e=e._next):(s=e._next,e._next=null,e=t?t._next=s:taskHead=s);taskTail=t,sleep(B)}function sleep(t){frame$1||(timeout$1&&(timeout$1=clearTimeout(timeout$1)),t-clockNow>24?(t<1/0&&(timeout$1=setTimeout(wake,t-clock.now()-clockSkew)),interval$1&&(interval$1=clearInterval(interval$1))):(interval$1||(clockLast=clock.now(),interval$1=setInterval(poke,pokeDelay)),frame$1=1,setFrame(wake)))}function timeout(t,s,e){var B=new Timer;return s=null==s?0:+s,B.restart(e=>{B.stop(),t(e+s)},s,e),B}function interval(t,s,e){var B=new Timer,i=s;return B._restart=B.restart,B.restart=function(t,s,e){s=+s,e=null==e?now():+e,B._restart(function F(Q){Q+=i,B._restart(F,i+=s,e),t(Q)},s,e)},B.restart(t,s,e),B}Timer.prototype=timer.prototype={constructor:Timer,restart:function(t,s,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?now():+e)+(null==s?0:+s),this._next||taskTail===this||(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=t,this._time=e,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(t,s,e,B,i,F){var Q=t.__transition;if(Q){if(e in Q)return}else t.__transition={};create$1(t,e,{name:s,index:B,group:i,on:emptyOn,tween:emptyTween,time:F.time,delay:F.delay,duration:F.duration,ease:F.ease,timer:null,state:CREATED})}function init(t,s){var e=get(t,s);if(e.state>CREATED)throw new Error("too late; already scheduled");return e}function set(t,s){var e=get(t,s);if(e.state>STARTED)throw new Error("too late; already running");return e}function get(t,s){var e=t.__transition;if(!e||!(e=e[s]))throw new Error("transition not found");return e}function create$1(t,s,e){var B,i=t.__transition;function F(U){var a,g,I,c;if(e.state!==SCHEDULED)return l();for(a in i)if((c=i[a]).name===e.name){if(c.state===STARTED)return timeout(F);c.state===RUNNING?(c.state=ENDED,c.timer.stop(),c.on.call("interrupt",t,t.__data__,c.index,c.group),delete i[a]):+a<s&&(c.state=ENDED,c.timer.stop(),c.on.call("cancel",t,t.__data__,c.index,c.group),delete i[a])}if(timeout(function(){e.state===STARTED&&(e.state=RUNNING,e.timer.restart(Q,e.delay,e.time),Q(U))}),e.state=STARTING,e.on.call("start",t,t.__data__,e.index,e.group),e.state===STARTING){for(e.state=STARTED,B=new Array(I=e.tween.length),a=0,g=-1;a<I;++a)(c=e.tween[a].value.call(t,t.__data__,e.index,e.group))&&(B[++g]=c);B.length=g+1}}function Q(s){for(var i=s<e.duration?e.ease.call(null,s/e.duration):(e.timer.restart(l),e.state=ENDING,1),F=-1,Q=B.length;++F<Q;)B[F].call(t,i);e.state===ENDING&&(e.on.call("end",t,t.__data__,e.index,e.group),l())}function l(){for(var B in e.state=ENDED,e.timer.stop(),delete i[s],i)return;delete t.__transition}i[s]=e,e.timer=timer(function(t){e.state=SCHEDULED,e.timer.restart(F,e.delay,e.time),e.delay<=t&&F(t-e.delay)},0,e.time)}function interrupt(t,s){var e,B,i,F=t.__transition,Q=!0;if(F){for(i in s=null==s?null:s+"",F)(e=F[i]).name===s?(B=e.state>STARTING&&e.state<ENDING,e.state=ENDED,e.timer.stop(),e.on.call(B?"interrupt":"cancel",t,t.__data__,e.index,e.group),delete F[i]):Q=!1;Q&&delete t.__transition}}function selection_interrupt(t){return this.each(function(){interrupt(this,t)})}function tweenRemove(t,s){var e,B;return function(){var i=set(this,t),F=i.tween;if(F!==e)for(var Q=0,l=(B=e=F).length;Q<l;++Q)if(B[Q].name===s){(B=B.slice()).splice(Q,1);break}i.tween=B}}function tweenFunction(t,s,e){var B,i;if("function"!=typeof e)throw new Error;return function(){var F=set(this,t),Q=F.tween;if(Q!==B){i=(B=Q).slice();for(var l={name:s,value:e},U=0,a=i.length;U<a;++U)if(i[U].name===s){i[U]=l;break}U===a&&i.push(l)}F.tween=i}}function transition_tween(t,s){var e=this._id;if(t+="",arguments.length<2){for(var B,i=get(this.node(),e).tween,F=0,Q=i.length;F<Q;++F)if((B=i[F]).name===t)return B.value;return null}return this.each((null==s?tweenRemove:tweenFunction)(e,t,s))}function tweenValue(t,s,e){var B=t._id;return t.each(function(){var t=set(this,B);(t.value||(t.value={}))[s]=e.apply(this,arguments)}),function(t){return get(t,B).value[s]}}function interpolate(t,s){var e;return("number"==typeof s?interpolateNumber:s instanceof color$1?interpolateRgb:(e=color$1(s))?(s=e,interpolateRgb):interpolateString)(t,s)}function attrRemove(t){return function(){this.removeAttribute(t)}}function attrRemoveNS(t){return function(){this.removeAttributeNS(t.space,t.local)}}function attrConstant(t,s,e){var B,i,F=e+"";return function(){var Q=this.getAttribute(t);return Q===F?null:Q===B?i:i=s(B=Q,e)}}function attrConstantNS(t,s,e){var B,i,F=e+"";return function(){var Q=this.getAttributeNS(t.space,t.local);return Q===F?null:Q===B?i:i=s(B=Q,e)}}function attrFunction(t,s,e){var B,i,F;return function(){var Q,l,U=e(this);if(null!=U)return(Q=this.getAttribute(t))===(l=U+"")?null:Q===B&&l===i?F:(i=l,F=s(B=Q,U));this.removeAttribute(t)}}function attrFunctionNS(t,s,e){var B,i,F;return function(){var Q,l,U=e(this);if(null!=U)return(Q=this.getAttributeNS(t.space,t.local))===(l=U+"")?null:Q===B&&l===i?F:(i=l,F=s(B=Q,U));this.removeAttributeNS(t.space,t.local)}}function transition_attr(t,s){var e=namespace(t),B="transform"===e?interpolateTransformSvg:interpolate;return this.attrTween(t,"function"==typeof s?(e.local?attrFunctionNS:attrFunction)(e,B,tweenValue(this,"attr."+t,s)):null==s?(e.local?attrRemoveNS:attrRemove)(e):(e.local?attrConstantNS:attrConstant)(e,B,s))}function attrInterpolate(t,s){return function(e){this.setAttribute(t,s.call(this,e))}}function attrInterpolateNS(t,s){return function(e){this.setAttributeNS(t.space,t.local,s.call(this,e))}}function attrTweenNS(t,s){var e,B;function i(){var i=s.apply(this,arguments);return i!==B&&(e=(B=i)&&attrInterpolateNS(t,i)),e}return i._value=s,i}function attrTween(t,s){var e,B;function i(){var i=s.apply(this,arguments);return i!==B&&(e=(B=i)&&attrInterpolate(t,i)),e}return i._value=s,i}function transition_attrTween(t,s){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==s)return this.tween(e,null);if("function"!=typeof s)throw new Error;var B=namespace(t);return this.tween(e,(B.local?attrTweenNS:attrTween)(B,s))}function delayFunction(t,s){return function(){init(this,t).delay=+s.apply(this,arguments)}}function delayConstant(t,s){return s=+s,function(){init(this,t).delay=s}}function transition_delay(t){var s=this._id;return arguments.length?this.each(("function"==typeof t?delayFunction:delayConstant)(s,t)):get(this.node(),s).delay}function durationFunction(t,s){return function(){set(this,t).duration=+s.apply(this,arguments)}}function durationConstant(t,s){return s=+s,function(){set(this,t).duration=s}}function transition_duration(t){var s=this._id;return arguments.length?this.each(("function"==typeof t?durationFunction:durationConstant)(s,t)):get(this.node(),s).duration}function easeConstant(t,s){if("function"!=typeof s)throw new Error;return function(){set(this,t).ease=s}}function transition_ease(t){var s=this._id;return arguments.length?this.each(easeConstant(s,t)):get(this.node(),s).ease}function easeVarying(t,s){return function(){var e=s.apply(this,arguments);if("function"!=typeof e)throw new Error;set(this,t).ease=e}}function transition_easeVarying(t){if("function"!=typeof t)throw new Error;return this.each(easeVarying(this._id,t))}function transition_filter(t){"function"!=typeof t&&(t=matcher(t));for(var s=this._groups,e=s.length,B=new Array(e),i=0;i<e;++i)for(var F,Q=s[i],l=Q.length,U=B[i]=[],a=0;a<l;++a)(F=Q[a])&&t.call(F,F.__data__,a,Q)&&U.push(F);return new Transition(B,this._parents,this._name,this._id)}function transition_merge(t){if(t._id!==this._id)throw new Error;for(var s=this._groups,e=t._groups,B=s.length,i=e.length,F=Math.min(B,i),Q=new Array(B),l=0;l<F;++l)for(var U,a=s[l],g=e[l],I=a.length,c=Q[l]=new Array(I),n=0;n<I;++n)(U=a[n]||g[n])&&(c[n]=U);for(;l<B;++l)Q[l]=s[l];return new Transition(Q,this._parents,this._name,this._id)}function start(t){return(t+"").trim().split(/^|\s+/).every(function(t){var s=t.indexOf(".");return s>=0&&(t=t.slice(0,s)),!t||"start"===t})}function onFunction(t,s,e){var B,i,F=start(s)?init:set;return function(){var Q=F(this,t),l=Q.on;l!==B&&(i=(B=l).copy()).on(s,e),Q.on=i}}function transition_on(t,s){var e=this._id;return arguments.length<2?get(this.node(),e).on.on(t):this.each(onFunction(e,t,s))}function removeFunction(t){return function(){var s=this.parentNode;for(var e in this.__transition)if(+e!==t)return;s&&s.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(t){var s=this._name,e=this._id;"function"!=typeof t&&(t=selector(t));for(var B=this._groups,i=B.length,F=new Array(i),Q=0;Q<i;++Q)for(var l,U,a=B[Q],g=a.length,I=F[Q]=new Array(g),c=0;c<g;++c)(l=a[c])&&(U=t.call(l,l.__data__,c,a))&&("__data__"in l&&(U.__data__=l.__data__),I[c]=U,schedule(I[c],s,e,c,I,get(l,e)));return new Transition(F,this._parents,s,e)}function transition_selectAll(t){var s=this._name,e=this._id;"function"!=typeof t&&(t=selectorAll(t));for(var B=this._groups,i=B.length,F=[],Q=[],l=0;l<i;++l)for(var U,a=B[l],g=a.length,I=0;I<g;++I)if(U=a[I]){for(var c,n=t.call(U,U.__data__,I,a),r=get(U,e),o=0,d=n.length;o<d;++o)(c=n[o])&&schedule(c,s,e,o,n,r);F.push(n),Q.push(U)}return new Transition(F,Q,s,e)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(t,s){var e,B,i;return function(){var F=styleValue(this,t),Q=(this.style.removeProperty(t),styleValue(this,t));return F===Q?null:F===e&&Q===B?i:i=s(e=F,B=Q)}}function styleRemove(t){return function(){this.style.removeProperty(t)}}function styleConstant(t,s,e){var B,i,F=e+"";return function(){var Q=styleValue(this,t);return Q===F?null:Q===B?i:i=s(B=Q,e)}}function styleFunction(t,s,e){var B,i,F;return function(){var Q=styleValue(this,t),l=e(this),U=l+"";return null==l&&(this.style.removeProperty(t),U=l=styleValue(this,t)),Q===U?null:Q===B&&U===i?F:(i=U,F=s(B=Q,l))}}function styleMaybeRemove(t,s){var e,B,i,F,Q="style."+s,l="end."+Q;return function(){var U=set(this,t),a=U.on,g=null==U.value[Q]?F||(F=styleRemove(s)):void 0;a===e&&i===g||(B=(e=a).copy()).on(l,i=g),U.on=B}}function transition_style(t,s,e){var B="transform"==(t+="")?interpolateTransformCss:interpolate;return null==s?this.styleTween(t,styleNull(t,B)).on("end.style."+t,styleRemove(t)):"function"==typeof s?this.styleTween(t,styleFunction(t,B,tweenValue(this,"style."+t,s))).each(styleMaybeRemove(this._id,t)):this.styleTween(t,styleConstant(t,B,s),e).on("end.style."+t,null)}function styleInterpolate(t,s,e){return function(B){this.style.setProperty(t,s.call(this,B),e)}}function styleTween(t,s,e){var B,i;function F(){var F=s.apply(this,arguments);return F!==i&&(B=(i=F)&&styleInterpolate(t,F,e)),B}return F._value=s,F}function transition_styleTween(t,s,e){var B="style."+(t+="");if(arguments.length<2)return(B=this.tween(B))&&B._value;if(null==s)return this.tween(B,null);if("function"!=typeof s)throw new Error;return this.tween(B,styleTween(t,s,null==e?"":e))}function textConstant(t){return function(){this.textContent=t}}function textFunction(t){return function(){var s=t(this);this.textContent=null==s?"":s}}function transition_text(t){return this.tween("text","function"==typeof t?textFunction(tweenValue(this,"text",t)):textConstant(null==t?"":t+""))}function textInterpolate(t){return function(s){this.textContent=t.call(this,s)}}function textTween(t){var s,e;function B(){var B=t.apply(this,arguments);return B!==e&&(s=(e=B)&&textInterpolate(B)),s}return B._value=t,B}function transition_textTween(t){var s="text";if(arguments.length<1)return(s=this.tween(s))&&s._value;if(null==t)return this.tween(s,null);if("function"!=typeof t)throw new Error;return this.tween(s,textTween(t))}function transition_transition(){for(var t=this._name,s=this._id,e=newId(),B=this._groups,i=B.length,F=0;F<i;++F)for(var Q,l=B[F],U=l.length,a=0;a<U;++a)if(Q=l[a]){var g=get(Q,s);schedule(Q,t,e,a,l,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new Transition(B,this._parents,t,e)}function transition_end(){var t,s,e=this,B=e._id,i=e.size();return new Promise(function(F,Q){var l={value:Q},U={value:function(){0===--i&&F()}};e.each(function(){var e=set(this,B),i=e.on;i!==t&&((s=(t=i).copy())._.cancel.push(l),s._.interrupt.push(l),s._.end.push(U)),e.on=s}),0===i&&F()})}var id=0;function Transition(t,s,e,B){this._groups=t,this._parents=s,this._name=e,this._id=B}function newId(){return++id}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};const linear$1=t=>+t;function cubicIn(t){return t*t*t}function cubicOut(t){return--t*t*t+1}function cubicInOut(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit$1(t,s){for(var e;!(e=t.__transition)||!(e=e[s]);)if(!(t=t.parentNode))throw new Error(`transition ${s} not found`);return e}function selection_transition(t){var s,e;t instanceof Transition?(s=t._id,t=t._name):(s=newId(),(e=defaultTiming).time=now(),t=null==t?null:t+"");for(var B=this._groups,i=B.length,F=0;F<i;++F)for(var Q,l=B[F],U=l.length,a=0;a<U;++a)(Q=l[a])&&schedule(Q,t,s,a,l,e||inherit$1(Q,s));return new Transition(B,this._parents,t,s)}selection.prototype.interrupt=selection_interrupt,selection.prototype.transition=selection_transition;const pi$3=Math.PI,tau$3=2*pi$3,epsilon$2=1e-6,tauEpsilon=tau$3-1e-6;function append$1(t){this._+=t[0];for(let s=1,e=t.length;s<e;++s)this._+=arguments[s]+t[s]}function appendRound$1(t){let s=Math.floor(t);if(!(s>=0))throw new Error(`invalid digits: ${t}`);if(s>15)return append$1;const e=10**s;return function(t){this._+=t[0];for(let s=1,B=t.length;s<B;++s)this._+=Math.round(arguments[s]*e)/e+t[s]}}class Path{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?append$1:appendRound$1(t)}moveTo(t,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+s}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,s){this._append`L${this._x1=+t},${this._y1=+s}`}quadraticCurveTo(t,s,e,B){this._append`Q${+t},${+s},${this._x1=+e},${this._y1=+B}`}bezierCurveTo(t,s,e,B,i,F){this._append`C${+t},${+s},${+e},${+B},${this._x1=+i},${this._y1=+F}`}arcTo(t,s,e,B,i){if(t=+t,s=+s,e=+e,B=+B,(i=+i)<0)throw new Error(`negative radius: ${i}`);let F=this._x1,Q=this._y1,l=e-t,U=B-s,a=F-t,g=Q-s,I=a*a+g*g;if(null===this._x1)this._append`M${this._x1=t},${this._y1=s}`;else if(I>1e-6)if(Math.abs(g*l-U*a)>1e-6&&i){let c=e-F,n=B-Q,r=l*l+U*U,o=c*c+n*n,d=Math.sqrt(r),C=Math.sqrt(I),b=i*Math.tan((pi$3-Math.acos((r+I-o)/(2*d*C)))/2),u=b/C,h=b/d;Math.abs(u-1)>1e-6&&this._append`L${t+u*a},${s+u*g}`,this._append`A${i},${i},0,0,${+(g*c>a*n)},${this._x1=t+h*l},${this._y1=s+h*U}`}else this._append`L${this._x1=t},${this._y1=s}`;else;}arc(t,s,e,B,i,F){if(t=+t,s=+s,F=!!F,(e=+e)<0)throw new Error(`negative radius: ${e}`);let Q=e*Math.cos(B),l=e*Math.sin(B),U=t+Q,a=s+l,g=1^F,I=F?B-i:i-B;null===this._x1?this._append`M${U},${a}`:(Math.abs(this._x1-U)>1e-6||Math.abs(this._y1-a)>1e-6)&&this._append`L${U},${a}`,e&&(I<0&&(I=I%tau$3+tau$3),I>tauEpsilon?this._append`A${e},${e},0,1,${g},${t-Q},${s-l}A${e},${e},0,1,${g},${this._x1=U},${this._y1=a}`:I>1e-6&&this._append`A${e},${e},0,${+(I>=pi$3)},${g},${this._x1=t+e*Math.cos(i)},${this._y1=s+e*Math.sin(i)}`)}rect(t,s,e,B){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+s}h${e=+e}v${+B}h${-e}Z`}toString(){return this._}}function pathRound(t=3){return new Path(+t)}var array$1=Array.prototype,slice$1=array$1.slice;function ascending(t,s){return t-s}function area(t){for(var s=0,e=t.length,B=t[e-1][1]*t[0][0]-t[e-1][0]*t[0][1];++s<e;)B+=t[s-1][1]*t[s][0]-t[s-1][0]*t[s][1];return B}var constant$2=t=>()=>t;function contains(t,s){for(var e,B=-1,i=s.length;++B<i;)if(e=ringContains(t,s[B]))return e;return 0}function ringContains(t,s){for(var e=s[0],B=s[1],i=-1,F=0,Q=t.length,l=Q-1;F<Q;l=F++){var U=t[F],a=U[0],g=U[1],I=t[l],c=I[0],n=I[1];if(segmentContains(U,I,s))return 0;g>B!=n>B&&e<(c-a)*(B-g)/(n-g)+a&&(i=-i)}return i}function segmentContains(t,s,e){var B;return collinear(t,s,e)&&within(t[B=+(t[0]===s[0])],e[B],s[B])}function collinear(t,s,e){return(s[0]-t[0])*(e[1]-t[1])===(e[0]-t[0])*(s[1]-t[1])}function within(t,s,e){return t<=s&&s<=e||e<=s&&s<=t}function noop$2(){}var cases=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function contours(){var t=1,s=1,e=thresholdSturges,B=l;function i(t){var s=e(t);if(Array.isArray(s))s=s.slice().sort(ascending);else{const e=extent$1(t,finite$1);for(s=ticks(...nice$1(e[0],e[1],s),s);s[s.length-1]>=e[1];)s.pop();for(;s[1]<e[0];)s.shift()}return s.map(s=>F(t,s))}function F(e,i){const F=null==i?NaN:+i;if(isNaN(F))throw new Error(`invalid value: ${i}`);var l=[],U=[];return function(e,B,i){var F,l,U,a,g,I,c=new Array,n=new Array;F=l=-1,a=above(e[0],B),cases[a<<1].forEach(r);for(;++F<t-1;)U=a,a=above(e[F+1],B),cases[U|a<<1].forEach(r);cases[a|0].forEach(r);for(;++l<s-1;){for(F=-1,a=above(e[l*t+t],B),g=above(e[l*t],B),cases[a<<1|g<<2].forEach(r);++F<t-1;)U=a,a=above(e[l*t+t+F+1],B),I=g,g=above(e[l*t+F+1],B),cases[U|a<<1|g<<2|I<<3].forEach(r);cases[a|g<<3].forEach(r)}F=-1,g=e[l*t]>=B,cases[g<<2].forEach(r);for(;++F<t-1;)I=g,g=above(e[l*t+F+1],B),cases[g<<2|I<<3].forEach(r);function r(t){var s,e,B=[t[0][0]+F,t[0][1]+l],U=[t[1][0]+F,t[1][1]+l],a=Q(B),g=Q(U);(s=n[a])?(e=c[g])?(delete n[s.end],delete c[e.start],s===e?(s.ring.push(U),i(s.ring)):c[s.start]=n[e.end]={start:s.start,end:e.end,ring:s.ring.concat(e.ring)}):(delete n[s.end],s.ring.push(U),n[s.end=g]=s):(s=c[g])?(e=n[a])?(delete c[s.start],delete n[e.end],s===e?(s.ring.push(U),i(s.ring)):c[e.start]=n[s.end]={start:e.start,end:s.end,ring:e.ring.concat(s.ring)}):(delete c[s.start],s.ring.unshift(B),c[s.start=a]=s):c[a]=n[g]={start:a,end:g,ring:[B,U]}}cases[g<<3].forEach(r)}(e,F,function(t){B(t,e,F),area(t)>0?l.push([t]):U.push(t)}),U.forEach(function(t){for(var s,e=0,B=l.length;e<B;++e)if(-1!==contains((s=l[e])[0],t))return void s.push(t)}),{type:"MultiPolygon",value:i,coordinates:l}}function Q(s){return 2*s[0]+s[1]*(t+1)*4}function l(e,B,i){e.forEach(function(e){var F=e[0],Q=e[1],l=0|F,U=0|Q,a=valid(B[U*t+l]);F>0&&F<t&&l===F&&(e[0]=smooth1(F,valid(B[U*t+l-1]),a,i)),Q>0&&Q<s&&U===Q&&(e[1]=smooth1(Q,valid(B[(U-1)*t+l]),a,i))})}return i.contour=F,i.size=function(e){if(!arguments.length)return[t,s];var B=Math.floor(e[0]),F=Math.floor(e[1]);if(!(B>=0&&F>=0))throw new Error("invalid size");return t=B,s=F,i},i.thresholds=function(t){return arguments.length?(e="function"==typeof t?t:Array.isArray(t)?constant$2(slice$1.call(t)):constant$2(t),i):e},i.smooth=function(t){return arguments.length?(B=t?l:noop$2,i):B===l},i}function finite$1(t){return isFinite(t)?t:NaN}function above(t,s){return null!=t&&+t>=s}function valid(t){return null==t||isNaN(t=+t)?-1/0:t}function smooth1(t,s,e,B){const i=B-s,F=e-s,Q=isFinite(i)||isFinite(F)?i/F:Math.sign(i)/Math.sign(F);return isNaN(Q)?t:t+Q-.5}function formatDecimal(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function formatDecimalParts(t,s){if((e=(t=s?t.toExponential(s-1):t.toExponential()).indexOf("e"))<0)return null;var e,B=t.slice(0,e);return[B.length>1?B[0]+B.slice(2):B,+t.slice(e+1)]}function exponent(t){return(t=formatDecimalParts(Math.abs(t)))?t[1]:NaN}function formatGroup(t,s){return function(e,B){for(var i=e.length,F=[],Q=0,l=t[0],U=0;i>0&&l>0&&(U+l+1>B&&(l=Math.max(1,B-U)),F.push(e.substring(i-=l,i+l)),!((U+=l+1)>B));)l=t[Q=(Q+1)%t.length];return F.reverse().join(s)}}function formatNumerals(t){return function(s){return s.replace(/[0-9]/g,function(s){return t[+s]})}}var prefixExponent,re$1=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(t){if(!(s=re$1.exec(t)))throw new Error("invalid format: "+t);var s;return new FormatSpecifier({fill:s[1],align:s[2],sign:s[3],symbol:s[4],zero:s[5],width:s[6],comma:s[7],precision:s[8]&&s[8].slice(1),trim:s[9],type:s[10]})}function FormatSpecifier(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function formatTrim(t){t:for(var s,e=t.length,B=1,i=-1;B<e;++B)switch(t[B]){case".":i=s=B;break;case"0":0===i&&(i=B),s=B;break;default:if(!+t[B])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(s+1):t}function formatPrefixAuto(t,s){var e=formatDecimalParts(t,s);if(!e)return t+"";var B=e[0],i=e[1],F=i-(prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,Q=B.length;return F===Q?B:F>Q?B+new Array(F-Q+1).join("0"):F>0?B.slice(0,F)+"."+B.slice(F):"0."+new Array(1-F).join("0")+formatDecimalParts(t,Math.max(0,s+F-1))[0]}function formatRounded(t,s){var e=formatDecimalParts(t,s);if(!e)return t+"";var B=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+B:B.length>i+1?B.slice(0,i+1)+"."+B.slice(i+1):B+new Array(i-B.length+2).join("0")}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var formatTypes={"%":(t,s)=>(100*t).toFixed(s),b:t=>Math.round(t).toString(2),c:t=>t+"",d:formatDecimal,e:(t,s)=>t.toExponential(s),f:(t,s)=>t.toFixed(s),g:(t,s)=>t.toPrecision(s),o:t=>Math.round(t).toString(8),p:(t,s)=>formatRounded(100*t,s),r:formatRounded,s:formatPrefixAuto,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function identity$7(t){return t}var locale$1,format$1,formatPrefix,map$1=Array.prototype.map,prefixes=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$1(t){var s=void 0===t.grouping||void 0===t.thousands?identity$7:formatGroup(map$1.call(t.grouping,Number),t.thousands+""),e=void 0===t.currency?"":t.currency[0]+"",B=void 0===t.currency?"":t.currency[1]+"",i=void 0===t.decimal?".":t.decimal+"",F=void 0===t.numerals?identity$7:formatNumerals(map$1.call(t.numerals,String)),Q=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"â":t.minus+"",U=void 0===t.nan?"NaN":t.nan+"";function a(t){var a=(t=formatSpecifier(t)).fill,g=t.align,I=t.sign,c=t.symbol,n=t.zero,r=t.width,o=t.comma,d=t.precision,C=t.trim,b=t.type;"n"===b?(o=!0,b="g"):formatTypes[b]||(void 0===d&&(d=12),C=!0,b="g"),(n||"0"===a&&"="===g)&&(n=!0,a="0",g="=");var u="$"===c?e:"#"===c&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",h="$"===c?B:/[%p]/.test(b)?Q:"",y=formatTypes[b],x=/[defgprs%]/.test(b);function A(t){var e,B,Q,c=u,A=h;if("c"===b)A=y(t)+A,t="";else{var G=(t=+t)<0||1/t<0;if(t=isNaN(t)?U:y(Math.abs(t),d),C&&(t=formatTrim(t)),G&&0===+t&&"+"!==I&&(G=!1),c=(G?"("===I?I:l:"-"===I||"("===I?"":I)+c,A=("s"===b?prefixes[8+prefixExponent/3]:"")+A+(G&&"("===I?")":""),x)for(e=-1,B=t.length;++e<B;)if(48>(Q=t.charCodeAt(e))||Q>57){A=(46===Q?i+t.slice(e+1):t.slice(e))+A,t=t.slice(0,e);break}}o&&!n&&(t=s(t,1/0));var R=c.length+t.length+A.length,L=R<r?new Array(r-R+1).join(a):"";switch(o&&n&&(t=s(L+t,L.length?r-A.length:1/0),L=""),g){case"<":t=c+t+A+L;break;case"=":t=c+L+t+A;break;case"^":t=L.slice(0,R=L.length>>1)+c+t+A+L.slice(R);break;default:t=L+c+t+A}return F(t)}return d=void 0===d?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),A.toString=function(){return t+""},A}return{format:a,formatPrefix:function(t,s){var e=a(((t=formatSpecifier(t)).type="f",t)),B=3*Math.max(-8,Math.min(8,Math.floor(exponent(s)/3))),i=Math.pow(10,-B),F=prefixes[8+B/3];return function(t){return e(i*t)+F}}}}function defaultLocale$1(t){return locale$1=formatLocale$1(t),format$1=locale$1.format,formatPrefix=locale$1.formatPrefix,locale$1}function precisionFixed(t){return Math.max(0,-exponent(Math.abs(t)))}function precisionPrefix(t,s){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(exponent(s)/3)))-exponent(Math.abs(t)))}function precisionRound(t,s){return t=Math.abs(t),s=Math.abs(s)-t,Math.max(0,exponent(s)-exponent(t))+1}defaultLocale$1({thousands:",",grouping:[3],currency:["$",""]});var epsilon$1=1e-6,epsilon2=1e-12,pi$2=Math.PI,halfPi$1=pi$2/2,quarterPi=pi$2/4,tau$2=2*pi$2,degrees=180/pi$2,radians$1=pi$2/180,abs$1=Math.abs,atan=Math.atan,atan2$1=Math.atan2,cos$1=Math.cos,exp=Math.exp,log$1=Math.log,pow$1=Math.pow,sin$1=Math.sin,sign$1=Math.sign||function(t){return t>0?1:t<0?-1:0},sqrt$1=Math.sqrt,tan=Math.tan;function acos$1(t){return t>1?0:t<-1?pi$2:Math.acos(t)}function asin$1(t){return t>1?halfPi$1:t<-1?-halfPi$1:Math.asin(t)}function noop$1(){}function streamGeometry(t,s){t&&streamGeometryType.hasOwnProperty(t.type)&&streamGeometryType[t.type](t,s)}var streamObjectType={Feature:function(t,s){streamGeometry(t.geometry,s)},FeatureCollection:function(t,s){for(var e=t.features,B=-1,i=e.length;++B<i;)streamGeometry(e[B].geometry,s)}},streamGeometryType={Sphere:function(t,s){s.sphere()},Point:function(t,s){t=t.coordinates,s.point(t[0],t[1],t[2])},MultiPoint:function(t,s){for(var e=t.coordinates,B=-1,i=e.length;++B<i;)t=e[B],s.point(t[0],t[1],t[2])},LineString:function(t,s){streamLine(t.coordinates,s,0)},MultiLineString:function(t,s){for(var e=t.coordinates,B=-1,i=e.length;++B<i;)streamLine(e[B],s,0)},Polygon:function(t,s){streamPolygon(t.coordinates,s)},MultiPolygon:function(t,s){for(var e=t.coordinates,B=-1,i=e.length;++B<i;)streamPolygon(e[B],s)},GeometryCollection:function(t,s){for(var e=t.geometries,B=-1,i=e.length;++B<i;)streamGeometry(e[B],s)}};function streamLine(t,s,e){var B,i=-1,F=t.length-e;for(s.lineStart();++i<F;)B=t[i],s.point(B[0],B[1],B[2]);s.lineEnd()}function streamPolygon(t,s){var e=-1,B=t.length;for(s.polygonStart();++e<B;)streamLine(t[e],s,1);s.polygonEnd()}function geoStream(t,s){t&&streamObjectType.hasOwnProperty(t.type)?streamObjectType[t.type](t,s):streamGeometry(t,s)}function spherical(t){return[atan2$1(t[1],t[0]),asin$1(t[2])]}function cartesian(t){var s=t[0],e=t[1],B=cos$1(e);return[B*cos$1(s),B*sin$1(s),sin$1(e)]}function cartesianDot(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]}function cartesianCross(t,s){return[t[1]*s[2]-t[2]*s[1],t[2]*s[0]-t[0]*s[2],t[0]*s[1]-t[1]*s[0]]}function cartesianAddInPlace(t,s){t[0]+=s[0],t[1]+=s[1],t[2]+=s[2]}function cartesianScale(t,s){return[t[0]*s,t[1]*s,t[2]*s]}function cartesianNormalizeInPlace(t){var s=sqrt$1(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=s,t[1]/=s,t[2]/=s}function compose(t,s){function e(e,B){return e=t(e,B),s(e[0],e[1])}return t.invert&&s.invert&&(e.invert=function(e,B){return(e=s.invert(e,B))&&t.invert(e[0],e[1])}),e}function rotationIdentity(t,s){return abs$1(t)>pi$2&&(t-=Math.round(t/tau$2)*tau$2),[t,s]}function rotateRadians(t,s,e){return(t%=tau$2)?s||e?compose(rotationLambda(t),rotationPhiGamma(s,e)):rotationLambda(t):s||e?rotationPhiGamma(s,e):rotationIdentity}function forwardRotationLambda(t){return function(s,e){return abs$1(s+=t)>pi$2&&(s-=Math.round(s/tau$2)*tau$2),[s,e]}}function rotationLambda(t){var s=forwardRotationLambda(t);return s.invert=forwardRotationLambda(-t),s}function rotationPhiGamma(t,s){var e=cos$1(t),B=sin$1(t),i=cos$1(s),F=sin$1(s);function Q(t,s){var Q=cos$1(s),l=cos$1(t)*Q,U=sin$1(t)*Q,a=sin$1(s),g=a*e+l*B;return[atan2$1(U*i-g*F,l*e-a*B),asin$1(g*i+U*F)]}return Q.invert=function(t,s){var Q=cos$1(s),l=cos$1(t)*Q,U=sin$1(t)*Q,a=sin$1(s),g=a*i-U*F;return[atan2$1(U*i+a*F,l*e+g*B),asin$1(g*e-l*B)]},Q}function rotation(t){function s(s){return(s=t(s[0]*radians$1,s[1]*radians$1))[0]*=degrees,s[1]*=degrees,s}return t=rotateRadians(t[0]*radians$1,t[1]*radians$1,t.length>2?t[2]*radians$1:0),s.invert=function(s){return(s=t.invert(s[0]*radians$1,s[1]*radians$1))[0]*=degrees,s[1]*=degrees,s},s}function circleStream(t,s,e,B,i,F){if(e){var Q=cos$1(s),l=sin$1(s),U=B*e;null==i?(i=s+B*tau$2,F=s-U/2):(i=circleRadius(Q,i),F=circleRadius(Q,F),(B>0?i<F:i>F)&&(i+=B*tau$2));for(var a,g=i;B>0?g>F:g<F;g-=U)a=spherical([Q,-l*cos$1(g),-l*sin$1(g)]),t.point(a[0],a[1])}}function circleRadius(t,s){(s=cartesian(s))[0]-=t,cartesianNormalizeInPlace(s);var e=acos$1(-s[1]);return((-s[2]<0?-e:e)+tau$2-epsilon$1)%tau$2}function clipBuffer(){var t,s=[];return{point:function(s,e,B){t.push([s,e,B])},lineStart:function(){s.push(t=[])},lineEnd:noop$1,rejoin:function(){s.length>1&&s.push(s.pop().concat(s.shift()))},result:function(){var e=s;return s=[],t=null,e}}}function pointEqual(t,s){return abs$1(t[0]-s[0])<epsilon$1&&abs$1(t[1]-s[1])<epsilon$1}function Intersection(t,s,e,B){this.x=t,this.z=s,this.o=e,this.e=B,this.v=!1,this.n=this.p=null}function clipRejoin(t,s,e,B,i){var F,Q,l=[],U=[];if(t.forEach(function(t){if(!((s=t.length-1)<=0)){var s,e,B=t[0],Q=t[s];if(pointEqual(B,Q)){if(!B[2]&&!Q[2]){for(i.lineStart(),F=0;F<s;++F)i.point((B=t[F])[0],B[1]);return void i.lineEnd()}Q[0]+=2*epsilon$1}l.push(e=new Intersection(B,t,null,!0)),U.push(e.o=new Intersection(B,null,e,!1)),l.push(e=new Intersection(Q,t,null,!1)),U.push(e.o=new Intersection(Q,null,e,!0))}}),l.length){for(U.sort(s),link$1(l),link$1(U),F=0,Q=U.length;F<Q;++F)U[F].e=e=!e;for(var a,g,I=l[0];;){for(var c=I,n=!0;c.v;)if((c=c.n)===I)return;a=c.z,i.lineStart();do{if(c.v=c.o.v=!0,c.e){if(n)for(F=0,Q=a.length;F<Q;++F)i.point((g=a[F])[0],g[1]);else B(c.x,c.n.x,1,i);c=c.n}else{if(n)for(a=c.p.z,F=a.length-1;F>=0;--F)i.point((g=a[F])[0],g[1]);else B(c.x,c.p.x,-1,i);c=c.p}a=(c=c.o).z,n=!n}while(!c.v);i.lineEnd()}}}function link$1(t){if(s=t.length){for(var s,e,B=0,i=t[0];++B<s;)i.n=e=t[B],e.p=i,i=e;i.n=e=t[0],e.p=i}}function longitude(t){return abs$1(t[0])<=pi$2?t[0]:sign$1(t[0])*((abs$1(t[0])+pi$2)%tau$2-pi$2)}function polygonContains(t,s){var e=longitude(s),B=s[1],i=sin$1(B),F=[sin$1(e),-cos$1(e),0],Q=0,l=0,U=new Adder;1===i?B=halfPi$1+epsilon$1:-1===i&&(B=-halfPi$1-epsilon$1);for(var a=0,g=t.length;a<g;++a)if(c=(I=t[a]).length)for(var I,c,n=I[c-1],r=longitude(n),o=n[1]/2+quarterPi,d=sin$1(o),C=cos$1(o),b=0;b<c;++b,r=h,d=x,C=A,n=u){var u=I[b],h=longitude(u),y=u[1]/2+quarterPi,x=sin$1(y),A=cos$1(y),G=h-r,R=G>=0?1:-1,L=R*G,m=L>pi$2,S=d*x;if(U.add(atan2$1(S*R*sin$1(L),C*A+S*cos$1(L))),Q+=m?G+R*tau$2:G,m^r>=e^h>=e){var p=cartesianCross(cartesian(n),cartesian(u));cartesianNormalizeInPlace(p);var V=cartesianCross(F,p);cartesianNormalizeInPlace(V);var Z=(m^G>=0?-1:1)*asin$1(V[2]);(B>Z||B===Z&&(p[0]||p[1]))&&(l+=m^G>=0?1:-1)}}return(Q<-epsilon$1||Q<epsilon$1&&U<-epsilon2)^1&l}function clip(t,s,e,B){return function(i){var F,Q,l,U=s(i),a=clipBuffer(),g=s(a),I=!1,c={point:n,lineStart:o,lineEnd:d,polygonStart:function(){c.point=C,c.lineStart=b,c.lineEnd=u,Q=[],F=[]},polygonEnd:function(){c.point=n,c.lineStart=o,c.lineEnd=d,Q=merge(Q);var t=polygonContains(F,B);Q.length?(I||(i.polygonStart(),I=!0),clipRejoin(Q,compareIntersection,t,e,i)):t&&(I||(i.polygonStart(),I=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),I&&(i.polygonEnd(),I=!1),Q=F=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function n(s,e){t(s,e)&&i.point(s,e)}function r(t,s){U.point(t,s)}function o(){c.point=r,U.lineStart()}function d(){c.point=n,U.lineEnd()}function C(t,s){l.push([t,s]),g.point(t,s)}function b(){g.lineStart(),l=[]}function u(){C(l[0][0],l[0][1]),g.lineEnd();var t,s,e,B,U=g.clean(),c=a.result(),n=c.length;if(l.pop(),F.push(l),l=null,n)if(1&U){if((s=(e=c[0]).length-1)>0){for(I||(i.polygonStart(),I=!0),i.lineStart(),t=0;t<s;++t)i.point((B=e[t])[0],B[1]);i.lineEnd()}}else n>1&&2&U&&c.push(c.pop().concat(c.shift())),Q.push(c.filter(validSegment))}return c}}function validSegment(t){return t.length>1}function compareIntersection(t,s){return((t=t.x)[0]<0?t[1]-halfPi$1-epsilon$1:halfPi$1-t[1])-((s=s.x)[0]<0?s[1]-halfPi$1-epsilon$1:halfPi$1-s[1])}rotationIdentity.invert=rotationIdentity;var clipAntimeridian=clip(function(){return!0},clipAntimeridianLine,clipAntimeridianInterpolate,[-pi$2,-halfPi$1]);function clipAntimeridianLine(t){var s,e=NaN,B=NaN,i=NaN;return{lineStart:function(){t.lineStart(),s=1},point:function(F,Q){var l=F>0?pi$2:-pi$2,U=abs$1(F-e);abs$1(U-pi$2)<epsilon$1?(t.point(e,B=(B+Q)/2>0?halfPi$1:-halfPi$1),t.point(i,B),t.lineEnd(),t.lineStart(),t.point(l,B),t.point(F,B),s=0):i!==l&&U>=pi$2&&(abs$1(e-i)<epsilon$1&&(e-=i*epsilon$1),abs$1(F-l)<epsilon$1&&(F-=l*epsilon$1),B=clipAntimeridianIntersect(e,B,F,Q),t.point(i,B),t.lineEnd(),t.lineStart(),t.point(l,B),s=0),t.point(e=F,B=Q),i=l},lineEnd:function(){t.lineEnd(),e=B=NaN},clean:function(){return 2-s}}}function clipAntimeridianIntersect(t,s,e,B){var i,F,Q=sin$1(t-e);return abs$1(Q)>epsilon$1?atan((sin$1(s)*(F=cos$1(B))*sin$1(e)-sin$1(B)*(i=cos$1(s))*sin$1(t))/(i*F*Q)):(s+B)/2}function clipAntimeridianInterpolate(t,s,e,B){var i;if(null==t)i=e*halfPi$1,B.point(-pi$2,i),B.point(0,i),B.point(pi$2,i),B.point(pi$2,0),B.point(pi$2,-i),B.point(0,-i),B.point(-pi$2,-i),B.point(-pi$2,0),B.point(-pi$2,i);else if(abs$1(t[0]-s[0])>epsilon$1){var F=t[0]<s[0]?pi$2:-pi$2;i=e*F/2,B.point(-F,i),B.point(0,i),B.point(F,i)}else B.point(s[0],s[1])}function clipCircle(t){var s=cos$1(t),e=2*radians$1,B=s>0,i=abs$1(s)>epsilon$1;function F(t,e){return cos$1(t)*cos$1(e)>s}function Q(t,e,B){var i=[1,0,0],F=cartesianCross(cartesian(t),cartesian(e)),Q=cartesianDot(F,F),l=F[0],U=Q-l*l;if(!U)return!B&&t;var a=s*Q/U,g=-s*l/U,I=cartesianCross(i,F),c=cartesianScale(i,a);cartesianAddInPlace(c,cartesianScale(F,g));var n=I,r=cartesianDot(c,n),o=cartesianDot(n,n),d=r*r-o*(cartesianDot(c,c)-1);if(!(d<0)){var C=sqrt$1(d),b=cartesianScale(n,(-r-C)/o);if(cartesianAddInPlace(b,c),b=spherical(b),!B)return b;var u,h=t[0],y=e[0],x=t[1],A=e[1];y<h&&(u=h,h=y,y=u);var G=y-h,R=abs$1(G-pi$2)<epsilon$1;if(!R&&A<x&&(u=x,x=A,A=u),R||G<epsilon$1?R?x+A>0^b[1]<(abs$1(b[0]-h)<epsilon$1?x:A):x<=b[1]&&b[1]<=A:G>pi$2^(h<=b[0]&&b[0]<=y)){var L=cartesianScale(n,(-r+C)/o);return cartesianAddInPlace(L,c),[b,spherical(L)]}}}function l(s,e){var i=B?t:pi$2-t,F=0;return s<-i?F|=1:s>i&&(F|=2),e<-i?F|=4:e>i&&(F|=8),F}return clip(F,function(t){var s,e,U,a,g;return{lineStart:function(){a=U=!1,g=1},point:function(I,c){var n,r=[I,c],o=F(I,c),d=B?o?0:l(I,c):o?l(I+(I<0?pi$2:-pi$2),c):0;if(!s&&(a=U=o)&&t.lineStart(),o!==U&&(!(n=Q(s,r))||pointEqual(s,n)||pointEqual(r,n))&&(r[2]=1),o!==U)g=0,o?(t.lineStart(),n=Q(r,s),t.point(n[0],n[1])):(n=Q(s,r),t.point(n[0],n[1],2),t.lineEnd()),s=n;else if(i&&s&&B^o){var C;d&e||!(C=Q(r,s,!0))||(g=0,B?(t.lineStart(),t.point(C[0][0],C[0][1]),t.point(C[1][0],C[1][1]),t.lineEnd()):(t.point(C[1][0],C[1][1]),t.lineEnd(),t.lineStart(),t.point(C[0][0],C[0][1],3)))}!o||s&&pointEqual(s,r)||t.point(r[0],r[1]),s=r,U=o,e=d},lineEnd:function(){U&&t.lineEnd(),s=null},clean:function(){return g|(a&&U)<<1}}},function(s,B,i,F){circleStream(F,t,e,i,s,B)},B?[0,-t]:[-pi$2,t-pi$2])}function clipLine(t,s,e,B,i,F){var Q,l=t[0],U=t[1],a=0,g=1,I=s[0]-l,c=s[1]-U;if(Q=e-l,I||!(Q>0)){if(Q/=I,I<0){if(Q<a)return;Q<g&&(g=Q)}else if(I>0){if(Q>g)return;Q>a&&(a=Q)}if(Q=i-l,I||!(Q<0)){if(Q/=I,I<0){if(Q>g)return;Q>a&&(a=Q)}else if(I>0){if(Q<a)return;Q<g&&(g=Q)}if(Q=B-U,c||!(Q>0)){if(Q/=c,c<0){if(Q<a)return;Q<g&&(g=Q)}else if(c>0){if(Q>g)return;Q>a&&(a=Q)}if(Q=F-U,c||!(Q<0)){if(Q/=c,c<0){if(Q>g)return;Q>a&&(a=Q)}else if(c>0){if(Q<a)return;Q<g&&(g=Q)}return a>0&&(t[0]=l+a*I,t[1]=U+a*c),g<1&&(s[0]=l+g*I,s[1]=U+g*c),!0}}}}}var clipMax=1e9,clipMin=-clipMax;function clipRectangle(t,s,e,B){function i(i,F){return t<=i&&i<=e&&s<=F&&F<=B}function F(i,F,l,a){var g=0,I=0;if(null==i||(g=Q(i,l))!==(I=Q(F,l))||U(i,F)<0^l>0)do{a.point(0===g||3===g?t:e,g>1?B:s)}while((g=(g+l+4)%4)!==I);else a.point(F[0],F[1])}function Q(B,i){return abs$1(B[0]-t)<epsilon$1?i>0?0:3:abs$1(B[0]-e)<epsilon$1?i>0?2:1:abs$1(B[1]-s)<epsilon$1?i>0?1:0:i>0?3:2}function l(t,s){return U(t.x,s.x)}function U(t,s){var e=Q(t,1),B=Q(s,1);return e!==B?e-B:0===e?s[1]-t[1]:1===e?t[0]-s[0]:2===e?t[1]-s[1]:s[0]-t[0]}return function(Q){var U,a,g,I,c,n,r,o,d,C,b,u=Q,h=clipBuffer(),y={point:x,lineStart:function(){y.point=A,a&&a.push(g=[]);C=!0,d=!1,r=o=NaN},lineEnd:function(){U&&(A(I,c),n&&d&&h.rejoin(),U.push(h.result()));y.point=x,d&&u.lineEnd()},polygonStart:function(){u=h,U=[],a=[],b=!0},polygonEnd:function(){var s=function(){for(var s=0,e=0,i=a.length;e<i;++e)for(var F,Q,l=a[e],U=1,g=l.length,I=l[0],c=I[0],n=I[1];U<g;++U)F=c,Q=n,c=(I=l[U])[0],n=I[1],Q<=B?n>B&&(c-F)*(B-Q)>(n-Q)*(t-F)&&++s:n<=B&&(c-F)*(B-Q)<(n-Q)*(t-F)&&--s;return s}(),e=b&&s,i=(U=merge(U)).length;(e||i)&&(Q.polygonStart(),e&&(Q.lineStart(),F(null,null,1,Q),Q.lineEnd()),i&&clipRejoin(U,l,s,F,Q),Q.polygonEnd());u=Q,U=a=g=null}};function x(t,s){i(t,s)&&u.point(t,s)}function A(F,Q){var l=i(F,Q);if(a&&g.push([F,Q]),C)I=F,c=Q,n=l,C=!1,l&&(u.lineStart(),u.point(F,Q));else if(l&&d)u.point(F,Q);else{var U=[r=Math.max(clipMin,Math.min(clipMax,r)),o=Math.max(clipMin,Math.min(clipMax,o))],h=[F=Math.max(clipMin,Math.min(clipMax,F)),Q=Math.max(clipMin,Math.min(clipMax,Q))];clipLine(U,h,t,s,e,B)?(d||(u.lineStart(),u.point(U[0],U[1])),u.point(h[0],h[1]),l||u.lineEnd(),b=!1):l&&(u.lineStart(),u.point(F,Q),b=!1)}r=F,o=Q,d=l}return y}}var x00$2,y00$2,x0$3,y0$3,identity$6=t=>t,areaSum=new Adder,areaRingSum=new Adder,areaStream={point:noop$1,lineStart:noop$1,lineEnd:noop$1,polygonStart:function(){areaStream.lineStart=areaRingStart,areaStream.lineEnd=areaRingEnd},polygonEnd:function(){areaStream.lineStart=areaStream.lineEnd=areaStream.point=noop$1,areaSum.add(abs$1(areaRingSum)),areaRingSum=new Adder},result:function(){var t=areaSum/2;return areaSum=new Adder,t}};function areaRingStart(){areaStream.point=areaPointFirst}function areaPointFirst(t,s){areaStream.point=areaPoint,x00$2=x0$3=t,y00$2=y0$3=s}function areaPoint(t,s){areaRingSum.add(y0$3*t-x0$3*s),x0$3=t,y0$3=s}function areaRingEnd(){areaPoint(x00$2,y00$2)}var x0$2=1/0,y0$2=x0$2,x1=-x0$2,y1=x1,boundsStream={point:boundsPoint,lineStart:noop$1,lineEnd:noop$1,polygonStart:noop$1,polygonEnd:noop$1,result:function(){var t=[[x0$2,y0$2],[x1,y1]];return x1=y1=-(y0$2=x0$2=1/0),t}};function boundsPoint(t,s){t<x0$2&&(x0$2=t),t>x1&&(x1=t),s<y0$2&&(y0$2=s),s>y1&&(y1=s)}var x00$1,y00$1,x0$1,y0$1,X0=0,Y0=0,Z0=0,X1=0,Y1=0,Z1=0,X2=0,Y2=0,Z2=0,centroidStream={point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){centroidStream.lineStart=centroidRingStart,centroidStream.lineEnd=centroidRingEnd},polygonEnd:function(){centroidStream.point=centroidPoint,centroidStream.lineStart=centroidLineStart,centroidStream.lineEnd=centroidLineEnd},result:function(){var t=Z2?[X2/Z2,Y2/Z2]:Z1?[X1/Z1,Y1/Z1]:Z0?[X0/Z0,Y0/Z0]:[NaN,NaN];return X0=Y0=Z0=X1=Y1=Z1=X2=Y2=Z2=0,t}};function centroidPoint(t,s){X0+=t,Y0+=s,++Z0}function centroidLineStart(){centroidStream.point=centroidPointFirstLine}function centroidPointFirstLine(t,s){centroidStream.point=centroidPointLine,centroidPoint(x0$1=t,y0$1=s)}function centroidPointLine(t,s){var e=t-x0$1,B=s-y0$1,i=sqrt$1(e*e+B*B);X1+=i*(x0$1+t)/2,Y1+=i*(y0$1+s)/2,Z1+=i,centroidPoint(x0$1=t,y0$1=s)}function centroidLineEnd(){centroidStream.point=centroidPoint}function centroidRingStart(){centroidStream.point=centroidPointFirstRing}function centroidRingEnd(){centroidPointRing(x00$1,y00$1)}function centroidPointFirstRing(t,s){centroidStream.point=centroidPointRing,centroidPoint(x00$1=x0$1=t,y00$1=y0$1=s)}function centroidPointRing(t,s){var e=t-x0$1,B=s-y0$1,i=sqrt$1(e*e+B*B);X1+=i*(x0$1+t)/2,Y1+=i*(y0$1+s)/2,Z1+=i,X2+=(i=y0$1*t-x0$1*s)*(x0$1+t),Y2+=i*(y0$1+s),Z2+=3*i,centroidPoint(x0$1=t,y0$1=s)}function PathContext(t){this._context=t}PathContext.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,s){switch(this._point){case 0:this._context.moveTo(t,s),this._point=1;break;case 1:this._context.lineTo(t,s);break;default:this._context.moveTo(t+this._radius,s),this._context.arc(t,s,this._radius,0,tau$2)}},result:noop$1};var lengthRing,x00,y00,x0,y0,lengthSum=new Adder,lengthStream={point:noop$1,lineStart:function(){lengthStream.point=lengthPointFirst},lineEnd:function(){lengthRing&&lengthPoint(x00,y00),lengthStream.point=noop$1},polygonStart:function(){lengthRing=!0},polygonEnd:function(){lengthRing=null},result:function(){var t=+lengthSum;return lengthSum=new Adder,t}};function lengthPointFirst(t,s){lengthStream.point=lengthPoint,x00=x0=t,y00=y0=s}function lengthPoint(t,s){x0-=t,y0-=s,lengthSum.add(sqrt$1(x0*x0+y0*y0)),x0=t,y0=s}let cacheDigits,cacheAppend,cacheRadius,cacheCircle;class PathString{constructor(t){this._append=null==t?append:appendRound(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(t,s){switch(this._point){case 0:this._append`M${t},${s}`,this._point=1;break;case 1:this._append`L${t},${s}`;break;default:if(this._append`M${t},${s}`,this._radius!==cacheRadius||this._append!==cacheAppend){const t=this._radius,s=this._;this._="",this._append`m0,${t}a${t},${t} 0 1,1 0,${-2*t}a${t},${t} 0 1,1 0,${2*t}z`,cacheRadius=t,cacheAppend=this._append,cacheCircle=this._,this._=s}this._+=cacheCircle}}result(){const t=this._;return this._="",t.length?t:null}}function append(t){let s=1;this._+=t[0];for(const e=t.length;s<e;++s)this._+=arguments[s]+t[s]}function appendRound(t){const s=Math.floor(t);if(!(s>=0))throw new RangeError(`invalid digits: ${t}`);if(s>15)return append;if(s!==cacheDigits){const t=10**s;cacheDigits=s,cacheAppend=function(s){let e=1;this._+=s[0];for(const B=s.length;e<B;++e)this._+=Math.round(arguments[e]*t)/t+s[e]}}return cacheAppend}function geoPath(t,s){let e,B,i=3,F=4.5;function Q(t){return t&&("function"==typeof F&&B.pointRadius(+F.apply(this,arguments)),geoStream(t,e(B))),B.result()}return Q.area=function(t){return geoStream(t,e(areaStream)),areaStream.result()},Q.measure=function(t){return geoStream(t,e(lengthStream)),lengthStream.result()},Q.bounds=function(t){return geoStream(t,e(boundsStream)),boundsStream.result()},Q.centroid=function(t){return geoStream(t,e(centroidStream)),centroidStream.result()},Q.projection=function(s){return arguments.length?(e=null==s?(t=null,identity$6):(t=s).stream,Q):t},Q.context=function(t){return arguments.length?(B=null==t?(s=null,new PathString(i)):new PathContext(s=t),"function"!=typeof F&&B.pointRadius(F),Q):s},Q.pointRadius=function(t){return arguments.length?(F="function"==typeof t?t:(B.pointRadius(+t),+t),Q):F},Q.digits=function(t){if(!arguments.length)return i;if(null==t)i=null;else{const s=Math.floor(t);if(!(s>=0))throw new RangeError(`invalid digits: ${t}`);i=s}return null===s&&(B=new PathString(i)),Q},Q.projection(t).digits(i).context(s)}function geoTransform(t){return{stream:transformer$2(t)}}function transformer$2(t){return function(s){var e=new TransformStream;for(var B in t)e[B]=t[B];return e.stream=s,e}}function TransformStream(){}function fit(t,s,e){var B=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=B&&t.clipExtent(null),geoStream(e,t.stream(boundsStream)),s(boundsStream.result()),null!=B&&t.clipExtent(B),t}function fitExtent(t,s,e){return fit(t,function(e){var B=s[1][0]-s[0][0],i=s[1][1]-s[0][1],F=Math.min(B/(e[1][0]-e[0][0]),i/(e[1][1]-e[0][1])),Q=+s[0][0]+(B-F*(e[1][0]+e[0][0]))/2,l=+s[0][1]+(i-F*(e[1][1]+e[0][1]))/2;t.scale(150*F).translate([Q,l])},e)}function fitSize(t,s,e){return fitExtent(t,[[0,0],s],e)}function fitWidth(t,s,e){return fit(t,function(e){var B=+s,i=B/(e[1][0]-e[0][0]),F=(B-i*(e[1][0]+e[0][0]))/2,Q=-i*e[0][1];t.scale(150*i).translate([F,Q])},e)}function fitHeight(t,s,e){return fit(t,function(e){var B=+s,i=B/(e[1][1]-e[0][1]),F=-i*e[0][0],Q=(B-i*(e[1][1]+e[0][1]))/2;t.scale(150*i).translate([F,Q])},e)}TransformStream.prototype={constructor:TransformStream,point:function(t,s){this.stream.point(t,s)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var maxDepth=16,cosMinDistance=cos$1(30*radians$1);function resample(t,s){return+s?resample$1(t,s):resampleNone(t)}function resampleNone(t){return transformer$2({point:function(s,e){s=t(s,e),this.stream.point(s[0],s[1])}})}function resample$1(t,s){function e(B,i,F,Q,l,U,a,g,I,c,n,r,o,d){var C=a-B,b=g-i,u=C*C+b*b;if(u>4*s&&o--){var h=Q+c,y=l+n,x=U+r,A=sqrt$1(h*h+y*y+x*x),G=asin$1(x/=A),R=abs$1(abs$1(x)-1)<epsilon$1||abs$1(F-I)<epsilon$1?(F+I)/2:atan2$1(y,h),L=t(R,G),m=L[0],S=L[1],p=m-B,V=S-i,Z=b*p-C*V;(Z*Z/u>s||abs$1((C*p+b*V)/u-.5)>.3||Q*c+l*n+U*r<cosMinDistance)&&(e(B,i,F,Q,l,U,m,S,R,h/=A,y/=A,x,o,d),d.point(m,S),e(m,S,R,h,y,x,a,g,I,c,n,r,o,d))}}return function(s){var B,i,F,Q,l,U,a,g,I,c,n,r,o={point:d,lineStart:C,lineEnd:u,polygonStart:function(){s.polygonStart(),o.lineStart=h},polygonEnd:function(){s.polygonEnd(),o.lineStart=C}};function d(e,B){e=t(e,B),s.point(e[0],e[1])}function C(){g=NaN,o.point=b,s.lineStart()}function b(B,i){var F=cartesian([B,i]),Q=t(B,i);e(g,I,a,c,n,r,g=Q[0],I=Q[1],a=B,c=F[0],n=F[1],r=F[2],maxDepth,s),s.point(g,I)}function u(){o.point=d,s.lineEnd()}function h(){C(),o.point=y,o.lineEnd=x}function y(t,s){b(B=t,s),i=g,F=I,Q=c,l=n,U=r,o.point=b}function x(){e(g,I,a,c,n,r,i,F,B,Q,l,U,maxDepth,s),o.lineEnd=u,u()}return o}}var transformRadians=transformer$2({point:function(t,s){this.stream.point(t*radians$1,s*radians$1)}});function transformRotate(t){return transformer$2({point:function(s,e){var B=t(s,e);return this.stream.point(B[0],B[1])}})}function scaleTranslate(t,s,e,B,i){function F(F,Q){return[s+t*(F*=B),e-t*(Q*=i)]}return F.invert=function(F,Q){return[(F-s)/t*B,(e-Q)/t*i]},F}function scaleTranslateRotate(t,s,e,B,i,F){if(!F)return scaleTranslate(t,s,e,B,i);var Q=cos$1(F),l=sin$1(F),U=Q*t,a=l*t,g=Q/t,I=l/t,c=(l*e-Q*s)/t,n=(l*s+Q*e)/t;function r(t,F){return[U*(t*=B)-a*(F*=i)+s,e-a*t-U*F]}return r.invert=function(t,s){return[B*(g*t-I*s+c),i*(n-I*t-g*s)]},r}function projection$1(t){return projectionMutator(function(){return t})()}function projectionMutator(t){var s,e,B,i,F,Q,l,U,a,g,I=150,c=480,n=250,r=0,o=0,d=0,C=0,b=0,u=0,h=1,y=1,x=null,A=clipAntimeridian,G=null,R=identity$6,L=.5;function m(t){return U(t[0]*radians$1,t[1]*radians$1)}function S(t){return(t=U.invert(t[0],t[1]))&&[t[0]*degrees,t[1]*degrees]}function p(){var t=scaleTranslateRotate(I,0,0,h,y,u).apply(null,s(r,o)),B=scaleTranslateRotate(I,c-t[0],n-t[1],h,y,u);return e=rotateRadians(d,C,b),l=compose(s,B),U=compose(e,l),Q=resample(l,L),V()}function V(){return a=g=null,m}return m.stream=function(t){return a&&g===t?a:a=transformRadians(transformRotate(e)(A(Q(R(g=t)))))},m.preclip=function(t){return arguments.length?(A=t,x=void 0,V()):A},m.postclip=function(t){return arguments.length?(R=t,G=B=i=F=null,V()):R},m.clipAngle=function(t){return arguments.length?(A=+t?clipCircle(x=t*radians$1):(x=null,clipAntimeridian),V()):x*degrees},m.clipExtent=function(t){return arguments.length?(R=null==t?(G=B=i=F=null,identity$6):clipRectangle(G=+t[0][0],B=+t[0][1],i=+t[1][0],F=+t[1][1]),V()):null==G?null:[[G,B],[i,F]]},m.scale=function(t){return arguments.length?(I=+t,p()):I},m.translate=function(t){return arguments.length?(c=+t[0],n=+t[1],p()):[c,n]},m.center=function(t){return arguments.length?(r=t[0]%360*radians$1,o=t[1]%360*radians$1,p()):[r*degrees,o*degrees]},m.rotate=function(t){return arguments.length?(d=t[0]%360*radians$1,C=t[1]%360*radians$1,b=t.length>2?t[2]%360*radians$1:0,p()):[d*degrees,C*degrees,b*degrees]},m.angle=function(t){return arguments.length?(u=t%360*radians$1,p()):u*degrees},m.reflectX=function(t){return arguments.length?(h=t?-1:1,p()):h<0},m.reflectY=function(t){return arguments.length?(y=t?-1:1,p()):y<0},m.precision=function(t){return arguments.length?(Q=resample(l,L=t*t),V()):sqrt$1(L)},m.fitExtent=function(t,s){return fitExtent(m,t,s)},m.fitSize=function(t,s){return fitSize(m,t,s)},m.fitWidth=function(t,s){return fitWidth(m,t,s)},m.fitHeight=function(t,s){return fitHeight(m,t,s)},function(){return s=t.apply(this,arguments),m.invert=s.invert&&S,p()}}function conicProjection$1(t){var s=0,e=pi$2/3,B=projectionMutator(t),i=B(s,e);return i.parallels=function(t){return arguments.length?B(s=t[0]*radians$1,e=t[1]*radians$1):[s*degrees,e*degrees]},i}function cylindricalEqualAreaRaw(t){var s=cos$1(t);function e(t,e){return[t*s,sin$1(e)/s]}return e.invert=function(t,e){return[t/s,asin$1(e*s)]},e}function conicEqualAreaRaw(t,s){var e=sin$1(t),B=(e+sin$1(s))/2;if(abs$1(B)<epsilon$1)return cylindricalEqualAreaRaw(t);var i=1+e*(2*B-e),F=sqrt$1(i)/B;function Q(t,s){var e=sqrt$1(i-2*B*sin$1(s))/B;return[e*sin$1(t*=B),F-e*cos$1(t)]}return Q.invert=function(t,s){var e=F-s,Q=atan2$1(t,abs$1(e))*sign$1(e);return e*B<0&&(Q-=pi$2*sign$1(t)*sign$1(e)),[Q/B,asin$1((i-(t*t+e*e)*B*B)/(2*B))]},Q}function geoConicEqualArea(){return conicProjection$1(conicEqualAreaRaw).scale(155.424).center([0,33.6442])}function geoAlbers(){return geoConicEqualArea().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function multiplex(t){var s=t.length;return{point:function(e,B){for(var i=-1;++i<s;)t[i].point(e,B)},sphere:function(){for(var e=-1;++e<s;)t[e].sphere()},lineStart:function(){for(var e=-1;++e<s;)t[e].lineStart()},lineEnd:function(){for(var e=-1;++e<s;)t[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<s;)t[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<s;)t[e].polygonEnd()}}}function geoAlbersUsa(){var t,s,e,B,i,F,Q=geoAlbers(),l=geoConicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),U=geoConicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a={point:function(t,s){F=[t,s]}};function g(t){var s=t[0],Q=t[1];return F=null,e.point(s,Q),F||(B.point(s,Q),F)||(i.point(s,Q),F)}function I(){return t=s=null,g}return g.invert=function(t){var s=Q.scale(),e=Q.translate(),B=(t[0]-e[0])/s,i=(t[1]-e[1])/s;return(i>=.12&&i<.234&&B>=-.425&&B<-.214?l:i>=.166&&i<.234&&B>=-.214&&B<-.115?U:Q).invert(t)},g.stream=function(e){return t&&s===e?t:t=multiplex([Q.stream(s=e),l.stream(e),U.stream(e)])},g.precision=function(t){return arguments.length?(Q.precision(t),l.precision(t),U.precision(t),I()):Q.precision()},g.scale=function(t){return arguments.length?(Q.scale(t),l.scale(.35*t),U.scale(t),g.translate(Q.translate())):Q.scale()},g.translate=function(t){if(!arguments.length)return Q.translate();var s=Q.scale(),F=+t[0],g=+t[1];return e=Q.translate(t).clipExtent([[F-.455*s,g-.238*s],[F+.455*s,g+.238*s]]).stream(a),B=l.translate([F-.307*s,g+.201*s]).clipExtent([[F-.425*s+epsilon$1,g+.12*s+epsilon$1],[F-.214*s-epsilon$1,g+.234*s-epsilon$1]]).stream(a),i=U.translate([F-.205*s,g+.212*s]).clipExtent([[F-.214*s+epsilon$1,g+.166*s+epsilon$1],[F-.115*s-epsilon$1,g+.234*s-epsilon$1]]).stream(a),I()},g.fitExtent=function(t,s){return fitExtent(g,t,s)},g.fitSize=function(t,s){return fitSize(g,t,s)},g.fitWidth=function(t,s){return fitWidth(g,t,s)},g.fitHeight=function(t,s){return fitHeight(g,t,s)},g.scale(1070)}function azimuthalRaw(t){return function(s,e){var B=cos$1(s),i=cos$1(e),F=t(B*i);return F===1/0?[2,0]:[F*i*sin$1(s),F*sin$1(e)]}}function azimuthalInvert(t){return function(s,e){var B=sqrt$1(s*s+e*e),i=t(B),F=sin$1(i),Q=cos$1(i);return[atan2$1(s*F,B*Q),asin$1(B&&e*F/B)]}}var azimuthalEqualAreaRaw=azimuthalRaw(function(t){return sqrt$1(2/(1+t))});function geoAzimuthalEqualArea(){return projection$1(azimuthalEqualAreaRaw).scale(124.75).clipAngle(179.999)}azimuthalEqualAreaRaw.invert=azimuthalInvert(function(t){return 2*asin$1(t/2)});var azimuthalEquidistantRaw=azimuthalRaw(function(t){return(t=acos$1(t))&&t/sin$1(t)});function geoAzimuthalEquidistant(){return projection$1(azimuthalEquidistantRaw).scale(79.4188).clipAngle(179.999)}function mercatorRaw(t,s){return[t,log$1(tan((halfPi$1+s)/2))]}function geoMercator(){return mercatorProjection(mercatorRaw).scale(961/tau$2)}function mercatorProjection(t){var s,e,B,i=projection$1(t),F=i.center,Q=i.scale,l=i.translate,U=i.clipExtent,a=null;function g(){var F=pi$2*Q(),l=i(rotation(i.rotate()).invert([0,0]));return U(null==a?[[l[0]-F,l[1]-F],[l[0]+F,l[1]+F]]:t===mercatorRaw?[[Math.max(l[0]-F,a),s],[Math.min(l[0]+F,e),B]]:[[a,Math.max(l[1]-F,s)],[e,Math.min(l[1]+F,B)]])}return i.scale=function(t){return arguments.length?(Q(t),g()):Q()},i.translate=function(t){return arguments.length?(l(t),g()):l()},i.center=function(t){return arguments.length?(F(t),g()):F()},i.clipExtent=function(t){return arguments.length?(null==t?a=s=e=B=null:(a=+t[0][0],s=+t[0][1],e=+t[1][0],B=+t[1][1]),g()):null==a?null:[[a,s],[e,B]]},g()}function tany(t){return tan((halfPi$1+t)/2)}function conicConformalRaw(t,s){var e=cos$1(t),B=t===s?sin$1(t):log$1(e/cos$1(s))/log$1(tany(s)/tany(t)),i=e*pow$1(tany(t),B)/B;if(!B)return mercatorRaw;function F(t,s){i>0?s<-halfPi$1+epsilon$1&&(s=-halfPi$1+epsilon$1):s>halfPi$1-epsilon$1&&(s=halfPi$1-epsilon$1);var e=i/pow$1(tany(s),B);return[e*sin$1(B*t),i-e*cos$1(B*t)]}return F.invert=function(t,s){var e=i-s,F=sign$1(B)*sqrt$1(t*t+e*e),Q=atan2$1(t,abs$1(e))*sign$1(e);return e*B<0&&(Q-=pi$2*sign$1(t)*sign$1(e)),[Q/B,2*atan(pow$1(i/F,1/B))-halfPi$1]},F}function geoConicConformal(){return conicProjection$1(conicConformalRaw).scale(109.5).parallels([30,30])}function equirectangularRaw(t,s){return[t,s]}function geoEquirectangular(){return projection$1(equirectangularRaw).scale(152.63)}function conicEquidistantRaw(t,s){var e=cos$1(t),B=t===s?sin$1(t):(e-cos$1(s))/(s-t),i=e/B+t;if(abs$1(B)<epsilon$1)return equirectangularRaw;function F(t,s){var e=i-s,F=B*t;return[e*sin$1(F),i-e*cos$1(F)]}return F.invert=function(t,s){var e=i-s,F=atan2$1(t,abs$1(e))*sign$1(e);return e*B<0&&(F-=pi$2*sign$1(t)*sign$1(e)),[F/B,i-sign$1(B)*sqrt$1(t*t+e*e)]},F}function geoConicEquidistant(){return conicProjection$1(conicEquidistantRaw).scale(131.154).center([0,13.9389])}azimuthalEquidistantRaw.invert=azimuthalInvert(function(t){return t}),mercatorRaw.invert=function(t,s){return[t,2*atan(exp(s))-halfPi$1]},equirectangularRaw.invert=equirectangularRaw;var A1=1.340264,A2=-.081106,A3=893e-6,A4=.003796,M=sqrt$1(3)/2,iterations=12;function equalEarthRaw(t,s){var e=asin$1(M*sin$1(s)),B=e*e,i=B*B*B;return[t*cos$1(e)/(M*(A1+3*A2*B+i*(7*A3+9*A4*B))),e*(A1+A2*B+i*(A3+A4*B))]}function geoEqualEarth(){return projection$1(equalEarthRaw).scale(177.158)}function gnomonicRaw(t,s){var e=cos$1(s),B=cos$1(t)*e;return[e*sin$1(t)/B,sin$1(s)/B]}function geoGnomonic(){return projection$1(gnomonicRaw).scale(144.049).clipAngle(60)}function identity$5(){var t,s,e,B,i,F,Q,l=1,U=0,a=0,g=1,I=1,c=0,n=null,r=1,o=1,d=transformer$2({point:function(t,s){var e=u([t,s]);this.stream.point(e[0],e[1])}}),C=identity$6;function b(){return r=l*g,o=l*I,F=Q=null,u}function u(e){var B=e[0]*r,i=e[1]*o;if(c){var F=i*t-B*s;B=B*t+i*s,i=F}return[B+U,i+a]}return u.invert=function(e){var B=e[0]-U,i=e[1]-a;if(c){var F=i*t+B*s;B=B*t-i*s,i=F}return[B/r,i/o]},u.stream=function(t){return F&&Q===t?F:F=d(C(Q=t))},u.postclip=function(t){return arguments.length?(C=t,n=e=B=i=null,b()):C},u.clipExtent=function(t){return arguments.length?(C=null==t?(n=e=B=i=null,identity$6):clipRectangle(n=+t[0][0],e=+t[0][1],B=+t[1][0],i=+t[1][1]),b()):null==n?null:[[n,e],[B,i]]},u.scale=function(t){return arguments.length?(l=+t,b()):l},u.translate=function(t){return arguments.length?(U=+t[0],a=+t[1],b()):[U,a]},u.angle=function(e){return arguments.length?(s=sin$1(c=e%360*radians$1),t=cos$1(c),b()):c*degrees},u.reflectX=function(t){return arguments.length?(g=t?-1:1,b()):g<0},u.reflectY=function(t){return arguments.length?(I=t?-1:1,b()):I<0},u.fitExtent=function(t,s){return fitExtent(u,t,s)},u.fitSize=function(t,s){return fitSize(u,t,s)},u.fitWidth=function(t,s){return fitWidth(u,t,s)},u.fitHeight=function(t,s){return fitHeight(u,t,s)},u}function orthographicRaw(t,s){return[cos$1(s)*sin$1(t),sin$1(s)]}function geoOrthographic(){return projection$1(orthographicRaw).scale(249.5).clipAngle(90+epsilon$1)}function stereographicRaw(t,s){var e=cos$1(s),B=1+cos$1(t)*e;return[e*sin$1(t)/B,sin$1(s)/B]}function geoStereographic(){return projection$1(stereographicRaw).scale(250).clipAngle(142)}function transverseMercatorRaw(t,s){return[log$1(tan((halfPi$1+s)/2)),-t]}function geoTransverseMercator(){var t=mercatorProjection(transverseMercatorRaw),s=t.center,e=t.rotate;return t.center=function(t){return arguments.length?s([-t[1],t[0]]):[(t=s())[1],-t[0]]},t.rotate=function(t){return arguments.length?e([t[0],t[1],t.length>2?t[2]+90:90]):[(t=e())[0],t[1],t[2]-90]},e([0,0,90]).scale(159.155)}equalEarthRaw.invert=function(t,s){for(var e,B=s,i=B*B,F=i*i*i,Q=0;Q<iterations&&(F=(i=(B-=e=(B*(A1+A2*i+F*(A3+A4*i))-s)/(A1+3*A2*i+F*(7*A3+9*A4*i)))*B)*i*i,!(abs$1(e)<epsilon2));++Q);return[M*t*(A1+3*A2*i+F*(7*A3+9*A4*i))/cos$1(B),asin$1(sin$1(B)/M)]},gnomonicRaw.invert=azimuthalInvert(atan),orthographicRaw.invert=azimuthalInvert(asin$1),stereographicRaw.invert=azimuthalInvert(function(t){return 2*atan(t)}),transverseMercatorRaw.invert=function(t,s){return[-s,2*atan(exp(t))-halfPi$1]};var defaultSource=Math.random,uniform=function t(s){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,1===arguments.length?(e=t,t=0):e-=t,function(){return s()*e+t}}return e.source=t,e}(defaultSource),normal=function t(s){function e(t,e){var B,i;return t=null==t?0:+t,e=null==e?1:+e,function(){var F;if(null!=B)F=B,B=null;else do{B=2*s()-1,F=2*s()-1,i=B*B+F*F}while(!i||i>1);return t+e*F*Math.sqrt(-2*Math.log(i)/i)}}return e.source=t,e}(defaultSource);const mul=1664525,inc=1013904223,eps=1/4294967296;function lcg(t=Math.random()){let s=0|(0<=t&&t<1?t/eps:Math.abs(t));return()=>(s=mul*s+inc|0,eps*(s>>>0))}function initRange(t,s){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(s).domain(t)}return this}function initInterpolator(t,s){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof s?this.interpolator(s):this.range(s)}return this}const implicit=Symbol("implicit");function ordinal(){var t=new InternMap,s=[],e=[],B=implicit;function i(i){let F=t.get(i);if(void 0===F){if(B!==implicit)return B;t.set(i,F=s.push(i)-1)}return e[F%e.length]}return i.domain=function(e){if(!arguments.length)return s.slice();s=[],t=new InternMap;for(const B of e)t.has(B)||t.set(B,s.push(B)-1);return i},i.range=function(t){return arguments.length?(e=Array.from(t),i):e.slice()},i.unknown=function(t){return arguments.length?(B=t,i):B},i.copy=function(){return ordinal(s,e).unknown(B)},initRange.apply(i,arguments),i}function band(){var t,s,e=ordinal().unknown(void 0),B=e.domain,i=e.range,F=0,Q=1,l=!1,U=0,a=0,g=.5;function I(){var e=B().length,I=Q<F,c=I?Q:F,n=I?F:Q;t=(n-c)/Math.max(1,e-U+2*a),l&&(t=Math.floor(t)),c+=(n-c-t*(e-U))*g,s=t*(1-U),l&&(c=Math.round(c),s=Math.round(s));var r=range$1(e).map(function(s){return c+t*s});return i(I?r.reverse():r)}return delete e.unknown,e.domain=function(t){return arguments.length?(B(t),I()):B()},e.range=function(t){return arguments.length?([F,Q]=t,F=+F,Q=+Q,I()):[F,Q]},e.rangeRound=function(t){return[F,Q]=t,F=+F,Q=+Q,l=!0,I()},e.bandwidth=function(){return s},e.step=function(){return t},e.round=function(t){return arguments.length?(l=!!t,I()):l},e.padding=function(t){return arguments.length?(U=Math.min(1,a=+t),I()):U},e.paddingInner=function(t){return arguments.length?(U=Math.min(1,t),I()):U},e.paddingOuter=function(t){return arguments.length?(a=+t,I()):a},e.align=function(t){return arguments.length?(g=Math.max(0,Math.min(1,t)),I()):g},e.copy=function(){return band(B(),[F,Q]).round(l).paddingInner(U).paddingOuter(a).align(g)},initRange.apply(I(),arguments)}function pointish(t){var s=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return pointish(s())},t}function point$5(){return pointish(band.apply(null,arguments).paddingInner(1))}function constants(t){return function(){return t}}function number$2(t){return+t}var unit$1=[0,1];function identity$4(t){return t}function normalize(t,s){return(s-=t=+t)?function(e){return(e-t)/s}:constants(isNaN(s)?NaN:.5)}function clamper(t,s){var e;return t>s&&(e=t,t=s,s=e),function(e){return Math.max(t,Math.min(s,e))}}function bimap(t,s,e){var B=t[0],i=t[1],F=s[0],Q=s[1];return i<B?(B=normalize(i,B),F=e(Q,F)):(B=normalize(B,i),F=e(F,Q)),function(t){return F(B(t))}}function polymap(t,s,e){var B=Math.min(t.length,s.length)-1,i=new Array(B),F=new Array(B),Q=-1;for(t[B]<t[0]&&(t=t.slice().reverse(),s=s.slice().reverse());++Q<B;)i[Q]=normalize(t[Q],t[Q+1]),F[Q]=e(s[Q],s[Q+1]);return function(s){var e=bisectRight(t,s,1,B)-1;return F[e](i[e](s))}}function copy$1(t,s){return s.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function transformer$1(){var t,s,e,B,i,F,Q=unit$1,l=unit$1,U=interpolate$1,a=identity$4;function g(){var t=Math.min(Q.length,l.length);return a!==identity$4&&(a=clamper(Q[0],Q[t-1])),B=t>2?polymap:bimap,i=F=null,I}function I(s){return null==s||isNaN(s=+s)?e:(i||(i=B(Q.map(t),l,U)))(t(a(s)))}return I.invert=function(e){return a(s((F||(F=B(l,Q.map(t),interpolateNumber)))(e)))},I.domain=function(t){return arguments.length?(Q=Array.from(t,number$2),g()):Q.slice()},I.range=function(t){return arguments.length?(l=Array.from(t),g()):l.slice()},I.rangeRound=function(t){return l=Array.from(t),U=interpolateRound,g()},I.clamp=function(t){return arguments.length?(a=!!t||identity$4,g()):a!==identity$4},I.interpolate=function(t){return arguments.length?(U=t,g()):U},I.unknown=function(t){return arguments.length?(e=t,I):e},function(e,B){return t=e,s=B,g()}}function continuous(){return transformer$1()(identity$4,identity$4)}function tickFormat(t,s,e,B){var i,F=tickStep(t,s,e);switch((B=formatSpecifier(null==B?",f":B)).type){case"s":var Q=Math.max(Math.abs(t),Math.abs(s));return null!=B.precision||isNaN(i=precisionPrefix(F,Q))||(B.precision=i),formatPrefix(B,Q);case"":case"e":case"g":case"p":case"r":null!=B.precision||isNaN(i=precisionRound(F,Math.max(Math.abs(t),Math.abs(s))))||(B.precision=i-("e"===B.type));break;case"f":case"%":null!=B.precision||isNaN(i=precisionFixed(F))||(B.precision=i-2*("%"===B.type))}return format$1(B)}function linearish(t){var s=t.domain;return t.ticks=function(t){var e=s();return ticks(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){var B=s();return tickFormat(B[0],B[B.length-1],null==t?10:t,e)},t.nice=function(e){null==e&&(e=10);var B,i,F=s(),Q=0,l=F.length-1,U=F[Q],a=F[l],g=10;for(a<U&&(i=U,U=a,a=i,i=Q,Q=l,l=i);g-- >0;){if((i=tickIncrement(U,a,e))===B)return F[Q]=U,F[l]=a,s(F);if(i>0)U=Math.floor(U/i)*i,a=Math.ceil(a/i)*i;else{if(!(i<0))break;U=Math.ceil(U*i)/i,a=Math.floor(a*i)/i}B=i}return t},t}function linear(){var t=continuous();return t.copy=function(){return copy$1(t,linear())},initRange.apply(t,arguments),linearish(t)}function identity$3(t){var s;function e(t){return null==t||isNaN(t=+t)?s:t}return e.invert=e,e.domain=e.range=function(s){return arguments.length?(t=Array.from(s,number$2),e):t.slice()},e.unknown=function(t){return arguments.length?(s=t,e):s},e.copy=function(){return identity$3(t).unknown(s)},t=arguments.length?Array.from(t,number$2):[0,1],linearish(e)}function nice(t,s){var e,B=0,i=(t=t.slice()).length-1,F=t[B],Q=t[i];return Q<F&&(e=B,B=i,i=e,e=F,F=Q,Q=e),t[B]=s.floor(F),t[i]=s.ceil(Q),t}function transformLog$1(t){return Math.log(t)}function transformExp(t){return Math.exp(t)}function transformLogn(t){return-Math.log(-t)}function transformExpn(t){return-Math.exp(-t)}function pow10(t){return isFinite(t)?+("1e"+t):t<0?0:t}function powp(t){return 10===t?pow10:t===Math.E?Math.exp:s=>Math.pow(t,s)}function logp(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),s=>Math.log(s)/t)}function reflect(t){return(s,e)=>-t(-s,e)}function loggish(t){const s=t(transformLog$1,transformExp),e=s.domain;let B,i,F=10;function Q(){return B=logp(F),i=powp(F),e()[0]<0?(B=reflect(B),i=reflect(i),t(transformLogn,transformExpn)):t(transformLog$1,transformExp),s}return s.base=function(t){return arguments.length?(F=+t,Q()):F},s.domain=function(t){return arguments.length?(e(t),Q()):e()},s.ticks=t=>{const s=e();let Q=s[0],l=s[s.length-1];const U=l<Q;U&&([Q,l]=[l,Q]);let a,g,I=B(Q),c=B(l);const n=null==t?10:+t;let r=[];if(!(F%1)&&c-I<n){if(I=Math.floor(I),c=Math.ceil(c),Q>0){for(;I<=c;++I)for(a=1;a<F;++a)if(g=I<0?a/i(-I):a*i(I),!(g<Q)){if(g>l)break;r.push(g)}}else for(;I<=c;++I)for(a=F-1;a>=1;--a)if(g=I>0?a/i(-I):a*i(I),!(g<Q)){if(g>l)break;r.push(g)}2*r.length<n&&(r=ticks(Q,l,n))}else r=ticks(I,c,Math.min(c-I,n)).map(i);return U?r.reverse():r},s.tickFormat=(t,e)=>{if(null==t&&(t=10),null==e&&(e=10===F?"s":","),"function"!=typeof e&&(F%1||null!=(e=formatSpecifier(e)).precision||(e.trim=!0),e=format$1(e)),t===1/0)return e;const Q=Math.max(1,F*t/s.ticks().length);return t=>{let s=t/i(Math.round(B(t)));return s*F<F-.5&&(s*=F),s<=Q?e(t):""}},s.nice=()=>e(nice(e(),{floor:t=>i(Math.floor(B(t))),ceil:t=>i(Math.ceil(B(t)))})),s}function log(){const t=loggish(transformer$1()).domain([1,10]);return t.copy=()=>copy$1(t,log()).base(t.base()),initRange.apply(t,arguments),t}function transformSymlog$1(t){return function(s){return Math.sign(s)*Math.log1p(Math.abs(s/t))}}function transformSymexp(t){return function(s){return Math.sign(s)*Math.expm1(Math.abs(s))*t}}function symlogish(t){var s=1,e=t(transformSymlog$1(s),transformSymexp(s));return e.constant=function(e){return arguments.length?t(transformSymlog$1(s=+e),transformSymexp(s)):s},linearish(e)}function symlog(){var t=symlogish(transformer$1());return t.copy=function(){return copy$1(t,symlog()).constant(t.constant())},initRange.apply(t,arguments)}function transformPow$1(t){return function(s){return s<0?-Math.pow(-s,t):Math.pow(s,t)}}function transformSqrt$1(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function transformSquare(t){return t<0?-t*t:t*t}function powish(t){var s=t(identity$4,identity$4),e=1;return s.exponent=function(s){return arguments.length?1===(e=+s)?t(identity$4,identity$4):.5===e?t(transformSqrt$1,transformSquare):t(transformPow$1(e),transformPow$1(1/e)):e},linearish(s)}function pow(){var t=powish(transformer$1());return t.copy=function(){return copy$1(t,pow()).exponent(t.exponent())},initRange.apply(t,arguments),t}function quantile(){var t,s=[],e=[],B=[];function i(){var t=0,i=Math.max(1,e.length);for(B=new Array(i-1);++t<i;)B[t-1]=quantileSorted(s,t/i);return F}function F(s){return null==s||isNaN(s=+s)?t:e[bisectRight(B,s)]}return F.invertExtent=function(t){var i=e.indexOf(t);return i<0?[NaN,NaN]:[i>0?B[i-1]:s[0],i<B.length?B[i]:s[s.length-1]]},F.domain=function(t){if(!arguments.length)return s.slice();s=[];for(let e of t)null==e||isNaN(e=+e)||s.push(e);return s.sort(ascending$2),i()},F.range=function(t){return arguments.length?(e=Array.from(t),i()):e.slice()},F.unknown=function(s){return arguments.length?(t=s,F):t},F.quantiles=function(){return B.slice()},F.copy=function(){return quantile().domain(s).range(e).unknown(t)},initRange.apply(F,arguments)}function threshold(){var t,s=[.5],e=[0,1],B=1;function i(i){return null!=i&&i<=i?e[bisectRight(s,i,0,B)]:t}return i.domain=function(t){return arguments.length?(s=Array.from(t),B=Math.min(s.length,e.length-1),i):s.slice()},i.range=function(t){return arguments.length?(e=Array.from(t),B=Math.min(s.length,e.length-1),i):e.slice()},i.invertExtent=function(t){var B=e.indexOf(t);return[s[B-1],s[B]]},i.unknown=function(s){return arguments.length?(t=s,i):t},i.copy=function(){return threshold().domain(s).range(e).unknown(t)},initRange.apply(i,arguments)}const t0=new Date,t1=new Date;function timeInterval$1(t,s,e,B){function i(s){return t(s=0===arguments.length?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=e=>(t(e=new Date(e-1)),s(e,1),t(e),e),i.round=t=>{const s=i(t),e=i.ceil(t);return t-s<e-t?s:e},i.offset=(t,e)=>(s(t=new Date(+t),null==e?1:Math.floor(e)),t),i.range=(e,B,F)=>{const Q=[];if(e=i.ceil(e),F=null==F?1:Math.floor(F),!(e<B&&F>0))return Q;let l;do{Q.push(l=new Date(+e)),s(e,F),t(e)}while(l<e&&e<B);return Q},i.filter=e=>timeInterval$1(s=>{if(s>=s)for(;t(s),!e(s);)s.setTime(s-1)},(t,B)=>{if(t>=t)if(B<0)for(;++B<=0;)for(;s(t,-1),!e(t););else for(;--B>=0;)for(;s(t,1),!e(t););}),e&&(i.count=(s,B)=>(t0.setTime(+s),t1.setTime(+B),t(t0),t(t1),Math.floor(e(t0,t1))),i.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(B?s=>B(s)%t===0:s=>i.count(0,s)%t===0):i:null)),i}const millisecond=timeInterval$1(()=>{},(t,s)=>{t.setTime(+t+s)},(t,s)=>s-t);millisecond.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?timeInterval$1(s=>{s.setTime(Math.floor(s/t)*t)},(s,e)=>{s.setTime(+s+e*t)},(s,e)=>(e-s)/t):millisecond:null),millisecond.range;const durationSecond$1=1e3,durationMinute$1=6e4,durationHour$1=36e5,durationDay$1=864e5,durationWeek$1=6048e5,durationMonth$1=2592e6,durationYear$1=31536e6,second$1=timeInterval$1(t=>{t.setTime(t-t.getMilliseconds())},(t,s)=>{t.setTime(+t+1e3*s)},(t,s)=>(s-t)/1e3,t=>t.getUTCSeconds());second$1.range;const timeMinute=timeInterval$1(t=>{t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())},(t,s)=>{t.setTime(+t+6e4*s)},(t,s)=>(s-t)/6e4,t=>t.getMinutes());timeMinute.range;const utcMinute=timeInterval$1(t=>{t.setUTCSeconds(0,0)},(t,s)=>{t.setTime(+t+6e4*s)},(t,s)=>(s-t)/6e4,t=>t.getUTCMinutes());utcMinute.range;const timeHour=timeInterval$1(t=>{t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())},(t,s)=>{t.setTime(+t+36e5*s)},(t,s)=>(s-t)/36e5,t=>t.getHours());timeHour.range;const utcHour=timeInterval$1(t=>{t.setUTCMinutes(0,0,0)},(t,s)=>{t.setTime(+t+36e5*s)},(t,s)=>(s-t)/36e5,t=>t.getUTCHours());utcHour.range;const timeDay=timeInterval$1(t=>t.setHours(0,0,0,0),(t,s)=>t.setDate(t.getDate()+s),(t,s)=>(s-t-6e4*(s.getTimezoneOffset()-t.getTimezoneOffset()))/864e5,t=>t.getDate()-1);timeDay.range;const utcDay=timeInterval$1(t=>{t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCDate(t.getUTCDate()+s)},(t,s)=>(s-t)/864e5,t=>t.getUTCDate()-1);utcDay.range;const unixDay=timeInterval$1(t=>{t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCDate(t.getUTCDate()+s)},(t,s)=>(s-t)/864e5,t=>Math.floor(t/864e5));function timeWeekday(t){return timeInterval$1(s=>{s.setDate(s.getDate()-(s.getDay()+7-t)%7),s.setHours(0,0,0,0)},(t,s)=>{t.setDate(t.getDate()+7*s)},(t,s)=>(s-t-6e4*(s.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5)}unixDay.range;const timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6);function utcWeekday(t){return timeInterval$1(s=>{s.setUTCDate(s.getUTCDate()-(s.getUTCDay()+7-t)%7),s.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCDate(t.getUTCDate()+7*s)},(t,s)=>(s-t)/6048e5)}timeSunday.range,timeMonday.range,timeTuesday.range,timeWednesday.range,timeThursday.range,timeFriday.range,timeSaturday.range;const utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6);utcSunday.range,utcMonday.range,utcTuesday.range,utcWednesday.range,utcThursday.range,utcFriday.range,utcSaturday.range;const timeMonth=timeInterval$1(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,s)=>{t.setMonth(t.getMonth()+s)},(t,s)=>s.getMonth()-t.getMonth()+12*(s.getFullYear()-t.getFullYear()),t=>t.getMonth());timeMonth.range;const utcMonth=timeInterval$1(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCMonth(t.getUTCMonth()+s)},(t,s)=>s.getUTCMonth()-t.getUTCMonth()+12*(s.getUTCFullYear()-t.getUTCFullYear()),t=>t.getUTCMonth());utcMonth.range;const timeYear=timeInterval$1(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,s)=>{t.setFullYear(t.getFullYear()+s)},(t,s)=>s.getFullYear()-t.getFullYear(),t=>t.getFullYear());timeYear.every=t=>isFinite(t=Math.floor(t))&&t>0?timeInterval$1(s=>{s.setFullYear(Math.floor(s.getFullYear()/t)*t),s.setMonth(0,1),s.setHours(0,0,0,0)},(s,e)=>{s.setFullYear(s.getFullYear()+e*t)}):null,timeYear.range;const utcYear=timeInterval$1(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCFullYear(t.getUTCFullYear()+s)},(t,s)=>s.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());function ticker(t,s,e,B,i,F){const Q=[[second$1,1,1e3],[second$1,5,5e3],[second$1,15,15e3],[second$1,30,3e4],[F,1,6e4],[F,5,3e5],[F,15,9e5],[F,30,18e5],[i,1,36e5],[i,3,108e5],[i,6,216e5],[i,12,432e5],[B,1,864e5],[B,2,1728e5],[e,1,6048e5],[s,1,2592e6],[s,3,7776e6],[t,1,31536e6]];function l(s,e,B){const i=Math.abs(e-s)/B,F=bisector(([,,t])=>t).right(Q,i);if(F===Q.length)return t.every(tickStep(s/31536e6,e/31536e6,B));if(0===F)return millisecond.every(Math.max(tickStep(s,e,B),1));const[l,U]=Q[i/Q[F-1][2]<Q[F][2]/i?F-1:F];return l.every(U)}return[function(t,s,e){const B=s<t;B&&([t,s]=[s,t]);const i=e&&"function"==typeof e.range?e:l(t,s,e),F=i?i.range(t,+s+1):[];return B?F.reverse():F},l]}utcYear.every=t=>isFinite(t=Math.floor(t))&&t>0?timeInterval$1(s=>{s.setUTCFullYear(Math.floor(s.getUTCFullYear()/t)*t),s.setUTCMonth(0,1),s.setUTCHours(0,0,0,0)},(s,e)=>{s.setUTCFullYear(s.getUTCFullYear()+e*t)}):null,utcYear.range;const[utcTicks,utcTickInterval]=ticker(utcYear,utcMonth,utcSunday,unixDay,utcHour,utcMinute),[timeTicks,timeTickInterval]=ticker(timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute);function localDate(t){if(0<=t.y&&t.y<100){var s=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return s.setFullYear(t.y),s}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function utcDate(t){if(0<=t.y&&t.y<100){var s=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return s.setUTCFullYear(t.y),s}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function newDate(t,s,e){return{y:t,m:s,d:e,H:0,M:0,S:0,L:0}}function formatLocale(t){var s=t.dateTime,e=t.date,B=t.time,i=t.periods,F=t.days,Q=t.shortDays,l=t.months,U=t.shortMonths,a=formatRe(i),g=formatLookup(i),I=formatRe(F),c=formatLookup(F),n=formatRe(Q),r=formatLookup(Q),o=formatRe(l),d=formatLookup(l),C=formatRe(U),b=formatLookup(U),u={a:function(t){return Q[t.getDay()]},A:function(t){return F[t.getDay()]},b:function(t){return U[t.getMonth()]},B:function(t){return l[t.getMonth()]},c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear$1,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},h={a:function(t){return Q[t.getUTCDay()]},A:function(t){return F[t.getUTCDay()]},b:function(t){return U[t.getUTCMonth()]},B:function(t){return l[t.getUTCMonth()]},c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},y={a:function(t,s,e){var B=n.exec(s.slice(e));return B?(t.w=r.get(B[0].toLowerCase()),e+B[0].length):-1},A:function(t,s,e){var B=I.exec(s.slice(e));return B?(t.w=c.get(B[0].toLowerCase()),e+B[0].length):-1},b:function(t,s,e){var B=C.exec(s.slice(e));return B?(t.m=b.get(B[0].toLowerCase()),e+B[0].length):-1},B:function(t,s,e){var B=o.exec(s.slice(e));return B?(t.m=d.get(B[0].toLowerCase()),e+B[0].length):-1},c:function(t,e,B){return G(t,s,e,B)},d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:function(t,s,e){var B=a.exec(s.slice(e));return B?(t.p=g.get(B[0].toLowerCase()),e+B[0].length):-1},q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:function(t,s,B){return G(t,e,s,B)},X:function(t,s,e){return G(t,B,s,e)},y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};function x(t,s){return function(e){var B,i,F,Q=[],l=-1,U=0,a=t.length;for(e instanceof Date||(e=new Date(+e));++l<a;)37===t.charCodeAt(l)&&(Q.push(t.slice(U,l)),null!=(i=pads[B=t.charAt(++l)])?B=t.charAt(++l):i="e"===B?" ":"0",(F=s[B])&&(B=F(e,i)),Q.push(B),U=l+1);return Q.push(t.slice(U,l)),Q.join("")}}function A(t,s){return function(e){var B,i,F=newDate(1900,void 0,1);if(G(F,t,e+="",0)!=e.length)return null;if("Q"in F)return new Date(F.Q);if("s"in F)return new Date(1e3*F.s+("L"in F?F.L:0));if(s&&!("Z"in F)&&(F.Z=0),"p"in F&&(F.H=F.H%12+12*F.p),void 0===F.m&&(F.m="q"in F?F.q:0),"V"in F){if(F.V<1||F.V>53)return null;"w"in F||(F.w=1),"Z"in F?(i=(B=utcDate(newDate(F.y,0,1))).getUTCDay(),B=i>4||0===i?utcMonday.ceil(B):utcMonday(B),B=utcDay.offset(B,7*(F.V-1)),F.y=B.getUTCFullYear(),F.m=B.getUTCMonth(),F.d=B.getUTCDate()+(F.w+6)%7):(i=(B=localDate(newDate(F.y,0,1))).getDay(),B=i>4||0===i?timeMonday.ceil(B):timeMonday(B),B=timeDay.offset(B,7*(F.V-1)),F.y=B.getFullYear(),F.m=B.getMonth(),F.d=B.getDate()+(F.w+6)%7)}else("W"in F||"U"in F)&&("w"in F||(F.w="u"in F?F.u%7:"W"in F?1:0),i="Z"in F?utcDate(newDate(F.y,0,1)).getUTCDay():localDate(newDate(F.y,0,1)).getDay(),F.m=0,F.d="W"in F?(F.w+6)%7+7*F.W-(i+5)%7:F.w+7*F.U-(i+6)%7);return"Z"in F?(F.H+=F.Z/100|0,F.M+=F.Z%100,utcDate(F)):localDate(F)}}function G(t,s,e,B){for(var i,F,Q=0,l=s.length,U=e.length;Q<l;){if(B>=U)return-1;if(37===(i=s.charCodeAt(Q++))){if(i=s.charAt(Q++),!(F=y[i in pads?s.charAt(Q++):i])||(B=F(t,e,B))<0)return-1}else if(i!=e.charCodeAt(B++))return-1}return B}return u.x=x(e,u),u.X=x(B,u),u.c=x(s,u),h.x=x(e,h),h.X=x(B,h),h.c=x(s,h),{format:function(t){var s=x(t+="",u);return s.toString=function(){return t},s},parse:function(t){var s=A(t+="",!1);return s.toString=function(){return t},s},utcFormat:function(t){var s=x(t+="",h);return s.toString=function(){return t},s},utcParse:function(t){var s=A(t+="",!0);return s.toString=function(){return t},s}}}var locale,timeFormat,utcFormat,pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad$1(t,s,e){var B=t<0?"-":"",i=(B?-t:t)+"",F=i.length;return B+(F<e?new Array(e-F+1).join(s)+i:i)}function requote(t){return t.replace(requoteRe,"\\$&")}function formatRe(t){return new RegExp("^(?:"+t.map(requote).join("|")+")","i")}function formatLookup(t){return new Map(t.map((t,s)=>[t.toLowerCase(),s]))}function parseWeekdayNumberSunday(t,s,e){var B=numberRe.exec(s.slice(e,e+1));return B?(t.w=+B[0],e+B[0].length):-1}function parseWeekdayNumberMonday(t,s,e){var B=numberRe.exec(s.slice(e,e+1));return B?(t.u=+B[0],e+B[0].length):-1}function parseWeekNumberSunday(t,s,e){var B=numberRe.exec(s.slice(e,e+2));return B?(t.U=+B[0],e+B[0].length):-1}function parseWeekNumberISO(t,s,e){var B=numberRe.exec(s.slice(e,e+2));return B?(t.V=+B[0],e+B[0].length):-1}function parseWeekNumberMonday(t,s,e){var B=numberRe.exec(s.slice(e,e+2));return B?(t.W=+B[0],e+B[0].length):-1}function parseFullYear(t,s,e){var B=numberRe.exec(s.slice(e,e+4));return B?(t.y=+B[0],e+B[0].length):-1}function parseYear(t,s,e){var B=numberRe.exec(s.slice(e,e+2));return B?(t.y=+B[0]+(+B[0]>68?1900:2e3),e+B[0].length):-1}function parseZone(t,s,e){var B=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(s.slice(e,e+6));return B?(t.Z=B[1]?0:-(B[2]+(B[3]||"00")),e+B[0].length):-1}function parseQuarter(t,s,e){var B=numberRe.exec(s.slice(e,e+1));return B?(t.q=3*B[0]-3,e+B[0].length):-1}function parseMonthNumber(t,s,e){var B=numberRe.exec(s.slice(e,e+2));return B?(t.m=B[0]-1,e+B[0].length):-1}function parseDayOfMonth(t,s,e){var B=numberRe.exec(s.slice(e,e+2));return B?(t.d=+B[0],e+B[0].length):-1}function parseDayOfYear(t,s,e){var B=numberRe.exec(s.slice(e,e+3));return B?(t.m=0,t.d=+B[0],e+B[0].length):-1}function parseHour24(t,s,e){var B=numberRe.exec(s.slice(e,e+2));return B?(t.H=+B[0],e+B[0].length):-1}function parseMinutes(t,s,e){var B=numberRe.exec(s.slice(e,e+2));return B?(t.M=+B[0],e+B[0].length):-1}function parseSeconds(t,s,e){var B=numberRe.exec(s.slice(e,e+2));return B?(t.S=+B[0],e+B[0].length):-1}function parseMilliseconds(t,s,e){var B=numberRe.exec(s.slice(e,e+3));return B?(t.L=+B[0],e+B[0].length):-1}function parseMicroseconds(t,s,e){var B=numberRe.exec(s.slice(e,e+6));return B?(t.L=Math.floor(B[0]/1e3),e+B[0].length):-1}function parseLiteralPercent(t,s,e){var B=percentRe.exec(s.slice(e,e+1));return B?e+B[0].length:-1}function parseUnixTimestamp(t,s,e){var B=numberRe.exec(s.slice(e));return B?(t.Q=+B[0],e+B[0].length):-1}function parseUnixTimestampSeconds(t,s,e){var B=numberRe.exec(s.slice(e));return B?(t.s=+B[0],e+B[0].length):-1}function formatDayOfMonth(t,s){return pad$1(t.getDate(),s,2)}function formatHour24(t,s){return pad$1(t.getHours(),s,2)}function formatHour12(t,s){return pad$1(t.getHours()%12||12,s,2)}function formatDayOfYear(t,s){return pad$1(1+timeDay.count(timeYear(t),t),s,3)}function formatMilliseconds(t,s){return pad$1(t.getMilliseconds(),s,3)}function formatMicroseconds(t,s){return formatMilliseconds(t,s)+"000"}function formatMonthNumber(t,s){return pad$1(t.getMonth()+1,s,2)}function formatMinutes(t,s){return pad$1(t.getMinutes(),s,2)}function formatSeconds(t,s){return pad$1(t.getSeconds(),s,2)}function formatWeekdayNumberMonday(t){var s=t.getDay();return 0===s?7:s}function formatWeekNumberSunday(t,s){return pad$1(timeSunday.count(timeYear(t)-1,t),s,2)}function dISO(t){var s=t.getDay();return s>=4||0===s?timeThursday(t):timeThursday.ceil(t)}function formatWeekNumberISO(t,s){return t=dISO(t),pad$1(timeThursday.count(timeYear(t),t)+(4===timeYear(t).getDay()),s,2)}function formatWeekdayNumberSunday(t){return t.getDay()}function formatWeekNumberMonday(t,s){return pad$1(timeMonday.count(timeYear(t)-1,t),s,2)}function formatYear$1(t,s){return pad$1(t.getFullYear()%100,s,2)}function formatYearISO(t,s){return pad$1((t=dISO(t)).getFullYear()%100,s,2)}function formatFullYear(t,s){return pad$1(t.getFullYear()%1e4,s,4)}function formatFullYearISO(t,s){var e=t.getDay();return pad$1((t=e>=4||0===e?timeThursday(t):timeThursday.ceil(t)).getFullYear()%1e4,s,4)}function formatZone(t){var s=t.getTimezoneOffset();return(s>0?"-":(s*=-1,"+"))+pad$1(s/60|0,"0",2)+pad$1(s%60,"0",2)}function formatUTCDayOfMonth(t,s){return pad$1(t.getUTCDate(),s,2)}function formatUTCHour24(t,s){return pad$1(t.getUTCHours(),s,2)}function formatUTCHour12(t,s){return pad$1(t.getUTCHours()%12||12,s,2)}function formatUTCDayOfYear(t,s){return pad$1(1+utcDay.count(utcYear(t),t),s,3)}function formatUTCMilliseconds(t,s){return pad$1(t.getUTCMilliseconds(),s,3)}function formatUTCMicroseconds(t,s){return formatUTCMilliseconds(t,s)+"000"}function formatUTCMonthNumber(t,s){return pad$1(t.getUTCMonth()+1,s,2)}function formatUTCMinutes(t,s){return pad$1(t.getUTCMinutes(),s,2)}function formatUTCSeconds(t,s){return pad$1(t.getUTCSeconds(),s,2)}function formatUTCWeekdayNumberMonday(t){var s=t.getUTCDay();return 0===s?7:s}function formatUTCWeekNumberSunday(t,s){return pad$1(utcSunday.count(utcYear(t)-1,t),s,2)}function UTCdISO(t){var s=t.getUTCDay();return s>=4||0===s?utcThursday(t):utcThursday.ceil(t)}function formatUTCWeekNumberISO(t,s){return t=UTCdISO(t),pad$1(utcThursday.count(utcYear(t),t)+(4===utcYear(t).getUTCDay()),s,2)}function formatUTCWeekdayNumberSunday(t){return t.getUTCDay()}function formatUTCWeekNumberMonday(t,s){return pad$1(utcMonday.count(utcYear(t)-1,t),s,2)}function formatUTCYear(t,s){return pad$1(t.getUTCFullYear()%100,s,2)}function formatUTCYearISO(t,s){return pad$1((t=UTCdISO(t)).getUTCFullYear()%100,s,2)}function formatUTCFullYear(t,s){return pad$1(t.getUTCFullYear()%1e4,s,4)}function formatUTCFullYearISO(t,s){var e=t.getUTCDay();return pad$1((t=e>=4||0===e?utcThursday(t):utcThursday.ceil(t)).getUTCFullYear()%1e4,s,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(t){return+t}function formatUnixTimestampSeconds(t){return Math.floor(+t/1e3)}function defaultLocale(t){return locale=formatLocale(t),timeFormat=locale.format,locale.parse,utcFormat=locale.utcFormat,locale.utcParse,locale}function date(t){return new Date(t)}function number$1(t){return t instanceof Date?+t:+new Date(+t)}function calendar(t,s,e,B,i,F,Q,l,U,a){var g=continuous(),I=g.invert,c=g.domain,n=a(".%L"),r=a(":%S"),o=a("%I:%M"),d=a("%I %p"),C=a("%a %d"),b=a("%b %d"),u=a("%B"),h=a("%Y");function y(t){return(U(t)<t?n:l(t)<t?r:Q(t)<t?o:F(t)<t?d:B(t)<t?i(t)<t?C:b:e(t)<t?u:h)(t)}return g.invert=function(t){return new Date(I(t))},g.domain=function(t){return arguments.length?c(Array.from(t,number$1)):c().map(date)},g.ticks=function(s){var e=c();return t(e[0],e[e.length-1],null==s?10:s)},g.tickFormat=function(t,s){return null==s?y:a(s)},g.nice=function(t){var e=c();return t&&"function"==typeof t.range||(t=s(e[0],e[e.length-1],null==t?10:t)),t?c(nice(e,t)):g},g.copy=function(){return copy$1(g,calendar(t,s,e,B,i,F,Q,l,U,a))},g}function time(){return initRange.apply(calendar(timeTicks,timeTickInterval,timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute,second$1,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function utcTime(){return initRange.apply(calendar(utcTicks,utcTickInterval,utcYear,utcMonth,utcSunday,utcDay,utcHour,utcMinute,second$1,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function copy(t,s){return s.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function transformer(){var t,s,e,B,i,F,Q,l=0,U=.5,a=1,g=1,I=identity$4,c=!1;function n(t){return isNaN(t=+t)?Q:(t=.5+((t=+F(t))-s)*(g*t<g*s?B:i),I(c?Math.max(0,Math.min(1,t)):t))}function r(t){return function(s){var e,B,i;return arguments.length?([e,B,i]=s,I=piecewise(t,[e,B,i]),n):[I(0),I(.5),I(1)]}}return n.domain=function(Q){return arguments.length?([l,U,a]=Q,t=F(l=+l),s=F(U=+U),e=F(a=+a),B=t===s?0:.5/(s-t),i=s===e?0:.5/(e-s),g=s<t?-1:1,n):[l,U,a]},n.clamp=function(t){return arguments.length?(c=!!t,n):c},n.interpolator=function(t){return arguments.length?(I=t,n):I},n.range=r(interpolate$1),n.rangeRound=r(interpolateRound),n.unknown=function(t){return arguments.length?(Q=t,n):Q},function(Q){return F=Q,t=Q(l),s=Q(U),e=Q(a),B=t===s?0:.5/(s-t),i=s===e?0:.5/(e-s),g=s<t?-1:1,n}}function diverging(){var t=linearish(transformer()(identity$4));return t.copy=function(){return copy(t,diverging())},initInterpolator.apply(t,arguments)}function divergingLog(){var t=loggish(transformer()).domain([.1,1,10]);return t.copy=function(){return copy(t,divergingLog()).base(t.base())},initInterpolator.apply(t,arguments)}function divergingSymlog(){var t=symlogish(transformer());return t.copy=function(){return copy(t,divergingSymlog()).constant(t.constant())},initInterpolator.apply(t,arguments)}function divergingPow(){var t=powish(transformer());return t.copy=function(){return copy(t,divergingPow()).exponent(t.exponent())},initInterpolator.apply(t,arguments)}function colors$4(t){for(var s=t.length/6|0,e=new Array(s),B=0;B<s;)e[B]="#"+t.slice(6*B,6*++B);return e}defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var schemeCategory10=colors$4("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),schemeAccent=colors$4("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),schemeDark2=colors$4("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),schemeObservable10=colors$4("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),schemePaired=colors$4("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),schemePastel1=colors$4("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),schemePastel2=colors$4("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),schemeSet1=colors$4("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),schemeSet2=colors$4("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),schemeSet3=colors$4("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),schemeTableau10=colors$4("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),ramp$1=t=>rgbBasis(t[t.length-1]),scheme$q=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(colors$4),interpolateBrBG=ramp$1(scheme$q),scheme$p=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(colors$4),interpolatePRGn=ramp$1(scheme$p),scheme$o=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(colors$4),interpolatePiYG=ramp$1(scheme$o),scheme$n=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(colors$4),interpolatePuOr=ramp$1(scheme$n),scheme$m=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(colors$4),interpolateRdBu=ramp$1(scheme$m),scheme$l=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(colors$4),interpolateRdGy=ramp$1(scheme$l),scheme$k=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(colors$4),interpolateRdYlBu=ramp$1(scheme$k),scheme$j=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(colors$4),interpolateRdYlGn=ramp$1(scheme$j),scheme$i=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(colors$4),interpolateSpectral=ramp$1(scheme$i),scheme$h=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(colors$4),interpolateBuGn=ramp$1(scheme$h),scheme$g=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(colors$4),interpolateBuPu=ramp$1(scheme$g),scheme$f=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(colors$4),interpolateGnBu=ramp$1(scheme$f),scheme$e=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(colors$4),interpolateOrRd=ramp$1(scheme$e),scheme$d=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(colors$4),interpolatePuBuGn=ramp$1(scheme$d),scheme$c=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(colors$4),interpolatePuBu=ramp$1(scheme$c),scheme$b=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(colors$4),interpolatePuRd=ramp$1(scheme$b),scheme$a=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(colors$4),interpolateRdPu=ramp$1(scheme$a),scheme$9=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(colors$4),interpolateYlGnBu=ramp$1(scheme$9),scheme$8=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(colors$4),interpolateYlGn=ramp$1(scheme$8),scheme$7=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(colors$4),interpolateYlOrBr=ramp$1(scheme$7),scheme$6=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(colors$4),interpolateYlOrRd=ramp$1(scheme$6),scheme$5=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(colors$4),interpolateBlues=ramp$1(scheme$5),scheme$4=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(colors$4),interpolateGreens=ramp$1(scheme$4),scheme$3=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(colors$4),interpolateGreys=ramp$1(scheme$3),scheme$2=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(colors$4),interpolatePurples=ramp$1(scheme$2),scheme$1=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(colors$4),interpolateReds=ramp$1(scheme$1),scheme=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(colors$4),interpolateOranges=ramp$1(scheme);function interpolateCividis(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"}var interpolateCubehelixDefault=cubehelixLong(cubehelix$1(300,.5,0),cubehelix$1(-240,.5,1)),warm=cubehelixLong(cubehelix$1(-100,.75,.35),cubehelix$1(80,1.5,.8)),cool=cubehelixLong(cubehelix$1(260,.75,.35),cubehelix$1(80,1.5,.8)),c$3=cubehelix$1();function interpolateRainbow(t){(t<0||t>1)&&(t-=Math.floor(t));var s=Math.abs(t-.5);return c$3.h=360*t-100,c$3.s=1.5-1.5*s,c$3.l=.8-.9*s,c$3+""}var c$2=rgb(),pi_1_3=Math.PI/3,pi_2_3=2*Math.PI/3;function interpolateSinebow(t){var s;return t=(.5-t)*Math.PI,c$2.r=255*(s=Math.sin(t))*s,c$2.g=255*(s=Math.sin(t+pi_1_3))*s,c$2.b=255*(s=Math.sin(t+pi_2_3))*s,c$2+""}function interpolateTurbo(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"}function ramp(t){var s=t.length;return function(e){return t[Math.max(0,Math.min(s-1,Math.floor(e*s)))]}}var interpolateViridis=ramp(colors$4("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),magma=ramp(colors$4("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),inferno=ramp(colors$4("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),plasma=ramp(colors$4("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function constant$1(t){return function(){return t}}const abs=Math.abs,atan2=Math.atan2,cos=Math.cos,max=Math.max,min=Math.min,sin=Math.sin,sqrt=Math.sqrt,epsilon=1e-12,pi$1=Math.PI,halfPi=pi$1/2,tau$1=2*pi$1;function acos(t){return t>1?0:t<-1?pi$1:Math.acos(t)}function asin(t){return t>=1?halfPi:t<=-1?-halfPi:Math.asin(t)}function withPath(t){let s=3;return t.digits=function(e){if(!arguments.length)return s;if(null==e)s=null;else{const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);s=t}return t},()=>new Path(s)}function arcInnerRadius(t){return t.innerRadius}function arcOuterRadius(t){return t.outerRadius}function arcStartAngle(t){return t.startAngle}function arcEndAngle(t){return t.endAngle}function arcPadAngle(t){return t&&t.padAngle}function intersect(t,s,e,B,i,F,Q,l){var U=e-t,a=B-s,g=Q-i,I=l-F,c=I*U-g*a;if(!(c*c<1e-12))return[t+(c=(g*(s-F)-I*(t-i))/c)*U,s+c*a]}function cornerTangents(t,s,e,B,i,F,Q){var l=t-e,U=s-B,a=(Q?F:-F)/sqrt(l*l+U*U),g=a*U,I=-a*l,c=t+g,n=s+I,r=e+g,o=B+I,d=(c+r)/2,C=(n+o)/2,b=r-c,u=o-n,h=b*b+u*u,y=i-F,x=c*o-r*n,A=(u<0?-1:1)*sqrt(max(0,y*y*h-x*x)),G=(x*u-b*A)/h,R=(-x*b-u*A)/h,L=(x*u+b*A)/h,m=(-x*b+u*A)/h,S=G-d,p=R-C,V=L-d,Z=m-C;return S*S+p*p>V*V+Z*Z&&(G=L,R=m),{cx:G,cy:R,x01:-g,y01:-I,x11:G*(i/y-1),y11:R*(i/y-1)}}function arc(){var t=arcInnerRadius,s=arcOuterRadius,e=constant$1(0),B=null,i=arcStartAngle,F=arcEndAngle,Q=arcPadAngle,l=null,U=withPath(a);function a(){var a,g,I=+t.apply(this,arguments),c=+s.apply(this,arguments),n=i.apply(this,arguments)-halfPi,r=F.apply(this,arguments)-halfPi,o=abs(r-n),d=r>n;if(l||(l=a=U()),c<I&&(g=c,c=I,I=g),c>1e-12)if(o>tau$1-1e-12)l.moveTo(c*cos(n),c*sin(n)),l.arc(0,0,c,n,r,!d),I>1e-12&&(l.moveTo(I*cos(r),I*sin(r)),l.arc(0,0,I,r,n,d));else{var C,b,u=n,h=r,y=n,x=r,A=o,G=o,R=Q.apply(this,arguments)/2,L=R>1e-12&&(B?+B.apply(this,arguments):sqrt(I*I+c*c)),m=min(abs(c-I)/2,+e.apply(this,arguments)),S=m,p=m;if(L>1e-12){var V=asin(L/I*sin(R)),Z=asin(L/c*sin(R));(A-=2*V)>1e-12?(y+=V*=d?1:-1,x-=V):(A=0,y=x=(n+r)/2),(G-=2*Z)>1e-12?(u+=Z*=d?1:-1,h-=Z):(G=0,u=h=(n+r)/2)}var E=c*cos(u),N=c*sin(u),X=I*cos(x),D=I*sin(x);if(m>1e-12){var W,H=c*cos(h),v=c*sin(h),w=I*cos(y),Y=I*sin(y);if(o<pi$1)if(W=intersect(E,N,w,Y,H,v,X,D)){var f=E-W[0],J=N-W[1],M=H-W[0],k=v-W[1],T=1/sin(acos((f*M+J*k)/(sqrt(f*f+J*J)*sqrt(M*M+k*k)))/2),z=sqrt(W[0]*W[0]+W[1]*W[1]);S=min(m,(I-z)/(T-1)),p=min(m,(c-z)/(T+1))}else S=p=0}G>1e-12?p>1e-12?(C=cornerTangents(w,Y,E,N,c,p,d),b=cornerTangents(H,v,X,D,c,p,d),l.moveTo(C.cx+C.x01,C.cy+C.y01),p<m?l.arc(C.cx,C.cy,p,atan2(C.y01,C.x01),atan2(b.y01,b.x01),!d):(l.arc(C.cx,C.cy,p,atan2(C.y01,C.x01),atan2(C.y11,C.x11),!d),l.arc(0,0,c,atan2(C.cy+C.y11,C.cx+C.x11),atan2(b.cy+b.y11,b.cx+b.x11),!d),l.arc(b.cx,b.cy,p,atan2(b.y11,b.x11),atan2(b.y01,b.x01),!d))):(l.moveTo(E,N),l.arc(0,0,c,u,h,!d)):l.moveTo(E,N),I>1e-12&&A>1e-12?S>1e-12?(C=cornerTangents(X,D,H,v,I,-S,d),b=cornerTangents(E,N,w,Y,I,-S,d),l.lineTo(C.cx+C.x01,C.cy+C.y01),S<m?l.arc(C.cx,C.cy,S,atan2(C.y01,C.x01),atan2(b.y01,b.x01),!d):(l.arc(C.cx,C.cy,S,atan2(C.y01,C.x01),atan2(C.y11,C.x11),!d),l.arc(0,0,I,atan2(C.cy+C.y11,C.cx+C.x11),atan2(b.cy+b.y11,b.cx+b.x11),d),l.arc(b.cx,b.cy,S,atan2(b.y11,b.x11),atan2(b.y01,b.x01),!d))):l.arc(0,0,I,x,y,d):l.lineTo(X,D)}else l.moveTo(0,0);if(l.closePath(),a)return l=null,a+""||null}return a.centroid=function(){var e=(+t.apply(this,arguments)+ +s.apply(this,arguments))/2,B=(+i.apply(this,arguments)+ +F.apply(this,arguments))/2-pi$1/2;return[cos(B)*e,sin(B)*e]},a.innerRadius=function(s){return arguments.length?(t="function"==typeof s?s:constant$1(+s),a):t},a.outerRadius=function(t){return arguments.length?(s="function"==typeof t?t:constant$1(+t),a):s},a.cornerRadius=function(t){return arguments.length?(e="function"==typeof t?t:constant$1(+t),a):e},a.padRadius=function(t){return arguments.length?(B=null==t?null:"function"==typeof t?t:constant$1(+t),a):B},a.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:constant$1(+t),a):i},a.endAngle=function(t){return arguments.length?(F="function"==typeof t?t:constant$1(+t),a):F},a.padAngle=function(t){return arguments.length?(Q="function"==typeof t?t:constant$1(+t),a):Q},a.context=function(t){return arguments.length?(l=null==t?null:t,a):l},a}function array(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Linear(t){this._context=t}function curveLinear(t){return new Linear(t)}function x$2(t){return t[0]}function y$1(t){return t[1]}function shapeLine(t,s){var e=constant$1(!0),B=null,i=curveLinear,F=null,Q=withPath(l);function l(l){var U,a,g,I=(l=array(l)).length,c=!1;for(null==B&&(F=i(g=Q())),U=0;U<=I;++U)!(U<I&&e(a=l[U],U,l))===c&&((c=!c)?F.lineStart():F.lineEnd()),c&&F.point(+t(a,U,l),+s(a,U,l));if(g)return F=null,g+""||null}return t="function"==typeof t?t:void 0===t?x$2:constant$1(t),s="function"==typeof s?s:void 0===s?y$1:constant$1(s),l.x=function(s){return arguments.length?(t="function"==typeof s?s:constant$1(+s),l):t},l.y=function(t){return arguments.length?(s="function"==typeof t?t:constant$1(+t),l):s},l.defined=function(t){return arguments.length?(e="function"==typeof t?t:constant$1(!!t),l):e},l.curve=function(t){return arguments.length?(i=t,null!=B&&(F=i(B)),l):i},l.context=function(t){return arguments.length?(null==t?B=F=null:F=i(B=t),l):B},l}function descending(t,s){return s<t?-1:s>t?1:s>=t?0:NaN}function identity$2(t){return t}function pie(){var t=identity$2,s=descending,e=null,B=constant$1(0),i=constant$1(tau$1),F=constant$1(0);function Q(Q){var l,U,a,g,I,c=(Q=array(Q)).length,n=0,r=new Array(c),o=new Array(c),d=+B.apply(this,arguments),C=Math.min(tau$1,Math.max(-tau$1,i.apply(this,arguments)-d)),b=Math.min(Math.abs(C)/c,F.apply(this,arguments)),u=b*(C<0?-1:1);for(l=0;l<c;++l)(I=o[r[l]=l]=+t(Q[l],l,Q))>0&&(n+=I);for(null!=s?r.sort(function(t,e){return s(o[t],o[e])}):null!=e&&r.sort(function(t,s){return e(Q[t],Q[s])}),l=0,a=n?(C-c*u)/n:0;l<c;++l,d=g)U=r[l],g=d+((I=o[U])>0?I*a:0)+u,o[U]={data:Q[U],index:l,value:I,startAngle:d,endAngle:g,padAngle:b};return o}return Q.value=function(s){return arguments.length?(t="function"==typeof s?s:constant$1(+s),Q):t},Q.sortValues=function(t){return arguments.length?(s=t,e=null,Q):s},Q.sort=function(t){return arguments.length?(e=t,s=null,Q):e},Q.startAngle=function(t){return arguments.length?(B="function"==typeof t?t:constant$1(+t),Q):B},Q.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:constant$1(+t),Q):i},Q.padAngle=function(t){return arguments.length?(F="function"==typeof t?t:constant$1(+t),Q):F},Q}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;default:this._context.lineTo(t,s)}}};class Bump{constructor(t,s){this._context=t,this._x=s}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,s,t,s):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+s)/2,t,this._y0,t,s)}this._x0=t,this._y0=s}}function bumpX(t){return new Bump(t,!0)}function bumpY(t){return new Bump(t,!1)}const sqrt3$3=sqrt(3);var symbolAsterisk={draw(t,s){const e=.59436*sqrt(s+min(s/28,.75)),B=e/2,i=B*sqrt3$3;t.moveTo(0,e),t.lineTo(0,-e),t.moveTo(-i,-B),t.lineTo(i,B),t.moveTo(-i,B),t.lineTo(i,-B)}},symbolCircle={draw(t,s){const e=sqrt(s/pi$1);t.moveTo(e,0),t.arc(0,0,e,0,tau$1)}},symbolCross={draw(t,s){const e=sqrt(s/5)/2;t.moveTo(-3*e,-e),t.lineTo(-e,-e),t.lineTo(-e,-3*e),t.lineTo(e,-3*e),t.lineTo(e,-e),t.lineTo(3*e,-e),t.lineTo(3*e,e),t.lineTo(e,e),t.lineTo(e,3*e),t.lineTo(-e,3*e),t.lineTo(-e,e),t.lineTo(-3*e,e),t.closePath()}};const tan30=sqrt(1/3),tan30_2=2*tan30;var symbolDiamond={draw(t,s){const e=sqrt(s/tan30_2),B=e*tan30;t.moveTo(0,-e),t.lineTo(B,0),t.lineTo(0,e),t.lineTo(-B,0),t.closePath()}},symbolDiamond2={draw(t,s){const e=.62625*sqrt(s);t.moveTo(0,-e),t.lineTo(e,0),t.lineTo(0,e),t.lineTo(-e,0),t.closePath()}},symbolPlus={draw(t,s){const e=.87559*sqrt(s-min(s/7,2));t.moveTo(-e,0),t.lineTo(e,0),t.moveTo(0,e),t.lineTo(0,-e)}},symbolSquare={draw(t,s){const e=sqrt(s),B=-e/2;t.rect(B,B,e,e)}},symbolSquare2={draw(t,s){const e=.4431*sqrt(s);t.moveTo(e,e),t.lineTo(e,-e),t.lineTo(-e,-e),t.lineTo(-e,e),t.closePath()}};const ka=.8908130915292852,kr=sin(pi$1/10)/sin(7*pi$1/10),kx=sin(tau$1/10)*kr,ky=-cos(tau$1/10)*kr;var symbolStar={draw(t,s){const e=sqrt(s*ka),B=kx*e,i=ky*e;t.moveTo(0,-e),t.lineTo(B,i);for(let s=1;s<5;++s){const F=tau$1*s/5,Q=cos(F),l=sin(F);t.lineTo(l*e,-Q*e),t.lineTo(Q*B-l*i,l*B+Q*i)}t.closePath()}};const sqrt3$2=sqrt(3);var symbolTriangle={draw(t,s){const e=-sqrt(s/(3*sqrt3$2));t.moveTo(0,2*e),t.lineTo(-sqrt3$2*e,-e),t.lineTo(sqrt3$2*e,-e),t.closePath()}};const sqrt3$1=sqrt(3);var symbolTriangle2={draw(t,s){const e=.6824*sqrt(s),B=e/2,i=e*sqrt3$1/2;t.moveTo(0,-e),t.lineTo(i,B),t.lineTo(-i,B),t.closePath()}};const c$1=-.5,s$1=sqrt(3)/2,k=1/sqrt(12),a$1=3*(k/2+1);var symbolWye={draw(t,s){const e=sqrt(s/a$1),B=e/2,i=e*k,F=B,Q=e*k+e,l=-F,U=Q;t.moveTo(B,i),t.lineTo(F,Q),t.lineTo(l,U),t.lineTo(c$1*B-s$1*i,s$1*B+c$1*i),t.lineTo(c$1*F-s$1*Q,s$1*F+c$1*Q),t.lineTo(c$1*l-s$1*U,s$1*l+c$1*U),t.lineTo(c$1*B+s$1*i,c$1*i-s$1*B),t.lineTo(c$1*F+s$1*Q,c$1*Q-s$1*F),t.lineTo(c$1*l+s$1*U,c$1*U-s$1*l),t.closePath()}},symbolTimes={draw(t,s){const e=.6189*sqrt(s-min(s/6,1.7));t.moveTo(-e,-e),t.lineTo(e,e),t.moveTo(-e,e),t.lineTo(e,-e)}};const symbolsFill=[symbolCircle,symbolCross,symbolDiamond,symbolSquare,symbolStar,symbolTriangle,symbolWye],symbolsStroke=[symbolCircle,symbolPlus,symbolTimes,symbolTriangle2,symbolAsterisk,symbolSquare2,symbolDiamond2];function noop(){}function point$4(t,s,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+s)/6,(t._y0+4*t._y1+e)/6)}function Basis(t){this._context=t}function curveBasis(t){return new Basis(t)}function BasisClosed(t){this._context=t}function curveBasisClosed(t){return new BasisClosed(t)}function BasisOpen(t){this._context=t}function curveBasisOpen(t){return new BasisOpen(t)}function Bundle(t,s){this._basis=new Basis(t),this._beta=s}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$4(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$4(this,t,s)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s}},BasisClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._x2=t,this._y2=s;break;case 1:this._point=2,this._x3=t,this._y3=s;break;case 2:this._point=3,this._x4=t,this._y4=s,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+s)/6);break;default:point$4(this,t,s)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s}},BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var e=(this._x0+4*this._x1+t)/6,B=(this._y0+4*this._y1+s)/6;this._line?this._context.lineTo(e,B):this._context.moveTo(e,B);break;case 3:this._point=4;default:point$4(this,t,s)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s}},Bundle.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,s=this._y,e=t.length-1;if(e>0)for(var B,i=t[0],F=s[0],Q=t[e]-i,l=s[e]-F,U=-1;++U<=e;)B=U/e,this._basis.point(this._beta*t[U]+(1-this._beta)*(i+B*Q),this._beta*s[U]+(1-this._beta)*(F+B*l));this._x=this._y=null,this._basis.lineEnd()},point:function(t,s){this._x.push(+t),this._y.push(+s)}};var curveBundle=function t(s){function e(t){return 1===s?new Basis(t):new Bundle(t,s)}return e.beta=function(s){return t(+s)},e}(.85);function point$3(t,s,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-s),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function Cardinal(t,s){this._context=t,this._k=(1-s)/6}Cardinal.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point$3(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2,this._x1=t,this._y1=s;break;case 2:this._point=3;default:point$3(this,t,s)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=s}};var curveCardinal=function t(s){function e(t){return new Cardinal(t,s)}return e.tension=function(s){return t(+s)},e}(0);function CardinalClosed(t,s){this._context=t,this._k=(1-s)/6}CardinalClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._x3=t,this._y3=s;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=s);break;case 2:this._point=3,this._x5=t,this._y5=s;break;default:point$3(this,t,s)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=s}};var curveCardinalClosed=function t(s){function e(t){return new CardinalClosed(t,s)}return e.tension=function(s){return t(+s)},e}(0);function CardinalOpen(t,s){this._context=t,this._k=(1-s)/6}CardinalOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$3(this,t,s)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=s}};var curveCardinalOpen=function t(s){function e(t){return new CardinalOpen(t,s)}return e.tension=function(s){return t(+s)},e}(0);function point$2(t,s,e){var B=t._x1,i=t._y1,F=t._x2,Q=t._y2;if(t._l01_a>1e-12){var l=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,U=3*t._l01_a*(t._l01_a+t._l12_a);B=(B*l-t._x0*t._l12_2a+t._x2*t._l01_2a)/U,i=(i*l-t._y0*t._l12_2a+t._y2*t._l01_2a)/U}if(t._l23_a>1e-12){var a=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,g=3*t._l23_a*(t._l23_a+t._l12_a);F=(F*a+t._x1*t._l23_2a-s*t._l12_2a)/g,Q=(Q*a+t._y1*t._l23_2a-e*t._l12_2a)/g}t._context.bezierCurveTo(B,i,F,Q,t._x2,t._y2)}function CatmullRom(t,s){this._context=t,this._alpha=s}CatmullRom.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){if(t=+t,s=+s,this._point){var e=this._x2-t,B=this._y2-s;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+B*B,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;break;case 2:this._point=3;default:point$2(this,t,s)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=s}};var curveCatmullRom=function t(s){function e(t){return s?new CatmullRom(t,s):new Cardinal(t,0)}return e.alpha=function(s){return t(+s)},e}(.5);function CatmullRomClosed(t,s){this._context=t,this._alpha=s}CatmullRomClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,s){if(t=+t,s=+s,this._point){var e=this._x2-t,B=this._y2-s;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+B*B,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=s;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=s);break;case 2:this._point=3,this._x5=t,this._y5=s;break;default:point$2(this,t,s)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=s}};var curveCatmullRomClosed=function t(s){function e(t){return s?new CatmullRomClosed(t,s):new CardinalClosed(t,0)}return e.alpha=function(s){return t(+s)},e}(.5);function CatmullRomOpen(t,s){this._context=t,this._alpha=s}CatmullRomOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){if(t=+t,s=+s,this._point){var e=this._x2-t,B=this._y2-s;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+B*B,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$2(this,t,s)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=s}};var curveCatmullRomOpen=function t(s){function e(t){return s?new CatmullRomOpen(t,s):new CardinalOpen(t,0)}return e.alpha=function(s){return t(+s)},e}(.5);function LinearClosed(t){this._context=t}function curveLinearClosed(t){return new LinearClosed(t)}function sign(t){return t<0?-1:1}function slope3(t,s,e){var B=t._x1-t._x0,i=s-t._x1,F=(t._y1-t._y0)/(B||i<0&&-0),Q=(e-t._y1)/(i||B<0&&-0),l=(F*i+Q*B)/(B+i);return(sign(F)+sign(Q))*Math.min(Math.abs(F),Math.abs(Q),.5*Math.abs(l))||0}function slope2(t,s){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-s)/2:s}function point$1(t,s,e){var B=t._x0,i=t._y0,F=t._x1,Q=t._y1,l=(F-B)/3;t._context.bezierCurveTo(B+l,i+l*s,F-l,Q-l*e,F,Q)}function MonotoneX(t){this._context=t}function MonotoneY(t){this._context=new ReflectContext(t)}function ReflectContext(t){this._context=t}function monotoneX(t){return new MonotoneX(t)}function monotoneY(t){return new MonotoneY(t)}function Natural(t){this._context=t}function controlPoints(t){var s,e,B=t.length-1,i=new Array(B),F=new Array(B),Q=new Array(B);for(i[0]=0,F[0]=2,Q[0]=t[0]+2*t[1],s=1;s<B-1;++s)i[s]=1,F[s]=4,Q[s]=4*t[s]+2*t[s+1];for(i[B-1]=2,F[B-1]=7,Q[B-1]=8*t[B-1]+t[B],s=1;s<B;++s)e=i[s]/F[s-1],F[s]-=e,Q[s]-=e*Q[s-1];for(i[B-1]=Q[B-1]/F[B-1],s=B-2;s>=0;--s)i[s]=(Q[s]-i[s+1])/F[s];for(F[B-1]=(t[B]+i[B-1])/2,s=0;s<B-1;++s)F[s]=2*t[s+1]-i[s+1];return[i,F]}function curveNatural(t){return new Natural(t)}function Step(t,s){this._context=t,this._t=s}function curveStep(t){return new Step(t,.5)}function stepBefore(t){return new Step(t,0)}function stepAfter(t){return new Step(t,1)}function Transform(t,s,e){this.k=t,this.x=s,this.y=e}LinearClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,s){t=+t,s=+s,this._point?this._context.lineTo(t,s):(this._point=1,this._context.moveTo(t,s))}},MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$1(this,this._t0,slope2(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){var e=NaN;if(s=+s,(t=+t)!==this._x1||s!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;break;case 2:this._point=3,point$1(this,slope2(this,e=slope3(this,t,s)),e);break;default:point$1(this,this._t0,e=slope3(this,t,s))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s,this._t0=e}}},(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(t,s){MonotoneX.prototype.point.call(this,s,t)},ReflectContext.prototype={moveTo:function(t,s){this._context.moveTo(s,t)},closePath:function(){this._context.closePath()},lineTo:function(t,s){this._context.lineTo(s,t)},bezierCurveTo:function(t,s,e,B,i,F){this._context.bezierCurveTo(s,t,B,e,F,i)}},Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,s=this._y,e=t.length;if(e)if(this._line?this._context.lineTo(t[0],s[0]):this._context.moveTo(t[0],s[0]),2===e)this._context.lineTo(t[1],s[1]);else for(var B=controlPoints(t),i=controlPoints(s),F=0,Q=1;Q<e;++F,++Q)this._context.bezierCurveTo(B[0][F],i[0][F],B[1][F],i[1][F],t[Q],s[Q]);(this._line||0!==this._line&&1===e)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,s){this._x.push(+t),this._y.push(+s)}},Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,s),this._context.lineTo(t,s);else{var e=this._x*(1-this._t)+t*this._t;this._context.lineTo(e,this._y),this._context.lineTo(e,s)}}this._x=t,this._y=s}},Transform.prototype={constructor:Transform,scale:function(t){return 1===t?this:new Transform(this.k*t,this.x,this.y)},translate:function(t,s){return 0===t&0===s?this:new Transform(this.k,this.x+this.k*t,this.y+this.k*s)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},Transform.prototype;class DecidablesElement extends i$2{getComputedStyleValue(t){return getComputedStyle(this).getPropertyValue(t).trim()}firstUpdated(t){super.firstUpdated(t),select(this.renderRoot.host).classed("keyboard",!0).on("mousemove.keyboard touchstart.keyboard",t=>{select(t.currentTarget.renderRoot.host).classed("keyboard",!1).on("mousemove.keyboard touchstart.keyboard",null)}).on("keydown.keyboard",t=>{select(t.currentTarget.renderRoot.host).classed("keyboard",!0).on("keydown.keyboard mousemove.keyboard touchstart.keyboard",null)})}static get greys(){const t="#999999",s={white:"#ffffff"};return s.light75=interpolateRgb(t,"#ffffff")(.75),s.light50=interpolateRgb(t,"#ffffff")(.5),s.light25=interpolateRgb(t,"#ffffff")(.25),s.grey=t,s.dark25=interpolateRgb(t,"#000000")(.25),s.dark50=interpolateRgb(t,"#000000")(.5),s.dark75=interpolateRgb(t,"#000000")(.75),s.black="#000000",s}static get shadows(){return{elevations:[0,2,4,8,16],baselineColor:"#000000",baselineColorString:"0, 0, 0",inverseBaselineColor:"#FFFFFF",inverseBaselineColorString:"255, 255, 255",opacityUmbra:.2,opacityPenumbra:.14,opacityAmbient:.12,opacityBoost:.2,mapUmbra:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:3,b:1,s:-2},4:{x:0,y:2,b:4,s:-1},8:{x:0,y:5,b:5,s:-3},16:{x:0,y:8,b:10,s:-5}},mapPenumbra:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:2,b:2,s:0},4:{x:0,y:4,b:5,s:0},8:{x:0,y:8,b:10,s:1},16:{x:0,y:16,b:24,s:2}},mapAmbient:{0:{x:0,y:0,b:0,s:0},2:{x:0,y:1,b:5,s:0},4:{x:0,y:1,b:10,s:0},8:{x:0,y:3,b:14,s:2},16:{x:0,y:6,b:30,s:5}}}}static cssBoxShadow(t,s=!1,e=!1){const B=this.shadows.opacityUmbra+this.shadows.opacityBoost,i=this.shadows.opacityPenumbra+this.shadows.opacityBoost,F=this.shadows.opacityAmbient+this.shadows.opacityBoost,Q=e?`rgba(${this.shadows.inverseBaselineColorString}, ${B})`:`rgba(${this.shadows.baselineColorString}, ${B})`,l=e?`rgba(${this.shadows.inverseBaselineColorString}, ${i})`:`rgba(${this.shadows.baselineColorString}, ${i})`,U=e?`rgba(${this.shadows.inverseBaselineColorString}, ${F})`:`rgba(${this.shadows.baselineColorString}, ${F})`,a=this.shadows.mapUmbra[t],g=this.shadows.mapPenumbra[t],I=this.shadows.mapAmbient[t];return`${s?`${-a.y}px ${a.y/2}px ${a.b}px ${a.s}px`:`${a.y/2}px ${a.y}px ${a.b}px ${a.s}px`} ${Q}, ${s?`${-g.y}px ${g.y/2}px ${g.b}px ${g.s}px`:`${g.y/2}px ${g.y}px ${g.b}px ${g.s}px`} ${l}, ${s?`${-I.y}px ${I.y/2}px ${I.b}px ${I.s}px`:`${I.y/2}px ${I.y}px ${I.b}px ${I.s}px`} ${U}`}static get svgFilters(){const t=DecidablesElement.shadows,s=t.elevations.map(s=>b$1`
        <filter id=${`shadow-${s}`} filterUnits="userSpaceOnUse" x="-100%" y="-100%" width="200%" height="200%">
          <feComponentTransfer in="SourceAlpha" result="solid">
            <feFuncA type="table" tableValues="0 1 1"/>
          </feComponentTransfer>
          <feOffset in="solid" result="offU" dx=${t.mapUmbra[s].y/2} dy=${t.mapUmbra[s].y} />
          <feOffset in="solid" result="offP" dx=${t.mapPenumbra[s].y/2} dy=${t.mapPenumbra[s].y} />
          <feOffset in="solid" result="offA" dx=${t.mapAmbient[s].y/2} dy=${t.mapAmbient[s].y} />
          ${0===t.mapUmbra[s].s?b$1``:b$1`<feMorphology in="offU" result="spreadU" operator=${t.mapUmbra[s].s>0?"dilate":"erode"} radius=${Math.abs(t.mapUmbra[s].s)} />`}
          ${0===t.mapPenumbra[s].s?b$1``:b$1`<feMorphology in="offP" result="spreadP" operator=${t.mapPenumbra[s].s>0?"dilate":"erode"} radius=${Math.abs(t.mapPenumbra[s].s)} />`}
          ${0===t.mapAmbient[s].s?b$1``:b$1`<feMorphology in="offA" result="spreadA" operator=${t.mapAmbient[s].s>0?"dilate":"erode"} radius=${Math.abs(t.mapAmbient[s].s)} />`}
          <feGaussianBlur in=${0===t.mapUmbra[s].s?"offU":"spreadU"} result="blurU" stdDeviation=${t.mapUmbra[s].b/2} />
          <feGaussianBlur in=${0===t.mapPenumbra[s].s?"offP":"spreadP"} result="blurP" stdDeviation=${t.mapPenumbra[s].b/2} />
          <feGaussianBlur in=${0===t.mapAmbient[s].s?"offA":"spreadA"} result="blurA" stdDeviation=${t.mapAmbient[s].b/2} />
          <feFlood in="SourceGraphic" result="opU" flood-color=${t.baselineColor} flood-opacity=${t.opacityUmbra+t.opacityBoost} />
          <feFlood in="SourceGraphic" result="opP" flood-color=${t.baselineColor} flood-opacity=${t.opacityPenumbra+t.opacityBoost} />
          <feFlood in="SourceGraphic" result="opA" flood-color=${t.baselineColor} flood-opacity=${t.opacityAmbient+t.opacityBoost} />
          <feComposite in="opU" in2="blurU" result="shU" operator="in" />
          <feComposite in="opP" in2="blurP" result="shP" operator="in" />
          <feComposite in="opA" in2="blurA" result="shA" operator="in" />
          <feMorphology in="solid" result="smaller" operator="erode" radius="1" />
          <feComposite in="shU" in2="smaller" result="finalU" operator="out" />
          <feComposite in="shP" in2="smaller" result="finalP" operator="out" />
          <feComposite in="shA" in2="smaller" result="finalA" operator="out" />
          <feMerge>
            <feMergeNode in="finalU" />
            <feMergeNode in="finalP" />
            <feMergeNode in="finalA" />
            <feMergeNode in="SourceGraphic" />
          </feMerge>
        </filter>`);return b$1`
      <defs class="filtersUser">
        ${s}
      </defs>
    `}static get styles(){return i$5`
      :host {
        ---shadow-0: var(--shadow-0, ${r$4(this.cssBoxShadow(0))});
        ---shadow-2: var(--shadow-2, ${r$4(this.cssBoxShadow(2))});
        ---shadow-4: var(--shadow-4, ${r$4(this.cssBoxShadow(4))});
        ---shadow-8: var(--shadow-8, ${r$4(this.cssBoxShadow(8))});

        ---color-background: var(--color-background, ${r$4(this.greys.white)});
        ---color-border: var(--color-border, ${r$4(this.greys.light75)});
        ---color-text: var(--color-text, ${r$4(this.greys.dark75)});
        ---color-text-inverse: var(--color-text-inverse, ${r$4(this.greys.white)});
        ---color-link: var(--color-link, ${r$4(this.greys.dark25)});
        ---color-element-background: var(--color-element-background, ${r$4(this.greys.light75)});
        ---color-element-disabled: var(--color-element-disabled, ${r$4(this.greys.light50)});
        ---color-element-enabled: var(--color-element-enabled, ${r$4(this.greys.dark25)});
        ---color-element-selected: var(--color-element-selected, ${r$4(this.greys.grey)});
        ---color-element-border: var(--color-element-border, ${r$4(this.greys.dark50)});
        ---color-element-emphasis: var(--color-element-emphasis, ${r$4(this.greys.dark75)});

        ---font-family-base: var(--font-family-base, "Source Sans", sans-serif);
        ---font-family-math: var(--font-family-math, "Source Serif", serif);

        ---border: var(--border, 1px solid var(---color-border));
        ---border-radius: var(--border-radius, 0.25rem);
        ---transition-duration: var(--transition-duration, 500ms);

        font-family: var(---font-family-base);
        font-weight: normal;
      }

      :host,
      :host *,
      :host *::before,
      :host *::after {
        box-sizing: border-box;
      }

      .math-greek {
        font-family: var(---font-family-math);
        font-style: normal;
      }

      .math-num {
        font-family: var(---font-family-base);
        font-style: normal;
      }

      .math-var {
        font-family: var(---font-family-math);
        font-style: italic;
      }

      .defs {
        display: block;

        width: 0;
        height: 0;
      }
    `}}class DecidablesButton extends DecidablesElement{static get properties(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}constructor(){super(),this.disabled=!1}static get styles(){return[super.styles,i$5`
        :host {
          ---decidables-button-background-color-disabled: var(--decidables-button-background-color, var(---color-element-disabled));
          ---decidables-button-background-color-enabled: var(--decidables-button-background-color, var(---color-element-enabled));

          margin: 0.25rem;
        }

        button {
          width: 100%;
          height: 100%;
          padding: 0.375rem 0.75rem;

          font-family: var(---font-family-base);
          font-size: 1.125rem;
          line-height: 1.5;
          color: var(---color-text-inverse);

          border: 0;
          border-radius: var(---border-radius);
          outline: none;
        }

        button:disabled {
          background-color: var(---decidables-button-background-color-disabled);
          outline: none;
          box-shadow: none;
        }

        button:enabled {
          cursor: pointer;

          background-color: var(---decidables-button-background-color-enabled);
          outline: none;
          box-shadow: var(---shadow-2);
        }

        button:enabled:hover {
          outline: none;
          box-shadow: var(---shadow-4);
        }

        button:enabled:active {
          outline: none;
          box-shadow: var(---shadow-8);
        }

        :host(.keyboard) button:enabled:focus {
          outline: none;
          box-shadow: var(---shadow-4);
        }

        :host(.keyboard) button:enabled:focus:active {
          outline: none;
          box-shadow: var(---shadow-8);
        }
      `]}render(){return x$3`
      <button ?disabled=${this.disabled}>
        <slot></slot>
      </button>
    `}}customElements.define("decidables-button",DecidablesButton);
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const o$2=t=>t??E$1;class DecidablesSlider extends DecidablesElement{static get properties(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0},scale:{attribute:"scale",type:Boolean,reflect:!0},max:{attribute:"max",type:Number,reflect:!0},min:{attribute:"min",type:Number,reflect:!0},step:{attribute:"step",type:Number,reflect:!0},value:{attribute:"value",type:Number,reflect:!0},nonlinear:{attribute:!1,type:Boolean,reflect:!1}}}constructor(){super(),this.disabled=!1,this.scale=!1,this.max=void 0,this.min=void 0,this.step=void 0,this.value=void 0,this.nonlinear=!1,this.rangeMax=void 0,this.rangeMin=void 0,this.rangeStep=void 0,this.rangeValue=void 0,this.toRange=void 0,this.fromRange=void 0}nonlinearRange(t,s,e){this.nonlinear=t,this.toRange=t?s:void 0,this.fromRange=t?e:void 0}rangeChanged(t){this.value=this.nonlinear?this.fromRange(t.target.value):t.target.value,this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value},bubbles:!0}))}rangeInputted(t){this.value=this.nonlinear?this.fromRange(t.target.value):t.target.value}spinnerInputted(t){this.value=t.target.value}willUpdate(){this.rangeMax=void 0===this.max?void 0:this.nonlinear?this.toRange(this.max):this.max,this.rangeMin=void 0===this.min?void 0:this.nonlinear?this.toRange(this.min):this.min,this.rangeStep=void 0===this.step?void 0:this.nonlinear?"any":this.step,this.rangeValue=void 0===this.value?void 0:this.nonlinear?this.toRange(this.value):this.value}static get styles(){return[super.styles,i$5`
        :host {
          ---decidables-slider-background-color: var(--decidables-slider-background-color, var(---color-element-disabled));
          ---decidables-slider-color: var(--decidables-slider-color, var(---color-element-enabled));
          ---decidables-spinner-background-color: var(--decidables-slider-background-color, none);

          ---shadow-2-rotate: var(--shadow-2-rotate, ${r$4(this.cssBoxShadow(2,!0,!1))});
          ---shadow-4-rotate: var(--shadow-4-rotate, ${r$4(this.cssBoxShadow(4,!0,!1))});
          ---shadow-8-rotate: var(--shadow-8-rotate, ${r$4(this.cssBoxShadow(8,!0,!1))});

          display: flex;

          flex-direction: column;

          align-items: center;
          justify-content: center;
        }

        label {
          margin: 0.25rem 0.25rem 0;
        }

        .range {
          position: relative;
          display: flex;

          flex-direction: row;

          width: 3.5rem;
          height: 4.75rem;
          margin: 0 0.25rem 0.25rem;
        }

        decidables-spinner {
          --decidables-spinner-input-width: 3.5rem;

          margin: 0 0.25rem 0.25rem;

          background: var(---decidables-spinner-background-color);
        }

        /* Adapted from http://danielstern.ca/range.css/#/ */
        /* Overall */
        input[type=range] {
          width: 4.75rem;
          height: 3.5rem;
          padding: 0;
          margin: 0;

          background-color: unset;

          transform: rotate(-90deg);
          transform-origin: 2.375rem 2.375rem;

          /* stylelint-disable-next-line property-no-vendor-prefix */
          -webkit-appearance: none;
        }

        input[type=range]:enabled {
          cursor: ns-resize;
        }

        input[type=range]:focus {
          outline: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-tooltip {
          display: none;
        }

        /* Track */
        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-webkit-slider-runnable-track {
          width: 100%;
          height: 4px;

          background: var(---decidables-slider-background-color);
          border: 0;
          border-radius: 2px;
          box-shadow: none;
        }

        input[type=range]:focus::-webkit-slider-runnable-track {
          background: var(---decidables-slider-background-color);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-moz-range-track {
          width: 100%;
          height: 4px;

          background: var(---decidables-slider-background-color);
          border: 0;
          border-radius: 2px;
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-track {
          width: 100%;
          height: 4px;

          color: transparent;

          background: transparent;
          border-color: transparent;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-fill-lower {
          background: #cccccc;
          /* background: var(---decidables-slider-background-color); */
          border: 0;
          border-radius: 2px;
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-fill-upper {
          background: #cccccc;
          /* background: var(---decidables-slider-background-color); */
          border: 0;
          border-radius: 2px;
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:focus::-ms-fill-lower {
          background: var(---decidables-slider-background-color);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:focus::-ms-fill-upper {
          background: var(---decidables-slider-background-color);
        }

        /* Thumb */
        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-webkit-slider-thumb {
          width: 10px;
          height: 20px;
          margin-top: -8px;

          border: 0;
          border-radius: 4px;

          /* stylelint-disable-next-line property-no-vendor-prefix */
          -webkit-appearance: none;
        }

        input[type=range]:disabled::-webkit-slider-thumb {
          background: var(---decidables-slider-background-color);
          box-shadow: none;
        }

        input[type=range]:enabled::-webkit-slider-thumb {
          background: var(---decidables-slider-color);
          box-shadow: var(---shadow-2-rotate);
        }

        input[type=range]:enabled:hover::-webkit-slider-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        input[type=range]:enabled:active::-webkit-slider-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        :host(.keyboard) input[type=range]:enabled:focus::-webkit-slider-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        :host(.keyboard) input[type=range]:focus:active::-webkit-slider-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-moz-range-thumb {
          width: 10px;
          height: 20px;

          border: 0;
          border-radius: 4px;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:disabled::-moz-range-thumb {
          background: var(---decidables-slider-background-color);
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled::-moz-range-thumb {
          background: var(---decidables-slider-color);
          box-shadow: var(---shadow-2-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled:hover::-moz-range-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled:active::-moz-range-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        :host(.keyboard) input[type=range]:enabled:focus::-moz-range-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        :host(.keyboard) input[type=range]:enabled:focus:active::-moz-range-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]::-ms-thumb {
          width: 10px;
          height: 20px;
          margin-top: 0;

          background: #999999;
          /* background: var(---color-element-enabled); */
          border: 0;
          border-radius: 4px;
          box-shadow: var(---shadow-2-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:disabled::-ms-thumb {
          background: var(---decidables-slider-background-color);
          box-shadow: none;
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled::-ms-thumb {
          background: var(---decidables-slider-color);
          box-shadow: var(---shadow-2-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled:hover::-ms-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        input[type=range]:enabled:active::-ms-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        /* stylelint-disable-next-line no-descending-specificity */ /* stylelint ERROR */
        :host(.keyboard) input[type=range]:enabled:focus::-ms-thumb {
          box-shadow: var(---shadow-4-rotate);
        }

        :host(.keyboard) input[type=range]:enabled:focus:active::-ms-thumb {
          box-shadow: var(---shadow-8-rotate);
        }

        datalist {
          position: absolute;
          left: 2rem;
          z-index: -1;
          display: flex;

          flex-direction: column;

          align-items: flex-start;
          justify-content: space-between;

          height: 4.75rem;

          font-size: 0.75rem;
        }

        option {
          padding: 0;

          line-height: 0.8;
          min-block-size: 0;
        }

        option::before {
          content: "â ";
        }
      `]}render(){return x$3`
      <label for="slider">
        <slot></slot>
      </label>
      <div class="range">
        <input ?disabled=${this.disabled} type="range" id="slider" min=${o$2(this.rangeMin)} max=${o$2(this.rangeMax)} step=${o$2(this.rangeStep)} .value=${this.rangeValue} @change=${this.rangeChanged.bind(this)} @input=${this.rangeInputted.bind(this)}>
        ${this.scale?x$3`
            <datalist id="ticks">
              <option value=${o$2(this.rangeMax)} label=${o$2(this.max)}></option>
              <option value=${o$2(this.rangeMin)} label=${o$2(this.min)}></option>
            </datalist>
          `:x$3``}
      </div>
      <decidables-spinner ?disabled=${this.disabled} min=${o$2(this.min)} max=${o$2(this.max)} step=${o$2(this.step)} .value=${this.value} @input=${this.spinnerInputted.bind(this)}></decidables-spinner>
    `}}customElements.define("decidables-slider",DecidablesSlider);class DecidablesSpinner extends DecidablesElement{static get properties(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0},max:{attribute:"max",type:Number,reflect:!0},min:{attribute:"min",type:Number,reflect:!0},step:{attribute:"step",type:Number,reflect:!0},value:{attribute:"value",type:Number,reflect:!0}}}constructor(){super(),this.disabled=!1,this.max=void 0,this.min=void 0,this.step=void 0,this.value=void 0}inputted(t){this.value=t.target.value}static get styles(){return[super.styles,i$5`
        :host {
          ---decidables-spinner-font-size: var(--decidables-spinner-font-size, 1.125rem);
          ---decidables-spinner-input-width: var(--decidables-spinner-input-width, 4rem);
          ---decidables-spinner-prefix: var(--decidables-spinner-prefix, "");

          ---decidables-spinner-postfix: var(--decidables-spinner-postfix, "");
          ---decidables-spinner-postfix-padding: var(--decidables-spinner-postfix-padding, 0);

          display: block;
        }

        label {
          position: relative;
          display: flex;

          flex-direction: column;

          align-items: center;

          margin: 0;

          font-size: 0.75rem;
        }

        label::before {
          position: absolute;
          bottom: 1px;
          left: calc(50% - var(---decidables-spinner-input-width) / 2 + 0.25rem);

          font-size: var(---decidables-spinner-font-size);
          line-height: normal;

          content: var(---decidables-spinner-prefix);
        }

        label::after {
          position: absolute;
          right: 0.25rem;
          bottom: 1px;

          font-size: var(---decidables-spinner-font-size);
          line-height: normal;

          content: var(---decidables-spinner-postfix);
        }

        input[type=number] {
          width: var(---decidables-spinner-input-width);
          padding-right: var(---decidables-spinner-postfix-padding);

          font-family: var(---font-family-base);
          font-size: var(---decidables-spinner-font-size);
          color: inherit;
          text-align: right;

          background: none;
          border: 0;
          border-radius: 0;
          outline: none;
          box-shadow: var(---shadow-2);

          -webkit-appearance: none; /* stylelint-disable-line property-no-vendor-prefix */
        }

        input[type=number]:hover {
          box-shadow: var(---shadow-4);
        }

        input[type=number]:focus,
        input[type=number]:active {
          box-shadow: var(---shadow-8);
        }

        input[type=number]:disabled {
          color: var(---color-text);

          border: 0;
          box-shadow: none;

          /* HACK: Use correct text color in Safari */
          -webkit-opacity: 1;
          /* HACK: Hide spinners in disabled input for Firefox and Safari */
          -moz-appearance: textfield; /* stylelint-disable-line property-no-vendor-prefix */
          /* HACK: Use correct text color in Safari */
          -webkit-text-fill-color: var(---color-text);
        }

        /* HACK: Hide spinners in disabled input for Firefox and Safari */
        input[type=number]:disabled::-webkit-outer-spin-button,
        input[type=number]:disabled::-webkit-inner-spin-button {
          margin: 0;
          -webkit-appearance: none; /* stylelint-disable-line property-no-vendor-prefix */
        }
      `]}render(){return x$3`
      <label>
        <slot></slot>
        <input ?disabled=${this.disabled} type="number" min=${o$2(this.min)} max=${o$2(this.max)} step=${o$2(this.step)} .value=${this.value} @input=${this.inputted.bind(this)}>
      </label>
    `}}customElements.define("decidables-spinner",DecidablesSpinner);class DecidablesSwitch extends DecidablesElement{static get properties(){return{checked:{attribute:"checked",type:Boolean,reflect:!0},disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}constructor(){super(),this.checked=!1,this.disabled=!1}changed(t){this.checked=t.target.checked,this.dispatchEvent(new CustomEvent("change",{detail:{checked:this.checked},bubbles:!0}))}static get styles(){return[super.styles,i$5`
        :host {
          display: flex;

          flex-direction: column;

          align-items: center;
          justify-content: center;
        }

        /* Adapted from https://codepen.io/guuslieben/pen/YyPRVP */
        input[type=checkbox] {
          /* visuallyhidden: https://github.com/h5bp/html5-boilerplate/blob/master/dist/doc/css.md */
          position: absolute;

          width: 1px;
          height: 1px;
          padding: 0;
          margin: -1px;
          overflow: hidden;

          white-space: nowrap;

          border: 0;
          clip-path: inset(100%); /* May cause a performance issue: https://github.com/h5bp/html5-boilerplate/issues/2021 */
        }

        input[type=checkbox] + label {
          order: 1;

          margin: 0 0.25rem 0.25rem;

          font-weight: 400;
        }

        input[type=checkbox] + label + label {
          position: relative;

          min-width: 24px;
          padding: 0 0 36px;
          margin: 0.25rem 0.25rem 0;

          font-weight: 400;

          outline: none;
        }

        input[type=checkbox] + label + label::before,
        input[type=checkbox] + label + label::after {
          position: absolute;

          left: 50%;

          margin: 0;

          content: "";

          outline: 0;

          transition: all var(---transition-duration) ease;
          transform: translate(-50%, 0);
        }

        input[type=checkbox] + label + label::before {
          bottom: 1px;

          width: 8px;
          height: 34px;

          background-color: var(---color-element-disabled);
          border-radius: 4px;
        }

        input[type=checkbox] + label + label::after {
          bottom: 0;

          width: 18px;
          height: 18px;

          background-color: var(---color-element-enabled);
          border-radius: 50%;
          box-shadow: var(---shadow-2);
        }

        input[type=checkbox]:checked + label + label::after {
          transform: translate(-50%, -100%);
        }

        input[type=checkbox]:disabled + label + label::after {
          background-color: var(---color-element-disabled);
          box-shadow: none;
        }

        input[type=checkbox]:enabled + label,
        input[type=checkbox]:enabled + label + label {
          cursor: pointer;
        }

        input[type=checkbox]:enabled + label:hover + label::after,
        input[type=checkbox]:enabled + label + label:hover::after {
          box-shadow: var(---shadow-4);
        }

        input[type=checkbox]:enabled + label:active + label::after,
        input[type=checkbox]:enabled + label + label:active::after {
          box-shadow: var(---shadow-8);
        }

        /* stylelint-disable-next-line selector-max-compound-selectors */
        :host(.keyboard) input[type=checkbox]:enabled:focus + label + label::after {
          box-shadow: var(---shadow-4);
        }

        /* stylelint-disable selector-max-compound-selectors */
        :host(.keyboard) input[type=checkbox]:enabled:focus + label + label:active::after,
        :host(.keyboard) input[type=checkbox]:enabled:focus:active + label + label::after {
          box-shadow: var(---shadow-8);
        }
        /* stylelint-enable selector-max-compound-selectors */
        `]}render(){return x$3`
      <input type="checkbox" id="switch" ?checked=${this.checked} ?disabled=${this.disabled} @change=${this.changed.bind(this)}>
      <label for="switch">
        <slot name="off-label"></slot>
      </label>
      <label for="switch">
        <slot></slot>
      </label>
    `}}customElements.define("decidables-switch",DecidablesSwitch);class DecidablesToggle extends DecidablesElement{static get properties(){return{disabled:{attribute:"disabled",type:Boolean,reflect:!0}}}constructor(){super(),this.disabled=!1}static get styles(){return[super.styles,i$5`
        fieldset {
          display: flex;

          flex-direction: column;

          align-items: stretch;
          justify-content: center;

          margin: 0.25rem;

          border: 0;
        }

        legend {
          text-align: center;
        }
      `]}render(){return x$3`
      <fieldset ?disabled=${this.disabled}>
        <legend><slot name="label"></slot></legend>
        <slot></slot>
      </fieldset>
    `}}customElements.define("decidables-toggle",DecidablesToggle);class DecidablesToggleOption extends DecidablesElement{static get properties(){return{checked:{attribute:"checked",type:Boolean,reflect:!0},disabled:{attribute:"disabled",type:Boolean,reflect:!0},name:{attribute:"name",type:String,reflect:!0},value:{attribute:"value",type:String,reflect:!0}}}constructor(){super(),this.checked=!1,this.disabled=!1,this.name=void 0,this.value=void 0}changed(t){this.checked=t.target.checked,this.dispatchEvent(new CustomEvent("change",{detail:{checked:this.checked,value:this.value},bubbles:!0}))}static get styles(){return[super.styles,i$5`
        :host {
          display: flex;
        }

        input[type=radio] {
          /* visuallyhidden: https://github.com/h5bp/html5-boilerplate/blob/master/dist/doc/css.md */
          position: absolute;

          width: 1px;
          height: 1px;
          padding: 0;
          margin: -1px;
          overflow: hidden;

          white-space: nowrap;

          border: 0;
          clip-path: inset(100%); /* May cause a performance issue: https://github.com/h5bp/html5-boilerplate/issues/2021 */
        }

        input[type=radio] + label {
          width: 100%;
          padding: 0.375rem 0.75rem;

          font-family: var(---font-family-base);
          font-size: 1.125rem;
          line-height: 1.5;
          color: var(---color-text-inverse);
          text-align: center;

          cursor: pointer;

          background-color: var(---color-element-enabled);
          border: 0;
          border-radius: 0;
          outline: none;

          box-shadow: var(---shadow-2);
        }

        input[type=radio]:checked + label {
          background-color: var(---color-element-selected);
          outline: none;
          box-shadow: var(---shadow-2);
        }

        input[type=radio] + label:hover {
          z-index: 1;

          outline: none;
          box-shadow: var(---shadow-4);
        }

        input[type=radio] + label:active {
          z-index: 2;

          outline: none;
          box-shadow: var(---shadow-8);
        }

        :host(:first-of-type) input[type=radio] + label {
          border-top-left-radius: 0.25rem;
          border-top-right-radius: 0.25rem;
        }

        :host(:last-of-type) input[type=radio] + label {
          border-bottom-right-radius: 0.25rem;
          border-bottom-left-radius: 0.25rem;
        }

        :host(.keyboard) input[type=radio]:focus + label {
          z-index: 1;

          outline: none;
          box-shadow: var(---shadow-4);
        }

        :host(.keyboard) input[type=radio]:focus:checked + label {
          z-index: 1;

          background-color: var(---color-element-selected);
          outline: none;
          box-shadow: var(---shadow-4);
        }

        :host(.keyboard) input[type=radio]:focus + label:active {
          z-index: 2;

          outline: none;
          box-shadow: var(---shadow-8);
        }
      `]}render(){return x$3`
      <input type="radio" id="toggle-option" name=${this.name} value=${this.value} .checked=${this.checked} @change=${this.changed.bind(this)}>
      <label for="toggle-option">
        <slot></slot>
      </label>
    `}}customElements.define("decidables-toggle-option",DecidablesToggleOption);const DecidablesConverterArray={fromAttribute:t=>t.split(/\s+/).map(t=>Number.parseFloat(t)),toAttribute:t=>t.length?t.map(t=>t.toFixed(3)).join(" "):null},DecidablesConverterSet={fromAttribute:t=>new Set(t.split(/\s+/)),toAttribute:t=>t.size?[...t].join(" "):null};function DecidablesMixinResizeable(t){return class extends t{static get properties(){return{width:{attribute:!1,type:Number,reflect:!1},height:{attribute:!1,type:Number,reflect:!1},rem:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.width=NaN,this.height=NaN,this.rem=NaN}getDimensions(){this.width=parseFloat(this.getComputedStyleValue("width"),10),this.height=parseFloat(this.getComputedStyleValue("height"),10),this.rem=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10)}connectedCallback(){super.connectedCallback(),this.resizeObserver=new ResizeObserver(this.getDimensions.bind(this)),this.resizeObserver.observe(this)}disconnectedCallback(){this.resizeObserver.unobserve(this),super.disconnectedCallback()}}}var data$3={colors:{h:"#4daf4a",m:"#ff7f00",fa:"#377eb8",cr:"#e41a1c",hr:"#ffff33",far:"#984ea3",acc:"#999999",d:"#f781bf",c:"#a65628",s:"#4545d0",present:"#f032e6",absent:"#10dbc9",correct:"#ffffff",error:"#000000",nr:"#cccccc"}},colors$3=data$3.colors;class DetectableElement extends DecidablesElement{static get properties(){return{interactive:{attribute:"interactive",type:Boolean,reflect:!0}}}constructor(){super(),this.interactive=!1}static get colors(){return colors$3}static get lights(){return Object.keys(DetectableElement.colors).reduce((t,s)=>(t[s]=interpolateRgb(DetectableElement.colors[s],"#ffffff")(.5),t),{})}static get darks(){return Object.keys(DetectableElement.colors).reduce((t,s)=>(t[s]=interpolateRgb(DetectableElement.colors[s],"#000000")(.5),t),{})}static get styles(){return[super.styles,i$5`
        :host {
          ---color-h: var(--color-h, ${r$4(this.colors.h)});
          ---color-m: var(--color-m, ${r$4(this.colors.m)});
          ---color-fa: var(--color-fa, ${r$4(this.colors.fa)});
          ---color-cr: var(--color-cr, ${r$4(this.colors.cr)});
          ---color-hr: var(--color-hr, ${r$4(this.colors.hr)});
          ---color-far: var(--color-far, ${r$4(this.colors.far)});
          ---color-acc: var(--color-acc, ${r$4(this.colors.acc)});
          ---color-d: var(--color-d, ${r$4(this.colors.d)});
          ---color-c: var(--color-c, ${r$4(this.colors.c)});
          ---color-s: var(--color-s, ${r$4(this.colors.s)});
          ---color-present: var(--color-present, ${r$4(this.colors.present)});
          ---color-absent: var(--color-absent, ${r$4(this.colors.absent)});
          ---color-correct: var(--color-correct, ${r$4(this.colors.correct)});
          ---color-error: var(--color-error, ${r$4(this.colors.error)});
          ---color-nr: var(--color-nr, ${r$4(this.colors.nr)});

          ---color-h-light: var(--color-h-light, ${r$4(this.lights.h)});
          ---color-m-light: var(--color-m-light, ${r$4(this.lights.m)});
          ---color-fa-light: var(--color-fa-light, ${r$4(this.lights.fa)});
          ---color-cr-light: var(--color-cr-light, ${r$4(this.lights.cr)});
          ---color-hr-light: var(--color-hr-light, ${r$4(this.lights.hr)});
          ---color-far-light: var(--color-far-light, ${r$4(this.lights.far)});
          ---color-acc-light: var(--color-acc-light, ${r$4(this.lights.acc)});
          ---color-d-light: var(--color-d-light, ${r$4(this.lights.d)});
          ---color-c-light: var(--color-c-light, ${r$4(this.lights.c)});
          ---color-s-light: var(--color-s-light, ${r$4(this.lights.s)});
          ---color-present-light: var(--color-present-light, ${r$4(this.lights.present)});
          ---color-absent-light: var(--color-absent-light, ${r$4(this.lights.absent)});
          ---color-correct-light: var(--color-correct-light, ${r$4(this.lights.correct)});
          ---color-error-light: var(--color-error-light, ${r$4(this.lights.error)});
          ---color-nr-light: var(--color-nr-light, ${r$4(this.lights.nr)});

          ---color-h-dark: var(--color-h-dark, ${r$4(this.darks.h)});
          ---color-m-dark: var(--color-m-dark, ${r$4(this.darks.m)});
          ---color-fa-dark: var(--color-fa-dark, ${r$4(this.darks.fa)});
          ---color-cr-dark: var(--color-cr-dark, ${r$4(this.darks.cr)});
          ---color-hr-dark: var(--color-hr-dark, ${r$4(this.darks.hr)});
          ---color-far-dark: var(--color-far-dark, ${r$4(this.darks.far)});
          ---color-acc-dark: var(--color-acc-dark, ${r$4(this.darks.acc)});
          ---color-d-dark: var(--color-d-dark, ${r$4(this.darks.d)});
          ---color-c-dark: var(--color-c-dark, ${r$4(this.darks.c)});
          ---color-s-dark: var(--color-s-dark, ${r$4(this.darks.s)});
          ---color-present-dark: var(--color-present-dark, ${r$4(this.darks.present)});
          ---color-absent-dark: var(--color-absent-dark, ${r$4(this.darks.absent)});
          ---color-correct-dark: var(--color-correct-dark, ${r$4(this.darks.correct)});
          ---color-error-dark: var(--color-error-dark, ${r$4(this.darks.error)});
          ---color-nr-dark: var(--color-nr-dark, ${r$4(this.darks.nr)});
        }
      `]}}class DetectableControl extends DetectableElement{static get properties(){return{trials:{attribute:"trials",type:Number,reflect:!0},duration:{attribute:"duration",type:Number,reflect:!0},coherence:{attribute:"coherence",type:Number,reflect:!0},payoff:{attribute:"payoff",type:Number,reflect:!0},color:{attribute:"color",type:String,reflect:!0},zRoc:{attribute:"z-roc",type:Boolean,reflect:!0},run:{attribute:"run",type:Boolean,reflect:!0},pause:{attribute:"pause",type:Boolean,reflect:!0},reset:{attribute:"reset",type:Boolean,reflect:!0},state:{attribute:!1,type:String,reflect:!1}}}constructor(){super(),this.trials=void 0,this.duration=void 0,this.coherence=void 0,this.payoff=void 0,this.colors=["none","accuracy","stimulus","response","outcome","all"],this.color=void 0,this.zRoc=void 0,this.run=!1,this.pause=!1,this.reset=!1,this.states=["resetted","running","paused","ended"],this.state="resetted"}setTrials(t){this.trials=t.target.value,this.dispatchEvent(new CustomEvent("detectable-control-trials",{detail:{trials:this.trials},bubbles:!0}))}setDuration(t){this.duration=t.target.value,this.dispatchEvent(new CustomEvent("detectable-control-duration",{detail:{duration:this.duration},bubbles:!0}))}setCoherence(t){this.coherence=t.target.value,this.dispatchEvent(new CustomEvent("detectable-control-coherence",{detail:{coherence:this.coherence},bubbles:!0}))}setPayoff(t){this.payoff=t.target.value,this.dispatchEvent(new CustomEvent("detectable-control-payoff",{detail:{payoff:this.payoff},bubbles:!0}))}chooseColor(t){this.color=t.target.value,this.dispatchEvent(new CustomEvent("detectable-control-color",{detail:{color:this.color},bubbles:!0}))}flipZRoc(t){this.zRoc=t.target.checked,this.dispatchEvent(new CustomEvent("detectable-control-z-roc",{detail:{zRoc:this.zRoc},bubbles:!0}))}doRun(){this.state="running",this.dispatchEvent(new CustomEvent("detectable-control-run",{detail:{},bubbles:!0}))}doPause(){this.state="paused",this.dispatchEvent(new CustomEvent("detectable-control-pause",{detail:{},bubbles:!0}))}doReset(){this.state="resetted",this.dispatchEvent(new CustomEvent("detectable-control-reset",{detail:{},bubbles:!0}))}complete(){this.state="ended"}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;
        }

        .holder {
          display: flex;

          flex-direction: row;

          align-items: stretch;
          justify-content: center;
        }

        .buttons {
          display: flex;

          flex-direction: column;

          align-items: stretch;
          justify-content: center;
        }

        /* Payoff  Slider */
        .payoff {
          --decidables-spinner-prefix: "$";
        }
      `]}render(){return x$3`
      <div class="holder">
        ${null!=this.trials?x$3`<decidables-slider min="1" max="100" step="1" .value=${this.trials} @change=${this.setTrials.bind(this)} @input=${this.setTrials.bind(this)}>Trials</decidables-slider>`:x$3``}
        ${null!=this.duration?x$3`<decidables-slider min="10" max="2000" step="10" .value=${this.duration} @change=${this.setDuration.bind(this)} @input=${this.setDuration.bind(this)}>Duration</decidables-slider>`:x$3``}
        ${null!=this.coherence?x$3`<decidables-slider min="0" max="1" step=".01" .value=${this.coherence} @change=${this.setCoherence.bind(this)} @input=${this.setCoherence.bind(this)}>Coherence</decidables-slider>`:x$3``}
        ${null!=this.payoff?x$3`<decidables-slider class="payoff" min="0" max="100" step="1" .value=${this.payoff} @change=${this.setPayoff.bind(this)} @input=${this.setPayoff.bind(this)}>Payoff</decidables-slider>`:x$3``}
        ${null!=this.color?x$3`
            <decidables-toggle @change=${this.chooseColor.bind(this)}>
              <span slot="label">Emphasis</span>
              <decidables-toggle-option name="toggle" value="none" ?checked=${"none"===this.color}>None</decidables-toggle-option>
              <decidables-toggle-option name="toggle" value="accuracy" ?checked=${"accuracy"===this.color}>Accuracy</decidables-toggle-option>
              <decidables-toggle-option name="toggle" value="stimulus" ?checked=${"stimulus"===this.color}>Stimulus</decidables-toggle-option>
              <decidables-toggle-option name="toggle" value="response" ?checked=${"response"===this.color}>Response</decidables-toggle-option>
              <decidables-toggle-option name="toggle" value="outcome" ?checked=${"outcome"===this.color}>Outcome</decidables-toggle-option>
              <decidables-toggle-option name="toggle" value="all" ?checked=${"all"===this.color}>All</decidables-toggle-option>
            </decidables-toggle>
          `:x$3``}
        ${null!=this.zRoc?x$3`
            <decidables-switch ?checked=${this.zRoc} @change=${this.flipZRoc.bind(this)}>
              <span class="math-var">z</span>ROC
              <span slot="off-label">ROC</span>
            </decidables-switch>
          `:x$3``}
        ${this.run||this.pause||this.reset?x$3`
            <div class="buttons">
              ${this.run?x$3`<decidables-button name="run" ?disabled=${"running"===this.state||"ended"===this.state} @click=${this.doRun.bind(this)}>Run</decidables-button>`:x$3``}
              ${this.pause?x$3`<decidables-button name="pause" ?disabled=${"running"!==this.state} @click=${this.doPause.bind(this)}>Pause</decidables-button>`:x$3``}
              ${this.reset?x$3`<decidables-button name="reset" ?disabled=${"resetted"===this.state} @click=${this.doReset.bind(this)}>Reset</decidables-button>`:x$3``}
            </div>
          `:x$3``}
      </div>`}}customElements.define("detectable-control",DetectableControl);class DetectableResponse extends DetectableElement{static get properties(){return{feedback:{attribute:"feedback",type:String,reflect:!0},trial:{attribute:"trial",type:Boolean,reflect:!0},payoff:{attribute:"payoff",type:String,reflect:!0},hPayoff:{attribute:"hit-payoff",type:Number,reflect:!0},mPayoff:{attribute:"miss-payoff",type:Number,reflect:!0},faPayoff:{attribute:"false-alarm-payoff",type:Number,reflect:!0},crPayoff:{attribute:"correct-rejection-payoff",type:Number,reflect:!0},nrPayoff:{attribute:"no-response-payoff",type:Number,reflect:!0},state:{attribute:!1,type:String,reflect:!1},trialCount:{attribute:!1,type:Number,reflect:!1},trialTotal:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.feedbacks=["none","accuracy","outcome"],this.feedback="outcome",this.trial=!1,this.payoffs=["none","trial","total"],this.payoff="none",this.hPayoff=0,this.mPayoff=0,this.crPayoff=0,this.faPayoff=0,this.nrPayoff=0,this.states=["off","waiting","feedback"],this.state="off",this.trialCount=0,this.trialTotal=0,this.signals=["present","absent"],this.signal=void 0,this.responses=["present","absent"],this.response=void 0,this.outcomes=["h","m","fa","cr","nr"],this.outcome=void 0,this.accuracies=["c","e","nr"],this.accuracy=void 0,this.h=0,this.m=0,this.cr=0,this.fa=0,this.c=0,this.e=0,this.nr=0}get trialPayoff(){switch(this.outcome){case"h":return this.hPayoff;case"m":return this.mPayoff;case"fa":return this.faPayoff;case"cr":return this.crPayoff;case"nr":return this.nrPayoff;default:return}}get totalPayoff(){return this.h*this.hPayoff+this.m*this.mPayoff+this.cr*this.crPayoff+this.fa*this.faPayoff+this.nr*this.nrPayoff}start(t,s){this.trialCount=s,this.state="waiting",this.signal=t,this.response=void 0,this.outcome=void 0}stop(){this.state="feedback",void 0===this.response&&(this.outcome="nr",this.nr+=1,this.accuracy="nr")}present(){this.responded("present")}absent(){this.responded("absent")}responded(t){this.state="feedback",this.response=t,"present"===this.signal&&"present"===this.response?(this.outcome="h",this.h+=1,this.accuracy="c",this.c+=1):"present"===this.signal&&"absent"===this.response?(this.outcome="m",this.m+=1,this.accuracy="e",this.e+=1):"absent"===this.signal&&"present"===this.response?(this.outcome="fa",this.fa+=1,this.accuracy="e",this.e+=1):"absent"===this.signal&&"absent"===this.response&&(this.outcome="cr",this.cr+=1,this.accuracy="c",this.c+=1),this.dispatchEvent(new CustomEvent("detectable-response",{detail:{trial:this.trialCount,signal:this.signal,response:this.response,outcome:this.outcome,payoff:this.trialPayoff,h:this.h,m:this.m,fa:this.fa,cr:this.cr,nr:this.nr,totalPayoff:this.totalPayoff},bubbles:!0}))}reset(){this.state="off",this.trialCount=0,this.signal=void 0,this.response=void 0,this.outcome=void 0,this.accuracy=void 0,this.h=0,this.m=0,this.cr=0,this.fa=0,this.nr=0,this.c=0,this.e=0}keydown(t){"waiting"===this.state&&("ArrowUp"===t.key?(this.responded("present"),t.preventDefault()):"ArrowDown"===t.key&&(this.responded("absent"),t.preventDefault()))}connectedCallback(){super.connectedCallback(),window.addEventListener("keydown",this.keydown.bind(this))}disconnectedCallback(){window.removeEventListener("keydown",this.keydown.bind(this)),super.disconnectedCallback()}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;
        }

        /* Overall container */
        .holder {
          display: flex;

          flex-direction: row;
        }

        /* Response buttons */
        .responses {
          display: flex;

          flex-direction: column;

          align-items: stretch;
          justify-content: center;
        }

        .waiting[disabled] {
          --decidables-button-background-color: var(---color-element-enabled);
        }

        .selected[disabled][name="present"] {
          --decidables-button-background-color: var(---color-present);
        }

        .selected[disabled][name="absent"] {
          --decidables-button-background-color: var(---color-absent);
        }

        /* Feedback messages */
        .feedbacks {
          display: flex;

          flex-direction: column;

          justify-content: center;
        }

        /* Trial feedback */
        .trial {
          text-align: center;
        }

        .trial .label {
          font-weight: 600;
        }

        /* Outcome feedback */
        .feedback {
          display: flex;

          flex-direction: column;

          align-items: center;
          justify-content: center;

          width: 6rem;
          height: 3.5rem;
          padding: 0.375rem 0.75rem;
          margin: 0.25rem;

          text-align: center;

          background-color: var(---color-element-background);
          border: 1px solid var(---color-element-border);
        }

        :host([payoff="trial"]) .feedback,
        :host([payoff="total"]) .feedback {
          height: 5rem;
        }

        .feedback.h {
          background-color: var(---color-h-light);
        }

        .feedback.m {
          background-color: var(---color-m-light);
        }

        .feedback.fa {
          background-color: var(---color-fa-light);
        }

        .feedback.cr {
          background-color: var(---color-cr-light);
        }

        .feedback.nr {
          background-color: var(---color-nr-light);
        }

        .feedback.c {
          background-color: var(---color-correct-light);
        }

        .feedback.e {
          color: var(---color-text-inverse);

          background-color: var(---color-error-light);
        }

        .feedback .outcome {
          font-weight: 600;
          line-height: 1.15;
        }

        /* Payoff feedback */
        .total {
          text-align: center;
        }

        .total .label {
          font-weight: 600;
        }
      `]}render(){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),s=s=>t.formatToParts(s).map(({type:t,value:s})=>"minusSign"===t?"â":s).reduce((t,s)=>t+s);return x$3`
      <div class="holder">
        <div class="responses">
          <decidables-button name="present" class=${"feedback"===this.state&&"present"===this.response?"selected":"waiting"===this.state?"waiting":""} ?disabled=${"waiting"!==this.state||!0!==this.interactive} @click=${this.present.bind(this)}>Present</decidables-button>
          <decidables-button name="absent" class=${"feedback"===this.state&&"absent"===this.response?"selected":"waiting"===this.state?"waiting":""} ?disabled=${"waiting"!==this.state||!0!==this.interactive} @click=${this.absent.bind(this)}>Absent</decidables-button>
        </div>
        ${this.trial||"none"!==this.feedback||"total"===this.payoff?x$3`
            <div class="feedbacks">
              ${this.trial?x$3`
                  <div class="trial">
                    <span class="label">Trial: </span><span class="count">${this.trialCount}</span><span class="of"> of </span><span class="total">${this.trialTotal}</span>
                  </div>`:x$3``}
              ${"none"!==this.feedback?x$3`
                  <div class=${`feedback ${"feedback"===this.state?"outcome"===this.feedback?this.outcome:this.accuracy:""}`}>
                    ${"feedback"===this.state?"outcome"===this.feedback?"h"===this.outcome?x$3`<span class="outcome">Hit</span>`:"m"===this.outcome?x$3`<span class="outcome">Miss</span>`:"fa"===this.outcome?x$3`<span class="outcome">False<br>Alarm</span>`:"cr"===this.outcome?x$3`<span class="outcome">Correct<br>Rejection</span>`:x$3`<span class="outcome">No<br>Response</span>`:"c"===this.accuracy?x$3`<span class="outcome">Correct</span>`:"e"===this.accuracy?x$3`<span class="outcome">Error</span>`:x$3`<span class="outcome">No<br>Response</span>`:""}
                    ${"feedback"!==this.state||"trial"!==this.payoff&&"total"!==this.payoff?x$3``:x$3`<span class="payoff">${s(this.trialPayoff)}</span>`}
                  </div>`:x$3``}
              ${"total"===this.payoff?x$3`
                  <div class="total">
                    <span class="label">Total: </span><span class="value">${s(this.totalPayoff)}</span>
                  </div>`:x$3``}
            </div>`:x$3``}
      </div>`}}customElements.define("detectable-response",DetectableResponse);var jstat$1={exports:{}},jstat=jstat$1.exports;jstat$1.exports=function(){var t=function(t,s){var e=Array.prototype.concat,B=Array.prototype.slice,i=Object.prototype.toString;function F(s,e){var B=s>e?s:e;return t.pow(10,17-~~(t.log(B>0?B:-B)*t.LOG10E))}var Q=Array.isArray||function(t){return"[object Array]"===i.call(t)};function l(t){return"[object Function]"===i.call(t)}function U(t){return"number"==typeof t&&t-t===0}function a(t){return e.apply([],t)}function g(){return new g._init(arguments)}function I(){return 0}function c(){return 1}function n(t,s){return t===s?1:0}g.fn=g.prototype,g._init=function(t){if(Q(t[0]))if(Q(t[0][0])){l(t[1])&&(t[0]=g.map(t[0],t[1]));for(var s=0;s<t[0].length;s++)this[s]=t[0][s];this.length=t[0].length}else this[0]=l(t[1])?g.map(t[0],t[1]):t[0],this.length=1;else if(U(t[0]))this[0]=g.seq.apply(null,t),this.length=1;else{if(t[0]instanceof g)return g(t[0].toArray());this[0]=[],this.length=1}return this},g._init.prototype=g.prototype,g._init.constructor=g,g.utils={calcRdx:F,isArray:Q,isFunction:l,isNumber:U,toVector:a},g._random_fn=t.random,g.setRandom=function(t){if("function"!=typeof t)throw new TypeError("fn is not a function");g._random_fn=t},g.extend=function(t){var s,e;if(1===arguments.length){for(e in t)g[e]=t[e];return this}for(s=1;s<arguments.length;s++)for(e in arguments[s])t[e]=arguments[s][e];return t},g.rows=function(t){return t.length||1},g.cols=function(t){return t[0].length||1},g.dimensions=function(t){return{rows:g.rows(t),cols:g.cols(t)}},g.row=function(t,s){return Q(s)?s.map(function(s){return g.row(t,s)}):t[s]},g.rowa=function(t,s){return g.row(t,s)},g.col=function(t,s){if(Q(s)){var e=g.arange(t.length).map(function(){return new Array(s.length)});return s.forEach(function(s,B){g.arange(t.length).forEach(function(i){e[i][B]=t[i][s]})}),e}for(var B=new Array(t.length),i=0;i<t.length;i++)B[i]=[t[i][s]];return B},g.cola=function(t,s){return g.col(t,s).map(function(t){return t[0]})},g.diag=function(t){for(var s=g.rows(t),e=new Array(s),B=0;B<s;B++)e[B]=[t[B][B]];return e},g.antidiag=function(t){for(var s=g.rows(t)-1,e=new Array(s),B=0;s>=0;s--,B++)e[B]=[t[B][s]];return e},g.transpose=function(t){var s,e,B,i,F,l=[];for(Q(t[0])||(t=[t]),e=t.length,B=t[0].length,F=0;F<B;F++){for(s=new Array(e),i=0;i<e;i++)s[i]=t[i][F];l.push(s)}return 1===l.length?l[0]:l},g.map=function(t,s,e){var B,i,F,l,U;for(Q(t[0])||(t=[t]),i=t.length,F=t[0].length,l=e?t:new Array(i),B=0;B<i;B++)for(l[B]||(l[B]=new Array(F)),U=0;U<F;U++)l[B][U]=s(t[B][U],B,U);return 1===l.length?l[0]:l},g.cumreduce=function(t,s,e){var B,i,F,l,U;for(Q(t[0])||(t=[t]),i=t.length,F=t[0].length,l=e?t:new Array(i),B=0;B<i;B++)for(l[B]||(l[B]=new Array(F)),F>0&&(l[B][0]=t[B][0]),U=1;U<F;U++)l[B][U]=s(l[B][U-1],t[B][U]);return 1===l.length?l[0]:l},g.alter=function(t,s){return g.map(t,s,!0)},g.create=function(t,s,e){var B,i,F=new Array(t);for(l(s)&&(e=s,s=t),B=0;B<t;B++)for(F[B]=new Array(s),i=0;i<s;i++)F[B][i]=e(B,i);return F},g.zeros=function(t,s){return U(s)||(s=t),g.create(t,s,I)},g.ones=function(t,s){return U(s)||(s=t),g.create(t,s,c)},g.rand=function(t,s){return U(s)||(s=t),g.create(t,s,g._random_fn)},g.identity=function(t,s){return U(s)||(s=t),g.create(t,s,n)},g.symmetric=function(t){var s,e,B=t.length;if(t.length!==t[0].length)return!1;for(s=0;s<B;s++)for(e=0;e<B;e++)if(t[e][s]!==t[s][e])return!1;return!0},g.clear=function(t){return g.alter(t,I)},g.seq=function(t,s,e,B){l(B)||(B=!1);var i,Q=[],U=F(t,s),a=(s*U-t*U)/((e-1)*U),g=t;for(i=0;g<=s&&i<e;g=(t*U+a*U*++i)/U)Q.push(B?B(g,i):g);return Q},g.arange=function(t,e,B){var i,F=[];if(B=B||1,e===s&&(e=t,t=0),t===e||0===B)return[];if(t<e&&B<0)return[];if(t>e&&B>0)return[];if(B>0)for(i=t;i<e;i+=B)F.push(i);else for(i=t;i>e;i+=B)F.push(i);return F},g.slice=function(){function t(t,e,B,i){var F,Q=[],l=t.length;if(e===s&&B===s&&i===s)return g.copy(t);if(i=i||1,(e=(e=e||0)>=0?e:l+e)===(B=(B=B||t.length)>=0?B:l+B)||0===i)return[];if(e<B&&i<0)return[];if(e>B&&i>0)return[];if(i>0)for(F=e;F<B;F+=i)Q.push(t[F]);else for(F=e;F>B;F+=i)Q.push(t[F]);return Q}function e(s,e){var B,i;return U((e=e||{}).row)?U(e.col)?s[e.row][e.col]:t(g.rowa(s,e.row),(B=e.col||{}).start,B.end,B.step):U(e.col)?t(g.cola(s,e.col),(i=e.row||{}).start,i.end,i.step):(i=e.row||{},B=e.col||{},t(s,i.start,i.end,i.step).map(function(s){return t(s,B.start,B.end,B.step)}))}return e}(),g.sliceAssign=function(e,B,i){var F,Q;if(U(B.row)){if(U(B.col))return e[B.row][B.col]=i;B.col=B.col||{},B.col.start=B.col.start||0,B.col.end=B.col.end||e[0].length,B.col.step=B.col.step||1,F=g.arange(B.col.start,t.min(e.length,B.col.end),B.col.step);var l=B.row;return F.forEach(function(t,s){e[l][t]=i[s]}),e}if(U(B.col)){B.row=B.row||{},B.row.start=B.row.start||0,B.row.end=B.row.end||e.length,B.row.step=B.row.step||1,Q=g.arange(B.row.start,t.min(e[0].length,B.row.end),B.row.step);var a=B.col;return Q.forEach(function(t,s){e[t][a]=i[s]}),e}return i[0].length===s&&(i=[i]),B.row.start=B.row.start||0,B.row.end=B.row.end||e.length,B.row.step=B.row.step||1,B.col.start=B.col.start||0,B.col.end=B.col.end||e[0].length,B.col.step=B.col.step||1,Q=g.arange(B.row.start,t.min(e.length,B.row.end),B.row.step),F=g.arange(B.col.start,t.min(e[0].length,B.col.end),B.col.step),Q.forEach(function(t,s){F.forEach(function(B,F){e[t][B]=i[s][F]})}),e},g.diagonal=function(t){var s=g.zeros(t.length,t.length);return t.forEach(function(t,e){s[e][e]=t}),s},g.copy=function(t){return t.map(function(t){return U(t)?t:t.map(function(t){return t})})};var r=g.prototype;return r.length=0,r.push=Array.prototype.push,r.sort=Array.prototype.sort,r.splice=Array.prototype.splice,r.slice=Array.prototype.slice,r.toArray=function(){return this.length>1?B.call(this):B.call(this)[0]},r.map=function(t,s){return g(g.map(this,t,s))},r.cumreduce=function(t,s){return g(g.cumreduce(this,t,s))},r.alter=function(t){return g.alter(this,t),this},function(t){for(var s=0;s<t.length;s++)(function(t){r[t]=function(s){var e,B=this;return s?(setTimeout(function(){s.call(B,r[t].call(B))}),this):(e=g[t](this),Q(e)?g(e):e)}})(t[s])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(t){for(var s=0;s<t.length;s++)(function(t){r[t]=function(s,e){var B=this;return e?(setTimeout(function(){e.call(B,r[t].call(B,s))}),this):g(g[t](this,s))}})(t[s])}("row col".split(" ")),function(t){for(var s=0;s<t.length;s++)(function(t){r[t]=function(){return g(g[t].apply(null,arguments))}})(t[s])}("create zeros ones rand identity".split(" ")),g}(Math);return function(t,s){var e=t.utils.isFunction;function B(t,s){return t-s}function i(t,e,B){return s.max(e,s.min(t,B))}t.sum=function(t){for(var s=0,e=t.length;--e>=0;)s+=t[e];return s},t.sumsqrd=function(t){for(var s=0,e=t.length;--e>=0;)s+=t[e]*t[e];return s},t.sumsqerr=function(s){for(var e,B=t.mean(s),i=0,F=s.length;--F>=0;)i+=(e=s[F]-B)*e;return i},t.sumrow=function(t){for(var s=0,e=t.length;--e>=0;)s+=t[e];return s},t.product=function(t){for(var s=1,e=t.length;--e>=0;)s*=t[e];return s},t.min=function(t){for(var s=t[0],e=0;++e<t.length;)t[e]<s&&(s=t[e]);return s},t.max=function(t){for(var s=t[0],e=0;++e<t.length;)t[e]>s&&(s=t[e]);return s},t.unique=function(t){for(var s={},e=[],B=0;B<t.length;B++)s[t[B]]||(s[t[B]]=!0,e.push(t[B]));return e},t.mean=function(s){return t.sum(s)/s.length},t.meansqerr=function(s){return t.sumsqerr(s)/s.length},t.geomean=function(e){var B=e.map(s.log),i=t.mean(B);return s.exp(i)},t.median=function(t){var s=t.length,e=t.slice().sort(B);return 1&s?e[s/2|0]:(e[s/2-1]+e[s/2])/2},t.cumsum=function(s){return t.cumreduce(s,function(t,s){return t+s})},t.cumprod=function(s){return t.cumreduce(s,function(t,s){return t*s})},t.diff=function(t){var s,e=[],B=t.length;for(s=1;s<B;s++)e.push(t[s]-t[s-1]);return e},t.rank=function(t){var s,e=[],i={};for(s=0;s<t.length;s++)i[U=t[s]]?i[U]++:(i[U]=1,e.push(U));var F=e.sort(B),Q={},l=1;for(s=0;s<F.length;s++){var U,a=i[U=F[s]],g=(l+(l+a-1))/2;Q[U]=g,l+=a}return t.map(function(t){return Q[t]})},t.mode=function(t){var s,e=t.length,i=t.slice().sort(B),F=1,Q=0,l=0,U=[];for(s=0;s<e;s++)i[s]===i[s+1]?F++:(F>Q?(U=[i[s]],Q=F,l=0):F===Q&&(U.push(i[s]),l++),F=1);return 0===l?U[0]:U},t.range=function(s){return t.max(s)-t.min(s)},t.variance=function(s,e){return t.sumsqerr(s)/(s.length-(e?1:0))},t.pooledvariance=function(s){var e=s.reduce(function(s,e){return s+t.sumsqerr(e)},0),B=s.reduce(function(t,s){return t+s.length},0);return e/(B-s.length)},t.deviation=function(s){for(var e=t.mean(s),B=s.length,i=new Array(B),F=0;F<B;F++)i[F]=s[F]-e;return i},t.stdev=function(e,B){return s.sqrt(t.variance(e,B))},t.pooledstdev=function(e){return s.sqrt(t.pooledvariance(e))},t.meandev=function(e){for(var B=t.mean(e),i=[],F=e.length-1;F>=0;F--)i.push(s.abs(e[F]-B));return t.mean(i)},t.meddev=function(e){for(var B=t.median(e),i=[],F=e.length-1;F>=0;F--)i.push(s.abs(e[F]-B));return t.median(i)},t.coeffvar=function(s){return t.stdev(s)/t.mean(s)},t.quartiles=function(t){var e=t.length,i=t.slice().sort(B);return[i[s.round(e/4)-1],i[s.round(e/2)-1],i[s.round(3*e/4)-1]]},t.quantiles=function(t,e,F,Q){var l,U,a,g,I,c=t.slice().sort(B),n=[e.length],r=t.length;for(void 0===F&&(F=3/8),void 0===Q&&(Q=3/8),l=0;l<e.length;l++)a=r*(U=e[l])+(F+U*(1-F-Q)),g=s.floor(i(a,1,r-1)),I=i(a-g,0,1),n[l]=(1-I)*c[g-1]+I*c[g];return n},t.percentile=function(t,s,e){var i=t.slice().sort(B),F=s*(i.length+(e?1:-1))+(e?0:1),Q=parseInt(F),l=F-Q;return Q+1<i.length?i[Q-1]+l*(i[Q]-i[Q-1]):i[Q-1]},t.percentileOfScore=function(t,s,e){var B,i,F=0,Q=t.length,l=!1;for("strict"===e&&(l=!0),i=0;i<Q;i++)B=t[i],(l&&B<s||!l&&B<=s)&&F++;return F/Q},t.histogram=function(e,B){B=B||4;var i,F=t.min(e),Q=(t.max(e)-F)/B,l=e.length,U=[];for(i=0;i<B;i++)U[i]=0;for(i=0;i<l;i++)U[s.min(s.floor((e[i]-F)/Q),B-1)]+=1;return U},t.covariance=function(s,e){var B,i=t.mean(s),F=t.mean(e),Q=s.length,l=new Array(Q);for(B=0;B<Q;B++)l[B]=(s[B]-i)*(e[B]-F);return t.sum(l)/(Q-1)},t.corrcoeff=function(s,e){return t.covariance(s,e)/t.stdev(s,1)/t.stdev(e,1)},t.spearmancoeff=function(s,e){return s=t.rank(s),e=t.rank(e),t.corrcoeff(s,e)},t.stanMoment=function(e,B){for(var i=t.mean(e),F=t.stdev(e),Q=e.length,l=0,U=0;U<Q;U++)l+=s.pow((e[U]-i)/F,B);return l/e.length},t.skewness=function(s){return t.stanMoment(s,3)},t.kurtosis=function(s){return t.stanMoment(s,4)-3};var F=t.prototype;!function(s){for(var B=0;B<s.length;B++)(function(s){F[s]=function(B,i){var Q=[],l=0,U=this;if(e(B)&&(i=B,B=!1),i)return setTimeout(function(){i.call(U,F[s].call(U,B))}),this;if(this.length>1){for(U=!0===B?this:this.transpose();l<U.length;l++)Q[l]=t[s](U[l]);return Q}return t[s](this[0],B)}})(s[B])}("cumsum cumprod".split(" ")),function(s){for(var B=0;B<s.length;B++)(function(s){F[s]=function(B,i){var Q=[],l=0,U=this;if(e(B)&&(i=B,B=!1),i)return setTimeout(function(){i.call(U,F[s].call(U,B))}),this;if(this.length>1){for("sumrow"!==s&&(U=!0===B?this:this.transpose());l<U.length;l++)Q[l]=t[s](U[l]);return!0===B?t[s](t.utils.toVector(Q)):Q}return t[s](this[0],B)}})(s[B])}("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" ")),function(s){for(var B=0;B<s.length;B++)(function(s){F[s]=function(){var B,i=[],Q=0,l=this,U=Array.prototype.slice.call(arguments);if(e(U[U.length-1])){B=U[U.length-1];var a=U.slice(0,U.length-1);return setTimeout(function(){B.call(l,F[s].apply(l,a))}),this}B=void 0;var g=function(e){return t[s].apply(l,[e].concat(U))};if(this.length>1){for(l=l.transpose();Q<l.length;Q++)i[Q]=g(l[Q]);return i}return g(this[0])}})(s[B])}("quantiles percentileOfScore".split(" "))}(t,Math),function(t,s){t.gammaln=function(t){var e,B,i,F=0,Q=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],l=1.000000000190015;for(i=(B=e=t)+5.5,i-=(e+.5)*s.log(i);F<6;F++)l+=Q[F]/++B;return s.log(2.5066282746310007*l/e)-i},t.loggam=function(t){var e,B,i,F,Q,l,U,a=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(e=t,U=0,1==t||2==t)return 0;for(t<=7&&(e=t+(U=s.floor(7-t))),B=1/(e*e),i=2*s.PI,Q=a[9],l=8;l>=0;l--)Q*=B,Q+=a[l];if(F=Q/e+.5*s.log(i)+(e-.5)*s.log(e)-e,t<=7)for(l=1;l<=U;l++)F-=s.log(e-1),e-=1;return F},t.gammafn=function(t){var e,B,i,F,Q=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],l=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],U=!1,a=0,g=0,I=0,c=t;if(t>171.6243769536076)return 1/0;if(c<=0){if(!(F=c%1+36e-17))return 1/0;U=(1&c?-1:1)*s.PI/s.sin(s.PI*F),c=1-c}for(i=c,B=c<1?c++:(c-=a=(0|c)-1)-1,e=0;e<8;++e)I=(I+Q[e])*B,g=g*B+l[e];if(F=I/g+1,i<c)F/=i;else if(i>c)for(e=0;e<a;++e)F*=c,c++;return U&&(F=U/F),F},t.gammap=function(s,e){return t.lowRegGamma(s,e)*t.gammafn(s)},t.lowRegGamma=function(e,B){var i,F=t.gammaln(e),Q=e,l=1/e,U=l,a=B+1-e,g=1/1e-30,I=1/a,c=I,n=1,r=-~(8.5*s.log(e>=1?e:1/e)+.4*e+17);if(B<0||e<=0)return NaN;if(B<e+1){for(;n<=r;n++)l+=U*=B/++Q;return l*s.exp(-B+e*s.log(B)-F)}for(;n<=r;n++)c*=(I=1/(I=(i=-n*(n-e))*I+(a+=2)))*(g=a+i/g);return 1-c*s.exp(-B+e*s.log(B)-F)},t.factorialln=function(s){return s<0?NaN:t.gammaln(s+1)},t.factorial=function(s){return s<0?NaN:t.gammafn(s+1)},t.combination=function(e,B){return e>170||B>170?s.exp(t.combinationln(e,B)):t.factorial(e)/t.factorial(B)/t.factorial(e-B)},t.combinationln=function(s,e){return t.factorialln(s)-t.factorialln(e)-t.factorialln(s-e)},t.permutation=function(s,e){return t.factorial(s)/t.factorial(s-e)},t.betafn=function(e,B){if(!(e<=0||B<=0))return e+B>170?s.exp(t.betaln(e,B)):t.gammafn(e)*t.gammafn(B)/t.gammafn(e+B)},t.betaln=function(s,e){return t.gammaln(s)+t.gammaln(e)-t.gammaln(s+e)},t.betacf=function(t,e,B){var i,F,Q,l,U=1e-30,a=1,g=e+B,I=e+1,c=e-1,n=1,r=1-g*t/I;for(s.abs(r)<U&&(r=U),l=r=1/r;a<=100&&(r=1+(F=a*(B-a)*t/((c+(i=2*a))*(e+i)))*r,s.abs(r)<U&&(r=U),n=1+F/n,s.abs(n)<U&&(n=U),l*=(r=1/r)*n,r=1+(F=-(e+a)*(g+a)*t/((e+i)*(I+i)))*r,s.abs(r)<U&&(r=U),n=1+F/n,s.abs(n)<U&&(n=U),l*=Q=(r=1/r)*n,!(s.abs(Q-1)<3e-7));a++);return l},t.gammapinv=function(e,B){var i,F,Q,l,U,a,g=0,I=B-1,c=1e-8,n=t.gammaln(B);if(e>=1)return s.max(100,B+100*s.sqrt(B));if(e<=0)return 0;for(B>1?(U=s.log(I),a=s.exp(I*(U-1)-n),l=e<.5?e:1-e,i=(2.30753+.27061*(F=s.sqrt(-2*s.log(l))))/(1+F*(.99229+.04481*F))-F,e<.5&&(i=-i),i=s.max(.001,B*s.pow(1-1/(9*B)-i/(3*s.sqrt(B)),3))):i=e<(F=1-B*(.253+.12*B))?s.pow(e/F,1/B):1-s.log(1-(e-F)/(1-F));g<12;g++){if(i<=0)return 0;if((i-=F=(Q=(t.lowRegGamma(B,i)-e)/(F=B>1?a*s.exp(-(i-I)+I*(s.log(i)-U)):s.exp(-i+I*s.log(i)-n)))/(1-.5*s.min(1,Q*((B-1)/i-1))))<=0&&(i=.5*(i+F)),s.abs(F)<c*i)break}return i},t.erf=function(t){var e,B,i,F,Q=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,1.5626441722e-8,-8.5238095915e-8,6.529054439e-9,5.059343495e-9,-9.91364156e-10,-2.27365122e-10,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],l=Q.length-1,U=!1,a=0,g=0;for(t<0&&(t=-t,U=!0),B=4*(e=2/(2+t))-2;l>0;l--)i=a,a=B*a-g+Q[l],g=i;return F=e*s.exp(-t*t+.5*(Q[0]+B*a)-g),U?F-1:1-F},t.erfc=function(s){return 1-t.erf(s)},t.erfcinv=function(e){var B,i,F,Q,l=0;if(e>=2)return-100;if(e<=0)return 100;for(Q=e<1?e:2-e,B=-.70711*((2.30753+.27061*(F=s.sqrt(-2*s.log(Q/2))))/(1+F*(.99229+.04481*F))-F);l<2;l++)B+=(i=t.erfc(B)-Q)/(1.1283791670955126*s.exp(-B*B)-B*i);return e<1?B:-B},t.ibetainv=function(e,B,i){var F,Q,l,U,a,g,I,c,n,r,o=1e-8,d=B-1,C=i-1,b=0;if(e<=0)return 0;if(e>=1)return 1;for(B>=1&&i>=1?(l=e<.5?e:1-e,g=(2.30753+.27061*(U=s.sqrt(-2*s.log(l))))/(1+U*(.99229+.04481*U))-U,e<.5&&(g=-g),I=(g*g-3)/6,c=2/(1/(2*B-1)+1/(2*i-1)),n=g*s.sqrt(I+c)/c-(1/(2*i-1)-1/(2*B-1))*(I+5/6-2/(3*c)),g=B/(B+i*s.exp(2*n))):(F=s.log(B/(B+i)),Q=s.log(i/(B+i)),g=e<(U=s.exp(B*F)/B)/(n=U+(a=s.exp(i*Q)/i))?s.pow(B*n*e,1/B):1-s.pow(i*n*(1-e),1/i)),r=-t.gammaln(B)-t.gammaln(i)+t.gammaln(B+i);b<10;b++){if(0===g||1===g)return g;if((g-=U=(a=(t.ibeta(g,B,i)-e)/(U=s.exp(d*s.log(g)+C*s.log(1-g)+r)))/(1-.5*s.min(1,a*(d/g-C/(1-g)))))<=0&&(g=.5*(g+U)),g>=1&&(g=.5*(g+U+1)),s.abs(U)<o*g&&b>0)break}return g},t.ibeta=function(e,B,i){var F=0===e||1===e?0:s.exp(t.gammaln(B+i)-t.gammaln(B)-t.gammaln(i)+B*s.log(e)+i*s.log(1-e));return!(e<0||e>1)&&(e<(B+1)/(B+i+2)?F*t.betacf(e,B,i)/B:1-F*t.betacf(1-e,i,B)/i)},t.randn=function(e,B){var i,F,Q,l,U;if(B||(B=e),e)return t.create(e,B,function(){return t.randn()});do{i=t._random_fn(),F=1.7156*(t._random_fn()-.5),U=(Q=i-.449871)*Q+(l=s.abs(F)+.386595)*(.196*l-.25472*Q)}while(U>.27597&&(U>.27846||F*F>-4*s.log(i)*i*i));return F/i},t.randg=function(e,B,i){var F,Q,l,U,a,g,I=e;if(i||(i=B),e||(e=1),B)return(g=t.zeros(B,i)).alter(function(){return t.randg(e)}),g;e<1&&(e+=1),F=e-1/3,Q=1/s.sqrt(9*F);do{do{U=1+Q*(a=t.randn())}while(U<=0);U*=U*U,l=t._random_fn()}while(l>1-.331*s.pow(a,4)&&s.log(l)>.5*a*a+F*(1-U+s.log(U)));if(e==I)return F*U;do{l=t._random_fn()}while(0===l);return s.pow(l,1/I)*F*U},function(s){for(var e=0;e<s.length;e++)(function(s){t.fn[s]=function(){return t(t.map(this,function(e){return t[s](e)}))}})(s[e])}("gammaln gammafn factorial factorialln".split(" ")),function(s){for(var e=0;e<s.length;e++)(function(s){t.fn[s]=function(){return t(t[s].apply(null,arguments))}})(s[e])}("randn".split(" "))}(t,Math),function(t,s){function e(t,e,B,i){for(var F,Q=0,l=1,U=1,a=1,g=0,I=0;s.abs((U-I)/U)>i;)I=U,l=a+(F=-(e+g)*(e+B+g)*t/(e+2*g)/(e+2*g+1))*l,U=(Q=U+F*Q)+(F=(g+=1)*(B-g)*t/(e+2*g-1)/(e+2*g))*U,Q/=a=l+F*a,l/=a,U/=a,a=1;return U/e}function B(t){return t/s.abs(t)}function i(e,B,i){var F=12,Q=6,l=-30,U=-50,a=60,g=8,I=3,c=2,n=3,r=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],o=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],d=.5*e;if(d>=g)return 1;var C,b=2*t.normal.cdf(d,0,1,1,0)-1;b=b>=s.exp(U/i)?s.pow(b,i):0;for(var u=d,h=(g-d)/(C=e>I?c:n),y=u+h,x=0,A=i-1,G=1;G<=C;G++){for(var R=0,L=.5*(y+u),m=.5*(y-u),S=1;S<=F;S++){var p,V=L+m*(Q<S?r[(p=F-S+1)-1]:-r[(p=S)-1]),Z=V*V;if(Z>a)break;var E=2*t.normal.cdf(V,0,1,1,0)*.5-2*t.normal.cdf(V,e,1,1,0)*.5;E>=s.exp(l/A)&&(R+=E=o[p-1]*s.exp(-.5*Z)*s.pow(E,A))}x+=R*=2*m*i/s.sqrt(2*s.PI),u=y,y+=h}return(b+=x)<=s.exp(l/B)?0:(b=s.pow(b,B))>=1?1:b}function F(t,e,B){var i=.322232421088,F=.099348462606,Q=-1,l=.588581570495,U=-.342242088547,a=.531103462366,g=-.204231210125,I=.10353775285,c=-453642210148e-16,n=.0038560700634,r=.8832,o=.2368,d=1.208,C=1.4142,b=120,u=.5-.5*t,h=s.sqrt(s.log(1/(u*u))),y=h+((((h*c+g)*h+U)*h+Q)*h+i)/((((h*n+I)*h+a)*h+l)*h+F);B<b&&(y+=(y*y*y+y)/B/4);var x=r-o*y;return B<b&&(x+=-1.214/B+d*y/B),y*(x*s.log(e-1)+C)}!function(s){for(var e=0;e<s.length;e++)(function(s){t[s]=function t(s,e,B){return this instanceof t?(this._a=s,this._b=e,this._c=B,this):new t(s,e,B)},t.fn[s]=function(e,B,i){var F=t[s](e,B,i);return F.data=this,F},t[s].prototype.sample=function(e){var B=this._a,i=this._b,F=this._c;return e?t.alter(e,function(){return t[s].sample(B,i,F)}):t[s].sample(B,i,F)},function(e){for(var B=0;B<e.length;B++)(function(e){t[s].prototype[e]=function(B){var i=this._a,F=this._b,Q=this._c;return B||0===B||(B=this.data),"number"!=typeof B?t.fn.map.call(B,function(B){return t[s][e](B,i,F,Q)}):t[s][e](B,i,F,Q)}})(e[B])}("pdf cdf inv".split(" ")),function(e){for(var B=0;B<e.length;B++)(function(e){t[s].prototype[e]=function(){return t[s][e](this._a,this._b,this._c)}})(e[B])}("mean median mode variance".split(" "))})(s[e])}("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy laplace lognormal noncentralt normal pareto studentt weibull uniform binomial negbin hypgeom poisson triangular tukey arcsine".split(" ")),t.extend(t.beta,{pdf:function(e,B,i){return e>1||e<0?0:1==B&&1==i?1:B<512&&i<512?s.pow(e,B-1)*s.pow(1-e,i-1)/t.betafn(B,i):s.exp((B-1)*s.log(e)+(i-1)*s.log(1-e)-t.betaln(B,i))},cdf:function(s,e,B){return s>1||s<0?1*(s>1):t.ibeta(s,e,B)},inv:function(s,e,B){return t.ibetainv(s,e,B)},mean:function(t,s){return t/(t+s)},median:function(s,e){return t.ibetainv(.5,s,e)},mode:function(t,s){return(t-1)/(t+s-2)},sample:function(s,e){var B=t.randg(s);return B/(B+t.randg(e))},variance:function(t,e){return t*e/(s.pow(t+e,2)*(t+e+1))}}),t.extend(t.centralF,{pdf:function(e,B,i){var F;return e<0?0:B<=2?0===e&&B<2?1/0:0===e&&2===B?1:1/t.betafn(B/2,i/2)*s.pow(B/i,B/2)*s.pow(e,B/2-1)*s.pow(1+B/i*e,-(B+i)/2):(F=B*e/(i+e*B),B*(i/(i+e*B))/2*t.binomial.pdf((B-2)/2,(B+i-2)/2,F))},cdf:function(s,e,B){return s<0?0:t.ibeta(e*s/(e*s+B),e/2,B/2)},inv:function(s,e,B){return B/(e*(1/t.ibetainv(s,e/2,B/2)-1))},mean:function(t,s){return s>2?s/(s-2):void 0},mode:function(t,s){return t>2?s*(t-2)/(t*(s+2)):void 0},sample:function(s,e){return 2*t.randg(s/2)/s/(2*t.randg(e/2)/e)},variance:function(t,s){if(!(s<=4))return 2*s*s*(t+s-2)/(t*(s-2)*(s-2)*(s-4))}}),t.extend(t.cauchy,{pdf:function(t,e,B){return B<0?0:B/(s.pow(t-e,2)+s.pow(B,2))/s.PI},cdf:function(t,e,B){return s.atan((t-e)/B)/s.PI+.5},inv:function(t,e,B){return e+B*s.tan(s.PI*(t-.5))},median:function(t){return t},mode:function(t){return t},sample:function(e,B){return t.randn()*s.sqrt(1/(2*t.randg(.5)))*B+e}}),t.extend(t.chisquare,{pdf:function(e,B){return e<0?0:0===e&&2===B?.5:s.exp((B/2-1)*s.log(e)-e/2-B/2*s.log(2)-t.gammaln(B/2))},cdf:function(s,e){return s<0?0:t.lowRegGamma(e/2,s/2)},inv:function(s,e){return 2*t.gammapinv(s,.5*e)},mean:function(t){return t},median:function(t){return t*s.pow(1-2/(9*t),3)},mode:function(t){return t-2>0?t-2:0},sample:function(s){return 2*t.randg(s/2)},variance:function(t){return 2*t}}),t.extend(t.exponential,{pdf:function(t,e){return t<0?0:e*s.exp(-e*t)},cdf:function(t,e){return t<0?0:1-s.exp(-e*t)},inv:function(t,e){return-s.log(1-t)/e},mean:function(t){return 1/t},median:function(t){return 1/t*s.log(2)},mode:function(){return 0},sample:function(e){return-1/e*s.log(t._random_fn())},variance:function(t){return s.pow(t,-2)}}),t.extend(t.gamma,{pdf:function(e,B,i){return e<0?0:0===e&&1===B?1/i:s.exp((B-1)*s.log(e)-e/i-t.gammaln(B)-B*s.log(i))},cdf:function(s,e,B){return s<0?0:t.lowRegGamma(e,s/B)},inv:function(s,e,B){return t.gammapinv(s,e)*B},mean:function(t,s){return t*s},mode:function(t,s){if(t>1)return(t-1)*s},sample:function(s,e){return t.randg(s)*e},variance:function(t,s){return t*s*s}}),t.extend(t.invgamma,{pdf:function(e,B,i){return e<=0?0:s.exp(-(B+1)*s.log(e)-i/e-t.gammaln(B)+B*s.log(i))},cdf:function(s,e,B){return s<=0?0:1-t.lowRegGamma(e,B/s)},inv:function(s,e,B){return B/t.gammapinv(1-s,e)},mean:function(t,s){return t>1?s/(t-1):void 0},mode:function(t,s){return s/(t+1)},sample:function(s,e){return e/t.randg(s)},variance:function(t,s){if(!(t<=2))return s*s/((t-1)*(t-1)*(t-2))}}),t.extend(t.kumaraswamy,{pdf:function(t,e,B){return 0===t&&1===e?B:1===t&&1===B?e:s.exp(s.log(e)+s.log(B)+(e-1)*s.log(t)+(B-1)*s.log(1-s.pow(t,e)))},cdf:function(t,e,B){return t<0?0:t>1?1:1-s.pow(1-s.pow(t,e),B)},inv:function(t,e,B){return s.pow(1-s.pow(1-t,1/B),1/e)},mean:function(s,e){return e*t.gammafn(1+1/s)*t.gammafn(e)/t.gammafn(1+1/s+e)},median:function(t,e){return s.pow(1-s.pow(2,-1/e),1/t)},mode:function(t,e){if(t>=1&&e>=1&&1!==t&&1!==e)return s.pow((t-1)/(t*e-1),1/t)},variance:function(){throw new Error("variance not yet implemented")}}),t.extend(t.lognormal,{pdf:function(t,e,B){return t<=0?0:s.exp(-s.log(t)-.5*s.log(2*s.PI)-s.log(B)-s.pow(s.log(t)-e,2)/(2*B*B))},cdf:function(e,B,i){return e<0?0:.5+.5*t.erf((s.log(e)-B)/s.sqrt(2*i*i))},inv:function(e,B,i){return s.exp(-1.4142135623730951*i*t.erfcinv(2*e)+B)},mean:function(t,e){return s.exp(t+e*e/2)},median:function(t){return s.exp(t)},mode:function(t,e){return s.exp(t-e*e)},sample:function(e,B){return s.exp(t.randn()*B+e)},variance:function(t,e){return(s.exp(e*e)-1)*s.exp(2*t+e*e)}}),t.extend(t.noncentralt,{pdf:function(e,B,i){var F=1e-14;return s.abs(i)<F?t.studentt.pdf(e,B):s.abs(e)<F?s.exp(t.gammaln((B+1)/2)-i*i/2-.5*s.log(s.PI*B)-t.gammaln(B/2)):B/e*(t.noncentralt.cdf(e*s.sqrt(1+2/B),B+2,i)-t.noncentralt.cdf(e,B,i))},cdf:function(e,B,i){var F=1e-14,Q=200;if(s.abs(i)<F)return t.studentt.cdf(e,B);var l=!1;e<0&&(l=!0,i=-i);for(var U=t.normal.cdf(-i,0,1),a=F+1,g=a,I=e*e/(e*e+B),c=0,n=s.exp(-i*i/2),r=s.exp(-i*i/2-.5*s.log(2)-t.gammaln(1.5))*i;c<Q||g>F||a>F;)g=a,c>0&&(n*=i*i/(2*c),r*=i*i/(2*(c+.5))),U+=.5*(a=n*t.beta.cdf(I,c+.5,B/2)+r*t.beta.cdf(I,c+1,B/2)),c++;return l?1-U:U}}),t.extend(t.normal,{pdf:function(t,e,B){return s.exp(-.5*s.log(2*s.PI)-s.log(B)-s.pow(t-e,2)/(2*B*B))},cdf:function(e,B,i){return.5*(1+t.erf((e-B)/s.sqrt(2*i*i)))},inv:function(s,e,B){return-1.4142135623730951*B*t.erfcinv(2*s)+e},mean:function(t){return t},median:function(t){return t},mode:function(t){return t},sample:function(s,e){return t.randn()*e+s},variance:function(t,s){return s*s}}),t.extend(t.pareto,{pdf:function(t,e,B){return t<e?0:B*s.pow(e,B)/s.pow(t,B+1)},cdf:function(t,e,B){return t<e?0:1-s.pow(e/t,B)},inv:function(t,e,B){return e/s.pow(1-t,1/B)},mean:function(t,e){if(!(e<=1))return e*s.pow(t,e)/(e-1)},median:function(t,e){return t*(e*s.SQRT2)},mode:function(t){return t},variance:function(t,e){if(!(e<=2))return t*t*e/(s.pow(e-1,2)*(e-2))}}),t.extend(t.studentt,{pdf:function(e,B){return B=B>1e100?1e100:B,1/(s.sqrt(B)*t.betafn(.5,B/2))*s.pow(1+e*e/B,-(B+1)/2)},cdf:function(e,B){var i=B/2;return t.ibeta((e+s.sqrt(e*e+B))/(2*s.sqrt(e*e+B)),i,i)},inv:function(e,B){var i=t.ibetainv(2*s.min(e,1-e),.5*B,.5);return i=s.sqrt(B*(1-i)/i),e>.5?i:-i},mean:function(t){return t>1?0:void 0},median:function(){return 0},mode:function(){return 0},sample:function(e){return t.randn()*s.sqrt(e/(2*t.randg(e/2)))},variance:function(t){return t>2?t/(t-2):t>1?1/0:void 0}}),t.extend(t.weibull,{pdf:function(t,e,B){return t<0||e<0||B<0?0:B/e*s.pow(t/e,B-1)*s.exp(-s.pow(t/e,B))},cdf:function(t,e,B){return t<0?0:1-s.exp(-s.pow(t/e,B))},inv:function(t,e,B){return e*s.pow(-s.log(1-t),1/B)},mean:function(s,e){return s*t.gammafn(1+1/e)},median:function(t,e){return t*s.pow(s.log(2),1/e)},mode:function(t,e){return e<=1?0:t*s.pow((e-1)/e,1/e)},sample:function(e,B){return e*s.pow(-s.log(t._random_fn()),1/B)},variance:function(e,B){return e*e*t.gammafn(1+2/B)-s.pow(t.weibull.mean(e,B),2)}}),t.extend(t.uniform,{pdf:function(t,s,e){return t<s||t>e?0:1/(e-s)},cdf:function(t,s,e){return t<s?0:t<e?(t-s)/(e-s):1},inv:function(t,s,e){return s+t*(e-s)},mean:function(t,s){return.5*(t+s)},median:function(s,e){return t.mean(s,e)},mode:function(){throw new Error("mode is not yet implemented")},sample:function(s,e){return s/2+e/2+(e/2-s/2)*(2*t._random_fn()-1)},variance:function(t,e){return s.pow(e-t,2)/12}}),t.extend(t.binomial,{pdf:function(e,B,i){return 0===i||1===i?B*i===e?1:0:t.combination(B,e)*s.pow(i,e)*s.pow(1-i,B-e)},cdf:function(B,i,F){var Q,l=1e-10;if(B<0)return 0;if(B>=i)return 1;if(F<0||F>1||i<=0)return NaN;var U=F,a=(B=s.floor(B))+1,g=i-B,I=a+g,c=s.exp(t.gammaln(I)-t.gammaln(g)-t.gammaln(a)+a*s.log(U)+g*s.log(1-U));return Q=U<(a+1)/(I+2)?c*e(U,a,g,l):1-c*e(1-U,g,a,l),s.round(1/l*(1-Q))/(1/l)}}),t.extend(t.negbin,{pdf:function(e,B,i){return e===e>>>0&&(e<0?0:t.combination(e+B-1,B-1)*s.pow(1-i,e)*s.pow(i,B))},cdf:function(s,e,B){var i=0,F=0;if(s<0)return 0;for(;F<=s;F++)i+=t.negbin.pdf(F,e,B);return i}}),t.extend(t.hypgeom,{pdf:function(e,B,i,F){if(e!=e|0)return!1;if(e<0||e<i-(B-F))return 0;if(e>F||e>i)return 0;if(2*i>B)return 2*F>B?t.hypgeom.pdf(B-i-F+e,B,B-i,B-F):t.hypgeom.pdf(F-e,B,B-i,F);if(2*F>B)return t.hypgeom.pdf(i-e,B,i,B-F);if(i<F)return t.hypgeom.pdf(e,B,F,i);for(var Q=1,l=0,U=0;U<e;U++){for(;Q>1&&l<F;)Q*=1-i/(B-l),l++;Q*=(F-U)*(i-U)/((U+1)*(B-i-F+U+1))}for(;l<F;l++)Q*=1-i/(B-l);return s.min(1,s.max(0,Q))},cdf:function(e,B,i,F){if(e<0||e<i-(B-F))return 0;if(e>=F||e>=i)return 1;if(2*i>B)return 2*F>B?t.hypgeom.cdf(B-i-F+e,B,B-i,B-F):1-t.hypgeom.cdf(F-e-1,B,B-i,F);if(2*F>B)return 1-t.hypgeom.cdf(i-e-1,B,i,B-F);if(i<F)return t.hypgeom.cdf(e,B,F,i);for(var Q=1,l=1,U=0,a=0;a<e;a++){for(;Q>1&&U<F;){var g=1-i/(B-U);l*=g,Q*=g,U++}Q+=l*=(F-a)*(i-a)/((a+1)*(B-i-F+a+1))}for(;U<F;U++)Q*=1-i/(B-U);return s.min(1,s.max(0,Q))}}),t.extend(t.poisson,{pdf:function(e,B){return B<0||e%1!=0||e<0?0:s.pow(B,e)*s.exp(-B)/t.factorial(e)},cdf:function(s,e){var B=[],i=0;if(s<0)return 0;for(;i<=s;i++)B.push(t.poisson.pdf(i,e));return t.sum(B)},mean:function(t){return t},variance:function(t){return t},sampleSmall:function(e){var B=1,i=0,F=s.exp(-e);do{i++,B*=t._random_fn()}while(B>F);return i-1},sampleLarge:function(e){var B,i,F,Q,l,U,a,g,I,c,n=e;for(Q=s.sqrt(n),l=s.log(n),U=.02483*(a=.931+2.53*Q)-.059,g=1.1239+1.1328/(a-3.4),I=.9277-3.6224/(a-2);;){if(i=s.random()-.5,F=s.random(),c=.5-s.abs(i),B=s.floor((2*U/c+a)*i+n+.43),c>=.07&&F<=I)return B;if(!(B<0||c<.013&&F>c)&&s.log(F)+s.log(g)-s.log(U/(c*c)+a)<=B*l-n-t.loggam(B+1))return B}},sample:function(t){return t<10?this.sampleSmall(t):this.sampleLarge(t)}}),t.extend(t.triangular,{pdf:function(t,s,e,B){return e<=s||B<s||B>e?NaN:t<s||t>e?0:t<B?2*(t-s)/((e-s)*(B-s)):t===B?2/(e-s):2*(e-t)/((e-s)*(e-B))},cdf:function(t,e,B,i){return B<=e||i<e||i>B?NaN:t<=e?0:t>=B?1:t<=i?s.pow(t-e,2)/((B-e)*(i-e)):1-s.pow(B-t,2)/((B-e)*(B-i))},inv:function(t,e,B,i){return B<=e||i<e||i>B?NaN:t<=(i-e)/(B-e)?e+(B-e)*s.sqrt(t*((i-e)/(B-e))):e+(B-e)*(1-s.sqrt((1-t)*(1-(i-e)/(B-e))))},mean:function(t,s,e){return(t+s+e)/3},median:function(t,e,B){return B<=(t+e)/2?e-s.sqrt((e-t)*(e-B))/s.sqrt(2):B>(t+e)/2?t+s.sqrt((e-t)*(B-t))/s.sqrt(2):void 0},mode:function(t,s,e){return e},sample:function(e,B,i){var F=t._random_fn();return F<(i-e)/(B-e)?e+s.sqrt(F*(B-e)*(i-e)):B-s.sqrt((1-F)*(B-e)*(B-i))},variance:function(t,s,e){return(t*t+s*s+e*e-t*s-t*e-s*e)/18}}),t.extend(t.arcsine,{pdf:function(t,e,B){return B<=e?NaN:t<=e||t>=B?0:2/s.PI*s.pow(s.pow(B-e,2)-s.pow(2*t-e-B,2),-.5)},cdf:function(t,e,B){return t<e?0:t<B?2/s.PI*s.asin(s.sqrt((t-e)/(B-e))):1},inv:function(t,e,B){return e+(.5-.5*s.cos(s.PI*t))*(B-e)},mean:function(t,s){return s<=t?NaN:(t+s)/2},median:function(t,s){return s<=t?NaN:(t+s)/2},mode:function(){throw new Error("mode is not yet implemented")},sample:function(e,B){return(e+B)/2+(B-e)/2*s.sin(2*s.PI*t.uniform.sample(0,1))},variance:function(t,e){return e<=t?NaN:s.pow(e-t,2)/8}}),t.extend(t.laplace,{pdf:function(t,e,B){return B<=0?0:s.exp(-s.abs(t-e)/B)/(2*B)},cdf:function(t,e,B){return B<=0?0:t<e?.5*s.exp((t-e)/B):1-.5*s.exp(-(t-e)/B)},mean:function(t){return t},median:function(t){return t},mode:function(t){return t},variance:function(t,s){return 2*s*s},sample:function(e,i){var F=t._random_fn()-.5;return e-i*B(F)*s.log(1-2*s.abs(F))}}),t.extend(t.tukey,{cdf:function(e,B,F){var Q=1,l=B,U=16,a=8,g=-30,I=1e-14,c=100,n=800,r=5e3,o=25e3,d=1,C=.5,b=.25,u=.125,h=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],y=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(e<=0)return 0;if(F<2||Q<1||l<2)return NaN;if(!Number.isFinite(e))return 1;if(F>o)return i(e,Q,l);var x,A=.5*F,G=A*s.log(F)-F*s.log(2)-t.gammaln(A),R=A-1,L=.25*F;x=F<=c?d:F<=n?C:F<=r?b:u,G+=s.log(x);for(var m=0,S=1;S<=50;S++){for(var p=0,V=(2*S-1)*x,Z=1;Z<=U;Z++){var E,N;a<Z?(E=Z-a-1,N=G+R*s.log(V+h[E]*x)-(h[E]*x+V)*L):(E=Z-1,N=G+R*s.log(V-h[E]*x)+(h[E]*x-V)*L),N>=g&&(p+=i(a<Z?e*s.sqrt(.5*(h[E]*x+V)):e*s.sqrt(.5*(-h[E]*x+V)),Q,l)*y[E]*s.exp(N))}if(S*x>=1&&p<=I)break;m+=p}if(p>I)throw new Error("tukey.cdf failed to converge");return m>1&&(m=1),m},inv:function(e,B,i){var Q=1e-4,l=50;if(i<2||B<2)return NaN;if(e<0||e>1)return NaN;if(0===e)return 0;if(1===e)return 1/0;var U,a=F(e,B,i),g=t.tukey.cdf(a,B,i)-e;U=g>0?s.max(0,a-1):a+1;for(var I,c=t.tukey.cdf(U,B,i)-e,n=1;n<l;n++)if(I=U-c*(U-a)/(c-g),g=c,a=U,I<0&&(I=0,c=-e),c=t.tukey.cdf(I,B,i)-e,U=I,s.abs(U-a)<Q)return I;throw new Error("tukey.inv failed to converge")}})}(t,Math),function(t,s){var e=Array.prototype.push,B=t.utils.isArray;function i(s){return B(s)||s instanceof t}t.extend({add:function(s,e){return i(e)?(i(e[0])||(e=[e]),t.map(s,function(t,s,B){return t+e[s][B]})):t.map(s,function(t){return t+e})},subtract:function(s,e){return i(e)?(i(e[0])||(e=[e]),t.map(s,function(t,s,B){return t-e[s][B]||0})):t.map(s,function(t){return t-e})},divide:function(s,e){return i(e)?(i(e[0])||(e=[e]),t.multiply(s,t.inv(e))):t.map(s,function(t){return t/e})},multiply:function(s,e){var B,F,Q,l,U,a,g,I;if(void 0===s.length&&void 0===e.length)return s*e;if(U=s.length,a=s[0].length,g=t.zeros(U,Q=i(e)?e[0].length:a),I=0,i(e)){for(;I<Q;I++)for(B=0;B<U;B++){for(l=0,F=0;F<a;F++)l+=s[B][F]*e[F][I];g[B][I]=l}return 1===U&&1===I?g[0][0]:g}return t.map(s,function(t){return t*e})},outer:function(s,e){return t.multiply(s.map(function(t){return[t]}),[e])},dot:function(s,e){i(s[0])||(s=[s]),i(e[0])||(e=[e]);for(var B,F,Q=1===s[0].length&&1!==s.length?t.transpose(s):s,l=1===e[0].length&&1!==e.length?t.transpose(e):e,U=[],a=0,g=Q.length,I=Q[0].length;a<g;a++){for(U[a]=[],B=0,F=0;F<I;F++)B+=Q[a][F]*l[a][F];U[a]=B}return 1===U.length?U[0]:U},pow:function(e,B){return t.map(e,function(t){return s.pow(t,B)})},exp:function(e){return t.map(e,function(t){return s.exp(t)})},log:function(e){return t.map(e,function(t){return s.log(t)})},abs:function(e){return t.map(e,function(t){return s.abs(t)})},norm:function(t,e){var B=0,F=0;for(isNaN(e)&&(e=2),i(t[0])&&(t=t[0]);F<t.length;F++)B+=s.pow(s.abs(t[F]),e);return s.pow(B,1/e)},angle:function(e,B){return s.acos(t.dot(e,B)/(t.norm(e)*t.norm(B)))},aug:function(t,s){var B,i=[];for(B=0;B<t.length;B++)i.push(t[B].slice());for(B=0;B<i.length;B++)e.apply(i[B],s[B]);return i},inv:function(s){for(var e,B=s.length,i=s[0].length,F=t.identity(B,i),Q=t.gauss_jordan(s,F),l=[],U=0;U<B;U++)for(l[U]=[],e=i;e<Q[0].length;e++)l[U][e-i]=Q[U][e];return l},det:function t(s){if(2===s.length)return s[0][0]*s[1][1]-s[0][1]*s[1][0];for(var e=0,B=0;B<s.length;B++){for(var i=[],F=1;F<s.length;F++){i[F-1]=[];for(var Q=0;Q<s.length;Q++)Q<B?i[F-1][Q]=s[F][Q]:Q>B&&(i[F-1][Q-1]=s[F][Q])}var l=B%2?-1:1;e+=t(i)*s[0][B]*l}return e},gauss_elimination:function(e,B){var i,F,Q,l,U=0,a=0,g=e.length,I=e[0].length,c=1,n=0,r=[];for(i=(e=t.aug(e,B))[0].length,U=0;U<g;U++){for(F=e[U][U],a=U,l=U+1;l<I;l++)F<s.abs(e[l][U])&&(F=e[l][U],a=l);if(a!=U)for(l=0;l<i;l++)Q=e[U][l],e[U][l]=e[a][l],e[a][l]=Q;for(a=U+1;a<g;a++)for(c=e[a][U]/e[U][U],l=U;l<i;l++)e[a][l]=e[a][l]-c*e[U][l]}for(U=g-1;U>=0;U--){for(n=0,a=U+1;a<=g-1;a++)n+=r[a]*e[U][a];r[U]=(e[U][i-1]-n)/e[U][U]}return r},gauss_jordan:function(e,B){var i,F,Q,l=t.aug(e,B),U=l.length,a=l[0].length,g=0;for(F=0;F<U;F++){var I=F;for(Q=F+1;Q<U;Q++)s.abs(l[Q][F])>s.abs(l[I][F])&&(I=Q);var c=l[F];for(l[F]=l[I],l[I]=c,Q=F+1;Q<U;Q++)for(g=l[Q][F]/l[F][F],i=F;i<a;i++)l[Q][i]-=l[F][i]*g}for(F=U-1;F>=0;F--){for(g=l[F][F],Q=0;Q<F;Q++)for(i=a-1;i>F-1;i--)l[Q][i]-=l[F][i]*l[Q][F]/g;for(l[F][F]/=g,i=U;i<a;i++)l[F][i]/=g}return l},triaUpSolve:function(s,e){var B,i=s[0].length,F=t.zeros(1,i)[0],Q=!1;return null!=e[0].length&&(e=e.map(function(t){return t[0]}),Q=!0),t.arange(i-1,-1,-1).forEach(function(Q){B=t.arange(Q+1,i).map(function(t){return F[t]*s[Q][t]}),F[Q]=(e[Q]-t.sum(B))/s[Q][Q]}),Q?F.map(function(t){return[t]}):F},triaLowSolve:function(s,e){var B,i=s[0].length,F=t.zeros(1,i)[0],Q=!1;return null!=e[0].length&&(e=e.map(function(t){return t[0]}),Q=!0),t.arange(i).forEach(function(i){B=t.arange(i).map(function(t){return s[i][t]*F[t]}),F[i]=(e[i]-t.sum(B))/s[i][i]}),Q?F.map(function(t){return[t]}):F},lu:function(s){var e,B=s.length,i=t.identity(B),F=t.zeros(s.length,s[0].length);return t.arange(B).forEach(function(t){F[0][t]=s[0][t]}),t.arange(1,B).forEach(function(Q){t.arange(Q).forEach(function(B){e=t.arange(B).map(function(t){return i[Q][t]*F[t][B]}),i[Q][B]=(s[Q][B]-t.sum(e))/F[B][B]}),t.arange(Q,B).forEach(function(B){e=t.arange(Q).map(function(t){return i[Q][t]*F[t][B]}),F[Q][B]=s[e.length][B]-t.sum(e)})}),[i,F]},cholesky:function(e){var B,i=e.length,F=t.zeros(e.length,e[0].length);return t.arange(i).forEach(function(Q){B=t.arange(Q).map(function(t){return s.pow(F[Q][t],2)}),F[Q][Q]=s.sqrt(e[Q][Q]-t.sum(B)),t.arange(Q+1,i).forEach(function(s){B=t.arange(Q).map(function(t){return F[Q][t]*F[s][t]}),F[s][Q]=(e[Q][s]-t.sum(B))/F[Q][Q]})}),F},gauss_jacobi:function(e,B,i,F){for(var Q,l,U,a,g=0,I=0,c=e.length,n=[],r=[],o=[];g<c;g++)for(n[g]=[],r[g]=[],o[g]=[],I=0;I<c;I++)g>I?(n[g][I]=e[g][I],r[g][I]=o[g][I]=0):g<I?(r[g][I]=e[g][I],n[g][I]=o[g][I]=0):(o[g][I]=e[g][I],n[g][I]=r[g][I]=0);for(U=t.multiply(t.multiply(t.inv(o),t.add(n,r)),-1),l=t.multiply(t.inv(o),B),Q=i,a=t.add(t.multiply(U,i),l),g=2;s.abs(t.norm(t.subtract(a,Q)))>F;)Q=a,a=t.add(t.multiply(U,Q),l),g++;return a},gauss_seidel:function(e,B,i,F){for(var Q,l,U,a,g,I=0,c=e.length,n=[],r=[],o=[];I<c;I++)for(n[I]=[],r[I]=[],o[I]=[],Q=0;Q<c;Q++)I>Q?(n[I][Q]=e[I][Q],r[I][Q]=o[I][Q]=0):I<Q?(r[I][Q]=e[I][Q],n[I][Q]=o[I][Q]=0):(o[I][Q]=e[I][Q],n[I][Q]=r[I][Q]=0);for(a=t.multiply(t.multiply(t.inv(t.add(o,n)),r),-1),U=t.multiply(t.inv(t.add(o,n)),B),l=i,g=t.add(t.multiply(a,i),U),I=2;s.abs(t.norm(t.subtract(g,l)))>F;)l=g,g=t.add(t.multiply(a,l),U),I+=1;return g},SOR:function(e,B,i,F,Q){for(var l,U,a,g,I,c=0,n=e.length,r=[],o=[],d=[];c<n;c++)for(r[c]=[],o[c]=[],d[c]=[],l=0;l<n;l++)c>l?(r[c][l]=e[c][l],o[c][l]=d[c][l]=0):c<l?(o[c][l]=e[c][l],r[c][l]=d[c][l]=0):(d[c][l]=e[c][l],r[c][l]=o[c][l]=0);for(g=t.multiply(t.inv(t.add(d,t.multiply(r,Q))),t.subtract(t.multiply(d,1-Q),t.multiply(o,Q))),a=t.multiply(t.multiply(t.inv(t.add(d,t.multiply(r,Q))),B),Q),U=i,I=t.add(t.multiply(g,i),a),c=2;s.abs(t.norm(t.subtract(I,U)))>F;)U=I,I=t.add(t.multiply(g,U),a),c++;return I},householder:function(e){for(var B,i,F,Q,l=e.length,U=e[0].length,a=0,g=[],I=[];a<l-1;a++){for(B=0,Q=a+1;Q<U;Q++)B+=e[Q][a]*e[Q][a];for(B=(e[a+1][a]>0?-1:1)*s.sqrt(B),i=s.sqrt((B*B-e[a+1][a]*B)/2),(g=t.zeros(l,1))[a+1][0]=(e[a+1][a]-B)/(2*i),F=a+2;F<l;F++)g[F][0]=e[F][a]/(2*i);I=t.subtract(t.identity(l,U),t.multiply(t.multiply(g,t.transpose(g)),2)),e=t.multiply(I,t.multiply(e,I))}return e},QR:function(){var e=t.sum,B=t.arange;function i(i){var F,Q,l,U=i.length,a=i[0].length,g=t.zeros(a,a);for(i=t.copy(i),Q=0;Q<a;Q++){for(g[Q][Q]=s.sqrt(e(B(U).map(function(t){return i[t][Q]*i[t][Q]}))),F=0;F<U;F++)i[F][Q]=i[F][Q]/g[Q][Q];for(l=Q+1;l<a;l++)for(g[Q][l]=e(B(U).map(function(t){return i[t][Q]*i[t][l]})),F=0;F<U;F++)i[F][l]=i[F][l]-i[F][Q]*g[Q][l]}return[i,g]}return i}(),lstsq:function(){function s(s){var e=(s=t.copy(s)).length,B=t.identity(e);return t.arange(e-1,-1,-1).forEach(function(e){t.sliceAssign(B,{row:e},t.divide(t.slice(B,{row:e}),s[e][e])),t.sliceAssign(s,{row:e},t.divide(t.slice(s,{row:e}),s[e][e])),t.arange(e).forEach(function(i){var F=t.multiply(s[i][e],-1),Q=t.slice(s,{row:i}),l=t.multiply(t.slice(s,{row:e}),F);t.sliceAssign(s,{row:i},t.add(Q,l));var U=t.slice(B,{row:i}),a=t.multiply(t.slice(B,{row:e}),F);t.sliceAssign(B,{row:i},t.add(U,a))})}),B}function e(e,B){var i=!1;void 0===B[0].length&&(B=B.map(function(t){return[t]}),i=!0);var F=t.QR(e),Q=F[0],l=F[1],U=e[0].length,a=t.slice(Q,{col:{end:U}}),g=s(t.slice(l,{row:{end:U}})),I=t.transpose(a);void 0===I[0].length&&(I=[I]);var c=t.multiply(t.multiply(g,I),B);return void 0===c.length&&(c=[[c]]),i?c.map(function(t){return t[0]}):c}return e}(),jacobi:function(e){for(var B,i,F,Q,l,U,a,g=1,I=e.length,c=t.identity(I,I),n=[];1===g;){for(l=e[0][1],F=0,Q=1,B=0;B<I;B++)for(i=0;i<I;i++)B!=i&&l<s.abs(e[B][i])&&(l=s.abs(e[B][i]),F=B,Q=i);for(U=e[F][F]===e[Q][Q]?e[F][Q]>0?s.PI/4:-s.PI/4:s.atan(2*e[F][Q]/(e[F][F]-e[Q][Q]))/2,(a=t.identity(I,I))[F][F]=s.cos(U),a[F][Q]=-s.sin(U),a[Q][F]=s.sin(U),a[Q][Q]=s.cos(U),c=t.multiply(c,a),e=t.multiply(t.multiply(t.inv(a),e),a),g=0,B=1;B<I;B++)for(i=1;i<I;i++)B!=i&&s.abs(e[B][i])>.001&&(g=1)}for(B=0;B<I;B++)n.push(e[B][B]);return[c,n]},rungekutta:function(t,s,e,B,i,F){var Q,l,U;if(2===F)for(;B<=e;)i+=((Q=s*t(B,i))+(l=s*t(B+s,i+Q)))/2,B+=s;if(4===F)for(;B<=e;)i+=((Q=s*t(B,i))+2*(l=s*t(B+s/2,i+Q/2))+2*(U=s*t(B+s/2,i+l/2))+s*t(B+s,i+U))/6,B+=s;return i},romberg:function(t,e,B,i){for(var F,Q,l,U,a,g=0,I=(B-e)/2,c=[],n=[],r=[];g<i/2;){for(a=t(e),l=e,U=0;l<=B;l+=I,U++)c[U]=l;for(F=c.length,l=1;l<F-1;l++)a+=(l%2!=0?4:2)*t(c[l]);a=I/3*(a+t(B)),r[g]=a,I/=2,g++}for(Q=r.length,F=1;1!==Q;){for(l=0;l<Q-1;l++)n[l]=(s.pow(4,F)*r[l+1]-r[l])/(s.pow(4,F)-1);Q=n.length,r=n,n=[],F++}return r},richardson:function(t,e,B,i){function F(t,s){for(var e,B=0,i=t.length;B<i;B++)t[B]===s&&(e=B);return e}for(var Q,l,U,a,g,I=s.abs(B-t[F(t,B)+1]),c=0,n=[],r=[];i>=I;)Q=F(t,B+i),l=F(t,B),n[c]=(e[Q]-2*e[l]+e[2*l-Q])/(i*i),i/=2,c++;for(a=n.length,U=1;1!=a;){for(g=0;g<a-1;g++)r[g]=(s.pow(4,U)*n[g+1]-n[g])/(s.pow(4,U)-1);a=r.length,n=r,r=[],U++}return n},simpson:function(t,s,e,B){for(var i,F=(e-s)/B,Q=t(s),l=[],U=s,a=0,g=1;U<=e;U+=F,a++)l[a]=U;for(i=l.length;g<i-1;g++)Q+=(g%2!=0?4:2)*t(l[g]);return F/3*(Q+t(e))},hermite:function(t,s,e,B){for(var i,F=t.length,Q=0,l=0,U=[],a=[],g=[],I=[];l<F;l++){for(U[l]=1,i=0;i<F;i++)l!=i&&(U[l]*=(B-t[i])/(t[l]-t[i]));for(a[l]=0,i=0;i<F;i++)l!=i&&(a[l]+=1/(t[l]-t[i]));g[l]=(1-2*(B-t[l])*a[l])*(U[l]*U[l]),I[l]=(B-t[l])*(U[l]*U[l]),Q+=g[l]*s[l]+I[l]*e[l]}return Q},lagrange:function(t,s,e){for(var B,i,F=0,Q=0,l=t.length;Q<l;Q++){for(i=s[Q],B=0;B<l;B++)Q!=B&&(i*=(e-t[B])/(t[Q]-t[B]));F+=i}return F},cubic_spline:function(s,e,B){for(var i,F=s.length,Q=0,l=[],U=[],a=[],g=[],I=[],c=[],n=[];Q<F-1;Q++)I[Q]=s[Q+1]-s[Q];for(a[0]=0,Q=1;Q<F-1;Q++)a[Q]=3/I[Q]*(e[Q+1]-e[Q])-3/I[Q-1]*(e[Q]-e[Q-1]);for(Q=1;Q<F-1;Q++)l[Q]=[],U[Q]=[],l[Q][Q-1]=I[Q-1],l[Q][Q]=2*(I[Q-1]+I[Q]),l[Q][Q+1]=I[Q],U[Q][0]=a[Q];for(g=t.multiply(t.inv(l),U),i=0;i<F-1;i++)c[i]=(e[i+1]-e[i])/I[i]-I[i]*(g[i+1][0]+2*g[i][0])/3,n[i]=(g[i+1][0]-g[i][0])/(3*I[i]);for(i=0;i<F&&!(s[i]>B);i++);return e[i-=1]+(B-s[i])*c[i]+t.sq(B-s[i])*g[i]+(B-s[i])*t.sq(B-s[i])*n[i]},gauss_quadrature:function(){throw new Error("gauss_quadrature not yet implemented")},PCA:function(s){var e,B,i=s.length,F=s[0].length,Q=0,l=[],U=[],a=[],g=[],I=[],c=[],n=[],r=[],o=[],d=[];for(Q=0;Q<i;Q++)l[Q]=t.sum(s[Q])/F;for(Q=0;Q<F;Q++)for(n[Q]=[],e=0;e<i;e++)n[Q][e]=s[e][Q]-l[e];for(n=t.transpose(n),Q=0;Q<i;Q++)for(r[Q]=[],e=0;e<i;e++)r[Q][e]=t.dot([n[Q]],[n[e]])/(F-1);for(o=(a=t.jacobi(r))[0],U=a[1],d=t.transpose(o),Q=0;Q<U.length;Q++)for(e=Q;e<U.length;e++)U[Q]<U[e]&&(B=U[Q],U[Q]=U[e],U[e]=B,g=d[Q],d[Q]=d[e],d[e]=g);for(c=t.transpose(n),Q=0;Q<i;Q++)for(I[Q]=[],e=0;e<c.length;e++)I[Q][e]=t.dot([d[Q]],[c[e]]);return[s,U,d,I]}}),function(s){for(var e=0;e<s.length;e++)(function(s){t.fn[s]=function(e,B){var i=this;return B?(setTimeout(function(){B.call(i,t.fn[s].call(i,e))},15),this):"number"==typeof t[s](this,e)?t[s](this,e):t(t[s](this,e))}})(s[e])}("add divide multiply subtract dot pow exp log abs norm angle".split(" "))}(t,Math),function(t,s){var e=[].slice,B=t.utils.isNumber,i=t.utils.isArray;function F(t,e,B,i){if(t>1||B>1||t<=0||B<=0)throw new Error("Proportions should be greater than 0 and less than 1");var F=(t*e+B*i)/(e+i);return(t-B)/s.sqrt(F*(1-F)*(1/e+1/i))}t.extend({zscore:function(){var s=e.call(arguments);return B(s[1])?(s[0]-s[1])/s[2]:(s[0]-t.mean(s[1]))/t.stdev(s[1],s[2])},ztest:function(){var B,F=e.call(arguments);return i(F[1])?(B=t.zscore(F[0],F[1],F[3]),1===F[2]?t.normal.cdf(-s.abs(B),0,1):2*t.normal.cdf(-s.abs(B),0,1)):F.length>2?(B=t.zscore(F[0],F[1],F[2]),1===F[3]?t.normal.cdf(-s.abs(B),0,1):2*t.normal.cdf(-s.abs(B),0,1)):(B=F[0],1===F[1]?t.normal.cdf(-s.abs(B),0,1):2*t.normal.cdf(-s.abs(B),0,1))}}),t.extend(t.fn,{zscore:function(t,s){return(t-this.mean())/this.stdev(s)},ztest:function(e,B,i){var F=s.abs(this.zscore(e,i));return 1===B?t.normal.cdf(-F,0,1):2*t.normal.cdf(-F,0,1)}}),t.extend({tscore:function(){var B=e.call(arguments);return 4===B.length?(B[0]-B[1])/(B[2]/s.sqrt(B[3])):(B[0]-t.mean(B[1]))/(t.stdev(B[1],!0)/s.sqrt(B[1].length))},ttest:function(){var i,F=e.call(arguments);return 5===F.length?(i=s.abs(t.tscore(F[0],F[1],F[2],F[3])),1===F[4]?t.studentt.cdf(-i,F[3]-1):2*t.studentt.cdf(-i,F[3]-1)):B(F[1])?(i=s.abs(F[0]),1==F[2]?t.studentt.cdf(-i,F[1]-1):2*t.studentt.cdf(-i,F[1]-1)):(i=s.abs(t.tscore(F[0],F[1])),1==F[2]?t.studentt.cdf(-i,F[1].length-1):2*t.studentt.cdf(-i,F[1].length-1))}}),t.extend(t.fn,{tscore:function(t){return(t-this.mean())/(this.stdev(!0)/s.sqrt(this.cols()))},ttest:function(e,B){return 1===B?1-t.studentt.cdf(s.abs(this.tscore(e)),this.cols()-1):2*t.studentt.cdf(-s.abs(this.tscore(e)),this.cols()-1)}}),t.extend({anovafscore:function(){var B,i,F,Q,l,U,a,g,I=e.call(arguments);if(1===I.length){for(l=new Array(I[0].length),a=0;a<I[0].length;a++)l[a]=I[0][a];I=l}for(i=new Array,a=0;a<I.length;a++)i=i.concat(I[a]);for(F=t.mean(i),B=0,a=0;a<I.length;a++)B+=I[a].length*s.pow(t.mean(I[a])-F,2);for(B/=I.length-1,U=0,a=0;a<I.length;a++)for(Q=t.mean(I[a]),g=0;g<I[a].length;g++)U+=s.pow(I[a][g]-Q,2);return B/(U/=i.length-I.length)},anovaftest:function(){var s,i,F,Q,l=e.call(arguments);if(B(l[0]))return 1-t.centralF.cdf(l[0],l[1],l[2]);var U=t.anovafscore(l);for(s=l.length-1,F=0,Q=0;Q<l.length;Q++)F+=l[Q].length;return i=F-s-1,1-t.centralF.cdf(U,s,i)},ftest:function(s,e,B){return 1-t.centralF.cdf(s,e,B)}}),t.extend(t.fn,{anovafscore:function(){return t.anovafscore(this.toArray())},anovaftes:function(){var s,e=0;for(s=0;s<this.length;s++)e+=this[s].length;return t.ftest(this.anovafscore(),this.length-1,e-this.length)}}),t.extend({qscore:function(){var i,F,Q,l,U,a=e.call(arguments);return B(a[0])?(i=a[0],F=a[1],Q=a[2],l=a[3],U=a[4]):(i=t.mean(a[0]),F=t.mean(a[1]),Q=a[0].length,l=a[1].length,U=a[2]),s.abs(i-F)/(U*s.sqrt((1/Q+1/l)/2))},qtest:function(){var s,B=e.call(arguments);3===B.length?(s=B[0],B=B.slice(1)):7===B.length?(s=t.qscore(B[0],B[1],B[2],B[3],B[4]),B=B.slice(5)):(s=t.qscore(B[0],B[1],B[2]),B=B.slice(3));var i=B[0],F=B[1];return 1-t.tukey.cdf(s,F,i-F)},tukeyhsd:function(s){for(var e=t.pooledstdev(s),B=s.map(function(s){return t.mean(s)}),i=s.reduce(function(t,s){return t+s.length},0),F=[],Q=0;Q<s.length;++Q)for(var l=Q+1;l<s.length;++l){var U=t.qtest(B[Q],B[l],s[Q].length,s[l].length,e,i,s.length);F.push([[Q,l],U])}return F}}),t.extend({normalci:function(){var B,i=e.call(arguments),F=new Array(2);return B=4===i.length?s.abs(t.normal.inv(i[1]/2,0,1)*i[2]/s.sqrt(i[3])):s.abs(t.normal.inv(i[1]/2,0,1)*t.stdev(i[2])/s.sqrt(i[2].length)),F[0]=i[0]-B,F[1]=i[0]+B,F},tci:function(){var B,i=e.call(arguments),F=new Array(2);return B=4===i.length?s.abs(t.studentt.inv(i[1]/2,i[3]-1)*i[2]/s.sqrt(i[3])):s.abs(t.studentt.inv(i[1]/2,i[2].length-1)*t.stdev(i[2],!0)/s.sqrt(i[2].length)),F[0]=i[0]-B,F[1]=i[0]+B,F},significant:function(t,s){return t<s}}),t.extend(t.fn,{normalci:function(s,e){return t.normalci(s,e,this.toArray())},tci:function(s,e){return t.tci(s,e,this.toArray())}}),t.extend(t.fn,{oneSidedDifferenceOfProportions:function(s,e,B,i){var Q=F(s,e,B,i);return t.ztest(Q,1)},twoSidedDifferenceOfProportions:function(s,e,B,i){var Q=F(s,e,B,i);return t.ztest(Q,2)}})}(t,Math),t.models=function(){function s(s){var B=s[0].length,i=t.arange(B).map(function(i){var F=t.arange(B).filter(function(t){return t!==i});return e(t.col(s,i).map(function(t){return t[0]}),t.col(s,F))});return i}function e(s,e){var B=s.length,i=e[0].length-1,F=B-i-1,Q=t.lstsq(e,s),l=t.multiply(e,Q.map(function(t){return[t]})).map(function(t){return t[0]}),U=t.subtract(s,l),a=t.mean(s),g=t.sum(l.map(function(t){return Math.pow(t-a,2)})),I=t.sum(s.map(function(t,s){return Math.pow(t-l[s],2)})),c=g+I;return{exog:e,endog:s,nobs:B,df_model:i,df_resid:F,coef:Q,predict:l,resid:U,ybar:a,SST:c,SSE:g,SSR:I,R2:g/c}}function B(e){var B=s(e.exog),i=Math.sqrt(e.SSR/e.df_resid),F=B.map(function(t){var s=t.SST,e=t.R2;return i/Math.sqrt(s*(1-e))}),Q=e.coef.map(function(t,s){return(t-0)/F[s]}),l=Q.map(function(s){var B=t.studentt.cdf(s,e.df_resid);return 2*(B>.5?1-B:B)}),U=t.studentt.inv(.975,e.df_resid),a=e.coef.map(function(t,s){var e=U*F[s];return[t-e,t+e]});return{se:F,t:Q,p:l,sigmaHat:i,interval95:a}}function i(s){var e=s.R2/s.df_model/((1-s.R2)/s.df_resid),B=function(s,e,B){return t.beta.cdf(s/(B/e+s),e/2,B/2)};return{F_statistic:e,pvalue:1-B(e,s.df_model,s.df_resid)}}function F(t,s){var F=e(t,s),Q=B(F),l=i(F),U=1-(1-F.R2)*((F.nobs-1)/F.df_resid);return F.t=Q,F.f=l,F.adjust_R2=U,F}return{ols:F}}(),t.extend({buildxmatrix:function(){for(var s=new Array(arguments.length),e=0;e<arguments.length;e++){var B=[1];s[e]=B.concat(arguments[e])}return t(s)},builddxmatrix:function(){for(var s=new Array(arguments[0].length),e=0;e<arguments[0].length;e++){var B=[1];s[e]=B.concat(arguments[0][e])}return t(s)},buildjxmatrix:function(s){for(var e=new Array(s.length),B=0;B<s.length;B++)e[B]=s[B];return t.builddxmatrix(e)},buildymatrix:function(s){return t(s).transpose()},buildjymatrix:function(t){return t.transpose()},matrixmult:function(s,e){var B,i,F,Q,l;if(s.cols()==e.rows()){if(e.rows()>1){for(Q=[],B=0;B<s.rows();B++)for(Q[B]=[],i=0;i<e.cols();i++){for(l=0,F=0;F<s.cols();F++)l+=s.toArray()[B][F]*e.toArray()[F][i];Q[B][i]=l}return t(Q)}for(Q=[],B=0;B<s.rows();B++)for(Q[B]=[],i=0;i<e.cols();i++){for(l=0,F=0;F<s.cols();F++)l+=s.toArray()[B][F]*e.toArray()[i];Q[B][i]=l}return t(Q)}},regress:function(s,e){var B=t.xtranspxinv(s),i=s.transpose(),F=t.matrixmult(t(B),i);return t.matrixmult(F,e)},regresst:function(s,e,B){var i=t.regress(s,e),F={anova:{}},Q=t.jMatYBar(s,i);F.yBar=Q;var l=e.mean();F.anova.residuals=t.residuals(e,Q),F.anova.ssr=t.ssr(Q,l),F.anova.msr=F.anova.ssr/(s[0].length-1),F.anova.sse=t.sse(e,Q),F.anova.mse=F.anova.sse/(e.length-(s[0].length-1)-1),F.anova.sst=t.sst(e,l),F.anova.mst=F.anova.sst/(e.length-1),F.anova.r2=1-F.anova.sse/F.anova.sst,F.anova.r2<0&&(F.anova.r2=0),F.anova.fratio=F.anova.msr/F.anova.mse,F.anova.pvalue=t.anovaftest(F.anova.fratio,s[0].length-1,e.length-(s[0].length-1)-1),F.anova.rmse=Math.sqrt(F.anova.mse),F.anova.r2adj=1-F.anova.mse/F.anova.mst,F.anova.r2adj<0&&(F.anova.r2adj=0),F.stats=new Array(s[0].length);for(var U,a,g,I=t.xtranspxinv(s),c=0;c<i.length;c++)U=Math.sqrt(F.anova.mse*Math.abs(I[c][c])),a=Math.abs(i[c]/U),g=t.ttest(a,e.length-s[0].length-1,B),F.stats[c]=[i[c],U,a,g];return F.regress=i,F},xtranspx:function(s){return t.matrixmult(s.transpose(),s)},xtranspxinv:function(s){var e=t.matrixmult(s.transpose(),s);return t.inv(e)},jMatYBar:function(s,e){var B=t.matrixmult(s,e);return new t(B)},residuals:function(s,e){return t.matrixsubtract(s,e)},ssr:function(t,s){for(var e=0,B=0;B<t.length;B++)e+=Math.pow(t[B]-s,2);return e},sse:function(t,s){for(var e=0,B=0;B<t.length;B++)e+=Math.pow(t[B]-s[B],2);return e},sst:function(t,s){for(var e=0,B=0;B<t.length;B++)e+=Math.pow(t[B]-s,2);return e},matrixsubtract:function(s,e){for(var B=new Array(s.length),i=0;i<s.length;i++){B[i]=new Array(s[i].length);for(var F=0;F<s[i].length;F++)B[i][F]=s[i][F]-e[i][F]}return t(B)}}),t.jStat=t,t}();var jstatExports=jstat$1.exports,jStat=getDefaultExportFromCjs(jstatExports);class SDTMath{static d={DEFAULT:1,MIN:-6,MAX:6,STEP:.01,JUMP:.1};static c={DEFAULT:0,MIN:-3,MAX:3,STEP:.01,JUMP:.1};static s={DEFAULT:1,MIN:.8,MAX:40,STEP:.01,JUMP:.05};static hM2Hr(t,s){return 0===t&&0===s?0:t/(t+s)}static faCr2Far(t,s){return 0===t&&0===s?0:t/(t+s)}static hMFaCr2Acc(t,s,e,B){return 0===t&&0===s&&0===e&&0===B?0:(t+B)/(t+s+e+B)}static hrFar2Acc(t,s){return(t+(1-s))/2}static hFa2Ppv(t,s){return 0===t&&0===s?0:t/(t+s)}static mCr2Fomr(t,s){return 0===t&&0===s?0:t/(t+s)}static hrFar2D(t,s,e=1){return 1===e?jStat.normal.inv(t,0,1)-jStat.normal.inv(s,0,1):Math.sqrt(2/(e*e+1))*(e*jStat.normal.inv(t,0,1)-jStat.normal.inv(s,0,1))}static hrFar2C(t,s,e=1){return 1===e?-(jStat.normal.inv(t,0,1)+jStat.normal.inv(s,0,1))/2:Math.sqrt(2/(e*e+1))*(e/(e+1))*-(jStat.normal.inv(t,0,1)+jStat.normal.inv(s,0,1))}static dC2Hr(t,s,e=1){return 1===e?jStat.normal.cdf(t/2-s,0,1):jStat.normal.cdf(Math.sqrt((e*e+1)/2)*(t/(1+e)-s/e),0,1)}static dC2Far(t,s,e=1){return 1===e?jStat.normal.cdf(-(t/2+s),0,1):jStat.normal.cdf(Math.sqrt((e*e+1)/2)*-(t/(1+e)+s),0,1)}static dFar2Hr(t,s,e=1){return 1===e?jStat.normal.cdf(t+jStat.normal.inv(s,0,1),0,1):jStat.normal.cdf((Math.sqrt((e*e+1)/2)*t+jStat.normal.inv(s,0,1))/e,0,1)}static cFar2Hr(t,s,e=1){return 1===e?jStat.normal.cdf(-2*t-jStat.normal.inv(s,0,1),0,1):jStat.normal.cdf(-Math.sqrt((e*e+1)/2)*((e+1)/e)*t-jStat.normal.inv(s,0,1),0,1)}static d2MuN(t,s=1){return 1===s?-t/2:-Math.sqrt((s*s+1)/2)*(1/(s+1))*t}static muN2D(t,s=1){return 1===s?-2*t:-Math.sqrt(2/(s*s+1))*(s+1)*t}static d2MuS(t,s=1){return 1===s?t/2:Math.sqrt((s*s+1)/2)*(s/(s+1))*t}static muS2D(t,s=1){return 1===s?2*t:Math.sqrt(2/(s*s+1))*((s+1)/s)*t}static c2L(t,s=1){return 1===s?t:Math.sqrt((s*s+1)/2)*t}static l2C(t,s=1){return 1===s?t:Math.sqrt(2/(s*s+1))*t}static s2H(t=1){return 1/(t*Math.sqrt(2*Math.PI))}static h2S(t){return 1/(t*Math.sqrt(2*Math.PI))}static hr2Zhr(t){return jStat.normal.inv(t,0,1)}static far2Zfar(t){return jStat.normal.inv(t,0,1)}static zhr2Hr(t){return jStat.normal.cdf(t,0,1)}static zfar2Far(t){return jStat.normal.cdf(t,0,1)}}class DetectableTable extends DetectableElement{static get properties(){return{numeric:{attribute:"numeric",type:Boolean,reflect:!0},summary:{attribute:"summary",converter:DecidablesConverterSet,reflect:!0},color:{attribute:"color",type:String,reflect:!0},h:{attribute:"hits",type:Number,reflect:!0},m:{attribute:"misses",type:Number,reflect:!0},fa:{attribute:"false-alarms",type:Number,reflect:!0},cr:{attribute:"correct-rejections",type:Number,reflect:!0},payoff:{attribute:"payoff",type:Boolean,reflect:!0},hPayoff:{attribute:"hit-payoff",type:Number,reflect:!0},mPayoff:{attribute:"miss-payoff",type:Number,reflect:!0},faPayoff:{attribute:"false-alarm-payoff",type:Number,reflect:!0},crPayoff:{attribute:"correct-rejection-payoff",type:Number,reflect:!0},far:{attribute:!1,type:Number,reflect:!1},hr:{attribute:!1,type:Number,reflect:!1},acc:{attribute:!1,type:Number,reflect:!1},ppv:{attribute:!1,type:Number,reflect:!1},fomr:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.numeric=!1,this.summaries=["stimulusRates","responseRates","accuracy"],this.summary=new Set,this.colors=["none","accuracy","stimulus","response","outcome","all"],this.color="all",this.payoff=!1,this.hPayoff=void 0,this.mPayoff=void 0,this.crPayoff=void 0,this.faPayoff=void 0,this.h=40,this.m=60,this.fa=75,this.cr=25,this.alignState()}alignState(){this.hr=SDTMath.hM2Hr(this.h,this.m),this.far=SDTMath.faCr2Far(this.fa,this.cr),this.acc=SDTMath.hMFaCr2Acc(this.h,this.m,this.fa,this.cr),this.ppv=SDTMath.hFa2Ppv(this.h,this.fa),this.fomr=SDTMath.mCr2Fomr(this.m,this.cr)}sendEvent(){this.dispatchEvent(new CustomEvent("detectable-table-change",{detail:{h:this.h,m:this.m,hr:this.hr,fa:this.fa,cr:this.cr,far:this.far,acc:this.acc,ppv:this.ppv,fomr:this.fomr},bubbles:!0}))}hInput(t){this.h=parseInt(t.target.value,10),this.alignState(),this.sendEvent()}mInput(t){this.m=parseInt(t.target.value,10),this.alignState(),this.sendEvent()}faInput(t){this.fa=parseInt(t.target.value,10),this.alignState(),this.sendEvent()}crInput(t){this.cr=parseInt(t.target.value,10),this.alignState(),this.sendEvent()}hrInput(t){const s=parseFloat(t.target.value),e=this.h+this.m;this.h=Math.round(s*e),this.m=e-this.h,this.alignState(),this.sendEvent()}farInput(t){const s=parseFloat(t.target.value),e=this.fa+this.cr;this.fa=Math.round(s*e),this.cr=e-this.fa,this.alignState(),this.sendEvent()}accInput(t){const s=parseFloat(t.target.value),e=this.h+this.m,B=this.fa+this.cr,i=(this.hr+this.far-1)/2;let F=i+s,Q=1+i-s;Q>1&&(Q=1,F=Q+2*s-1),Q<0&&(Q=0,F=Q+2*s-1),F>1&&(F=1,Q=F-2*s+1),F<0&&(F=0,Q=F-2*s+1),this.h=Math.round(F*e),this.m=e-this.h,this.fa=Math.round(Q*B),this.cr=B-this.fa,this.alignState(),this.sendEvent()}ppvInput(t){const s=parseFloat(t.target.value),e=this.h+this.fa;this.h=Math.round(s*e),this.fa=e-this.h,this.alignState(),this.sendEvent()}fomrInput(t){const s=parseFloat(t.target.value),e=this.m+this.cr;this.m=Math.round(s*e),this.cr=e-this.m,this.alignState(),this.sendEvent()}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;
        }

        /* Overall element */
        table {
          text-align: center;

          border-collapse: collapse;

          border: 0;
        }

        /* Headers */
        .th-main {
          padding: 0;

          font-weight: bold;
        }

        .th-sub {
          padding: 0 0.25rem;

          font-weight: 600;
        }

        .th-left {
          padding-left: 0;

          text-align: right;
        }

        /* Cells */
        .td {
          width: 10rem;

          padding: 0.25rem 0.25rem 0.375rem;

          transition: all var(---transition-duration) ease;
        }

        .numeric .td {
          width: 7rem;
        }

        /* Labels */
        .payoff {
          font-weight: 600;
          line-height: 0.75rem;
        }

        /* User interaction <input> */
        .td-data decidables-spinner {
          --decidables-spinner-input-width: 3.5rem;
        }

        .td-summary decidables-spinner {
          --decidables-spinner-input-width: 4.5rem;
        }

        /* Color schemes & Table emphasis */

        /* (Default) All color scheme */
        .h {
          background: var(---color-h-light);
          border-top: 2px solid var(---color-element-emphasis);
          border-left: 2px solid var(---color-element-emphasis);
        }

        .m {
          background: var(---color-m-light);
          border-top: 2px solid var(---color-element-emphasis);
          border-right: 2px solid var(---color-element-emphasis);
        }

        .fa {
          background: var(---color-fa-light);
          border-bottom: 2px solid var(---color-element-emphasis);
          border-left: 2px solid var(---color-element-emphasis);
        }

        .cr {
          background: var(---color-cr-light);
          border-right: 2px solid var(---color-element-emphasis);
          border-bottom: 2px solid var(---color-element-emphasis);
        }

        .hr {
          background: var(---color-hr-light);
        }

        .far {
          background: var(---color-far-light);
        }

        .acc {
          background: var(---color-acc-light);
        }

        .ppv {
          background: var(---color-present-light);
        }

        .fomr {
          background: var(---color-absent-light);
        }

        /* Accuracy color scheme */
        :host([color="accuracy"]) .h,
        :host([color="accuracy"]) .cr {
          background: var(---color-correct-light);
        }

        :host([color="accuracy"]) .m,
        :host([color="accuracy"]) .fa {
          color: var(---color-text-inverse);

          background: var(---color-error-light);
        }

        :host([color="accuracy"]) .hr,
        :host([color="accuracy"]) .far,
        :host([color="accuracy"]) .ppv,
        :host([color="accuracy"]) .fomr {
          background: var(---color-element-background);
        }

        /* Stimulus color scheme */
        :host([color="stimulus"]) .cr,
        :host([color="stimulus"]) .fa {
          background: var(---color-far-light);
        }

        :host([color="stimulus"]) .m,
        :host([color="stimulus"]) .h {
          background: var(---color-hr-light);
        }

        :host([color="stimulus"]) .ppv,
        :host([color="stimulus"]) .fomr,
        :host([color="stimulus"]) .acc {
          background: var(---color-element-background);
        }

        /* Response color scheme */
        :host([color="response"]) .cr,
        :host([color="response"]) .m {
          background: var(---color-absent-light);
        }

        :host([color="response"]) .fa,
        :host([color="response"]) .h {
          background: var(---color-present-light);
        }

        :host([color="response"]) .hr,
        :host([color="response"]) .far,
        :host([color="response"]) .acc {
          background: var(---color-element-background);
        }

        /* Outcome color scheme */
        :host([color="outcome"]) .hr,
        :host([color="outcome"]) .far,
        :host([color="outcome"]) .ppv,
        :host([color="outcome"]) .fomr,
        :host([color="outcome"]) .acc {
          background: var(---color-element-background);
        }

        /* No color scheme */
        :host([color="none"]) .cr,
        :host([color="none"]) .fa,
        :host([color="none"]) .m,
        :host([color="none"]) .h,
        :host([color="none"]) .hr,
        :host([color="none"]) .far,
        :host([color="none"]) .ppv,
        :host([color="none"]) .fomr,
        :host([color="none"]) .acc {
          background: var(---color-element-background);
        }
      `]}willUpdate(){this.alignState()}render(){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),s=s=>t.formatToParts(s).map(({type:t,value:s})=>"minusSign"===t?"â":s).reduce((t,s)=>t+s);let e,B,i,F,Q,l,U,a,g;return this.numeric?(e=x$3`
        <decidables-spinner ?disabled=${!this.interactive} min="0" .value="${this.h}" @input=${this.hInput.bind(this)}>
          <span>Hits</span>
          ${this.payoff?x$3`<span class="payoff">${s(this.hPayoff)}</span>`:x$3``}
        </decidables-spinner>
      `,B=x$3`
        <decidables-spinner ?disabled=${!this.interactive} min="0" .value="${this.m}" @input=${this.mInput.bind(this)}>
          <span>Misses</span>
          ${this.payoff?x$3`<span class="payoff">${s(this.mPayoff)}</span>`:x$3``}
        </decidables-spinner>
      `,i=x$3`
        <decidables-spinner ?disabled=${!this.interactive} min="0" .value="${this.fa}" @input=${this.faInput.bind(this)}>
          <span>False Alarms</span>
          ${this.payoff?x$3`<span class="payoff">${s(this.faPayoff)}</span>`:x$3``}
        </decidables-spinner>
      `,F=x$3`
        <decidables-spinner ?disabled=${!this.interactive} min="0" .value="${this.cr}" @input=${this.crInput.bind(this)}>
          <span>Correct Rejections</span>
          ${this.payoff?x$3`<span class="payoff">${s(this.crPayoff)}</span>`:x$3``}
        </decidables-spinner>
      `,Q=x$3`
        <decidables-spinner ?disabled=${!this.interactive} min="0" max="1" step=".001" .value="${+this.hr.toFixed(3)}" @input=${this.hrInput.bind(this)}>
          <span>Hit Rate</span>
        </decidables-spinner>
      `,l=x$3`
        <decidables-spinner ?disabled=${!this.interactive} min="0" max="1" step=".001" .value="${+this.far.toFixed(3)}" @input=${this.farInput.bind(this)}>
          <span>False Alarm Rate</span>
        </decidables-spinner>
      `,U=x$3`
        <decidables-spinner ?disabled=${!this.interactive} min="0" max="1" step=".001" .value="${+this.acc.toFixed(3)}" @input=${this.accInput.bind(this)}>
          <span>Accuracy</span>
        </decidables-spinner>
      `,a=x$3`
        <decidables-spinner ?disabled=${!this.interactive} min="0" max="1" step=".001" .value="${+this.ppv.toFixed(3)}" @input=${this.ppvInput.bind(this)}>
          <span>Positive Predictive Value</span>
        </decidables-spinner>
      `,g=x$3`
        <decidables-spinner ?disabled=${!this.interactive} min="0" max="1" step=".001" .value="${+this.fomr.toFixed(3)}" @input=${this.fomrInput.bind(this)}>
          <span>False Omission Rate</span>
        </decidables-spinner>
      `):(e=x$3`<span>Hits</span>
        ${this.payoff?x$3`<span class="payoff">${s(this.hPayoff)}</span>`:x$3``}`,B=x$3`<span>Misses</span>
        ${this.payoff?x$3`<span class="payoff">${s(this.mPayoff)}</span>`:x$3``}`,i=x$3`<span>False Alarms</span>
        ${this.payoff?x$3`<span class="payoff">${s(this.faPayoff)}</span>`:x$3``}`,F=x$3`<span>Correct Rejections</span>
        ${this.payoff?x$3`<span class="payoff">${s(this.crPayoff)}</span>`:x$3``}`,Q=x$3`<span>Hit Rate</span>`,l=x$3`<span>False Alarm Rate</span>`,U=x$3`<span>Accuracy</span>`,a=x$3`<span>Positive Predictive Value</span>`,g=x$3`<span>False Omission Rate</span>`),x$3`
      <table class=${this.numeric?"numeric":""}>
        <thead>
          <tr>
            <th colspan="2" rowspan="2"></th>
            <th class="th th-main" colspan="2" scope="col">
              Response
            </th>
          </tr>
          <tr>
            <th class="th th-sub" scope="col">
              âPresentâ
            </th>
            <th class="th th-sub" scope="col">
              âAbsentâ
            </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th class="th th-main" rowspan="2" scope="row">
              Signal
            </th>
            <th class="th th-sub th-left" scope="row">
              Present
            </th>
            <td class="td td-data h">
              ${e}
            </td>
            <td class="td td-data m">
              ${B}
            </td>
            ${this.summary.has("stimulusRates")?x$3`
                <td class="td td-summary hr">
                  ${Q}
                </td>`:x$3``}
          </tr>
          <tr>
            <th class="th th-sub th-left" scope="row">
              Absent
            </th>
            <td class="td td-data fa">
              ${i}
            </td>
            <td class="td td-data cr">
              ${F}
            </td>
            ${this.summary.has("stimulusRates")?x$3`
                <td class="td td-summary far">
                  ${l}
                </td>`:x$3``}
          </tr>
          ${this.summary.has("responseRates")||this.summary.has("accuracy")?x$3`
              <tr>
                <td colspan="2"></td>
                ${this.summary.has("responseRates")?x$3`
                    <td class="td td-summary ppv">
                      ${a}
                    </td>
                    <td class="td td-summary fomr">
                      ${g}
                    </td>`:x$3`
                    <td colspan="2"></td>`}
                ${this.summary.has("accuracy")?x$3`
                    <td class="td td-summary acc" rowspan="2">
                      ${U}
                    </td>`:x$3``}
              </tr>`:x$3``}
        </tbody>
      </table>`}}customElements.define("detectable-table",DetectableTable);class RDKTask extends(DecidablesMixinResizeable(DetectableElement)){static get properties(){return{coherence:{attribute:"coherence",type:Number,reflect:!0},count:{attribute:"count",type:Number,reflect:!0},probability:{attribute:"probability",type:Number,reflect:!0},duration:{attribute:"duration",type:Number,reflect:!0},wait:{attribute:"wait",type:Number,reflect:!0},iti:{attribute:"iti",type:Number,reflect:!0},trials:{attribute:"trials",type:Number,reflect:!0},running:{attribute:"running",type:Boolean,reflect:!0},direction:{attribute:!1,type:Number,reflect:!1},lifetime:{attribute:!1,type:Number,reflect:!1},speed:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.coherence=.5,this.count=100,this.probability=.5,this.duration=2e3,this.wait=2e3,this.iti=2e3,this.trials=5,this.running=!1,this.direction=-1,this.lifetime=400,this.speed=50,this.firstUpdate=!0,this.COHERENT=0,this.RANDOM=1,this.dots=[[],[]],this.trial=0,this.states=["resetted","iti","stimulus","wait","ended"],this.state="resetted",this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0,this.currentDirection=void 0,this.signals=["present","absent"],this.signal=void 0,this.runner=void 0,this.xScale=void 0,this.yScale=void 0}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;

          width: 10rem;
          height: 10rem;
        }

        .main {
          width: 100%;
          height: 100%;
        }

        .background {
          fill: var(---color-element-disabled);
          stroke: none;
        }

        .outline {
          fill: none;
          stroke: var(---color-element-emphasis);
          stroke-width: 2px;
        }

        .dot {
          r: 2px;
        }

        .dots.coherent {
          fill: var(---color-background);
        }

        .dots.random {
          fill: var(---color-background);
        }

        .fixation {
          stroke: var(---color-text);
          stroke-width: 2px;
        }

        .query {
          font-size: 1.75rem;
          font-weight: 600;
        }
      `]}render(){return x$3``}update(t){if(super.update(t),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const s=this.width,e=this.height,B=Math.min(s,e),i=.25*this.rem,F=.25*this.rem,Q=.25*this.rem,l=B-(i+F),U=B-(Q+.25*this.rem);this.xScale=linear().domain([-1,1]).range([0,U]),this.yScale=linear().domain([1,-1]).range([0,l]);const a=select(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),g=a.enter().append("svg").classed("main",!0),I=g.merge(a).attr("viewBox",`0 0 ${B} ${B}`);g.append("clipPath").attr("id","clip-rdk-task").append("circle"),I.select("clipPath circle").attr("cx",this.xScale(0)).attr("cy",this.yScale(0)).attr("r",this.xScale(1)-this.xScale(0));const c=g.append("g").classed("plot",!0),n=I.select(".plot").attr("transform",`translate(${Q}, ${i})`),r=c.append("g").classed("underlayer",!0),o=n.select(".underlayer");r.append("circle").classed("background",!0),o.select(".background").attr("cx",this.xScale(0)).attr("cy",this.yScale(0)).attr("r",this.xScale(1)-this.xScale(0)),c.append("g").classed("content",!0).attr("clip-path","url(#clip-rdk-task)");n.select(".content").selectAll(".dots").data([[],[]]).enter().append("g").classed("dots",!0).classed("coherent",(t,s)=>s===this.COHERENT).classed("random",(t,s)=>s===this.RANDOM);const d=c.append("g").classed("overlayer",!0),C=n.select(".overlayer");d.append("circle").classed("outline",!0),C.select(".outline").attr("cx",this.xScale(0)).attr("cy",this.yScale(0)).attr("r",this.xScale(1)-this.yScale(0)),(this.firstUpdate||t.has("running"))&&(this.running?(this.pauseTime&&(this.baseTime+=now()-this.pauseTime,this.pauseTime=0),this.runner=interval(this.run.bind(this),20)):void 0!==this.runner&&(this.runner.stop(),this.pauseTime=now())),this.firstUpdate=!1}reset(){void 0!==this.runner&&this.runner.stop(),this.running=!1,this.trial=0,this.state="resetted",this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0,this.signal=void 0,this.currentDirection=void 0;const t=select(this.renderRoot).select(".content").selectAll(".dots").data([[],[]]).selectAll(".dot").data(t=>t);t.exit().remove();select(this.renderRoot).select(".content").selectAll(".fixation").data([]).exit().remove();select(this.renderRoot).select(".content").selectAll(".query").data([]).exit().remove()}run(){const t=now(),s=this.baseTime?t-this.baseTime:0,e=this.baseTime?s-this.startTime:0,B=this.baseTime?s-this.lastTime:0;this.lastTime=s;let i=!1;if("resetted"===this.state?(this.state="iti",this.baseTime=t,this.startTime=0,this.dispatchEvent(new CustomEvent("rdk-block-start",{detail:{trials:this.trials},bubbles:!0}))):"iti"===this.state&&e>=this.iti?(i=!0,this.trial+=1,this.state="stimulus",this.startTime=s,this.signal=Math.random()<this.probability?"present":"absent",this.currentDirection="absent"===this.signal?void 0:this.direction>=0?this.direction:360*Math.random(),this.dispatchEvent(new CustomEvent("rdk-trial-start",{detail:{trials:this.trials,duration:this.duration,wait:this.wait,iti:this.iti,trial:this.trial,signal:this.signal},bubbles:!0}))):"stimulus"===this.state&&e>=this.duration?(this.state="wait",this.startTime=s,this.dispatchEvent(new CustomEvent("rdk-trial-middle",{detail:{trials:this.trials,duration:this.duration,wait:this.wait,iti:this.iti,trial:this.trial,signal:this.signal},bubbles:!0}))):"wait"===this.state&&e>=this.wait&&(this.dispatchEvent(new CustomEvent("rdk-trial-end",{detail:{trials:this.trials,duration:this.duration,wait:this.wait,iti:this.iti,trial:this.trial,signal:this.signal},bubbles:!0})),this.trial>=this.trials?(this.runner.stop(),this.running=!1,this.state="ended",this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0,this.signal=void 0,this.currentDirection=void 0,this.dispatchEvent(new CustomEvent("rdk-block-end",{detail:{trials:this.trial},bubbles:!0}))):(this.state="iti",this.startTime=s)),"stimulus"===this.state){this.dots[this.COHERENT].length="present"===this.signal?Math.round(this.count*this.coherence):0,this.dots[this.RANDOM].length="present"===this.signal?this.count-this.dots[this.COHERENT].length:this.count;for(let t=0;t<this.dots.length;t+=1)for(let e=0;e<this.dots[t].length;e+=1){const F=void 0===this.dots[t][e];F&&(this.dots[t][e]={});const Q=this.dots[t][e];if(i||F){Q.direction=t===this.RANDOM?360*Math.random():this.currentDirection,Q.birth=s-Math.floor(Math.random()*this.lifetime);const e=2*Math.random()*Math.PI,B=Math.sqrt(Math.random());Q.x=this.xScale(B*Math.cos(e)),Q.y=this.yScale(B*Math.sin(e))}else if(s>Q.birth+this.lifetime){Q.birth+=this.lifetime,Q.direction=t===this.RANDOM?360*Math.random():this.currentDirection;const s=2*Math.random()*Math.PI,e=Math.sqrt(Math.random());Q.x=this.xScale(e*Math.cos(s)),Q.y=this.yScale(e*Math.sin(s))}else{t===this.COHERENT&&(Q.direction=this.currentDirection);const s=Q.direction*(Math.PI/180);Q.dx=this.speed*(B/1e3)*Math.cos(s),Q.dy=this.speed*(B/1e3)*Math.sin(s),Q.x+=Q.dx,Q.y+=Q.dy;(Q.x-this.xScale(0))**2+(Q.y-this.yScale(0))**2>(this.xScale(1)-this.xScale(0))**2&&(Q.x=-(Q.x-this.xScale(0))+this.xScale(0),Q.y=-(Q.y-this.yScale(0))+this.yScale(0))}}}const F=select(this.renderRoot).select(".content").selectAll(".fixation").data("iti"===this.state?[!0]:[]),Q=F.enter().append("g").classed("fixation",!0);Q.append("line").attr("x1",this.xScale(-.1)).attr("y1",this.xScale(0)).attr("x2",this.xScale(.1)).attr("y2",this.xScale(0)),Q.append("line").attr("x1",this.xScale(0)).attr("y1",this.xScale(-.1)).attr("x2",this.xScale(0)).attr("y2",this.xScale(.1)),F.exit().remove();const l=select(this.renderRoot).select(".content").selectAll(".dots").data("stimulus"===this.state?this.dots:[[],[]]).selectAll(".dot").data(t=>t);l.enter().append("circle").classed("dot",!0).merge(l).attr("cx",t=>t.x).attr("cy",t=>t.y),l.exit().remove();const U=select(this.renderRoot).select(".content").selectAll(".query").data("wait"===this.state?[!0]:[]);U.enter().append("g").classed("query",!0).append("text").attr("x",this.xScale(0)).attr("y",this.xScale(0)).attr("text-anchor","middle").attr("alignment-baseline","middle").text("?"),U.exit().remove()}}function ownKeys(t,s){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(t);s&&(B=B.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),e.push.apply(e,B)}return e}function _objectSpread2(t){for(var s=1;s<arguments.length;s++){var e=null!=arguments[s]?arguments[s]:{};s%2?ownKeys(Object(e),!0).forEach(function(s){_defineProperty(t,s,e[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):ownKeys(Object(e)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(e,s))})}return t}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperty(t,s,e){return s in t?Object.defineProperty(t,s,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[s]=e,t}function _extends(){return _extends=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var e=arguments[s];for(var B in e)Object.prototype.hasOwnProperty.call(e,B)&&(t[B]=e[B])}return t},_extends.apply(this,arguments)}function _unsupportedIterableToArray(t,s){if(t){if("string"==typeof t)return _arrayLikeToArray(t,s);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_arrayLikeToArray(t,s):void 0}}function _arrayLikeToArray(t,s){(null==s||s>t.length)&&(s=t.length);for(var e=0,B=new Array(s);e<s;e++)B[e]=t[e];return B}function _createForOfIteratorHelper(t,s){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=_unsupportedIterableToArray(t))||s){e&&(t=e);var B=0,i=function(){};return{s:i,n:function(){return B>=t.length?{done:!0}:{done:!1,value:t[B++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var F,Q=!0,l=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return Q=t.done,t},e:function(t){l=!0,F=t},f:function(){try{Q||null==e.return||e.return()}finally{if(l)throw F}}}}function decasteljau(t,s){var e=[],B=[];return t.length&&function t(s,i){if(1===s.length)e.push(s[0]),B.push(s[0]);else{for(var F=Array(s.length-1),Q=0;Q<F.length;Q++)0===Q&&e.push(s[0]),Q===F.length-1&&B.push(s[Q+1]),F[Q]=[(1-i)*s[Q][0]+i*s[Q+1][0],(1-i)*s[Q][1]+i*s[Q+1][1]];t(F,i)}}(t,s),{left:e,right:B.reverse()}}function pointsToCommand(t){var s={};return 4===t.length&&(s.x2=t[2][0],s.y2=t[2][1]),t.length>=3&&(s.x1=t[1][0],s.y1=t[1][1]),s.x=t[t.length-1][0],s.y=t[t.length-1][1],4===t.length?s.type="C":3===t.length?s.type="Q":s.type="L",s}function splitCurveAsPoints(t,s){for(var e=[],B=t,i=1/(s=s||2),F=0;F<s-1;F++){var Q=decasteljau(B,i/(1-i*F));e.push(Q.left),B=Q.right}return e.push(B),e}function splitCurve(t,s,e){var B=[[t.x,t.y]];return null!=s.x1&&B.push([s.x1,s.y1]),null!=s.x2&&B.push([s.x2,s.y2]),B.push([s.x,s.y]),splitCurveAsPoints(B,e).map(pointsToCommand)}customElements.define("rdk-task",RDKTask);var commandTokenRegex=/[MLCSTQAHVZmlcstqahv]|-?[\d.e+-]+/g,typeMap={M:["x","y"],L:["x","y"],H:["x"],V:["y"],C:["x1","y1","x2","y2","x","y"],S:["x2","y2","x","y"],Q:["x1","y1","x","y"],T:["x","y"],A:["rx","ry","xAxisRotation","largeArcFlag","sweepFlag","x","y"],Z:[]};function arrayOfLength(t,s){for(var e=Array(t),B=0;B<t;B++)e[B]=s;return e}function commandToString(t){return"".concat(t.type).concat(typeMap[t.type].map(function(s){return t[s]}).join(","))}function convertToSameType(t,s){var e={x1:"x",y1:"y",x2:"x",y2:"y"},B=["xAxisRotation","largeArcFlag","sweepFlag"];if(t.type!==s.type&&"M"!==s.type.toUpperCase()){var i={};Object.keys(s).forEach(function(F){var Q=s[F],l=t[F];void 0===l&&(B.includes(F)?l=Q:(void 0===l&&e[F]&&(l=t[e[F]]),void 0===l&&(l=0))),i[F]=l}),i.type=s.type,t=i}return t}function splitSegment(t,s,e){var B=[];if("L"===s.type||"Q"===s.type||"C"===s.type)B=B.concat(splitCurve(t,s,e));else{var i=_extends({},t);"M"===i.type&&(i.type="L"),(B=B.concat(arrayOfLength(e-1).map(function(){return i}))).push(s)}return B}function extend(t,s,e){var B=t.length-1,i=s.length-1,F=B/i,Q=arrayOfLength(i).reduce(function(s,B,i){var Q=Math.floor(F*i);if(e&&Q<t.length-1&&e(t[Q],t[Q+1])){var l=F*i%1<.5;s[Q]&&(l?Q>0?Q-=1:Q<t.length-1&&(Q+=1):Q<t.length-1?Q+=1:Q>0&&(Q-=1))}return s[Q]=(s[Q]||0)+1,s},[]),l=Q.reduce(function(s,e,B){if(B===t.length-1){var i=arrayOfLength(e,_extends({},t[t.length-1]));return"M"===i[0].type&&i.forEach(function(t){t.type="L"}),s.concat(i)}return s.concat(splitSegment(t[B],t[B+1],e))},[]);return l.unshift(t[0]),l}function pathCommandsFromString(t){for(var s,e,B=(t||"").match(commandTokenRegex)||[],i=[],F=0;F<B.length;++F)if(s=typeMap[B[F]]){e={type:B[F]};for(var Q=0;Q<s.length;++Q)e[s[Q]]=+B[F+Q+1];F+=s.length,i.push(e)}return i}function interpolatePathCommands(t,s,e){var B=null==t?[]:t.slice(),i=null==s?[]:s.slice(),F="object"===_typeof(e)?e:{excludeSegment:e,snapEndsToInput:!0},Q=F.excludeSegment,l=F.snapEndsToInput;if(!B.length&&!i.length)return function(){return[]};var U=!(0!==B.length&&"Z"!==B[B.length-1].type||0!==i.length&&"Z"!==i[i.length-1].type);B.length>0&&"Z"===B[B.length-1].type&&B.pop(),i.length>0&&"Z"===i[i.length-1].type&&i.pop(),B.length?i.length||i.push(B[0]):B.push(i[0]),0!==Math.abs(i.length-B.length)&&(i.length>B.length?B=extend(B,i,Q):i.length<B.length&&(i=extend(i,B,Q))),B=B.map(function(t,s){return convertToSameType(t,i[s])});var a=B.map(function(t){return _objectSpread2({},t)});return U&&(a.push({type:"Z"}),B.push({type:"Z"})),function(t){if(1===t&&l)return null==s?[]:s;if(0===t)return B;for(var e=0;e<a.length;++e){var F,Q=B[e],U=i[e],g=a[e],I=_createForOfIteratorHelper(typeMap[g.type]);try{for(I.s();!(F=I.n()).done;){var c=F.value;g[c]=(1-t)*Q[c]+t*U[c],"largeArcFlag"!==c&&"sweepFlag"!==c||(g[c]=Math.round(g[c]))}}catch(t){I.e(t)}finally{I.f()}}return a}}function interpolatePath(t,s,e){var B=pathCommandsFromString(t),i=pathCommandsFromString(s),F="object"===_typeof(e)?e:{excludeSegment:e,snapEndsToInput:!0},Q=F.excludeSegment,l=F.snapEndsToInput;if(!B.length&&!i.length)return function(){return""};var U=interpolatePathCommands(B,i,{excludeSegment:Q,snapEndsToInput:l});return function(t){if(1===t&&l)return null==s?"":s;var e,B="",i=_createForOfIteratorHelper(U(t));try{for(i.s();!(e=i.n()).done;){B+=commandToString(e.value)}}catch(t){i.e(t)}finally{i.f()}return B}}Object.keys(typeMap).forEach(function(t){typeMap[t.toLowerCase()]=typeMap[t]});var cssKeywords={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const reverseNames=Object.create(null);for(const t in cssKeywords)Object.hasOwn(cssKeywords,t)&&(reverseNames[cssKeywords[t]]=t);const cs={to:{},get:{}};function clamp(t,s,e){return Math.min(Math.max(s,t),e)}function hexDouble(t){const s=Math.round(t).toString(16).toUpperCase();return s.length<2?"0"+s:s}cs.get=function(t){let s,e;switch(t.slice(0,3).toLowerCase()){case"hsl":s=cs.get.hsl(t),e="hsl";break;case"hwb":s=cs.get.hwb(t),e="hwb";break;default:s=cs.get.rgb(t),e="rgb"}return s?{model:e,value:s}:null},cs.get.rgb=function(t){if(!t)return null;let s,e,B,i=[0,0,0,1];if(s=t.match(/^#([a-f\d]{6})([a-f\d]{2})?$/i)){for(B=s[2],s=s[1],e=0;e<3;e++){const t=2*e;i[e]=Number.parseInt(s.slice(t,t+2),16)}B&&(i[3]=Number.parseInt(B,16)/255)}else if(s=t.match(/^#([a-f\d]{3,4})$/i)){for(s=s[1],B=s[3],e=0;e<3;e++)i[e]=Number.parseInt(s[e]+s[e],16);B&&(i[3]=Number.parseInt(B+B,16)/255)}else if(s=t.match(/^rgba?\(\s*([+-]?(?:\d*\.)?\d+(?:e\d+)?)(?=[\s,])\s*(?:,\s*)?([+-]?(?:\d*\.)?\d+(?:e\d+)?)(?=[\s,])\s*(?:,\s*)?([+-]?(?:\d*\.)?\d+(?:e\d+)?)\s*(?:[\s,|/]\s*([+-]?(?:\d*\.)?\d+(?:e\d+)?)(%?)\s*)?\)$/i)){for(e=0;e<3;e++)i[e]=Number.parseFloat(s[e+1]);s[4]&&(i[3]=s[5]?.01*Number.parseFloat(s[4]):Number.parseFloat(s[4]))}else{if(!(s=t.match(/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/i)))return(s=t.toLowerCase().match(/^(\w+)$/))?"transparent"===s[1]?[0,0,0,0]:Object.hasOwn(cssKeywords,s[1])?(i=cssKeywords[s[1]].slice(),i[3]=1,i):null:null;for(e=0;e<3;e++)i[e]=Math.round(2.55*Number.parseFloat(s[e+1]));s[4]&&(i[3]=s[5]?.01*Number.parseFloat(s[4]):Number.parseFloat(s[4]))}for(e=0;e<3;e++)i[e]=clamp(i[e],0,255);return i[3]=clamp(i[3],0,1),i},cs.get.hsl=function(t){if(!t)return null;const s=t.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:e[+-]?\d+)?)\s*)?\)$/i);if(s){const t=Number.parseFloat(s[4]);return[(Number.parseFloat(s[1])%360+360)%360,clamp(Number.parseFloat(s[2]),0,100),clamp(Number.parseFloat(s[3]),0,100),clamp(Number.isNaN(t)?1:t,0,1)]}return null},cs.get.hwb=function(t){if(!t)return null;const s=t.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*[\s,]\s*([+-]?[\d.]+)%\s*[\s,]\s*([+-]?[\d.]+)%\s*(?:[\s,]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:e[+-]?\d+)?)\s*)?\)$/i);if(s){const t=Number.parseFloat(s[4]);return[(Number.parseFloat(s[1])%360+360)%360,clamp(Number.parseFloat(s[2]),0,100),clamp(Number.parseFloat(s[3]),0,100),clamp(Number.isNaN(t)?1:t,0,1)]}return null},cs.to.hex=function(...t){return"#"+hexDouble(t[0])+hexDouble(t[1])+hexDouble(t[2])+(t[3]<1?hexDouble(Math.round(255*t[3])):"")},cs.to.rgb=function(...t){return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},cs.to.rgb.percent=function(...t){const s=Math.round(t[0]/255*100),e=Math.round(t[1]/255*100),B=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+s+"%, "+e+"%, "+B+"%)":"rgba("+s+"%, "+e+"%, "+B+"%, "+t[3]+")"},cs.to.hsl=function(...t){return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},cs.to.hwb=function(...t){let s="";return t.length>=4&&1!==t[3]&&(s=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+s+")"},cs.to.keyword=function(...t){return reverseNames[t.slice(0,3)]};const reverseKeywords={};for(const t of Object.keys(cssKeywords))reverseKeywords[cssKeywords[t]]=t;const convert$1={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},LAB_FT=(6/29)**3;function srgbNonlinearTransform(t){const s=t>.0031308?1.055*t**(1/2.4)-.055:12.92*t;return Math.min(Math.max(0,s),1)}function srgbNonlinearTransformInv(t){return t>.04045?((t+.055)/1.055)**2.4:t/12.92}for(const t of Object.keys(convert$1)){if(!("channels"in convert$1[t]))throw new Error("missing channels property: "+t);if(!("labels"in convert$1[t]))throw new Error("missing channel labels property: "+t);if(convert$1[t].labels.length!==convert$1[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:s,labels:e}=convert$1[t];delete convert$1[t].channels,delete convert$1[t].labels,Object.defineProperty(convert$1[t],"channels",{value:s}),Object.defineProperty(convert$1[t],"labels",{value:e})}function comparativeDistance(t,s){return(t[0]-s[0])**2+(t[1]-s[1])**2+(t[2]-s[2])**2}function buildGraph(){const t={},s=Object.keys(convert$1);for(let{length:e}=s,B=0;B<e;B++)t[s[B]]={distance:-1,parent:null};return t}function deriveBFS(t){const s=buildGraph(),e=[t];for(s[t].distance=0;e.length>0;){const t=e.pop(),B=Object.keys(convert$1[t]);for(let{length:i}=B,F=0;F<i;F++){const i=B[F],Q=s[i];-1===Q.distance&&(Q.distance=s[t].distance+1,Q.parent=t,e.unshift(i))}}return s}function link(t,s){return function(e){return s(t(e))}}function wrapConversion(t,s){const e=[s[t].parent,t];let B=convert$1[s[t].parent][t],i=s[t].parent;for(;s[i].parent;)e.unshift(s[i].parent),B=link(convert$1[s[i].parent][i],B),i=s[i].parent;return B.conversion=e,B}function route(t){const s=deriveBFS(t),e={},B=Object.keys(s);for(let{length:t}=B,i=0;i<t;i++){const t=B[i];null!==s[t].parent&&(e[t]=wrapConversion(t,s))}return e}convert$1.rgb.hsl=function(t){const s=t[0]/255,e=t[1]/255,B=t[2]/255,i=Math.min(s,e,B),F=Math.max(s,e,B),Q=F-i;let l,U;switch(F){case i:l=0;break;case s:l=(e-B)/Q;break;case e:l=2+(B-s)/Q;break;case B:l=4+(s-e)/Q}l=Math.min(60*l,360),l<0&&(l+=360);const a=(i+F)/2;return U=F===i?0:a<=.5?Q/(F+i):Q/(2-F-i),[l,100*U,100*a]},convert$1.rgb.hsv=function(t){let s,e,B,i,F;const Q=t[0]/255,l=t[1]/255,U=t[2]/255,a=Math.max(Q,l,U),g=a-Math.min(Q,l,U),I=function(t){return(a-t)/6/g+.5};if(0===g)i=0,F=0;else{switch(F=g/a,s=I(Q),e=I(l),B=I(U),a){case Q:i=B-e;break;case l:i=1/3+s-B;break;case U:i=2/3+e-s}i<0?i+=1:i>1&&(i-=1)}return[360*i,100*F,100*a]},convert$1.rgb.hwb=function(t){const s=t[0],e=t[1];let B=t[2];const i=convert$1.rgb.hsl(t)[0],F=1/255*Math.min(s,Math.min(e,B));return B=1-1/255*Math.max(s,Math.max(e,B)),[i,100*F,100*B]},convert$1.rgb.oklab=function(t){const s=srgbNonlinearTransformInv(t[0]/255),e=srgbNonlinearTransformInv(t[1]/255),B=srgbNonlinearTransformInv(t[2]/255),i=Math.cbrt(.4122214708*s+.5363325363*e+.0514459929*B),F=Math.cbrt(.2119034982*s+.6806995451*e+.1073969566*B),Q=Math.cbrt(.0883024619*s+.2817188376*e+.6299787005*B);return[100*(.2104542553*i+.793617785*F-.0040720468*Q),100*(1.9779984951*i-2.428592205*F+.4505937099*Q),100*(.0259040371*i+.7827717662*F-.808675766*Q)]},convert$1.rgb.cmyk=function(t){const s=t[0]/255,e=t[1]/255,B=t[2]/255,i=Math.min(1-s,1-e,1-B);return[100*((1-s-i)/(1-i)||0),100*((1-e-i)/(1-i)||0),100*((1-B-i)/(1-i)||0),100*i]},convert$1.rgb.keyword=function(t){const s=reverseKeywords[t];if(s)return s;let e,B=Number.POSITIVE_INFINITY;for(const s of Object.keys(cssKeywords)){const i=comparativeDistance(t,cssKeywords[s]);i<B&&(B=i,e=s)}return e},convert$1.keyword.rgb=function(t){return[...cssKeywords[t]]},convert$1.rgb.xyz=function(t){const s=srgbNonlinearTransformInv(t[0]/255),e=srgbNonlinearTransformInv(t[1]/255),B=srgbNonlinearTransformInv(t[2]/255);return[100*(.4124564*s+.3575761*e+.1804375*B),100*(.2126729*s+.7151522*e+.072175*B),100*(.0193339*s+.119192*e+.9503041*B)]},convert$1.rgb.lab=function(t){const s=convert$1.rgb.xyz(t);let e=s[0],B=s[1],i=s[2];e/=95.047,B/=100,i/=108.883,e=e>LAB_FT?e**(1/3):7.787*e+16/116,B=B>LAB_FT?B**(1/3):7.787*B+16/116,i=i>LAB_FT?i**(1/3):7.787*i+16/116;return[116*B-16,500*(e-B),200*(B-i)]},convert$1.hsl.rgb=function(t){const s=t[0]/360,e=t[1]/100,B=t[2]/100;let i,F;if(0===e)return F=255*B,[F,F,F];const Q=B<.5?B*(1+e):B+e-B*e,l=2*B-Q,U=[0,0,0];for(let t=0;t<3;t++)i=s+1/3*-(t-1),i<0&&i++,i>1&&i--,F=6*i<1?l+6*(Q-l)*i:2*i<1?Q:3*i<2?l+(Q-l)*(2/3-i)*6:l,U[t]=255*F;return U},convert$1.hsl.hsv=function(t){const s=t[0];let e=t[1]/100,B=t[2]/100,i=e;const F=Math.max(B,.01);B*=2,e*=B<=1?B:2-B,i*=F<=1?F:2-F;return[s,100*(0===B?2*i/(F+i):2*e/(B+e)),100*((B+e)/2)]},convert$1.hsv.rgb=function(t){const s=t[0]/60,e=t[1]/100;let B=t[2]/100;const i=Math.floor(s)%6,F=s-Math.floor(s),Q=255*B*(1-e),l=255*B*(1-e*F),U=255*B*(1-e*(1-F));switch(B*=255,i){case 0:return[B,U,Q];case 1:return[l,B,Q];case 2:return[Q,B,U];case 3:return[Q,l,B];case 4:return[U,Q,B];case 5:return[B,Q,l]}},convert$1.hsv.hsl=function(t){const s=t[0],e=t[1]/100,B=t[2]/100,i=Math.max(B,.01);let F,Q;Q=(2-e)*B;const l=(2-e)*i;return F=e*i,F/=l<=1?l:2-l,F=F||0,Q/=2,[s,100*F,100*Q]},convert$1.hwb.rgb=function(t){const s=t[0]/360;let e=t[1]/100,B=t[2]/100;const i=e+B;let F;i>1&&(e/=i,B/=i);const Q=Math.floor(6*s),l=1-B;F=6*s-Q,1&Q&&(F=1-F);const U=e+F*(l-e);let a,g,I;switch(Q){default:case 6:case 0:a=l,g=U,I=e;break;case 1:a=U,g=l,I=e;break;case 2:a=e,g=l,I=U;break;case 3:a=e,g=U,I=l;break;case 4:a=U,g=e,I=l;break;case 5:a=l,g=e,I=U}return[255*a,255*g,255*I]},convert$1.cmyk.rgb=function(t){const s=t[0]/100,e=t[1]/100,B=t[2]/100,i=t[3]/100;return[255*(1-Math.min(1,s*(1-i)+i)),255*(1-Math.min(1,e*(1-i)+i)),255*(1-Math.min(1,B*(1-i)+i))]},convert$1.xyz.rgb=function(t){const s=t[0]/100,e=t[1]/100,B=t[2]/100;let i,F,Q;return i=3.2404542*s+-1.5371385*e+-.4985314*B,F=-.969266*s+1.8760108*e+.041556*B,Q=.0556434*s+-.2040259*e+1.0572252*B,i=srgbNonlinearTransform(i),F=srgbNonlinearTransform(F),Q=srgbNonlinearTransform(Q),[255*i,255*F,255*Q]},convert$1.xyz.lab=function(t){let s=t[0],e=t[1],B=t[2];s/=95.047,e/=100,B/=108.883,s=s>LAB_FT?s**(1/3):7.787*s+16/116,e=e>LAB_FT?e**(1/3):7.787*e+16/116,B=B>LAB_FT?B**(1/3):7.787*B+16/116;return[116*e-16,500*(s-e),200*(e-B)]},convert$1.xyz.oklab=function(t){const s=t[0]/100,e=t[1]/100,B=t[2]/100,i=Math.cbrt(.8189330101*s+.3618667424*e-.1288597137*B),F=Math.cbrt(.0329845436*s+.9293118715*e+.0361456387*B),Q=Math.cbrt(.0482003018*s+.2643662691*e+.633851707*B);return[100*(.2104542553*i+.793617785*F-.0040720468*Q),100*(1.9779984951*i-2.428592205*F+.4505937099*Q),100*(.0259040371*i+.7827717662*F-.808675766*Q)]},convert$1.oklab.oklch=function(t){return convert$1.lab.lch(t)},convert$1.oklab.xyz=function(t){const s=t[0]/100,e=t[1]/100,B=t[2]/100,i=(.999999998*s+.396337792*e+.215803758*B)**3,F=(1.000000008*s-.105561342*e-.063854175*B)**3,Q=(1.000000055*s-.089484182*e-1.291485538*B)**3;return[100*(1.227013851*i-.55779998*F+.281256149*Q),100*(-.040580178*i+1.11225687*F-.071676679*Q),100*(-.076381285*i-.421481978*F+1.58616322*Q)]},convert$1.oklab.rgb=function(t){const s=t[0]/100,e=t[1]/100,B=t[2]/100,i=(s+.3963377774*e+.2158037573*B)**3,F=(s-.1055613458*e-.0638541728*B)**3,Q=(s-.0894841775*e-1.291485548*B)**3;return[255*srgbNonlinearTransform(4.0767416621*i-3.3077115913*F+.2309699292*Q),255*srgbNonlinearTransform(-1.2684380046*i+2.6097574011*F-.3413193965*Q),255*srgbNonlinearTransform(-.0041960863*i-.7034186147*F+1.707614701*Q)]},convert$1.oklch.oklab=function(t){return convert$1.lch.lab(t)},convert$1.lab.xyz=function(t){let s,e,B;e=(t[0]+16)/116,s=t[1]/500+e,B=e-t[2]/200;const i=e**3,F=s**3,Q=B**3;return e=i>LAB_FT?i:(e-16/116)/7.787,s=F>LAB_FT?F:(s-16/116)/7.787,B=Q>LAB_FT?Q:(B-16/116)/7.787,s*=95.047,e*=100,B*=108.883,[s,e,B]},convert$1.lab.lch=function(t){const s=t[0],e=t[1],B=t[2];let i;i=360*Math.atan2(B,e)/2/Math.PI,i<0&&(i+=360);return[s,Math.sqrt(e*e+B*B),i]},convert$1.lch.lab=function(t){const s=t[0],e=t[1],B=t[2]/360*2*Math.PI;return[s,e*Math.cos(B),e*Math.sin(B)]},convert$1.rgb.ansi16=function(t,s=null){const[e,B,i]=t;let F=null===s?convert$1.rgb.hsv(t)[2]:s;if(F=Math.round(F/50),0===F)return 30;let Q=30+(Math.round(i/255)<<2|Math.round(B/255)<<1|Math.round(e/255));return 2===F&&(Q+=60),Q},convert$1.hsv.ansi16=function(t){return convert$1.rgb.ansi16(convert$1.hsv.rgb(t),t[2])},convert$1.rgb.ansi256=function(t){const s=t[0],e=t[1],B=t[2];if(s>>4==e>>4&&e>>4==B>>4)return s<8?16:s>248?231:Math.round((s-8)/247*24)+232;return 16+36*Math.round(s/255*5)+6*Math.round(e/255*5)+Math.round(B/255*5)},convert$1.ansi16.rgb=function(t){let s=(t=t[0])%10;if(0===s||7===s)return t>50&&(s+=3.5),s=s/10.5*255,[s,s,s];const e=.5*(Math.trunc(t>50)+1);return[(1&s)*e*255,(s>>1&1)*e*255,(s>>2&1)*e*255]},convert$1.ansi256.rgb=function(t){if((t=t[0])>=232){const s=10*(t-232)+8;return[s,s,s]}let s;t-=16;return[Math.floor(t/36)/5*255,Math.floor((s=t%36)/6)/5*255,s%6/5*255]},convert$1.rgb.hex=function(t){const s=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".slice(s.length)+s},convert$1.hex.rgb=function(t){const s=t.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!s)return[0,0,0];let e=s[0];3===s[0].length&&(e=[...e].map(t=>t+t).join(""));const B=Number.parseInt(e,16);return[B>>16&255,B>>8&255,255&B]},convert$1.rgb.hcg=function(t){const s=t[0]/255,e=t[1]/255,B=t[2]/255,i=Math.max(Math.max(s,e),B),F=Math.min(Math.min(s,e),B),Q=i-F;let l;return l=Q<=0?0:i===s?(e-B)/Q%6:i===e?2+(B-s)/Q:4+(s-e)/Q,l/=6,l%=1,[360*l,100*Q,100*(Q<1?F/(1-Q):0)]},convert$1.hsl.hcg=function(t){const s=t[1]/100,e=t[2]/100,B=e<.5?2*s*e:2*s*(1-e);let i=0;return B<1&&(i=(e-.5*B)/(1-B)),[t[0],100*B,100*i]},convert$1.hsv.hcg=function(t){const s=t[1]/100,e=t[2]/100,B=s*e;let i=0;return B<1&&(i=(e-B)/(1-B)),[t[0],100*B,100*i]},convert$1.hcg.rgb=function(t){const s=t[0]/360,e=t[1]/100,B=t[2]/100;if(0===e)return[255*B,255*B,255*B];const i=[0,0,0],F=s%1*6,Q=F%1,l=1-Q;let U=0;switch(Math.floor(F)){case 0:i[0]=1,i[1]=Q,i[2]=0;break;case 1:i[0]=l,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=Q;break;case 3:i[0]=0,i[1]=l,i[2]=1;break;case 4:i[0]=Q,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=l}return U=(1-e)*B,[255*(e*i[0]+U),255*(e*i[1]+U),255*(e*i[2]+U)]},convert$1.hcg.hsv=function(t){const s=t[1]/100,e=s+t[2]/100*(1-s);let B=0;return e>0&&(B=s/e),[t[0],100*B,100*e]},convert$1.hcg.hsl=function(t){const s=t[1]/100,e=t[2]/100*(1-s)+.5*s;let B=0;return e>0&&e<.5?B=s/(2*e):e>=.5&&e<1&&(B=s/(2*(1-e))),[t[0],100*B,100*e]},convert$1.hcg.hwb=function(t){const s=t[1]/100,e=s+t[2]/100*(1-s);return[t[0],100*(e-s),100*(1-e)]},convert$1.hwb.hcg=function(t){const s=t[1]/100,e=1-t[2]/100,B=e-s;let i=0;return B<1&&(i=(e-B)/(1-B)),[t[0],100*B,100*i]},convert$1.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},convert$1.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},convert$1.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},convert$1.gray.hsl=function(t){return[0,0,t[0]]},convert$1.gray.hsv=convert$1.gray.hsl,convert$1.gray.hwb=function(t){return[0,100,t[0]]},convert$1.gray.cmyk=function(t){return[0,0,0,t[0]]},convert$1.gray.lab=function(t){return[t[0],0,0]},convert$1.gray.hex=function(t){const s=255&Math.round(t[0]/100*255),e=((s<<16)+(s<<8)+s).toString(16).toUpperCase();return"000000".slice(e.length)+e},convert$1.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};const convert={},models=Object.keys(convert$1);function wrapRaw(t){const s=function(...s){const e=s[0];return null==e?e:(e.length>1&&(s=e),t(s))};return"conversion"in t&&(s.conversion=t.conversion),s}function wrapRounded(t){const s=function(...s){const e=s[0];if(null==e)return e;e.length>1&&(s=e);const B=t(s);if("object"==typeof B)for(let{length:t}=B,s=0;s<t;s++)B[s]=Math.round(B[s]);return B};return"conversion"in t&&(s.conversion=t.conversion),s}for(const t of models){convert[t]={},Object.defineProperty(convert[t],"channels",{value:convert$1[t].channels}),Object.defineProperty(convert[t],"labels",{value:convert$1[t].labels});const s=route(t),e=Object.keys(s);for(const B of e){const e=s[B];convert[t][B]=wrapRounded(e),convert[t][B].raw=wrapRaw(e)}}const skippedModels=["keyword","gray","hex"],hashedModelKeys={};for(const t of Object.keys(convert))hashedModelKeys[[...convert[t].labels].sort().join("")]=t;const limiters={};function Color(t,s){if(!(this instanceof Color))return new Color(t,s);if(s&&s in skippedModels&&(s=null),s&&!(s in convert))throw new Error("Unknown model: "+s);let e,B;if(null==t)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof Color)this.model=t.model,this.color=[...t.color],this.valpha=t.valpha;else if("string"==typeof t){const s=cs.get(t);if(null===s)throw new Error("Unable to parse color from string: "+t);this.model=s.model,B=convert[this.model].channels,this.color=s.value.slice(0,B),this.valpha="number"==typeof s.value[B]?s.value[B]:1}else if(t.length>0){this.model=s||"rgb",B=convert[this.model].channels;const e=Array.prototype.slice.call(t,0,B);this.color=zeroArray(e,B),this.valpha="number"==typeof t[B]?t[B]:1}else if("number"==typeof t)this.model="rgb",this.color=[t>>16&255,t>>8&255,255&t],this.valpha=1;else{this.valpha=1;const s=Object.keys(t);"alpha"in t&&(s.splice(s.indexOf("alpha"),1),this.valpha="number"==typeof t.alpha?t.alpha:0);const B=s.sort().join("");if(!(B in hashedModelKeys))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=hashedModelKeys[B];const{labels:i}=convert[this.model],F=[];for(e=0;e<i.length;e++)F.push(t[i[e]]);this.color=zeroArray(F)}if(limiters[this.model])for(B=convert[this.model].channels,e=0;e<B;e++){const t=limiters[this.model][e];t&&(this.color[e]=t(this.color[e]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Color.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(t){let s=this.model in cs.to?this:this.rgb();s=s.round("number"==typeof t?t:1);const e=1===s.valpha?s.color:[...s.color,this.valpha];return cs.to[s.model](...e)},percentString(t){const s=this.rgb().round("number"==typeof t?t:1),e=1===s.valpha?s.color:[...s.color,this.valpha];return cs.to.rgb.percent(...e)},array(){return 1===this.valpha?[...this.color]:[...this.color,this.valpha]},object(){const t={},{channels:s}=convert[this.model],{labels:e}=convert[this.model];for(let B=0;B<s;B++)t[e[B]]=this.color[B];return 1!==this.valpha&&(t.alpha=this.valpha),t},unitArray(){const t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,1!==this.valpha&&t.push(this.valpha),t},unitObject(){const t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,1!==this.valpha&&(t.alpha=this.valpha),t},round(t){return t=Math.max(t||0,0),new Color([...this.color.map(roundToPlace(t)),this.valpha],this.model)},alpha(t){return void 0!==t?new Color([...this.color,Math.max(0,Math.min(1,t))],this.model):this.valpha},red:getset("rgb",0,maxfn(255)),green:getset("rgb",1,maxfn(255)),blue:getset("rgb",2,maxfn(255)),hue:getset(["hsl","hsv","hsl","hwb","hcg"],0,t=>(t%360+360)%360),saturationl:getset("hsl",1,maxfn(100)),lightness:getset("hsl",2,maxfn(100)),saturationv:getset("hsv",1,maxfn(100)),value:getset("hsv",2,maxfn(100)),chroma:getset("hcg",1,maxfn(100)),gray:getset("hcg",2,maxfn(100)),white:getset("hwb",1,maxfn(100)),wblack:getset("hwb",2,maxfn(100)),cyan:getset("cmyk",0,maxfn(100)),magenta:getset("cmyk",1,maxfn(100)),yellow:getset("cmyk",2,maxfn(100)),black:getset("cmyk",3,maxfn(100)),x:getset("xyz",0,maxfn(95.047)),y:getset("xyz",1,maxfn(100)),z:getset("xyz",2,maxfn(108.833)),l:getset("lab",0,maxfn(100)),a:getset("lab",1),b:getset("lab",2),keyword(t){return void 0!==t?new Color(t):convert[this.model].keyword(this.color)},hex(t){return void 0!==t?new Color(t):cs.to.hex(...this.rgb().round().color)},hexa(t){if(void 0!==t)return new Color(t);const s=this.rgb().round().color;let e=Math.round(255*this.valpha).toString(16).toUpperCase();return 1===e.length&&(e="0"+e),cs.to.hex(...s)+e},rgbNumber(){const t=this.rgb().color;return(255&t[0])<<16|(255&t[1])<<8|255&t[2]},luminosity(){const t=this.rgb().color,s=[];for(const[e,B]of t.entries()){const t=B/255;s[e]=t<=.04045?t/12.92:((t+.055)/1.055)**2.4}return.2126*s[0]+.7152*s[1]+.0722*s[2]},contrast(t){const s=this.luminosity(),e=t.luminosity();return s>e?(s+.05)/(e+.05):(e+.05)/(s+.05)},level(t){const s=this.contrast(t);return s>=7?"AAA":s>=4.5?"AA":""},isDark(){const t=this.rgb().color;return(2126*t[0]+7152*t[1]+722*t[2])/1e4<128},isLight(){return!this.isDark()},negate(){const t=this.rgb();for(let s=0;s<3;s++)t.color[s]=255-t.color[s];return t},lighten(t){const s=this.hsl();return s.color[2]+=s.color[2]*t,s},darken(t){const s=this.hsl();return s.color[2]-=s.color[2]*t,s},saturate(t){const s=this.hsl();return s.color[1]+=s.color[1]*t,s},desaturate(t){const s=this.hsl();return s.color[1]-=s.color[1]*t,s},whiten(t){const s=this.hwb();return s.color[1]+=s.color[1]*t,s},blacken(t){const s=this.hwb();return s.color[2]+=s.color[2]*t,s},grayscale(){const t=this.rgb().color,s=.3*t[0]+.59*t[1]+.11*t[2];return Color.rgb(s,s,s)},fade(t){return this.alpha(this.valpha-this.valpha*t)},opaquer(t){return this.alpha(this.valpha+this.valpha*t)},rotate(t){const s=this.hsl();let e=s.color[0];return e=(e+t)%360,e=e<0?360+e:e,s.color[0]=e,s},mix(t,s){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);const e=t.rgb(),B=this.rgb(),i=void 0===s?.5:s,F=2*i-1,Q=e.alpha()-B.alpha(),l=((F*Q===-1?F:(F+Q)/(1+F*Q))+1)/2,U=1-l;return Color.rgb(l*e.red()+U*B.red(),l*e.green()+U*B.green(),l*e.blue()+U*B.blue(),e.alpha()*i+B.alpha()*(1-i))}};for(const t of Object.keys(convert)){if(skippedModels.includes(t))continue;const{channels:s}=convert[t];Color.prototype[t]=function(...s){return this.model===t?new Color(this):s.length>0?new Color(s,t):new Color([...assertArray(convert[this.model][t].raw(this.color)),this.valpha],t)},Color[t]=function(...e){let B=e[0];return"number"==typeof B&&(B=zeroArray(e,s)),new Color(B,t)}}function roundTo(t,s){return Number(t.toFixed(s))}function roundToPlace(t){return function(s){return roundTo(s,t)}}function getset(t,s,e){t=Array.isArray(t)?t:[t];for(const B of t)(limiters[B]||=[])[s]=e;return t=t[0],function(B){let i;return void 0!==B?(e&&(B=e(B)),i=this[t](),i.color[s]=B,i):(i=this[t]().color[s],e&&(i=e(i)),i)}}function maxfn(t){return function(s){return Math.max(0,Math.min(t,s))}}function assertArray(t){return Array.isArray(t)?t:[t]}function zeroArray(t,s){for(let e=0;e<s;e++)"number"!=typeof t[e]&&(t[e]=0);return t}class ROCSpace extends(DecidablesMixinResizeable(DetectableElement)){static get properties(){return{contour:{attribute:"contour",type:String,reflect:!0},point:{attribute:"point",type:String,reflect:!0},isoD:{attribute:"iso-d",type:String,reflect:!0},isoC:{attribute:"iso-c",type:String,reflect:!0},zRoc:{attribute:"z-roc",type:Boolean,reflect:!0},far:{attribute:"far",type:Number,reflect:!0},hr:{attribute:"hr",type:Number,reflect:!0},d:{attribute:!1,type:Number,reflect:!1},c:{attribute:!1,type:Number,reflect:!1},s:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.firstUpdate=!0,this.drag=!1,this.sdt=!1,this.contours=["sensitivity","bias","accuracy"],this.contour=void 0,this.points=["all","first","rest","none"],this.point="all",this.isoDs=["all","first","rest","none"],this.isoD="first",this.isoCs=["all","first","rest","none"],this.isoC="first",this.zRoc=!1,this.far=.25,this.hr=.75,this.s=SDTMath.s.DEFAULT,this.label="",this.locations=[{name:"default",far:this.far,hr:this.hr,s:this.s,label:""}],this.pointArray=[],this.isoDArray=[],this.isoCArray=[],this.alignState()}alignState(){this.locations[0].hr=this.hr,this.locations[0].far=this.far,this.locations[0].s=this.s,this.locations[0].label=this.label,this.d=SDTMath.hrFar2D(this.hr,this.far,this.s),this.c=SDTMath.hrFar2C(this.hr,this.far,this.s),this.pointArray=[],this.isoDArray=[],this.isoCArray=[],this.locations.forEach((t,s)=>{t.d=SDTMath.hrFar2D(t.hr,t.far,t.s),t.c=SDTMath.hrFar2C(t.hr,t.far,t.s),0!==s||"first"!==this.point&&"all"!==this.point?s>0&&("rest"===this.point||"all"===this.point)&&this.pointArray.push(t):this.pointArray.push(t),0!==s||"first"!==this.isoD&&"all"!==this.isoD?s>0&&("rest"===this.isoD||"all"===this.isoD)&&this.isoDArray.push(t):this.isoDArray.push(t),0!==s||"first"!==this.isoC&&"all"!==this.isoC?s>0&&("rest"===this.isoC||"all"===this.isoC)&&this.isoCArray.push(t):this.isoCArray.push(t)})}set(t,s,e="default",B="",i=1){"default"===e&&(this.hr=t,this.far=s,this.s=i,this.label=B);const F=this.locations.find(t=>t.name===e);void 0===F?this.locations.push({name:e,far:s,hr:t,s:i,label:B}):(F.hr=t,F.far=s,F.s=i,F.label=B),this.requestUpdate()}setWithSDT(t,s,e="default",B="",i=1){"default"===e&&(this.hr=SDTMath.dC2Hr(t,s,i),this.far=SDTMath.dC2Far(t,s,i),this.s=i,this.label=B);const F=this.locations.find(t=>t.name===e);void 0===F?this.locations.push({name:e,far:SDTMath.dC2Far(t,s,i),hr:SDTMath.dC2Hr(t,s,i),s:i,label:B}):(F.hr=SDTMath.dC2Hr(t,s,i),F.far=SDTMath.dC2Far(t,s,i),F.s=i,F.label=B),this.sdt=!0,this.requestUpdate()}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;

          width: 20rem;
          height: 20rem;
        }

        .main {
          width: 100%;
          height: 100%;
        }

        .plot-contour,
        .legend-contour .contour {
          stroke: var(---color-background);
          stroke-width: 0.5;
        }

        text {
          /* stylelint-disable property-no-vendor-prefix */
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
        }

        .point.interactive {
          cursor: move;

          filter: url("#shadow-2");
          outline: none;

          /* HACK: This gets Safari to correctly apply the filter! */
          /* https://github.com/emilbjorklund/svg-weirdness/issues/27 */
          stroke: #000000;
          stroke-opacity: 0;
          stroke-width: 0;
        }

        .point.interactive:hover {
          filter: url("#shadow-4");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #ff0000;
        }

        .point.interactive:active {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #00ff00;
        }

        :host(.keyboard) .point.interactive:focus {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #0000ff;
        }

        .background {
          fill: var(---color-element-background);
          stroke: var(---color-element-border);
          stroke-width: 1;
          shape-rendering: crispEdges;
        }

        .title-x,
        .title-y,
        .title-contour {
          font-weight: 600;

          fill: currentColor;
        }

        .tick {
          font-size: 0.75rem;
        }

        .axis-x path,
        .axis-x line,
        .axis-y path,
        .axis-y line {
          stroke: var(---color-element-border);
        }

        .axis-contour .domain {
          stroke: none;
        }

        .diagonal {
          stroke: var(---color-element-border);
          stroke-dasharray: 4;
          stroke-width: 1;
        }

        .curve-iso-d {
          fill: none;
          stroke: var(---color-d);
          stroke-width: 2;
        }

        .curve-iso-c {
          fill: none;
          stroke: var(---color-c);
          stroke-width: 2;
        }

        .point .circle {
          fill: var(---color-element-emphasis);

          r: 6px;
        }

        .point .label {
          font-size: 0.75rem;

          dominant-baseline: central;
          text-anchor: middle;

          fill: var(---color-text-inverse);
        }

        /* Make a larger target for touch users */
        .interactive .touch {
          stroke: #000000;
          stroke-opacity: 0;
        }

        @media (pointer: coarse) {
          .interactive .touch {
            stroke-linecap: round;
            stroke-width: 12;
          }
        }
      `]}render(){return x$3``}willUpdate(){this.alignState()}update(t){if(super.update(t),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const s=this.width,e=this.height,B=Math.min(s,e),i=2*this.rem,F=3*this.rem,Q=3*this.rem,l=B-(i+F),U=B-(Q+2*this.rem),a=parseInt(this.getComputedStyleValue("---transition-duration"),10),g=linear().domain(this.zRoc?[-3,3]:[0,1]).range([0,U]);this.xScale=g;const I=linear().domain(this.zRoc?[3,-3]:[1,0]).range([0,l]);this.yScale=I;const c=drag().subject((t,s)=>({x:this.xScale(this.zRoc?SDTMath.far2Zfar(s.far):s.far),y:this.yScale(this.zRoc?SDTMath.hr2Zhr(s.hr):s.hr)})).on("start",t=>{select(t.currentTarget).classed("dragging",!0)}).on("drag",(t,s)=>{this.drag=!0;const e=this.zRoc?SDTMath.zfar2Far(this.xScale.invert(t.x)):this.xScale.invert(t.x),B=this.zRoc?SDTMath.zhr2Hr(this.yScale.invert(t.y)):this.yScale.invert(t.y);s.far=e<.001?.001:e>.999?.999:e,s.hr=B<=.001?.001:B>=.999?.999:B,"default"===s.name&&(this.far=s.far,this.hr=s.hr),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("roc-point-change",{detail:{name:s.name,far:s.far,hr:s.hr,d:s.d,c:s.c,s:s.s,label:s.label},bubbles:!0}))}).on("end",t=>{select(t.currentTarget).classed("dragging",!1)}),n=shapeLine().x(t=>g(this.zRoc?SDTMath.far2Zfar(t.far):t.far)).y(t=>I(this.zRoc?SDTMath.hr2Zhr(t.hr):t.hr)),r=select(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),o=r.enter().append("svg").classed("main",!0).each((t,s,e)=>{B$1(DetectableElement.svgFilters,e[s])}),d=o.merge(r).attr("viewBox",`0 0 ${B} ${B}`),C=o.append("g").classed("plot",!0),b=d.select(".plot").attr("transform",`translate(${Q}, ${i})`);C.append("clipPath").attr("id","clip-roc-space").append("rect"),b.select("clipPath rect").attr("height",l+1).attr("width",U+1);const u=C.append("g").classed("underlayer",!0),h=b.select(".underlayer");if(u.append("rect").classed("background",!0),h.select(".background").attr("height",l).attr("width",U),this.firstUpdate||t.has("contour")||t.has("zRoc")||t.has("width")||t.has("height")||t.has("rem")||t.has("s"))if(void 0!==this.contour){const t=100,s=[];for(let e=.5,B=0;e<t;e+=1)for(let i=.5;i<t;i+=1,B+=1){const F=this.zRoc?SDTMath.zhr2Hr(i/t*6-3):i/t,Q=this.zRoc?SDTMath.zfar2Far(6*(1-e/t)-3):1-e/t;s[B]="bias"===this.contour?SDTMath.hrFar2C(F,Q,this.s):"sensitivity"===this.contour?SDTMath.hrFar2D(F,Q,this.s):"accuracy"===this.contour?SDTMath.hrFar2Acc(F,Q):null}const e="bias"===this.contour?range$1(-3,3,.25):"sensitivity"===this.contour?range$1(-6,6,.5):"accuracy"===this.contour?range$1(0,1,.05):null,B=contours().size([t,t]).thresholds(e),i=this.getComputedStyleValue("bias"===this.contour?"---color-element-background":"sensitivity"===this.contour?"---color-d":"accuracy"===this.contour?"---color-acc-dark":null),F=this.getComputedStyleValue("bias"===this.contour?"---color-c":"sensitivity"===this.contour||"accuracy"===this.contour?"---color-element-background":null),Q=linear().domain(extent$1(e)).interpolate(()=>interpolateRgb(Color(i).hex(),Color(F).hex())),l=h.selectAll(".plot-contour").data([this.contour]),g=l.enter().append("g").classed("plot-contour",!0).merge(l).selectAll(".contour").data(B(s));g.enter().append("path").classed("contour",!0).merge(g).transition().duration(2*a).ease(cubicOut).attrTween("d",(s,e,B)=>interpolatePath(select(B[e]).attr("d"),geoPath(identity$5().scale(U/t))(s))).attr("fill",t=>Q(t.value)),g.exit().remove();const I=h.selectAll(".title-contour").data([this.contour]);I.enter().append("text").classed("title-contour",!0).attr("text-anchor","middle").merge(I).classed("math-var","bias"===this.contour||"sensitivity"===this.contour).attr("transform","bias"===this.contour||"sensitivity"===this.contour?`translate(${U+1.25*this.rem}, ${this.rem})`:"accuracy"===this.contour?`translate(${U+1.125*this.rem}, ${this.rem})`:null).text("bias"===this.contour?"c":"sensitivity"===this.contour?"dâ²":"accuracy"===this.contour?"Acc":null);const c=100,n=[];for(let s=.5,e=0;s<c;s+=1,e+=4)n[e]="bias"===this.contour?-(s/t*6-3):"sensitivity"===this.contour?s/t*12-6:"accuracy"===this.contour?s/t:null,n[e+1]=n[e],n[e+2]=n[e],n[e+3]=n[e];const r=contours().size([4,c]).thresholds(e),o=linear().domain("bias"===this.contour?[3,-3]:"sensitivity"===this.contour?[6,-6]:"accuracy"===this.contour?[1,0]:null).range([0,10*this.rem]),d=h.selectAll(".legend-contour").data([this.contour]),C=d.enter().append("g").classed("legend-contour",!0),b=C.merge(d).attr("transform","bias"===this.contour||"sensitivity"===this.contour?`translate(${U+1.25*this.rem}, ${1.5*this.rem})`:"accuracy"===this.contour?`translate(${U+1.5*this.rem}, ${1.5*this.rem})`:null);d.exit().remove(),C.append("g").classed("axis-contour",!0),b.select(".axis-contour").call(axisLeft(o).ticks(7).tickSize(0)).attr("font-size",null).attr("font-family",null);const u=b.selectAll(".contour").data(r(n));u.enter().append("path").classed("contour",!0).merge(u).attr("d",geoPath(identity$5().scale(10*this.rem/c))).attr("fill",t=>Q(t.value)),u.exit().remove()}else{h.selectAll(".plot-contour").data([]).exit().remove();h.selectAll(".title-contour").data([]).exit().remove();h.selectAll(".legend-contour").data([]).exit().remove()}u.append("g").classed("axis-x",!0);h.select(".axis-x").attr("transform",`translate(0, ${l})`).transition().duration(2*a).ease(cubicOut).call(axisBottom(g)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null);const y=u.append("text").classed("title-x",!0).attr("text-anchor","middle");y.append("tspan").classed("z math-var",!0),y.append("tspan").classed("name",!0);const x=h.select(".title-x").attr("transform",`translate(${U/2}, ${l+2.25*this.rem})`);x.select("tspan.z").text(this.zRoc?"z":""),x.select("tspan.name").text(this.zRoc?"(False Alarm Rate)":"False Alarm Rate"),u.append("g").classed("axis-y",!0);h.select(".axis-y").transition().duration(2*a).ease(cubicOut).call(axisLeft(I)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null);const A=u.append("text").classed("title-y",!0).attr("text-anchor","middle");A.append("tspan").classed("z math-var",!0),A.append("tspan").classed("name",!0);const G=h.select(".title-y").attr("transform",`translate(${-2*this.rem}, ${l/2})rotate(-90)`);G.select("tspan.z").text(this.zRoc?"z":""),G.select("tspan.name").text(this.zRoc?"(Hit Rate)":"Hit Rate"),u.append("line").classed("diagonal",!0),h.select(".diagonal").attr("x1",this.zRoc?g(-3):g(0)).attr("y1",this.zRoc?I(-3):I(0)).attr("x2",this.zRoc?g(3):g(1)).attr("y2",this.zRoc?I(3):I(1)),C.append("g").classed("content",!0);const R=b.select(".content"),L=R.selectAll(".curve-iso-d").data(this.isoDArray,t=>t.name),m=L.enter().append("path").classed("curve-iso-d",!0).attr("clip-path","url(#clip-roc-space)").merge(L);this.firstUpdate||t.has("zRoc")?m.transition().duration(this.drag?0:2*a).ease(cubicOut).attr("d",t=>n(range$1(g.range()[0],g.range()[1]+1,1).map(s=>({far:this.zRoc?SDTMath.zfar2Far(g.invert(s)):g.invert(s),hr:this.zRoc?SDTMath.dFar2Hr(t.d,SDTMath.zfar2Far(g.invert(s)),t.s):SDTMath.dFar2Hr(t.d,g.invert(s),t.s)})))):this.sdt?m.transition().duration(this.drag?0:a).ease(cubicOut).attrTween("d",(t,s,e)=>{const B=e[s];B.hr=void 0,B.far=void 0;const i=interpolate$1(void 0!==B.d?B.d:t.d,t.d),F=interpolate$1(void 0!==B.s?B.s:t.s,t.s);return t=>{B.d=i(t),B.s=F(t);const s=range$1(g.range()[0],g.range()[1]+1,1).map(t=>({far:this.zRoc?SDTMath.zfar2Far(g.invert(t)):g.invert(t),hr:this.zRoc?SDTMath.dFar2Hr(B.d,SDTMath.zfar2Far(g.invert(t)),B.s):SDTMath.dFar2Hr(B.d,g.invert(t),B.s)}));return n(s)}}):m.transition().duration(this.drag?0:a).ease(cubicOut).attrTween("d",(t,s,e)=>{const B=e[s];B.d=void 0,B.s=void 0;const i=interpolate$1(void 0!==B.hr?B.hr:t.hr,t.hr),F=interpolate$1(void 0!==B.far?B.far:t.far,t.far);return s=>{B.hr=i(s),B.far=F(s);const e=range$1(g.range()[0],g.range()[1]+1,1).map(s=>({far:this.zRoc?SDTMath.zfar2Far(g.invert(s)):g.invert(s),hr:this.zRoc?SDTMath.dFar2Hr(SDTMath.hrFar2D(B.hr,B.far,t.s),SDTMath.zfar2Far(g.invert(s)),t.s):SDTMath.dFar2Hr(SDTMath.hrFar2D(B.hr,B.far,t.s),g.invert(s),t.s)}));return n(e)}}),L.exit().remove();const S=R.selectAll(".curve-iso-c").data(this.isoCArray,t=>t.name),p=S.enter().append("path").classed("curve-iso-c",!0).attr("clip-path","url(#clip-roc-space)").merge(S);this.firstUpdate||t.has("zRoc")?p.transition().duration(this.drag?0:2*a).ease(cubicOut).attr("d",t=>n(range$1(g.range()[0],g.range()[1]+1,1).map(s=>({far:this.zRoc?SDTMath.zfar2Far(g.invert(s)):g.invert(s),hr:this.zRoc?SDTMath.cFar2Hr(t.c,SDTMath.zfar2Far(g.invert(s)),t.s):SDTMath.cFar2Hr(t.c,g.invert(s),t.s)})))):this.sdt?p.transition().duration(this.drag?0:a).ease(cubicOut).attrTween("d",(t,s,e)=>{const B=e[s];B.hr=void 0,B.far=void 0;const i=interpolate$1(void 0!==B.c?B.c:t.c,t.c),F=interpolate$1(void 0!==B.s?B.s:t.s,t.s);return t=>{B.c=i(t),B.s=F(t);const s=range$1(g.range()[0],g.range()[1]+1,1).map(t=>({far:this.zRoc?SDTMath.zfar2Far(g.invert(t)):g.invert(t),hr:this.zRoc?SDTMath.cFar2Hr(B.c,SDTMath.zfar2Far(g.invert(t)),B.s):SDTMath.cFar2Hr(B.c,g.invert(t),B.s)}));return n(s)}}):p.transition().duration(this.drag?0:a).ease(cubicOut).attrTween("d",(t,s,e)=>{const B=e[s];B.c=void 0,B.s=void 0;const i=interpolate$1(void 0!==B.hr?B.hr:t.hr,t.hr),F=interpolate$1(void 0!==B.far?B.far:t.far,t.far);return s=>{B.hr=i(s),B.far=F(s);const e=range$1(g.range()[0],g.range()[1]+1,1).map(s=>({far:this.zRoc?SDTMath.zfar2Far(g.invert(s)):g.invert(s),hr:this.zRoc?SDTMath.cFar2Hr(SDTMath.hrFar2C(B.hr,B.far,t.s),SDTMath.zfar2Far(g.invert(s)),t.s):SDTMath.cFar2Hr(SDTMath.hrFar2C(B.hr,B.far,t.s),g.invert(s),t.s)}));return n(e)}}),S.exit().remove();const V=R.selectAll(".point").data(this.pointArray,t=>t.name),Z=V.enter().append("g").classed("point",!0);Z.append("circle").classed("circle touch",!0),Z.append("text").classed("label",!0);const E=Z.merge(V);E.select("text").text(t=>t.label),(this.firstUpdate||t.has("interactive"))&&(this.interactive?E.attr("tabindex",0).classed("interactive",!0).call(c).on("keydown",(t,s)=>{if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){let e=this.zRoc?SDTMath.hr2Zhr(s.hr):s.hr,B=this.zRoc?SDTMath.far2Zfar(s.far):s.far;switch(t.key){case"ArrowUp":e+=this.zRoc?t.shiftKey?.05:.25:t.shiftKey?.01:.05;break;case"ArrowDown":e-=this.zRoc?t.shiftKey?.05:.25:t.shiftKey?.01:.05;break;case"ArrowRight":B+=this.zRoc?t.shiftKey?.05:.25:t.shiftKey?.01:.05;break;case"ArrowLeft":B-=this.zRoc?t.shiftKey?.05:.25:t.shiftKey?.01:.05}e=this.zRoc?SDTMath.zhr2Hr(e):e,B=this.zRoc?SDTMath.zfar2Far(B):B,e=e<.001?.001:e>.999?.999:e,B=B<.001?.001:B>.999?.999:B,e===s.hr&&B===s.far||(s.hr=e,s.far=B,"default"===s.name&&(this.hr=s.hr,this.far=s.far),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("roc-point-change",{detail:{name:s.name,far:s.far,hr:s.hr,d:s.d,c:s.c,s:s.s,label:s.label},bubbles:!0}))),t.preventDefault()}}):E.attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null)),this.firstUpdate||t.has("zRoc")?E.transition().duration(this.drag?0:2*a).ease(cubicOut).attr("transform",(t,s,e)=>{const B=e[s];return B.d=void 0,B.c=void 0,B.s=void 0,`translate(\n            ${g(this.zRoc?SDTMath.far2Zfar(t.far):t.far)},\n            ${I(this.zRoc?SDTMath.hr2Zhr(t.hr):t.hr)}\n          )`}):this.sdt?E.transition().duration(this.drag?0:a).ease(cubicOut).attrTween("transform",(t,s,e)=>{const B=e[s],i=interpolate$1(void 0!==B.d?B.d:t.d,t.d),F=interpolate$1(void 0!==B.c?B.c:t.c,t.c),Q=interpolate$1(void 0!==B.s?B.s:t.s,t.s);return t=>(B.d=i(t),B.c=F(t),B.s=Q(t),`translate(\n              ${g(this.zRoc?SDTMath.far2Zfar(SDTMath.dC2Far(B.d,B.c,B.s)):SDTMath.dC2Far(B.d,B.c,B.s))},\n              ${I(this.zRoc?SDTMath.hr2Zhr(SDTMath.dC2Hr(B.d,B.c,B.s)):SDTMath.dC2Hr(B.d,B.c,B.s))}\n            )`)}):E.transition().duration(this.drag?0:a).ease(cubicOut).attr("transform",(t,s,e)=>{const B=e[s];return B.d=void 0,B.c=void 0,B.s=void 0,`translate(\n            ${g(this.zRoc?SDTMath.far2Zfar(t.far):t.far)},\n            ${I(this.zRoc?SDTMath.hr2Zhr(t.hr):t.hr)}\n          )`}),V.exit().remove(),this.drag=!1,this.sdt=!1,this.firstUpdate=!1}}customElements.define("roc-space",ROCSpace);class SDTModel extends(DecidablesMixinResizeable(DetectableElement)){static get properties(){return{color:{attribute:"color",type:String,reflect:!0},distributions:{attribute:"distributions",type:Boolean,reflect:!0},threshold:{attribute:"threshold",type:Boolean,reflect:!0},unequal:{attribute:"unequal",type:Boolean,reflect:!0},sensitivity:{attribute:"sensitivity",type:Boolean,reflect:!0},bias:{attribute:"bias",type:Boolean,reflect:!0},variance:{attribute:"variance",type:Boolean,reflect:!0},histogram:{attribute:"histogram",type:Boolean,reflect:!0},d:{attribute:"d",type:Number,reflect:!0},c:{attribute:"c",type:Number,reflect:!0},s:{attribute:"s",type:Number,reflect:!0},far:{attribute:!1,type:Number,reflect:!1},hr:{attribute:!1,type:Number,reflect:!1},binWidth:{attribute:!1,type:Number,reflect:!1},trials:{attribute:!1,type:Array,reflect:!1}}}constructor(){super(),this.colors=["all","outcome","response","stimulus","none"],this.color="all",this.distributions=!1,this.threshold=!1,this.unequal=!1,this.sensitivity=!1,this.bias=!1,this.variance=!1,this.histogram=!1,this.d=SDTMath.d.DEFAULT,this.c=SDTMath.c.DEFAULT,this.s=SDTMath.s.DEFAULT,this.binWidth=.25,this.signals=["present","absent"],this.responses=["present","absent"],this.trials=[],this.muN=NaN,this.muS=NaN,this.l=NaN,this.hS=NaN,this.binRange=[-3,3],this.h=0,this.m=0,this.fa=0,this.cr=0,this.firstUpdate=!0,this.drag=!1,this.alignState()}reset(){this.trials=[],this.h=0,this.m=0,this.fa=0,this.cr=0}trial(t,s,e,B,i){const F={new:!0,paused:!1};F.trial=t,F.signal=s,F.duration=e,F.wait=B,F.iti=i,F.evidence=jStat.normal.sample(0,1),this.alignTrial(F),this.trials.push(F),this.requestUpdate()}alignTrial(t){return"present"===t.signal?(t.trueEvidence=t.evidence*this.s+this.muS,t.response=t.trueEvidence>this.l?"present":"absent",t.outcome="present"===t.response?"h":"m"):(t.trueEvidence=t.evidence+this.muN,t.response=t.trueEvidence>this.l?"present":"absent",t.outcome="present"===t.response?"fa":"cr"),t.new||(this[t.outcome]+=1),t}alignState(){this.far=SDTMath.dC2Far(this.d,this.c,this.s),this.hr=SDTMath.dC2Hr(this.d,this.c,this.s),this.muN=SDTMath.d2MuN(this.d,this.s),this.muS=SDTMath.d2MuS(this.d,this.s),this.l=SDTMath.c2L(this.c,this.s),this.hS=SDTMath.s2H(this.s),this.h=0,this.m=0,this.fa=0,this.cr=0;for(let t=0;t<this.trials.length;t+=1)this.alignTrial(this.trials[t])}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;

          width: 27rem;
          height: 15rem;
        }

        .main {
          width: 100%;
          height: 100%;
        }

        text {
          /* stylelint-disable property-no-vendor-prefix */
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
        }

        .tick {
          font-size: 0.75rem;
        }

        .axis-x path,
        .axis-x line,
        .axis-y path,
        .axis-y line,
        .axis-y2 path,
        .axis-y2 line {
          stroke: var(---color-element-border);
        }

        .noise.interactive,
        .signal.interactive,
        .threshold.interactive {
          cursor: ew-resize;

          filter: url("#shadow-2");
          outline: none;
        }

        .signal.unequal {
          cursor: ns-resize;

          filter: url("#shadow-2");
          outline: none;
        }

        .signal.interactive.unequal {
          cursor: move;
        }

        .noise.interactive:hover,
        .signal.interactive:hover,
        .signal.unequal:hover,
        .threshold.interactive:hover {
          filter: url("#shadow-4");

          /* HACK: This gets Safari to correctly apply the filter! */
          /* https://github.com/emilbjorklund/svg-weirdness/issues/27 */
          transform: translateX(0);
        }

        .noise.interactive:active,
        .signal.interactive:active,
        .signal.unequal:active,
        .threshold.interactive:active {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          transform: translateY(0);
        }

        :host(.keyboard) .noise.interactive:focus,
        :host(.keyboard) .signal.interactive:focus,
        :host(.keyboard) .signal.unequal:focus,
        :host(.keyboard) .threshold.interactive:focus {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          transform: translateZ(0);
        }

        .underlayer .background {
          fill: var(---color-element-background);
          stroke: none;
        }

        .overlayer .background {
          fill: none;
          stroke: var(---color-element-border);
          stroke-width: 1;
          shape-rendering: crispEdges;
        }

        .title-x,
        .title-y,
        .title-y2 {
          font-weight: 600;

          fill: currentColor;
        }

        .curve-cr,
        .curve-fa,
        .curve-m,
        .curve-h {
          fill-opacity: 0.5;
          stroke: none;

          transition: fill var(---transition-duration) ease;
        }

        .curve-cr {
          fill: var(---color-cr);
        }

        .curve-fa {
          fill: var(---color-fa);
        }

        .curve-m {
          fill: var(---color-m);
        }

        .curve-h {
          fill: var(---color-h);
        }

        :host([color="accuracy"]) .curve-h,
        :host([color="accuracy"]) .curve-cr {
          fill: var(---color-correct);
        }

        :host([color="accuracy"]) .curve-m,
        :host([color="accuracy"]) .curve-fa {
          fill: var(---color-error);
        }

        :host([color="stimulus"]) .curve-cr,
        :host([color="stimulus"]) .curve-fa {
          fill: var(---color-far);
        }

        :host([color="stimulus"]) .curve-m,
        :host([color="stimulus"]) .curve-h {
          fill: var(---color-hr);
        }

        :host([color="response"]) .curve-cr,
        :host([color="response"]) .curve-m {
          fill: var(---color-absent);
        }

        :host([color="response"]) .curve-fa,
        :host([color="response"]) .curve-h {
          fill: var(---color-present);
        }

        :host([color="none"]) .curve-cr,
        :host([color="none"]) .curve-fa,
        :host([color="none"]) .curve-m,
        :host([color="none"]) .curve-h {
          fill: var(---color-element-enabled);
        }

        .curve-noise,
        .curve-signal {
          fill: none;
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .measure-d,
        .measure-c,
        .measure-s {
          pointer-events: none;
        }

        .threshold .line {
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .threshold .handle {
          fill: var(---color-element-emphasis);

          r: 6px;
        }

        .measure-d .line,
        .measure-d .cap-left,
        .measure-d .cap-right {
          stroke: var(---color-d);
          stroke-width: 2;
          shape-rendering: crispEdges;
        }

        .measure-d .label {
          font-size: 0.75rem;

          text-anchor: start;
          fill: currentColor;
        }

        .measure-c .line,
        .measure-c .cap-zero {
          stroke: var(---color-c);
          stroke-width: 2;
          shape-rendering: crispEdges;
        }

        .measure-c .label {
          font-size: 0.75rem;

          fill: currentColor;
        }

        .measure-s .line,
        .measure-s .cap-left,
        .measure-s .cap-right {
          stroke: var(---color-s);
          stroke-width: 2;
          shape-rendering: crispEdges;
        }

        .measure-s .label {
          font-size: 0.75rem;

          text-anchor: middle;
          fill: currentColor;
        }

        /* Make a larger target for touch users */
        .interactive .touch {
          stroke: #000000;
          stroke-opacity: 0;
        }

        @media (pointer: coarse) {
          .interactive .touch {
            stroke-linecap: round;
            stroke-width: 12;
          }
        }
      `]}render(){return x$3``}sendEvent(){this.dispatchEvent(new CustomEvent("sdt-model-change",{detail:{d:this.d,c:this.c,s:this.s,far:this.far,hr:this.hr,h:this.h,m:this.m,fa:this.fa,cr:this.cr},bubbles:!0}))}willUpdate(){this.alignState()}update(t){if(super.update(t),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const s=this.width,e=this.height;let B,i;s/e>1.8?(i=e,B=1.8*i):(B=s,i=B/1.8);const F=2*this.rem,Q=3*this.rem,l=3*this.rem,U=i-(F+Q),a=B-(l+(this.histogram&&this.distributions?3:.75)*this.rem),g=parseInt(this.getComputedStyleValue("---transition-duration"),10),I=linear().domain([-3,3]).range([0,a]),c=linear().domain([.5,0]).range([0,U]),n=I(this.binWidth)-I(0),r=linear().domain([U/n,0]).range([0,U]),o=drag().subject(()=>({x:I(this.l),y:0})).on("start",t=>{select(t.currentTarget).classed("dragging",!0)}).on("drag",t=>{this.drag=!0;const s=I.invert(t.x),e=SDTMath.l2C(s,this.s);this.c=e<SDTMath.c.MIN?SDTMath.c.MIN:e>SDTMath.c.MAX?SDTMath.c.MAX:e,this.alignState(),this.sendEvent()}).on("end",t=>{select(t.currentTarget).classed("dragging",!1)}),d=drag().subject(()=>({x:I(this.muN),y:0})).on("start",t=>{select(t.currentTarget).classed("dragging",!0)}).on("drag",t=>{this.drag=!0;const s=I.invert(t.x),e=SDTMath.muN2D(s,this.s);this.d=e<SDTMath.d.MIN?SDTMath.d.MIN:e>SDTMath.d.MAX?SDTMath.d.MAX:e,this.alignState(),this.sendEvent()}).on("end",t=>{select(t.currentTarget).classed("dragging",!1)}),C=drag().subject(()=>({x:I(this.muS),y:c(this.hS)})).on("start",(t,s)=>{select(t.currentTarget).classed("dragging",!0),s.startX=t.x,s.startY=t.y,s.startHS=this.hS,s.startMuS=this.muS}).on("drag",(t,s)=>{this.drag=!0;let e=this.muS;this.interactive&&(e=I.invert(t.x));let B=this.hS;if(this.unequal&&(B=c.invert(t.y)),this.interactive&&this.unequal&&t.sourceEvent.shiftKey&&(Math.abs(t.x-s.startX)>Math.abs(t.y-s.startY)?B=s.startHS:e=s.startMuS),this.unequal){const t=SDTMath.h2S(B);this.s=t<SDTMath.s.MIN?SDTMath.s.MIN:t>SDTMath.s.MAX?SDTMath.s.MAX:t;const s=SDTMath.l2C(this.l,this.s);this.c=s<SDTMath.c.MIN?SDTMath.c.MIN:s>SDTMath.c.MAX?SDTMath.c.MAX:s}const i=SDTMath.muS2D(e,this.s);this.d=i<SDTMath.d.MIN?SDTMath.d.MIN:i>SDTMath.d.MAX?SDTMath.d.MAX:i,this.alignState(),this.sendEvent()}).on("end",t=>{select(t.currentTarget).classed("dragging",!1)}),b=shapeLine().x(t=>I(t.e)).y(t=>c(t.p)),u=select(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),h=u.enter().append("svg").classed("main",!0).each((t,s,e)=>{B$1(DetectableElement.svgFilters,e[s])}),y=h.merge(u).attr("viewBox",`0 0 ${B} ${i}`),x=h.append("g").classed("plot",!0),A=y.select(".plot").attr("transform",`translate(${l}, ${F})`),G=x.append("g").classed("underlayer",!0),R=A.select(".underlayer");G.append("rect").classed("background",!0),R.select(".background").attr("height",U).attr("width",a),G.append("g").classed("axis-x",!0);R.select(".axis-x").attr("transform",`translate(0, ${U})`).call(axisBottom(I)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null),G.append("text").classed("title-x",!0).attr("text-anchor","middle").text("Evidence"),R.select(".title-x").attr("transform",`translate(${a/2}, ${U+2.25*this.rem})`);const L=R.selectAll(".axis-y").data(this.distributions?[{}]:[]);L.enter().append("g").classed("axis-y",!0).merge(L).call(axisLeft(c).ticks(5)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null),L.exit().remove();const m=R.selectAll(".title-y").data(this.distributions?[{}]:[]);m.enter().append("text").classed("title-y",!0).attr("text-anchor","middle").text("Probability").merge(m).attr("transform",`translate(${-2*this.rem}, ${U/2})rotate(-90)`),m.exit().remove();const S=R.selectAll(".axis-y2").data(this.histogram?[{}]:[]);S.enter().append("g").classed("axis-y2",!0).merge(S).attr("transform",this.distributions?`translate(${a}, 0)`:"").call(this.distributions?axisRight(r).ticks(10):axisLeft(r).ticks(10)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null),S.exit().remove();const p=R.selectAll(".title-y2").data(this.histogram?[{}]:[]);p.enter().append("text").classed("title-y2",!0).attr("text-anchor","middle").text("Count").merge(p).attr("transform",this.distributions?`translate(${a+1.5*this.rem}, ${U/2})rotate(90)`:`translate(${-1.5*this.rem}, ${U/2})rotate(-90)`),p.exit().remove(),x.append("g").classed("content",!0);const V=A.select(".content"),Z=V.selectAll(".signal-noise").data(this.distributions?[{}]:[]),E=Z.enter().append("g").classed("signal-noise",!0),N=E.merge(Z);Z.exit().remove();const X=E.append("g").classed("noise",!0),D=N.selectAll(".noise").attr("tabindex",this.interactive?0:null).classed("interactive",this.interactive).on("keydown",this.interactive?t=>{if(["ArrowRight","ArrowLeft"].includes(t.key)){let s=this.muN;switch(t.key){case"ArrowRight":s+=t.shiftKey?.01:.1;break;case"ArrowLeft":s-=t.shiftKey?.01:.1}const e=SDTMath.muN2D(s,this.s);this.d=e<SDTMath.d.MIN?SDTMath.d.MIN:e>SDTMath.d.MAX?SDTMath.d.MAX:e,this.alignState(),this.sendEvent(),t.preventDefault()}}:null);(this.firstUpdate||t.has("interactive"))&&(this.interactive?D.call(d):D.on(".drag",null)),X.append("path").classed("curve-cr",!0),D.select(".curve-cr").transition().duration(this.drag?0:g).ease(cubicOut).attrTween("d",(t,s,e)=>{const B=e[s],i=interpolate$1(void 0!==B.d?B.d:this.d,this.d),F=interpolate$1(void 0!==B.c?B.c:this.c,this.c),Q=interpolate$1(void 0!==B.s?B.s:this.s,this.s);return t=>{B.d=i(t),B.c=F(t),B.s=Q(t);const s=range$1(I.domain()[0],SDTMath.c2L(B.c,B.s),.05).map(t=>({e:t,p:jStat.normal.pdf(t,SDTMath.d2MuN(B.d,B.s),1)}));return s.push({e:SDTMath.c2L(B.c,B.s),p:jStat.normal.pdf(SDTMath.c2L(B.c,B.s),SDTMath.d2MuN(B.d,B.s),1)}),s.push({e:SDTMath.c2L(B.c,B.s),p:0}),s.push({e:I.domain()[0],p:0}),b(s)}}),X.append("path").classed("curve-fa",!0),D.select(".curve-fa").transition().duration(this.drag?0:g).ease(cubicOut).attrTween("d",(t,s,e)=>{const B=e[s],i=interpolate$1(void 0!==B.d?B.d:this.d,this.d),F=interpolate$1(void 0!==B.c?B.c:this.c,this.c),Q=interpolate$1(void 0!==B.s?B.s:this.s,this.s);return t=>{B.d=i(t),B.c=F(t),B.s=Q(t);const s=range$1(SDTMath.c2L(B.c,B.s),I.domain()[1],.05).map(t=>({e:t,p:jStat.normal.pdf(t,SDTMath.d2MuN(B.d,B.s),1)}));return s.push({e:I.domain()[1],p:jStat.normal.pdf(I.domain()[1],SDTMath.d2MuN(B.d,B.s),1)}),s.push({e:I.domain()[1],p:0}),s.push({e:SDTMath.c2L(B.c,B.s),p:0}),b(s)}}),X.append("path").classed("curve-noise",!0),D.select(".curve-noise").transition().duration(this.drag?0:g).ease(cubicOut).attrTween("d",(t,s,e)=>{const B=e[s],i=interpolate$1(void 0!==B.d?B.d:this.d,this.d),F=interpolate$1(void 0!==B.s?B.s:this.s,this.s);return t=>{B.d=i(t),B.s=F(t);const s=range$1(I.domain()[0],I.domain()[1],.05).map(t=>({e:t,p:jStat.normal.pdf(t,SDTMath.d2MuN(B.d,B.s),1)}));return s.push({e:I.domain()[1],p:jStat.normal.pdf(I.domain()[1],SDTMath.d2MuN(B.d,B.s),1)}),b(s)}});const W=E.append("g").classed("signal",!0),H=N.selectAll(".signal").attr("tabindex",this.interactive||this.unequal?0:null).classed("interactive",this.interactive).classed("unequal",this.unequal).on("keydown.sensitivity",this.interactive?t=>{if(["ArrowRight","ArrowLeft"].includes(t.key)){let s=this.muS;switch(t.key){case"ArrowRight":s+=t.shiftKey?.01:.1;break;case"ArrowLeft":s-=t.shiftKey?.01:.1}const e=SDTMath.muS2D(s,this.s);this.d=e<SDTMath.d.MIN?SDTMath.d.MIN:e>SDTMath.d.MAX?SDTMath.d.MAX:e,this.alignState(),this.sendEvent(),t.preventDefault()}}:null).on("keydown.variance",this.unequal?t=>{if(["ArrowUp","ArrowDown"].includes(t.key)){let s=this.hS;switch(t.key){case"ArrowUp":s+=t.shiftKey?.002:.02;break;case"ArrowDown":s-=t.shiftKey?.002:.02}s=s<0?0:s;const e=SDTMath.h2S(s);this.s=e<SDTMath.s.MIN?SDTMath.s.MIN:e>SDTMath.s.MAX?SDTMath.s.MAX:e,this.d=SDTMath.muN2D(this.muN,this.s),this.c=SDTMath.l2C(this.l,this.s),this.alignState(),this.sendEvent(),t.preventDefault()}}:null);(this.firstUpdate||t.has("interactive")||t.has("unequal"))&&(this.interactive||this.unequal?H.call(C):H.on(".drag",null)),W.append("path").classed("curve-m",!0),H.select(".curve-m").transition().duration(this.drag?0:g).ease(cubicOut).attrTween("d",(t,s,e)=>{const B=e[s],i=interpolate$1(void 0!==B.d?B.d:this.d,this.d),F=interpolate$1(void 0!==B.c?B.c:this.c,this.c),Q=interpolate$1(void 0!==B.s?B.s:this.s,this.s);return t=>{B.d=i(t),B.c=F(t),B.s=Q(t);const s=range$1(I.domain()[0],SDTMath.c2L(B.c,B.s),.05).map(t=>({e:t,p:jStat.normal.pdf(t,SDTMath.d2MuS(B.d,B.s),B.s)}));return s.push({e:SDTMath.c2L(B.c,B.s),p:jStat.normal.pdf(SDTMath.c2L(B.c,B.s),SDTMath.d2MuS(B.d,B.s),B.s)}),s.push({e:SDTMath.c2L(B.c,B.s),p:0}),s.push({e:I.domain()[0],p:0}),b(s)}}),W.append("path").classed("curve-h",!0),H.select(".curve-h").transition().duration(this.drag?0:g).ease(cubicOut).attrTween("d",(t,s,e)=>{const B=e[s],i=interpolate$1(void 0!==B.d?B.d:this.d,this.d),F=interpolate$1(void 0!==B.c?B.c:this.c,this.c),Q=interpolate$1(void 0!==B.s?B.s:this.s,this.s);return t=>{B.d=i(t),B.c=F(t),B.s=Q(t);const s=range$1(SDTMath.c2L(B.c,B.s),I.domain()[1],.05).map(t=>({e:t,p:jStat.normal.pdf(t,SDTMath.d2MuS(B.d,B.s),B.s)}));return s.push({e:I.domain()[1],p:jStat.normal.pdf(I.domain()[1],SDTMath.d2MuS(B.d,B.s),B.s)}),s.push({e:I.domain()[1],p:0}),s.push({e:SDTMath.c2L(B.c,B.s),p:0}),b(s)}}),W.append("path").classed("curve-signal",!0),H.select(".curve-signal").transition().duration(this.drag?0:g).ease(cubicOut).attrTween("d",(t,s,e)=>{const B=e[s],i=interpolate$1(void 0!==B.d?B.d:this.d,this.d),F=interpolate$1(void 0!==B.s?B.s:this.s,this.s);return t=>{B.d=i(t),B.s=F(t);const s=range$1(I.domain()[0],I.domain()[1],.05).map(t=>({e:t,p:jStat.normal.pdf(t,SDTMath.d2MuS(B.d,B.s),B.s)}));return s.push({e:I.domain()[1],p:jStat.normal.pdf(I.domain()[1],SDTMath.d2MuS(B.d,B.s),B.s)}),b(s)}});const v=V.selectAll(".measure-d").data(this.sensitivity?[{}]:[]),w=v.enter().append("g").classed("measure-d",!0);w.append("line").classed("line",!0),w.append("line").classed("cap-left",!0),w.append("line").classed("cap-right",!0);const Y=w.append("text").classed("label",!0);Y.append("tspan").classed("d math-var",!0).text("dâ²"),Y.append("tspan").classed("equals",!0).text(" = "),Y.append("tspan").classed("value",!0);const f=w.merge(v);f.select(".line").transition().duration(this.drag?0:g).ease(cubicOut).attr("x1",I(this.muN)).attr("y1",c(.43)).attr("x2",I(this.muS)).attr("y2",c(.43)),f.select(".cap-left").transition().duration(this.drag?0:g).ease(cubicOut).attr("x1",I(this.muN)).attr("y1",c(.43)+5).attr("x2",I(this.muN)).attr("y2",c(.43)-5),f.select(".cap-right").transition().duration(this.drag?0:g).ease(cubicOut).attr("x1",I(this.muS)).attr("y1",c(.43)+5).attr("x2",I(this.muS)).attr("y2",c(.43)-5);f.select(".label").transition().duration(this.drag?0:g).ease(cubicOut).attr("x",I(this.muN>this.muS?this.muN:this.muS)+5).attr("y",c(.43)+3).select(".value").tween("text",(t,s,e)=>{const B=e[s],i=interpolate$1(void 0!==B.d?B.d:this.d,this.d);return t=>{B.d=i(t),select(B).text(format$1(".3")(B.d))}}),v.exit().remove();const J=V.selectAll(".measure-c").data(this.bias?[{}]:[]),M=J.enter().append("g").classed("measure-c",!0);M.append("line").classed("line",!0),M.append("line").classed("cap-zero",!0);const k=M.append("text").classed("label",!0);k.append("tspan").classed("c math-var",!0).text("c"),k.append("tspan").classed("equals",!0).text(" = "),k.append("tspan").classed("value",!0);const T=M.merge(J);T.select(".line").transition().duration(this.drag?0:g).ease(cubicOut).attr("x1",I(this.l)).attr("y1",c(.47)).attr("x2",I(0)).attr("y2",c(.47)),T.select(".cap-zero").transition().duration(this.drag?0:g).ease(cubicOut).attr("x1",I(0)).attr("y1",c(.47)+5).attr("x2",I(0)).attr("y2",c(.47)-5);T.select(".label").transition().duration(this.drag?0:g).ease(cubicOut).attr("x",I(0)+(this.l<0?5:-5)).attr("y",c(.47)+3).attr("text-anchor",this.c<0?"start":"end").select(".value").tween("text",(t,s,e)=>{const B=e[s],i=interpolate$1(void 0!==B.c?B.c:this.c,this.c);return t=>{B.c=i(t),select(B).text(format$1(".3")(B.c))}}),J.exit().remove();const z=V.selectAll(".measure-s").data(this.variance?[{}]:[]),K=z.enter().append("g").classed("measure-s",!0);K.append("line").classed("line",!0),K.append("line").classed("cap-left",!0),K.append("line").classed("cap-right",!0);const O=K.append("text").classed("label",!0);O.append("tspan").classed("s math-var",!0).text("Ï"),O.append("tspan").classed("equals",!0).text(" = "),O.append("tspan").classed("value",!0);const $=K.merge(z);$.select(".line").transition().duration(this.drag?0:g).ease(cubicOut).attr("x1",I(this.muS-this.s)).attr("y1",c(jStat.normal.pdf(this.s,0,this.s))+10/this.s).attr("x2",I(this.muS+this.s)).attr("y2",c(jStat.normal.pdf(this.s,0,this.s))+10/this.s),$.select(".cap-left").transition().duration(this.drag?0:g).ease(cubicOut).attr("x1",I(this.muS-this.s)).attr("y1",c(jStat.normal.pdf(this.s,0,this.s))+10/this.s+5).attr("x2",I(this.muS-this.s)).attr("y2",c(jStat.normal.pdf(this.s,0,this.s))+10/this.s-5),$.select(".cap-right").transition().duration(this.drag?0:g).ease(cubicOut).attr("x1",I(this.muS+this.s)).attr("y1",c(jStat.normal.pdf(this.s,0,this.s))+10/this.s+5).attr("x2",I(this.muS+this.s)).attr("y2",c(jStat.normal.pdf(this.s,0,this.s))+10/this.s-5);$.select(".label").transition().duration(this.drag?0:g).ease(cubicOut).attr("x",I(this.muS)).attr("y",c(jStat.normal.pdf(this.s,0,this.s))+10/this.s-3).select(".value").tween("text",(t,s,e)=>{const B=e[s],i=interpolate$1(void 0!==B.s?B.s:this.s,this.s);return t=>{B.s=i(t),select(B).text(format$1(".3")(B.s))}}),z.exit().remove();const P=V.selectAll(".threshold").data(this.threshold?[{}]:[]),j=P.enter().append("g").classed("threshold",!0);j.append("line").classed("line",!0),j.append("line").classed("line touch",!0),j.append("circle").classed("handle touch",!0);const _=j.merge(P).attr("tabindex",this.interactive?0:null).classed("interactive",this.interactive);(this.firstUpdate||t.has("interactive"))&&(this.interactive?_.call(o).on("keydown",t=>{if(["ArrowRight","ArrowLeft"].includes(t.key)){let s=this.l;switch(t.key){case"ArrowRight":s+=t.shiftKey?.01:.1;break;case"ArrowLeft":s-=t.shiftKey?.01:.1}const e=SDTMath.l2C(s,this.s);this.c=e<SDTMath.c.MIN?SDTMath.c.MIN:e>SDTMath.c.MAX?SDTMath.c.MAX:e,this.alignState(),this.sendEvent(),t.preventDefault()}}):_.on("drag",null).on("keydown",null)),_.select(".line").transition().duration(this.drag?0:g).ease(cubicOut).attr("x1",I(this.l)).attr("y1",c(0)).attr("x2",I(this.l)).attr("y2",c(.54)),_.select(".line.touch").transition().duration(this.drag?0:g).ease(cubicOut).attr("x1",I(this.l)).attr("y1",c(0)).attr("x2",I(this.l)).attr("y2",c(.54)),_.select(".handle").transition().duration(this.drag?0:g).ease(cubicOut).attr("cx",I(this.l)).attr("cy",c(.54)),P.exit().remove();const q=V.selectAll(".histogram").data(this.histogram?[{}]:[]),tt=q.enter().append("g").classed("histogram",!0).merge(q);if(q.exit().remove(),this.histogram){const t=bin().value(t=>t.trueEvidence).domain(I.domain()).thresholds(range$1(this.binRange[0],this.binRange[1],this.binWidth)),s=t(this.trials);let e=-1,B=-1;for(let t=0;t<s.length;t+=1)for(let i=0;i<s[t].length;i+=1)s[t][i].binValue=s[t].x0,s[t][i].binCount=i,0===t&&(e=i),t===s.length-1&&(B=i);for(let t=0;t<this.trials.length;t+=1)this.trials[t].trueEvidence<this.binRange[0]&&(e+=1,this.trials[t].binCount=e,this.trials[t].binValue=s[0].x0),this.trials[t].trueEvidence>this.binRange[1]&&(B+=1,this.trials[t].binCount=B,this.trials[t].binValue=s[s.length-1].x0);const i=tt.selectAll(".trial").data(this.trials,t=>t.trial),F=i.enter().append("rect").attr("stroke-width",3).attr("data-new-trial-ease-time",0).attr("stroke",this.getComputedStyleValue("---color-acc")).attr("fill",this.getComputedStyleValue("---color-acc-light")).merge(i).attr("class",t=>`trial ${t.outcome}`).attr("width",n-3).attr("height",n-3),Q=F.filter(t=>t.new&&!t.paused);if(!Q.empty()){const t=Q.attr("data-new-trial-ease-time"),s=s=>linear().domain([0,1]).range([t,1])(s),e=s=>e=>linear().domain([s(t),1]).range([0,1])(s(e));Q.transition("new").duration(s=>Math.floor((.75*s.duration+.25*s.wait)*(1-t))).ease(s).attr("data-new-trial-ease-time",1).attrTween("stroke",(t,s,B)=>{const i=B[s],F=interpolateRgb(i.getAttribute("stroke"),"stimulus"===this.color?"present"===t.signal?this.getComputedStyleValue("---color-hr"):this.getComputedStyleValue("---color-far"):"response"===this.color?this.getComputedStyleValue(`---color-${t.response}`):"outcome"===this.color||"all"===this.color?this.getComputedStyleValue(`---color-${t.outcome}`):this.getComputedStyleValue("---color-acc"));return t=>F(e(cubicIn)(t))}).attrTween("fill",(t,s,B)=>{const i=B[s],F=interpolateRgb(i.getAttribute("fill"),"stimulus"===this.color?"present"===t.signal?this.getComputedStyleValue("---color-hr-light"):this.getComputedStyleValue("---color-far-light"):"response"===this.color?this.getComputedStyleValue(`---color-${t.response}-light`):"outcome"===this.color||"all"===this.color?this.getComputedStyleValue(`---color-${t.outcome}-light`):this.getComputedStyleValue("---color-acc-light"));return t=>F(e(cubicIn)(t))}).attrTween("x",(t,s,B)=>{const i=interpolate$1(B[s].getAttribute("x"),I(t.binValue)+1.5);return t=>i(e(cubicOut)(t))}).attrTween("y",(t,s,B)=>{const i=interpolate$1(B[s].getAttribute("y"),c(0)+1.5-(t.binCount+1)*n);return t=>i(e(cubicIn)(t))}).on("end",(t,s,e)=>{e[s].removeAttribute("data-new-trial-ease-time"),t.new=!1,this.alignTrial(t),this.dispatchEvent(new CustomEvent("detectable-response",{detail:{stimulus:t.signal,response:t.response,outcome:t.outcome,h:this.h,m:this.m,fa:this.fa,cr:this.cr,nr:0},bubbles:!0}))})}const l=F.filter(t=>t.new&&t.paused);if(!l.empty()){const t=l.attr("data-new-trial-ease-time");l.transition().duration(g).ease(cubicOut).attr("x",s=>interpolate$1(0,I(s.binValue)+1.5)(cubicOut(t))).attr("y",s=>interpolate$1(0,c(0)+1.5-(s.binCount+1)*n)(cubicIn(t))).attr("stroke",s=>interpolateRgb(this.getComputedStyleValue("---color-acc"),"stimulus"===this.color?"present"===s.signal?this.getComputedStyleValue("---color-hr"):this.getComputedStyleValue("---color-far"):"response"===this.color?this.getComputedStyleValue(`---color-${s.response}`):"outcome"===this.color||"all"===this.color?this.getComputedStyleValue(`---color-${s.outcome}`):this.getComputedStyleValue("---color-acc"))(cubicIn(t))).attr("fill",s=>interpolateRgb(this.getComputedStyleValue("---color-acc-light"),"stimulus"===this.color?"present"===s.signal?this.getComputedStyleValue("---color-hr-light"):this.getComputedStyleValue("---color-far-light"):"response"===this.color?this.getComputedStyleValue(`---color-${s.response}-light`):"outcome"===this.color||"all"===this.color?this.getComputedStyleValue(`---color-${s.outcome}-light`):this.getComputedStyleValue("---color-acc-light"))(cubicIn(t)))}F.filter(t=>!t.new).transition().duration(g).ease(cubicOut).attr("x",t=>I(t.binValue)+1.5).attr("y",t=>c(0)+1.5-(t.binCount+1)*n).attr("stroke",t=>"stimulus"===this.color?"present"===t.signal?this.getComputedStyleValue("---color-hr"):this.getComputedStyleValue("---color-far"):"response"===this.color?this.getComputedStyleValue(`---color-${t.response}`):"outcome"===this.color||"all"===this.color?this.getComputedStyleValue(`---color-${t.outcome}`):this.getComputedStyleValue("---color-acc")).attr("fill",t=>"stimulus"===this.color?"present"===t.signal?this.getComputedStyleValue("---color-hr-light"):this.getComputedStyleValue("---color-far-light"):"response"===this.color?this.getComputedStyleValue(`---color-${t.response}-light`):"outcome"===this.color||"all"===this.color?this.getComputedStyleValue(`---color-${t.outcome}-light`):this.getComputedStyleValue("---color-acc-light")),i.exit().transition().duration(g).ease(linear$1).attrTween("stroke",(t,s,e)=>{const B=e[s],i=interpolateRgb(B.getAttribute("stroke"),this.getComputedStyleValue("---color-acc"));return t=>i(cubicIn(t))}).attrTween("fill",(t,s,e)=>{const B=e[s],i=interpolateRgb(B.getAttribute("fill"),this.getComputedStyleValue("---color-acc-light"));return t=>i(cubicIn(t))}).attrTween("x",(t,s,e)=>{const B=interpolate$1(e[s].getAttribute("x"),0);return t=>B(cubicIn(t))}).attrTween("y",(t,s,e)=>{const B=interpolate$1(e[s].getAttribute("y"),0);return t=>B(cubicOut(t))}).remove()}const st=x.append("g").classed("overlayer",!0),et=A.select(".overlayer");st.append("rect").classed("background",!0),et.select(".background").attr("height",U).attr("width",a),this.drag=!1,this.firstUpdate=!1}pauseTrial(){const t=select(this.renderRoot).select(".trial[data-new-trial-ease-time]");t.interrupt("new"),t.datum(t=>(t.paused=!0,t))}resumeTrial(){select(this.renderRoot).select(".trial[data-new-trial-ease-time]").datum(t=>(t.paused=!1,t)),this.requestUpdate()}}customElements.define("sdt-model",SDTModel);class SDTParameters extends DetectableElement{static get properties(){return{d:{attribute:"d",type:Number,reflect:!0},c:{attribute:"c",type:Number,reflect:!0},s:{attribute:"s",type:Number,reflect:!0}}}constructor(){super(),this.d=void 0,this.c=void 0,this.s=void 0}setSensitivity(t){this.d=+t.target.value,this.dispatchEvent(new CustomEvent("sdt-parameters-d",{detail:{d:this.d},bubbles:!0}))}setBias(t){this.c=+t.target.value,this.dispatchEvent(new CustomEvent("sdt-parameters-c",{detail:{c:this.c},bubbles:!0}))}setVariance(t){this.s=+t.target.value,this.dispatchEvent(new CustomEvent("sdt-parameters-s",{detail:{s:this.s},bubbles:!0}))}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;
        }

        .holder {
          display: flex;

          flex-direction: row;

          align-items: stretch;
          justify-content: center;
        }

        decidables-slider {
          line-height: 1;
          text-align: center;
        }

        decidables-slider  div {
          margin-bottom: 0.25rem;
        }

        .d {
          --decidables-slider-background-color: var(---color-d-light);
          --decidables-slider-color: var(---color-d);
        }

        .c {
          --decidables-slider-background-color: var(---color-c-light);
          --decidables-slider-color: var(---color-c);
        }

        .s {
          --decidables-slider-background-color: var(---color-s-light);
          --decidables-slider-color: var(---color-s);
        }
      `]}render(){return x$3`
      <div class="holder">
        ${null!=this.d?x$3`<decidables-slider class="d"
            ?disabled=${!this.interactive}
            scale
            min=${SDTMath.d.MIN}
            max=${SDTMath.d.MAX}
            step=${SDTMath.d.STEP}
            .value=${+this.d.toFixed(2)}
            @change=${this.setSensitivity.bind(this)}
            @input=${this.setSensitivity.bind(this)}
          ><div>Sensitivity<br><span class="math-var">dâ²</span></div></decidables-slider>`:x$3``}
        ${null!=this.c?x$3`<decidables-slider class="c"
            ?disabled=${!this.interactive}
            scale
            min=${SDTMath.c.MIN}
            max=${SDTMath.c.MAX}
            step=${SDTMath.c.STEP}
            .value=${+this.c.toFixed(2)}
            @change=${this.setBias.bind(this)}
            @input=${this.setBias.bind(this)}
          ><div>Bias<br><span class="math-var">c</span></div></decidables-slider>`:x$3``}
        ${null!=this.s?x$3`<decidables-slider class="s"
            ?disabled=${!this.interactive}
            scale
            min=${SDTMath.s.MIN}
            max=${SDTMath.s.MAX}
            step=${SDTMath.s.STEP}
            .value=${+this.s.toFixed(2)}
            @change=${this.setVariance.bind(this)}
            @input=${this.setVariance.bind(this)}
          ><div>Variance<br><span class="math-var">Ï</span></div></decidables-slider>`:x$3``}
      </div>`}}customElements.define("sdt-parameters",SDTParameters);class SDTEquation extends DetectableElement{static get properties(){return{numeric:{attribute:"numeric",type:Boolean,reflect:!0}}}constructor(){super(),this.numeric=!1}static get styles(){return[super.styles,i$5`
        :host {
          display: block;

          margin: 1rem;
        }

        /* Containing <div> */
        .holder {
          display: flex;

          flex-direction: row;

          justify-content: left;
        }

        /* Overall <table> */
        .equation {
          text-align: center;
          white-space: nowrap;

          border-collapse: collapse;

          border: 0;
        }

        /* Modifies <td> */
        .underline {
          border-bottom: 1px solid var(---color-text);
        }

        /* Basic <span> and <var> w/modifiers */
        span,
        var {
          padding: 0 0.25rem;

          font-style: normal;
        }

        var {
          border-radius: var(---border-radius);
        }

        .tight {
          padding: 0;
        }

        .paren {
          font-size: 150%;
        }

        .bracket {
          font-size: 175%;
        }

        .exp {
          font-size: 0.75rem;
        }

        /* Input wrapping <label> */
        decidables-spinner {
          --decidables-spinner-input-width: 4rem;

          display: inline-block;

          padding: 0.125rem 0.375rem 0.375rem;

          vertical-align: middle;

          border-radius: var(---border-radius);
        }

        .bottom {
          vertical-align: bottom;
        }

        /* Color scheme */
        .h {
          background: var(---color-h-light);
        }

        .m {
          background: var(---color-m-light);
        }

        .hr {
          background: var(---color-hr-light);
        }

        .fa {
          background: var(---color-fa-light);
        }

        .ppv {
          background: var(---color-present-light);
        }

        .fomr {
          background: var(---color-absent-light);
        }

        .acc {
          background: var(---color-acc-light);
        }

        .cr {
          background: var(---color-cr-light);
        }

        .far {
          background: var(---color-far-light);
        }

        .d {
          background: var(---color-d-light);
        }

        .c {
          background: var(---color-c-light);
        }

        .s {
          background: var(---color-s-light);
        }
      `]}}class SDTEquationDC2Far extends SDTEquation{static get properties(){return{unequal:{attribute:"unequal",type:Boolean,reflect:!0},d:{attribute:"d",type:Number,reflect:!0},c:{attribute:"c",type:Number,reflect:!0},s:{attribute:"s",type:Number,reflect:!0},far:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.unequal=!1,this.d=SDTMath.d.DEFAULT,this.c=SDTMath.c.DEFAULT,this.s=SDTMath.s.DEFAULT,this.alignState()}alignState(){this.far=SDTMath.dC2Far(this.d,this.c,this.s)}sendEvent(){this.dispatchEvent(new CustomEvent("sdt-equation-dc2far-change",{detail:{d:this.d,c:this.c,s:this.s,far:this.far},bubbles:!0}))}dInput(t){this.d=parseFloat(t.target.value),this.alignState(),this.sendEvent()}cInput(t){this.c=parseFloat(t.target.value),this.alignState(),this.sendEvent()}sInput(t){this.s=parseFloat(t.target.value),this.alignState(),this.sendEvent()}willUpdate(){this.alignState()}render(){let t,s,e,B,i;return this.numeric?(t=x$3`
        <decidables-spinner class="d bottom" 
          ?disabled=${!this.interactive}
          step=${SDTMath.d.STEP}
          .value=${this.d}
          @input=${this.dInput.bind(this)}
        >
          <var class="math-var">dâ²</var>
        </decidables-spinner>
      `,s=x$3`
        <decidables-spinner class="c bottom"
          ?disabled=${!this.interactive}
          step=${SDTMath.c.DEFAULT}
          .value=${this.c}
          @input=${this.cInput.bind(this)}
        >
          <var class="math-var">c</var>
        </decidables-spinner>
      `,e=x$3`
        <decidables-spinner class="s bottom"
          ?disabled=${!this.interactive}
          min=${SDTMath.s.MIN}
          step=${SDTMath.s.STEP}
          .value=${this.s}
          @input=${this.sInput.bind(this)}
        >
          <var class="math-var">Ï</var>
        </decidables-spinner>
      `,B=x$3`
        <decidables-spinner class="far bottom"
          disabled min="0"
          max="1"
          step=".001"
          .value=${+this.far.toFixed(3)}
        >
          <var>False Alarm Rate</var>
        </decidables-spinner>
      `):(t=x$3`<var class="math-var d">dâ²</var>`,s=x$3`<var class="math-var c">c</var>`,e=x$3`<var class="math-var s">Ï</var>`,B=x$3`<var class="far">False Alarm Rate</var>`),i=this.unequal?x$3`
        <tr>
          <td rowspan="2">
            ${B}<span class="equals">=</span><var class="math-greek phi tight">Î¦</var><span class="paren tight">(</span><span class="bracket tight">[</span>
          </td>
          <td class="underline bottom">
            <span>1</span><span class="plus tight">+</span><span>${e}<sup class="exp">2</sup></span>
          </td>
          <td rowspan="2">
            <span class="bracket tight">]<sup class="exp">Â½</sup></span><span class="bracket tight">[</span>
          </td>
          <td class="underline">
            <span class="minus tight">â</span>${t}
          </td>
          <td rowspan="2">
            <span class="minus">â</span>${s}<span class="bracket tight">]</span><span class="paren tight">)</span>
          </td>
        </tr>
        <tr>
          <td>
            <span>2</span>
          </td>
          <td>
            <span><span>1</span><span class="plus">+</span>${e}</span>
          </td>
        </tr>`:x$3`
        <tr>
          <td rowspan="2">
            ${B}<span class="equals">=</span><var class="math-greek phi tight">Î¦</var><span class="paren tight">(</span><span class="minus tight">â</span>
          </td>
          <td class="underline">
            ${t}
          </td>
          <td rowspan="2">
            <span class="minus">â</span>${s}<span class="paren tight">)</span>
          </td>
        </tr>
        <tr>
          <td>
            <span>2</span>
          </td>
        </tr>`,x$3`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${i}
          </tbody>
        </table>
      </div>`}}customElements.define("sdt-equation-dc2far",SDTEquationDC2Far);class SDTEquationDC2Hr extends SDTEquation{static get properties(){return{unequal:{attribute:"unequal",type:Boolean,reflect:!0},d:{attribute:"d",type:Number,reflect:!0},c:{attribute:"c",type:Number,reflect:!0},s:{attribute:"s",type:Number,reflect:!0},hr:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.unequal=!1,this.d=SDTMath.d.DEFAULT,this.c=SDTMath.c.DEFAULT,this.s=SDTMath.s.DEFAULT,this.alignState()}alignState(){this.hr=SDTMath.dC2Hr(this.d,this.c,this.s)}sendEvent(){this.dispatchEvent(new CustomEvent("sdt-equation-dc2hr-change",{detail:{d:this.d,c:this.c,s:this.s,hr:this.hr},bubbles:!0}))}dInput(t){this.d=parseFloat(t.target.value),this.alignState(),this.sendEvent()}cInput(t){this.c=parseFloat(t.target.value),this.alignState(),this.sendEvent()}sInput(t){this.s=parseFloat(t.target.value),this.alignState(),this.sendEvent()}willUpdate(){this.alignState()}render(){let t,s,e,B,i;return this.numeric?(t=x$3`
        <decidables-spinner class="d bottom"
          ?disabled=${!this.interactive}
          step=${SDTMath.d.STEP}
          .value=${this.d}
          @input=${this.dInput.bind(this)}
        >
          <var class="math-var">dâ²</var>
        </decidables-spinner>
      `,s=x$3`
        <decidables-spinner class="c bottom"
          ?disabled=${!this.interactive}
          step=${SDTMath.c.STEP}
          .value=${this.c}
          @input=${this.cInput.bind(this)}
        >
          <var class="math-var">c</var>
        </decidables-spinner>
      `,e=x$3`
        <decidables-spinner class="s bottom"
          ?disabled=${!this.interactive}
          min=${SDTMath.s.MIN}
          step=${SDTMath.s.STEP}
          .value=${this.s}
          @input=${this.sInput.bind(this)}
        >
          <var class="math-var">Ï</var>
        </decidables-spinner>
      `,B=x$3`
        <decidables-spinner class="hr bottom"
          disabled
          min="0"
          max="1"
          step=".001"
          .value=${+this.hr.toFixed(3)}
        >
          <var>Hit Rate</var>
        </decidables-spinner>
      `):(t=x$3`<var class="math-var d">dâ²</var>`,s=x$3`<var class="math-var c">c</var>`,e=x$3`<var class="math-var s">Ï</var>`,B=x$3`<var class="hr">Hit Rate</var>`),i=this.unequal?x$3`
        <tr>
          <td rowspan="2">
            ${B}<span class="equals">=</span><var class="math-greek phi tight">Î¦</var><span class="paren tight">(</span><span class="bracket tight">[</span>
          </td>
          <td class="underline bottom">
            <span>1</span><span class="plus tight">+</span><span>${e}<sup class="exp">2</sup></span>
          </td>
          <td rowspan="2">
            <span class="bracket tight">]<sup class="exp">Â½</sup></span><span class="bracket tight">[</span>
          </td>
          <td class="underline">
            ${t}
          </td>
          <td rowspan="2">
            <span class="minus">â</span>
          </td>
          <td class="underline">
            ${s}
          </td>
          <td rowspan="2">
            <span class="bracket tight">]</span><span class="paren tight">)</span>
          </td>
        </tr>
        <tr>
          <td>
            <span>2</span>
          </td>
          <td>
            <span><span>1</span><span class="plus">+</span>${e}</span>
          </td>
          <td>
            ${e}
          </td>
        </tr>`:x$3`
        <tr>
          <td rowspan="2">
            ${B}<span class="equals">=</span><var class="math-greek phi tight">Î¦</var><span class="paren tight">(</span>
          </td>
          <td class="underline">
            ${t}
          </td>
          <td rowspan="2">
            <span class="minus">â</span>${s}<span class="paren tight">)</span>
          </td>
        </tr>
        <tr>
          <td>
            <span>2</span>
          </td>
        </tr>`,x$3`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${i}
          </tbody>
        </table>
      </div>`}}customElements.define("sdt-equation-dc2hr",SDTEquationDC2Hr);class SDTEquationFaCr2Far extends SDTEquation{static get properties(){return{fa:{attribute:"false-alarms",type:Number,reflect:!0},cr:{attribute:"correct-rejections",type:Number,reflect:!0},far:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.fa=0,this.cr=0,this.alignState()}alignState(){this.far=SDTMath.faCr2Far(this.fa,this.cr)}sendEvent(){this.dispatchEvent(new CustomEvent("sdt-equation-facr2far-change",{detail:{fa:this.fa,cr:this.cr,far:this.far},bubbles:!0}))}faInput(t){this.fa=parseInt(t.target.value,10),this.alignState(),this.sendEvent()}crInput(t){this.cr=parseInt(t.target.value,10),this.alignState(),this.sendEvent()}willUpdate(){this.alignState()}render(){let t,s,e;return this.numeric?(t=x$3`
        <decidables-spinner class="fa"
          ?disabled=${!this.interactive}
          min="0"
          .value=${this.fa}
          @input=${this.faInput.bind(this)}
        >
          <var>False Alarms</var>
        </decidables-spinner>
      `,s=x$3`
        <decidables-spinner class="cr"
          ?disabled=${!this.interactive}
          min="0"
          .value=${this.cr}
          @input=${this.crInput.bind(this)}
        >
          <var>Correct Rejections</var>
        </decidables-spinner>
      `,e=x$3`
        <decidables-spinner class="far"
          disabled
          min="0"
          max="1"
          step=".001"
          .value=${+this.far.toFixed(3)}
        >
          <var>False Alarm Rate</var>
        </decidables-spinner>
      `):(t=x$3`<var class="fa">False Alarms</var>`,s=x$3`<var class="cr">Correct Rejections</var>`,e=x$3`<var class="far">False Alarm Rate</var>`),x$3`
      <div class="holder">
        <table class="equation">
          <tbody>
            <tr>
              <td rowspan="2">
                ${e}<span class="equals">=</span>
              </td>
              <td class="underline">
                ${t}
              </td>
            </tr>
            <tr>
              <td>
                ${t}<span class="plus">+</span>${s}
              </td>
            </tr>
          </tbody>
        </table>
      </div>`}}customElements.define("sdt-equation-facr2far",SDTEquationFaCr2Far);class SDTEquationHFa2Ppv extends SDTEquation{static get properties(){return{h:{attribute:"hits",type:Number,reflect:!0},fa:{attribute:"false-alarms",type:Number,reflect:!0},ppv:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.h=0,this.fa=0,this.alignState()}alignState(){this.ppv=SDTMath.hFa2Ppv(this.h,this.fa)}sendEvent(){this.dispatchEvent(new CustomEvent("sdt-equation-hfa2ppv-change",{detail:{h:this.h,fa:this.fa,ppv:this.ppv},bubbles:!0}))}hInput(t){this.h=parseInt(t.target.value,10),this.alignState(),this.sendEvent()}faInput(t){this.fa=parseInt(t.target.value,10),this.alignState(),this.sendEvent()}willUpdate(){this.alignState()}render(){let t,s,e;return this.numeric?(t=x$3`
        <decidables-spinner class="h"
          ?disabled=${!this.interactive}
          min="0"
          .value=${this.h}
          @input=${this.hInput.bind(this)}
        >
          <var>Hits</var>
        </decidables-spinner>
      `,s=x$3`
        <decidables-spinner class="fa"
          ?disabled=${!this.interactive}
          min="0"
          .value=${this.fa}
          @input=${this.faInput.bind(this)}
        >
          <var>False Alarms</var>
        </decidables-spinner>
      `,e=x$3`
        <decidables-spinner class="ppv"
          disabled
          min="0"
          max="1"
          step=".001"
          .value=${+this.ppv.toFixed(3)}
        >
          <var>Positive Predictive Value</var>
        </decidables-spinner>
      `):(t=x$3`<var class="h">Hits</var>`,s=x$3`<var class="fa">False Alarms</var>`,e=x$3`<var class="ppv">Positive Predictive Value</var>`),x$3`
      <div class="holder">
        <table class="equation">
          <tbody>
            <tr>
              <td rowspan="2">
                ${e}<span class="equals">=</span>
              </td>
              <td class="underline">
                ${t}
              </td>
            </tr>
            <tr>
              <td>
                ${t}<span class="plus">+</span>${s}
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    `}}customElements.define("sdt-equation-hfa2ppv",SDTEquationHFa2Ppv);class SDTEquationHM2Hr extends SDTEquation{static get properties(){return{h:{attribute:"hits",type:Number,reflect:!0},m:{attribute:"misses",type:Number,reflect:!0},hr:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.h=0,this.m=0,this.alignState()}alignState(){this.hr=SDTMath.hM2Hr(this.h,this.m)}sendEvent(){this.dispatchEvent(new CustomEvent("sdt-equation-hm2hr-change",{detail:{h:this.h,m:this.m,hr:this.hr},bubbles:!0}))}hInput(t){this.h=parseInt(t.target.value,10),this.alignState(),this.sendEvent()}mInput(t){this.m=parseInt(t.target.value,10),this.alignState(),this.sendEvent()}willUpdate(){this.alignState()}render(){let t,s,e;return this.numeric?(t=x$3`
        <decidables-spinner class="h"
          ?disabled=${!this.interactive}
          min="0"
          .value=${this.h}
          @input=${this.hInput.bind(this)}
        >
          <var>Hits</var>
        </decidables-spinner>
      `,s=x$3`
        <decidables-spinner class="m"
          ?disabled=${!this.interactive}
          min="0"
          .value=${this.m}
          @input=${this.mInput.bind(this)}
        >
          <var>Misses</var>
        </decidables-spinner>
      `,e=x$3`
        <decidables-spinner class="hr"
          disabled
          min="0"
          max="1"
          step=".001"
          .value=${+this.hr.toFixed(3)}
        >
          <var>Hit Rate</var>
        </decidables-spinner>
      `):(t=x$3`<var class="h">Hits</var>`,s=x$3`<var class="m">Misses</var>`,e=x$3`<var class="hr">Hit Rate</var>`),x$3`
      <div class="holder">
        <table class="equation">
          <tbody>
            <tr>
              <td rowspan="2">
                ${e}<span class="equals">=</span>
              </td>
              <td class="underline">
                ${t}
              </td>
            </tr>
            <tr>
              <td>
                ${t}<span class="plus">+</span>${s}
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    `}}customElements.define("sdt-equation-hm2hr",SDTEquationHM2Hr);class SDTEquationHMFaCr2Acc extends SDTEquation{static get properties(){return{h:{attribute:"hits",type:Number,reflect:!0},m:{attribute:"misses",type:Number,reflect:!0},fa:{attribute:"false-alarms",type:Number,reflect:!0},cr:{attribute:"correct-rejections",type:Number,reflect:!0},acc:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.h=0,this.m=0,this.fa=0,this.cr=0,this.alignState()}alignState(){this.acc=SDTMath.hMFaCr2Acc(this.h,this.m,this.fa,this.cr)}sendEvent(){this.dispatchEvent(new CustomEvent("sdt-equation-hmfacr2acc-change",{detail:{h:this.h,m:this.m,fa:this.fa,cr:this.cr,acc:this.acc},bubbles:!0}))}hInput(t){this.h=parseInt(t.target.value,10),this.alignState(),this.sendEvent()}mInput(t){this.m=parseInt(t.target.value,10),this.alignState(),this.sendEvent()}faInput(t){this.fa=parseInt(t.target.value,10),this.alignState(),this.sendEvent()}crInput(t){this.cr=parseInt(t.target.value,10),this.alignState(),this.sendEvent()}willUpdate(){this.alignState()}render(){let t,s,e,B,i;return this.numeric?(t=x$3`
        <decidables-spinner class="h"
          ?disabled=${!this.interactive}
          min="0"
          .value=${this.h}
          @input=${this.hInput.bind(this)}
        >
          <var>Hits</var>
        </decidables-spinner>
      `,s=x$3`
        <decidables-spinner class="m"
          ?disabled=${!this.interactive}
          min="0"
          .value=${this.m}
          @input=${this.mInput.bind(this)}
        >
          <var>Misses</var>
        </decidables-spinner>
      `,e=x$3`
        <decidables-spinner class="fa"
          ?disabled=${!this.interactive}
          min="0"
          .value=${this.fa}
          @input=${this.faInput.bind(this)}
        >
          <var>False Alarms</var>
        </decidables-spinner>
      `,B=x$3`
        <decidables-spinner class="cr"
          ?disabled=${!this.interactive}
          min="0"
          .value=${this.cr}
          @input=${this.crInput.bind(this)}
        >
          <var>Correct Rejections</var>
        </decidables-spinner>
      `,i=x$3`
        <decidables-spinner class="acc"
          disabled
          min="0"
          max="1"
          step=".001"
          .value=${+this.acc.toFixed(3)}
        >
          <var>Accuracy</var>
        </decidables-spinner>
      `):(t=x$3`<var class="h">Hits</var>`,s=x$3`<var class="m">Misses</var>`,e=x$3`<var class="fa">False Alarms</var>`,B=x$3`<var class="cr">Correct Rejections</var>`,i=x$3`<var class="acc">Accuracy</var>`),x$3`
      <div class="holder">
        <table class="equation">
          <tbody>
            <tr>
              <td rowspan="2">
                ${i}<span class="equals">=</span>
              </td>
              <td class="underline">
                ${t}<span class="plus">+</span>${B}
              </td>
            </tr>
            <tr>
              <td>
                ${t}<span class="plus">+</span>${B}<span class="plus">+</span>${s}<span class="plus">+</span>${e}
              </td>
            </tr>
          </tbody>
        </table>
      </div>`}}customElements.define("sdt-equation-hmfacr2acc",SDTEquationHMFaCr2Acc);class SDTEquationHrFar2C extends SDTEquation{static get properties(){return{unequal:{attribute:"unequal",type:Boolean,reflect:!0},hr:{attribute:"hit-rate",type:Number,reflect:!0},far:{attribute:"false-alarm-rate",type:Number,reflect:!0},s:{attribute:"s",type:Number,reflect:!0},c:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.unequal=!1,this.hr=0,this.far=0,this.s=SDTMath.s.DEFAULT,this.alignState()}alignState(){this.c=SDTMath.hrFar2C(this.hr,this.far,this.s)}sendEvent(){this.dispatchEvent(new CustomEvent("sdt-equation-hrfar2c-change",{detail:{hr:this.hr,far:this.far,s:this.s,c:this.c},bubbles:!0}))}hrInput(t){this.hr=parseFloat(t.target.value),this.alignState(),this.sendEvent()}farInput(t){this.far=parseFloat(t.target.value),this.alignState(),this.sendEvent()}sInput(t){this.s=parseFloat(t.target.value),this.alignState(),this.sendEvent()}willUpdate(){this.alignState()}render(){let t,s,e,B,i;return this.numeric?(t=x$3`
        <decidables-spinner class="hr bottom"
          ?disabled=${!this.interactive}
          min="0"
          max="1"
          step=".001"
          .value=${this.hr}
          @input=${this.hrInput.bind(this)}
        >
          <var>Hit Rate</var>
        </decidables-spinner>
      `,s=x$3`
        <decidables-spinner class="far bottom"
          ?disabled=${!this.interactive}
          min="0"
          max="1"
          step=".001"
          .value=${this.far}
          @input=${this.farInput.bind(this)}
        >
          <var>False Alarm Rate</var>
        </decidables-spinner>
      `,e=x$3`
        <decidables-spinner class="s bottom"
          ?disabled=${!this.interactive}
          min=${SDTMath.s.MIN}
          step=${SDTMath.s.STEP}
          .value=${this.s}
          @input=${this.sInput.bind(this)}
        >
          <var class="math-var">Ï</var>
        </decidables-spinner>
      `,B=x$3`
        <decidables-spinner class="c bottom"
          disabled
          step=${SDTMath.c.MIN}
          .value=${+this.c.toFixed(3)}
        >
          <var class="math-var">c</var>
        </decidables-spinner>
      `):(t=x$3`<var class="hr">Hit Rate</var>`,s=x$3`<var class="far">False Alarm Rate</var>`,e=x$3`<var class="math-var s">Ï</var>`,B=x$3`<var class="math-var c">c</var>`),i=this.unequal?x$3`
        <tr>
          <td rowspan="2">
            ${B}<span class="equals">=</span><span class="bracket tight">(</span>
          </td>
          <td class="underline bottom">
            <span>1</span><span class="plus tight">+</span><span>${e}<sup class="exp">2</sup></span>
          </td>
          <td rowspan="2">
            <span class="bracket tight">)<sup class="exp">âÂ½</sup></span><span class="bracket tight">(</span>
          </td>
          <td class="underline bottom">
            <span class="minus tight">â</span>${e}
          </td>
          <td rowspan="2">
            <span class="bracket tight">)</span><span class="bracket">[</span><span class="tight"><var class="math-greek phi tight">Î¦</var><sup class="exp">â1</sup></span><span class="paren tight">(</span>${t}<span class="paren tight">)</span><span class="plus">+</span><span class="tight"><var class="math-greek phi tight">Î¦</var><sup class="exp">â1</sup></span><span class="paren tight">(</span>${s}<span class="paren tight">)</span><span class="bracket">]</span>
          </td>
        </tr>
        <tr>
          <td>
            <span>2</span>
          </td>
          <td>
            <span><span>1</span><span class="plus">+</span>${e}</span>
          </td>
        </tr>`:x$3`
        <tr>
          <td rowspan="2">
            ${B}<span class="equals">=</span>
          </td>
          <td class="underline">
            <span class="minus tight">â</span><span class="bracket tight">[</span><span class="tight"><var class="math-greek phi tight">Î¦</var><sup class="exp">â1</sup></span><span class="paren tight">(</span>${t}<span class="paren tight">)</span><span class="plus">+</span><span class="tight"><var class="math-greek phi tight">Î¦</var><sup class="exp">â1</sup></span><span class="paren tight">(</span>${s}<span class="paren tight">)</span><span class="bracket tight">]</span>
          </td>
        </tr>
        <tr>
          <td>
            <span>2</span>
          </td>
        </tr>`,x$3`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${i}
          </tbody>
        </table>
      </div>`}}customElements.define("sdt-equation-hrfar2c",SDTEquationHrFar2C);class SDTEquationHrFar2D extends SDTEquation{static get properties(){return{unequal:{attribute:"unequal",type:Boolean,reflect:!0},hr:{attribute:"hit-rate",type:Number,reflect:!0},far:{attribute:"false-alarm-rate",type:Number,reflect:!0},s:{attribute:"s",type:Number,reflect:!0},d:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.unequal=!1,this.hr=0,this.far=0,this.s=SDTMath.s.DEFAULT,this.alignState()}alignState(){this.d=SDTMath.hrFar2D(this.hr,this.far,this.s)}sendEvent(){this.dispatchEvent(new CustomEvent("sdt-equation-hrfar2d-change",{detail:{hr:this.hr,far:this.far,s:this.s,d:this.d},bubbles:!0}))}hrInput(t){this.hr=parseFloat(t.target.value),this.alignState(),this.sendEvent()}farInput(t){this.far=parseFloat(t.target.value),this.alignState(),this.sendEvent()}sInput(t){this.s=parseFloat(t.target.value),this.alignState(),this.sendEvent()}willUpdate(){this.alignState()}render(){let t,s,e,B,i;return this.numeric?(t=x$3`
        <decidables-spinner class="hr bottom"
          ?disabled=${!this.interactive}
          min="0"
          max="1"
          step=".001"
          .value=${this.hr}
          @input=${this.hrInput.bind(this)}
        >
          <var>Hit Rate</var>
        </decidables-spinner>
      `,s=x$3`
        <decidables-spinner class="far bottom"
          ?disabled=${!this.interactive}
          min="0"
          max="1"
          step=".001"
          .value=${this.far}
          @input=${this.farInput.bind(this)}
        >
          <var>False Alarm Rate</var>
        </decidables-spinner>
      `,e=x$3`
        <decidables-spinner class="s bottom"
          ?disabled=${!this.interactive}
          min="0"
          step=".001"
          .value=${this.s}
          @input=${this.sInput.bind(this)}
        >
          <var class="math-var">Ï</var>
        </decidables-spinner>
      `,B=x$3`
        <decidables-spinner class="d bottom"
          disabled
          step=${SDTMath.d.STEP}
          .value=${+this.d.toFixed(3)}
        >
          <var class="math-var">dâ²</var>
        </decidables-spinner>
      `):(t=x$3`<var class="hr">Hit Rate</var>`,s=x$3`<var class="far">False Alarm Rate</var>`,e=x$3`<var class="math-var s">Ï</var>`,B=x$3`<var class="math-var d">dâ²</var>`),i=this.unequal?x$3`
        <tr>
          <td rowspan="2">
            ${B}<span class="equals">=</span><span class="bracket tight">(</span>
          </td>
          <td class="underline bottom">
            <span>1</span><span class="plus tight">+</span><span>${e}<sup class="exp">2</sup></span>
          </td>
          <td rowspan="2">
            <span class="bracket tight">)<sup class="exp">âÂ½</sup></span><span class="bracket">[</span>${e}<span class="tight"><var class="math-greek phi tight">Î¦</var><sup class="exp">â1</sup></span><span class="paren tight">(</span>${t}<span class="paren tight">)</span><span class="minus">â</span><span class="tight"><var class="math-greek phi tight">Î¦</var><sup class="exp">â1</sup></span><span class="paren tight">(</span>${s}<span class="paren tight">)</span><span class="bracket">]</span>
          </td>
        </tr>
        <tr>
          <td>
            <span>2</span>
          </td>
        </tr>`:x$3`
        <tr>
          <td>
              ${B}<span class="equals">=</span><span class="tight"><var class="math-greek phi tight">Î¦</var><sup class="exp">â1</sup></span><span class="paren tight">(</span>${t}<span class="paren tight">)</span><span class="minus">â</span><span class="tight"><var class="math-greek phi tight">Î¦</var><sup class="exp">â1</sup></span><span class="paren tight">(</span>${s}<span class="paren tight">)</span>
          </td>
        </tr>`,x$3`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${i}
          </tbody>
        </table>
      </div>`}}customElements.define("sdt-equation-hrfar2d",SDTEquationHrFar2D);class SDTEquationMCr2Fomr extends SDTEquation{static get properties(){return{m:{attribute:"misses",type:Number,reflect:!0},cr:{attribute:"correct-rejections",type:Number,reflect:!0},fomr:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.m=0,this.cr=0,this.alignState()}alignState(){this.fomr=SDTMath.mCr2Fomr(this.m,this.cr)}sendEvent(){this.dispatchEvent(new CustomEvent("sdt-equation-mcr2fomr-change",{detail:{m:this.m,cr:this.cr,fomr:this.fomr},bubbles:!0}))}mInput(t){this.m=parseInt(t.target.value,10),this.alignState(),this.sendEvent()}crInput(t){this.cr=parseInt(t.target.value,10),this.alignState(),this.sendEvent()}willUpdate(){this.alignState()}render(){let t,s,e;return this.numeric?(t=x$3`
        <decidables-spinner class="m"
          ?disabled=${!this.interactive}
          min="0"
          .value=${this.m}
          @input=${this.mInput.bind(this)}
        >
          <var>Misses</var>
        </decidables-spinner>
      `,s=x$3`
        <decidables-spinner class="cr"
          ?disabled=${!this.interactive}
          min="0"
          .value=${this.cr}
          @input=${this.crInput.bind(this)}
        >
          <var>Correct Rejections</var>
        </decidables-spinner>
      `,e=x$3`
        <decidables-spinner class="fomr"
          disabled
          min="0"
          max="1"
          step=".001"
          .value=${+this.fomr.toFixed(3)}
        >
          <var>False Omission Rate</var>
        </decidables-spinner>
      `):(t=x$3`<var class="m">Misses</var>`,s=x$3`<var class="cr">Correct Rejections</var>`,e=x$3`<var class="fomr">False Omission Rate</var>`),x$3`
      <div class="holder">
        <table class="equation">
          <tbody>
            <tr>
              <td rowspan="2">
                ${e}<span class="equals">=</span>
              </td>
              <td class="underline">
                ${t}
              </td>
            </tr>
            <tr>
              <td>
                ${t}<span class="plus">+</span>${s}
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    `}}customElements.define("sdt-equation-mcr2fomr",SDTEquationMCr2Fomr);class SDTExample extends DetectableElement{static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;

          margin-bottom: 1rem;
        }

        .holder {
          display: flex;
        }

        .body {
          display: flex;

          flex-wrap: wrap;

          align-items: center;
          justify-content: left;

          padding: 0.625rem;

          border: var(---border);
          border-radius: var(---border-radius);
        }

        .body ::slotted(*) {
          margin: 0.625rem;
        }

        /* HACK: Sibling selectors not working with ::slotted */
        /* .body > rdk-task + detectable-response,
        ::slotted(rdk-task) + ::slotted(detectable-response) { */
        .body ::slotted(detectable-response) {
          margin-left: 0;
        }

        /* HACK: Sibling selectors not working with ::slotted */
        /* .body > detectable-control + rdk-task,
        ::slotted(detectable-control) + ::slotted(rdk-task) {
          margin-left: 0;
        } */
        .body ::slotted(rdk-task) {
          margin-left: 0;
        }
      `]}render(){return x$3`
      <div class="holder">
        <div class="body">
          <slot>Empty!</slot>
        </div>
      </div>`}}customElements.define("sdt-example",SDTExample);class SDTExampleDoubleInteractive extends SDTExample{connectedCallback(){super.connectedCallback(),this.one={},this.one.h=95,this.one.m=5,this.one.fa=35,this.one.cr=65,this.one.hr=SDTMath.hM2Hr(this.one.h,this.one.m),this.one.far=SDTMath.faCr2Far(this.one.fa,this.one.cr),this.one.d=SDTMath.hrFar2D(this.one.hr,this.one.far),this.one.c=SDTMath.hrFar2C(this.one.hr,this.one.far),this.two={},this.two.h=40,this.two.m=60,this.two.fa=20,this.two.cr=80,this.two.hr=SDTMath.hM2Hr(this.two.h,this.two.m),this.two.far=SDTMath.faCr2Far(this.two.fa,this.two.cr),this.two.d=SDTMath.hrFar2D(this.two.hr,this.two.far),this.two.c=SDTMath.hrFar2C(this.two.hr,this.two.far),this.detectableTableOne=this.querySelector("detectable-table:nth-of-type(1)"),this.detectableTableTwo=this.querySelector("detectable-table:nth-of-type(2)"),this.rocSpace=this.querySelector("roc-space"),this.sdtModelOne=this.querySelector("sdt-model:nth-of-type(1)"),this.sdtModelTwo=this.querySelector("sdt-model:nth-of-type(2)"),this.detectableTableOne&&(this.detectableTableOne.h=this.one.h,this.detectableTableOne.m=this.one.m,this.detectableTableOne.fa=this.one.fa,this.detectableTableOne.cr=this.one.cr,this.detectableTableOne.addEventListener("detectable-table-change",t=>{this.rocSpace&&this.rocSpace.set(t.detail.hr,t.detail.far,"default","â"),this.sdtModelOne&&(this.sdtModelOne.d=SDTMath.hrFar2D(t.detail.hr,t.detail.far),this.sdtModelOne.c=SDTMath.hrFar2C(t.detail.hr,t.detail.far))})),this.detectableTableTwo&&(this.detectableTableTwo.h=this.two.h,this.detectableTableTwo.m=this.two.m,this.detectableTableTwo.fa=this.two.fa,this.detectableTableTwo.cr=this.two.cr,this.detectableTableTwo.addEventListener("detectable-table-change",t=>{this.rocSpace&&this.rocSpace.set(t.detail.hr,t.detail.far,"two","â"),this.sdtModelTwo&&(this.sdtModelTwo.d=SDTMath.hrFar2D(t.detail.hr,t.detail.far),this.sdtModelTwo.c=SDTMath.hrFar2C(t.detail.hr,t.detail.far))})),this.rocSpace&&(this.rocSpace.set(this.one.hr,this.one.far,"default","â"),this.rocSpace.set(this.two.hr,this.two.far,"two","â"),this.rocSpace.addEventListener("roc-point-change",t=>{if("default"===t.detail.name&&this.sdtModelOne?(this.sdtModelOne.d=t.detail.d,this.sdtModelOne.c=t.detail.c):"two"===t.detail.name&&this.sdtModelTwo&&(this.sdtModelTwo.d=t.detail.d,this.sdtModelTwo.c=t.detail.c),"default"===t.detail.name&&this.detectableTableOne){const s=Math.round((this.detectableTableOne.h+this.detectableTableOne.m)*t.detail.hr),e=this.detectableTableOne.h+this.detectableTableOne.m-s,B=Math.round((this.detectableTableOne.fa+this.detectableTableOne.cr)*t.detail.far),i=this.detectableTableOne.fa+this.detectableTableOne.cr-B;this.detectableTableOne.h=s,this.detectableTableOne.m=e,this.detectableTableOne.fa=B,this.detectableTableOne.cr=i}else if("two"===t.detail.name&&this.detectableTableTwo){const s=Math.round((this.detectableTableTwo.h+this.detectableTableTwo.m)*t.detail.hr),e=this.detectableTableTwo.h+this.detectableTableTwo.m-s,B=Math.round((this.detectableTableTwo.fa+this.detectableTableTwo.cr)*t.detail.far),i=this.detectableTableTwo.fa+this.detectableTableTwo.cr-B;this.detectableTableTwo.h=s,this.detectableTableTwo.m=e,this.detectableTableTwo.fa=B,this.detectableTableTwo.cr=i}})),this.sdtModelOne&&(this.sdtModelOne.d=this.one.d,this.sdtModelOne.c=this.one.c,this.sdtModelOne.addEventListener("sdt-model-change",t=>{if(this.rocSpace&&this.rocSpace.setWithSDT(t.detail.d,t.detail.c,"default","â"),this.detectableTableOne){const s=Math.round((this.detectableTableOne.h+this.detectableTableOne.m)*t.detail.hr),e=this.detectableTableOne.h+this.detectableTableOne.m-s,B=Math.round((this.detectableTableOne.fa+this.detectableTableOne.cr)*t.detail.far),i=this.detectableTableOne.fa+this.detectableTableOne.cr-B;this.detectableTableOne.h=s,this.detectableTableOne.m=e,this.detectableTableOne.fa=B,this.detectableTableOne.cr=i}})),this.sdtModelTwo&&(this.sdtModelTwo.d=this.two.d,this.sdtModelTwo.c=this.two.c,this.sdtModelTwo.addEventListener("sdt-model-change",t=>{if(this.rocSpace&&this.rocSpace.setWithSDT(t.detail.d,t.detail.c,"two","â"),this.detectableTableTwo){const s=Math.round((this.detectableTableTwo.h+this.detectableTableTwo.m)*t.detail.hr),e=this.detectableTableTwo.h+this.detectableTableTwo.m-s,B=Math.round((this.detectableTableTwo.fa+this.detectableTableTwo.cr)*t.detail.far),i=this.detectableTableTwo.fa+this.detectableTableTwo.cr-B;this.detectableTableTwo.h=s,this.detectableTableTwo.m=e,this.detectableTableTwo.fa=B,this.detectableTableTwo.cr=i}}))}}customElements.define("sdt-example-double-interactive",SDTExampleDoubleInteractive);class SDTExampleHuman extends SDTExample{static get properties(){return{trials:{attribute:"trials",type:Number,reflect:!0},duration:{attribute:"duration",type:Number,reflect:!0},coherence:{attribute:"coherence",type:Number,reflect:!0},payoff:{attribute:"payoff",type:Number,reflect:!0},h:{attribute:!1,type:Number,reflect:!1},m:{attribute:!1,type:Number,reflect:!1},fa:{attribute:!1,type:Number,reflect:!1},cr:{attribute:!1,type:Number,reflect:!1},hr:{attribute:!1,type:Number,reflect:!1},far:{attribute:!1,type:Number,reflect:!1},d:{attribute:!1,type:Number,reflect:!1},c:{attribute:!1,type:Number,reflect:!1},s:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.trials=10,this.duration=2e3,this.coherence=.5,this.payoff=0,this.h=0,this.m=0,this.fa=0,this.cr=0,this.hr=.5,this.far=.5,this.d=0,this.c=0,this.s=SDTMath.s.DEFAULT,this.count=0,this.detectableControl=null,this.detectableResponse=null,this.detectableTable=null,this.rdkTask=null,this.rocSpace=null,this.sdtModel=null,this.sdtParameters=null}connectedCallback(){super.connectedCallback(),this.count=1,this.detectableControl=this.querySelector("detectable-control"),this.detectableResponse=this.querySelector("detectable-response"),this.detectableTable=this.querySelector("detectable-table"),this.rdkTask=this.querySelector("rdk-task"),this.rocSpace=this.querySelector("roc-space"),this.sdtModel=this.querySelector("sdt-model"),this.sdtParameters=this.querySelector("sdt-parameters"),this.rocSpace&&this.rocSpace.hasAttribute("history")&&this.rocSpace.set(.5,.5,"default",this.count),this.detectableControl&&(this.detectableControl.addEventListener("detectable-control-trials",t=>{this.trials=t.detail.trials}),this.detectableControl.addEventListener("detectable-control-duration",t=>{this.duration=t.detail.duration}),this.detectableControl.addEventListener("detectable-control-coherence",t=>{this.coherence=t.detail.coherence}),this.detectableControl.addEventListener("detectable-control-payoff",t=>{this.payoff=t.detail.payoff}),this.detectableControl.addEventListener("detectable-control-run",()=>{this.rdkTask&&(this.rdkTask.running=!0)}),this.detectableControl.addEventListener("detectable-control-pause",()=>{this.rdkTask&&(this.rdkTask.running=!1)}),this.detectableControl.addEventListener("detectable-control-reset",()=>{this.rdkTask&&this.rdkTask.reset(),this.detectableResponse&&this.detectableResponse.reset(),this.h=0,this.m=0,this.fa=0,this.cr=0,this.hr=.5,this.far=.5,this.d=0,this.c=0,this.rocSpace&&this.rocSpace.hasAttribute("history")&&(this.count+=1,this.rocSpace.set(.5,.5,`point${this.count}`,this.count))})),this.rdkTask&&(this.rdkTask.addEventListener("rdk-trial-start",t=>{this.detectableResponse&&this.detectableResponse.start(t.detail.signal,t.detail.trial)}),this.rdkTask.addEventListener("rdk-trial-end",()=>{this.detectableResponse&&this.detectableResponse.stop()}),this.rdkTask.addEventListener("rdk-block-end",()=>{this.detectableControl&&this.detectableControl.complete()})),this.detectableResponse&&this.detectableResponse.addEventListener("detectable-response",t=>{this.h=t.detail.h,this.m=t.detail.m,this.fa=t.detail.fa,this.cr=t.detail.cr,this.hr=SDTMath.hM2Hr(this.h+1,this.m+1),this.far=SDTMath.faCr2Far(this.fa+1,this.cr+1),this.d=SDTMath.hrFar2D(this.hr,this.far),this.c=SDTMath.hrFar2C(this.hr,this.far),this.rocSpace&&this.rocSpace.hasAttribute("history")&&this.rocSpace.set(this.hr,this.far,1===this.count?"default":`point${this.count}`,this.count)}),this.sdtParameters&&(this.sdtParameters.addEventListener("sdt-parameters-d",t=>{this.d=t.detail.d}),this.sdtParameters.addEventListener("sdt-parameters-c",t=>{this.c=t.detail.c}),this.sdtParameters.addEventListener("sdt-parameters-s",t=>{this.s=t.detail.s}))}update(t){super.update(t),this.detectableControl&&(this.detectableControl.trials=null!=this.detectableControl.trials?this.trials:void 0,this.detectableControl.duration=null!=this.detectableControl.duration?this.duration:void 0,this.detectableControl.coherence=null!=this.detectableControl.coherence?this.coherence:void 0,this.detectableControl.payoff=null!=this.detectableControl.payoff?this.payoff:void 0),this.detectableResponse&&(this.detectableResponse.trialTotal=this.trials,this.detectableResponse.hPayoff=this.payoff,this.detectableResponse.mPayoff=0-this.payoff,this.detectableResponse.faPayoff=0-(100-this.payoff),this.detectableResponse.crPayoff=100-this.payoff),this.detectableTable&&(this.detectableTable.h=this.h,this.detectableTable.m=this.m,this.detectableTable.cr=this.cr,this.detectableTable.fa=this.fa,this.detectableTable.hPayoff=this.payoff,this.detectableTable.mPayoff=0-this.payoff,this.detectableTable.faPayoff=0-(100-this.payoff),this.detectableTable.crPayoff=100-this.payoff),this.rdkTask&&(this.rdkTask.trials=this.trials,this.rdkTask.duration=this.duration,this.rdkTask.wait=this.duration===1/0?0:this.duration,this.rdkTask.iti=this.duration===1/0?0:this.duration,this.rdkTask.coherence=this.coherence),this.rocSpace&&!this.rocSpace.hasAttribute("history")&&(this.rocSpace.hr=this.hr,this.rocSpace.far=this.far),this.sdtModel&&(this.sdtModel.d=this.d,this.sdtModel.c=this.c,this.sdtModel.s=this.s),this.sdtParameters&&(this.sdtParameters.d=null!=this.sdtParameters.d?this.d:void 0,this.sdtParameters.c=null!=this.sdtParameters.c?this.c:void 0,this.sdtParameters.s=null!=this.sdtParameters.s?this.s:void 0)}}customElements.define("sdt-example-human",SDTExampleHuman);class SDTExampleInteractive extends SDTExample{static get properties(){return{color:{attribute:"color",type:String,reflect:!0},zRoc:{attribute:"z-roc",type:Boolean,reflect:!0},h:{attribute:"hits",type:Number,reflect:!0},m:{attribute:"misses",type:Number,reflect:!0},fa:{attribute:"false-alarms",type:Number,reflect:!0},cr:{attribute:"correct-rejections",type:Number,reflect:!0},hr:{attribute:"hr",type:Number,reflect:!0},far:{attribute:"far",type:Number,reflect:!0},d:{attribute:"d",type:Number,reflect:!0},c:{attribute:"c",type:Number,reflect:!0},s:{attribute:"s",type:Number,reflect:!0}}}constructor(){super(),this.color="all",this.zRoc=!1,this.h=void 0,this.m=void 0,this.fa=void 0,this.cr=void 0,this.hr=void 0,this.far=void 0,this.d=SDTMath.d.DEFAULT,this.c=SDTMath.c.DEFAULT,this.s=SDTMath.s.DEFAULT,this.detectableControl=null,this.detectableTable=null,this.rocSpace=null,this.sdtModel=null,this.sdtParameters=null,this.rocSpaces=[]}connectedCallback(){if(super.connectedCallback(),this.detectableControl=this.querySelector("detectable-control"),this.detectableTable=this.querySelector("detectable-table"),this.rocSpace=this.querySelector("roc-space"),this.sdtModel=this.querySelector("sdt-model"),this.sdtParameters=this.querySelector("sdt-parameters"),this.rocSpaces=this.querySelectorAll("roc-space"),void 0!==this.h&&void 0!==this.m&&void 0!==this.fa&&void 0!==this.cr)this.hr=SDTMath.hM2Hr(this.h,this.m),this.far=SDTMath.faCr2Far(this.fa,this.cr),this.d=SDTMath.hrFar2D(this.hr,this.far,this.s),this.c=SDTMath.hrFar2C(this.hr,this.far,this.s);else if(void 0!==this.hr&&void 0!==this.far)this.d=SDTMath.hrFar2D(this.hr,this.far,this.s),this.c=SDTMath.hrFar2C(this.hr,this.far,this.s);else if(void 0!==this.d&&void 0!==this.c){this.hr=SDTMath.dC2Hr(this.d,this.c,this.s),this.far=SDTMath.dC2Far(this.d,this.c,this.s);const t=100;this.h=Math.round(t*this.hr),this.m=t-this.h,this.fa=Math.round(t*this.far),this.cr=t-this.fa}this.detectableControl&&(this.detectableControl.addEventListener("detectable-control-color",t=>{this.color=t.detail.color}),this.detectableControl.addEventListener("detectable-control-z-roc",t=>{this.zRoc=t.detail.zRoc})),this.detectableTable&&this.detectableTable.addEventListener("detectable-table-change",t=>{this.h=t.detail.h,this.m=t.detail.m,this.fa=t.detail.fa,this.cr=t.detail.cr,this.far=t.detail.far,this.hr=t.detail.hr,this.d=SDTMath.hrFar2D(this.hr,this.far,this.s),this.c=SDTMath.hrFar2C(this.hr,this.far,this.s)}),this.rocSpace&&this.rocSpace.addEventListener("roc-point-change",t=>{this.d=t.detail.d,this.c=t.detail.c,this.s=t.detail.s,this.hr=t.detail.hr,this.far=t.detail.far;const s=Math.round((this.h+this.m)*this.hr),e=this.h+this.m-s,B=Math.round((this.fa+this.cr)*this.far),i=this.fa+this.cr-B;this.h=s,this.m=e,this.fa=B,this.cr=i}),this.sdtModel&&this.sdtModel.addEventListener("sdt-model-change",t=>{this.d=t.detail.d,this.c=t.detail.c,this.s=t.detail.s,this.hr=t.detail.hr,this.far=t.detail.far;const s=Math.round((this.h+this.m)*this.hr),e=this.h+this.m-s,B=Math.round((this.fa+this.cr)*this.far),i=this.fa+this.cr-B;this.h=s,this.m=e,this.fa=B,this.cr=i}),this.sdtParameters&&(this.sdtParameters.addEventListener("sdt-parameters-d",t=>{this.d=t.detail.d}),this.sdtParameters.addEventListener("sdt-parameters-c",t=>{this.c=t.detail.c}),this.sdtParameters.addEventListener("sdt-parameters-s",t=>{this.s=t.detail.s}))}update(t){super.update(t),this.detectableControl&&(this.detectableControl.color=null!=this.detectableControl.color?this.color:void 0,this.detectableControl.zRoc=null!=this.detectableControl.zRoc?this.zRoc:void 0),this.detectableTable&&(this.detectableTable.color=this.color,this.detectableTable.h=this.h,this.detectableTable.m=this.m,this.detectableTable.cr=this.cr,this.detectableTable.fa=this.fa),this.rocSpace&&(this.rocSpace.hr=this.hr,this.rocSpace.far=this.far),this.sdtModel&&(this.sdtModel.color=this.color,this.sdtModel.d=this.d,this.sdtModel.c=this.c,this.sdtModel.s=this.s),this.rocSpaces.length>0&&this.rocSpaces.forEach(t=>{t.zRoc=this.zRoc,t.setWithSDT(this.d,this.c,"default","",this.s)}),this.sdtParameters&&(this.sdtParameters.d=null!=this.sdtParameters.d?this.d:void 0,this.sdtParameters.c=null!=this.sdtParameters.c?this.c:void 0,this.sdtParameters.s=null!=this.sdtParameters.s?this.s:void 0)}}customElements.define("sdt-example-interactive",SDTExampleInteractive);class SDTExampleModel extends SDTExample{static get properties(){return{trials:{attribute:"trials",type:Number,reflect:!0},duration:{attribute:"duration",type:Number,reflect:!0},coherence:{attribute:"coherence",type:Number,reflect:!0},color:{attribute:"color",type:String,reflect:!0},d:{attribute:"d",type:Number,reflect:!0},c:{attribute:"c",type:Number,reflect:!0},s:{attribute:"s",type:Number,reflect:!0},h:{attribute:!1,type:Number,reflect:!1},m:{attribute:!1,type:Number,reflect:!1},fa:{attribute:!1,type:Number,reflect:!1},cr:{attribute:!1,type:Number,reflect:!1},hr:{attribute:!1,type:Number,reflect:!1},far:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.trials=10,this.duration=2e3,this.coherence=.5,this.color="all",this.d=SDTMath.s.DEFAULT,this.c=SDTMath.s.DEFAULT,this.s=SDTMath.s.DEFAULT,this.h=0,this.m=0,this.fa=0,this.cr=0,this.hr=.5,this.far=.5,this.detectableControl=null,this.detectableResponse=null,this.detectableTable=null,this.rdkTask=null,this.rocSpace=null,this.sdtModel=null,this.sdtParameters=null}connectedCallback(){super.connectedCallback(),this.detectableControl=this.querySelector("detectable-control"),this.detectableResponse=this.querySelector("detectable-response"),this.detectableTable=this.querySelector("detectable-table"),this.rdkTask=this.querySelector("rdk-task"),this.rocSpace=this.querySelector("roc-space"),this.sdtModel=this.querySelector("sdt-model"),this.sdtParameters=this.querySelector("sdt-parameters"),this.detectableControl&&(this.detectableControl.addEventListener("detectable-control-trials",t=>{this.trials=t.detail.trials}),this.detectableControl.addEventListener("detectable-control-coherence",t=>{this.coherence=t.detail.coherence}),this.detectableControl.addEventListener("detectable-control-duration",t=>{this.duration=t.detail.duration}),this.detectableControl.addEventListener("detectable-control-color",t=>{this.color=t.detail.color}),this.detectableControl.addEventListener("detectable-control-run",()=>{this.rdkTask&&(this.rdkTask.running=!0),this.sdtModel&&this.sdtModel.resumeTrial()}),this.detectableControl.addEventListener("detectable-control-pause",()=>{this.rdkTask&&(this.rdkTask.running=!1),this.sdtModel&&this.sdtModel.pauseTrial()}),this.detectableControl.addEventListener("detectable-control-reset",()=>{this.rdkTask&&this.rdkTask.reset(),this.detectableResponse&&this.detectableResponse.reset(),this.sdtModel&&this.sdtModel.reset(),this.h=0,this.m=0,this.fa=0,this.cr=0,this.hr=.5,this.far=.5})),this.rdkTask&&(this.rdkTask.addEventListener("rdk-trial-start",t=>{this.detectableResponse&&this.detectableResponse.start(t.detail.signal,t.detail.trial),this.sdtModel&&this.sdtModel.trial(t.detail.trial,t.detail.signal,t.detail.duration,t.detail.wait,t.detail.iti)}),this.rdkTask.addEventListener("rdk-trial-end",()=>{this.detectableResponse&&this.detectableResponse.stop()}),this.rdkTask.addEventListener("rdk-block-end",()=>{this.detectableControl&&this.detectableControl.complete()})),this.sdtModel&&(this.sdtModel.addEventListener("detectable-response",t=>{this.detectableResponse&&this.detectableResponse.responded(t.detail.response),this.h=t.detail.h,this.m=t.detail.m,this.fa=t.detail.fa,this.cr=t.detail.cr,this.hr=SDTMath.hM2Hr(this.h,this.m),this.far=SDTMath.faCr2Far(this.fa,this.cr)}),this.sdtModel.addEventListener("sdt-model-change",t=>{this.d=t.detail.d,this.c=t.detail.c,this.s=t.detail.s,this.h=t.detail.h,this.m=t.detail.m,this.fa=t.detail.fa,this.cr=t.detail.cr,this.hr=SDTMath.hM2Hr(this.h,this.m),this.far=SDTMath.faCr2Far(this.fa,this.cr)})),this.sdtParameters&&(this.sdtParameters.addEventListener("sdt-parameters-d",t=>{this.d=t.detail.d}),this.sdtParameters.addEventListener("sdt-parameters-c",t=>{this.c=t.detail.c}),this.sdtParameters.addEventListener("sdt-parameters-s",t=>{this.s=t.detail.s}))}update(t){super.update(t),this.detectableControl&&(this.detectableControl.trials=void 0!==this.detectableControl.trials?this.trials:void 0,this.detectableControl.coherence=void 0!==this.detectableControl.coherence?this.coherence:void 0,this.detectableControl.duration=void 0!==this.detectableControl.duration?this.duration:void 0,this.detectableControl.color=void 0!==this.detectableControl.color?this.color:void 0),this.detectableResponse&&(this.detectableResponse.trialTotal=this.trials),this.detectableTable&&(this.detectableTable.color=this.color,this.detectableTable.h=this.h,this.detectableTable.m=this.m,this.detectableTable.cr=this.cr,this.detectableTable.fa=this.fa),this.rdkTask&&(this.rdkTask.trials=this.trials,this.rdkTask.duration=this.duration,this.rdkTask.wait=this.duration,this.rdkTask.iti=this.duration,this.rdkTask.coherence=this.coherence),this.rocSpace&&(this.rocSpace.hr=this.hr,this.rocSpace.far=this.far),this.sdtModel&&(this.sdtModel.color=this.color,this.sdtModel.d=this.d,this.sdtModel.c=this.c,this.sdtModel.s=this.s),this.sdtParameters&&(this.sdtParameters.d=null!=this.sdtParameters.d?this.d:void 0,this.sdtParameters.c=null!=this.sdtParameters.c?this.c:void 0,this.sdtParameters.s=null!=this.sdtParameters.s?this.s:void 0)}}customElements.define("sdt-example-model",SDTExampleModel);class SDTExampleMultiple extends SDTExample{static get properties(){return{variable:{attribute:"variable",type:String,reflect:!0},values:{attribute:"values",converter:DecidablesConverterArray,reflect:!0}}}constructor(){super(),this.variables=["d","c"],this.variable="d",this.values=[0,1]}connectedCallback(){super.connectedCallback(),this.detectableControl=this.querySelector("detectable-control"),this.rocSpace=this.querySelector("roc-space"),this.sdtModel=this.querySelector("sdt-model"),this.detectableControl&&this.detectableControl.addEventListener("detectable-control-z-roc",t=>{this.rocSpace.zRoc=t.detail.zRoc}),this.rocSpace&&(this.rocSpace.setWithSDT(1,0,"default","",1),"d"===this.variable?this.values.forEach((t,s)=>{this.rocSpace.setWithSDT(t,this.sdtModel.c,`point${s}`,s+1,this.sdtModel.s)}):"c"===this.variable&&this.values.forEach((t,s)=>{this.rocSpace.setWithSDT(this.sdtModel.d,t,`point${s}`,s+1,this.sdtModel.s)})),this.sdtModel&&this.sdtModel.addEventListener("sdt-model-change",t=>{this.rocSpace&&(this.rocSpace.setWithSDT(t.detail.d,t.detail.c,"default","",t.detail.s),"d"===this.variable?this.values.forEach((s,e)=>{this.rocSpace.setWithSDT(s,t.detail.c,`point${e}`,e+1,t.detail.s)}):"c"===this.variable&&this.values.forEach((s,e)=>{this.rocSpace.setWithSDT(t.detail.d,s,`point${e}`,e+1,t.detail.s)}))})}}customElements.define("sdt-example-multiple",SDTExampleMultiple);class SDTExampleUnequal extends SDTExample{connectedCallback(){super.connectedCallback(),this.detectableControl=this.querySelector("detectable-control"),this.rocSpace=this.querySelector("roc-space"),this.sdtModel=this.querySelector("sdt-model"),this.detectableControl&&this.detectableControl.addEventListener("detectable-control-z-roc",t=>{this.rocSpace.zRoc=t.detail.zRoc}),this.rocSpace&&(this.rocSpace.setWithSDT(1,0,"default","",1),range$1(-1.5,1.6,.5).forEach((t,s)=>{this.rocSpace.setWithSDT(this.sdtModel.d,t,`point${s}`,"",this.sdtModel.s)})),this.sdtModel&&this.sdtModel.addEventListener("sdt-model-change",t=>{this.rocSpace&&range$1(-1.5,1.6,.5).forEach((s,e)=>{this.rocSpace.setWithSDT(t.detail.d,s,`point${e}`,"",t.detail.s)})})}}customElements.define("sdt-example-unequal",SDTExampleUnequal);var data$2={colors:{x:"#e41a1c",a:"#ff7f00",l:"#ffff33",v:"#f781bf",p:"#377eb8",g:"#4daf4a",w:"#984ea3",u:"#a65628",chosen:"#999999",better:"#4545d0",worse:"#f032e6",even:"#10dbc9",correct:"#ffffff",error:"#000000",nr:"#cccccc"}},colors$2=data$2.colors;class ProspectableElement extends DecidablesElement{static get properties(){return{interactive:{attribute:"interactive",type:Boolean,reflect:!0}}}constructor(){super(),this.interactive=!1}static get colors(){return colors$2}static get lights(){return Object.keys(ProspectableElement.colors).reduce((t,s)=>(t[s]=interpolateRgb(ProspectableElement.colors[s],"#ffffff")(.5),t),{})}static get darks(){return Object.keys(ProspectableElement.colors).reduce((t,s)=>(t[s]=interpolateRgb(ProspectableElement.colors[s],"#000000")(.5),t),{})}static get styles(){return[super.styles,i$5`
        :host {
          ---color-x: var(--color-x, ${r$4(this.colors.x)});
          ---color-a: var(--color-a, ${r$4(this.colors.a)});
          ---color-l: var(--color-l, ${r$4(this.colors.l)});
          ---color-v: var(--color-v, ${r$4(this.colors.v)});
          ---color-p: var(--color-p, ${r$4(this.colors.p)});
          ---color-g: var(--color-g, ${r$4(this.colors.g)});
          ---color-w: var(--color-w, ${r$4(this.colors.w)});
          ---color-u: var(--color-u, ${r$4(this.colors.u)});
          ---color-chosen: var(--color-chosen, ${r$4(this.colors.chosen)});
          ---color-better: var(--color-better, ${r$4(this.colors.better)});
          ---color-worse: var(--color-worse, ${r$4(this.colors.worse)});
          ---color-even: var(--color-even, ${r$4(this.colors.even)});
          ---color-correct: var(--color-correct, ${r$4(this.colors.correct)});
          ---color-error: var(--color-error, ${r$4(this.colors.error)});
          ---color-nr: var(--color-nr, ${r$4(this.colors.nr)});

          ---color-x-light: var(--color-x-light, ${r$4(this.lights.x)});
          ---color-a-light: var(--color-a-light, ${r$4(this.lights.a)});
          ---color-l-light: var(--color-l-light, ${r$4(this.lights.l)});
          ---color-v-light: var(--color-v-light, ${r$4(this.lights.v)});
          ---color-p-light: var(--color-p-light, ${r$4(this.lights.p)});
          ---color-g-light: var(--color-g-light, ${r$4(this.lights.g)});
          ---color-w-light: var(--color-w-light, ${r$4(this.lights.w)});
          ---color-u-light: var(--color-u-light, ${r$4(this.lights.u)});
          ---color-chosen-light: var(--color-chosen-light, ${r$4(this.lights.chosen)});
          ---color-better-light: var(--color-better-light, ${r$4(this.lights.better)});
          ---color-worse-light: var(--color-worse-light, ${r$4(this.lights.worse)});
          ---color-even-light: var(--color-even-light, ${r$4(this.lights.even)});
          ---color-correct-light: var(--color-correct-light, ${r$4(this.lights.correct)});
          ---color-error-light: var(--color-error-light, ${r$4(this.lights.error)});
          ---color-nr-light: var(--color-nr-light, ${r$4(this.lights.nr)});

          ---color-x-dark: var(--color-x-dark, ${r$4(this.darks.x)});
          ---color-a-dark: var(--color-a-dark, ${r$4(this.darks.a)});
          ---color-l-dark: var(--color-l-dark, ${r$4(this.darks.l)});
          ---color-v-dark: var(--color-v-dark, ${r$4(this.darks.v)});
          ---color-p-dark: var(--color-p-dark, ${r$4(this.darks.p)});
          ---color-g-dark: var(--color-g-dark, ${r$4(this.darks.g)});
          ---color-w-dark: var(--color-w-dark, ${r$4(this.darks.w)});
          ---color-u-dark: var(--color-u-dark, ${r$4(this.darks.u)});
          ---color-chosen-dark: var(--color-chosen-dark, ${r$4(this.darks.chosen)});
          ---color-better-dark: var(--color-better-dark, ${r$4(this.darks.better)});
          ---color-worse-dark: var(--color-worse-dark, ${r$4(this.darks.worse)});
          ---color-even-dark: var(--color-even-dark, ${r$4(this.darks.even)});
          ---color-correct-dark: var(--color-correct-dark, ${r$4(this.darks.correct)});
          ---color-error-dark: var(--color-error-dark, ${r$4(this.darks.error)});
          ---color-nr-dark: var(--color-nr-dark, ${r$4(this.darks.nr)});
        }
      `]}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const t={CHILD:2},e=t=>(...s)=>({_$litDirective$:t,values:s});let i$1=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,s,e){this._$Ct=t,this._$AM=s,this._$Ci=e}_$AS(t,s){return this.update(t,s)}update(t,s){return this.render(...s)}};
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const f$1=t=>void 0===t.strings,s=(t,e)=>{const B=t._$AN;if(void 0===B)return!1;for(const t of B)t._$AO?.(e,!1),s(t,e);return!0},o$1=t=>{let s,e;do{if(void 0===(s=t._$AM))break;e=s._$AN,e.delete(t),t=s}while(0===e?.size)},r$1=t=>{for(let s;s=t._$AM;t=s){let e=s._$AN;if(void 0===e)s._$AN=e=new Set;else if(e.has(t))break;e.add(t),c(s)}};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function h(t){void 0!==this._$AN?(o$1(this),this._$AM=t,r$1(this)):this._$AM=t}function n$1(t,e=!1,B=0){const i=this._$AH,F=this._$AN;if(void 0!==F&&0!==F.size)if(e)if(Array.isArray(i))for(let t=B;t<i.length;t++)s(i[t],!1),o$1(i[t]);else null!=i&&(s(i,!1),o$1(i));else s(this,t)}const c=s=>{s.type==t.CHILD&&(s._$AP??=n$1,s._$AQ??=h)};class f extends i$1{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,s,e){super._$AT(t,s,e),r$1(this),this.isConnected=t._$AU}_$AO(t,e=!0){t!==this.isConnected&&(this.isConnected=t,t?this.reconnected?.():this.disconnected?.()),e&&(s(this,t),o$1(this))}setValue(t){if(f$1(this._$Ct))this._$Ct._$AI(t,this);else{const s=[...this._$Ct._$AH];s[this._$Ci]=t,this._$Ct._$AI(s,this,0)}}disconnected(){}reconnected(){}}const i=new WeakMap;let o=0;const r=new Map,n=new WeakSet,a=()=>new Promise(t=>requestAnimationFrame(t)),d=[{transform:"translateX(-100%) scale(0)",opacity:0}],v=[{opacity:0},{opacity:1}],g=(t,s)=>{const e=t-s;return 0===e?void 0:e},w=(t,s)=>{const e=t/s;return 1===e?void 0:e},N={left:(t,s)=>{const e=g(t,s);return{value:e,transform:null==e||isNaN(e)?void 0:`translateX(${e}px)`}},top:(t,s)=>{const e=g(t,s);return{value:e,transform:null==e||isNaN(e)?void 0:`translateY(${e}px)`}},width:(t,s)=>{let e;0===s&&(s=1,e={width:"1px"});const B=w(t,s);return{value:B,overrideFrom:e,transform:null==B||isNaN(B)?void 0:`scaleX(${B})`}},height:(t,s)=>{let e;0===s&&(s=1,e={height:"1px"});const B=w(t,s);return{value:B,overrideFrom:e,transform:null==B||isNaN(B)?void 0:`scaleY(${B})`}}},A={duration:333,easing:"ease-in-out"},b=["left","top","width","height","opacity","color","background"],j=new WeakMap;let x$1=class extends f{constructor(s){if(super(s),this.t=!1,this.i=null,this.o=null,this.h=!0,this.shouldLog=!1,s.type===t.CHILD)throw Error("The `animate` directive must be used in attribute position.");this.createFinished()}createFinished(){this.resolveFinished?.(),this.finished=new Promise(t=>{this.l=t})}async resolveFinished(){this.l?.(),this.l=void 0}render(t){return E$1}getController(){return i.get(this.u)}isDisabled(){return this.options.disabled||this.getController()?.disabled}update(t,[s]){const e=void 0===this.u;return e&&(this.u=t.options?.host,this.u.addController(this),this.u.updateComplete.then(t=>this.t=!0),this.element=t.element,j.set(this.element,this)),this.optionsOrCallback=s,(e||"function"!=typeof s)&&this.p(s),this.render(s)}p(t){t=t??{};const s=this.getController();void 0!==s&&((t={...s.defaultOptions,...t}).keyframeOptions={...s.defaultOptions.keyframeOptions,...t.keyframeOptions}),t.properties??=b,this.options=t}m(){const t={},s=this.element.getBoundingClientRect(),e=getComputedStyle(this.element);return this.options.properties.forEach(B=>{const i=s[B]??(N[B]?void 0:e[B]),F=Number(i);t[B]=isNaN(F)?i+"":F}),t}v(){let t,s=!0;return this.options.guard&&(t=this.options.guard(),s=((t,s)=>{if(Array.isArray(t)){if(Array.isArray(s)&&s.length===t.length&&t.every((t,e)=>t===s[e]))return!1}else if(s===t)return!1;return!0})(t,this._)),this.h=this.t&&!this.isDisabled()&&!this.isAnimating()&&s&&this.element.isConnected,this.h&&(this._=Array.isArray(t)?Array.from(t):t),this.h}hostUpdate(){"function"==typeof this.optionsOrCallback&&this.p(this.optionsOrCallback()),this.v()&&(this.A=this.m(),this.i=this.i??this.element.parentNode,this.o=this.element.nextSibling)}async hostUpdated(){if(!this.h||!this.element.isConnected||this.options.skipInitial&&!this.isHostRendered)return;let t;this.prepare(),await a;const s=this.O(),e=this.j(this.options.keyframeOptions,s),B=this.m();if(void 0!==this.A){const{from:e,to:i}=this.N(this.A,B,s);this.log("measured",[this.A,B,e,i]),t=this.calculateKeyframes(e,i)}else{const e=r.get(this.options.inId);if(e){r.delete(this.options.inId);const{from:i,to:F}=this.N(e,B,s);t=this.calculateKeyframes(i,F),t=this.options.in?[{...this.options.in[0],...t[0]},...this.options.in.slice(1),t[1]]:t,o++,t.forEach(t=>t.zIndex=o)}else this.options.in&&(t=[...this.options.in,{}])}this.animate(t,e)}resetStyles(){void 0!==this.P&&(this.element.setAttribute("style",this.P??""),this.P=void 0)}commitStyles(){this.P=this.element.getAttribute("style"),this.webAnimation?.commitStyles(),this.webAnimation?.cancel()}reconnected(){}async disconnected(){if(!this.h)return;if(void 0!==this.options.id&&r.set(this.options.id,this.A),void 0===this.options.out)return;if(this.prepare(),await a(),this.i?.isConnected){const t=this.o&&this.o.parentNode===this.i?this.o:null;if(this.i.insertBefore(this.element,t),this.options.stabilizeOut){const t=this.m();this.log("stabilizing out");const s=this.A.left-t.left,e=this.A.top-t.top;!("static"===getComputedStyle(this.element).position)||0===s&&0===e||(this.element.style.position="relative"),0!==s&&(this.element.style.left=s+"px"),0!==e&&(this.element.style.top=e+"px")}}const t=this.j(this.options.keyframeOptions);await this.animate(this.options.out,t),this.element.remove()}prepare(){this.createFinished()}start(){this.options.onStart?.(this)}didFinish(t){t&&this.options.onComplete?.(this),this.A=void 0,this.animatingProperties=void 0,this.frames=void 0,this.resolveFinished()}O(){const t=[];for(let s=this.element.parentNode;s;s=s?.parentNode){const e=j.get(s);e&&!e.isDisabled()&&e&&t.push(e)}return t}get isHostRendered(){const t=n.has(this.u);return t||this.u.updateComplete.then(()=>{n.add(this.u)}),t}j(t,s=this.O()){const e={...A};return s.forEach(t=>Object.assign(e,t.options.keyframeOptions)),Object.assign(e,t),e}N(t,s,e){t={...t},s={...s};const B=e.map(t=>t.animatingProperties).filter(t=>void 0!==t);let i=1,F=1;return B.length>0&&(B.forEach(t=>{t.width&&(i/=t.width),t.height&&(F/=t.height)}),void 0!==t.left&&void 0!==s.left&&(t.left=i*t.left,s.left=i*s.left),void 0!==t.top&&void 0!==s.top&&(t.top=F*t.top,s.top=F*s.top)),{from:t,to:s}}calculateKeyframes(t,s,e=!1){const B={},i={};let F=!1;const Q={};for(const e in s){const l=t[e],U=s[e];if(e in N){const t=N[e];if(void 0===l||void 0===U)continue;const s=t(l,U);void 0!==s.transform&&(Q[e]=s.value,F=!0,B.transform=`${B.transform??""} ${s.transform}`,void 0!==s.overrideFrom&&Object.assign(B,s.overrideFrom))}else l!==U&&void 0!==l&&void 0!==U&&(F=!0,B[e]=l,i[e]=U)}return B.transformOrigin=i.transformOrigin=e?"center center":"top left",this.animatingProperties=Q,F?[B,i]:void 0}async animate(t,s=this.options.keyframeOptions){this.start(),this.frames=t;let e=!1;if(!this.isAnimating()&&!this.isDisabled()&&(this.options.onFrames&&(this.frames=t=this.options.onFrames(this),this.log("modified frames",t)),void 0!==t)){this.log("animate",[t,s]),e=!0,this.webAnimation=this.element.animate(t,s);const B=this.getController();B?.add(this);try{await this.webAnimation.finished}catch(t){}B?.remove(this)}return this.didFinish(e),e}isAnimating(){return"running"===this.webAnimation?.playState||this.webAnimation?.pending}log(t,s){this.shouldLog&&!this.isDisabled()&&console.log(t,this.options.id,s)}};const F=e(x$1);class CPTMath{static a={DEFAULT:.5,MIN:0,MAX:1,STEP:.01,JUMP:.05};static l={DEFAULT:2,MIN:0,MAX:10,STEP:.01,JUMP:.05};static g={DEFAULT:.5,MIN:0,MAX:1,STEP:.01,JUMP:.05};static xal2v(t,s,e){return t>=0?t**s:-e*(-t)**s}static xlv2a(t,s,e){return t>=0?Math.log(e)/Math.log(t):(Math.log(-e)-Math.log(s))/Math.log(-t)}static xav2l(t,s,e){return t>=0?NaN:-e/(-t)**s}static pg2w(t,s){return t**s/(t**s+(1-t)**s)**(1/s)}static vw2u(t,s){if("number"==typeof t&&"number"==typeof s)return t*s;if(t instanceof Array&&s instanceof Array&&t.length>0&&t.length===s.length){let e=0;for(let B=0;B<t.length;B+=1)e+=t[B]*s[B];return e}return NaN}}class CPTEquation extends ProspectableElement{static get properties(){return{numeric:{attribute:"numeric",type:Boolean,reflect:!0}}}constructor(){super(),this.numeric=!1}static get styles(){return[super.styles,i$5`
        :host {
          display: block;

          margin: 1rem;
        }

        /* Containing <div> */
        .holder {
          display: flex;

          flex-direction: row;

          justify-content: left;
        }

        /* Overall <table> */
        .equation {
          text-align: center;
          white-space: nowrap;

          border-collapse: collapse;

          border: 0;
        }

        /* Modifies <td> */
        .underline {
          border-bottom: 1px solid var(---color-text);
        }

        /* Basic <span> and <var> w/modifiers */
        span,
        var {
          padding: 0 0.25rem;

          font-style: normal;
        }

        var {
          border-radius: var(---border-radius);
        }

        .tight {
          padding: 0;
        }

        .paren {
          font-size: 150%;
        }

        .bracket {
          font-size: 175%;
        }

        .brace {
          font-size: 200%;
        }

        .addend {
          position: relative;
          display: inline-block;
        }

        .comparison {
          position: relative;
          display: inline-block;

          font-size: 125%;
          font-weight: 600;
        }

        .function {
          display: inline-block;

          border-radius: var(---border-radius);
        }

        :host([numeric]) .function {
          padding: 0.25rem;
        }

        .exp {
          display: inline-block;

          font-size: 0.75rem;
        }

        .subscript {
          display: inline-block;

          font-size: 66.667%;
        }

        .summation {
          display: flex;

          flex-direction: column;

          line-height: 0.8;
        }

        .sigma {
          display: inline-block;

          font-size: 200%;
        }

        /* Input wrapping <label> */
        decidables-spinner {
          --decidables-spinner-input-width: 4rem;

          display: inline-block;

          padding: 0.125rem 0.375rem 0.375rem;

          line-height: 1.5;
          vertical-align: middle;

          border-radius: var(---border-radius);
        }

        .n {
          --decidables-spinner-input-width: 2rem;
        }

        .left {
          text-align: left;
        }

        .right {
          text-align: right;
        }

        .bottom {
          vertical-align: bottom;
        }

        .top {
          vertical-align: top;
        }

        /* Color scheme */
        /* .win {
          background: var(---color-better);
        }

        .loss {
          background: var(---color-worse);
        }

        .sure {
          background: var(---color-even);
        } */

        .x {
          background: var(---color-x-light);
        }

        .a {
          background: var(---color-a-light);
        }

        .l {
          background: var(---color-l-light);
        }

        .v {
          background: var(---color-v-light);
        }

        .p {
          background: var(---color-p-light);
        }

        .g {
          background: var(---color-g-light);
        }

        .w {
          background: var(---color-w-light);
        }

        .u {
          background: var(---color-u-light);
        }
      `]}}class CPTCalculation extends CPTEquation{static get properties(){return{numeric:{attribute:"numeric",type:Boolean,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0}}}constructor(){super(),this.numeric=!1,this.xl=0,this.xw=100,this.pw=.75,this.xs=50,this.a=CPTMath.a.DEFAULT,this.l=CPTMath.l.DEFAULT,this.g=CPTMath.g.DEFAULT,this.alignState()}alignState(){this.vw=CPTMath.xal2v(this.xw,this.a,this.l),this.vl=CPTMath.xal2v(this.xl,this.a,this.l),this.ww=CPTMath.pg2w(this.pw,this.g),this.wl=1-this.ww,this.vs=CPTMath.xal2v(this.xs,this.a,this.l),this.ug=CPTMath.vw2u([this.vw,this.vl],[this.ww,this.wl]),this.us=this.vs,this.uDiff=this.ug-this.us}sendEvent(){this.dispatchEvent(new CustomEvent("cpt-calculation-change",{detail:{xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,a:this.a,l:this.l,g:this.g},bubbles:!0}))}xwInput(t){this.xw=parseFloat(t.target.value),this.alignState(),this.sendEvent()}pwInput(t){this.pw=parseFloat(t.target.value),this.alignState(),this.sendEvent()}xsInput(t){this.xs=parseFloat(t.target.value),this.alignState(),this.sendEvent()}static get styles(){return[super.styles,i$5`
        /* :host {
          display: inline-block;
        } */

        var {
          border-radius: var(---border-radius);
        }

        decidables-spinner {
          border-radius: var(---border-radius);
        }
      `]}willUpdate(){this.alignState()}render(){let t,s,e,B,i,Q,l,U,a,g,I,c;this.numeric?(t=x$3`<decidables-spinner class="x xw"
          ?disabled=${!this.interactive}
          .value=${this.xw}
          @input=${this.xwInput.bind(this)}
        >
          <var class="math-var">x<sub class="subscript win">win</sub></var>
        </decidables-spinner>`,s=x$3`<decidables-spinner class="x xl"
          disabled
          .value=${this.xl}
        >
          <var class="math-var">x<sub class="subscript loss">loss</sub></var>
        </decidables-spinner>`,e=x$3`<decidables-spinner class="p pw"
          ?disabled=${!this.interactive}
          min="0"
          max="1"
          step=".01"
          .value=${+this.pw.toFixed(2)}
          @input=${this.pwInput.bind(this)}
        >
          <var class="math-var">p<sub class="subscript win">win</sub></var>
        </decidables-spinner>`,B=x$3`<decidables-spinner class="x xs"
          ?disabled=${!this.interactive}
          .value=${this.xs}
          @input=${this.xsInput.bind(this)}
        >
          <var class="math-var">x<sub class="subscript sure">sure</sub></var>
        </decidables-spinner>`,i=x$3`<decidables-spinner class="v vw"
          disabled
          .value=${+this.vw.toFixed(1)}
        >
          <var class="math-var">v<sub class="subscript win">win</sub></var>
        </decidables-spinner>`,Q=x$3`<decidables-spinner class="v vl"
          disabled
          .value=${+this.vl.toFixed(1)}
        >
          <var class="math-var">v<sub class="subscript loss">loss</sub></var>
        </decidables-spinner>`,l=x$3`<decidables-spinner class="w ww"
          disabled
          .value=${+this.ww.toFixed(2)}
        >
          <var class="math-var">w<sub class="subscript win">win</sub></var>
        </decidables-spinner>`,U=x$3`<decidables-spinner class="w wl"
          disabled
          .value=${+this.wl.toFixed(2)}
        >
          <var class="math-var">w<sub class="subscript loss">loss</sub></var>
        </decidables-spinner>`,a=x$3`<decidables-spinner class="v vs"
          disabled
          .value=${+this.vs.toFixed(1)}
        >
          <var class="math-var">v<sub class="subscript sure">sure</sub></var>
        </decidables-spinner>`,g=x$3`<decidables-spinner class="u ug"
          disabled
          .value=${+this.ug.toFixed(1)}
        >
          <var class="math-var">U<sub class="subscript gamble">gamble</sub></var>
        </decidables-spinner>`,I=x$3`<decidables-spinner class="u us"
          disabled
          .value=${+this.us.toFixed(1)}
        >
          <var class="math-var">U<sub class="subscript sure">sure</sub></var>
        </decidables-spinner>`,c=x$3`${this.uDiff>0?x$3`<span class="comparison" ${F({in:v})}>&gt;</span>`:this.uDiff<0?x$3`<span class="comparison" ${F({in:v})}>&lt;</span>`:x$3`<span class="comparison" ${F({in:v})}>=</span>`}`):(t=x$3`<var class="math-var x xw">x<sub class="subscript win">win</sub></var>`,s=x$3`<var class="math-var x xl">x<sub class="subscript loss">loss</sub></var>`,e=x$3`<var class="math-var p pw">p<sub class="subscript win">win</sub></var>`,B=x$3`<var class="math-var x xs">x<sub class="subscript sure">sure</sub></var>`,i=x$3`<var class="math-var v vw">v<sub class="subscript win">win</sub></var>`,Q=x$3`<var class="math-var v vl">v<sub class="subscript loss">loss</sub></var>`,l=x$3`<var class="math-var w ww">w<sub class="subscript win">win</sub></var>`,U=x$3`<var class="math-var w wl">w<sub class="subscript loss">loss</sub></var>`,a=x$3`<var class="math-var v vs">v<sub class="subscript sure">sure</sub></var>`,g=x$3`<var class="math-var u ug">U<sub class="subscript gamble">gamble</sub></var>`,I=x$3`<var class="math-var u us">U<sub class="subscript sure">sure</sub></var>`,c=x$3`<span class="comparison">â</span>`);const n=x$3`
      <tr>
        <td class="right">
          <span class="function v"><var class="math-var v tight">v</var><span class="paren tight">(</span>${t}<span class="paren tight">)</span></span>&nbsp;<span class="function w"><var class="math-var w tight">w</var><span class="paren tight">(</span>${e}<span class="paren tight">)</span></span><span class="plus">+</span><span class="function v"><var class="math-var v tight">v</var><span class="paren tight">(</span>${s}<span class="paren tight">)</span></span>&nbsp;<span class="bracket tight">[</span><span class="tight">1</span><span class="minus">â</span><span class="function w"><var class="math-var w">w</var><span class="paren tight">(</span>${e}<span class="paren tight">)</span></span><span class="bracket tight">]</span>
        </td>
        <td>
          ${c}
        </td>
        <td class="left">
          <span class="function v"><var class="math-var v tight">v</var><span class="paren tight">(</span>${B}<span class="paren tight">)</span></span>
        </td>
      </tr>
      <tr>
        <td class="right">
          ${i}&nbsp;${l}<span class="plus">+</span>${Q}&nbsp;${U}
        </td>
        <td>
          ${c}
        </td>
        <td class="left">
          ${a}
        </td>
      </tr>
      <tr>
        <td class="right">
          ${g}
        </td>
        <td>
          ${c}
        </td>
        <td class="left">
          ${I}
        </td>
      </tr>`;return x$3`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${n}
          </tbody>
        </table>
      </div>`}}function defined(t){return null!=t&&!Number.isNaN(t)}function ascendingDefined(t,s){return+defined(s)-+defined(t)||ascending$2(t,s)}function descendingDefined(t,s){return+defined(s)-+defined(t)||descending$1(t,s)}function nonempty(t){return null!=t&&""!=`${t}`}function finite(t){return isFinite(t)?t:NaN}function positive(t){return t>0&&isFinite(t)?t:NaN}function negative(t){return t<0&&isFinite(t)?t:NaN}function format(t,s){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return"function"==typeof s?s(t):s;const e=t.getUTCHours(),B=t.getUTCMinutes(),i=t.getUTCSeconds(),F=t.getUTCMilliseconds();return`${formatYear(t.getUTCFullYear())}-${pad(t.getUTCMonth()+1,2)}-${pad(t.getUTCDate(),2)}${e||B||i||F?`T${pad(e,2)}:${pad(B,2)}${i||F?`:${pad(i,2)}${F?`.${pad(F,3)}`:""}`:""}Z`:""}`}function formatYear(t){return t<0?`-${pad(-t,6)}`:t>9999?`+${pad(t,6)}`:pad(t,4)}function pad(t,s){return`${t}`.padStart(s,"0")}customElements.define("cpt-calculation",CPTCalculation);const re=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function parse(t,s){return re.test(t+="")?new Date(t):"function"==typeof s?s(t):s}function orderof(t){if(null==t)return;return descending$1(t[0],t[t.length-1])}const durationSecond=1e3,durationMinute=6e4,durationHour=36e5,durationDay=864e5,durationWeek=6048e5,durationMonth=2592e6,durationYear=31536e6,tickIntervals=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",1e3],["5 seconds",5e3],["15 seconds",15e3],["30 seconds",3e4],["minute",6e4],["5 minutes",3e5],["15 minutes",9e5],["30 minutes",18e5],["hour",36e5],["3 hours",108e5],["6 hours",216e5],["12 hours",432e5],["day",864e5],["2 days",1728e5],["week",6048e5],["2 weeks",12096e5],["month",2592e6],["3 months",7776e6],["6 months",15552e6],["year",31536e6],["2 years",63072e6],["5 years",15768e7],["10 years",31536e7],["20 years",63072e7],["50 years",15768e8],["100 years",31536e8]],durations=new Map([["second",1e3],["minute",6e4],["hour",36e5],["day",864e5],["monday",6048e5],["tuesday",6048e5],["wednesday",6048e5],["thursday",6048e5],["friday",6048e5],["saturday",6048e5],["sunday",6048e5],["week",6048e5],["month",2592e6],["year",31536e6]]),timeIntervals=new Map([["second",second$1],["minute",timeMinute],["hour",timeHour],["day",timeDay],["monday",timeMonday],["tuesday",timeTuesday],["wednesday",timeWednesday],["thursday",timeThursday],["friday",timeFriday],["saturday",timeSaturday],["sunday",timeSunday],["week",timeSunday],["month",timeMonth],["year",timeYear]]),utcIntervals=new Map([["second",second$1],["minute",utcMinute],["hour",utcHour],["day",unixDay],["monday",utcMonday],["tuesday",utcTuesday],["wednesday",utcWednesday],["thursday",utcThursday],["friday",utcFriday],["saturday",utcSaturday],["sunday",utcSunday],["week",utcSunday],["month",utcMonth],["year",utcYear]]),intervalDuration=Symbol("intervalDuration"),intervalType=Symbol("intervalType");for(const[t,s]of timeIntervals)s[intervalDuration]=durations.get(t),s[intervalType]="time";for(const[t,s]of utcIntervals)s[intervalDuration]=durations.get(t),s[intervalType]="utc";const utcFormatIntervals=[["year",utcYear,"utc"],["month",utcMonth,"utc"],["day",unixDay,"utc",15552e6],["hour",utcHour,"utc",2592e5],["minute",utcMinute,"utc",216e5],["second",second$1,"utc",18e5]],timeFormatIntervals=[["year",timeYear,"time"],["month",timeMonth,"time"],["day",timeDay,"time",15552e6],["hour",timeHour,"time",2592e5],["minute",timeMinute,"time",216e5],["second",second$1,"time",18e5]],formatIntervals=[utcFormatIntervals[0],timeFormatIntervals[0],utcFormatIntervals[1],timeFormatIntervals[1],utcFormatIntervals[2],timeFormatIntervals[2],...utcFormatIntervals.slice(3)];function parseTimeInterval(t){let s=`${t}`.toLowerCase();s.endsWith("s")&&(s=s.slice(0,-1));let e=1;const B=/^(?:(\d+)\s+)/.exec(s);switch(B&&(s=s.slice(B[0].length),e=+B[1]),s){case"quarter":s="month",e*=3;break;case"half":s="month",e*=6}let i=utcIntervals.get(s);if(!i)throw new Error(`unknown interval: ${t}`);if(e>1&&!i.every)throw new Error(`non-periodic interval: ${s}`);return[s,e]}function timeInterval(t){return asInterval(parseTimeInterval(t),"time")}function utcInterval(t){return asInterval(parseTimeInterval(t),"utc")}function asInterval([t,s],e){let B=("time"===e?timeIntervals:utcIntervals).get(t);return s>1&&(B=B.every(s),B[intervalDuration]=durations.get(t)*s,B[intervalType]=e),B}function generalizeTimeInterval(t,s){if(!(s>1))return;const e=t[intervalDuration];if(!tickIntervals.some(([,t])=>t===e))return;if(e%864e5==0&&864e5<e&&e<2592e6)return;const[B]=tickIntervals[bisector(([,t])=>Math.log(t)).center(tickIntervals,Math.log(e*s))];return("time"===t[intervalType]?timeInterval:utcInterval)(B)}function formatTimeInterval(t,s,e){const B="time"===s?timeFormat:utcFormat;if(null==e)return B("year"===t?"%Y":"month"===t?"%Y-%m":"day"===t?"%Y-%m-%d":"hour"===t||"minute"===t?"%Y-%m-%dT%H:%M":"second"===t?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=getTimeTemplate(e);switch(t){case"millisecond":return formatConditional(B(".%L"),B(":%M:%S"),i);case"second":return formatConditional(B(":%S"),B("%-I:%M"),i);case"minute":return formatConditional(B("%-I:%M"),B("%p"),i);case"hour":return formatConditional(B("%-I %p"),B("%b %-d"),i);case"day":return formatConditional(B("%-d"),B("%b"),i);case"month":return formatConditional(B("%b"),B("%Y"),i);case"year":return B("%Y")}throw new Error("unable to format time ticks")}function getTimeTemplate(t){return"left"===t||"right"===t?(t,s)=>`\n${t}\n${s}`:"top"===t?(t,s)=>`${s}\n${t}`:(t,s)=>`${t}\n${s}`}function getFormatIntervals(t){return"time"===t?timeFormatIntervals:"utc"===t?utcFormatIntervals:formatIntervals}function inferTimeFormat(t,s,e){const B=max$1(pairs(s,(t,s)=>Math.abs(s-t)));if(B<1e3)return formatTimeInterval("millisecond","utc",e);for(const[i,F,Q,l]of getFormatIntervals(t)){if(B>l)break;if("hour"===i&&!B)break;if(s.every(t=>F.floor(t)>=t))return formatTimeInterval(i,Q,e)}}function formatConditional(t,s,e){return(B,i,F)=>{const Q=t(B,i),l=s(B,i),U=i-orderof(F);return i!==U&&void 0!==F[U]&&l===s(F[U],U)?Q:e(Q,l)}}const TypedArray=Object.getPrototypeOf(Uint8Array),objectToString=Object.prototype.toString;function isArray(t){return t instanceof Array||t instanceof TypedArray}function isNumberArray(t){return t instanceof TypedArray&&!isBigIntArray(t)}function isNumberType(t){return t?.prototype instanceof TypedArray&&!isBigIntType(t)}function isBigIntArray(t){return t instanceof BigInt64Array||t instanceof BigUint64Array}function isBigIntType(t){return t===BigInt64Array||t===BigUint64Array}const reindex=Symbol("reindex");function valueof(t,s,e){const B=typeof s;return"string"===B?isArrowTable(t)?maybeTypedArrowify(t.getChild(s),e):maybeTypedMap(t,field(s),e):"function"===B?maybeTypedMap(t,s,e):"number"===B||s instanceof Date||"boolean"===B?map(t,constant(s),e):"function"==typeof s?.transform?maybeTypedArrayify(s.transform(t),e):maybeTake(maybeTypedArrayify(s,e),t?.[reindex])}function maybeTake(t,s){return null!=t&&s?take(t,s):t}function maybeTypedMap(t,s,e){return map(t,isNumberType(e)?(t,e)=>coerceNumber(s(t,e)):s,e)}function maybeTypedArrayify(t,s){return void 0===s?arrayify(t):isArrowVector(t)?maybeTypedArrowify(t,s):t instanceof s?t:s.from(t,isNumberType(s)&&!isNumberArray(t)?coerceNumber:void 0)}function maybeTypedArrowify(t,s){return null==t?t:void 0!==s&&s!==Array||!isArrowDateType(t.type)?maybeTypedArrayify(vectorToArray(t),s):coerceDates(vectorToArray(t))}function vectorToArray(t){return t.nullCount?t.toJSON():t.toArray()}const singleton=[null],field=t=>s=>{const e=s[t];return void 0===e&&"Feature"===s.type?s.properties?.[t]:e},indexOf={transform:range},identity$1={transform:t=>t},one=()=>1,yes=()=>!0,string=t=>null==t?t:`${t}`,number=t=>null==t?t:+t,first=t=>t?t[0]:void 0,second=t=>t?t[1]:void 0,constant=t=>()=>t;function percentile(t){const s=+`${t}`.slice(1)/100;return(t,e)=>quantile$1(t,s,e)}function coerceNumbers(t){return isNumberArray(t)?t:map(t,coerceNumber,Float64Array)}function coerceNumber(t){return null==t?NaN:Number(t)}function coerceDates(t){return map(t,coerceDate)}function coerceDate(t){return t instanceof Date&&!isNaN(t)?t:"string"==typeof t?parse(t):null==t||isNaN(t=Number(t))?void 0:new Date(t)}function maybeColorChannel(t,s){return void 0===t&&(t=s),null===t?[void 0,"none"]:isColor(t)?[void 0,t]:[t,void 0]}function maybeNumberChannel(t,s){return void 0===t&&(t=s),null===t||"number"==typeof t?[void 0,t]:[t,void 0]}function maybeKeyword(t,s,e){if(null!=t)return keyword(t,s,e)}function keyword(t,s,e){const B=`${t}`.toLowerCase();if(!e.includes(B))throw new Error(`invalid ${s}: ${t}`);return B}function dataify(t){return isArrowTable(t)?t:arrayify(t)}function arrayify(t){if(null==t||isArray(t))return t;if(isArrowVector(t))return maybeTypedArrowify(t);if(isGeoJSON(t))switch(t.type){case"FeatureCollection":return t.features;case"GeometryCollection":return t.geometries;default:return[t]}return Array.from(t)}function isGeoJSON(t){switch(t?.type){case"FeatureCollection":case"GeometryCollection":case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":return!0;default:return!1}}function map(t,s,e=Array){return null==t?t:t instanceof e?t.map(s):e.from(t,s)}function slice(t,s=Array){return t instanceof s?t.slice():s.from(t)}function hasX({x:t,x1:s,x2:e}){return void 0!==t||void 0!==s||void 0!==e}function hasY({y:t,y1:s,y2:e}){return void 0!==t||void 0!==s||void 0!==e}function hasXY(t){return hasX(t)||hasY(t)||void 0!==t.interval}function isObject(t){return t?.toString===objectToString}function isScaleOptions(t){return isObject(t)&&(void 0!==t.type||void 0!==t.domain)}function isOptions(t){return isObject(t)&&"function"!=typeof t.transform}function isDomainSort(t){return isOptions(t)&&void 0===t.value&&void 0===t.channel}function maybeZero(t,s,e,B=identity$1){return void 0===s&&void 0===e?(s=0,e=void 0===t?B:t):void 0===s?s=void 0===t?0:t:void 0===e&&(e=void 0===t?0:t),[s,e]}function maybeTuple(t,s){return void 0===t&&void 0===s?[first,second]:[t,s]}function maybeZ({z:t,fill:s,stroke:e}={}){return void 0===t&&([t]=maybeColorChannel(s)),void 0===t&&([t]=maybeColorChannel(e)),t}function lengthof(t){return isArray(t)?t.length:t?.numRows}function range(t){const s=lengthof(t),e=new Uint32Array(s);for(let t=0;t<s;++t)e[t]=t;return e}function take(t,s){return isArray(t)?map(s,s=>t[s],t.constructor):map(s,s=>t.at(s))}function subarray(t,s,e){return t.subarray?t.subarray(s,e):t.slice(s,e)}function keyof(t){return null!==t&&"object"==typeof t?t.valueOf():t}function maybeInput(t,s){if(void 0!==s[t])return s[t];switch(t){case"x1":case"x2":t="x";break;case"y1":case"y2":t="y"}return s[t]}function column(t){let s;return[{transform:()=>s,label:labelof(t)},t=>s=t]}function maybeColumn(t){return null==t?[t]:column(t)}function labelof(t,s){return"string"==typeof t?t:t&&void 0!==t.label?t.label:s}function mid(t,s){return{transform(e){const B=t.transform(e),i=s.transform(e);return isTemporal(B)||isTemporal(i)?map(B,(t,s)=>new Date((+B[s]+ +i[s])/2)):map(B,(t,s)=>(+B[s]+ +i[s])/2,Float64Array)},label:t.label}}function maybeApplyInterval(t,s){const e=maybeIntervalTransform(s?.interval,s?.type);return e?map(t,e):t}function maybeIntervalTransform(t,s){const e=maybeInterval(t,s);return e&&(t=>defined(t)?e.floor(t):t)}function maybeInterval(t,s){if(null!=t){if("number"==typeof t)return numberInterval(t);if("string"==typeof t)return("time"===s?timeInterval:utcInterval)(t);if("function"!=typeof t.floor)throw new Error("invalid interval; missing floor method");if("function"!=typeof t.offset)throw new Error("invalid interval; missing offset method");return t}}function numberInterval(t){0<(t=+t)&&t<1&&Number.isInteger(1/t)&&(t=-1/t);const s=Math.abs(t);return t<0?{floor:t=>Math.floor(t*s)/s,offset:(t,e=1)=>(t*s+Math.floor(e))/s,range:(t,e)=>range$1(Math.ceil(t*s),e*s).map(t=>t/s)}:{floor:t=>Math.floor(t/s)*s,offset:(t,e=1)=>t+s*Math.floor(e),range:(t,e)=>range$1(Math.ceil(t/s),e/s).map(t=>t*s)}}function maybeRangeInterval(t,s){if((t=maybeInterval(t,s))&&"function"!=typeof t.range)throw new Error("invalid interval: missing range method");return t}function maybeNiceInterval(t,s){if((t=maybeRangeInterval(t,s))&&"function"!=typeof t.ceil)throw new Error("invalid interval: missing ceil method");return t}function isTimeInterval(t){return isInterval(t)&&"function"==typeof t?.floor&&t.floor()instanceof Date}function isInterval(t){return"function"==typeof t?.range}function maybeValue(t){return void 0===t||isOptions(t)?t:{value:t}}function numberChannel(t){return null==t?null:{transform:s=>valueof(s,t,Float64Array),label:labelof(t)}}function isIterable(t){return t&&"function"==typeof t[Symbol.iterator]}function isTextual(t){for(const s of t)if(null!=s)return"object"!=typeof s||s instanceof Date}function isOrdinal(t){for(const s of t){if(null==s)continue;const t=typeof s;return"string"===t||"boolean"===t}}function isTemporal(t){for(const s of t)if(null!=s)return s instanceof Date}function isTemporalString(t){for(const s of t)if(null!=s)return"string"==typeof s&&isNaN(s)&&parse(s)}function isNumericString(t){for(const s of t)if(null!=s){if("string"!=typeof s)return!1;if(s.trim())return!isNaN(s)}}function isNumeric(t){for(const s of t)if(null!=s)return"number"==typeof s}function isEvery(t,s){let e;for(const B of t)if(null!=B){if(!s(B))return!1;e=!0}return e}const namedColors=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function isColor(t){return"string"==typeof t&&(t=t.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(t)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(t)||namedColors.has(t))}function isOpacity(t){return"number"==typeof t&&(0<=t&&t<=1||isNaN(t))}function isNoneish(t){return null==t||isNone(t)}function isNone(t){return/^\s*none\s*$/i.test(t)}function isRound(t){return/^\s*round\s*$/i.test(t)}function maybeAnchor$1(t,s){return maybeKeyword(t,s,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function maybeFrameAnchor(t="middle"){return maybeAnchor$1(t,"frameAnchor")}function inherit(t={},...s){let e=t;for(const B of s)for(const s in B)if(void 0===e[s]){const i=B[s];e===t?e={...e,[s]:i}:e[s]=i}return e}function named(t){console.warn("named iterables are deprecated; please use an object instead");const s=new Set;return Object.fromEntries(Array.from(t,t=>{const{name:e}=t;if(null==e)throw new Error("missing name");const B=`${e}`;if("__proto__"===B)throw new Error(`illegal name: ${B}`);if(s.has(B))throw new Error(`duplicate name: ${B}`);return s.add(B),[e,t]}))}function maybeNamed(t){return isIterable(t)?named(t):t}function maybeClip(t){return!0===t?t="frame":!1===t?t=null:isGeoJSON(t)||null==t||"sphere"===(t=keyword(t,"clip",["frame","sphere"]))&&(t={type:"Sphere"}),t}function isArrowTable(t){return t&&"function"==typeof t.getChild&&"function"==typeof t.toArray&&t.schema&&Array.isArray(t.schema.fields)}function isArrowVector(t){return t&&"function"==typeof t.toArray&&t.type}function isArrowDateType(t){return t&&(8===t.typeId||10===t.typeId)&&1===t.unit}const position=Symbol("position"),color=Symbol("color"),radius=Symbol("radius"),length=Symbol("length"),opacity=Symbol("opacity"),symbol=Symbol("symbol"),projection=Symbol("projection"),registry=new Map([["x",position],["y",position],["fx",position],["fy",position],["r",radius],["color",color],["opacity",opacity],["symbol",symbol],["length",length],["projection",projection]]);function isPosition(t){return t===position||t===projection}function hasNumericRange(t){return t===position||t===radius||t===length||t===opacity}const sqrt3=Math.sqrt(3),sqrt4_3=2/sqrt3,symbolHexagon={draw(t,s){const e=Math.sqrt(s/Math.PI),B=e*sqrt4_3,i=B/2;t.moveTo(0,B),t.lineTo(e,i),t.lineTo(e,-i),t.lineTo(0,-B),t.lineTo(-e,-i),t.lineTo(-e,i),t.closePath()}},symbols=new Map([["asterisk",symbolAsterisk],["circle",symbolCircle],["cross",symbolCross],["diamond",symbolDiamond],["diamond2",symbolDiamond2],["hexagon",symbolHexagon],["plus",symbolPlus],["square",symbolSquare],["square2",symbolSquare2],["star",symbolStar],["times",symbolTimes],["triangle",symbolTriangle],["triangle2",symbolTriangle2],["wye",symbolWye]]);function isSymbolObject(t){return t&&"function"==typeof t.draw}function isSymbol(t){return!!isSymbolObject(t)||"string"==typeof t&&symbols.has(t.toLowerCase())}function maybeSymbol(t){if(null==t||isSymbolObject(t))return t;const s=symbols.get(`${t}`.toLowerCase());if(s)return s;throw new Error(`invalid symbol: ${t}`)}function maybeSymbolChannel(t){if(null==t||isSymbolObject(t))return[void 0,t];if("string"==typeof t){const s=symbols.get(`${t}`.toLowerCase());if(s)return[void 0,s]}return[t,void 0]}function basic({filter:t,sort:s,reverse:e,transform:B,initializer:i,...F}={},Q){if(void 0===B&&(null!=t&&(B=filterTransform(t)),null==s||isDomainSort(s)||(B=composeTransform(B,sortTransform(s))),e&&(B=composeTransform(B,reverseTransform))),null!=Q&&null!=i)throw new Error("transforms cannot be applied after initializers");return{...F,...(null===s||isDomainSort(s))&&{sort:s},transform:composeTransform(B,Q)}}function initializer({filter:t,sort:s,reverse:e,initializer:B,...i}={},F){return void 0===B&&(null!=t&&(B=filterTransform(t)),null==s||isDomainSort(s)||(B=composeInitializer(B,sortTransform(s))),e&&(B=composeInitializer(B,reverseTransform))),{...i,...(null===s||isDomainSort(s))&&{sort:s},initializer:composeInitializer(B,F)}}function composeTransform(t,s){return null==t?null===s?void 0:s:null==s?null===t?void 0:t:function(e,B,i){return({data:e,facets:B}=t.call(this,e,B,i)),s.call(this,dataify(e),B,i)}}function composeInitializer(t,s){return null==t?null===s?void 0:s:null==s?null===t?void 0:t:function(e,B,i,...F){let Q,l,U,a,g,I;return({data:l=e,facets:U=B,channels:Q}=t.call(this,e,B,i,...F)),({data:g=l,facets:I=U,channels:a}=s.call(this,l,U,{...i,...Q},...F)),{data:g,facets:I,channels:{...Q,...a}}}}function apply(t,s){return(null!=t.initializer?initializer:basic)(t,s)}function filterTransform(t){return(s,e)=>{const B=valueof(s,t);return{data:s,facets:e.map(t=>t.filter(t=>B[t]))}}}function reverseTransform(t,s){return{data:t,facets:s.map(t=>t.slice().reverse())}}function sort$1(t,{sort:s,...e}={}){return{...(isOptions(t)&&void 0!==t.channel?initializer:apply)(e,sortTransform(t)),sort:isDomainSort(s)?s:null}}function sortTransform(t){return("function"==typeof t&&1!==t.length?sortData:sortValue)(t)}function sortData(t){return(s,e)=>{const B=isArray(s)?(e,B)=>t(s[e],s[B]):(e,B)=>t(s.get(e),s.get(B));return{data:s,facets:e.map(t=>t.slice().sort(B))}}}function sortValue(t){let s,e;({channel:s,value:t,order:e}={...maybeValue(t)});const B=s?.startsWith("-");if(B&&(s=s.slice(1)),void 0===e&&(e=B?descendingDefined:ascendingDefined),"function"!=typeof e)switch(`${e}`.toLowerCase()){case"ascending":e=ascendingDefined;break;case"descending":e=descendingDefined;break;default:throw new Error(`invalid order: ${e}`)}return(B,i,F)=>{let Q;if(void 0===s)Q=valueof(B,t);else{if(void 0===F)throw new Error("channel sort requires an initializer");if(Q=F[s],!Q)return{};Q=Q.value}const l=(t,s)=>e(Q[t],Q[s]);return{data:B,facets:i.map(t=>t.slice().sort(l))}}}function hasOutput(t,...s){for(const{name:e}of t)if(s.includes(e))return!0;return!1}function maybeOutputs(t,s,e=maybeOutput){const B=Object.entries(t);return null!=s.title&&void 0===t.title&&B.push(["title",reduceTitle]),null!=s.href&&void 0===t.href&&B.push(["href",reduceFirst]),B.filter(([,t])=>void 0!==t).map(([t,B])=>null===B?nullOutput(t):e(t,B,s))}function maybeOutput(t,s,e,B=maybeEvaluator){let i;isObject(s)&&"reduce"in s&&(i=s.scale,s=s.reduce);const F=B(t,s,e),[Q,l]=column(F.label);let U;return{name:t,output:void 0===i?Q:{value:Q,scale:i},initialize(t){F.initialize(t),U=l([])},scope(t,s){F.scope(t,s)},reduce(t,s){U.push(F.reduce(t,s))}}}function nullOutput(t){return{name:t,initialize(){},scope(){},reduce(){}}}function maybeEvaluator(t,s,e,B=maybeReduce){const i=maybeInput(t,e),F=B(s,i);let Q,l;return{label:labelof(F===reduceCount?null:i,F.label),initialize(t){Q=void 0===i?t:valueof(t,i),"data"===F.scope&&(l=F.reduceIndex(range(t),Q))},scope(t,s){F.scope===t&&(l=F.reduceIndex(s,Q))},reduce:(t,s)=>null==F.scope?F.reduceIndex(t,Q,s):F.reduceIndex(t,Q,l,s)}}function maybeGroup(t,s){return s?group(t,t=>s[t]):[[,t]]}function maybeReduce(t,s,e=invalidReduce){if(null==t)return e(t);if("function"==typeof t.reduceIndex)return t;if("function"==typeof t.reduce&&isObject(t))return reduceReduce(t);if("function"==typeof t)return reduceFunction(t);if(/^p\d{2}$/i.test(t))return reduceAccessor(percentile(t));switch(`${t}`.toLowerCase()){case"first":return reduceFirst;case"last":return reduceLast;case"identity":return reduceIdentity;case"count":return reduceCount;case"distinct":return reduceDistinct;case"sum":return null==s?reduceCount:reduceSum;case"proportion":return reduceProportion(s,"data");case"proportion-facet":return reduceProportion(s,"facet");case"deviation":return reduceAccessor(deviation);case"min":return reduceAccessor(min$1);case"min-index":return reduceAccessor(minIndex);case"max":return reduceAccessor(max$1);case"max-index":return reduceAccessor(maxIndex);case"mean":return reduceMaybeTemporalAccessor(mean);case"median":return reduceMaybeTemporalAccessor(median);case"variance":return reduceAccessor(variance);case"mode":return reduceAccessor(mode)}return e(t)}function invalidReduce(t){throw new Error(`invalid reduce: ${t}`)}function maybeSubgroup(t,s){for(const e in s){const B=s[e];if(void 0!==B&&!t.some(t=>t.name===e))return B}}function maybeSort(t,s,e){if(s){const e=s.output.transform(),B=(t,s)=>ascendingDefined(e[t],e[s]);t.forEach(t=>t.sort(B))}e&&t.forEach(t=>t.reverse())}function reduceReduce(t){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...t,reduceIndex:t.reduce.bind(t)}}function reduceFunction(t){return{reduceIndex:(s,e,B)=>t(take(e,s),B)}}function reduceAccessor(t){return{reduceIndex:(s,e)=>t(s,t=>e[t])}}function reduceMaybeTemporalAccessor(t){return{reduceIndex(s,e){const B=t(s,t=>e[t]);return isTemporal(e)?new Date(B):B}}}const reduceIdentity={reduceIndex:(t,s)=>take(s,t)},reduceFirst={reduceIndex:(t,s)=>s[t[0]]},reduceTitle={reduceIndex(t,s){const e=sort$2(rollup(t,t=>t.length,t=>s[t]),second),B=e.slice(-5).reverse();if(B.length<e.length){const t=e.slice(0,-4);B[4]=[`â¦ ${t.length.toLocaleString("en-US")} more`,sum(t,second)]}return B.map(([t,s])=>`${t} (${s.toLocaleString("en-US")})`).join("\n")}},reduceLast={reduceIndex:(t,s)=>s[t[t.length-1]]},reduceCount={label:"Frequency",reduceIndex:t=>t.length},reduceDistinct={label:"Distinct",reduceIndex(t,s){const e=new InternSet;for(const B of t)e.add(s[B]);return e.size}},reduceSum=reduceAccessor(sum);function reduceProportion(t,s){return null==t?{scope:s,label:"Frequency",reduceIndex:(t,s,e=1)=>t.length/e}:{scope:s,reduceIndex:(t,s,e=1)=>sum(t,t=>s[t])/e}}const reduceZ={reduceIndex:(t,s,{z:e})=>e};function createChannel(t,{scale:s,type:e,value:B,filter:i,hint:F,label:Q=labelof(B)},l){return void 0===F&&"function"==typeof B?.transform&&(F=B.hint),inferChannelScale(l,{scale:s,type:e,value:valueof(t,B),label:Q,filter:i,hint:F})}function createChannels(t,s){return Object.fromEntries(Object.entries(t).map(([t,e])=>[t,createChannel(s,e,t)]))}function valueObject(t,s){const e=Object.fromEntries(Object.entries(t).map(([t,{scale:e,value:B}])=>{const i=null==e?null:s[e];return[t,null==i?B:map(B,i)]}));return e.channels=t,e}function inferChannelScale(t,s){const{scale:e,value:B}=s;if(!0===e||"auto"===e)switch(t){case"fill":case"stroke":case"color":s.scale=!0!==e&&isEvery(B,isColor)?null:"color",s.defaultScale="color";break;case"fillOpacity":case"strokeOpacity":case"opacity":s.scale=!0!==e&&isEvery(B,isOpacity)?null:"opacity",s.defaultScale="opacity";break;case"symbol":!0!==e&&isEvery(B,isSymbol)?(s.scale=null,s.value=map(B,maybeSymbol)):s.scale="symbol",s.defaultScale="symbol";break;default:s.scale=registry.has(t)?t:null}else if(!1===e)s.scale=null;else if(null!=e&&!registry.has(e))throw new Error(`unknown scale: ${e}`);return s}function channelDomain(t,s,e,B,i){const{order:F,reverse:Q,reduce:l=!0,limit:U}=i;for(const a in i){if(!registry.has(a))continue;let{value:g,order:I=F,reverse:c=Q,reduce:n=l,limit:r=U}=maybeValue(i[a]);const o=g?.startsWith("-");if(o&&(g=g.slice(1)),I=void 0===I?o!==("width"===g||"height"===g)?descendingGroup:ascendingGroup:maybeOrder$1(I),null==n||!1===n)continue;const d="fx"===a||"fy"===a?reindexFacetChannel(s,B[a]):findScaleChannel(e,a);if(!d)throw new Error(`missing channel for scale: ${a}`);const C=d.value,[b=0,u=1/0]=isIterable(r)?r:r<0?[r]:[0,r];if(null==g)d.domain=()=>{let t=Array.from(new InternSet(C));return c&&(t=t.reverse()),0===b&&u===1/0||(t=t.slice(b,u)),t};else{const s="data"===g?t:"height"===g?difference(e,"y1","y2"):"width"===g?difference(e,"x1","x2"):values(e,g,"y"===g?"y2":"x"===g?"x2":void 0),B=maybeReduce(!0===n?"max":n,s);d.domain=()=>{let t=rollups(range(C),t=>B.reduceIndex(t,s),t=>C[t]);return I&&t.sort(I),c&&t.reverse(),0===b&&u===1/0||(t=t.slice(b,u)),t.map(first)}}}}function findScaleChannel(t,s){for(const e in t){const B=t[e];if(B.scale===s)return B}}function reindexFacetChannel(t,s){const e=t.original;if(e===t)return s;const B=s.value,i=s.value=[];for(let s=0;s<e.length;++s){const F=B[e[s][0]];for(const e of t[s])i[e]=F}return s}function difference(t,s,e){const B=values(t,s);return map(values(t,e),(t,s)=>Math.abs(t-B[s]),Float64Array)}function values(t,s,e){let B=t[s];if(B||void 0===e||(B=t[e]),B)return B.value;throw new Error(`missing channel: ${s}`)}function maybeOrder$1(t){if(null==t||"function"==typeof t)return t;switch(`${t}`.toLowerCase()){case"ascending":return ascendingGroup;case"descending":return descendingGroup}throw new Error(`invalid order: ${t}`)}function ascendingGroup([t,s],[e,B]){return ascendingDefined(s,B)||ascendingDefined(t,e)}function descendingGroup([t,s],[e,B]){return descendingDefined(s,B)||ascendingDefined(t,e)}function getSource(t,s){let e=t[s];if(e){for(;e.source;)e=e.source;return null===e.source?null:e}}const categoricalSchemes=new Map([["accent",schemeAccent],["category10",schemeCategory10],["dark2",schemeDark2],["observable10",schemeObservable10],["paired",schemePaired],["pastel1",schemePastel1],["pastel2",schemePastel2],["set1",schemeSet1],["set2",schemeSet2],["set3",schemeSet3],["tableau10",schemeTableau10]]);function isCategoricalScheme(t){return null!=t&&categoricalSchemes.has(`${t}`.toLowerCase())}const ordinalSchemes=new Map([...categoricalSchemes,["brbg",scheme11(scheme$q,interpolateBrBG)],["prgn",scheme11(scheme$p,interpolatePRGn)],["piyg",scheme11(scheme$o,interpolatePiYG)],["puor",scheme11(scheme$n,interpolatePuOr)],["rdbu",scheme11(scheme$m,interpolateRdBu)],["rdgy",scheme11(scheme$l,interpolateRdGy)],["rdylbu",scheme11(scheme$k,interpolateRdYlBu)],["rdylgn",scheme11(scheme$j,interpolateRdYlGn)],["spectral",scheme11(scheme$i,interpolateSpectral)],["burd",scheme11r(scheme$m,interpolateRdBu)],["buylrd",scheme11r(scheme$k,interpolateRdYlBu)],["blues",scheme9(scheme$5,interpolateBlues)],["greens",scheme9(scheme$4,interpolateGreens)],["greys",scheme9(scheme$3,interpolateGreys)],["oranges",scheme9(scheme,interpolateOranges)],["purples",scheme9(scheme$2,interpolatePurples)],["reds",scheme9(scheme$1,interpolateReds)],["turbo",schemei(interpolateTurbo)],["viridis",schemei(interpolateViridis)],["magma",schemei(magma)],["inferno",schemei(inferno)],["plasma",schemei(plasma)],["cividis",schemei(interpolateCividis)],["cubehelix",schemei(interpolateCubehelixDefault)],["warm",schemei(warm)],["cool",schemei(cool)],["bugn",scheme9(scheme$h,interpolateBuGn)],["bupu",scheme9(scheme$g,interpolateBuPu)],["gnbu",scheme9(scheme$f,interpolateGnBu)],["orrd",scheme9(scheme$e,interpolateOrRd)],["pubu",scheme9(scheme$c,interpolatePuBu)],["pubugn",scheme9(scheme$d,interpolatePuBuGn)],["purd",scheme9(scheme$b,interpolatePuRd)],["rdpu",scheme9(scheme$a,interpolateRdPu)],["ylgn",scheme9(scheme$8,interpolateYlGn)],["ylgnbu",scheme9(scheme$9,interpolateYlGnBu)],["ylorbr",scheme9(scheme$7,interpolateYlOrBr)],["ylorrd",scheme9(scheme$6,interpolateYlOrRd)],["rainbow",schemeicyclical(interpolateRainbow)],["sinebow",schemeicyclical(interpolateSinebow)]]);function scheme9(t,s){return({length:e})=>1===e?[t[3][1]]:2===e?[t[3][1],t[3][2]]:(e=Math.max(3,Math.floor(e)))>9?quantize(s,e):t[e]}function scheme11(t,s){return({length:e})=>2===e?[t[3][0],t[3][2]]:(e=Math.max(3,Math.floor(e)))>11?quantize(s,e):t[e]}function scheme11r(t,s){return({length:e})=>2===e?[t[3][2],t[3][0]]:(e=Math.max(3,Math.floor(e)))>11?quantize(t=>s(1-t),e):t[e].slice().reverse()}function schemei(t){return({length:s})=>quantize(t,Math.max(2,Math.floor(s)))}function schemeicyclical(t){return({length:s})=>quantize(t,Math.floor(s)+1).slice(0,-1)}function ordinalScheme(t){const s=`${t}`.toLowerCase();if(!ordinalSchemes.has(s))throw new Error(`unknown ordinal scheme: ${s}`);return ordinalSchemes.get(s)}function ordinalRange(t,s){const e=ordinalScheme(t),B="function"==typeof e?e({length:s}):e;return B.length!==s?B.slice(0,s):B}function maybeBooleanRange(t,s="greys"){const e=new Set,[B,i]=ordinalRange(s,2);for(const s of t)if(null!=s)if(!0===s)e.add(i);else{if(!1!==s)return;e.add(B)}return[...e]}const quantitativeSchemes=new Map([["brbg",interpolateBrBG],["prgn",interpolatePRGn],["piyg",interpolatePiYG],["puor",interpolatePuOr],["rdbu",interpolateRdBu],["rdgy",interpolateRdGy],["rdylbu",interpolateRdYlBu],["rdylgn",interpolateRdYlGn],["spectral",interpolateSpectral],["burd",t=>interpolateRdBu(1-t)],["buylrd",t=>interpolateRdYlBu(1-t)],["blues",interpolateBlues],["greens",interpolateGreens],["greys",interpolateGreys],["purples",interpolatePurples],["reds",interpolateReds],["oranges",interpolateOranges],["turbo",interpolateTurbo],["viridis",interpolateViridis],["magma",magma],["inferno",inferno],["plasma",plasma],["cividis",interpolateCividis],["cubehelix",interpolateCubehelixDefault],["warm",warm],["cool",cool],["bugn",interpolateBuGn],["bupu",interpolateBuPu],["gnbu",interpolateGnBu],["orrd",interpolateOrRd],["pubugn",interpolatePuBuGn],["pubu",interpolatePuBu],["purd",interpolatePuRd],["rdpu",interpolateRdPu],["ylgnbu",interpolateYlGnBu],["ylgn",interpolateYlGn],["ylorbr",interpolateYlOrBr],["ylorrd",interpolateYlOrRd],["rainbow",interpolateRainbow],["sinebow",interpolateSinebow]]);function quantitativeScheme(t){const s=`${t}`.toLowerCase();if(!quantitativeSchemes.has(s))throw new Error(`unknown quantitative scheme: ${s}`);return quantitativeSchemes.get(s)}const divergingSchemes=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function isDivergingScheme(t){return null!=t&&divergingSchemes.has(`${t}`.toLowerCase())}const flip=t=>s=>t(1-s),unit=[0,1],interpolators=new Map([["number",interpolateNumber],["rgb",interpolateRgb],["hsl",interpolateHsl],["hcl",interpolateHcl],["lab",lab]]);function maybeInterpolator(t){const s=`${t}`.toLowerCase();if(!interpolators.has(s))throw new Error(`unknown interpolator: ${s}`);return interpolators.get(s)}function createScaleQ(t,s,e,{type:B,nice:i,clamp:F,zero:Q,domain:l=inferAutoDomain(t,e),unknown:U,round:a,scheme:g,interval:I,range:c=(registry.get(t)===radius?inferRadialRange(e,l):registry.get(t)===length?inferLengthRange(e,l):registry.get(t)===opacity?unit:void 0),interpolate:n=(registry.get(t)===color?null==g&&void 0!==c?interpolateRgb:quantitativeScheme(void 0!==g?g:"cyclical"===B?"rainbow":"turbo"):a?interpolateRound:interpolateNumber),reverse:r}){if(l=maybeRepeat(l),I=maybeRangeInterval(I,B),"cyclical"!==B&&"sequential"!==B||(B="linear"),"function"!=typeof n&&(n=maybeInterpolator(n)),r=!!r,void 0!==c){if(l.length!==(c=maybeRepeat(c)).length){if(1===n.length)throw new Error("invalid piecewise interpolator");n=piecewise(n,c),c=void 0}}if(1===n.length?(r&&(n=flip(n),r=!1),void 0===c&&(c=Float64Array.from(l,(t,s)=>s/(l.length-1)),2===c.length&&(c=unit)),s.interpolate((c===unit?constant:interpolatePiecewise)(n))):s.interpolate(n),Q){const[t,s]=extent$1(l);if(t>0||s<0){(orderof(l=slice(l))||1)===Math.sign(t)?l[0]=0:l[l.length-1]=0}}return r&&(l=reverse(l)),s.domain(l).unknown(U),i&&(s.nice(maybeNice(i,B)),l=s.domain()),void 0!==c&&s.range(c),F&&s.clamp(F),{type:B,domain:l,range:c,scale:s,interpolate:n,interval:I}}function maybeRepeat(t){return(t=arrayify(t)).length>=2?t:[t[0],t[0]]}function maybeNice(t,s){return!0===t?void 0:"number"==typeof t?t:maybeNiceInterval(t,s)}function createScaleLinear(t,s,e){return createScaleQ(t,linear(),s,e)}function createScaleSqrt(t,s,e){return createScalePow(t,s,{...e,exponent:.5})}function createScalePow(t,s,{exponent:e=1,...B}){return createScaleQ(t,pow().exponent(e),s,{...B,type:"pow"})}function createScaleLog(t,s,{base:e=10,domain:B=inferLogDomain(s),...i}){return createScaleQ(t,log().base(e),s,{...i,domain:B})}function createScaleSymlog(t,s,{constant:e=1,...B}){return createScaleQ(t,symlog().constant(e),s,B)}function createScaleQuantile(t,s,{range:e,quantiles:B=(void 0===e?5:(e=[...e]).length),n:i=B,scheme:F="rdylbu",domain:Q=inferQuantileDomain(s),unknown:l,interpolate:U,reverse:a}){return void 0===e&&(e=void 0!==U?quantize(U,i):registry.get(t)===color?ordinalRange(F,i):void 0),Q.length>0&&(Q=quantile(Q,void 0===e?{length:i}:e).quantiles()),createScaleThreshold(t,s,{domain:Q,range:e,reverse:a,unknown:l})}function createScaleQuantize(t,s,{range:e,n:B=(void 0===e?5:(e=[...e]).length),scheme:i="rdylbu",domain:F=inferAutoDomain(t,s),unknown:Q,interpolate:l,reverse:U}){const[a,g]=extent$1(F);let I;return void 0===e?(I=ticks(a,g,B),I[0]<=a&&I.splice(0,1),I[I.length-1]>=g&&I.pop(),B=I.length+1,e=void 0!==l?quantize(l,B):registry.get(t)===color?ordinalRange(i,B):void 0):(I=quantize(interpolateNumber(a,g),B+1).slice(1,-1),a instanceof Date&&(I=I.map(t=>new Date(t)))),orderof(arrayify(F))<0&&I.reverse(),createScaleThreshold(t,s,{domain:I,range:e,reverse:U,unknown:Q})}function createScaleThreshold(t,s,{domain:e=[0],unknown:B,scheme:i="rdylbu",interpolate:F,range:Q=(void 0!==F?quantize(F,e.length+1):registry.get(t)===color?ordinalRange(i,e.length+1):void 0),reverse:l}){const U=orderof(e=arrayify(e));if(!isNaN(U)&&!isOrdered(e,U))throw new Error(`the ${t} scale has a non-monotonic domain`);return l&&(Q=reverse(Q)),{type:"threshold",scale:threshold(U<0?reverse(e):e,void 0===Q?[]:Q).unknown(B),domain:e,range:Q}}function isOrdered(t,s){for(let e=1,B=t.length,i=t[0];e<B;++e){const B=descending$1(i,i=t[e]);if(0!==B&&B!==s)return!1}return!0}function createScaleIdentity(t){return{type:"identity",scale:hasNumericRange(registry.get(t))?identity$3():t=>t}}function inferDomain$1(t,s=finite){return t.length?[min$1(t,({value:t})=>void 0===t?t:min$1(t,s)),max$1(t,({value:t})=>void 0===t?t:max$1(t,s))]:[0,1]}function inferAutoDomain(t,s){const e=registry.get(t);return(e===radius||e===opacity||e===length?inferZeroDomain:inferDomain$1)(s)}function inferZeroDomain(t){return[0,t.length?max$1(t,({value:t})=>void 0===t?t:max$1(t,finite)):1]}function inferRadialRange(t,s){const e=t.find(({radius:t})=>void 0!==t);if(void 0!==e)return[0,e.radius];const B=quantile$1(t,.5,({value:t})=>void 0===t?NaN:quantile$1(t,.25,positive)),i=s.map(t=>3*Math.sqrt(t/B)),F=30/max$1(i);return F<1?i.map(t=>t*F):i}function inferLengthRange(t,s){const e=median(t,({value:t})=>void 0===t?NaN:median(t,Math.abs)),B=s.map(t=>12*t/e),i=60/max$1(B);return i<1?B.map(t=>t*i):B}function inferLogDomain(t){for(const{value:s}of t)if(void 0!==s)for(let e of s){if(e>0)return inferDomain$1(t,positive);if(e<0)return inferDomain$1(t,negative)}return[1,10]}function inferQuantileDomain(t){const s=[];for(const{value:e}of t)if(void 0!==e)for(const t of e)s.push(t);return s}function interpolatePiecewise(t){return(s,e)=>B=>t(s+B*(e-s))}let lastMessage,warnings=0;function consumeWarnings(){const t=warnings;return warnings=0,lastMessage=void 0,t}function warn(t){t!==lastMessage&&(lastMessage=t,console.warn(t),++warnings)}function createScaleD(t,s,e,B,{type:i,nice:F,clamp:Q,domain:l=inferDomain$1(B),unknown:U,pivot:a=0,scheme:g,range:I,symmetric:c=!0,interpolate:n=(registry.get(t)===color?null==g&&void 0!==I?interpolateRgb:quantitativeScheme(void 0!==g?g:"rdbu"):interpolateNumber),reverse:r}){a=+a,l=arrayify(l);let[o,d]=l;if(l.length>2&&warn(`Warning: the diverging ${t} scale domain contains extra elements.`),descending$1(o,d)<0&&([o,d]=[d,o],r=!r),o=Math.min(o,a),d=Math.max(d,a),"function"!=typeof n&&(n=maybeInterpolator(n)),void 0!==I&&(n=1===n.length?interpolatePiecewise(n)(...I):piecewise(n,I)),r&&(n=flip(n)),c){const t=e.apply(a),s=t-e.apply(o),B=e.apply(d)-t;s<B?o=e.invert(t-B):s>B&&(d=e.invert(t+s))}return s.domain([o,a,d]).unknown(U).interpolator(n),Q&&s.clamp(Q),F&&s.nice(F),{type:i,domain:[o,d],pivot:a,interpolate:n,scale:s}}function createScaleDiverging(t,s,e){return createScaleD(t,diverging(),transformIdentity,s,e)}function createScaleDivergingSqrt(t,s,e){return createScaleDivergingPow(t,s,{...e,exponent:.5})}function createScaleDivergingPow(t,s,{exponent:e=1,...B}){return createScaleD(t,divergingPow().exponent(e=+e),transformPow(e),s,{...B,type:"diverging-pow"})}function createScaleDivergingLog(t,s,{base:e=10,pivot:B=1,domain:i=inferDomain$1(s,B<0?negative:positive),...F}){return createScaleD(t,divergingLog().base(e=+e),transformLog,s,{domain:i,pivot:B,...F})}function createScaleDivergingSymlog(t,s,{constant:e=1,...B}){return createScaleD(t,divergingSymlog().constant(e=+e),transformSymlog(e),s,B)}const transformIdentity={apply:t=>t,invert:t=>t},transformLog={apply:Math.log,invert:Math.exp},transformSqrt={apply:t=>Math.sign(t)*Math.sqrt(Math.abs(t)),invert:t=>Math.sign(t)*(t*t)};function transformPow(t){return.5===t?transformSqrt:{apply:s=>Math.sign(s)*Math.pow(Math.abs(s),t),invert:s=>Math.sign(s)*Math.pow(Math.abs(s),1/t)}}function transformSymlog(t){return{apply:s=>Math.sign(s)*Math.log1p(Math.abs(s/t)),invert:s=>Math.sign(s)*Math.expm1(Math.abs(s))*t}}function createScaleT(t,s,e,B){return createScaleQ(t,s,e,B)}function createScaleTime(t,s,e){return createScaleT(t,time(),s,e)}function createScaleUtc(t,s,e){return createScaleT(t,utcTime(),s,e)}const ordinalImplicit=Symbol("ordinal");function createScaleO(t,s,e,{type:B,interval:i,domain:F,range:Q,reverse:l,hint:U}){return i=maybeRangeInterval(i,B),void 0===F&&(F=inferDomain(e,i,t)),"categorical"!==B&&B!==ordinalImplicit||(B="ordinal"),l&&(F=reverse(F)),F=s.domain(F).domain(),void 0!==Q&&("function"==typeof Q&&(Q=Q(F)),s.range(Q)),{type:B,domain:F,range:Q,scale:s,hint:U,interval:i}}function createScaleOrdinal(t,s,{type:e,interval:B,domain:i,range:F,scheme:Q,unknown:l,...U}){let a;if(B=maybeRangeInterval(B,e),void 0===i&&(i=inferDomain(s,B,t)),registry.get(t)===symbol)a=inferSymbolHint(s),F=void 0===F?inferSymbolRange(a):map(F,maybeSymbol);else if(registry.get(t)===color&&(void 0!==F||"ordinal"!==e&&e!==ordinalImplicit||void 0!==(F=maybeBooleanRange(i,Q))&&(Q=void 0),void 0===Q&&void 0===F&&(Q="ordinal"===e?"turbo":"observable10"),void 0!==Q))if(void 0!==F){const t=quantitativeScheme(Q),s=F[0],e=F[1]-F[0];F=({length:B})=>quantize(B=>t(s+e*B),B)}else F=ordinalScheme(Q);if(l===implicit)throw new Error(`implicit unknown on ${t} scale is not supported`);return createScaleO(t,ordinal().unknown(l),s,{...U,type:e,domain:i,range:F,hint:a})}function createScalePoint(t,s,{align:e=.5,padding:B=.5,...i}){return maybeRound(point$5().align(e).padding(B),s,i,t)}function createScaleBand(t,s,{align:e=.5,padding:B=.1,paddingInner:i=B,paddingOuter:F=("fx"===t||"fy"===t?0:B),...Q}){return maybeRound(band().align(e).paddingInner(i).paddingOuter(F),s,Q,t)}function maybeRound(t,s,e,B){let{round:i}=e;return void 0!==i&&t.round(i=!!i),(t=createScaleO(B,t,s,e)).round=i,t}function inferDomain(t,s,e){const B=new InternSet;for(const{value:s,domain:e}of t){if(void 0!==e)return e();if(void 0!==s)for(const t of s)B.add(t)}if(void 0!==s){const[t,e]=extent$1(B).map(s.floor,s);return s.range(t,s.offset(e))}if(B.size>1e4&&registry.get(e)===position)throw new Error(`implicit ordinal domain of ${e} scale has more than 10,000 values`);return sort$2(B,ascendingDefined)}function inferHint(t,s){let e;for(const{hint:B}of t){const t=B?.[s];if(void 0!==t)if(void 0===e)e=t;else if(e!==t)return}return e}function inferSymbolHint(t){return{fill:inferHint(t,"fill"),stroke:inferHint(t,"stroke")}}function inferSymbolRange(t){return isNoneish(t.fill)?symbolsStroke:symbolsFill}function createScales(t,{label:s,inset:e=0,insetTop:B=e,insetRight:i=e,insetBottom:F=e,insetLeft:Q=e,round:l,nice:U,clamp:a,zero:g,align:I,padding:c,projection:n,facet:{label:r=s}={},...o}={}){const d={};for(const[e,C]of t){const t=o[e],b=createScale(e,C,{round:registry.get(e)===position?l:void 0,nice:U,clamp:a,zero:g,align:I,padding:c,projection:n,...t});if(b){let{label:l=("fx"===e||"fy"===e?r:s),percent:U,transform:a,inset:g,insetTop:I=(void 0!==g?g:"y"===e?B:0),insetRight:c=(void 0!==g?g:"x"===e?i:0),insetBottom:n=(void 0!==g?g:"y"===e?F:0),insetLeft:o=(void 0!==g?g:"x"===e?Q:0)}=t||{};if(null==a)a=void 0;else if("function"!=typeof a)throw new Error("invalid scale transform; not a function");b.percent=!!U,b.label=void 0===l?inferScaleLabel(C,b):l,b.transform=a,"x"===e||"fx"===e?(b.insetLeft=+o,b.insetRight=+c):"y"!==e&&"fy"!==e||(b.insetTop=+I,b.insetBottom=+n),d[e]=b}}return d}function createScaleFunctions(t){const s={},e={scales:s};for(const[B,i]of Object.entries(t)){const{scale:t,type:F,interval:Q,label:l}=i;s[B]=exposeScale(i),e[B]=t,t.type=F,null!=Q&&(t.interval=Q),null!=l&&(t.label=l)}return e}function autoScaleRange(t,s){const{x:e,y:B,fx:i,fy:F}=t,Q=i||F?outerDimensions(s):s;i&&autoScaleRangeX(i,Q),F&&autoScaleRangeY(F,Q);const l=i||F?innerDimensions(t,s):s;e&&autoScaleRangeX(e,l),B&&autoScaleRangeY(B,l)}function inferScaleLabel(t=[],s){let e;for(const{label:s}of t)if(void 0!==s)if(void 0===e)e=s;else if(e!==s)return;if(void 0!==e)return!isOrdinalScale(s)&&s.percent&&(e=`${e} (%)`),{inferred:!0,toString:()=>e}}function inferScaleOrder(t){return Math.sign(orderof(t.domain()))*Math.sign(orderof(t.range()))}function outerDimensions(t){const{marginTop:s,marginRight:e,marginBottom:B,marginLeft:i,width:F,height:Q,facet:{marginTop:l,marginRight:U,marginBottom:a,marginLeft:g}}=t;return{marginTop:Math.max(s,l),marginRight:Math.max(e,U),marginBottom:Math.max(B,a),marginLeft:Math.max(i,g),width:F,height:Q}}function innerDimensions({fx:t,fy:s},e){const{marginTop:B,marginRight:i,marginBottom:F,marginLeft:Q,width:l,height:U}=outerDimensions(e);return{marginTop:B,marginRight:i,marginBottom:F,marginLeft:Q,width:t?t.scale.bandwidth()+Q+i:l,height:s?s.scale.bandwidth()+B+F:U,facet:{width:l,height:U}}}function autoScaleRangeX(t,s){if(void 0===t.range){const{insetLeft:e,insetRight:B}=t,{width:i,marginLeft:F=0,marginRight:Q=0}=s,l=F+e,U=i-Q-B;t.range=[l,Math.max(l,U)],isOrdinalScale(t)||(t.range=piecewiseRange(t)),t.scale.range(t.range)}autoScaleRound(t)}function autoScaleRangeY(t,s){if(void 0===t.range){const{insetTop:e,insetBottom:B}=t,{height:i,marginTop:F=0,marginBottom:Q=0}=s,l=F+e,U=i-Q-B;t.range=[Math.max(l,U),l],isOrdinalScale(t)?t.range.reverse():t.range=piecewiseRange(t),t.scale.range(t.range)}autoScaleRound(t)}function autoScaleRound(t){void 0===t.round&&isBandScale(t)&&roundError(t)<=30&&t.scale.round(!0)}function roundError({scale:t}){const s=t.domain().length,[e,B]=t.range(),i=t.paddingInner?t.paddingInner():1,F=t.paddingOuter?t.paddingOuter():t.padding(),Q=s-i,l=Math.abs(B-e)/Math.max(1,Q+2*F);return(l-Math.floor(l))*Q}function piecewiseRange(t){const s=t.scale.domain().length+isThresholdScale(t);if(!(s>2))return t.range;const[e,B]=t.range;return Array.from({length:s},(t,i)=>e+i/(s-1)*(B-e))}function createScale(t,s=[],e={}){const B=inferScaleType(t,s,e);if(void 0===e.type&&void 0===e.domain&&void 0===e.range&&null==e.interval&&"fx"!==t&&"fy"!==t&&isOrdinalScale({type:B})){const e=s.map(({value:t})=>t).filter(t=>void 0!==t);e.some(isTemporal)?warn(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${formatScaleType(B)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${formatScaleType(B)}".`):e.some(isTemporalString)?warn(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${formatScaleType(B)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${formatScaleType(B)}".`):e.some(isNumericString)&&warn(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${formatScaleType(B)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${formatScaleType(B)}".`)}switch(e.type=B,B){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":e=coerceType(s,e,coerceNumbers);break;case"identity":switch(registry.get(t)){case position:e=coerceType(s,e,coerceNumbers);break;case symbol:e=coerceType(s,e,coerceSymbols)}break;case"utc":case"time":e=coerceType(s,e,coerceDates)}switch(B){case"diverging":return createScaleDiverging(t,s,e);case"diverging-sqrt":return createScaleDivergingSqrt(t,s,e);case"diverging-pow":return createScaleDivergingPow(t,s,e);case"diverging-log":return createScaleDivergingLog(t,s,e);case"diverging-symlog":return createScaleDivergingSymlog(t,s,e);case"categorical":case"ordinal":case ordinalImplicit:return createScaleOrdinal(t,s,e);case"cyclical":case"sequential":case"linear":return createScaleLinear(t,s,e);case"sqrt":return createScaleSqrt(t,s,e);case"threshold":return createScaleThreshold(t,s,e);case"quantile":return createScaleQuantile(t,s,e);case"quantize":return createScaleQuantize(t,s,e);case"pow":return createScalePow(t,s,e);case"log":return createScaleLog(t,s,e);case"symlog":return createScaleSymlog(t,s,e);case"utc":return createScaleUtc(t,s,e);case"time":return createScaleTime(t,s,e);case"point":return createScalePoint(t,s,e);case"band":return createScaleBand(t,s,e);case"identity":return createScaleIdentity(t);case void 0:return;default:throw new Error(`unknown scale type: ${B}`)}}function formatScaleType(t){return"symbol"==typeof t?t.description:t}function maybeScaleType(t){return"string"==typeof t?`${t}`.toLowerCase():t}const typeProjection={toString:()=>"projection"};function inferScaleType(t,s,{type:e,domain:B,range:i,scheme:F,pivot:Q,projection:l}){if(e=maybeScaleType(e),"fx"===t||"fy"===t)return"band";"x"!==t&&"y"!==t||null==l||(e=typeProjection);for(const t of s){const s=maybeScaleType(t.type);if(void 0!==s)if(void 0===e)e=s;else if(e!==s)throw new Error(`scale incompatible with channel: ${e} !== ${s}`)}if(e===typeProjection)return;if(void 0!==e)return e;if(void 0===B&&!s.some(({value:t})=>void 0!==t))return;const U=registry.get(t);if(U===radius)return"sqrt";if(U===opacity||U===length)return"linear";if(U===symbol)return"ordinal";const a=(B??i)?.length;if(a<2||a>2)return asOrdinalType(U);if(void 0!==B){if(isOrdinal(B))return asOrdinalType(U);if(isTemporal(B))return"utc"}else{const t=s.map(({value:t})=>t).filter(t=>void 0!==t);if(t.some(isOrdinal))return asOrdinalType(U);if(t.some(isTemporal))return"utc"}if(U===color){if(null!=Q||isDivergingScheme(F))return"diverging";if(isCategoricalScheme(F))return"categorical"}return"linear"}function asOrdinalType(t){switch(t){case position:return"point";case color:return ordinalImplicit;default:return"ordinal"}}function isOrdinalScale({type:t}){return"ordinal"===t||"point"===t||"band"===t||t===ordinalImplicit}function isThresholdScale({type:t}){return"threshold"===t}function isBandScale({type:t}){return"point"===t||"band"===t}function isCollapsed(t){if(void 0===t)return!0;const s=t.domain(),e=t(s[0]);for(let B=1,i=s.length;B<i;++B)if(t(s[B])-e)return!1;return!0}function coerceType(t,{domain:s,...e},B){for(const e of t)void 0!==e.value&&(void 0===s&&(s=e.value?.domain),e.value=B(e.value));return{domain:void 0===s?s:B(s),...e}}function coerceSymbols(t){return map(t,maybeSymbol)}function exposeScales(t){return s=>{if(!registry.has(s=`${s}`))throw new Error(`unknown scale: ${s}`);return t[s]}}function exposeScale({scale:t,type:s,domain:e,range:B,interpolate:i,interval:F,transform:Q,percent:l,pivot:U}){if("identity"===s)return{type:"identity",apply:t=>t,invert:t=>t};const a=t.unknown?t.unknown():void 0;return{type:s,domain:slice(e),...void 0!==B&&{range:slice(B)},...void 0!==Q&&{transform:Q},...l&&{percent:l},...void 0!==a&&{unknown:a},...void 0!==F&&{interval:F},...void 0!==i&&{interpolate:i},...t.clamp&&{clamp:t.clamp()},...void 0!==U&&{pivot:U,symmetric:!1},...t.base&&{base:t.base()},...t.exponent&&{exponent:t.exponent()},...t.constant&&{constant:t.constant()},...t.align&&{align:t.align(),round:t.round()},...t.padding&&(t.paddingInner?{paddingInner:t.paddingInner(),paddingOuter:t.paddingOuter()}:{padding:t.padding()}),...t.bandwidth&&{bandwidth:t.bandwidth(),step:t.step()},apply:s=>t(s),...t.invert&&{invert:s=>t.invert(s)}}}function createFacets(t,s){const{fx:e,fy:B}=createScales(t,s),i=e?.scale.domain(),F=B?.scale.domain();return i&&F?cross(i,F).map(([t,s],e)=>({x:t,y:s,i:e})):i?i.map((t,s)=>({x:t,i:s})):F?F.map((t,s)=>({y:t,i:s})):void 0}function recreateFacets(t,{x:s,y:e}){return s&&=facetIndex(s),e&&=facetIndex(e),t.filter(s&&e?t=>s.has(t.x)&&e.has(t.y):s?t=>s.has(t.x):t=>e.has(t.y)).sort(s&&e?(t,B)=>s.get(t.x)-s.get(B.x)||e.get(t.y)-e.get(B.y):s?(t,e)=>s.get(t.x)-s.get(e.x):(t,s)=>e.get(t.y)-e.get(s.y))}function facetGroups(t,{fx:s,fy:e}){const B=range(t),i=s?.value,F=e?.value;return s&&e?rollup(B,t=>(t.fx=i[t[0]],t.fy=F[t[0]],t),t=>i[t],t=>F[t]):s?rollup(B,t=>(t.fx=i[t[0]],t),t=>i[t]):rollup(B,t=>(t.fy=F[t[0]],t),t=>F[t])}function facetTranslator(t,s,{marginTop:e,marginLeft:B}){const i=t?({x:s})=>t(s)-B:()=>0,F=s?({y:t})=>s(t)-e:()=>0;return function(t){"svg"===this.tagName?(this.setAttribute("x",i(t)),this.setAttribute("y",F(t))):this.setAttribute("transform",`translate(${i(t)},${F(t)})`)}}function facetExclude(t){const s=[],e=new Uint32Array(sum(t,t=>t.length));for(const B of t){let i=0;for(const s of t)B!==s&&(e.set(s,i),i+=s.length);s.push(e.slice(0,i))}return s}const facetAnchors=new Map([["top",facetAnchorTop],["right",facetAnchorRight],["bottom",facetAnchorBottom],["left",facetAnchorLeft],["top-left",and(facetAnchorTop,facetAnchorLeft)],["top-right",and(facetAnchorTop,facetAnchorRight)],["bottom-left",and(facetAnchorBottom,facetAnchorLeft)],["bottom-right",and(facetAnchorBottom,facetAnchorRight)],["top-empty",facetAnchorTopEmpty],["right-empty",facetAnchorRightEmpty],["bottom-empty",facetAnchorBottomEmpty],["left-empty",facetAnchorLeftEmpty],["empty",facetAnchorEmpty]]);function maybeFacetAnchor(t){if(null==t)return null;const s=facetAnchors.get(`${t}`.toLowerCase());if(s)return s;throw new Error(`invalid facet anchor: ${t}`)}const indexCache=new WeakMap;function facetIndex(t){let s=indexCache.get(t);return s||indexCache.set(t,s=new InternMap(map(t,(t,s)=>[t,s]))),s}function facetIndexOf(t,s){return facetIndex(t).get(s)}function facetFind(t,s,e){return s=keyof(s),e=keyof(e),t.find(t=>Object.is(keyof(t.x),s)&&Object.is(keyof(t.y),e))}function facetEmpty(t,s,e){return facetFind(t,s,e)?.empty}function facetAnchorTop(t,{y:s},{y:e}){return!s||0===facetIndexOf(s,e)}function facetAnchorBottom(t,{y:s},{y:e}){return!s||facetIndexOf(s,e)===s.length-1}function facetAnchorLeft(t,{x:s},{x:e}){return!s||0===facetIndexOf(s,e)}function facetAnchorRight(t,{x:s},{x:e}){return!s||facetIndexOf(s,e)===s.length-1}function facetAnchorTopEmpty(t,{y:s},{x:e,y:B,empty:i}){if(i)return!1;if(!s)return;const F=facetIndexOf(s,B);return F>0?facetEmpty(t,e,s[F-1]):void 0}function facetAnchorBottomEmpty(t,{y:s},{x:e,y:B,empty:i}){if(i)return!1;if(!s)return;const F=facetIndexOf(s,B);return F<s.length-1?facetEmpty(t,e,s[F+1]):void 0}function facetAnchorLeftEmpty(t,{x:s},{x:e,y:B,empty:i}){if(i)return!1;if(!s)return;const F=facetIndexOf(s,e);return F>0?facetEmpty(t,s[F-1],B):void 0}function facetAnchorRightEmpty(t,{x:s},{x:e,y:B,empty:i}){if(i)return!1;if(!s)return;const F=facetIndexOf(s,e);return F<s.length-1?facetEmpty(t,s[F+1],B):void 0}function facetAnchorEmpty(t,s,{empty:e}){return e}function and(t,s){return function(){return t.apply(null,arguments)&&s.apply(null,arguments)}}function facetFilter(t,{channels:{fx:s,fy:e},groups:B}){return s&&e?t.map(({x:t,y:s})=>B.get(t)?.get(s)??[]):s?t.map(({x:t})=>B.get(t)??[]):t.map(({y:t})=>B.get(t)??[])}const pi=Math.PI,tau=2*pi,defaultAspectRatio=.618;function createProjection({projection:t,inset:s=0,insetTop:e=s,insetRight:B=s,insetBottom:i=s,insetLeft:F=s}={},Q){if(null==t)return;if("function"==typeof t.stream)return t;let l,U,a="frame";if(isObject(t)){let s;if(({type:t,domain:U,inset:s,insetTop:e=(void 0!==s?s:e),insetRight:B=(void 0!==s?s:B),insetBottom:i=(void 0!==s?s:i),insetLeft:F=(void 0!==s?s:F),clip:a=a,...l}=t),null==t)return}"function"!=typeof t&&({type:t}=namedProjection(t));const{width:g,height:I,marginLeft:c,marginRight:n,marginTop:r,marginBottom:o}=Q,d=g-c-n-F-B,C=I-r-o-e-i;if(t=t?.({width:d,height:C,clip:a,...l}),null==t)return;a=maybePostClip(a,c,r,g-n,I-o);let b,u=c+F,h=r+e;if(null!=U){const[[s,e],[B,i]]=geoPath(t).bounds(U),F=Math.min(d/(B-s),C/(i-e));F>0?(u-=(F*(s+B)-d)/2,h-=(F*(e+i)-C)/2,b=geoTransform({point(t,s){this.stream.point(t*F+u,s*F+h)}})):warn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return b??=0===u&&0===h?identity():geoTransform({point(t,s){this.stream.point(t+u,s+h)}}),{stream:s=>t.stream(b.stream(a(s)))}}function namedProjection(t){switch(`${t}`.toLowerCase()){case"albers-usa":return scaleProjection(geoAlbersUsa,.7463,.4673);case"albers":return conicProjection(geoAlbers,.7463,.4673);case"azimuthal-equal-area":return scaleProjection(geoAzimuthalEqualArea,4,4);case"azimuthal-equidistant":return scaleProjection(geoAzimuthalEquidistant,tau,tau);case"conic-conformal":return conicProjection(geoConicConformal,tau,tau);case"conic-equal-area":return conicProjection(geoConicEqualArea,6.1702,2.9781);case"conic-equidistant":return conicProjection(geoConicEquidistant,7.312,3.6282);case"equal-earth":return scaleProjection(geoEqualEarth,5.4133,2.6347);case"equirectangular":return scaleProjection(geoEquirectangular,tau,pi);case"gnomonic":return scaleProjection(geoGnomonic,3.4641,3.4641);case"identity":return{type:identity};case"reflect-y":return{type:reflectY};case"mercator":return scaleProjection(geoMercator,tau,tau);case"orthographic":return scaleProjection(geoOrthographic,2,2);case"stereographic":return scaleProjection(geoStereographic,2,2);case"transverse-mercator":return scaleProjection(geoTransverseMercator,tau,tau);default:throw new Error(`unknown projection type: ${t}`)}}function maybePostClip(t,s,e,B,i){if(!1===t||null==t||"number"==typeof t)return t=>t;if(!0===t&&(t="frame"),"frame"===`${t}`.toLowerCase())return clipRectangle(s,e,B,i);throw new Error(`unknown projection clip type: ${t}`)}function scaleProjection(t,s,e){return{type:({width:B,height:i,rotate:F,precision:Q=.15,clip:l})=>{const U=t();return null!=Q&&U.precision?.(Q),null!=F&&U.rotate?.(F),"number"==typeof l&&U.clipAngle?.(l),null!=B&&(U.scale(Math.min(B/s,i/e)),U.translate([B/2,i/2])),U},aspectRatio:e/s}}function conicProjection(t,s,e){const{type:B,aspectRatio:i}=scaleProjection(t,s,e);return{type:t=>{const{parallels:s,domain:e,width:i,height:F}=t,Q=B(t);return null!=s&&(Q.parallels(s),void 0===e&&null!=i&&Q.fitSize([i,F],{type:"Sphere"})),Q},aspectRatio:i}}const identity=constant({stream:t=>t}),reflectY=constant(geoTransform({point(t,s){this.stream.point(t,-s)}}));function project(t,s,e,B){const i=e[t],F=e[s],Q=i.length,l=e[t]=new Float64Array(Q).fill(NaN),U=e[s]=new Float64Array(Q).fill(NaN);let a;const g=B.stream({point(t,s){l[a]=t,U[a]=s}});for(a=0;a<Q;++a)g.point(i[a],F[a])}function hasProjection({projection:t}={}){return null!=t&&("function"==typeof t.stream||(isObject(t)&&(t=t.type),null!=t))}function projectionAspectRatio(t){if("function"==typeof t?.stream)return.618;if(isObject(t)){let s,e;if(({domain:s,type:t,...e}=t),null!=s&&null!=t){const B="string"==typeof t?namedProjection(t).type:t,[[i,F],[Q,l]]=geoPath(B({...e,width:100,height:100})).bounds(s),U=(l-F)/(Q-i);return U&&isFinite(U)?U<.2?.2:U>5?5:U:.618}}if(null!=t){if("function"!=typeof t){const{aspectRatio:s}=namedProjection(t);if(s)return s}return.618}}function getGeometryChannels(t){const s=[],e=[],B={scale:"x",value:s},i={scale:"y",value:e},F={point(t,B){s.push(t),e.push(B)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const s of t.value)geoStream(s,F);return[B,i]}function xyProjection({x:t,y:s}){if(t||s)return t??=t=>t,s??=t=>t,geoTransform({point(e,B){this.stream.point(t(e),s(B))}})}function createContext(t={}){const{document:s=("undefined"!=typeof window?window.document:void 0),clip:e}=t;return{document:s,clip:maybeClip(e)}}function create(t,{document:s}){return select(creator(t).call(s.documentElement))}const unset=Symbol("unset");function memoize1(t){return(1===t.length?memoize1Arg:memoize1Args)(t)}function memoize1Arg(t){let s,e=unset;return B=>(Object.is(e,B)||(e=B,s=t(B)),s)}function memoize1Args(t){let s,e;return(...B)=>((e?.length!==B.length||e.some((t,s)=>!Object.is(t,B[s])))&&(e=B,s=t(...B)),s)}const numberFormat=memoize1(t=>new Intl.NumberFormat(t));function formatNumber(t="en-US"){const s=numberFormat(t);return t=>null==t||isNaN(t)?void 0:s.format(t)}function formatIsoDate(t){return format(t,"Invalid Date")}function formatAuto(t="en-US"){const s=formatNumber(t);return t=>(t instanceof Date?formatIsoDate:"number"==typeof t?s:string)(t)}memoize1((t,s)=>new Intl.DateTimeFormat(t,{timeZone:"UTC",...s&&{month:s}})),memoize1((t,s)=>new Intl.DateTimeFormat(t,{timeZone:"UTC",...s&&{weekday:s}}));const formatDefault=formatAuto(),offset=("undefined"!=typeof window?window.devicePixelRatio>1:"undefined"==typeof it)?0:.5;let nextClipId=0;function getClipId(){return"plot-clip-"+ ++nextClipId}function styles(t,{title:s,href:e,ariaLabel:B,ariaDescription:i,ariaHidden:F,target:Q,fill:l,fillOpacity:U,stroke:a,strokeWidth:g,strokeOpacity:I,strokeLinejoin:c,strokeLinecap:n,strokeMiterlimit:r,strokeDasharray:o,strokeDashoffset:d,opacity:C,mixBlendMode:b,imageFilter:u,paintOrder:h,pointerEvents:y,shapeRendering:x,channels:A},{ariaLabel:G,fill:R="currentColor",fillOpacity:L,stroke:m="none",strokeOpacity:S,strokeWidth:p,strokeLinecap:V,strokeLinejoin:Z,strokeMiterlimit:E,paintOrder:N}){null===R&&(l=null,U=null),null===m&&(a=null,I=null),isNoneish(R)?isNoneish(m)||isNoneish(l)&&!A?.fill||(m="none"):!isNoneish(m)||isNoneish(a)&&!A?.stroke||(R="none");const[X,D]=maybeColorChannel(l,R),[W,H]=maybeNumberChannel(U,L),[v,w]=maybeColorChannel(a,m),[Y,f]=maybeNumberChannel(I,S),[J,M]=maybeNumberChannel(C);isNone(w)||(void 0===g&&(g=p),void 0===n&&(n=V),void 0===c&&(c=Z),void 0!==r||isRound(c)||(r=E),isNone(D)||void 0!==h||(h=N));const[k,T]=maybeNumberChannel(g);return null!==R&&(t.fill=impliedString(D,"currentColor"),t.fillOpacity=impliedNumber(H,1)),null!==m&&(t.stroke=impliedString(w,"none"),t.strokeWidth=impliedNumber(T,1),t.strokeOpacity=impliedNumber(f,1),t.strokeLinejoin=impliedString(c,"miter"),t.strokeLinecap=impliedString(n,"butt"),t.strokeMiterlimit=impliedNumber(r,4),t.strokeDasharray=impliedString(o,"none"),t.strokeDashoffset=impliedString(d,"0")),t.target=string(Q),t.ariaLabel=string(G),t.ariaDescription=string(i),t.ariaHidden=string(F),t.opacity=impliedNumber(M,1),t.mixBlendMode=impliedString(b,"normal"),t.imageFilter=impliedString(u,"none"),t.paintOrder=impliedString(h,"normal"),t.pointerEvents=impliedString(y,"auto"),t.shapeRendering=impliedString(x,"auto"),{title:{value:s,optional:!0,filter:null},href:{value:e,optional:!0,filter:null},ariaLabel:{value:B,optional:!0,filter:null},fill:{value:X,scale:"auto",optional:!0},fillOpacity:{value:W,scale:"auto",optional:!0},stroke:{value:v,scale:"auto",optional:!0},strokeOpacity:{value:Y,scale:"auto",optional:!0},strokeWidth:{value:k,optional:!0},opacity:{value:J,scale:"auto",optional:!0}}}function applyTitle(t,s){s&&t.filter(t=>nonempty(s[t])).append("title").call(applyText,s)}function applyTitleGroup(t,s){s&&t.filter(([t])=>nonempty(s[t])).append("title").call(applyTextGroup,s)}function applyText(t,s){s&&t.text(t=>formatDefault(s[t]))}function applyTextGroup(t,s){s&&t.text(([t])=>formatDefault(s[t]))}function applyChannelStyles(t,{target:s,tip:e},{ariaLabel:B,title:i,fill:F,fillOpacity:Q,stroke:l,strokeOpacity:U,strokeWidth:a,opacity:g,href:I}){B&&applyAttr(t,"aria-label",t=>B[t]),F&&applyAttr(t,"fill",t=>F[t]),Q&&applyAttr(t,"fill-opacity",t=>Q[t]),l&&applyAttr(t,"stroke",t=>l[t]),U&&applyAttr(t,"stroke-opacity",t=>U[t]),a&&applyAttr(t,"stroke-width",t=>a[t]),g&&applyAttr(t,"opacity",t=>g[t]),I&&applyHref(t,t=>I[t],s),e||applyTitle(t,i)}function applyGroupedChannelStyles(t,{target:s,tip:e},{ariaLabel:B,title:i,fill:F,fillOpacity:Q,stroke:l,strokeOpacity:U,strokeWidth:a,opacity:g,href:I}){B&&applyAttr(t,"aria-label",([t])=>B[t]),F&&applyAttr(t,"fill",([t])=>F[t]),Q&&applyAttr(t,"fill-opacity",([t])=>Q[t]),l&&applyAttr(t,"stroke",([t])=>l[t]),U&&applyAttr(t,"stroke-opacity",([t])=>U[t]),a&&applyAttr(t,"stroke-width",([t])=>a[t]),g&&applyAttr(t,"opacity",([t])=>g[t]),I&&applyHref(t,([t])=>I[t],s),e||applyTitleGroup(t,i)}function groupAesthetics({ariaLabel:t,title:s,fill:e,fillOpacity:B,stroke:i,strokeOpacity:F,strokeWidth:Q,opacity:l,href:U},{tip:a}){return[t,a?void 0:s,e,B,i,F,Q,l,U].filter(t=>void 0!==t)}function groupZ(t,s,e){const B=group(t,t=>s[t]);return void 0===e&&B.size>1+t.length>>1&&warn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),B.values()}function*groupIndex(t,s,e,B){const{z:i}=e,{z:F}=B,Q=groupAesthetics(B,e),l=[...s,...Q];for(const s of F?groupZ(t,F,i):[t]){let t,e;t:for(const B of s){for(const t of l)if(!defined(t[B])){e&&e.push(-1);continue t}if(void 0!==t){e.push(B);for(let s=0;s<Q.length;++s){if(keyof(Q[s][B])!==t[s]){yield e,t=Q.map(t=>keyof(t[B])),e=[B];continue t}}}else e&&(yield e),t=Q.map(t=>keyof(t[B])),e=[B]}e&&(yield e)}}function applyClip(t,s,e,B){let i;const{clip:F=B.clip}=s;"frame"===F?(t=create("svg:g",B).each(function(){this.appendChild(t.node()),t.node=()=>this}),i=getFrameClip(B,e)):F&&(i=getGeoClip(F,B)),applyAttr(t,"aria-label",s.ariaLabel),applyAttr(t,"aria-description",s.ariaDescription),applyAttr(t,"aria-hidden",s.ariaHidden),applyAttr(t,"clip-path",i)}function memoizeClip(t){const s=new WeakMap;return(e,B)=>{let i=s.get(e);if(!i){const F=getClipId();select(e.ownerSVGElement).append("clipPath").attr("id",F).call(t,e,B),s.set(e,i=`url(#${F})`)}return i}}const getFrameClip=memoizeClip((t,s,e)=>{const{width:B,height:i,marginLeft:F,marginRight:Q,marginTop:l,marginBottom:U}=e;t.append("rect").attr("x",F).attr("y",l).attr("width",B-Q-F).attr("height",i-l-U)}),geoClipCache=new WeakMap,sphere={type:"Sphere"};function getGeoClip(t,s){let e,B;if((e=geoClipCache.get(s))||geoClipCache.set(s,e=new WeakMap),"Sphere"===t.type&&(t=sphere),!(B=e.get(t))){const i=getClipId();select(s.ownerSVGElement).append("clipPath").attr("id",i).append("path").attr("d",s.path()(t)),e.set(t,B=`url(#${i})`)}return B}function applyIndirectStyles(t,s,e,B){applyClip(t,s,e,B),applyAttr(t,"class",s.className),applyAttr(t,"fill",s.fill),applyAttr(t,"fill-opacity",s.fillOpacity),applyAttr(t,"stroke",s.stroke),applyAttr(t,"stroke-width",s.strokeWidth),applyAttr(t,"stroke-opacity",s.strokeOpacity),applyAttr(t,"stroke-linejoin",s.strokeLinejoin),applyAttr(t,"stroke-linecap",s.strokeLinecap),applyAttr(t,"stroke-miterlimit",s.strokeMiterlimit),applyAttr(t,"stroke-dasharray",s.strokeDasharray),applyAttr(t,"stroke-dashoffset",s.strokeDashoffset),applyAttr(t,"shape-rendering",s.shapeRendering),applyAttr(t,"filter",s.imageFilter),applyAttr(t,"paint-order",s.paintOrder);const{pointerEvents:i=(!1===B.pointerSticky?"none":void 0)}=s;applyAttr(t,"pointer-events",i)}function applyDirectStyles(t,s){applyStyle(t,"mix-blend-mode",s.mixBlendMode),applyAttr(t,"opacity",s.opacity)}function applyHref(t,s,e){t.each(function(t){const B=s(t);if(null!=B){const t=this.ownerDocument.createElementNS(namespaces.svg,"a");t.setAttribute("fill","inherit"),t.setAttributeNS(namespaces.xlink,"href",B),null!=e&&t.setAttribute("target",e),this.parentNode.insertBefore(t,this).appendChild(this)}})}function applyAttr(t,s,e){null!=e&&t.attr(s,e)}function applyStyle(t,s,e){null!=e&&t.style(s,e)}function applyTransform(t,s,{x:e,y:B},i=offset,F=offset){i+=s.dx,F+=s.dy,e?.bandwidth&&(i+=e.bandwidth()/2),B?.bandwidth&&(F+=B.bandwidth()/2),(i||F)&&t.attr("transform",`translate(${i},${F})`)}function impliedString(t,s){if((t=string(t))!==s)return t}function impliedNumber(t,s){if((t=number(t))!==s)return t}const validClassName=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function maybeClassName(t){if(void 0===t)return"plot-d6a7b5";if(t=`${t}`,!validClassName.test(t))throw new Error(`invalid class name: ${t}`);return t}function applyInlineStyles(t,s){if("string"==typeof s)t.property("style",s);else if(null!=s)for(const e of t)Object.assign(e.style,s)}function applyFrameAnchor({frameAnchor:t},{width:s,height:e,marginTop:B,marginRight:i,marginBottom:F,marginLeft:Q}){return[/left$/.test(t)?Q:/right$/.test(t)?s-i:(Q+s-i)/2,/^top/.test(t)?B:/^bottom/.test(t)?e-F:(B+e-F)/2]}class Mark{constructor(t,s={},e={},B){const{facet:i="auto",facetAnchor:F,fx:Q,fy:l,sort:U,dx:a=0,dy:g=0,margin:I=0,marginTop:c=I,marginRight:n=I,marginBottom:r=I,marginLeft:o=I,className:d,clip:C=B?.clip,channels:b,tip:u,render:h}=e;if(this.data=t,this.sort=isDomainSort(U)?U:null,this.initializer=initializer(e).initializer,this.transform=this.initializer?e.transform:basic(e).transform,null===i||!1===i?this.facet=null:(this.facet=keyword(!0===i?"include":i,"facet",["auto","include","exclude","super"]),this.fx=t===singleton&&"string"==typeof Q?[Q]:Q,this.fy=t===singleton&&"string"==typeof l?[l]:l),this.facetAnchor=maybeFacetAnchor(F),s=maybeNamed(s),void 0!==b&&(s={...maybeChannels(b),...s}),void 0!==B&&(s={...styles(this,e,B),...s}),this.channels=Object.fromEntries(Object.entries(s).map(([s,e])=>{if(isOptions(e.value)){const{value:t,label:s=e.label,scale:B=e.scale}=e.value;e={...e,label:s,scale:B,value:t}}if(t===singleton&&"string"==typeof e.value){const{value:t}=e;e={...e,value:[t]}}return[s,e]}).filter(([t,{value:s,optional:e}])=>{if(null!=s)return!0;if(e)return!1;throw new Error(`missing channel value: ${t}`)})),this.dx=+a,this.dy=+g,this.marginTop=+c,this.marginRight=+n,this.marginBottom=+r,this.marginLeft=+o,this.clip=maybeClip(C),this.tip=maybeTip(u),this.className=string(d),"super"===this.facet){if(Q||l)throw new Error("super-faceting cannot use fx or fy");for(const t in this.channels){const{scale:e}=s[t];if("x"===e||"y"===e)throw new Error("super-faceting cannot use x or y")}}null!=h&&(this.render=composeRender(h,this.render))}initialize(t,s,e){let B=dataify(this.data);void 0===t&&null!=B&&(t=[range(B)]);const i=t;null!=this.transform&&(({facets:t,data:B}=this.transform(B,t,e)),B=dataify(B)),void 0!==t&&(t.original=i);const F=createChannels(this.channels,B);return null!=this.sort&&channelDomain(B,t,F,s,this.sort),{data:B,facets:t,channels:F}}filter(t,s,e){for(const B in s){const{filter:i=defined}=s[B];if(null!==i){const s=e[B];t=t.filter(t=>i(s[t]))}}return t}project(t,s,e){for(const B in t)if("x"===t[B].scale&&/^x|x$/.test(B)){const i=B.replace(/^x|x$/,"y");i in t&&"y"===t[i].scale&&project(B,i,s,e.projection)}}scale(t,s,e){const B=valueObject(t,s);return e.projection&&this.project(t,B,e),B}}function marks(...t){return t.plot=Mark.prototype.plot,t}function composeRender(t,s){if(null==t)return null===s?void 0:s;if(null==s)return null===t?void 0:t;if("function"!=typeof t)throw new TypeError(`invalid render transform: ${t}`);if("function"!=typeof s)throw new TypeError(`invalid render transform: ${s}`);return function(e,B,i,F,Q,l){return t.call(this,e,B,i,F,Q,(t,e,B,i,F)=>s.call(this,t,e,B,i,F,l))}}function maybeChannels(t){return Object.fromEntries(Object.entries(maybeNamed(t)).map(([t,s])=>(void 0===(s="string"==typeof s?{value:s,label:t}:maybeValue(s)).filter&&null==s.scale&&(s={...s,filter:null}),[t,s])))}function maybeTip(t){return!0===t?"xy":!1===t||null==t?null:"string"==typeof t?keyword(t,"tip",["x","y","xy"]):t}function withTip(t,s){return!0===t?.tip?{...t,tip:s}:isObject(t?.tip)&&void 0===t.tip.pointer?{...t,tip:{...t.tip,pointer:s}}:t}function createDimensions(t,s,e={}){let B=.5-offset,i=.5+offset,F=.5+offset,Q=.5-offset;for(const{marginTop:t,marginRight:e,marginBottom:l,marginLeft:U}of s)t>B&&(B=t),e>i&&(i=e),l>F&&(F=l),U>Q&&(Q=U);let{margin:l,marginTop:U=(void 0!==l?l:B),marginRight:a=(void 0!==l?l:i),marginBottom:g=(void 0!==l?l:F),marginLeft:I=(void 0!==l?l:Q)}=e;U=+U,a=+a,g=+g,I=+I;let{width:c=640,height:n=autoHeight(t,e,{width:c,marginTopDefault:B,marginRightDefault:i,marginBottomDefault:F,marginLeftDefault:Q})+Math.max(0,U-B+g-F)}=e;c=+c,n=+n;const r={width:c,height:n,marginTop:U,marginRight:a,marginBottom:g,marginLeft:I};if(t.fx||t.fy){let{margin:t,marginTop:s=(void 0!==t?t:U),marginRight:B=(void 0!==t?t:a),marginBottom:i=(void 0!==t?t:g),marginLeft:F=(void 0!==t?t:I)}=e.facet??{};s=+s,B=+B,i=+i,F=+F,r.facet={marginTop:s,marginRight:B,marginBottom:i,marginLeft:F}}return r}function autoHeight({x:t,y:s,fy:e,fx:B},{projection:i,aspectRatio:F},{width:Q,marginTopDefault:l,marginRightDefault:U,marginBottomDefault:a,marginLeftDefault:g}){const I=e&&e.scale.domain().length||1,c=projectionAspectRatio(i);if(c){const t=(1.1*I-.1)/(1.1*(B?B.scale.domain().length:1)-.1)*c,s=Math.max(.1,Math.min(10,t));return Math.round((Q-g-U)*s+l+a)}const n=s?isOrdinalScale(s)?s.scale.domain().length||1:Math.max(7,17/I):1;if(null!=F){if(F=+F,!(isFinite(F)&&F>0))throw new Error(`invalid aspectRatio: ${F}`);const i=aspectRatioLength("y",s)/(aspectRatioLength("x",t)*F),I=B?B.scale.bandwidth():1,c=e?e.scale.bandwidth():1;return(i*(I*(Q-g-U)-t.insetLeft-t.insetRight)+s.insetTop+s.insetBottom)/c+l+a}return!(!s&&!e)*Math.max(1,Math.min(60,n*I))*20+30*!!B+60}function aspectRatioLength(t,s){if(!s)throw new Error(`aspectRatio requires ${t} scale`);const{type:e,domain:B}=s;let i;switch(e){case"linear":case"utc":case"time":i=Number;break;case"pow":{const t=s.scale.exponent();i=s=>Math.pow(s,t);break}case"log":i=Math.log;break;case"point":case"band":return B.length;default:throw new Error(`unsupported ${t} scale for aspectRatio: ${e}`)}const[F,Q]=extent$1(B);return Math.abs(i(Q)-i(F))}const states=new WeakMap;function pointerK(t,s,{x:e,y:B,px:i,py:F,maxRadius:Q=40,channels:l,render:U,...a}={}){return Q=+Q,null!=i&&(e??=null,l={...l,px:{value:i,scale:"x"}}),null!=F&&(B??=null,l={...l,py:{value:F,scale:"y"}}),{x:e,y:B,channels:l,...a,render:composeRender(function(e,B,i,F,l,U){const a=(l={...l,pointerSticky:!1}).ownerSVGElement,{data:g}=l.getMarkState(this);let I=states.get(a);I||states.set(a,I={sticky:!1,roots:[],renders:[]});let c=I.renders.push(E)-1;const{x:n,y:r,fx:o,fy:d}=B;let C=o?o(e.fx)-F.marginLeft:0,b=d?d(e.fy)-F.marginTop:0;n?.bandwidth&&(C+=n.bandwidth()/2),r?.bandwidth&&(b+=r.bandwidth()/2);const u=null!=e.fi;let h;if(u){let t=I.facetStates;t||(I.facetStates=t=new Map),h=t.get(this),h||t.set(this,h=new Map)}const[y,x]=applyFrameAnchor(this,F),{px:A,py:G}=i,R=A?t=>A[t]:anchorX$1(i,y),L=G?t=>G[t]:anchorY$1(i,x);let m,S,p,V;function Z(t,s){if(u){if(V&&(V=cancelAnimationFrame(V)),null!=t)return h.set(e.fi,s),void(V=requestAnimationFrame(()=>{V=null;for(const[B,i]of h)if(i<s||i===s&&B<e.fi){t=null;break}E(t)}));h.delete(e.fi)}E(t)}function E(t){if(m===t&&p===I.sticky)return;m=t,p=l.pointerSticky=I.sticky;const s=null==m?[]:[m];u&&(s.fx=e.fx,s.fy=e.fy,s.fi=e.fi);const Q=U(s,B,i,F,l);if(S){if(u){const t=S.parentNode,s=S.getAttribute("transform"),e=Q.getAttribute("transform");s?Q.setAttribute("transform",s):Q.removeAttribute("transform"),e?t.setAttribute("transform",e):t.removeAttribute("transform"),Q.removeAttribute("aria-label"),Q.removeAttribute("aria-description"),Q.removeAttribute("aria-hidden")}S.replaceWith(Q)}if(I.roots[c]=S=Q,!(null==m&&h?.size>1)){const t=null==m?null:isArray(g)?g[m]:g.get(m);l.dispatchValue(t)}return Q}function N(B){if(I.sticky||"mouse"===B.pointerType&&1===B.buttons)return;let[i,l]=pointof(B);i-=C,l-=b;const U=i<F.marginLeft||i>F.width-F.marginRight?1:t,a=l<F.marginTop||l>F.height-F.marginBottom?1:s;let g=null,c=Q*Q;for(const t of e){const s=U*(R(t)-i),e=a*(L(t)-l),B=s*s+e*e;B<=c&&(g=t,c=B)}if(null!=g&&(1!==t||1!==s)){const t=R(g)-i,s=L(g)-l;c=t*t+s*s}Z(g,c)}return a.addEventListener("pointerenter",N),a.addEventListener("pointermove",N),a.addEventListener("pointerdown",function(t){"mouse"===t.pointerType&&null!=m&&(I.sticky&&I.roots.some(s=>s?.contains(t.target))||(I.sticky?(I.sticky=!1,I.renders.forEach(t=>t(null))):(I.sticky=!0,E(m)),t.stopImmediatePropagation()))}),a.addEventListener("pointerleave",function(t){"mouse"===t.pointerType&&(I.sticky||Z(null))}),E(null)},U)}}function pointer(t){return pointerK(1,1,t)}function pointerX(t){return pointerK(1,.01,t)}function pointerY(t){return pointerK(.01,1,t)}function anchorX$1({x1:t,x2:s,x:e=t},B){return t&&s?e=>(t[e]+s[e])/2:e?t=>e[t]:()=>B}function anchorY$1({y1:t,y2:s,y:e=t},B){return t&&s?e=>(t[e]+s[e])/2:e?t=>e[t]:()=>B}function inferFontVariant$2(t){return isOrdinalScale(t)&&void 0===t.interval?void 0:"tabular-nums"}function legendRamp(t,s){let{label:e=t.label,tickSize:B=6,width:i=240,height:F=44+B,marginTop:Q=18,marginRight:l=0,marginBottom:U=16+B,marginLeft:a=0,style:g,ticks:I=(i-a-l)/64,tickFormat:c,fontVariant:n=inferFontVariant$2(t),round:r=!0,opacity:o,className:d}=s;const C=createContext(s);d=maybeClassName(d),o=maybeNumberChannel(o)[1],null===c&&(c=()=>null);const b=create("svg",C).attr("class",`${d}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",F).attr("viewBox",`0 0 ${i} ${F}`).call(t=>t.append("style").text(`:where(.${d}-ramp) {\n  display: block;\n  height: auto;\n  height: intrinsic;\n  max-width: 100%;\n  overflow: visible;\n}\n:where(.${d}-ramp text) {\n  white-space: pre;\n}`)).call(applyInlineStyles,g);let u,h=t=>t.selectAll(".tick line").attr("y1",Q+U-F);const y=r?(t,s)=>t.rangeRound(s):(t,s)=>t.range(s),{type:x,domain:A,range:G,interpolate:R,scale:L,pivot:m}=t;if(R){const t=void 0===G?R:piecewise(1===R.length?interpolatePiecewise(R):R,G);u=y(L.copy(),quantize(interpolateNumber(a,i-l),Math.min(A.length+(void 0!==m),void 0===G?1/0:G.length)));const s=256,e=C.document.createElement("canvas");e.width=s,e.height=1;const B=e.getContext("2d");for(let e=0,i=s-1;e<s;++e)B.fillStyle=t(e/i),B.fillRect(e,0,1,1);b.append("image").attr("opacity",o).attr("x",a).attr("y",Q).attr("width",i-a-l).attr("height",F-Q-U).attr("preserveAspectRatio","none").attr("xlink:href",e.toDataURL())}else if("threshold"===x){const t=A,s=void 0===c?t=>t:"string"==typeof c?format$1(c):c;u=y(linear().domain([-1,G.length-1]),[a,i-l]),b.append("g").attr("fill-opacity",o).selectAll().data(G).enter().append("rect").attr("x",(t,s)=>u(s-1)).attr("y",Q).attr("width",(t,s)=>u(s)-u(s-1)).attr("height",F-Q-U).attr("fill",t=>t),I=map(t,(t,s)=>s),c=e=>s(t[e],e)}else u=y(band().domain(A),[a,i-l]),b.append("g").attr("fill-opacity",o).selectAll().data(A).enter().append("rect").attr("x",u).attr("y",Q).attr("width",Math.max(0,u.bandwidth()-1)).attr("height",F-Q-U).attr("fill",L),h=()=>{};return b.append("g").attr("transform",`translate(0,${F-U})`).call(axisBottom(u).ticks(Array.isArray(I)?null:I,"string"==typeof c?c:void 0).tickFormat("function"==typeof c?c:void 0).tickSize(B).tickValues(Array.isArray(I)?I:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",impliedString(n,"normal")).call(h).call(t=>t.select(".domain").remove()),void 0!==e&&b.append("text").attr("x",a).attr("y",Q-6).attr("fill","currentColor").attr("font-weight","bold").text(e),b.node()}const radians=Math.PI/180;function markers(t,{marker:s,markerStart:e=s,markerMid:B=s,markerEnd:i=s}={}){t.markerStart=maybeMarker(e),t.markerMid=maybeMarker(B),t.markerEnd=maybeMarker(i)}function maybeMarker(t){if(null==t||!1===t)return null;if(!0===t)return markerCircleFill;if("function"==typeof t)return t;switch(`${t}`.toLowerCase()){case"none":return null;case"arrow":return markerArrow("auto");case"arrow-reverse":return markerArrow("auto-start-reverse");case"dot":return markerDot;case"circle":case"circle-fill":return markerCircleFill;case"circle-stroke":return markerCircleStroke;case"tick":return markerTick("auto");case"tick-x":return markerTick(90);case"tick-y":return markerTick(0)}throw new Error(`invalid marker: ${t}`)}function markerArrow(t){return(s,e)=>create("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",t).attr("fill","none").attr("stroke",s).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(t=>t.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function markerDot(t,s){return create("svg:marker",s).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","none").call(t=>t.append("circle").attr("r",2.5)).node()}function markerCircleFill(t,s){return create("svg:marker",s).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(t=>t.append("circle").attr("r",3)).node()}function markerCircleStroke(t,s){return create("svg:marker",s).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",t).attr("stroke-width",1.5).call(t=>t.append("circle").attr("r",3)).node()}function markerTick(t){return(s,e)=>create("svg:marker",e).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",t).attr("stroke",s).call(t=>t.append("path").attr("d","M0,-3v6")).node()}let nextMarkerId=0;function applyMarkers(t,s,{stroke:e},B){return applyMarkersColor(t,s,e&&(t=>e[t]),null,B)}function applyGroupedMarkers(t,s,{stroke:e,z:B},i){return applyMarkersColor(t,s,e&&(([t])=>e[t]),B,i)}const START=1,END=2;function getGroupedOrientation(t,s){const e=new Uint8Array(s.length),B=t.data().filter(t=>t.length>1),i=B.length;for(let t=0,F=unset;t<i;++t){const i=B[t];if(i.length>1){const t=i[0];F!==(F=keyof(s[t]))&&(e[t]|=START)}}for(let t=i-1,F=unset;t>=0;--t){const i=B[t];if(i.length>1){const t=i[0];F!==(F=keyof(s[t]))&&(e[t]|=END)}}return([t])=>e[t]}function applyMarkersColor(t,{markerStart:s,markerMid:e,markerEnd:B,stroke:i},F=()=>i,Q,l){if(!s&&!e&&!B)return;const U=new Map,a=Q&&getGroupedOrientation(t,Q);function g(t,s,e){return function(B){if(e&&!e(B))return;const i=F(B);let Q=U.get(s);Q||U.set(s,Q=new Map);let a=Q.get(i);if(!a){const t=this.parentNode.insertBefore(s(i,l),this),e="plot-marker-"+ ++nextMarkerId;t.setAttribute("id",e),Q.set(i,a=`url(#${e})`)}this.setAttribute(t,a)}}s&&t.each(g("marker-start",s,a&&(t=>a(t)&START))),e&&a&&t.each(g("marker-start",e,t=>!(a(t)&START))),e&&t.each(g("marker-mid",e)),B&&t.each(g("marker-end",B,a&&(t=>a(t)&END)))}function maybeInsetX({inset:t,insetLeft:s,insetRight:e,...B}={}){return[s,e]=maybeInset(t,s,e),{inset:t,insetLeft:s,insetRight:e,...B}}function maybeInsetY({inset:t,insetTop:s,insetBottom:e,...B}={}){return[s,e]=maybeInset(t,s,e),{inset:t,insetTop:s,insetBottom:e,...B}}function maybeInset(t,s,e){return void 0===t&&void 0===s&&void 0===e?offset?[1,0]:[.5,.5]:[s,e]}function maybeIntervalValue(t,{interval:s}){return(t={...maybeValue(t)}).interval=maybeInterval(void 0===t.interval?s:t.interval),t}function maybeIntervalK(t,s,e,B){const{[t]:i,[`${t}1`]:F,[`${t}2`]:Q}=e,{value:l,interval:U}=maybeIntervalValue(i,e);if(null==l||null==U&&!B)return e;const a=labelof(i);if(null==U){let s;const i={transform:t=>s||(s=valueof(t,l)),label:a};return{...e,[t]:void 0,[`${t}1`]:void 0===F?i:F,[`${t}2`]:void 0!==Q||F===Q&&B?Q:i}}let g,I;function c(t){return void 0!==I&&t===g?I:I=map(valueof(g=t,l),t=>U.floor(t))}return s({...e,[t]:void 0,[`${t}1`]:void 0===F?{transform:c,label:a}:F,[`${t}2`]:void 0===Q?{transform:t=>c(t).map(t=>U.offset(t)),label:a}:Q})}function maybeIntervalMidK(t,s,e){const{[t]:B}=e,{value:i,interval:F}=maybeIntervalValue(B,e);return null==i||null==F?e:s({...e,[t]:{label:labelof(B),transform:t=>{const s=map(valueof(t,i),t=>F.floor(t)),e=s.map(t=>F.offset(t));return s.map(isTemporal(s)?(t,s)=>null==t||isNaN(t=+t)||null==(s=e[s])||isNaN(s=+s)?void 0:new Date((t+s)/2):(t,s)=>null==t||null==(s=e[s])?NaN:(+t+ +s)/2)}}})}function maybeTrivialIntervalX(t={}){return maybeIntervalK("x",maybeInsetX,t,!0)}function maybeIntervalX(t={}){return maybeIntervalK("x",maybeInsetX,t)}function maybeIntervalY(t={}){return maybeIntervalK("y",maybeInsetY,t)}function maybeIntervalMidX(t={}){return maybeIntervalMidK("x",maybeInsetX,t)}function maybeIntervalMidY(t={}){return maybeIntervalMidK("y",maybeInsetY,t)}const defaults$7={ariaLabel:"rule",fill:null,stroke:"currentColor"};class RuleX extends Mark{constructor(t,s={}){const{x:e,y1:B,y2:i,inset:F=0,insetTop:Q=F,insetBottom:l=F}=s;super(t,{x:{value:e,scale:"x",optional:!0},y1:{value:B,scale:"y",optional:!0},y2:{value:i,scale:"y",optional:!0}},withTip(s,"x"),defaults$7),this.insetTop=number(Q),this.insetBottom=number(l),markers(this,s)}render(t,s,e,B,i){const{x:F,y:Q}=s,{x:l,y1:U,y2:a}=e,{width:g,height:I,marginTop:c,marginRight:n,marginLeft:r,marginBottom:o}=B,{insetTop:d,insetBottom:C}=this;return create("svg:g",i).call(applyIndirectStyles,this,B,i).call(applyTransform,this,{x:l&&F},offset,0).call(s=>s.selectAll().data(t).enter().append("line").call(applyDirectStyles,this).attr("x1",l?t=>l[t]:(r+g-n)/2).attr("x2",l?t=>l[t]:(r+g-n)/2).attr("y1",U&&!isCollapsed(Q)?t=>U[t]+d:c+d).attr("y2",a&&!isCollapsed(Q)?Q.bandwidth?t=>a[t]+Q.bandwidth()-C:t=>a[t]-C:I-o-C).call(applyChannelStyles,this,e).call(applyMarkers,this,e,i)).node()}}class RuleY extends Mark{constructor(t,s={}){const{x1:e,x2:B,y:i,inset:F=0,insetRight:Q=F,insetLeft:l=F}=s;super(t,{y:{value:i,scale:"y",optional:!0},x1:{value:e,scale:"x",optional:!0},x2:{value:B,scale:"x",optional:!0}},withTip(s,"y"),defaults$7),this.insetRight=number(Q),this.insetLeft=number(l),markers(this,s)}render(t,s,e,B,i){const{x:F,y:Q}=s,{y:l,x1:U,x2:a}=e,{width:g,height:I,marginTop:c,marginRight:n,marginLeft:r,marginBottom:o}=B,{insetLeft:d,insetRight:C}=this;return create("svg:g",i).call(applyIndirectStyles,this,B,i).call(applyTransform,this,{y:l&&Q},0,offset).call(s=>s.selectAll().data(t).enter().append("line").call(applyDirectStyles,this).attr("x1",U&&!isCollapsed(F)?t=>U[t]+d:r+d).attr("x2",a&&!isCollapsed(F)?F.bandwidth?t=>a[t]+F.bandwidth()-C:t=>a[t]-C:g-n-C).attr("y1",l?t=>l[t]:(c+I-o)/2).attr("y2",l?t=>l[t]:(c+I-o)/2).call(applyChannelStyles,this,e).call(applyMarkers,this,e,i)).node()}}function ruleX(t,s){let{x:e=identity$1,y:B,y1:i,y2:F,...Q}=maybeIntervalY(s);return[i,F]=maybeOptionalZero(B,i,F),new RuleX(t,{...Q,x:e,y1:i,y2:F})}function ruleY(t,s){let{y:e=identity$1,x:B,x1:i,x2:F,...Q}=maybeIntervalX(s);return[i,F]=maybeOptionalZero(B,i,F),new RuleY(t,{...Q,y:e,x1:i,x2:F})}function maybeOptionalZero(t,s,e){if(null==t){if(void 0===s){if(void 0!==e)return[0,e]}else if(void 0===e)return[0,s]}else{if(void 0===s)return void 0===e?[0,t]:[t,e];if(void 0===e)return[t,s]}return[s,e]}function template(t,...s){let e=s.length;for(let B=0,i=!0;B<e;++B)"function"!=typeof s[B]&&(i&&(t=t.slice(),i=!1),t.splice(B,2,t[B]+s[B]+t[B+1]),s.splice(B,1),--B,--e);return B=>{let i=t[0];for(let F=0;F<e;++F)i+=s[F](B)+t[F+1];return i}}const defaults$6={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},softHyphen="Â­";class Text extends Mark{constructor(t,s={}){const{x:e,y:B,text:i=(isIterable(t)&&isTextual(t)?identity$1:indexOf),frameAnchor:F,textAnchor:Q=(/right$/i.test(F)?"end":/left$/i.test(F)?"start":"middle"),lineAnchor:l=(/^top/i.test(F)?"top":/^bottom/i.test(F)?"bottom":"middle"),lineHeight:U=1,lineWidth:a=1/0,textOverflow:g,monospace:I,fontFamily:c=(I?"ui-monospace, monospace":void 0),fontSize:n,fontStyle:r,fontVariant:o,fontWeight:d,rotate:C}=s,[b,u]=maybeNumberChannel(C,0),[h,y]=maybeFontSizeChannel(n);if(super(t,{x:{value:e,scale:"x",optional:!0},y:{value:B,scale:"y",optional:!0},fontSize:{value:h,optional:!0},rotate:{value:numberChannel(b),optional:!0},text:{value:i,filter:nonempty,optional:!0}},s,defaults$6),this.rotate=u,this.textAnchor=impliedString(Q,"middle"),this.lineAnchor=keyword(l,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+U,this.lineWidth=+a,this.textOverflow=maybeTextOverflow(g),this.monospace=!!I,this.fontFamily=string(c),this.fontSize=y,this.fontStyle=string(r),this.fontVariant=string(o),this.fontWeight=string(d),this.frameAnchor=maybeFrameAnchor(F),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${a}`);this.splitLines=splitter(this),this.clipLine=clipper(this)}render(t,s,e,B,i){const{x:F,y:Q}=s,{x:l,y:U,rotate:a,text:g,title:I,fontSize:c}=e,{rotate:n}=this,[r,o]=applyFrameAnchor(this,B);return create("svg:g",i).call(applyIndirectStyles,this,B,i).call(applyIndirectTextStyles,this,g,B).call(applyTransform,this,{x:l&&F,y:U&&Q}).call(s=>s.selectAll().data(t).enter().append("text").call(applyDirectStyles,this).call(applyMultilineText,this,g,I).attr("transform",template`translate(${l?t=>l[t]:r},${U?t=>U[t]:o})${a?t=>` rotate(${a[t]})`:n?` rotate(${n})`:""}`).call(applyAttr,"font-size",c&&(t=>c[t])).call(applyChannelStyles,this,e)).node()}}function maybeTextOverflow(t){return null==t?null:keyword(t,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function applyMultilineText(t,s,e,B){if(!e)return;const{lineAnchor:i,lineHeight:F,textOverflow:Q,splitLines:l,clipLine:U}=s;t.each(function(t){const s=l(formatDefault(e[t])??"").map(U),a=s.length,g="top"===i?.71:"bottom"===i?1-a:(164-100*a)/200;if(a>1){let t=0;for(let e=0;e<a;++e){if(++t,!s[e])continue;const B=this.ownerDocument.createElementNS(namespaces.svg,"tspan");B.setAttribute("x",0),e===t-1?B.setAttribute("y",(g+e)*F+"em"):B.setAttribute("dy",t*F+"em"),B.textContent=s[e],this.appendChild(B),t=0}}else g&&this.setAttribute("y",g*F+"em"),this.textContent=s[0];if(Q&&!B&&s[0]!==e[t]){const s=this.ownerDocument.createElementNS(namespaces.svg,"title");s.textContent=e[t],this.appendChild(s)}})}function text(t,{x:s,y:e,...B}={}){return void 0===B.frameAnchor&&([s,e]=maybeTuple(s,e)),new Text(t,{...B,x:s,y:e})}function textX(t,{x:s=identity$1,...e}={}){return new Text(t,maybeIntervalMidY({...e,x:s}))}function textY(t,{y:s=identity$1,...e}={}){return new Text(t,maybeIntervalMidX({...e,y:s}))}function applyIndirectTextStyles(t,s,e){applyAttr(t,"text-anchor",s.textAnchor),applyAttr(t,"font-family",s.fontFamily),applyAttr(t,"font-size",s.fontSize),applyAttr(t,"font-style",s.fontStyle),applyAttr(t,"font-variant",void 0===s.fontVariant?inferFontVariant$1(e):s.fontVariant),applyAttr(t,"font-weight",s.fontWeight)}function inferFontVariant$1(t){return t&&(isNumeric(t)||isTemporal(t))?"tabular-nums":void 0}const fontSizes=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function maybeFontSizeChannel(t){return null==t||"number"==typeof t?[void 0,t]:"string"!=typeof t?[t,void 0]:(t=t.trim().toLowerCase(),fontSizes.has(t)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(t)?[void 0,t]:[t,void 0])}function lineWrap(t,s,e){const B=[];let i,F=0;for(const[Q,l,U]of lineBreaks(t))void 0===i&&(i=Q),F>i&&e(t,i,l)>s&&(B.push(t.slice(i,F)+("Â­"===t[F-1]?"-":"")),i=Q),U?(B.push(t.slice(i,l)),i=void 0):F=l;return B}function*lineBreaks(t){let s=0,e=0;const B=t.length;for(;e<B;){let B=1;switch(t[e]){case"Â­":case"-":++e,yield[s,e,!1],s=e;break;case" ":for(yield[s,e,!1];" "===t[++e];);s=e;break;case"\r":"\n"===t[e+1]&&++B;case"\n":yield[s,e,!0],e+=B,s=e;break;default:++e}}yield[s,e,!0]}const defaultWidthMap={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"â":31,"â":31,"â":47,"â":47,"â¦":82};function defaultWidth(t,s=0,e=t.length){let B=0;for(let i=s;i<e;i=readCharacter(t,i))B+=defaultWidthMap[t[i]]??(isPictographic(t,i)?120:defaultWidthMap.e);return B}function monospaceWidth(t,s=0,e=t.length){let B=0;for(let i=s;i<e;i=readCharacter(t,i))B+=isPictographic(t,i)?126:63;return B}function splitter({monospace:t,lineWidth:s,textOverflow:e}){if(null!=e||s==1/0)return t=>t.split(/\r\n?|\n/g);const B=t?monospaceWidth:defaultWidth,i=100*s;return t=>lineWrap(t,i,B)}function clipper({monospace:t,lineWidth:s,textOverflow:e}){if(null==e||s==1/0)return t=>t;const B=t?monospaceWidth:defaultWidth,i=100*s;switch(e){case"clip-start":return t=>clipStart(t,i,B,"");case"clip-end":return t=>clipEnd(t,i,B,"");case"ellipsis-start":return t=>clipStart(t,i,B,ellipsis);case"ellipsis-middle":return t=>clipMiddle(t,i,B,ellipsis);case"ellipsis-end":return t=>clipEnd(t,i,B,ellipsis)}}const ellipsis="â¦";function cut(t,s,e,B){const i=[];let F=0;for(let Q=0,l=0,U=t.length;Q<U;Q=l){l=readCharacter(t,Q);const U=e(t,Q,l);if(F+U>s){for(F+=B;F>s&&Q>0;)l=Q,Q=i.pop(),F-=e(t,Q,l);return[Q,s-F]}F+=U,i.push(Q)}return[-1,0]}function clipEnd(t,s,e,B){t=t.trim();const i=e(B),[F]=cut(t,s,e,i);return F<0?t:t.slice(0,F).trimEnd()+B}function clipMiddle(t,s,e,B){const i=e(t=t.trim());if(i<=s)return t;const F=e(B)/2,[Q,l]=cut(t,s/2,e,F),[U]=cut(t,i-s/2-l+F,e,-F);return U<0?B:t.slice(0,Q).trimEnd()+B+t.slice(readCharacter(t,U)).trimStart()}function clipStart(t,s,e,B){const i=e(t=t.trim());if(i<=s)return t;const F=e(B),[Q]=cut(t,i-s+F,e,-F);return Q<0?B:B+t.slice(readCharacter(t,Q)).trimStart()}const reCombiner=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,rePictographic=/\p{Extended_Pictographic}/uy;function readCharacter(t,s){return isCombiner(t,s+=isSurrogatePair(t,s)?2:1)&&(s=reCombiner.lastIndex),isZeroWidthJoiner(t,s)?readCharacter(t,s+1):s}function isAscii(t,s){return t.charCodeAt(s)<128}function isSurrogatePair(t,s){const e=t.charCodeAt(s);if(e>=55296&&e<56320){const e=t.charCodeAt(s+1);return e>=56320&&e<57344}return!1}function isZeroWidthJoiner(t,s){return 8205===t.charCodeAt(s)}function isCombiner(t,s){return!isAscii(t,s)&&(reCombiner.lastIndex=s,reCombiner.test(t))}function isPictographic(t,s){return!isAscii(t,s)&&(rePictographic.lastIndex=s,rePictographic.test(t))}const defaults$5={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},defaultRadius=3.5,wingRatio=5*defaultRadius,shapeArrow={draw(t,s,e){const B=s*e/wingRatio;t.moveTo(0,0),t.lineTo(0,-s),t.moveTo(-B,B-s),t.lineTo(0,-s),t.lineTo(B,B-s)}},shapeSpike={draw(t,s,e){t.moveTo(-e,0),t.lineTo(0,-s),t.lineTo(e,0)}},shapes=new Map([["arrow",shapeArrow],["spike",shapeSpike]]);function isShapeObject(t){return t&&"function"==typeof t.draw}function maybeShape(t){if(isShapeObject(t))return t;const s=shapes.get(`${t}`.toLowerCase());if(s)return s;throw new Error(`invalid shape: ${t}`)}class Vector extends Mark{constructor(t,s={}){const{x:e,y:B,r:i=defaultRadius,length:F,rotate:Q,shape:l=shapeArrow,anchor:U="middle",frameAnchor:a}=s,[g,I]=maybeNumberChannel(F,12),[c,n]=maybeNumberChannel(Q,0);super(t,{x:{value:e,scale:"x",optional:!0},y:{value:B,scale:"y",optional:!0},length:{value:g,scale:"length",optional:!0},rotate:{value:c,optional:!0}},s,defaults$5),this.r=+i,this.length=I,this.rotate=n,this.shape=maybeShape(l),this.anchor=keyword(U,"anchor",["start","middle","end"]),this.frameAnchor=maybeFrameAnchor(a)}render(t,s,e,B,i){const{x:F,y:Q}=s,{x:l,y:U,length:a,rotate:g}=e,{length:I,rotate:c,anchor:n,shape:r,r:o}=this,[d,C]=applyFrameAnchor(this,B);return create("svg:g",i).call(applyIndirectStyles,this,B,i).call(applyTransform,this,{x:l&&F,y:U&&Q}).call(s=>s.selectAll().data(t).enter().append("path").call(applyDirectStyles,this).attr("transform",template`translate(${l?t=>l[t]:d},${U?t=>U[t]:C})${g?t=>` rotate(${g[t]})`:c?` rotate(${c})`:""}${"start"===n?"":"end"===n?a?t=>` translate(0,${a[t]})`:` translate(0,${I})`:a?t=>` translate(0,${a[t]/2})`:` translate(0,${I/2})`}`).attr("d",a?t=>{const s=pathRound();return r.draw(s,a[t],o),s}:(()=>{const t=pathRound();return r.draw(t,I,o),t})()).call(applyChannelStyles,this,e)).node()}}function vectorX(t,s={}){const{x:e=identity$1,...B}=s;return new Vector(t,{...B,x:e})}function vectorY(t,s={}){const{y:e=identity$1,...B}=s;return new Vector(t,{...B,y:e})}function maybeData(t,s){return arguments.length<2&&!isIterable(t)&&(s=t,t=null),void 0===s&&(s={}),[t,s]}function maybeAnchor({anchor:t}={},s){return void 0===t?s[0]:keyword(t,"anchor",s)}function anchorY(t){return maybeAnchor(t,["left","right"])}function anchorFy(t){return maybeAnchor(t,["right","left"])}function anchorX(t){return maybeAnchor(t,["bottom","top"])}function anchorFx(t){return maybeAnchor(t,["top","bottom"])}function axisY(){const[t,s]=maybeData(...arguments);return axisKy("y",anchorY(s),t,s)}function axisFy(){const[t,s]=maybeData(...arguments);return axisKy("fy",anchorFy(s),t,s)}function axisX(){const[t,s]=maybeData(...arguments);return axisKx("x",anchorX(s),t,s)}function axisFx(){const[t,s]=maybeData(...arguments);return axisKx("fx",anchorFx(s),t,s)}function axisKy(t,s,e,{color:B="currentColor",opacity:i=1,stroke:F=B,strokeOpacity:Q=i,strokeWidth:l=1,fill:U=B,fillOpacity:a=i,textAnchor:g,textStroke:I,textStrokeOpacity:c,textStrokeWidth:n,tickSize:r=("y"===t?6:0),tickPadding:o,tickRotate:d,x:C,margin:b,marginTop:u=(void 0===b?20:b),marginRight:h=(void 0===b?"right"===s?40:0:b),marginBottom:y=(void 0===b?20:b),marginLeft:x=(void 0===b?"left"===s?40:0:b),label:A,labelAnchor:G,labelArrow:R,labelOffset:L,ariaLabel:m=`${t}-axis`,...S}){return r=number(r),o=number(o),d=number(d),void 0!==G&&(G=keyword(G,"labelAnchor",["center","top","bottom"])),R=maybeLabelArrow(R),marks(r&&!isNoneish(F)?axisTickKy(t,s,e,{stroke:F,strokeOpacity:Q,strokeWidth:l,tickSize:r,tickPadding:o,tickRotate:d,x:C,ariaLabel:m,...S}):null,isNoneish(U)?null:axisTextKy(t,s,e,{fill:U,fillOpacity:a,stroke:I,strokeOpacity:c,strokeWidth:n,textAnchor:g,tickSize:r,tickPadding:o,tickRotate:d,x:C,marginTop:u,marginRight:h,marginBottom:y,marginLeft:x,ariaLabel:m,...S}),isNoneish(U)||null===A?null:text([],labelOptions({fill:U,fillOpacity:a,...S},function(e,B,i,F,Q){const l=F[t],{marginTop:U,marginRight:a,marginBottom:g,marginLeft:I}="y"===t&&Q.inset||Q,c=G??(l.bandwidth?"center":"top"),n=L??("right"===s?a:I)-3;return"center"===c?(this.textAnchor=void 0,this.lineAnchor="right"===s?"bottom":"top",this.frameAnchor=s,this.rotate=-90):(this.textAnchor="right"===s?"end":"start",this.lineAnchor=c,this.frameAnchor=`${c}-${s}`,this.rotate=0),this.dy="top"===c?3-U:"bottom"===c?g-3:0,this.dx="right"===s?n:-n,this.ariaLabel=`${m} label`,{facets:[[0]],channels:{text:{value:[formatAxisLabel(t,l,{anchor:s,label:A,labelAnchor:c,labelArrow:R})]}}}})))}function axisKx(t,s,e,{color:B="currentColor",opacity:i=1,stroke:F=B,strokeOpacity:Q=i,strokeWidth:l=1,fill:U=B,fillOpacity:a=i,textAnchor:g,textStroke:I,textStrokeOpacity:c,textStrokeWidth:n,tickSize:r=("x"===t?6:0),tickPadding:o,tickRotate:d,y:C,margin:b,marginTop:u=(void 0===b?"top"===s?30:0:b),marginRight:h=(void 0===b?20:b),marginBottom:y=(void 0===b?"bottom"===s?30:0:b),marginLeft:x=(void 0===b?20:b),label:A,labelAnchor:G,labelArrow:R,labelOffset:L,ariaLabel:m=`${t}-axis`,...S}){return r=number(r),o=number(o),d=number(d),void 0!==G&&(G=keyword(G,"labelAnchor",["center","left","right"])),R=maybeLabelArrow(R),marks(r&&!isNoneish(F)?axisTickKx(t,s,e,{stroke:F,strokeOpacity:Q,strokeWidth:l,tickSize:r,tickPadding:o,tickRotate:d,y:C,ariaLabel:m,...S}):null,isNoneish(U)?null:axisTextKx(t,s,e,{fill:U,fillOpacity:a,stroke:I,strokeOpacity:c,strokeWidth:n,textAnchor:g,tickSize:r,tickPadding:o,tickRotate:d,y:C,marginTop:u,marginRight:h,marginBottom:y,marginLeft:x,ariaLabel:m,...S}),isNoneish(U)||null===A?null:text([],labelOptions({fill:U,fillOpacity:a,...S},function(e,B,i,F,Q){const l=F[t],{marginTop:U,marginRight:a,marginBottom:g,marginLeft:I}="x"===t&&Q.inset||Q,c=G??(l.bandwidth?"center":"right"),n=L??("top"===s?U:g)-3;return"center"===c?(this.frameAnchor=s,this.textAnchor=void 0):(this.frameAnchor=`${s}-${c}`,this.textAnchor="right"===c?"end":"start"),this.lineAnchor=s,this.dy="top"===s?-n:n,this.dx="right"===c?a-3:"left"===c?3-I:0,this.ariaLabel=`${m} label`,{facets:[[0]],channels:{text:{value:[formatAxisLabel(t,l,{anchor:s,label:A,labelAnchor:c,labelArrow:R})]}}}})))}function axisTickKy(t,s,e,{strokeWidth:B=1,strokeLinecap:i=null,strokeLinejoin:F=null,facetAnchor:Q=s+("y"===t?"-empty":""),frameAnchor:l=s,tickSize:U,inset:a=0,insetLeft:g=a,insetRight:I=a,dx:c=0,y:n=("y"===t?void 0:null),ariaLabel:r,...o}){return axisMark(vectorY,t,e,{ariaLabel:`${r} tick`,ariaHidden:!0},{strokeWidth:B,strokeLinecap:i,strokeLinejoin:F,facetAnchor:Q,frameAnchor:l,y:n,...o,dx:"left"===s?+c-offset+ +g:+c+offset-I,anchor:"start",length:U,shape:"left"===s?shapeTickLeft:shapeTickRight})}function axisTickKx(t,s,e,{strokeWidth:B=1,strokeLinecap:i=null,strokeLinejoin:F=null,facetAnchor:Q=s+("x"===t?"-empty":""),frameAnchor:l=s,tickSize:U,inset:a=0,insetTop:g=a,insetBottom:I=a,dy:c=0,x:n=("x"===t?void 0:null),ariaLabel:r,...o}){return axisMark(vectorX,t,e,{ariaLabel:`${r} tick`,ariaHidden:!0},{strokeWidth:B,strokeLinejoin:F,strokeLinecap:i,facetAnchor:Q,frameAnchor:l,x:n,...o,dy:"bottom"===s?+c-offset-I:+c+offset+ +g,anchor:"start",length:U,shape:"bottom"===s?shapeTickBottom:shapeTickTop})}function axisTextKy(t,s,e,{facetAnchor:B=s+("y"===t?"-empty":""),frameAnchor:i=s,tickSize:F,tickRotate:Q=0,tickPadding:l=Math.max(3,9-F)+(Math.abs(Q)>60?4*Math.cos(Q*radians):0),text:U,textAnchor:a=(Math.abs(Q)>60?"middle":"left"===s?"end":"start"),lineAnchor:g=(Q>60?"top":Q<-60?"bottom":"middle"),fontVariant:I,inset:c=0,insetLeft:n=c,insetRight:r=c,dx:o=0,ariaLabel:d,y:C=("y"===t?void 0:null),...b}){return axisMark(textY,t,e,{ariaLabel:`${d} tick label`},{facetAnchor:B,frameAnchor:i,text:U,textAnchor:a,lineAnchor:g,fontVariant:I,rotate:Q,y:C,...b,dx:"left"===s?+o-F-l+ +n:+o+ +F+ +l-r},function(t,e,B,i,F){void 0===I&&(this.fontVariant=inferFontVariant(t)),void 0===U&&(F.text=inferTextChannel(t,e,B,i,s))})}function axisTextKx(t,s,e,{facetAnchor:B=s+("x"===t?"-empty":""),frameAnchor:i=s,tickSize:F,tickRotate:Q=0,tickPadding:l=Math.max(3,9-F)+(Math.abs(Q)>=10?4*Math.cos(Q*radians):0),text:U,textAnchor:a=(Math.abs(Q)>=10?Q<0^"bottom"===s?"start":"end":"middle"),lineAnchor:g=(Math.abs(Q)>=10?"middle":"bottom"===s?"top":"bottom"),fontVariant:I,inset:c=0,insetTop:n=c,insetBottom:r=c,dy:o=0,x:d=("x"===t?void 0:null),ariaLabel:C,...b}){return axisMark(textX,t,e,{ariaLabel:`${C} tick label`},{facetAnchor:B,frameAnchor:i,text:void 0===U?null:U,textAnchor:a,lineAnchor:g,fontVariant:I,rotate:Q,x:d,...b,dy:"bottom"===s?+o+ +F+ +l-r:+o-F-l+ +n},function(t,e,B,i,F){void 0===I&&(this.fontVariant=inferFontVariant(t)),void 0===U&&(F.text=inferTextChannel(t,e,B,i,s))})}function gridY(){const[t,s]=maybeData(...arguments);return gridKy("y",anchorY(s),t,s)}function gridFy(){const[t,s]=maybeData(...arguments);return gridKy("fy",anchorFy(s),t,s)}function gridX(){const[t,s]=maybeData(...arguments);return gridKx("x",anchorX(s),t,s)}function gridFx(){const[t,s]=maybeData(...arguments);return gridKx("fx",anchorFx(s),t,s)}function gridKy(t,s,e,{y:B=("y"===t?void 0:null),x:i=null,x1:F=("left"===s?i:null),x2:Q=("right"===s?i:null),ariaLabel:l=`${t}-grid`,ariaHidden:U=!0,...a}){return axisMark(ruleY,t,e,{ariaLabel:l,ariaHidden:U},{y:B,x1:F,x2:Q,...gridDefaults(a)})}function gridKx(t,s,e,{x:B=("x"===t?void 0:null),y:i=null,y1:F=("top"===s?i:null),y2:Q=("bottom"===s?i:null),ariaLabel:l=`${t}-grid`,ariaHidden:U=!0,...a}){return axisMark(ruleX,t,e,{ariaLabel:l,ariaHidden:U},{x:B,y1:F,y2:Q,...gridDefaults(a)})}function gridDefaults({color:t="currentColor",opacity:s=.1,stroke:e=t,strokeOpacity:B=s,strokeWidth:i=1,...F}){return{stroke:e,strokeOpacity:B,strokeWidth:i,...F}}function labelOptions({fill:t,fillOpacity:s,fontFamily:e,fontSize:B,fontStyle:i,fontVariant:F,fontWeight:Q,monospace:l,pointerEvents:U,shapeRendering:a,clip:g=!1},I){return[,t]=maybeColorChannel(t),[,s]=maybeNumberChannel(s),{facet:"super",x:null,y:null,fill:t,fillOpacity:s,fontFamily:e,fontSize:B,fontStyle:i,fontVariant:F,fontWeight:Q,monospace:l,pointerEvents:U,shapeRendering:a,clip:g,initializer:I}}function axisMark(t,s,e,B,i,F){let Q;const l=initializer(i).initializer,U=t(e,initializer({...i,initializer:function(t,e,B,l,U,a){const g=null==t&&("fx"===s||"fy"===s),{[s]:I}=l;if(!I)throw new Error(`missing scale: ${s}`);const c=I.domain();let{interval:n,ticks:r,tickFormat:o,tickSpacing:d=("x"===s?80:35)}=i;if("string"==typeof r&&hasTemporalDomain(I)&&(n=r,r=void 0),void 0===r&&(r=maybeRangeInterval(n,I.type)??inferTickCount(I,d)),null==t){if(isIterable(r))t=arrayify(r);else if(isInterval(r))t=inclusiveRange(r,...extent$1(c));else if(I.interval){let s=I.interval;if(I.ticks){const[e,B]=extent$1(c);s=generalizeTimeInterval(s,(B-e)/s[intervalDuration]/r)??s,t=inclusiveRange(s,e,B)}else{s=generalizeTimeInterval(s,(t=c).length/r)??s,s!==I.interval&&(t=inclusiveRange(s,...extent$1(t)))}if(s===I.interval){const s=Math.round(t.length/r);s>1&&(t=t.filter((t,e)=>e%s===0))}}else t=I.ticks?I.ticks(r):c;if(!I.ticks&&t.length&&t!==c){const e=new InternSet(c);t=t.filter(t=>e.has(t)),t.length||warn(`Warning: the ${s}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}"y"===s||"x"===s?e=[range(t)]:Q[s]={scale:s,value:identity$1}}F?.call(this,I,t,r,o,Q);const C=Object.fromEntries(Object.entries(Q).map(([s,e])=>[s,{...e,value:valueof(t,e.value)}]));return g&&(e=a.filterFacets(t,C)),{data:t,facets:e,channels:C}}},l));return null==e?(Q=U.channels,U.channels={}):Q={},void 0!==B&&Object.assign(U,B),void 0===U.clip&&(U.clip=!1),U}function inferTickCount(t,s){const[e,B]=extent$1(t.range());return(B-e)/s}function inferTextChannel(t,s,e,B,i){return{value:inferTickFormat(t,s,e,B,i)}}function inferTickFormat(t,s,e,B,i){return"function"!=typeof B||"log"===t.type&&t.tickFormat?void 0===B&&s&&isTemporal(s)?inferTimeFormat(t.type,s,i)??formatDefault:t.tickFormat?t.tickFormat("number"==typeof e?e:null,B):"string"==typeof B&&t.domain().length>0?(isTemporal(t.domain())?utcFormat:format$1)(B):void 0===B?formatDefault:constant(B):B}function inclusiveRange(t,s,e){return t.range(s,t.offset(t.floor(e)))}const shapeTickBottom={draw(t,s){t.moveTo(0,0),t.lineTo(0,s)}},shapeTickTop={draw(t,s){t.moveTo(0,0),t.lineTo(0,-s)}},shapeTickLeft={draw(t,s){t.moveTo(0,0),t.lineTo(-s,0)}},shapeTickRight={draw(t,s){t.moveTo(0,0),t.lineTo(s,0)}};function inferFontVariant(t){return t.bandwidth&&!t.interval?void 0:"tabular-nums"}function formatAxisLabel(t,s,{anchor:e,label:B=s.label,labelAnchor:i,labelArrow:F}={}){if(!(null==B||B.inferred&&hasTemporalDomain(s)&&/^(date|time|year)$/i.test(B))){if(B=String(B),"auto"===F&&(F=(!s.bandwidth||s.interval)&&!/[ââââ]/.test(B)),!F)return B;if(!0===F){const e=inferScaleOrder(s);e&&(F=/x$/.test(t)||"center"===i?/x$/.test(t)===e<0?"left":"right":e<0?"up":"down")}switch(F){case"left":return`â ${B}`;case"right":return`${B} â`;case"up":return"right"===e?`${B} â`:`â ${B}`;case"down":return"right"===e?`${B} â`:`â ${B}`}return B}}function maybeLabelArrow(t="auto"){return!isNoneish(t)&&("boolean"==typeof t?t:keyword(t,"labelArrow",["auto","up","right","down","left"]))}function hasTemporalDomain(t){return isTemporal(t.domain())}function maybeScale(t,s){if(null==s)return s;const e=t(s);if(!e)throw new Error(`scale not found: ${s}`);return e}function legendSwatches(t,{opacity:s,...e}={}){if(!isOrdinalScale(t)&&!isThresholdScale(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return legendItems(t,e,(t,e,B,i)=>t.append("svg").attr("width",B).attr("height",i).attr("fill",e.scale).attr("fill-opacity",maybeNumberChannel(s)[1]).append("rect").attr("width","100%").attr("height","100%"))}function legendSymbols(t,{fill:s=(void 0!==t.hint?.fill?t.hint.fill:"none"),fillOpacity:e=1,stroke:B=(void 0!==t.hint?.stroke?t.hint.stroke:isNoneish(s)?"currentColor":"none"),strokeOpacity:i=1,strokeWidth:F=1.5,r:Q=4.5,...l}={},U){const[a,g]=maybeColorChannel(s),[I,c]=maybeColorChannel(B),n=maybeScale(U,a),r=maybeScale(U,I),o=Q*Q*Math.PI;return e=maybeNumberChannel(e)[1],i=maybeNumberChannel(i)[1],F=maybeNumberChannel(F)[1],legendItems(t,l,(s,B,Q,l)=>s.append("svg").attr("viewBox","-8 -8 16 16").attr("width",Q).attr("height",l).attr("fill","color"===a?t=>n.scale(t):g).attr("fill-opacity",e).attr("stroke","color"===I?t=>r.scale(t):c).attr("stroke-opacity",i).attr("stroke-width",F).append("path").attr("d",s=>{const e=pathRound();return t.scale(s).draw(e,o),e}))}function legendItems(t,s={},e){let{columns:B,tickFormat:i,fontVariant:F=inferFontVariant$2(t),swatchSize:Q=15,swatchWidth:l=Q,swatchHeight:U=Q,marginLeft:a=0,className:g,style:I,width:c}=s;const n=createContext(s);g=maybeClassName(g),i=inferTickFormat(t.scale,t.domain,void 0,i);const r=create("div",n).attr("class",`${g}-swatches ${g}-swatches-${null!=B?"columns":"wrap"}`);let o;return null!=B?(o=`:where(.${g}-swatches-columns .${g}-swatch) {\n  display: flex;\n  align-items: center;\n  break-inside: avoid;\n  padding-bottom: 1px;\n}\n:where(.${g}-swatches-columns .${g}-swatch::before) {\n  flex-shrink: 0;\n}\n:where(.${g}-swatches-columns .${g}-swatch-label) {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}`,r.style("columns",B).selectAll().data(t.domain).enter().append("div").attr("class",`${g}-swatch`).call(e,t,l,U).call(t=>t.append("div").attr("class",`${g}-swatch-label`).attr("title",i).text(i))):(o=`:where(.${g}-swatches-wrap) {\n  display: flex;\n  align-items: center;\n  min-height: 33px;\n  flex-wrap: wrap;\n}\n:where(.${g}-swatches-wrap .${g}-swatch) {\n  display: inline-flex;\n  align-items: center;\n  margin-right: 1em;\n}`,r.selectAll().data(t.domain).enter().append("span").attr("class",`${g}-swatch`).call(e,t,l,U).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),r.call(t=>t.insert("style","*").text(`:where(.${g}-swatches) {\n  font-family: system-ui, sans-serif;\n  font-size: 10px;\n  margin-bottom: 0.5em;\n}\n:where(.${g}-swatch > svg) {\n  margin-right: 0.5em;\n  overflow: visible;\n}\n${o}`)).style("margin-left",a?+a+"px":null).style("width",void 0===c?null:+c+"px").style("font-variant",impliedString(F,"normal")).call(applyInlineStyles,I).node()}const legendRegistry=new Map([["symbol",legendSymbols],["color",legendColor],["opacity",legendOpacity]]);function exposeLegends(t,s,e={}){return(B,i)=>{if(!legendRegistry.has(B))throw new Error(`unknown legend type: ${B}`);if(B in t)return legendRegistry.get(B)(t[B],legendOptions(s,e[B],i),s=>t[s])}}function legendOptions({className:t,...s},{label:e,ticks:B,tickFormat:i}={},F){return inherit(F,{className:t,...s},{label:e,ticks:B,tickFormat:i})}function legendColor(t,{legend:s=!0,...e}){if(!0===s&&(s="ordinal"===t.type?"swatches":"ramp"),void 0!==t.domain)switch(`${s}`.toLowerCase()){case"swatches":return legendSwatches(t,e);case"ramp":return legendRamp(t,e);default:throw new Error(`unknown legend type: ${s}`)}}function legendOpacity({type:t,interpolate:s,...e},{legend:B=!0,color:i=rgb(0,0,0),...F}){if(!s)throw new Error(`${t} opacity scales are not supported`);if(!0===B&&(B="ramp"),"ramp"!==`${B}`.toLowerCase())throw new Error(`${B} opacity legends are not supported`);return legendColor({type:t,...e,interpolate:interpolateOpacity(i)},{legend:B,...F})}function interpolateOpacity(t){const{r:s,g:e,b:B}=rgb(t)||rgb(0,0,0);return t=>`rgba(${s},${e},${B},${t})`}function createLegends(t,s,e){const B=[];for(const[i,F]of legendRegistry){const Q=e[i];if(Q?.legend&&i in t){const e=F(t[i],legendOptions(s,t[i],Q),s=>t[s]);null!=e&&B.push(e)}}return B}function maybeIdentityY(t={},s="y"){return hasY(t)?t:{...t,[s]:identity$1}}function exclusiveFacets(t,s){if(1===s.length)return{data:t,facets:s};const e=lengthof(t),B=new Uint8Array(e);let i=0;for(const t of s)for(const s of t)B[s]&&++i,B[s]=1;if(0===i)return{data:t,facets:s};const F=(t=slice(t))[reindex]=new Uint32Array(e+i);s=s.map(t=>slice(t,Uint32Array));let Q=e;B.fill(0);for(const e of s)for(let s=0,i=e.length;s<i;++s){const i=e[s];B[i]?(e[s]=Q,t[Q]=t[i],F[Q]=i,++Q):F[i]=i,B[i]=1}return{data:t,facets:s}}function stackY(t={},s={}){1===arguments.length&&([t,s]=mergeOptions$1(t));const{x1:e,x:B=e,y:i,...F}=s,[Q,l,U,a]=stack(B,i,"x","y",t,F);return{...Q,x1:e,x:l,y1:U,y2:a,y:mid(U,a)}}function maybeStackY({y:t,y1:s,y2:e,...B}={}){return B=withTip(B,"x"),void 0===s&&void 0===e?stackY({y:t,...B}):([s,e]=maybeZero(t,s,e),{...B,y1:s,y2:e})}function mergeOptions$1(t){const{offset:s,order:e,reverse:B,...i}=t;return[{offset:s,order:e,reverse:B},i]}const lengthy={length:!0};function stack(t,s=one,e,B,{offset:i,order:F,reverse:Q},l){if(null===s)throw new Error(`stack requires ${B}`);const U=maybeZ(l),[a,g]=maybeColumn(t),[I,c]=column(s),[n,r]=column(s);return I.hint=n.hint=lengthy,i=maybeOffset(i),F=maybeOrder(F,i,B),[basic(l,(B,l,a)=>{({data:B,facets:l}=exclusiveFacets(B,l));const I=null==t?void 0:g(maybeApplyInterval(valueof(B,t),a?.[e])),n=valueof(B,s,Float64Array),o=valueof(B,U),d=F&&F(B,I,n,o),C=lengthof(B),b=c(new Float64Array(C)),u=r(new Float64Array(C)),h=[];for(const t of l){const s=I?Array.from(group(t,t=>I[t]).values()):[t];if(d)for(const t of s)t.sort(d);for(const t of s){let s=0,e=0;Q&&t.reverse();for(const B of t){const t=n[B];t<0?s=u[B]=(b[B]=s)+t:t>0?e=u[B]=(b[B]=e)+t:u[B]=b[B]=e}}h.push(s)}return i&&i(h,b,u,o),{data:B,facets:l}}),a,I,n]}function maybeOffset(t){if(null!=t){if("function"==typeof t)return t;switch(`${t}`.toLowerCase()){case"expand":case"normalize":return offsetExpand;case"center":case"silhouette":return offsetCenter;case"wiggle":return offsetWiggle}throw new Error(`unknown offset: ${t}`)}}function extent(t,s){let e=0,B=0;for(const i of t){const t=s[i];t<e&&(e=t),t>B&&(B=t)}return[e,B]}function offsetExpand(t,s,e){for(const B of t)for(const t of B){const[B,i]=extent(t,e);for(const F of t){const t=1/(i-B||1);s[F]=t*(s[F]-B),e[F]=t*(e[F]-B)}}}function offsetCenter(t,s,e){for(const B of t){for(const t of B){const[B,i]=extent(t,e);for(const F of t){const t=(i+B)/2;s[F]-=t,e[F]-=t}}offsetZero(B,s,e)}offsetCenterFacets(t,s,e)}function offsetWiggle(t,s,e,B){for(const i of t){const t=new InternMap;let F=0;for(const Q of i){let i=-1;const l=Q.map(t=>Math.abs(e[t]-s[t])),U=Q.map(F=>{i=B?B[F]:++i;const Q=e[F]-s[F],l=t.has(i)?Q-t.get(i):0;return t.set(i,Q),l}),a=[0,...cumsum(U)];for(const t of Q)s[t]+=F,e[t]+=F;const g=sum(l);g&&(F-=sum(l,(t,s)=>(U[s]/2+a[s])*t)/g)}offsetZero(i,s,e)}offsetCenterFacets(t,s,e)}function offsetZero(t,s,e){const B=min$1(t,t=>min$1(t,t=>s[t]));for(const i of t)for(const t of i)s[t]-=B,e[t]-=B}function offsetCenterFacets(t,s,e){const B=t.length;if(1===B)return;const i=t.map(t=>t.flat()),F=i.map(t=>(min$1(t,t=>s[t])+max$1(t,t=>e[t]))/2),Q=min$1(F);for(let t=0;t<B;t++){const B=Q-F[t];for(const F of i[t])s[F]+=B,e[F]+=B}}function maybeOrder(t,s,e){if(void 0===t&&s===offsetWiggle)return orderInsideOut(ascendingDefined);if(null!=t){if("string"==typeof t){const s=t.startsWith("-"),B=s?descendingDefined:ascendingDefined;switch((s?t.slice(1):t).toLowerCase()){case"value":case e:return orderY(B);case"z":return orderZ(B);case"sum":return orderSum(B);case"appearance":return orderAppearance(B);case"inside-out":return orderInsideOut(B)}return orderAccessor(field(t))}if("function"==typeof t)return(1===t.length?orderAccessor:orderComparator)(t);if(isArray(t))return orderGiven(t);throw new Error(`invalid order: ${t}`)}}function orderY(t){return(s,e,B)=>(s,e)=>t(B[s],B[e])}function orderZ(t){return(s,e,B,i)=>(s,e)=>t(i[s],i[e])}function orderSum(t){return orderZDomain(t,(t,s,e,B)=>groupSort(range(t),t=>sum(t,t=>e[t]),t=>B[t]))}function orderAppearance(t){return orderZDomain(t,(t,s,e,B)=>groupSort(range(t),t=>s[greatest(t,t=>e[t])],t=>B[t]))}function orderInsideOut(t){return orderZDomain(t,(t,s,e,B)=>{const i=range(t),F=groupSort(i,t=>s[greatest(t,t=>e[t])],t=>B[t]),Q=rollup(i,t=>sum(t,t=>e[t]),t=>B[t]),l=[],U=[];let a=0;for(const t of F)a<0?(a+=Q.get(t),l.push(t)):(a-=Q.get(t),U.push(t));return U.reverse().concat(l)})}function orderAccessor(t){return s=>{const e=valueof(s,t);return(t,s)=>ascendingDefined(e[t],e[s])}}function orderComparator(t){return s=>isArray(s)?(e,B)=>t(s[e],s[B]):(e,B)=>t(s.get(e),s.get(B))}function orderGiven(t){return orderZDomain(ascendingDefined,()=>t)}function orderZDomain(t,s){return(e,B,i,F)=>{if(!F)throw new Error("missing channel: z");const Q=new InternMap(s(e,B,i,F).map((t,s)=>[t,s]));return(s,e)=>t(Q.get(F[s]),Q.get(F[e]))}}const defaults$4={ariaLabel:"rect"};class Rect extends Mark{constructor(t,s={}){const{x1:e,y1:B,x2:i,y2:F}=s;super(t,{x1:{value:e,scale:"x",type:null!=e&&null==i?"band":void 0,optional:!0},y1:{value:B,scale:"y",type:null!=B&&null==F?"band":void 0,optional:!0},x2:{value:i,scale:"x",optional:!0},y2:{value:F,scale:"y",optional:!0}},s,defaults$4),rectInsets(this,s),rectRadii(this,s)}render(t,s,e,B,i){const{x:F,y:Q}=s;let{x1:l,y1:U,x2:a,y2:g}=e;const{marginTop:I,marginRight:c,marginBottom:n,marginLeft:r,width:o,height:d}=B,{projection:C}=i,{insetTop:b,insetRight:u,insetBottom:h,insetLeft:y}=this,{rx:x,ry:A,rx1y1:G,rx1y2:R,rx2y1:L,rx2y2:m}=this;(l||a)&&!C&&isCollapsed(F)&&(l=a=null),(U||g)&&!C&&isCollapsed(Q)&&(U=g=null);const S=F?.bandwidth?F.bandwidth():0,p=Q?.bandwidth?Q.bandwidth():0;return create("svg:g",i).call(applyIndirectStyles,this,B,i).call(applyTransform,this,{},0,0).call(s=>s.selectAll().data(t).enter().call(G||R||L||m?t=>t.append("path").call(applyDirectStyles,this).call(applyRoundedRect,l&&a?t=>l[t]+(a[t]<l[t]?-u:y):l?t=>l[t]+y:r+y,U&&g?t=>U[t]+(g[t]<U[t]?-h:b):U?t=>U[t]+b:I+b,l&&a?t=>a[t]-(a[t]<l[t]?-y:u):l?t=>l[t]+S-u:o-c-u,U&&g?t=>g[t]-(g[t]<U[t]?-b:h):U?t=>U[t]+p-h:d-n-h,this).call(applyChannelStyles,this,e):t=>t.append("rect").call(applyDirectStyles,this).attr("x",l?a?t=>Math.min(l[t],a[t])+y:t=>l[t]+y:r+y).attr("y",U?g?t=>Math.min(U[t],g[t])+b:t=>U[t]+b:I+b).attr("width",l?a?t=>Math.max(0,Math.abs(a[t]-l[t])+S-y-u):S-y-u:o-c-r-u-y).attr("height",U?g?t=>Math.max(0,Math.abs(U[t]-g[t])+p-b-h):p-b-h:d-I-n-b-h).call(applyAttr,"rx",x).call(applyAttr,"ry",A).call(applyChannelStyles,this,e))).node()}}function rectInsets(t,{inset:s=0,insetTop:e=s,insetRight:B=s,insetBottom:i=s,insetLeft:F=s}={}){t.insetTop=number(e),t.insetRight=number(B),t.insetBottom=number(i),t.insetLeft=number(F)}function rectRadii(t,{r:s,rx:e,ry:B,rx1:i=s,ry1:F=s,rx2:Q=s,ry2:l=s,rx1y1:U=(void 0!==i?+i:void 0!==F?+F:0),rx1y2:a=(void 0!==i?+i:void 0!==l?+l:0),rx2y1:g=(void 0!==Q?+Q:void 0!==F?+F:0),rx2y2:I=(void 0!==Q?+Q:void 0!==l?+l:0)}={}){U||a||g||I?(t.rx1y1=U,t.rx1y2=a,t.rx2y1=g,t.rx2y2=I):(t.rx=impliedString(e,"auto"),t.ry=impliedString(B,"auto"))}function applyRoundedRect(t,s,e,B,i,F){const{rx1y1:Q,rx1y2:l,rx2y1:U,rx2y2:a}=F;"function"!=typeof s&&(s=constant(s)),"function"!=typeof e&&(e=constant(e)),"function"!=typeof B&&(B=constant(B)),"function"!=typeof i&&(i=constant(i));const g=Math.max(Math.abs(Q+U),Math.abs(l+a)),I=Math.max(Math.abs(Q+l),Math.abs(U+a));t.attr("d",t=>{const F=s(t),c=e(t),n=B(t),r=i(t),o=F>n,d=c>r,C=o?n:F,b=o?F:n,u=d?r:c,h=d?c:r,y=Math.min(1,(b-C)/g,(h-u)/I),x=y*(o?d?a:U:d?l:Q),A=y*(o?d?l:Q:d?a:U),G=y*(o?d?Q:l:d?U:a),R=y*(o?d?U:a:d?Q:l);return`M${C},${u+biasY(x,R)}A${x},${x} 0 0 ${x<0?0:1} ${C+biasX(x,R)},${u}H${b-biasX(A,G)}A${A},${A} 0 0 ${A<0?0:1} ${b},${u+biasY(A,G)}V${h-biasY(G,A)}A${G},${G} 0 0 ${G<0?0:1} ${b-biasX(G,A)},${h}H${C+biasX(R,x)}A${R},${R} 0 0 ${R<0?0:1} ${C},${h-biasY(R,x)}Z`})}function biasX(t,s){return s<0?t:Math.abs(t)}function biasY(t,s){return s<0?Math.abs(t):t}function rectY(t,s={}){return hasXY(s)||(s={...s,x:indexOf,y2:identity$1,interval:1}),new Rect(t,maybeStackY(maybeTrivialIntervalX(maybeIdentityY(s))))}const defaults$3={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},lineDefaults={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class Frame extends Mark{constructor(t={}){const{anchor:s=null}=t;super(singleton,void 0,t,null==s?defaults$3:lineDefaults),this.anchor=maybeKeyword(s,"anchor",["top","right","bottom","left"]),rectInsets(this,t),s||rectRadii(this,t)}render(t,s,e,B,i){const{marginTop:F,marginRight:Q,marginBottom:l,marginLeft:U,width:a,height:g}=B,{anchor:I,insetTop:c,insetRight:n,insetBottom:r,insetLeft:o}=this,{rx:d,ry:C,rx1y1:b,rx1y2:u,rx2y1:h,rx2y2:y}=this,x=U+o,A=a-Q-n,G=F+c,R=g-l-r;return create(I?"svg:line":b||u||h||y?"svg:path":"svg:rect",i).datum(0).call(applyIndirectStyles,this,B,i).call(applyDirectStyles,this).call(applyChannelStyles,this,e).call(applyTransform,this,{}).call("left"===I?t=>t.attr("x1",x).attr("x2",x).attr("y1",G).attr("y2",R):"right"===I?t=>t.attr("x1",A).attr("x2",A).attr("y1",G).attr("y2",R):"top"===I?t=>t.attr("x1",x).attr("x2",A).attr("y1",G).attr("y2",G):"bottom"===I?t=>t.attr("x1",x).attr("x2",A).attr("y1",R).attr("y2",R):b||u||h||y?t=>t.call(applyRoundedRect,x,G,A,R,this):t=>t.attr("x",x).attr("y",G).attr("width",A-x).attr("height",R-G).attr("rx",d).attr("ry",C)).node()}}function frame(t){return new Frame(t)}const defaults$2={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},ignoreChannels=new Set(["geometry","href","src","ariaLabel","scales"]);class Tip extends Mark{constructor(t,s={}){s.tip&&(s={...s,tip:!1}),void 0===s.title&&isIterable(t)&&isTextual(t)&&(s={...s,title:identity$1});const{x:e,y:B,x1:i,x2:F,y1:Q,y2:l,anchor:U,preferredAnchor:a="bottom",monospace:g,fontFamily:I=(g?"ui-monospace, monospace":void 0),fontSize:c,fontStyle:n,fontVariant:r,fontWeight:o,lineHeight:d=1,lineWidth:C=20,frameAnchor:b,format:u,textAnchor:h="start",textOverflow:y,textPadding:x=8,title:A,pointerSize:G=12,pathFilter:R="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=s;super(t,{x:{value:null!=i&&null!=F?null:e,scale:"x",optional:!0},y:{value:null!=Q&&null!=l?null:B,scale:"y",optional:!0},x1:{value:i,scale:"x",optional:null==F},y1:{value:Q,scale:"y",optional:null==l},x2:{value:F,scale:"x",optional:null==i},y2:{value:l,scale:"y",optional:null==Q},title:{value:A,optional:!0}},s,defaults$2),this.anchor=maybeAnchor$1(U,"anchor"),this.preferredAnchor=maybeAnchor$1(a,"preferredAnchor"),this.frameAnchor=maybeFrameAnchor(b),this.textAnchor=impliedString(h,"middle"),this.textPadding=+x,this.pointerSize=+G,this.pathFilter=string(R),this.lineHeight=+d,this.lineWidth=+C,this.textOverflow=maybeTextOverflow(y),this.monospace=!!g,this.fontFamily=string(I),this.fontSize=number(c),this.fontStyle=string(n),this.fontVariant=string(r),this.fontWeight=string(o);for(const t in defaults$2)t in this.channels&&(this[t]=defaults$2[t]);this.splitLines=splitter(this),this.clipLine=clipper(this),this.format="string"==typeof u||"function"==typeof u?{title:u}:{...u}}render(t,s,e,B,i){const F=this,{x:Q,y:l,fx:U,fy:a}=s,{ownerSVGElement:g,document:I}=i,{anchor:c,monospace:n,lineHeight:r,lineWidth:o}=this,{textPadding:d,pointerSize:C,pathFilter:b}=this,{marginTop:u,marginLeft:h}=B,{x1:y,y1:x,x2:A,y2:G,x:R=y??A,y:L=x??G}=e,m=U?U(t.fx)-h:0,S=a?a(t.fy)-u:0,[p,V]=applyFrameAnchor(this,B),Z=anchorX$1(e,p),E=anchorY$1(e,V),N=n?monospaceWidth:defaultWidth,X=N(ellipsis);let D,W;"title"in e?(D=getSourceChannels.call(this,{title:e.channels.title},s),W=formatTitle):(D=getSourceChannels.call(this,e.channels,s),W=formatChannels);const H=create("svg:g",i).call(applyIndirectStyles,this,B,i).call(applyIndirectTextStyles,this).call(applyTransform,this,{x:R&&Q,y:L&&l}).call(B=>B.selectAll().data(t).enter().append("g").attr("transform",t=>`translate(${Math.round(Z(t))},${Math.round(E(t))})`).call(applyDirectStyles,this).call(t=>t.append("path").attr("filter",b)).call(B=>B.append("text").each(function(B){const i=select(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const Q=W.call(F,B,t,D,s,e);if("string"==typeof Q)for(const t of F.splitLines(Q))v(i,{value:F.clipLine(t)});else{const t=new Set;for(const s of Q){const{label:e=""}=s;e&&t.has(e)||(t.add(e),v(i,s))}}})));function v(t,{label:s,value:e,color:B,opacity:i}){s??="",e??="";const F=null!=B||null!=i;let Q,l=100*o;const[U]=cut(s,l,N,X);if(U>=0)s=s.slice(0,U).trimEnd()+ellipsis,Q=e.trim(),e="";else{(s||!e&&!F)&&(e=" "+e);const[t]=cut(e,l-N(s),N,X);t>=0&&(Q=e.trim(),e=e.slice(0,t).trimEnd()+ellipsis)}const a=t.append("tspan").attr("x",0).attr("dy",`${r}em`).text("â");s&&a.append("tspan").attr("font-weight","bold").text(s),e&&a.append(()=>I.createTextNode(e)),F&&a.append("tspan").text(" â ").attr("fill",B).attr("fill-opacity",i).style("user-select","none"),Q&&a.append("title").text(Q)}function w(){const{width:t,height:s}=B.facet??B;H.selectChildren().each(function(e){let{x:B,width:i,height:Q}=this.getBBox();i=Math.round(i),Q=Math.round(Q);let l=c;if(void 0===l){const B=Z(e)+m,U=E(e)+S,a=B+i+C+2*d<t,g=B-i-C-2*d>0,I=U+Q+C+2*d<s,c=U-Q-C-2*d>0;l=a&&g?I&&c?F.preferredAnchor:c?"bottom":"top":I&&c?a?"left":"right":(a||g)&&(I||c)?`${c?"bottom":"top"}-${a?"left":"right"}`:F.preferredAnchor}const U=this.firstChild,a=this.lastChild;if(U.setAttribute("d",getPath(l,C,d,i,Q)),B)for(const t of a.childNodes)t.setAttribute("x",-B);a.setAttribute("y",+getLineOffset(l,a.childNodes.length,r).toFixed(6)+"em"),a.setAttribute("transform",`translate(${getTextTranslate(l,C,d,i,Q)})`)}),H.attr("visibility",null)}return t.length&&(H.attr("visibility","hidden"),g.isConnected?Promise.resolve().then(w):"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame(w)),H.node()}}function tip(t,{x:s,y:e,...B}={}){return void 0===B.frameAnchor&&([s,e]=maybeTuple(s,e)),new Tip(t,{...B,x:s,y:e})}function getLineOffset(t,s,e){return/^top(?:-|$)/.test(t)?.94-e:-.29-s*e}function getTextTranslate(t,s,e,B,i){switch(t){case"middle":return[-B/2,i/2];case"top-left":return[e,s+e];case"top":return[-B/2,s/2+e];case"top-right":return[-B-e,s+e];case"right":return[-s/2-B-e,i/2];case"bottom-left":return[e,-s-e];case"bottom":return[-B/2,-s/2-e];case"bottom-right":return[-B-e,-s-e];case"left":return[e+s/2,i/2]}}function getPath(t,s,e,B,i){const F=B+2*e,Q=i+2*e;switch(t){case"middle":return`M${-F/2},${-Q/2}h${F}v${Q}h${-F}z`;case"top-left":return`M0,0l${s},${s}h${F-s}v${Q}h${-F}z`;case"top":return`M0,0l${s/2},${s/2}h${(F-s)/2}v${Q}h${-F}v${-Q}h${(F-s)/2}z`;case"top-right":return`M0,0l${-s},${s}h${s-F}v${Q}h${F}z`;case"right":return`M0,0l${-s/2},${-s/2}v${s/2-Q/2}h${-F}v${Q}h${F}v${s/2-Q/2}z`;case"bottom-left":return`M0,0l${s},${-s}h${F-s}v${-Q}h${-F}z`;case"bottom":return`M0,0l${s/2},${-s/2}h${(F-s)/2}v${-Q}h${-F}v${Q}h${(F-s)/2}z`;case"bottom-right":return`M0,0l${-s},${-s}h${s-F}v${-Q}h${F}z`;case"left":return`M0,0l${s/2},${-s/2}v${s/2-Q/2}h${F}v${Q}h${-F}v${s/2-Q/2}z`}}function getSourceChannels(t,s){const e={};let B=this.format;B=maybeExpandPairedFormat(B,t,"x"),B=maybeExpandPairedFormat(B,t,"y"),this.format=B;for(const s in B){const i=B[s];if(null!==i&&!1!==i)if("fx"===s||"fy"===s)e[s]=!0;else{const B=getSource(t,s);B&&(e[s]=B)}}for(const s in t){if(s in e||s in B||ignoreChannels.has(s))continue;if(("x"===s||"y"===s)&&t.geometry)continue;const i=getSource(t,s);if(i){if(null==i.scale&&"color"===i.defaultScale)continue;e[s]=i}}this.facet&&(s.fx&&!("fx"in B)&&(e.fx=!0),s.fy&&!("fy"in B)&&(e.fy=!0));for(const t in e){const B=this.format[t];if("string"==typeof B){const i=e[t]?.value??s[t]?.domain()??[];this.format[t]=(isTemporal(i)?utcFormat:format$1)(B)}else if(void 0===B||!0===B){const e=s[t];this.format[t]=e?.bandwidth?inferTickFormat(e,e.domain()):formatDefault}}return e}function maybeExpandPairedFormat(t,s,e){if(!(e in t))return t;const B=`${e}1`,i=`${e}2`;if(!(!(B in t)&&B in s||!(i in t)&&i in s))return t;const F=Object.entries(t),Q=t[e];return F.splice(F.findIndex(([t])=>t===e)+1,0,[B,Q],[i,Q]),Object.fromEntries(F)}function formatTitle(t,s,{title:e}){return this.format.title(e.value[t],t)}function*formatChannels(t,s,e,B,i){for(const F in e){if("fx"===F||"fy"===F){yield{label:formatLabel(B,e,F),value:this.format[F](s[F],t)};continue}if("x1"===F&&"x2"in e)continue;if("y1"===F&&"y2"in e)continue;const Q=e[F];if("x2"===F&&"x1"in e)yield{label:formatPairLabel(B,e,"x"),value:formatPair(this.format.x2,e.x1,Q,t)};else if("y2"===F&&"y1"in e)yield{label:formatPairLabel(B,e,"y"),value:formatPair(this.format.y2,e.y1,Q,t)};else{const s=Q.value[t],l=Q.scale;if(!defined(s)&&null==l)continue;yield{label:formatLabel(B,e,F),value:this.format[F](s,t),color:"color"===l?i[F][t]:null,opacity:"opacity"===l?i[F][t]:null}}}}function formatPair(t,s,e,B){return e.hint?.length?`${t(e.value[B]-s.value[B],B)}`:`${t(s.value[B],B)}â${t(e.value[B],B)}`}function formatPairLabel(t,s,e){const B=formatLabel(t,s,`${e}1`,e),i=formatLabel(t,s,`${e}2`,e);return B===i?B:`${B}â${i}`}function formatLabel(t,s,e,B=e){const i=s[e],F=t[i?.scale??e];return String(F?.label??i?.label??B)}function plot(t={}){const{facet:s,style:e,title:B,subtitle:i,caption:F,ariaLabel:Q,ariaDescription:l}=t,U=maybeClassName(t.className),a=void 0===t.marks?[]:flatMarks(t.marks);a.push(...inferTips(a));const g=maybeTopFacet(s,t),I=new Map;for(const s of a){const e=maybeMarkFacet(s,g,t);e&&I.set(s,e)}const c=new Map;g&&addScaleChannels(c,[g],t),addScaleChannels(c,I,t);const n=flatMarks(inferAxes(a,c,t));for(const s of n){const e=maybeMarkFacet(s,g,t);e&&I.set(s,e)}a.unshift(...n);let r=createFacets(c,t);if(void 0!==r){const t=g?facetFilter(r,g):void 0;for(const s of a){if(null===s.facet||"super"===s.facet)continue;const e=I.get(s);void 0!==e&&(e.facetsIndex=null!=s.fx||null!=s.fy?facetFilter(r,e):t)}const s=new Set;for(const{facetsIndex:t}of I.values())t?.forEach((t,e)=>{t?.length>0&&s.add(e)});r.forEach(0<s.size&&s.size<r.length?(t,e)=>t.empty=!s.has(e):t=>t.empty=!1);for(const t of a)if("exclude"===t.facet){const s=I.get(t);void 0!==s&&(s.facetsIndex=facetExclude(s.facetsIndex))}}for(const s of registry.keys())isScaleOptions(t[s])&&"fx"!==s&&"fy"!==s&&c.set(s,[]);const o=new Map;for(const s of a){if(o.has(s))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:e,channels:B}=I.get(s)??{},{data:i,facets:F,channels:Q}=s.initialize(e,B,t);applyScaleTransforms(Q,t),o.set(s,{data:i,facets:F,channels:Q})}const d=createScales(addScaleChannels(c,o,t),t),C=createDimensions(d,a,t);autoScaleRange(d,C);const b=createScaleFunctions(d),{fx:u,fy:h}=b,y=u||h?innerDimensions(d,C):C,x=u||h?actualDimensions(b,C):C,A=createContext(t),G=A.document,R=creator("svg").call(G.documentElement);let L=R;A.ownerSVGElement=R,A.className=U,A.projection=createProjection(t,y),A.path=function(){return geoPath(this.projection??xyProjection(b))},A.filterFacets=(t,s)=>facetFilter(r,{channels:s,groups:facetGroups(t,s)}),A.getMarkState=t=>{const s=o.get(t),e=I.get(t);return{...s,channels:{...s.channels,...e?.channels}}},A.dispatchValue=t=>{L.value!==t&&(L.value=t,L.dispatchEvent(new A.document.defaultView.Event("input",{bubbles:!0})))};const m=new Set;for(const[s,e]of o)if(null!=s.initializer){const B="super"===s.facet?x:y,i=s.initializer(e.data,e.facets,e.channels,b,B,A);if(void 0!==i.data&&(e.data=i.data),void 0!==i.facets&&(e.facets=i.facets),void 0!==i.channels){const{fx:B,fy:F,...Q}=i.channels;inferChannelScales(Q),Object.assign(e.channels,Q);for(const s of Object.values(Q)){const{scale:e}=s;null==e||isPosition(registry.get(e))||(applyScaleTransform(s,t),m.add(e))}null==B&&null==F||I.set(s,!0)}}if(m.size){const s=new Map;addScaleChannels(s,o,t,t=>m.has(t)),addScaleChannels(c,o,t,t=>m.has(t));const e=inheritScaleLabels(createScales(s,t),d),{scales:B,...i}=createScaleFunctions(e);Object.assign(d,e),Object.assign(b,i),Object.assign(b.scales,B)}let S,p;void 0!==r&&(S={x:u?.domain(),y:h?.domain()},r=recreateFacets(r,S),p=facetTranslator(u,h,C));for(const[t,s]of o)s.values=t.scale(s.channels,b,A);const{width:V,height:Z}=C;select(R).attr("class",U).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",V).attr("height",Z).attr("viewBox",`0 0 ${V} ${Z}`).attr("aria-label",Q).attr("aria-description",l).call(t=>t.append("style").text(`:where(.${U}) {\n  --plot-background: white;\n  display: block;\n  height: auto;\n  height: intrinsic;\n  max-width: 100%;\n}\n:where(.${U} text),\n:where(.${U} tspan) {\n  white-space: pre;\n}`)).call(applyInlineStyles,e);for(const t of a){const{channels:s,values:e,facets:B}=o.get(t);if(void 0===r||"super"===t.facet){let i=null;if(B&&(i=B[0],i=t.filter(i,s,e),0===i.length))continue;const F=t.render(i,b,e,x,A);if(null==F)continue;R.appendChild(F)}else{let i;for(const F of r){if(!(t.facetAnchor?.(r,S,F)??!F.empty))continue;let Q=null;if(B){const i=I.has(t);if(Q=B[i?F.i:0],Q=t.filter(Q,s,e),0===Q.length)continue;i||Q!==B[0]||(Q=subarray(Q)),Q.fx=F.x,Q.fy=F.y,Q.fi=F.i}const l=t.render(Q,b,e,y,A);if(null!=l){(i??=select(R).append("g")).append(()=>l).datum(F);for(const t of["aria-label","aria-description","aria-hidden","transform"])l.hasAttribute(t)&&(i.attr(t,l.getAttribute(t)),l.removeAttribute(t))}}i?.selectChildren().each(p)}}const E=createLegends(d,A,t),{figure:N=null!=B||null!=i||null!=F||E.length>0}=t;N&&(L=G.createElement("figure"),L.className=`${U}-figure`,L.style.maxWidth="initial",null!=B&&L.append(createTitleElement(G,B,"h2")),null!=i&&L.append(createTitleElement(G,i,"h3")),L.append(...E,R),null!=F&&L.append(createFigcaption(G,F)),"value"in R&&(L.value=R.value,delete R.value)),L.scale=exposeScales(b.scales),L.legend=exposeLegends(d,A,t);const X=consumeWarnings();return X>0&&select(R).append("text").attr("x",V).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("â ï¸").append("title").text(`${X.toLocaleString("en-US")} warning${1===X?"":"s"}. Please check the console.`),L}function createTitleElement(t,s,e){if(s.ownerDocument)return s;const B=t.createElement(e);return B.append(s),B}function createFigcaption(t,s){const e=t.createElement("figcaption");return e.append(s),e}function flatMarks(t){return t.flat(1/0).filter(t=>null!=t).map(markify)}function markify(t){return"function"==typeof t.render?t:new Render(t)}class Render extends Mark{constructor(t){if("function"!=typeof t)throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function applyScaleTransforms(t,s){for(const e in t)applyScaleTransform(t[e],s);return t}function applyScaleTransform(t,s){const{scale:e,transform:B=!0}=t;if(null==e||!B)return;const{type:i,percent:F,interval:Q,transform:l=(F?t=>null==t?NaN:100*t:maybeIntervalTransform(Q,i))}=s[e]??{};null!=l&&(t.value=map(t.value,l),t.transform=!1)}function inferChannelScales(t){for(const s in t)inferChannelScale(s,t[s])}function addScaleChannels(t,s,e,B=yes){for(const{channels:i}of s.values())for(const s in i){const F=i[s],{scale:Q}=F;if(null!=Q&&B(Q))if("projection"===Q){if(!hasProjection(e)){const s=void 0===e.x?.domain,B=void 0===e.y?.domain;if(s||B){const[e,i]=getGeometryChannels(F);s&&addScaleChannel(t,"x",e),B&&addScaleChannel(t,"y",i)}}}else addScaleChannel(t,Q,F)}return t}function addScaleChannel(t,s,e){const B=t.get(s);void 0!==B?B.push(e):t.set(s,[e])}function maybeTopFacet(t,s){if(null==t)return;const{x:e,y:B}=t;if(null==e&&null==B)return;const i=dataify(t.data);if(null==i)throw new Error("missing facet data");const F={};null!=e&&(F.fx=createChannel(i,{value:e,scale:"fx"})),null!=B&&(F.fy=createChannel(i,{value:B,scale:"fy"})),applyScaleTransforms(F,s);return{channels:F,groups:facetGroups(i,F),data:t.data}}function maybeMarkFacet(t,s,e){if(null===t.facet||"super"===t.facet)return;const{fx:B,fy:i}=t;if(null!=B||null!=i){const s=dataify(t.data??B??i);if(void 0===s)throw new Error(`missing facet data in ${t.ariaLabel}`);if(null===s)return;const F={};return null!=B&&(F.fx=createChannel(s,{value:B,scale:"fx"})),null!=i&&(F.fy=createChannel(s,{value:i,scale:"fy"})),applyScaleTransforms(F,e),{channels:F,groups:facetGroups(s,F)}}if(void 0===s)return;const{channels:F,groups:Q,data:l}=s;if("auto"!==t.facet||t.data===l)return{channels:F,groups:Q};l.length>0&&(Q.size>1||1===Q.size&&F.fx&&F.fy&&[...Q][0][1].size>1)&&lengthof(dataify(t.data))===lengthof(l)&&warn(`Warning: the ${t.ariaLabel} mark appears to use faceted data, but isnât faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function derive(t,s={}){return initializer({...s,x:null,y:null},(s,e,B,i,F,Q)=>Q.getMarkState(t))}function inferTips(t){const s=[];for(const e of t){let t=e.tip;if(t){!0===t?t={}:"string"==typeof t&&(t={pointer:t});let{pointer:B,preferredAnchor:i}=t;B=/^x$/i.test(B)?pointerX:/^y$/i.test(B)?pointerY:pointer,t=B(derive(e,t)),t.title=null,void 0===i&&(t.preferredAnchor=B===pointerY?"left":"bottom");const F=tip(e.data,t);F.facet=e.facet,F.facetAnchor=e.facetAnchor,s.push(F)}}return s}function inferAxes(t,s,e){let{projection:B,x:i={},y:F={},fx:Q={},fy:l={},axis:U,grid:a,facet:g={},facet:{axis:I=U,grid:c}=g,x:{axis:n=U,grid:r=(null===n?null:a)}=i,y:{axis:o=U,grid:d=(null===o?null:a)}=F,fx:{axis:C=I,grid:b=(null===C?null:c)}=Q,fy:{axis:u=I,grid:h=(null===u?null:c)}=l}=e;(B||!isScaleOptions(i)&&!hasPositionChannel("x",t))&&(n=r=null),(B||!isScaleOptions(F)&&!hasPositionChannel("y",t))&&(o=d=null),s.has("fx")||(C=b=null),s.has("fy")||(u=h=null),void 0===n&&(n=!hasAxis(t,"x")),void 0===o&&(o=!hasAxis(t,"y")),void 0===C&&(C=!hasAxis(t,"fx")),void 0===u&&(u=!hasAxis(t,"fy")),!0===n&&(n="bottom"),!0===o&&(o="left"),!0===C&&(C="top"===n||null===n?"bottom":"top"),!0===u&&(u="right"===o||null===o?"left":"right");const y=[];return maybeGrid(y,h,gridFy,l),maybeAxis(y,u,axisFy,"right","left",g,l),maybeGrid(y,b,gridFx,Q),maybeAxis(y,C,axisFx,"top","bottom",g,Q),maybeGrid(y,d,gridY,F),maybeAxis(y,o,axisY,"left","right",e,F),maybeGrid(y,r,gridX,i),maybeAxis(y,n,axisX,"bottom","top",e,i),y}function maybeAxis(t,s,e,B,i,F,Q){if(!s)return;const l=isBoth(s);Q=axisOptions(l?B:s,F,Q);const{line:U}=Q;e!==axisY&&e!==axisX||!U||isNone(U)||t.push(frame(lineOptions(Q))),t.push(e(Q)),l&&t.push(e({...Q,anchor:i,label:null}))}function maybeGrid(t,s,e,B){s&&!isNone(s)&&t.push(e(gridOptions(s,B)))}function isBoth(t){return/^\s*both\s*$/i.test(t)}function axisOptions(t,s,{line:e=s.line,ticks:B,tickSize:i,tickSpacing:F,tickPadding:Q,tickFormat:l,tickRotate:U,fontVariant:a,ariaLabel:g,ariaDescription:I,label:c=s.label,labelAnchor:n,labelArrow:r=s.labelArrow,labelOffset:o}){return{anchor:t,line:e,ticks:B,tickSize:i,tickSpacing:F,tickPadding:Q,tickFormat:l,tickRotate:U,fontVariant:a,ariaLabel:g,ariaDescription:I,label:c,labelAnchor:n,labelArrow:r,labelOffset:o}}function lineOptions(t){const{anchor:s,line:e}=t;return{anchor:s,facetAnchor:s+"-empty",stroke:!0===e?void 0:e}}function gridOptions(t,{stroke:s=(isColor(t)?t:void 0),ticks:e=(isGridTicks(t)?t:void 0),tickSpacing:B,ariaLabel:i,ariaDescription:F}){return{stroke:s,ticks:e,tickSpacing:B,ariaLabel:i,ariaDescription:F}}function isGridTicks(t){switch(typeof t){case"number":return!0;case"string":return!isColor(t)}return isIterable(t)||"function"==typeof t?.range}function hasAxis(t,s){const e=`${s}-axis `;return t.some(t=>t.ariaLabel?.startsWith(e))}function hasPositionChannel(t,s){for(const e of s)for(const s in e.channels){const{scale:B}=e.channels[s];if(B===t||"projection"===B)return!0}return!1}function inheritScaleLabels(t,s){for(const e in t){const B=t[e],i=s[e];void 0===B.label&&i&&(B.label=i.label)}return t}function actualDimensions({fx:t,fy:s},e){const{marginTop:B,marginRight:i,marginBottom:F,marginLeft:Q,width:l,height:U}=outerDimensions(e),a=t&&outerRange(t),g=s&&outerRange(s);return{marginTop:s?g[0]:B,marginRight:t?l-a[1]:i,marginBottom:s?U-g[1]:F,marginLeft:t?a[0]:Q,inset:{marginTop:e.marginTop,marginRight:e.marginRight,marginBottom:e.marginBottom,marginLeft:e.marginLeft},width:l,height:U}}function outerRange(t){const s=t.domain();if(0===s.length)return[0,t.bandwidth()];let e=t(s[0]),B=t(s[s.length-1]);return B<e&&([e,B]=[B,e]),[e,B+t.bandwidth()]}const curves=new Map([["basis",curveBasis],["basis-closed",curveBasisClosed],["basis-open",curveBasisOpen],["bundle",curveBundle],["bump-x",bumpX],["bump-y",bumpY],["cardinal",curveCardinal],["cardinal-closed",curveCardinalClosed],["cardinal-open",curveCardinalOpen],["catmull-rom",curveCatmullRom],["catmull-rom-closed",curveCatmullRomClosed],["catmull-rom-open",curveCatmullRomOpen],["linear",curveLinear],["linear-closed",curveLinearClosed],["monotone-x",monotoneX],["monotone-y",monotoneY],["natural",curveNatural],["step",curveStep],["step-after",stepAfter],["step-before",stepBefore]]);function maybeCurve(t=curveLinear,s){if("function"==typeof t)return t;const e=curves.get(`${t}`.toLowerCase());if(!e)throw new Error(`unknown curve: ${t}`);if(void 0!==s){if("beta"in e)return e.beta(s);if("tension"in e)return e.tension(s);if("alpha"in e)return e.alpha(s)}return e}function maybeCurveAuto(t=curveAuto,s){return"function"!=typeof t&&"auto"===`${t}`.toLowerCase()?curveAuto:maybeCurve(t,s)}function curveAuto(t){return curveLinear(t)}function binX(t={y:"count"},s={}){[t,s]=mergeOptions(t,s);const{x:e,y:B}=s;return binn(maybeBinValue(e,s,identity$1),null,null,B,t,maybeInsetX(s))}function maybeDenseInterval(t,s,e={}){if(null==e?.interval)return e;const{reduce:B=reduceFirst}=e,i={filter:null};return null!=e[s]&&(i[s]=B),null!=e[`${s}1`]&&(i[`${s}1`]=B),null!=e[`${s}2`]&&(i[`${s}2`]=B),t(i,e)}function maybeDenseIntervalX(t={}){return maybeDenseInterval(binX,"y",withTip(t,"x"))}function binn(t,s,e,B,{data:i=reduceIdentity,filter:F=reduceCount,sort:Q,reverse:l,...U}={},a={}){t=maybeBin(t),s=maybeBin(s),U=maybeBinOutputs(U,a),i=maybeBinReduce(i,identity$1),Q=null==Q?void 0:maybeBinOutput("sort",Q,a),F=null==F?void 0:maybeBinEvaluator("filter",F,a),null!=B&&hasOutput(U,"y","y1","y2")&&(B=null);const[g,I]=maybeColumn(t),[c,n]=maybeColumn(t),[r,o]=maybeColumn(s),[d,C]=maybeColumn(s),[b,u]=null!=B?[B,"y"]:[],[h,y]=maybeColumn(b),{x:x,y:A,z:G,fill:R,stroke:L,x1:m,x2:S,y1:p,y2:V,domain:Z,cumulative:E,thresholds:N,interval:X,...D}=a,[W,H]=maybeColumn(G),[v]=maybeColorChannel(R),[w]=maybeColorChannel(L),[Y,f]=maybeColumn(v),[J,M]=maybeColumn(w);return{..."z"in a&&{z:W||G},..."fill"in a&&{fill:Y||R},..."stroke"in a&&{stroke:J||L},...basic(D,(e,B,a)=>{const g=maybeApplyInterval(valueof(e,b),a?.[u]),c=valueof(e,G),r=valueof(e,v),d=valueof(e,w),h=maybeSubgroup(U,{z:c,fill:r,stroke:d}),x=[],A=[],R=g&&y([]),L=c&&H([]),m=r&&f([]),S=d&&M([]),p=t&&I([]),V=t&&n([]),Z=s&&o([]),E=s&&C([]),N=bing(t,s,e);let X=0;for(const t of U)t.initialize(e);Q&&Q.initialize(e),F&&F.initialize(e);for(const t of B){const s=[];for(const s of U)s.scope("facet",t);Q&&Q.scope("facet",t),F&&F.scope("facet",t);for(const[B,l]of maybeGroup(t,h))for(const[t,a]of maybeGroup(l,g))for(const[l,I]of N(a))if(h&&(I.z=B),!F||F.reduce(l,I)){s.push(X++),A.push(i.reduceIndex(l,e,I)),g&&R.push(t),c&&L.push(h===c?B:c[(l.length>0?l:a)[0]]),r&&m.push(h===r?B:r[(l.length>0?l:a)[0]]),d&&S.push(h===d?B:d[(l.length>0?l:a)[0]]),p&&(p.push(I.x1),V.push(I.x2)),Z&&(Z.push(I.y1),E.push(I.y2));for(const t of U)t.reduce(l,I);Q&&Q.reduce(l,I)}x.push(s)}return maybeSort(x,Q,l),{data:A,facets:x}}),...!hasOutput(U,"x")&&(g?{x1:g,x2:c,x:mid(g,c)}:{x:x,x1:m,x2:S}),...!hasOutput(U,"y")&&(r?{y1:r,y2:d,y:mid(r,d)}:{y:A,y1:p,y2:V}),...h&&{[u]:h},...Object.fromEntries(U.map(({name:t,output:s})=>[t,s]))}}function mergeOptions({cumulative:t,domain:s,thresholds:e,interval:B,...i},F){return[i,{cumulative:t,domain:s,thresholds:e,interval:B,...F}]}function maybeBinValue(t,{cumulative:s,domain:e,thresholds:B,interval:i},F){return void 0===(t={...maybeValue(t)}).domain&&(t.domain=e),void 0===t.cumulative&&(t.cumulative=s),void 0===t.thresholds&&(t.thresholds=B),void 0===t.interval&&(t.interval=i),void 0===t.value&&(t.value=F),t.thresholds=maybeThresholds(t.thresholds,t.interval),t}function maybeBin(t){if(null==t)return;const{value:s,cumulative:e,domain:B=extent$1,thresholds:i}=t,F=t=>{let F,Q=valueof(t,s);if(isTemporal(Q)||isTimeThresholds(i)){Q=map(Q,coerceDate,Float64Array);let[t,s]="function"==typeof B?B(Q):B,e="function"!=typeof i||isInterval(i)?i:i(Q,t,s);"number"==typeof e&&(e=utcTickInterval(t,s,e)),isInterval(e)&&(B===extent$1&&(t=e.floor(t),s=e.offset(e.floor(s))),e=e.range(t,e.offset(s))),F=e}else{Q=coerceNumbers(Q);let[t,s]="function"==typeof B?B(Q):B,e="function"!=typeof i||isInterval(i)?i:i(Q,t,s);if("number"==typeof e)if(B===extent$1){let B=tickIncrement(t,s,e);if(isFinite(B))if(B>0){let i=Math.round(t/B),F=Math.round(s/B);i*B<=t||--i,F*B>s||++F;let Q=F-i+1;e=new Float64Array(Q);for(let t=0;t<Q;++t)e[t]=(i+t)*B}else if(B<0){B=-B;let i=Math.round(t*B),F=Math.round(s*B);i/B<=t||--i,F/B>s||++F;let Q=F-i+1;e=new Float64Array(Q);for(let t=0;t<Q;++t)e[t]=(i+t)/B}else e=[t];else e=[t]}else e=ticks(t,s,e);else isInterval(e)&&(B===extent$1&&(t=e.floor(t),s=e.offset(e.floor(s))),e=e.range(t,e.offset(s)));F=e}const l=[];if(1===F.length)l.push([F[0],F[0]]);else for(let t=1;t<F.length;++t)l.push([F[t-1],F[t]]);return l.bin=(e<0?bin1cn:e>0?bin1cp:bin1)(l,F,Q),l};return F.label=labelof(s),F}function maybeThresholds(t,s,e=thresholdAuto){if(void 0===t)return void 0===s?e:maybeRangeInterval(s);if("string"==typeof t){switch(t.toLowerCase()){case"freedman-diaconis":return thresholdFreedmanDiaconis;case"scott":return thresholdScott;case"sturges":return thresholdSturges;case"auto":return thresholdAuto}return utcInterval(t)}return t}function maybeBinOutputs(t,s){return maybeOutputs(t,s,maybeBinOutput)}function maybeBinOutput(t,s,e){return maybeOutput(t,s,e,maybeBinEvaluator)}function maybeBinEvaluator(t,s,e){return maybeEvaluator(t,s,e,maybeBinReduce)}function maybeBinReduce(t,s){return maybeReduce(t,s,maybeBinReduceFallback)}function maybeBinReduceFallback(t){switch(`${t}`.toLowerCase()){case"x":return reduceX;case"x1":return reduceX1;case"x2":return reduceX2;case"y":return reduceY;case"y1":return reduceY1;case"y2":return reduceY2;case"z":return reduceZ}throw new Error(`invalid bin reduce: ${t}`)}function thresholdAuto(t,s,e){return Math.min(200,thresholdScott(t,s,e))}function isTimeThresholds(t){return isTimeInterval(t)||isIterable(t)&&isTemporal(t)}function bing(t,s,e){const B=t?.(e),i=s?.(e);return B&&i?function*(t){const s=B.bin(t);for(const[t,[F,Q]]of B.entries()){const B=i.bin(s[t]);for(const[t,[s,l]]of i.entries())yield[B[t],{data:e,x1:F,y1:s,x2:Q,y2:l}]}}:B?function*(t){const s=B.bin(t);for(const[t,[i,F]]of B.entries())yield[s[t],{data:e,x1:i,x2:F}]}:function*(t){const s=i.bin(t);for(const[t,[B,F]]of i.entries())yield[s[t],{data:e,y1:B,y2:F}]}}function bin1(t,s,e){return s=coerceNumbers(s),B=>{const i=t.map(()=>[]);for(const t of B)i[bisectRight(s,e[t])-1]?.push(t);return i}}function bin1cp(t,s,e){const B=bin1(t,s,e);return t=>{const s=B(t);for(let t=1,e=s.length;t<e;++t){const e=s[t-1],B=s[t];for(const t of e)B.push(t)}return s}}function bin1cn(t,s,e){const B=bin1(t,s,e);return t=>{const s=B(t);for(let t=s.length-2;t>=0;--t){const e=s[t+1],B=s[t];for(const t of e)B.push(t)}return s}}function mid1(t,s){const e=(+t+ +s)/2;return t instanceof Date?new Date(e):e}const reduceX={reduceIndex:(t,s,{x1:e,x2:B})=>mid1(e,B)},reduceY={reduceIndex:(t,s,{y1:e,y2:B})=>mid1(e,B)},reduceX1={reduceIndex:(t,s,{x1:e})=>e},reduceX2={reduceIndex:(t,s,{x2:e})=>e},reduceY1={reduceIndex:(t,s,{y1:e})=>e},reduceY2={reduceIndex:(t,s,{y2:e})=>e},defaults$1={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function withDefaultSort(t){return void 0===t.sort&&void 0===t.reverse?sort$1({channel:"-r"},t):t}class Dot extends Mark{constructor(t,s={}){const{x:e,y:B,r:i,rotate:F,symbol:Q=symbolCircle,frameAnchor:l}=s,[U,a]=maybeNumberChannel(F,0),[g,I]=maybeSymbolChannel(Q),[c,n]=maybeNumberChannel(i,null==g?3:4.5);super(t,{x:{value:e,scale:"x",optional:!0},y:{value:B,scale:"y",optional:!0},r:{value:c,scale:"r",filter:positive,optional:!0},rotate:{value:U,optional:!0},symbol:{value:g,scale:"auto",optional:!0}},withDefaultSort(s),defaults$1),this.r=n,this.rotate=a,this.symbol=I,this.frameAnchor=maybeFrameAnchor(l);const{channels:r}=this,{symbol:o}=r;if(o){const{fill:t,stroke:s}=r;o.hint={fill:t?t.value===o.value?"color":"currentColor":this.fill??"currentColor",stroke:s?s.value===o.value?"color":"currentColor":this.stroke??"none"}}}render(t,s,e,B,i){const{x:F,y:Q}=s,{x:l,y:U,r:a,rotate:g,symbol:I}=e,{r:c,rotate:n,symbol:r}=this,[o,d]=applyFrameAnchor(this,B),C=r===symbolCircle,b=a?void 0:c*c*Math.PI;return negative(c)&&(t=[]),create("svg:g",i).call(applyIndirectStyles,this,B,i).call(applyTransform,this,{x:l&&F,y:U&&Q}).call(s=>s.selectAll().data(t).enter().append(C?"circle":"path").call(applyDirectStyles,this).call(C?t=>{t.attr("cx",l?t=>l[t]:o).attr("cy",U?t=>U[t]:d).attr("r",a?t=>a[t]:c)}:t=>{t.attr("transform",template`translate(${l?t=>l[t]:o},${U?t=>U[t]:d})${g?t=>` rotate(${g[t]})`:n?` rotate(${n})`:""}`).attr("d",a&&I?t=>{const s=pathRound();return I[t].draw(s,a[t]*a[t]*Math.PI),s}:a?t=>{const s=pathRound();return r.draw(s,a[t]*a[t]*Math.PI),s}:I?t=>{const s=pathRound();return I[t].draw(s,b),s}:(()=>{const t=pathRound();return r.draw(t,b),t})())}).call(applyChannelStyles,this,e)).node()}}function dot(t,{x:s,y:e,...B}={}){return void 0===B.frameAnchor&&([s,e]=maybeTuple(s,e)),new Dot(t,{...B,x:s,y:e})}const defaults={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Line extends Mark{constructor(t,s={}){const{x:e,y:B,z:i,curve:F,tension:Q}=s;super(t,{x:{value:e,scale:"x"},y:{value:B,scale:"y"},z:{value:maybeZ(s),optional:!0}},s,defaults),this.z=i,this.curve=maybeCurveAuto(F,Q),markers(this,s)}filter(t){return t}project(t,s,e){this.curve!==curveAuto&&super.project(t,s,e)}render(t,s,e,B,i){const{x:F,y:Q}=e,{curve:l}=this;return create("svg:g",i).call(applyIndirectStyles,this,B,i).call(applyTransform,this,s).call(s=>s.selectAll().data(groupIndex(t,[F,Q],this,e)).enter().append("path").call(applyDirectStyles,this).call(applyGroupedChannelStyles,this,e).call(applyGroupedMarkers,this,e,i).attr("d",l===curveAuto&&i.projection?sphereLine(i.path(),F,Q):shapeLine().curve(l).defined(t=>t>=0).x(t=>F[t]).y(t=>Q[t]))).node()}}function sphereLine(t,s,e){return s=coerceNumbers(s),e=coerceNumbers(e),B=>{let i=[];const F=[i];for(const t of B)-1===t?(i=[],F.push(i)):i.push([s[t],e[t]]);return t({type:"MultiLineString",coordinates:F})}}function lineY(t,{x:s=indexOf,y:e=identity$1,...B}={}){return new Line(t,maybeDenseIntervalX({...B,x:s,y:e}))}function decodeBase64(t,s){return atob(t)}function createURL(t,s,e){var B=void 0===s?null:s,i=decodeBase64(t),F=i.indexOf("\n",10)+1,Q=i.substring(F)+(B?"//# sourceMappingURL="+B:""),l=new Blob([Q],{type:"application/javascript"});return URL.createObjectURL(l)}function createBase64WorkerFactory(t,s,e){var B;return function(e){return B=B||createURL(t,s),new Worker(B,e)}}Mark.prototype.plot=function({marks:t=[],...s}={}){return plot({...s,marks:[...t,this]})};var WorkerFactory$2=createBase64WorkerFactory("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgdmFyIGRpc3RyaWJ1dGlvbnMkMSA9IHtleHBvcnRzOiB7fX07CgogIHZhciBkaXN0cmlidXRpb25zID0gZGlzdHJpYnV0aW9ucyQxLmV4cG9ydHM7CiAgKGZ1bmN0aW9uIChtb2R1bGUpIHsKCiAgICAvLyBBIG51bWJlciBvZiBsb2cgcHJvYmFiaWxpdHkgZGVuc2l0eSBmdW5jdGlvbnMgKFBERikuIE5hbWluZyBhbmQgcGFyYW1ldGVyaXphdGlvbgogICAgLy8gc2hvdWxkIG1hdGNoIFIncywgZXhjZXB0IGZvciB0aGF0IGFsbCBmdW5jdGlvbnMgcmVzaWRlIGluIGFuIGxkIG9iamVjdCAoCiAgICAvLyBhcyBpbiAibG9nIGRlbnNpdHkiKSwgc28gdG8gZ2V0IGEgbm9ybWFsIGxvZyBkZW5zaXR5IHlvdSB3b3VsZCB3cml0ZQogICAgLy8gbGQubm9ybSguLi4pLgogICAgLy8gTW9zdCBvZiB0aGUgY29kZSBiZWxvdyBpcyBkaXJlY3RseSB0YWtlbiBmcm9tIHRoZSBncmVhdCBKc3RhdCBwcm9qZWN0CiAgICAvLyAoaHR0cHM6Ly9naXRodWIuY29tL2pzdGF0Lykgd2hpY2ggaW5jbHVkZXMgUERGIGZvciBtYW55IGNvbW1vbiBwcm9iYWJpbGl0eQogICAgLy8gZGlzdHJpYnV0aW9ucy4gV2hhdCBJIGhhdmUgZG9uZSBpcyBvbmx5IHRvIGNvbnZlcnQgdGhlc2UgdG8gbG9nIFBERnMuCgogICAgLyoKICAgIE9yaWdpbmFsIHdvcmsgQ29weXJpZ2h0IChjKSAyMDEzIGpTdGF0CiAgICBNb2RpZmllZCB3b3JrIENvcHlyaWdodCAoYykgMjAxNSBSYXNtdXMgQsOlw6V0aCAKICAgIAlQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5CiAgICBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29mdHdhcmUiKSwgdG8gZGVhbAogICAgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cwogICAgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbAogICAgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzCiAgICBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgogICAgCVRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluCiAgICBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KICAgIAlUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUgogICAgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCiAgICBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUKICAgIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIKICAgIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sCiAgICBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOCiAgICBUSEUgU09GVFdBUkUuCiAgICAJKi8KCiAgICAvLyBUaGlzIGJvaWxlciBwbGF0ZSBjb2RlIGhlcmUgaXMgdGFrZW4gZnJvbToKICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWQvYmxvYi9tYXN0ZXIvdGVtcGxhdGVzL3JldHVybkV4cG9ydHMuanMKICAgIC8vIEl0IHNob3VsZCBtYWtlIHNodXJlIHRoYXQgbW9kdWxlIGNhbiBiZSBpbXBvcnRlZCBib3RoIGluIHRoZSBicm93c2VyLAogICAgLy8gTm9kZSwgYW5kIGJ5IHVzaW5nIHRoZSBBc3luY2hyb25vdXMgTW9kdWxlIERlZmluaXRpb24gc3RhbmRhcmQuCiAgICAvLyBJZiB0aGlzIG1vZHVsZSBpcyBsb2FkZWQgaW4gdGhlIGJyb3dzZXIgaXQgd2lsbCBjcmVhdGVkIHRoZSBnbG9iYWwKICAgIC8vIG9iamVjdCBsZCAuCiAgICAoZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHsKICAgICAgaWYgKG1vZHVsZS5leHBvcnRzKSB7CiAgICAgICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0CiAgICAgICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsCiAgICAgICAgLy8gbGlrZSBOb2RlLgogICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpCiAgICAgICAgcm9vdC5sZCA9IGZhY3RvcnkoKTsKICAgICAgfQogICAgfSkoZGlzdHJpYnV0aW9ucywgZnVuY3Rpb24gKCkgewogICAgICAvLyBPYmplY3QgdG8gaG9sZCB0aGUgZnVuY3Rpb25zIHRvIGJlIGV4cG9ydGVkLgogICAgICB2YXIgbGQgPSB7fTsKCiAgICAgIC8vLy8vLy8vLy8gSGVscGVyIGZ1bmN0aW9ucyAvLy8vLy8vLy8vCiAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgICB2YXIgbGdhbW1hID0gZnVuY3Rpb24gKHgpIHsKICAgICAgICB2YXIgaiA9IDA7CiAgICAgICAgdmFyIGNvZiA9IFs3Ni4xODAwOTE3Mjk0NzE0NiwgLTg2LjUwNTMyMDMyOTQxNjc4LCAyNC4wMTQwOTgyNDA4MzA5MSwgLTEuMjMxNzM5NTcyNDUwMTU1LCAwLjEyMDg2NTA5NzM4NjYxNzllLTIsIC01Mzk1MjM5Mzg0OTUzZS0xOF07CiAgICAgICAgdmFyIHNlciA9IDEuMDAwMDAwMDAwMTkwMDE1OwogICAgICAgIHZhciB4eCwgeSwgdG1wOwogICAgICAgIHRtcCA9ICh5ID0geHggPSB4KSArIDUuNTsKICAgICAgICB0bXAgLT0gKHh4ICsgMC41KSAqIGxvZyh0bXApOwogICAgICAgIGZvciAoOyBqIDwgNjsgaisrKSBzZXIgKz0gY29mW2pdIC8gKyt5OwogICAgICAgIHJldHVybiBsb2coMi41MDY2MjgyNzQ2MzEwMDA1ICogc2VyIC8geHgpIC0gdG1wOwogICAgICB9OwogICAgICBsZC5sZ2FtbWEgPSBsZ2FtbWE7CiAgICAgIHZhciBsZmFjdG9yaWFsID0gZnVuY3Rpb24gKG4pIHsKICAgICAgICByZXR1cm4gbiA8IDAgPyBOYU4gOiBsZ2FtbWEobiArIDEpOwogICAgICB9OwogICAgICBsZC5sZmFjdG9yaWFsID0gbGZhY3RvcmlhbDsKICAgICAgdmFyIGxjaG9vc2UgPSBmdW5jdGlvbiAobiwgaykgewogICAgICAgIHJldHVybiBsZmFjdG9yaWFsKG4pIC0gbGZhY3RvcmlhbChrKSAtIGxmYWN0b3JpYWwobiAtIGspOwogICAgICB9OwogICAgICBsZC5sY2hvb3NlID0gbGNob29zZTsKICAgICAgdmFyIGxiZXRhID0gZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICByZXR1cm4gbGdhbW1hKGEpICsgbGdhbW1hKGIpIC0gbGdhbW1hKGEgKyBiKTsKICAgICAgfTsKICAgICAgbGQubGJldGEgPSBsYmV0YTsKICAgICAgdmFyIGxvZyA9IE1hdGgubG9nOwogICAgICB2YXIgZXhwID0gTWF0aC5leHA7CiAgICAgIHZhciBhYnMgPSBNYXRoLmFiczsKICAgICAgdmFyIHBvdyA9IE1hdGgucG93OwogICAgICB2YXIgc3FydCA9IE1hdGguc3FydDsKICAgICAgdmFyIHBpID0gTWF0aC5QSTsKCiAgICAgIC8vLy8vLy8vLy8gQ29udGlub3VzIGRpc3RyaWJ1dGlvbnMgLy8vLy8vLy8vLwogICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAgIGxkLmJldGEgPSBmdW5jdGlvbiAoeCwgc2hhcGUxLCBzaGFwZTIpIHsKICAgICAgICBpZiAoeCA+IDEgfHwgeCA8IDApIHsKICAgICAgICAgIHJldHVybiAtSW5maW5pdHk7CiAgICAgICAgfQogICAgICAgIGlmIChzaGFwZTEgPT09IDEgJiYgc2hhcGUyID09PSAxKSB7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIChzaGFwZTEgLSAxKSAqIGxvZyh4KSArIChzaGFwZTIgLSAxKSAqIGxvZygxIC0geCkgLSBsYmV0YShzaGFwZTEsIHNoYXBlMik7CiAgICAgICAgfQogICAgICB9OwogICAgICBsZC5jYXVjaHkgPSBmdW5jdGlvbiAoeCwgbG9jYXRpb24sIHNjYWxlKSB7CiAgICAgICAgcmV0dXJuIGxvZyhzY2FsZSkgLSBsb2cocG93KHggLSBsb2NhdGlvbiwgMikgKyBwb3coc2NhbGUsIDIpKSAtIGxvZyhwaSk7CiAgICAgIH07CiAgICAgIGxkLm5vcm0gPSBmdW5jdGlvbiAoeCwgbWVhbiwgc2QpIHsKICAgICAgICByZXR1cm4gLTAuNSAqIGxvZygyICogcGkpIC0gbG9nKHNkKSAtIHBvdyh4IC0gbWVhbiwgMikgLyAoMiAqIHNkICogc2QpOwogICAgICB9OwoKICAgICAgLy8gQSBiaXZhcmlhdGUgTm9ybWFsIGRpc3RyaWJ1dGlvbiBwYXJhbWV0ZXJpemVkIGJ5IGFycmF5cyBvZiB0d28gbWVhbnMgYW5kIFNEcywgYW5kIAogICAgICAvLyB0aGUgY29ycmVsYXRpb24uCiAgICAgIGxkLmJpdmFybm9ybSA9IGZ1bmN0aW9uICh4LCBtZWFuLCBzZCwgY29ycikgewogICAgICAgIHZhciB6ID0gcG93KHhbMF0gLSBtZWFuWzBdLCAyKSAvIHBvdyhzZFswXSwgMikgKyBwb3coeFsxXSAtIG1lYW5bMV0sIDIpIC8gcG93KHNkWzFdLCAyKSAtIDIgKiBjb3JyICogKHhbMF0gLSBtZWFuWzBdKSAqICh4WzFdIC0gbWVhblsxXSkgLyAoc2RbMF0gKiBzZFsxXSk7CiAgICAgICAgdmFyIG5vcm1hbGl6aW5nX2ZhY3RvciA9IC0obG9nKDIpICsgbG9nKHBpKSArIGxvZyhzZFswXSkgKyBsb2coc2RbMV0pICsgMC41ICogbG9nKDEgLSBwb3coY29yciwgMikpKTsKICAgICAgICB2YXIgYml2YXJfbG9nX2RlbnMgPSBub3JtYWxpemluZ19mYWN0b3IgLSB6IC8gKDIgKiAoMSAtIHBvdyhjb3JyLCAyKSkpOwogICAgICAgIHJldHVybiBiaXZhcl9sb2dfZGVuczsKICAgICAgfTsKICAgICAgbGQubGFwbGFjZSA9IGZ1bmN0aW9uICh4LCBsb2NhdGlvbiwgc2NhbGUpIHsKICAgICAgICByZXR1cm4gLWFicyh4IC0gbG9jYXRpb24pIC8gc2NhbGUgLSBsb2coMiAqIHNjYWxlKTsKICAgICAgfTsKICAgICAgbGQuZGV4cCA9IGxkLmxhcGxhY2U7CiAgICAgIGxkLmdhbW1hID0gZnVuY3Rpb24gKHgsIHNoYXBlLCByYXRlKSB7CiAgICAgICAgdmFyIHNjYWxlID0gMSAvIHJhdGU7CiAgICAgICAgaWYgKHggPCAwKSB7CiAgICAgICAgICByZXR1cm4gLUluZmluaXR5OwogICAgICAgIH0KICAgICAgICBpZiAoeCA9PT0gMCAmJiBzaGFwZSA9PT0gMSkgewogICAgICAgICAgcmV0dXJuIC1sb2coc2NhbGUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gKHNoYXBlIC0gMSkgKiBsb2coeCkgLSB4IC8gc2NhbGUgLSBsZ2FtbWEoc2hhcGUpIC0gc2hhcGUgKiBsb2coc2NhbGUpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgbGQuaW52Z2FtbWEgPSBmdW5jdGlvbiAoeCwgc2hhcGUsIHNjYWxlKSB7CiAgICAgICAgaWYgKHggPD0gMCkgewogICAgICAgICAgcmV0dXJuIC1JbmZpbml0eTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIC0oc2hhcGUgKyAxKSAqIGxvZyh4KSAtIHNjYWxlIC8geCAtIGxnYW1tYShzaGFwZSkgKyBzaGFwZSAqIGxvZyhzY2FsZSk7CiAgICAgIH07CiAgICAgIGxkLmxub3JtID0gZnVuY3Rpb24gKHgsIG1lYW5sb2csIHNkbG9nKSB7CiAgICAgICAgaWYgKHggPD0gMCkgewogICAgICAgICAgcmV0dXJuIC1JbmZpbml0eTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIC1sb2coeCkgLSAwLjUgKiBsb2coMiAqIHBpKSAtIGxvZyhzZGxvZykgLSBwb3cobG9nKHgpIC0gbWVhbmxvZywgMikgLyAoMiAqIHNkbG9nICogc2Rsb2cpOwogICAgICB9OwogICAgICBsZC5wYXJldG8gPSBmdW5jdGlvbiAoeCwgc2NhbGUsIHNoYXBlKSB7CiAgICAgICAgaWYgKHggPCBzY2FsZSkgewogICAgICAgICAgcmV0dXJuIC1JbmZpbml0eTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGxvZyhzaGFwZSkgKyBzaGFwZSAqIGxvZyhzY2FsZSkgLSAoc2hhcGUgKyAxKSAqIGxvZyh4KTsKICAgICAgfTsKICAgICAgbGQudCA9IGZ1bmN0aW9uICh4LCBsb2NhdGlvbiwgc2NhbGUsIGRmKSB7CiAgICAgICAgZGYgPSBkZiA+IDFlMTAwID8gMWUxMDAgOiBkZjsKICAgICAgICByZXR1cm4gbGdhbW1hKChkZiArIDEpIC8gMikgLSBsZ2FtbWEoZGYgLyAyKSAtIGxvZyhzcXJ0KHBpICogZGYpICogc2NhbGUpICsgbG9nKHBvdygxICsgMSAvIGRmICogcG93KCh4IC0gbG9jYXRpb24pIC8gc2NhbGUsIDIpLCAtKGRmICsgMSkgLyAyKSk7CiAgICAgIH07CgogICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGphdmFzY3JpcHQgdHJhbnNsYXRpb24gb2YgdGhlIFIgY29kZSB1c2VkIHRvIGV2YWx1YXRlCiAgICAgIC8vIHRoZSBsb2cgZGVuc2l0eSBvZiBhIHdlaWJ1bGwgZGlzdHJpYnV0aW9uOiAKICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3djaC9yLXNvdXJjZS9ibG9iL2IxNTZlM2E3MTE5NjdmNTgxMzFlMjNjMWIxZGMxZWE5MGUyZjBjNDMvc3JjL25tYXRoL2R3ZWlidWxsLmMKICAgICAgbGQud2VpYnVsbCA9IGZ1bmN0aW9uICh4LCBzaGFwZSwgc2NhbGUpIHsKICAgICAgICBpZiAoeCA8IDApIHJldHVybiAtSW5maW5pdHk7CiAgICAgICAgaWYgKHggPT09IDAgJiYgc2hhcGUgPCAxKSByZXR1cm4gSW5maW5pdHk7CiAgICAgICAgdmFyIHRtcDEgPSBwb3coeCAvIHNjYWxlLCBzaGFwZSAtIDEpOwogICAgICAgIHZhciB0bXAyID0gdG1wMSAqICh4IC8gc2NhbGUpOwogICAgICAgIHJldHVybiAtdG1wMiArIGxvZyhzaGFwZSAqIHRtcDEgLyBzY2FsZSk7CiAgICAgIH07CgogICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGphdmFzY3JpcHQgdHJhbnNsYXRpb24gb2YgdGhlIFIgY29kZSB1c2VkIHRvIGV2YWx1YXRlCiAgICAgIC8vIHRoZSBsb2cgZGVuc2l0eSBvZiBhIGxvZ2lzdGljIGRpc3RyaWJ1dGlvbjogCiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS93Y2gvci1zb3VyY2UvYmxvYi9iMTU2ZTNhNzExOTY3ZjU4MTMxZTIzYzFiMWRjMWVhOTBlMmYwYzQzL3NyYy9ubWF0aC9kbG9naXMuYwogICAgICBsZC5sb2dpcyA9IGZ1bmN0aW9uICh4LCBsb2NhdGlvbiwgc2NhbGUpIHsKICAgICAgICB4ID0gYWJzKCh4IC0gbG9jYXRpb24pIC8gc2NhbGUpOwogICAgICAgIHZhciBlID0gZXhwKC14KTsKICAgICAgICB2YXIgZiA9IDEuMCArIGU7CiAgICAgICAgcmV0dXJuIC0oeCArIGxvZyhzY2FsZSAqIGYgKiBmKSk7CiAgICAgIH07CiAgICAgIGxkLmRpcmljaGxldCA9IGZ1bmN0aW9uICh4LCBhbHBoYSkgewogICAgICAgIHZhciBzdW1fYWxwaGEgPSAwOwogICAgICAgIHZhciBzdW1fbGdhbW1hX2FscGhhID0gMDsKICAgICAgICB2YXIgc3VtX2FscGhhX3N1Yl8xX2xvZ194ID0gMDsKICAgICAgICB2YXIgbiA9IGFscGhhLmxlbmd0aDsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgICAgc3VtX2FscGhhICs9IGFscGhhW2ldOwogICAgICAgICAgc3VtX2xnYW1tYV9hbHBoYSArPSBsZ2FtbWEoYWxwaGFbaV0pOwogICAgICAgICAgc3VtX2FscGhhX3N1Yl8xX2xvZ194ICs9IChhbHBoYVtpXSAtIDEpICogbG9nKHhbaV0pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbGdhbW1hKHN1bV9hbHBoYSkgLSBzdW1fbGdhbW1hX2FscGhhICsgc3VtX2FscGhhX3N1Yl8xX2xvZ194OwogICAgICB9OwogICAgICBsZC5leHAgPSBmdW5jdGlvbiAoeCwgcmF0ZSkgewogICAgICAgIHJldHVybiB4IDwgMCA/IC1JbmZpbml0eSA6IGxvZyhyYXRlKSAtIHJhdGUgKiB4OwogICAgICB9OwogICAgICBsZC51bmlmID0gZnVuY3Rpb24gKHgsIG1pbiwgbWF4KSB7CiAgICAgICAgcmV0dXJuIHggPCBtaW4gfHwgeCA+IG1heCA/IC1JbmZpbml0eSA6IGxvZygxIC8gKG1heCAtIG1pbikpOwogICAgICB9OwoKICAgICAgLy8vLy8vLy8vLyBEaXNjcmV0ZSBkaXN0cmlidXRpb25zIC8vLy8vLy8vLy8KICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAgIGxkLmJlcm4gPSBmdW5jdGlvbiAoeCwgcHJvYikgewogICAgICAgIHJldHVybiAhKHggPT09IDAgfHwgeCA9PT0gMSkgPyAtSW5maW5pdHkgOiBsb2coeCAqIHByb2IgKyAoMSAtIHgpICogKDEgLSBwcm9iKSk7CiAgICAgIH07CiAgICAgIGxkLmNhdCA9IGZ1bmN0aW9uICh4LCBwcm9icykgewogICAgICAgIGlmICh4IDwgMSB8fCB4ID4gcHJvYnMubGVuZ3RoKSB7CiAgICAgICAgICByZXR1cm4gLUluZmluaXR5OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gbG9nKHByb2JzW3ggLSAxXSk7CiAgICAgICAgfQogICAgICB9OwogICAgICBsZC5iaW5vbSA9IGZ1bmN0aW9uICh4LCBzaXplLCBwcm9iKSB7CiAgICAgICAgaWYgKHggPiBzaXplIHx8IHggPCAwKSB7CiAgICAgICAgICByZXR1cm4gLUluZmluaXR5OwogICAgICAgIH0KICAgICAgICBpZiAocHJvYiA9PT0gMCB8fCBwcm9iID09PSAxKSB7CiAgICAgICAgICByZXR1cm4gc2l6ZSAqIHByb2IgPT09IHggPyAwIDogLUluZmluaXR5OwogICAgICAgIH0KICAgICAgICByZXR1cm4gbGNob29zZShzaXplLCB4KSArIHggKiBsb2cocHJvYikgKyAoc2l6ZSAtIHgpICogbG9nKDEgLSBwcm9iKTsKICAgICAgfTsKICAgICAgbGQubmJpbm9tID0gZnVuY3Rpb24gKHgsIHNpemUsIHByb2IpIHsKICAgICAgICBpZiAoeCA8IDApIHsKICAgICAgICAgIHJldHVybiAtSW5maW5pdHk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBsY2hvb3NlKHggKyBzaXplIC0gMSwgc2l6ZSAtIDEpICsgeCAqIGxvZygxIC0gcHJvYikgKyBzaXplICogbG9nKHByb2IpOwogICAgICB9OwogICAgICBsZC5oeXBlciA9IGZ1bmN0aW9uICh4LCBtLCBuLCBrKSB7CiAgICAgICAgaWYgKHggPCAwIHx8IHggPiBrKSB7CiAgICAgICAgICByZXR1cm4gLUluZmluaXR5OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gbGNob29zZShtLCB4KSArIGxjaG9vc2UobiwgayAtIHgpIC0gbGNob29zZShtICsgbiwgayk7CiAgICAgICAgfQogICAgICB9OwogICAgICBsZC5wb2lzID0gZnVuY3Rpb24gKHgsIGxhbWJkYSkgewogICAgICAgIHJldHVybiB4IDwgMCA/IC1JbmZpbml0eSA6IGxvZyhsYW1iZGEpICogeCAtIGxhbWJkYSAtIGxmYWN0b3JpYWwoeCk7CiAgICAgIH07CiAgICAgIHJldHVybiBsZDsKICAgIH0pOwogIH0pKGRpc3RyaWJ1dGlvbnMkMSk7CiAgdmFyIGRpc3RyaWJ1dGlvbnNFeHBvcnRzID0gZGlzdHJpYnV0aW9ucyQxLmV4cG9ydHM7CgogIHZhciBtY21jJDEgPSB7ZXhwb3J0czoge319OwoKICB2YXIgbWNtYyA9IG1jbWMkMS5leHBvcnRzOwogIChmdW5jdGlvbiAobW9kdWxlKSB7CgogICAgLy8gVGhpcyBib2lsZXIgcGxhdGUgY29kZSBoZXJlIGlzIHRha2VuIGZyb206CiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdW1kanMvdW1kL2Jsb2IvbWFzdGVyL3RlbXBsYXRlcy9yZXR1cm5FeHBvcnRzLmpzCiAgICAvLyBJdCBzaG91bGQgbWFrZSBzaHVyZSB0aGF0IG1vZHVsZSBjYW4gYmUgaW1wb3J0ZWQgYm90aCBpbiB0aGUgYnJvd3NlciwKICAgIC8vIE5vZGUsIGFuZCBieSB1c2luZyB0aGUgQXN5bmNocm9ub3VzIE1vZHVsZSBEZWZpbml0aW9uIHN0YW5kYXJkLgogICAgLy8gSWYgdGhpcyBtb2R1bGUgaXMgbG9hZGVkIGluIHRoZSBicm93c2VyIGl0IHdpbGwgY3JlYXRlZCB0aGUgZ2xvYmFsCiAgICAvLyBvYmplY3QgbWNtYyAuCiAgICAoZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHsKICAgICAgaWYgKG1vZHVsZS5leHBvcnRzKSB7CiAgICAgICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0CiAgICAgICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsCiAgICAgICAgLy8gbGlrZSBOb2RlLgogICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpCiAgICAgICAgcm9vdC5tY21jID0gZmFjdG9yeSgpOwogICAgICB9CiAgICB9KShtY21jLCBmdW5jdGlvbiAoKSB7CiAgICAgIC8vLyBUaGUgYWN0dWFsIG1vZHVsZSBjb2RlIHN0YXJ0cyBoZXJlIC8vLwogICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gIAoKICAgICAgLy8vLy8vLy8vLyBIZWxwZXIgRnVuY3Rpb25zIC8vLy8vLy8vLy8KICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAgIC8qKiBSZXR1cm5zIGEgcmFuZG9tIHJlYWwgbnVtYmVyIGJldHdlZW4gbWluIGFuZCBtYXggKi8KICAgICAgdmFyIHJ1bmlmID0gZnVuY3Rpb24gKG1pbiwgbWF4KSB7CiAgICAgICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSArIG1pbjsKICAgICAgfTsKCiAgICAgIC8qKiBSZXR1cm5zIGEgcmFuZG9tIGludGVnZXIgYmV0d2VlbiBtaW4gYW5kIG1heCAqLwogICAgICB2YXIgcnVuaWZfZGlzY3JldGUgPSBmdW5jdGlvbiAobWluLCBtYXgpIHsKICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjsKICAgICAgfTsKCiAgICAgIC8qKiBSZXR1cm5zIGEgcmFuZG9tIHJlYWwgbnVtYmVyIGZyb20gYSBub3JtYWwgZGlzdHJpYmJ1dGlvbiBkZWZpbmVkCiAgICAgICAqICBieSBtZWFuIGFuZCBzZC4gCiAgICAgICAqICBBZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2pzdGF0L2pzdGF0L2Jsb2IvbWFzdGVyL3NyYy9zcGVjaWFsLmpzICovCiAgICAgIHZhciBybm9ybSA9IGZ1bmN0aW9uIChtZWFuLCBzZCkgewogICAgICAgIHZhciB1LCB2LCB4LCB5LCBxOwogICAgICAgIGRvIHsKICAgICAgICAgIHUgPSBNYXRoLnJhbmRvbSgpOwogICAgICAgICAgdiA9IDEuNzE1NiAqIChNYXRoLnJhbmRvbSgpIC0gMC41KTsKICAgICAgICAgIHggPSB1IC0gMC40NDk4NzE7CiAgICAgICAgICB5ID0gTWF0aC5hYnModikgKyAwLjM4NjU5NTsKICAgICAgICAgIHEgPSB4ICogeCArIHkgKiAoMC4xOTYwMCAqIHkgLSAwLjI1NDcyICogeCk7CiAgICAgICAgfSB3aGlsZSAocSA+IDAuMjc1OTcgJiYgKHEgPiAwLjI3ODQ2IHx8IHYgKiB2ID4gLTQgKiBNYXRoLmxvZyh1KSAqIHUgKiB1KSk7CiAgICAgICAgcmV0dXJuIHYgLyB1ICogc2QgKyBtZWFuOwogICAgICB9OwoKICAgICAgLyoqIFJldHVybnMgYSBkZWVwIGNsb25lIG9mIHNyYywgc29ydCBvZi4uLiBJdCBvbmx5IGNvcGllcyBhIGxpbWl0ZWQKICAgICAgICogbnVtYmVyIG9mIHR5cGVzIGFuZCwgZm9yIGV4YW1wbGUsIGZ1bmN0aW9uIGFyZSBub3QgY29waWVkLiAKICAgICAgICogRnJvbSBodHRwOi8vZGF2aWR3YWxzaC5uYW1lL2phdmFzY3JpcHQtY2xvbmUKICAgICAgICovCiAgICAgIHZhciBkZWVwX2Nsb25lID0gZnVuY3Rpb24gKHNyYykgewogICAgICAgIGZ1bmN0aW9uIG1peGluKGRlc3QsIHNvdXJjZSwgY29weUZ1bmMpIHsKICAgICAgICAgIHZhciBuYW1lLAogICAgICAgICAgICBzLAogICAgICAgICAgICBlbXB0eSA9IHt9OwogICAgICAgICAgZm9yIChuYW1lIGluIHNvdXJjZSkgewogICAgICAgICAgICAvLyB0aGUgKCEobmFtZSBpbiBlbXB0eSkgfHwgZW1wdHlbbmFtZV0gIT09IHMpIGNvbmRpdGlvbiBhdm9pZHMgY29weWluZyBwcm9wZXJ0aWVzIGluICJzb3VyY2UiCiAgICAgICAgICAgIC8vIGluaGVyaXRlZCBmcm9tIE9iamVjdC5wcm90b3R5cGUuCSBGb3IgZXhhbXBsZSwgaWYgZGVzdCBoYXMgYSBjdXN0b20gdG9TdHJpbmcoKSBtZXRob2QsCiAgICAgICAgICAgIC8vIGRvbid0IG92ZXJ3cml0ZSBpdCB3aXRoIHRoZSB0b1N0cmluZygpIG1ldGhvZCB0aGF0IHNvdXJjZSBpbmhlcml0ZWQgZnJvbSBPYmplY3QucHJvdG90eXBlCiAgICAgICAgICAgIHMgPSBzb3VyY2VbbmFtZV07CiAgICAgICAgICAgIGlmICghKG5hbWUgaW4gZGVzdCkgfHwgZGVzdFtuYW1lXSAhPT0gcyAmJiAoIShuYW1lIGluIGVtcHR5KSB8fCBlbXB0eVtuYW1lXSAhPT0gcykpIHsKICAgICAgICAgICAgICBkZXN0W25hbWVdID0gY29weUZ1bmMgPyBjb3B5RnVuYyhzKSA6IHM7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBkZXN0OwogICAgICAgIH0KICAgICAgICBpZiAoIXNyYyB8fCB0eXBlb2Ygc3JjICE9ICJvYmplY3QiIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChzcmMpID09PSAiW29iamVjdCBGdW5jdGlvbl0iKSB7CiAgICAgICAgICAvLyBudWxsLCB1bmRlZmluZWQsIGFueSBub24tb2JqZWN0LCBvciBmdW5jdGlvbgogICAgICAgICAgcmV0dXJuIHNyYzsgLy8gYW55dGhpbmcKICAgICAgICB9CiAgICAgICAgaWYgKHNyYy5ub2RlVHlwZSAmJiAiY2xvbmVOb2RlIiBpbiBzcmMpIHsKICAgICAgICAgIC8vIERPTSBOb2RlCiAgICAgICAgICByZXR1cm4gc3JjLmNsb25lTm9kZSh0cnVlKTsgLy8gTm9kZQogICAgICAgIH0KICAgICAgICBpZiAoc3JjIGluc3RhbmNlb2YgRGF0ZSkgewogICAgICAgICAgLy8gRGF0ZQogICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHNyYy5nZXRUaW1lKCkpOyAvLyBEYXRlCiAgICAgICAgfQogICAgICAgIGlmIChzcmMgaW5zdGFuY2VvZiBSZWdFeHApIHsKICAgICAgICAgIC8vIFJlZ0V4cAogICAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoc3JjKTsgLy8gUmVnRXhwCiAgICAgICAgfQogICAgICAgIHZhciByLCBpLCBsOwogICAgICAgIGlmIChzcmMgaW5zdGFuY2VvZiBBcnJheSkgewogICAgICAgICAgLy8gYXJyYXkKICAgICAgICAgIHIgPSBbXTsKICAgICAgICAgIGZvciAoaSA9IDAsIGwgPSBzcmMubGVuZ3RoOyBpIDwgbDsgKytpKSB7CiAgICAgICAgICAgIGlmIChpIGluIHNyYykgewogICAgICAgICAgICAgIHIucHVzaChkZWVwX2Nsb25lKHNyY1tpXSkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIGdlbmVyaWMgb2JqZWN0cwogICAgICAgICAgciA9IHNyYy5jb25zdHJ1Y3RvciA/IG5ldyBzcmMuY29uc3RydWN0b3IoKSA6IHt9OwogICAgICAgIH0KICAgICAgICByZXR1cm4gbWl4aW4ociwgc3JjLCBkZWVwX2Nsb25lKTsKICAgICAgfTsKCiAgICAgIC8qKiBTcGVjaWFsaXplZCBjbG9uZSBmdW5jdGlvbiB0aGF0IG9ubHkgY2xvbmVzIHNjYWxhcnMgYW5kIG5lc3RlZCBhcnJheXMgd2hlcmUKICAgICAgICogZWFjaCBhcnJheSBlaXRoZXIgY29uc2lzdHMgb2YgYWxsIGFycmF5cyBvciBhbGwgbnVtYmVycy4gVGhpcyBmdW5jdGlvbgogICAgICAgKiBpcyBtZWFudCBhcyBhIGZhc3Qgd2F5IG9mIGNsb25pbmcgcGFyYW1ldGVyIGRyYXdzIHdpdGhpbiB0aGUgbWNtYyBzYW1wbGluZwogICAgICAgKiBsb29wLgogICAgICAgKi8KICAgICAgdmFyIGNsb25lX3BhcmFtX2RyYXcgPSBmdW5jdGlvbiAoeCkgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KHgpKSB7CiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh4WzBdKSkgewogICAgICAgICAgICAvLyB4IGlzIGFuIGFycmF5IG9mIGFycmF5cyBzbyB3ZSBuZWVkIHRvIGNsb25lIGl0IHJlY3Vyc2l2ZWx5CiAgICAgICAgICAgIHZhciB4X2NvcHkgPSBbXTsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHgubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICB4X2NvcHkucHVzaChjbG9uZV9wYXJhbV9kcmF3KHhbaV0pKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4geF9jb3B5OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gV2UnbGwgYXNzdW1lIHggaXMgYSBhcnJheXMgb2Ygc2NhbGFycwogICAgICAgICAgICByZXR1cm4geC5zbGljZSgwKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gV2UnbGwgYXNzdW1lIHggaXMgYSBzY2FsYXIKICAgICAgICAgIHJldHVybiB4OwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgb2JqZWN0IGlzIGEgbnVtYmVyLgogICAgICAgKi8KICAgICAgdmFyIGlzX251bWJlciA9IGZ1bmN0aW9uIChvYmplY3QpIHsKICAgICAgICByZXR1cm4gdHlwZW9mIG9iamVjdCA9PSAibnVtYmVyIiB8fCB0eXBlb2Ygb2JqZWN0ID09ICJvYmplY3QiICYmIG9iamVjdC5jb25zdHJ1Y3RvciA9PT0gTnVtYmVyOwogICAgICB9OwoKICAgICAgLyoqCiAgICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGEgKHBvc3NpYmx5IG11bHRpZGltZW5zaW9uYWwvbmVzdGVkKSBhcnJheS4KICAgICAgICogQHBhcmFtIGRpbSAtIEFuIGFycmF5IGdpdmluZyB0aGUgZGltZW5zaW9uIG9mIHRoZSBhcnJheS4gRm9yIGV4YW1wbGUsCiAgICAgICAqICAgWzVdIHdvdWxkIHlpZWxkIGEgNSBlbGVtZW50IGFycmF5LCBhbmQgWzMsM10gd291bGQgeWllbGQgYSAzIGJ5IDMgbWF0cml4LgogICAgICAgKiBAcGFyYW0gaW5pdCAtIEEgdmFsdWUgb3IgYSBmdW5jdGlvbiB1c2VkIHRvIGZpbGwgaW4gdGhlIGVhY2ggZWxlbWVudCBpbgogICAgICAgKiAgIHRoZSBhcnJheS4gSWYgaXQgaXMgYSBmdW5jdGlvbiBpdCBzaG91bGQgdGFrZSBubyBhcmd1bWVudHMsIGl0IHdpbGwgYmUgCiAgICAgICAqICAgZXZhbHVhdGVkIG9uY2UgZm9yIGVhY2ggZWxlbWVudCwgYW5kIGl0J3MgcmV0dXJuIHZhbHVlIHdpbGwgYmUgdXNlZCB0bwogICAgICAgKiAgIGZpbGwgaW4gZWFjaCBlbGVtZW50LgogICAgICAgKiBAZXhhbXBsZSAKICAgICAgICogLy8gVGhlIGZvbGxvd2luZyB3b3VsZCByZXR1cm4gW1sxLDFdLFsxLDFdLFsxLDFdXQogICAgICAgKiBjcmVhdGVfYXJyYXkoWzIsM10sIDEpCiAgICAgICAqLwogICAgICB2YXIgY3JlYXRlX2FycmF5ID0gZnVuY3Rpb24gKGRpbSwgaW5pdCkgewogICAgICAgIHZhciBhcnIgPSBuZXcgQXJyYXkoZGltWzBdKTsKICAgICAgICB2YXIgaTsKICAgICAgICBpZiAoZGltLmxlbmd0aCA9PSAxKSB7CiAgICAgICAgICAvLyBGaWxsIGl0IHVwIHdpdGggaW5pdAogICAgICAgICAgaWYgKHR5cGVvZiBpbml0ID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykgewogICAgICAgICAgICAgIGFycltpXSA9IGluaXQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7CiAgICAgICAgICAgICAgYXJyW2ldID0gaW5pdDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoZGltLmxlbmd0aCA+IDEpIHsKICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykgewogICAgICAgICAgICBhcnJbaV0gPSBjcmVhdGVfYXJyYXkoZGltLnNsaWNlKDEpLCBpbml0KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgImNyZWF0ZV9hcnJheSBjYW4ndCBjcmVhdGUgYSBkaW1lbnNpb25sZXNzIGFycmF5IjsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGFycjsKICAgICAgfTsKCiAgICAgIC8qKgogICAgICAgKiBSZXR1cm4gdGhlIGRpbWVuc2lvbnMgb2YgYSBwb3NzaWJseSBuZXN0ZWQgYXJyYXkgYXMgYW4gYXJyYXkuIEZvciAKICAgICAgICogZXhhbXBsZSwgYXJyYXlfZGltKCBbWzEsIDJdLCBbMSwgMl1dICkgc2hvdWxkIHJldHVybiBbMiwgMl0KICAgICAgICogQXNzdW1lcyB0aGF0IGFsbCBhcnJheXMgaW5zaWRlIGFub3RoZXIgYXJyYXkgYXJlIG9mIHRoZSBzYW1lIGxlbmd0aC4KICAgICAgICogQGV4YW1wbGUKICAgICAgICogLy8gU2hvdWxkIHJldHVybiBbNCwgMiwgMV0KICAgICAgICogYXJyYXlfZGltKGNyZWF0ZV9hcnJheShbNCwgMiwgMV0sIDApKQogICAgICAgKi8KICAgICAgdmFyIGFycmF5X2RpbSA9IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYVswXSkpIHsKICAgICAgICAgIHJldHVybiBbYS5sZW5ndGhdLmNvbmNhdChhcnJheV9kaW0oYVswXSkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gW2EubGVuZ3RoXTsKICAgICAgICB9CiAgICAgIH07CgogICAgICAvKioKICAgICAgICogQ2hlY2tzIGlmIHR3byBhcnJheXMgYXJlIGVxdWFsIGluIHRoZSBzZW5zZSB0aGF0IHRoZXkgY29udGFpbiB0aGUgc2FtZSBlbGVtZW50cwogICAgICAgKiBhcyBqdWRnZWQgYnkgdGhlICI9PSIgb3BlcmF0b3IuIFJldHVybnMgdHJ1ZSBvciBmYWxzZS4KICAgICAgICogQWRhcHRlZCBmcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE0ODUzOTc0LzEwMDE4NDgKICAgICAgICovCiAgICAgIHZhciBhcnJheV9lcXVhbCA9IGZ1bmN0aW9uIChhMSwgYTIpIHsKICAgICAgICBpZiAoYTEubGVuZ3RoICE9IGEyLmxlbmd0aCkgcmV0dXJuIGZhbHNlOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYTEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgbmVzdGVkIGFycmF5cwogICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYTFbaV0pICYmIEFycmF5LmlzQXJyYXkoYTJbaV0pKSB7CiAgICAgICAgICAgIC8vIHJlY3Vyc2UgaW50byB0aGUgbmVzdGVkIGFycmF5cwogICAgICAgICAgICBpZiAoIWFycmF5X2VxdWFsKGExW2ldLCBhMltpXSkpIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0gZWxzZSBpZiAoYTFbaV0gIT0gYTJbaV0pIHsKICAgICAgICAgICAgLy8gV2FybmluZyAtIHR3byBkaWZmZXJlbnQgb2JqZWN0IGluc3RhbmNlcyB3aWxsIG5ldmVyIGJlIGVxdWFsOiB7eDoyMH0gIT0ge3g6MjB9CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH07CgogICAgICAvKioKICAgICAgICogVHJhdmVyc2VzIGEgcG9zc2libHkgbmVzdGVkIGFycmF5IGEgYW5kIGFwcGxpZXMgZnVuIHRvIGFsbCAibGVhZiBub2RlcyIsIAogICAgICAgKiB0aGF0IGlzLCB2YWx1ZXMgdGhhdCBhcmUgbm90IGFycmF5cy4gUmV0dXJucyBhbiBhcnJheSBvZiB0aGUgc2FtZSBzaXplIGFzCiAgICAgICAqIGEuCiAgICAgICAqLwogICAgICB2YXIgbmVzdGVkX2FycmF5X2FwcGx5ID0gZnVuY3Rpb24gKGEsIGZ1bikgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGEpKSB7CiAgICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEFycmF5KGEubGVuZ3RoKTsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICByZXN1bHRbaV0gPSBuZXN0ZWRfYXJyYXlfYXBwbHkoYVtpXSwgZnVuKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmdW4oYSk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgLyoqIFJhbmRvbWl6aW5nIHRoZSBhcnJheSBlbGVtZW50IG9yZGVyIGluLXBsYWNlLiBVc2luZyBEdXJzdGVuZmVsZAogICAgICAgKiBzaHVmZmxlIGFsZ29yaXRobS4gQWRhcHRlZCBmcm9tIGhlcmU6IAogICAgICAgKiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMjY0Njg2NC8xMDAxODQ4CiAgICAgICAqLwogICAgICBmdW5jdGlvbiBzaHVmZmxlX2FycmF5KGFycmF5KSB7CiAgICAgICAgZm9yICh2YXIgaSA9IGFycmF5Lmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHsKICAgICAgICAgIHZhciBqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7CiAgICAgICAgICB2YXIgdGVtcCA9IGFycmF5W2ldOwogICAgICAgICAgYXJyYXlbaV0gPSBhcnJheVtqXTsKICAgICAgICAgIGFycmF5W2pdID0gdGVtcDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGFycmF5OwogICAgICB9CgogICAgICAvKioKICAgICAgICogRG9lcyB0aGUgc2FtZSB0aGluZyBhcyBuZXN0ZWRfYXJyYXlfYXBwbHksIHRoYXQgaXMsIHRyYXZlcnNlcyBhIHBvc3NpYmx5CiAgICAgICAqIG5lc3RlZCBhcnJheSBhIGFuZCBhcHBsaWVzIGZ1biB0byBhbGwgImxlYWYgbm9kZXMiIGFuZCByZXR1cm5zIGFuIGFycmF5IAogICAgICAgKiBvZiB0aGUgc2FtZSBzaXplIGFzIGEuIFRoZSBkaWZmZXJlbmNlIGlzIHRoYXQgbmVzdGVkX2FycmF5X3JhbmRvbV9hcHBseQogICAgICAgKiBicmFuY2hlcyByYW5kb21seS4KICAgICAgICovCiAgICAgIHZhciBuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5ID0gZnVuY3Rpb24gKGEsIGZ1bikgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGEpKSB7CiAgICAgICAgICB2YXIgbGVuID0gYS5sZW5ndGg7CiAgICAgICAgICB2YXIgaTsKICAgICAgICAgIHZhciBhcnJheV9pcyA9IFtdOwogICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgIGFycmF5X2lzW2ldID0gaTsKICAgICAgICAgIH0KICAgICAgICAgIHNodWZmbGVfYXJyYXkoYXJyYXlfaXMpOwogICAgICAgICAgdmFyIHJlc3VsdCA9IFtdOwogICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgIHZhciBhcnJheV9pID0gYXJyYXlfaXNbaV07CiAgICAgICAgICAgIHJlc3VsdFthcnJheV9pXSA9IG5lc3RlZF9hcnJheV9hcHBseShhW2FycmF5X2ldLCBmdW4pOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZ1bihhKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICAvKioKICAgICAgICogQWxsb3dzIGEgcHJldHR5IHdheSBvZiBzZXR0aW5nIGRlZmF1bHQgb3B0aW9ucyB3aGVyZSB0aGUgZGVmdWx0cyBjYW4gYmUKICAgICAgICogb3ZlcnJpZGRlbiBieSBhbiBvcHRpb25zIG9iamVjdC4KICAgICAgICogIEBwYXJhbSBvcHRpb25fbmFtZSAtIHRoZSBuYW1lIG9mIHRoZSBvcHRpb24gYXMgYSBzdHJpbmcKICAgICAgICogIEBwYXJhbSBteV9vcHRpb25zIC0gYW4gb3B0aW9uIG9iamVjdCB0aGF0IGNvdWxkIGhhdmUgb3B0aW9uX25hbWUgCiAgICAgICAqICAgIGFzIGEgbWVtYmVyLgogICAgICAgKiBAcGFyYW0gZGVmYXVsX3ZhbHVlIC0gZGVmdWx0IHZhbHVlIHRoYXQgaXMgcmV0dXJuZWQgaWYgb3B0aW9uX25hbWUgCiAgICAgICAqICAgaXMgbm90IGRlZmluZWQgaW4gbXlfb3B0aW9ucy4KICAgICAgICogQGV4YW1wbGUKICAgICAgICogdmFyIG15X29wdGlvbnMgPSB7cGk6IDMuMTQxNTl9CiAgICAgICAqIHZhciBwaSA9IGdldF9vcHRpb24oInBpIiwgbXlfb3B0aW9ucywgMy4xNCkKICAgICAgICovCiAgICAgIC8vIFByZXR0eSB3YXkgb2Ygc2V0dGluZyBkZWZhdWx0IG9wdGlvbnMgd2hlcmUgdGhlIGRlZmF1bHRzIGNhbiBiZSBvdmVycmlkZGVuCiAgICAgIC8vIGJ5IGFuIG9wdGlvbnMgb2JqZWN0LiBGb3IgZXhhbXBsZToKICAgICAgLy8gdmFyIHBpID0gZ2V0X29wdGlvbigicGkiLCBteV9vcHRpb25zLCAzLjE0KQogICAgICB2YXIgZ2V0X29wdGlvbiA9IGZ1bmN0aW9uIChvcHRpb25fbmFtZSwgb3B0aW9ucywgZGVmYXVsX3ZhbHVlKSB7CiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgICAgICAgcmV0dXJuIG9wdGlvbnMuaGFzT3duUHJvcGVydHkob3B0aW9uX25hbWUpICYmIG9wdGlvbnNbb3B0aW9uX25hbWVdICE9PSB1bmRlZmluZWQgJiYgb3B0aW9uc1tvcHRpb25fbmFtZV0gIT09IG51bGwgPyBvcHRpb25zW29wdGlvbl9uYW1lXSA6IGRlZmF1bF92YWx1ZTsKICAgICAgfTsKCiAgICAgIC8qKiBWZXJzaW9uIG9mIGdldF9vcHRpb24gd2hlcmUgdGhlIG9wdGlvbiBzaG91bGQgYmUgYSBvbmUgb3IgbXVsdGktZGltZW5zaW9uYWwKICAgICAgICogYXJyYXkgYW5kIHdoZXJlIHRoZSBkZWZhdWx0IGNhbiBiZSBvdmVycmlkZGVuIGVpdGhlciBieSBhIHNjYWxhciBvciBieSBhbiBhcnJheS4KICAgICAgICogSWYgaXQncyBhIHNjYWxhciB0aGUgdGhhdCBzY2FsYXIgaXMgdXNlZCB0byBpbml0aWFsaXplIGFuIGFycmF5IHdpdGggCiAgICAgICAqIGRpbSBkaW1lbnNpb25zLgogICAgICAgKiAKICAgICAgICovCiAgICAgIHZhciBnZXRfbXVsdGlkaW1fb3B0aW9uID0gZnVuY3Rpb24gKG9wdGlvbl9uYW1lLCBvcHRpb25zLCBkaW0sIGRlZmF1bF92YWx1ZSkgewogICAgICAgIHZhciB2YWx1ZSA9IGdldF9vcHRpb24ob3B0aW9uX25hbWUsIG9wdGlvbnMsIGRlZmF1bF92YWx1ZSk7CiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkgewogICAgICAgICAgdmFsdWUgPSBjcmVhdGVfYXJyYXkoZGltLCB2YWx1ZSk7CiAgICAgICAgfQogICAgICAgIGlmICghYXJyYXlfZXF1YWwoYXJyYXlfZGltKHZhbHVlKSwgZGltKSkgewogICAgICAgICAgdGhyb3cgIlRoZSBvcHRpb24gIiArIG9wdGlvbl9uYW1lICsgIiBpcyBvZiBkaW1lbnNpb24gWyIgKyBhcnJheV9kaW0odmFsdWUpICsgIl0gYnV0IHNob3VsZCBiZSBbIiArIGRpbSArICJdLiI7CiAgICAgICAgfQogICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgfTsKCiAgICAgIC8vLy8vLy8vLy8gRnVuY3Rpb25zIGZvciBoYW5kbGluZyBwYXJhbWV0ZXIgb2JqZWN0cyAvLy8vLy8vLy8vCiAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgICAvKioKICAgICAgICogUmV0dXJucyBhIGZpeGVkIChzYW1lIGV2ZXJ5IHRpbWUpIG51bWJlciB0aGF0IGNvdWxkIGJlIHVzZWQgdG8gaW5pdGlhbGl6ZQogICAgICAgKiBhIHBhcmFtZXRlciBvZiBhIGNlcnRhaW4gdHlwZSwgcG9zc2libHkgd2l0aCBsb3dlciBhbmQgdXBwZXIgYm91bmRzLgogICAgICAgKiBUaGUgcG9zc2lsZSB0eXBlcyBhcmUgInJlYWwiLCAiaW50IiwgYW5kICJiaW5hcnkiLgogICAgICAgKi8KICAgICAgdmFyIHBhcmFtX2luaXRfZml4ZWQgPSBmdW5jdGlvbiAodHlwZSwgbG93ZXIsIHVwcGVyKSB7CiAgICAgICAgaWYgKGxvd2VyID4gdXBwZXIpIHsKICAgICAgICAgIHRocm93ICJDYW4gbm90IGluaXRpYWxpemUgcGFyYW1ldGVyIHdoZXJlIGxvd2VyIGJvdW5kID4gdXBwZXIgYm91bmQiOwogICAgICAgIH0KICAgICAgICBpZiAodHlwZSA9PT0gInJlYWwiKSB7CiAgICAgICAgICBpZiAobG93ZXIgPT09IC1JbmZpbml0eSAmJiB1cHBlciA9PT0gSW5maW5pdHkpIHsKICAgICAgICAgICAgcmV0dXJuIDAuNTsKICAgICAgICAgIH0gZWxzZSBpZiAobG93ZXIgPT09IC1JbmZpbml0eSkgewogICAgICAgICAgICByZXR1cm4gdXBwZXIgLSAwLjU7CiAgICAgICAgICB9IGVsc2UgaWYgKHVwcGVyID09PSBJbmZpbml0eSkgewogICAgICAgICAgICByZXR1cm4gbG93ZXIgKyAwLjU7CiAgICAgICAgICB9IGVsc2UgaWYgKGxvd2VyIDw9IHVwcGVyKSB7CiAgICAgICAgICAgIHJldHVybiAobG93ZXIgKyB1cHBlcikgLyAyOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gImludCIpIHsKICAgICAgICAgIGlmIChsb3dlciA9PT0gLUluZmluaXR5ICYmIHVwcGVyID09PSBJbmZpbml0eSkgewogICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICAgIH0gZWxzZSBpZiAobG93ZXIgPT09IC1JbmZpbml0eSkgewogICAgICAgICAgICByZXR1cm4gdXBwZXIgLSAxOwogICAgICAgICAgfSBlbHNlIGlmICh1cHBlciA9PT0gSW5maW5pdHkpIHsKICAgICAgICAgICAgcmV0dXJuIGxvd2VyICsgMTsKICAgICAgICAgIH0gZWxzZSBpZiAobG93ZXIgPD0gdXBwZXIpIHsKICAgICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoKGxvd2VyICsgdXBwZXIpIC8gMik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAiYmluYXJ5IikgewogICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgfQogICAgICAgIHRocm93ICJDb3VsZCBub3QgaW5pdGlhbGl6ZSBwYXJhbWV0ZXIgb2YgdHlwZSAiICsgdHlwZSArICJbIiArIGxvd2VyICsgIiwgIiArIHVwcGVyICsgIl0iOwogICAgICB9OwoKICAgICAgLyoqCiAgICAgICAqIENvbXBsZXRlcyBwYXJhbXNfdG9fY29tcGxldGUsIGFuIG9iamVjdCBjb250YWluaW5nIHBhcmFtZXRlciBkZXNjcmlwdGlvbnMsIAogICAgICAgKiBhbmQgaW5pdGlhbGl6ZXMgbm9uLWluaXRpYWxpemVkIHBhcmFtZXRlcnMuIFRoaXMgbW9kaWZpZWQgdmVyc2lvbiBvZgogICAgICAgKiBwYXJhbXNfdG9fY29tcGxldGUgaXMgcmV0dXJuZWQgYXMgYSBkZWVwIGNvcHkgYW5kIG5vdCBtb2RpZmllZCBpbiBwbGFjZS4KICAgICAgICogSW5pdGlhbGl6YXRpb24gaXMgZG9uZSBieSBzdXBwbHlpbmcgYSBwYXJhbV9pbml0IGZ1bmN0aW9uIHdpdGggc2lnbmF0dXJlCiAgICAgICAqIGZ1bmN0aW9uKHR5cGUsIGxvd2VyLCB1cHBlcikgdGhhdCBzaG91bGQgcmV0dXJuIGEgc2luZ2xlIG51bWJlciAKICAgICAgICogKGxpa2UgcGFyYW1faW5pdF9maXhlZCwgZm9yIGV4YW1wbGUpLgogICAgICAgKiBAZXhhbXBsZQogICAgICAgKiB2YXIgcGFyYW1zID0geyAibXUiOiB7InR5cGUiOiAicmVhbCJ9IH0KICAgICAgICogcGFyYW1zID0gY29tcGxldGVfcGFyYW1zKHBhcmFtcyk7CiAgICAgICAqIC8vIHBhcmFtcyBzaG91bGQgbm93IGJlOgogICAgICAgKiAvLyAgeyJtdSI6IHsgInR5cGUiOiAicmVhbCIsICJkaW0iOiBbMV0sICJ1cHBlciI6IEluZmluaXR5LAogICAgICAgKiAvLyAgICAgICAgICAgImxvd2VyIjogLUluZmluaXR5LCAiaW5pdCI6IDAuNSB9fQogICAgICAgKi8KICAgICAgdmFyIGNvbXBsZXRlX3BhcmFtcyA9IGZ1bmN0aW9uIChwYXJhbXNfdG9fY29tcGxldGUsIHBhcmFtX2luaXQpIHsKICAgICAgICB2YXIgcGFyYW1zID0gZGVlcF9jbG9uZShwYXJhbXNfdG9fY29tcGxldGUpOwogICAgICAgIGZvciAodmFyIHBhcmFtX25hbWUgaW4gcGFyYW1zKSB7CiAgICAgICAgICBpZiAoIXBhcmFtcy5oYXNPd25Qcm9wZXJ0eShwYXJhbV9uYW1lKSkgY29udGludWU7CiAgICAgICAgICB2YXIgcGFyYW0gPSBwYXJhbXNbcGFyYW1fbmFtZV07CiAgICAgICAgICBpZiAoIXBhcmFtLmhhc093blByb3BlcnR5KCJ0eXBlIikpIHsKICAgICAgICAgICAgcGFyYW0udHlwZSA9ICJyZWFsIjsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghcGFyYW0uaGFzT3duUHJvcGVydHkoImRpbSIpKSB7CiAgICAgICAgICAgIHBhcmFtLmRpbSA9IFsxXTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChpc19udW1iZXIocGFyYW0uZGltKSkgewogICAgICAgICAgICBwYXJhbS5kaW0gPSBbcGFyYW0uZGltXTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChwYXJhbS50eXBlID09ICJiaW5hcnkiKSB7CiAgICAgICAgICAgIHBhcmFtLnVwcGVyID0gMTsKICAgICAgICAgICAgcGFyYW0ubG93ZXIgPSAwOwogICAgICAgICAgfQogICAgICAgICAgaWYgKCFwYXJhbS5oYXNPd25Qcm9wZXJ0eSgidXBwZXIiKSkgewogICAgICAgICAgICBwYXJhbS51cHBlciA9IEluZmluaXR5OwogICAgICAgICAgfQogICAgICAgICAgaWYgKCFwYXJhbS5oYXNPd25Qcm9wZXJ0eSgibG93ZXIiKSkgewogICAgICAgICAgICBwYXJhbS5sb3dlciA9IC1JbmZpbml0eTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChwYXJhbS5oYXNPd25Qcm9wZXJ0eSgiaW5pdCIpKSB7CiAgICAgICAgICAgIC8vIElmIHRoaXMgaXMganVzdCBhIG51bWJlciBvciBhIG5lc3RlZCBhcnJheSB3ZSBsZWF2ZSBpdCBhbG9uZSwgYnV0IGlmLi4uCiAgICAgICAgICAgIGlmIChhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkgJiYgdHlwZW9mIHBhcmFtLmluaXQgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgICAvLyBwYXJhbS5pbml0IGlzIGEgZnVuY3Rpb24sIHVzZSB0aGF0IHRvIGluaXRpYWxpemUgdGhlIHBhcmFtZXRlci4KICAgICAgICAgICAgICBwYXJhbS5pbml0ID0gcGFyYW0uaW5pdCgpOwogICAgICAgICAgICB9IGVsc2UgaWYgKCFhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkgJiYgIUFycmF5LmlzQXJyYXkocGFyYW0uaW5pdCkpIHsKICAgICAgICAgICAgICAvLyBXZSBoYXZlIGEgbXVsdGlkaW1lbnNpb25hbCBwYXJhbWV0ZXIgd2hlcmUgdGhlIHBhcmFtLmluaXQgZXhpc3QgYnV0CiAgICAgICAgICAgICAgLy8gaXMgbm90IGFuIGFycmF5LiBUaGVuIGFzc3VtZSBpdCBpcyBhIG51bWJlciBvciBhIGZ1bmN0aW9uIGFuZCB1c2UKICAgICAgICAgICAgICAvLyBpdCB0byBpbml0aWFsaXplIHRoZSBwYXJhbWV0ZXIuCiAgICAgICAgICAgICAgcGFyYW0uaW5pdCA9IGNyZWF0ZV9hcnJheShwYXJhbS5kaW0sIHBhcmFtLmluaXQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBXZSB1c2UgdGhlIGRlZmF1bHQgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24uCiAgICAgICAgICAgIGlmIChhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHsKICAgICAgICAgICAgICBwYXJhbS5pbml0ID0gcGFyYW1faW5pdChwYXJhbS50eXBlLCBwYXJhbS5sb3dlciwgcGFyYW0udXBwZXIpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHBhcmFtLmluaXQgPSBjcmVhdGVfYXJyYXkocGFyYW0uZGltLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW1faW5pdChwYXJhbS50eXBlLCBwYXJhbS5sb3dlciwgcGFyYW0udXBwZXIpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBwYXJhbXM7CiAgICAgIH07CgogICAgICAvLy8vLy8vLy8vIFN0ZXBwZXIgRnVuY3Rpb25zIC8vLy8vLy8vLy8vCiAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAgIC8qKgogICAgICAgKiBAaW50ZXJmYWNlCiAgICAgICAqIEEgU3RlcHBlciBpcyBhbiBvYmplY3QgcmVzcG9uc2libGUgZm9yIHB1c2hpbmcgYXJvdW5kIG9uZQogICAgICAgKiBvciBtb3JlIHBhcmFtZXRlciB2YWx1ZXMgaW4gYSBzdGF0ZSBhY2NvcmRpbmcgdG8gdGhlIGRpc3RyaWJ1dGlvbgogICAgICAgKiBkZWZpbmVkIGJ5IHRoZSBsb2cgcG9zdGVyaW9yLiBUaGlzIGRlZmluZXMgdGhlIFN0ZXBwZXIgImludGVyZmFjZSIsCiAgICAgICAqIHdoZXJlICJpbnRlcmZhY2UiIG1lYW5zIHRoYXQgU3RlcHBlciBkZWZpbmVzIGEgY2xhc3MgdGhhdCBpcyBuZXZlcgogICAgICAgKiBtZWFudCB0byBiZSBpbnN0YW50aWF0ZWQsIGJ1dCBqdXN0IHRvIGJlIHN1YmNsYXNzZWQgYnkgc3BlY2lhbGl6ZWQKICAgICAgICogc3RlcHBlciBmdW5jdGlvbnMuCiAgICAgICAqIEBpbnRlcmZhY2UKICAgICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIHBhcmFtZXRlciBkZWZpbml0aW9ucywgZm9yIGV4YW1wbGU6CiAgICAgICAqICAgeyJtdSI6IHsgInR5cGUiOiAicmVhbCIsICJkaW0iOiBbMV0sICJ1cHBlciI6IEluZmluaXR5LCAKICAgICAgICogICAibG93ZXIiOiAtSW5maW5pdHksICJpbml0IjogMC41IH19CiAgICAgICAqICAgVGhlIHBhcmFtZXRlciBkZWZpbml0aW9ucyBhcmUgZXhwZWN0ZWQgdG8gYmUgImNvbXBsZXRlIiwgdGhhdCBpcywKICAgICAgICogICBzcGVjaWZ5aW5nIGFsbCByZWxldmFudCBhdHRyaWJ1dGVzIHN1Y2ggYXMgZGltLCBsb3dlciBhbmQgdXBwZXIuCiAgICAgICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycyBpbiBwYXJhbXMKICAgICAgICogICAoYW5kIHBvc3NpYmx5IG1vcmUpLiBUaGUgcGFyYW1ldGVyIG5hbWVzIGFyZSBnaXZlbiBhcyBrZXlzIGFuZCB0aGUgc3RhdGVzCiAgICAgICAqICAgYXMgc2NhbGFycyBvciwgcG9zc2libHkgbmVzdGVkLCBhcnJheXMuIEZvciBleGFtcGxlOgogICAgICAgKiAgIHttdTogMTAsIHNpZ21hOiA1LCBiZXRhOiBbMSwgMi41XX0KICAgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiAqdGFraW5nIG5vIHBhcmFtZXRlcnMqIHRoYXQgcmV0dXJucyB0aGUKICAgICAgICogICBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiBUaGF0IGlzLCB0aGUgdmFsdWUgb2YgbG9nX3Bvc3QKICAgICAgICogICBzaG91bGQgY2hhbmdlIGlmIHRoZSB0aGUgdmFsdWVzIGluIHN0YXRlIGFyZSBjaGFuZ2VkLgogICAgICAKICAgICAgICovCiAgICAgIHZhciBTdGVwcGVyID0gZnVuY3Rpb24gKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0KSB7CiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7CiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlOwogICAgICAgIHRoaXMubG9nX3Bvc3QgPSBsb2dfcG9zdDsKICAgICAgfTsKCiAgICAgIC8qKgogICAgICAgKiBUYWtlcyBhIHN0ZXAgaW4gdGhlIHBhcmFtZXRlciBzcGFjZS4gU2hvdWxkIHJldHVybiB0aGUgbmV3IHN0YXRlLAogICAgICAgKiBidXQgaXMgbWFpbmx5IGNhbGxlZCBmb3IgaXQncyBzaWRlIGVmZmVjdCBvZiBtYWtpbmcgYSBjaGFuZ2UgaW4gdGhlCiAgICAgICAqIHN0YXRlIG9iamVjdC4KICAgICAgICovCiAgICAgIFN0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhyb3cgIkV2ZXJ5IFN0ZXBwZXIgbmVlZCB0byBpbXBsZW1lbnQgc3RlcCgpIjsKICAgICAgfTsKCiAgICAgIC8qKgogICAgICAgKiBJZiBpbXBsZW1lbnRlZCwgbWFrZXMgdGhlIHN0ZXBwZXIgYWRhcHQgd2hpbGUgc3RlcHBpbmcuCiAgICAgICAqLwogICAgICBTdGVwcGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgIC8vIE9wdGlvbmFsLCBzb21lIHN0ZXBwZXJzIG1pZ2h0IG5vdCBiZSBhZGFwdGl2ZS4gKi8gCiAgICAgIH07CgogICAgICAvKioKICAgICAgICogSWYgaW1wbGVtZW50ZWQsIG1ha2VzIHRoZSBzdGVwcGVyIGNlYXNlIGFkYXB0aW5nIHdoaWxlIHN0ZXBwaW5nLgogICAgICAgKi8KICAgICAgU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgIC8vIE9wdGlvbmFsLCBzb21lIHN0ZXBwZXJzIG1pZ2h0IG5vdCBiZSBhZGFwdGl2ZS4gKi8gCiAgICAgIH07CgogICAgICAvKioKICAgICAgICogUmV0dXJucyBhbiBvYmplY3QgY29udGFpbmcgaW5mbyByZWdhcmRpbmcgdGhlIHN0ZXBwZXIuCiAgICAgICAqLwogICAgICBTdGVwcGVyLnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24gKCkgewogICAgICAgIC8vIFJldHVybnMgYW4gb2JqZWN0IHdpdGggaW5mbyBhYm91dCB0aGUgc3RhdGUgb2YgdGhlIHN0ZXBwZXIuCiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9OwoKICAgICAgLyoqCiAgICAgICAqIEBjbGFzcwogICAgICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn0KICAgICAgICogQ29uc3RydWN0b3IgZm9yIGFuIG9iamVjdCB0aGF0IGltcGxlbWVudHMgdGhlIG1ldHJvcG9saXMgc3RlcCBpbgogICAgICAgKiB0aGUgQWRhcHRpdmUgTWV0cm9wb2xpcy1XaXRoaW4tR2liYnMgYWxnb3JpdGhtIGluICJFeGFtcGxlcyBvZiBBZGFwdGl2ZSBNQ01DIgogICAgICAgKiBieSBSb2JlcnRzIGFuZCBSb3NlbnRoYWwgKDIwMDgpLgogICAgICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBzaW5nbGUgcGFyYW1ldGVyIGRlZmluaXRpb24uCiAgICAgICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy4KICAgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIAogICAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuCiAgICAgICAqIEBwYXJhbSBnZW5lcmF0ZV9wcm9wb3NhbCAtIGEgZnVuY3Rpb24gcmV0dXJuaW5nIGEgcHJvcG9zYWwgKGFzIGEgbnVtYmVyKQogICAgICAgKiB3aXRoIHNpZ25hdHVyZSBmdW5jdGlvbihwYXJhbV9zdGF0ZSwgbG9nX3NjYWxlKSB3aGVyZSBwYXJhbV9zdGF0ZSBpcyBhCiAgICAgICAqIG51bWJlciBhbmQgbG9nX3NjYWxlIGRlZmluZXMgdGhlIHNjYWxlIG9mIHRoZSBwcm9wb3NhbCBzb21laG93LgogICAgICAqLwogICAgICB2YXIgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIGdlbmVyYXRlX3Byb3Bvc2FsKSB7CiAgICAgICAgU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0KTsKICAgICAgICB2YXIgcGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7CiAgICAgICAgaWYgKHBhcmFtX25hbWVzLmxlbmd0aCAhPSAxKSB7CiAgICAgICAgICB0aHJvdyAiT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIgY2FuIG9ubHkgaGFuZGxlIG9uZSBwYXJhbWV0ZXIuIjsKICAgICAgICB9CiAgICAgICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07CiAgICAgICAgdmFyIHBhcmFtID0gdGhpcy5wYXJhbXNbdGhpcy5wYXJhbV9uYW1lXTsKICAgICAgICBpZiAoIWFycmF5X2VxdWFsKHBhcmFtLmRpbSwgWzFdKSkgewogICAgICAgICAgdGhyb3cgIk9uZWRpbU1ldHJvcG9saXNTdGVwcGVyIGNhbiBvbmx5IGhhbmRsZSBvbmUgb25lLWRpbWVuc2lvbmFsIHBhcmFtZXRlci4iOwogICAgICAgIH0KICAgICAgICB0aGlzLmxvd2VyID0gcGFyYW0ubG93ZXI7CiAgICAgICAgdGhpcy51cHBlciA9IHBhcmFtLnVwcGVyOwogICAgICAgIHRoaXMucHJvcF9sb2dfc2NhbGUgPSBnZXRfb3B0aW9uKCJwcm9wX2xvZ19zY2FsZSIsIG9wdGlvbnMsIDApOwogICAgICAgIHRoaXMuYmF0Y2hfc2l6ZSA9IGdldF9vcHRpb24oImJhdGNoX3NpemUiLCBvcHRpb25zLCA1MCk7CiAgICAgICAgdGhpcy5tYXhfYWRhcHRhdGlvbiA9IGdldF9vcHRpb24oIm1heF9hZGFwdGF0aW9uIiwgb3B0aW9ucywgMC4zMyk7CiAgICAgICAgdGhpcy5pbml0aWFsX2FkYXB0YXRpb24gPSBnZXRfb3B0aW9uKCJpbml0aWFsX2FkYXB0YXRpb24iLCBvcHRpb25zLCAxLjApOwogICAgICAgIHRoaXMudGFyZ2V0X2FjY2VwdF9yYXRlID0gZ2V0X29wdGlvbigidGFyZ2V0X2FjY2VwdF9yYXRlIiwgb3B0aW9ucywgMC40NCk7CiAgICAgICAgdGhpcy5pc19hZGFwdGluZyA9IGdldF9vcHRpb24oImlzX2FkYXB0aW5nIiwgb3B0aW9ucywgdHJ1ZSk7CiAgICAgICAgdGhpcy5nZW5lcmF0ZV9wcm9wb3NhbCA9IGdlbmVyYXRlX3Byb3Bvc2FsOwogICAgICAgIHRoaXMuYWNjZXB0YW5jZV9jb3VudCA9IDA7CiAgICAgICAgdGhpcy5iYXRjaF9jb3VudCA9IDA7CiAgICAgICAgdGhpcy5pdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uID0gMDsKICAgICAgfTsKICAgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7CiAgICAgIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyOwogICAgICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgcGFyYW1fc3RhdGUgPSB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV07CiAgICAgICAgdmFyIHBhcmFtX3Byb3Bvc2FsID0gdGhpcy5nZW5lcmF0ZV9wcm9wb3NhbChwYXJhbV9zdGF0ZSwgdGhpcy5wcm9wX2xvZ19zY2FsZSk7CiAgICAgICAgaWYgKHBhcmFtX3Byb3Bvc2FsIDwgdGhpcy5sb3dlciB8fCBwYXJhbV9wcm9wb3NhbCA+IHRoaXMudXBwZXIpIDsgZWxzZSB7CiAgICAgICAgICAvLyBtYWtlIGEgTWV0cm9wb2xpcyBzdGVwCiAgICAgICAgICB2YXIgY3Vycl9sb2dfZGVucyA9IHRoaXMubG9nX3Bvc3QoKTsKICAgICAgICAgIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSA9IHBhcmFtX3Byb3Bvc2FsOwogICAgICAgICAgdmFyIHByb3BfbG9nX2RlbnMgPSB0aGlzLmxvZ19wb3N0KCk7CiAgICAgICAgICB2YXIgYWNjZXB0X3Byb2IgPSBNYXRoLmV4cChwcm9wX2xvZ19kZW5zIC0gY3Vycl9sb2dfZGVucyk7CiAgICAgICAgICBpZiAoYWNjZXB0X3Byb2IgPiBNYXRoLnJhbmRvbSgpKSB7CiAgICAgICAgICAgIC8vIFdlIGRvIG5vdGhpbmcgYXMgdGhlIHN0YXRlIG9mIHBhcmFtIGhhcyBhbHJlYWR5IGJlZW4gY2hhbmdlZCB0byB0aGUgcHJvcG9zYWwKICAgICAgICAgICAgaWYgKHRoaXMuaXNfYWRhcHRpbmcpIHRoaXMuYWNjZXB0YW5jZV9jb3VudCsrOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gcmV2ZXJ0IHN0YXRlIGJhY2sgdG8gdGhlIG9sZCBzdGF0ZSBvZiBwYXJhbQogICAgICAgICAgICB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0gPSBwYXJhbV9zdGF0ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuaXNfYWRhcHRpbmcpIHsKICAgICAgICAgIHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbisrOwogICAgICAgICAgaWYgKHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbiA+PSB0aGlzLmJhdGNoX3NpemUpIHsKICAgICAgICAgICAgLy8gdGhlbiBhZGFwdAogICAgICAgICAgICB0aGlzLmJhdGNoX2NvdW50Kys7CiAgICAgICAgICAgIHZhciBsb2dfc2RfYWRqdXN0bWVudCA9IE1hdGgubWluKHRoaXMubWF4X2FkYXB0YXRpb24sIHRoaXMuaW5pdGlhbF9hZGFwdGF0aW9uIC8gTWF0aC5zcXJ0KHRoaXMuYmF0Y2hfY291bnQpKTsKICAgICAgICAgICAgaWYgKHRoaXMuYWNjZXB0YW5jZV9jb3VudCAvIHRoaXMuYmF0Y2hfc2l6ZSA+IHRoaXMudGFyZ2V0X2FjY2VwdF9yYXRlKSB7CiAgICAgICAgICAgICAgdGhpcy5wcm9wX2xvZ19zY2FsZSArPSBsb2dfc2RfYWRqdXN0bWVudDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLnByb3BfbG9nX3NjYWxlIC09IGxvZ19zZF9hZGp1c3RtZW50OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuYWNjZXB0YW5jZV9jb3VudCA9IDA7CiAgICAgICAgICAgIHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbiA9IDA7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV07CiAgICAgIH07CiAgICAgIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuaXNfYWRhcHRpbmcgPSB0cnVlOwogICAgICB9OwogICAgICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuaXNfYWRhcHRpbmcgPSBmYWxzZTsKICAgICAgfTsKICAgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHByb3BfbG9nX3NjYWxlOiB0aGlzLnByb3BfbG9nX3NjYWxlLAogICAgICAgICAgaXNfYWRhcHRpbmc6IHRoaXMuaXNfYWRhcHRpbmcsCiAgICAgICAgICBhY2NlcHRhbmNlX2NvdW50OiB0aGlzLmFjY2VwdGFuY2VfY291bnQsCiAgICAgICAgICBpdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uOiB0aGlzLml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24sCiAgICAgICAgICBiYXRjaF9jb3VudDogdGhpcy5iYXRjaF9jb3VudAogICAgICAgIH07CiAgICAgIH07CgogICAgICAvKioKICAgICAgICogRnVuY3Rpb24gcmV0dXJuaW5nIGEgTm9ybWFsIHByb3Bvc2FsLgogICAgICAgKi8KICAgICAgdmFyIG5vcm1hbF9wcm9wb3NhbCA9IGZ1bmN0aW9uIChwYXJhbV9zdGF0ZSwgcHJvcF9sb2dfc2NhbGUpIHsKICAgICAgICByZXR1cm4gcm5vcm0ocGFyYW1fc3RhdGUsIE1hdGguZXhwKHByb3BfbG9nX3NjYWxlKSk7CiAgICAgIH07CgogICAgICAvKioKICAgICAgICogQGNsYXNzCiAgICAgICAqIEBhdWdtZW50cyB7T25lZGltTWV0cm9wb2xpc1N0ZXBwZXJ9CiAgICAgICAqIEEgInN1YmNsYXNzIiBvZiBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciBtYWtpbmcgY29udGlub3VzIE5vcm1hbCBwcm9wb3NhbHMuCiAgICAgICAqLwogICAgICB2YXIgUmVhbE1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24gKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7CiAgICAgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgbm9ybWFsX3Byb3Bvc2FsKTsKICAgICAgfTsKICAgICAgUmVhbE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlKTsKICAgICAgUmVhbE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFJlYWxNZXRyb3BvbGlzU3RlcHBlcjsKCiAgICAgIC8qKgogICAgICAgKiBGdW5jdGlvbiByZXR1cm5pbmcgYSBkaXNjcmV0aXplZCBOb3JtYWwgcHJvcG9zYWwuCiAgICAgICAqLwogICAgICB2YXIgZGlzY3JldGVfbm9ybWFsX3Byb3Bvc2FsID0gZnVuY3Rpb24gKHBhcmFtX3N0YXRlLCBwcm9wX2xvZ19zY2FsZSkgewogICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHJub3JtKHBhcmFtX3N0YXRlLCBNYXRoLmV4cChwcm9wX2xvZ19zY2FsZSkpKTsKICAgICAgfTsKCiAgICAgIC8qKgogICAgICAqIEBjbGFzcwogICAgICAqIEBhdWdtZW50cyB7T25lZGltTWV0cm9wb2xpc1N0ZXBwZXJ9CiAgICAgICogQSAic3ViY2xhc3MiIG9mIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyIG1ha2luZyBkaXNjcmV0aXplZCBOb3JtYWwgcHJvcG9zYWxzLgogICAgICAqLwogICAgICB2YXIgSW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHsKICAgICAgICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zLCBkaXNjcmV0ZV9ub3JtYWxfcHJvcG9zYWwpOwogICAgICB9OwogICAgICBJbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSk7CiAgICAgIEludE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEludE1ldHJvcG9saXNTdGVwcGVyOwoKICAgICAgLyoqCiAgICAgICAqIEBjbGFzcwogICAgICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn0KICAgICAgICogQ29uc3RydWN0b3IgZm9yIGFuIG9iamVjdCB0aGF0IGltcGxlbWVudHMgdGhlIG1ldHJvcG9saXMgc3RlcCBpbgogICAgICAgKiB0aGUgQWRhcHRpdmUgTWV0cm9wb2xpcy1XaXRoaW4tR2liYnMgYWxnb3JpdGhtIGluICJFeGFtcGxlcyBvZiBBZGFwdGl2ZSBNQ01DIgogICAgICAgKiBieSBSb2JlcnRzIGFuZCBSb3NlbnRoYWwgKDIwMDgpIGZvciBwb3NzaWJseSBtdWx0aWRpbWVuc2lvbmFsIGFycmF5cy4gVGhhdAogICAgICAgKiBpcywgaW5zdGVhZCBvZiBqdXN0IHRha2luZyBhIHN0ZXAgZm9yIGEgb25lLWRpbWVuc2lvbmFsIHBhcmFtZXRlciBsaWtlIAogICAgICAgKiBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciwgdGhpcyBTdGVwcGVyIGlzIHJlc3BvbnNpYmxlIGZvciB0YWtpbmcgc3RlcHMgCiAgICAgICAqIGZvciBhIG11bHRpZGltZW5zaW9uYWwgYXJyYXkuIEl0J3Mgc3RpbGwgcHJldHR5IGR1bWIgYW5kIGp1c3QgdGFrZXMKICAgICAgICogb25lLWRpbWVuc2lvbmFsIHN0ZXBzIGZvciBlYWNoIHBhcmFtZXRlciBjb21wb25lbnQsIHRob3VnaC4KICAgICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgc2luZ2xlIHBhcmFtZXRlciBkZWZpbml0aW9uIGZvciBhIAogICAgICAgKiAgIG11bHRpZGltZW5zaW9uYWwgcGFyYW1ldGVyLgogICAgICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuCiAgICAgICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiAKICAgICAgICogQHBhcmFtIG9wdGlvbnMgLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIHRoZSBzdGVwcGVyLgogICAgICAgKiBAcGFyYW0gU3ViU3RlcHBlciAtIGEgY29uc3RydWN0b3IgZm9yIHRoZSB0eXBlIG9mIG9uZSBkaW1lbnNpb25hbCBTdGVwcGVyIHRvIGFwcGx5IG9uCiAgICAgICAqICAgYWxsIHRoZSBjb21wb25lbnRzIG9mIHRoZSBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlci4KICAgICAgKi8KICAgICAgdmFyIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIFN1YlN0ZXBwZXIpIHsKICAgICAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpOwogICAgICAgIHZhciBwYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTsKICAgICAgICBpZiAocGFyYW1fbmFtZXMubGVuZ3RoICE9IDEpIHsKICAgICAgICAgIHRocm93ICJNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIGNhbid0IGhhbmRsZSBtb3JlIHRoYW4gb25lIHBhcmFtZXRlci4iOwogICAgICAgIH0KICAgICAgICB0aGlzLnBhcmFtX25hbWUgPSBwYXJhbV9uYW1lc1swXTsKICAgICAgICB2YXIgcGFyYW0gPSB0aGlzLnBhcmFtc1t0aGlzLnBhcmFtX25hbWVdOwogICAgICAgIHRoaXMubG93ZXIgPSBwYXJhbS5sb3dlcjsKICAgICAgICB0aGlzLnVwcGVyID0gcGFyYW0udXBwZXI7CiAgICAgICAgdGhpcy5kaW0gPSBwYXJhbS5kaW07CiAgICAgICAgdGhpcy5wcm9wX2xvZ19zY2FsZSA9IGdldF9tdWx0aWRpbV9vcHRpb24oInByb3BfbG9nX3NjYWxlIiwgb3B0aW9ucywgdGhpcy5kaW0sIDApOwogICAgICAgIHRoaXMuYmF0Y2hfc2l6ZSA9IGdldF9tdWx0aWRpbV9vcHRpb24oImJhdGNoX3NpemUiLCBvcHRpb25zLCB0aGlzLmRpbSwgNTApOwogICAgICAgIHRoaXMubWF4X2FkYXB0YXRpb24gPSBnZXRfbXVsdGlkaW1fb3B0aW9uKCJtYXhfYWRhcHRhdGlvbiIsIG9wdGlvbnMsIHRoaXMuZGltLCAwLjMzKTsKICAgICAgICB0aGlzLmluaXRpYWxfYWRhcHRhdGlvbiA9IGdldF9tdWx0aWRpbV9vcHRpb24oImluaXRpYWxfYWRhcHRhdGlvbiIsIG9wdGlvbnMsIHRoaXMuZGltLCAxLjApOwogICAgICAgIHRoaXMudGFyZ2V0X2FjY2VwdF9yYXRlID0gZ2V0X211bHRpZGltX29wdGlvbigidGFyZ2V0X2FjY2VwdF9yYXRlIiwgb3B0aW9ucywgdGhpcy5kaW0sIDAuNDQpOwogICAgICAgIHRoaXMuaXNfYWRhcHRpbmcgPSBnZXRfbXVsdGlkaW1fb3B0aW9uKCJpc19hZGFwdGluZyIsIG9wdGlvbnMsIHRoaXMuZGltLCB0cnVlKTsKCiAgICAgICAgLy8gVGhpcyBoYWNrIGJlbG93IGlzIGEgcmVjdXJzaXZlIGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBhbiBhcnJheSBvZiAKICAgICAgICAvLyBvbmUgZGltZW5zaW9uYWwgc3RlcHBlcnMgYWNjb3JkaW5nIHRvIGRpbS4KICAgICAgICB2YXIgY3JlYXRlX3N1YnN0ZXBwZXJzID0gZnVuY3Rpb24gKGRpbSwgc3Vic3RhdGUsIGxvZ19wb3N0LCBwcm9wX2xvZ19zY2FsZSwgYmF0Y2hfc2l6ZSwgbWF4X2FkYXB0YXRpb24sIGluaXRpYWxfYWRhcHRhdGlvbiwgdGFyZ2V0X2FjY2VwdF9yYXRlLCBpc19hZGFwdGluZykgewogICAgICAgICAgdmFyIHN1YnN0ZXBwZXJzID0gW107CiAgICAgICAgICBpZiAoZGltLmxlbmd0aCA9PT0gMSkgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7CiAgICAgICAgICAgICAgdmFyIHN1Ym9wdGlvbnMgPSB7CiAgICAgICAgICAgICAgICBwcm9wX2xvZ19zY2FsZTogcHJvcF9sb2dfc2NhbGVbaV0sCiAgICAgICAgICAgICAgICBiYXRjaF9zaXplOiBiYXRjaF9zaXplW2ldLAogICAgICAgICAgICAgICAgbWF4X2FkYXB0YXRpb246IG1heF9hZGFwdGF0aW9uW2ldLAogICAgICAgICAgICAgICAgaW5pdGlhbF9hZGFwdGF0aW9uOiBpbml0aWFsX2FkYXB0YXRpb25baV0sCiAgICAgICAgICAgICAgICB0YXJnZXRfYWNjZXB0X3JhdGU6IHRhcmdldF9hY2NlcHRfcmF0ZVtpXSwKICAgICAgICAgICAgICAgIGlzX2FkYXB0aW5nOiBpc19hZGFwdGluZ1tpXQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgdmFyIHN1YnBhcmFtID0ge307CiAgICAgICAgICAgICAgc3VicGFyYW1baV0gPSBkZWVwX2Nsb25lKHBhcmFtKTsKICAgICAgICAgICAgICBzdWJwYXJhbVtpXS5kaW0gPSBbMV07IC8vIEFzIHRoaXMgc2hvdWxkIG5vdyBiZSBhIG9uZS1kaW0gcGFyYW1ldGVyCiAgICAgICAgICAgICAgZGVsZXRlIHN1YnBhcmFtW2ldLmluaXQ7IC8vIEFzIGl0IHNvdWxkIG5vdCBiZSBuZWVkZWQKICAgICAgICAgICAgICBzdWJzdGVwcGVyc1tpXSA9IG5ldyBTdWJTdGVwcGVyKHN1YnBhcmFtLCBzdWJzdGF0ZSwgbG9nX3Bvc3QsIHN1Ym9wdGlvbnMpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7CiAgICAgICAgICAgICAgc3Vic3RlcHBlcnNbaV0gPSBjcmVhdGVfc3Vic3RlcHBlcnMoZGltLnNsaWNlKDEpLCBzdWJzdGF0ZVtpXSwgbG9nX3Bvc3QsIHByb3BfbG9nX3NjYWxlW2ldLCBiYXRjaF9zaXplW2ldLCBtYXhfYWRhcHRhdGlvbltpXSwgaW5pdGlhbF9hZGFwdGF0aW9uW2ldLCB0YXJnZXRfYWNjZXB0X3JhdGVbaV0sIGlzX2FkYXB0aW5nW2ldKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHN1YnN0ZXBwZXJzOwogICAgICAgIH07CiAgICAgICAgdGhpcy5zdWJzdGVwcGVycyA9IGNyZWF0ZV9zdWJzdGVwcGVycyh0aGlzLmRpbSwgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdLCB0aGlzLmxvZ19wb3N0LCB0aGlzLnByb3BfbG9nX3NjYWxlLCB0aGlzLmJhdGNoX3NpemUsIHRoaXMubWF4X2FkYXB0YXRpb24sIHRoaXMuaW5pdGlhbF9hZGFwdGF0aW9uLCB0aGlzLnRhcmdldF9hY2NlcHRfcmF0ZSwgdGhpcy5pc19hZGFwdGluZyk7CiAgICAgIH07CiAgICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7CiAgICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjsKICAgICAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyBHbyB0aHJvdWdoIHRoZSBzdWJzdGVwcGVycyBpbiBhIHJhbmRvbSBvcmRlciBhbmQgY2FsbCBzdGVwKCkgb24gdGhlbS4KICAgICAgICByZXR1cm4gbmVzdGVkX2FycmF5X3JhbmRvbV9hcHBseSh0aGlzLnN1YnN0ZXBwZXJzLCBmdW5jdGlvbiAoc3Vic3RlcHBlcikgewogICAgICAgICAgcmV0dXJuIHN1YnN0ZXBwZXIuc3RlcCgpOwogICAgICAgIH0pOwogICAgICB9OwogICAgICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgIG5lc3RlZF9hcnJheV9hcHBseSh0aGlzLnN1YnN0ZXBwZXJzLCBmdW5jdGlvbiAoc3Vic3RlcHBlcikgewogICAgICAgICAgc3Vic3RlcHBlci5zdGFydF9hZGFwdGF0aW9uKCk7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLnN0b3BfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBuZXN0ZWRfYXJyYXlfYXBwbHkodGhpcy5zdWJzdGVwcGVycywgZnVuY3Rpb24gKHN1YnN0ZXBwZXIpIHsKICAgICAgICAgIHN1YnN0ZXBwZXIuc3RvcF9hZGFwdGF0aW9uKCk7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIG5lc3RlZF9hcnJheV9hcHBseSh0aGlzLnN1YnN0ZXBwZXJzLCBmdW5jdGlvbiAoc3Vic3RlcHBlcikgewogICAgICAgICAgcmV0dXJuIHN1YnN0ZXBwZXIuaW5mbygpOwogICAgICAgIH0pOwogICAgICB9OwoKICAgICAgLyoqCiAgICAgICAqIEBjbGFzcwogICAgICAgKiBAYXVnbWVudHMge011bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXJ9CiAgICAgICAqIEEgInN1YmNsYXNzIiBvZiBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIG1ha2luZyBjb250aW5vdXMgTm9ybWFsIHByb3Bvc2Fscy4KICAgICAgICovCiAgICAgIHZhciBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciA9IGZ1bmN0aW9uIChwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykgewogICAgICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgUmVhbE1ldHJvcG9saXNTdGVwcGVyKTsKICAgICAgfTsKICAgICAgTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSk7CiAgICAgIE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyOwoKICAgICAgLyoqCiAgICAgICAqIEBjbGFzcwogICAgICAgKiBAYXVnbWVudHMge011bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXJ9CiAgICAgICAqIEEgInN1YmNsYXNzIiBvZiBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIG1ha2luZyBkaXNjcmV0aXplZCBOb3JtYWwgcHJvcG9zYWxzLgogICAgICAgKi8KICAgICAgdmFyIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHsKICAgICAgICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIEludE1ldHJvcG9saXNTdGVwcGVyKTsKICAgICAgfTsKICAgICAgTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlKTsKICAgICAgTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyOwoKICAgICAgLyoqCiAgICAgICAqIEBjbGFzcwogICAgICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn0KICAgICAgICogQ29uc3RydWN0b3IgZm9yIGFuIG9iamVjdCB0aGF0IGltcGxlbWVudHMgYSBzdGVwIGZvciBhIGJpbmFyeSBwYXJhbWV0ZXIuCiAgICAgICAqIFRoaXMgaXMgZG9uZSBieSBldmFsdWF0aW5nIHRoZSBsb2cgcG9zdGVyaW9yIGZvciBib3RoIHN0YXRlcyBvZiB0aGUKICAgICAgICogcGFyYW1ldGVyIGFuZCB0aGVuIHNlbGVjdGluZyBhIHN0YXRlIHJhbmRvbWx5IHdpdGggcHJvYmFiaWxpdHkgcmVsYXRpdmUgCiAgICAgICAqIHRvIHRoZSBwb3N0ZXJpb3Igb2YgZWFjaCBzdGF0ZS4KICAgICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgc2luZ2xlIHBhcmFtZXRlciBkZWZpbml0aW9uLgogICAgICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuCiAgICAgICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiAKICAgICAgICogQHBhcmFtIG9wdGlvbnMgLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIHRoZSBzdGVwcGVyLgogICAgICAqLwogICAgICB2YXIgQmluYXJ5U3RlcHBlciA9IGZ1bmN0aW9uIChwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykgewogICAgICAgIFN0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCk7CiAgICAgICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpOwogICAgICAgIGlmIChwYXJhbV9uYW1lcy5sZW5ndGggPT0gMSkgewogICAgICAgICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRocm93ICJCaW5hcnlTdGVwcGVyIGNhbid0IGhhbmRsZSBtb3JlIHRoYW4gb25lIHBhcmFtZXRlci4iOwogICAgICAgIH0KICAgICAgfTsKICAgICAgQmluYXJ5U3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN0ZXBwZXIucHJvdG90eXBlKTsKICAgICAgQmluYXJ5U3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCaW5hcnlTdGVwcGVyOwogICAgICBCaW5hcnlTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSA9IDA7CiAgICAgICAgdmFyIHplcm9fbG9nX2RlbnMgPSB0aGlzLmxvZ19wb3N0KCk7CiAgICAgICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gMTsKICAgICAgICB2YXIgb25lX2xvZ19kZW5zID0gdGhpcy5sb2dfcG9zdCgpOwogICAgICAgIHZhciBtYXhfbG9nX2RlbnMgPSBNYXRoLm1heCh6ZXJvX2xvZ19kZW5zLCBvbmVfbG9nX2RlbnMpOwogICAgICAgIHplcm9fbG9nX2RlbnMgLT0gbWF4X2xvZ19kZW5zOwogICAgICAgIG9uZV9sb2dfZGVucyAtPSBtYXhfbG9nX2RlbnM7CiAgICAgICAgdmFyIHplcm9fcHJvYiA9IE1hdGguZXhwKHplcm9fbG9nX2RlbnMgLSBNYXRoLmxvZyhNYXRoLmV4cCh6ZXJvX2xvZ19kZW5zKSArIE1hdGguZXhwKG9uZV9sb2dfZGVucykpKTsKICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IHplcm9fcHJvYikgewogICAgICAgICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gMDsKICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0gLy8gZWxzZSBrZWVwIHRoZSBwYXJhbSBhdCAxIC4KICAgICAgICByZXR1cm4gMTsKICAgICAgfTsKCiAgICAgIC8qKgogICAgICAqIEBjbGFzcwogICAgICAqIEBpbXBsZW1lbnRzIHtTdGVwcGVyfQogICAgICAqIEp1c3QgbGlrZSBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIHRoaXMgU3RlcHBlciB0YWtlcyBhIHN0ZXBzIGZvcgogICAgICAqIGEgbXVsdGlkaW1lbnNpb25hbCBwYXJhbWV0ZXIgYnkgdXBkYXRpbmcgZWFjaCBjb21wb25lbnQgaW4gdHVybi4gVGhlIGRpZmZlcmVuY2UKICAgICAgKiBpcyB0aGF0IHRoaXMgc3RlcHBlciB3b3JrcyBvbiBiaW5hcnkgcGFyYW1ldGVycy4KICAgICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBzaW5nbGUgcGFyYW1ldGVyIGRlZmluaXRpb24gZm9yIGEgCiAgICAgICogICBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlci4KICAgICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuCiAgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIAogICAgICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci4KICAgICAgKi8KICAgICAgdmFyIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHsKICAgICAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpOwogICAgICAgIHZhciBwYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTsKICAgICAgICBpZiAocGFyYW1fbmFtZXMubGVuZ3RoID09IDEpIHsKICAgICAgICAgIHRoaXMucGFyYW1fbmFtZSA9IHBhcmFtX25hbWVzWzBdOwogICAgICAgICAgdmFyIHBhcmFtID0gdGhpcy5wYXJhbXNbdGhpcy5wYXJhbV9uYW1lXTsKICAgICAgICAgIHRoaXMuZGltID0gcGFyYW0uZGltOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aHJvdyAiQmluYXJ5Q29tcG9uZW50U3RlcHBlciBjYW4ndCBoYW5kbGUgbW9yZSB0aGFuIG9uZSBwYXJhbWV0ZXIuIjsKICAgICAgICB9CiAgICAgICAgdmFyIGNyZWF0ZV9zdWJzdGVwcGVycyA9IGZ1bmN0aW9uIChkaW0sIHN1YnN0YXRlLCBsb2dfcG9zdCkgewogICAgICAgICAgdmFyIHN1YnN0ZXBwZXJzID0gW107CiAgICAgICAgICB2YXIgaTsKICAgICAgICAgIGlmIChkaW0ubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykgewogICAgICAgICAgICAgIHZhciBzdWJwYXJhbXMgPSB7fTsKICAgICAgICAgICAgICBzdWJwYXJhbXNbaV0gPSBwYXJhbTsKICAgICAgICAgICAgICBzdWJzdGVwcGVyc1tpXSA9IG5ldyBCaW5hcnlTdGVwcGVyKHN1YnBhcmFtcywgc3Vic3RhdGUsIGxvZ19wb3N0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7CiAgICAgICAgICAgICAgc3Vic3RlcHBlcnNbaV0gPSBjcmVhdGVfc3Vic3RlcHBlcnMoZGltLnNsaWNlKDEpLCBzdWJzdGF0ZVtpXSwgbG9nX3Bvc3QpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gc3Vic3RlcHBlcnM7CiAgICAgICAgfTsKICAgICAgICB0aGlzLnN1YnN0ZXBwZXJzID0gY3JlYXRlX3N1YnN0ZXBwZXJzKHRoaXMuZGltLCB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0sIHRoaXMubG9nX3Bvc3QpOwogICAgICB9OwogICAgICBCaW5hcnlDb21wb25lbnRTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOwogICAgICBCaW5hcnlDb21wb25lbnRTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEJpbmFyeUNvbXBvbmVudFN0ZXBwZXI7CiAgICAgIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8gR28gdGhyb3VnaCB0aGUgc3Vic3RlcHBlcnMgaW4gYSByYW5kb20gb3JkZXIgYW5kIGNhbGwgc3RlcCgpIG9uIHRoZW0uCiAgICAgICAgcmV0dXJuIG5lc3RlZF9hcnJheV9yYW5kb21fYXBwbHkodGhpcy5zdWJzdGVwcGVycywgZnVuY3Rpb24gKHN1YnN0ZXBwZXIpIHsKICAgICAgICAgIHJldHVybiBzdWJzdGVwcGVyLnN0ZXAoKTsKICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgIC8qKgogICAgICAgKiBAY2xhc3MKICAgICAgICogQGltcGxlbWVudHMge1N0ZXBwZXJ9CiAgICAgICAqIFRoaXMgc3RlcHBlciBjYW4gYmUgcmVzcG9uc2libGUgZm9yIHRha2luZyBhIHN0ZXAgZm9yIG9uZSBvciBtb3JlIHBhcmFtZXRlcnMuCiAgICAgICAqIEZvciByZWFsIGFuZCBpbnQgcGFyYW1ldGVycyBpdCB0YWtlcyBNZXRyb3BvbGlzIHdpdGhpbiBHaWJicyBzdGVwcywgYW5kIGZvciAKICAgICAgICogYmluYXJ5IHBhcmFtZXRlcnMgaXQgZG9lcyBldmFsdWF0ZXMgdGhlIHBvc3RlcmlvciBmb3IgYm90aCBwYXJhbXRlciB2YWx1ZXMgYW5kCiAgICAgICAqIHJhbmRvbWx5IGNoYW5nZXMgdG8gYSBjZXJ0YWluIHZhbHVlIHByb3BvcnRpb25hbGx5IHRvIHRoYXQgdmFsdWUncyBwb3N0ZXJpb3IKICAgICAgICogKHRoaXMgaXMgYWxzbyBkb25lIGZvciBlYWNoIHBhcmFtZXRlciwgc28gYWxzbyBhICogd2l0aGluIEdpYmJzIGFwcHJvYWNoKS4KICAgICAgICogVGhpcyBzdGVwcGVyIGlzIGFsc28gYWRhcHRpdmUgYW5kIGNhbiBiZSBlZmZpY2llbnQgd2hlbiB0aGUgbnVtYmVyIG9mIHBhcmFtZXRlcnMKICAgICAgICogYXJlIG5vdCB0b28gaGlnaCBhbmQgdGhlIGNvcnJlbGF0aW9ucyBiZXR3ZWVuIHBhcmFtZXRlcnMgYXJlIGxvdy4KICAgICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgb25lIG9yIG1vcmUgcGFyYW1ldGVyIGRlZmluaXRpb25zCiAgICAgICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy4KICAgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIAogICAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuCiAgICAgICovCiAgICAgIHZhciBBbXdnU3RlcHBlciA9IGZ1bmN0aW9uIChwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykgewogICAgICAgIFN0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCk7CiAgICAgICAgdGhpcy5wYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTsKICAgICAgICB0aGlzLnN1YnN0ZXBwZXJzID0gW107CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBhcmFtX25hbWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB2YXIgcGFyYW0gPSBwYXJhbXNbdGhpcy5wYXJhbV9uYW1lc1tpXV07CiAgICAgICAgICB2YXIgU2VsZWN0U3RlcHBlcjsKICAgICAgICAgIHN3aXRjaCAocGFyYW0udHlwZSkgewogICAgICAgICAgICBjYXNlICJyZWFsIjoKICAgICAgICAgICAgICBpZiAoYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pKSB7CiAgICAgICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gUmVhbE1ldHJvcG9saXNTdGVwcGVyOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICJpbnQiOgogICAgICAgICAgICAgIGlmIChhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHsKICAgICAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBJbnRNZXRyb3BvbGlzU3RlcHBlcjsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgU2VsZWN0U3RlcHBlciA9IE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICJiaW5hcnkiOgogICAgICAgICAgICAgIGlmIChhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHsKICAgICAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBCaW5hcnlTdGVwcGVyOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gQmluYXJ5Q29tcG9uZW50U3RlcHBlcjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgdGhyb3cgIkFtd2dTdGVwcGVyIGNhbid0IGhhbmRsZSBwYXJhbWV0ZXIgIiArIHRoaXMucGFyYW1fbmFtZXNbaV0gKyAiIHdpdGggdHlwZSAiICsgcGFyYW0udHlwZTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBwYXJhbV9vYmplY3Rfd3JhcCA9IHt9OwogICAgICAgICAgcGFyYW1fb2JqZWN0X3dyYXBbdGhpcy5wYXJhbV9uYW1lc1tpXV0gPSBwYXJhbTsKICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgICAgICAgdmFyIHBhcmFtX29wdGlvbnMgPSBvcHRpb25zLnBhcmFtcyAmJiBvcHRpb25zLnBhcmFtc1t0aGlzLnBhcmFtX25hbWVzW2ldXSB8fCB7fTsKICAgICAgICAgIHBhcmFtX29wdGlvbnMucHJvcF9sb2dfc2NhbGUgPSBwYXJhbV9vcHRpb25zLnByb3BfbG9nX3NjYWxlIHx8IG9wdGlvbnMucHJvcF9sb2dfc2NhbGU7CiAgICAgICAgICBwYXJhbV9vcHRpb25zLmJhdGNoX3NpemUgPSBwYXJhbV9vcHRpb25zLmJhdGNoX3NpemUgfHwgb3B0aW9ucy5iYXRjaF9zaXplOwogICAgICAgICAgcGFyYW1fb3B0aW9ucy5tYXhfYWRhcHRhdGlvbiA9IHBhcmFtX29wdGlvbnMubWF4X2FkYXB0YXRpb24gfHwgb3B0aW9ucy5tYXhfYWRhcHRhdGlvbjsKICAgICAgICAgIHBhcmFtX29wdGlvbnMuaW5pdGlhbF9hZGFwdGF0aW9uID0gcGFyYW1fb3B0aW9ucy5pbml0aWFsX2FkYXB0YXRpb24gfHwgb3B0aW9ucy5pbml0aWFsX2FkYXB0YXRpb247CiAgICAgICAgICBwYXJhbV9vcHRpb25zLnRhcmdldF9hY2NlcHRfcmF0ZSA9IHBhcmFtX29wdGlvbnMudGFyZ2V0X2FjY2VwdF9yYXRlIHx8IG9wdGlvbnMudGFyZ2V0X2FjY2VwdF9yYXRlOwogICAgICAgICAgcGFyYW1fb3B0aW9ucy5pc19hZGFwdGluZyA9IHBhcmFtX29wdGlvbnMuaXNfYWRhcHRpbmcgfHwgb3B0aW9ucy5pc19hZGFwdGluZzsKICAgICAgICAgIHRoaXMuc3Vic3RlcHBlcnNbaV0gPSBuZXcgU2VsZWN0U3RlcHBlcihwYXJhbV9vYmplY3Rfd3JhcCwgc3RhdGUsIGxvZ19wb3N0LCBwYXJhbV9vcHRpb25zKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIEFtd2dTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOwogICAgICBBbXdnU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBBbXdnU3RlcHBlcjsKICAgICAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgc2h1ZmZsZV9hcnJheSh0aGlzLnN1YnN0ZXBwZXJzKTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vic3RlcHBlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHRoaXMuc3Vic3RlcHBlcnNbaV0uc3RlcCgpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZTsKICAgICAgfTsKICAgICAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLnN0YXJ0X2FkYXB0YXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLnN1YnN0ZXBwZXJzW2ldLnN0YXJ0X2FkYXB0YXRpb24oKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIEFtd2dTdGVwcGVyLnByb3RvdHlwZS5zdG9wX2FkYXB0YXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLnN1YnN0ZXBwZXJzW2ldLnN0b3BfYWRhcHRhdGlvbigpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGluZm8gPSB7fTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vic3RlcHBlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGluZm9bdGhpcy5wYXJhbV9uYW1lc1tpXV0gPSB0aGlzLnN1YnN0ZXBwZXJzW2ldLmluZm8oKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGluZm87CiAgICAgIH07CgogICAgICAvLy8vLy8vLy8vLyBTYW1wbGVyIEZ1bmN0aW9ucyAvLy8vLy8vLy8vCiAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAgIC8qKgogICAgICAqIEBpbnRlcmZhY2UKICAgICAgKiBXaGlsZSB5b3UgY291bGQgZml0IGEgbW9kZWwgYnkgcGFzdGluZyB0b2dldGhlciBTdGVwcGVycywgYQogICAgICAvLyBTYW1wbGVyIGlzIGhlcmUgaXMgYSBjb252ZW5pZW5jZSBjbGFzcyB3aGVyZSBhbiBpbnN0YW5jZSBvZiBTYW1wbGVyCiAgICAgIC8vIHNldHMgdXAgdGhlIFN0ZXBwZXJzLCBjaGVja3MgdGhlIHBhcmFtZXRlciBkZWZpbml0aW9uLAogICAgICAvLyBhbmQgbWFuYWdlcyB0aGUgc2FtcGxpbmcuIFRoaXMgaGVyZSBkZWZpbmVzIHRoZSBTYW1wbGVyICJpbnRlcmZhY2UiLgogICAgICAqIEBpbnRlcmZhY2UKICAgICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggcGFyYW1ldGVyIGRlZmluaXRpb25zLCBmb3IgZXhhbXBsZToKICAgICAgKiAgIHsibXUiOiB7InR5cGUiOiAicmVhbCJ9LCAic2lnbWEiOiB7InR5cGUiOiAicmVhbCIsICJsb3dlciIgPSAwfX0KICAgICAgKiAgIFRoZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbnMgZG9lc24ndCBoYXZlIHRvIGJlICJjb21wbGV0ZSIgYW5kIHByb3BlcnRpZXMKICAgICAgKiAgIGxlZnQgb3V0IChsaWtlIGxvd2VyIGFuZCB1cHBlcikgd2lsbCBiZSBmaWxsZWQgaW4gYnkgZGVmYXVsdHMuCiAgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB3aXRoIHNpZ25hdHVyZSBmdW5jdGlvbihzdGF0ZSwgZGF0YSkuIEhlcmUKICAgICAgKiAgIHN0YXRlIHdpbGwgYmUgYW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3RhdGUgd2l0aCBlYWNoIHBhcmFtZXRlciBhcyBhIAogICAgICAqICAga2V5IGFuZCB0aGUgcGFyYW1ldGVyIHZhbHVlcyBhcyBudW1iZXJzIG9yIGFycmF5cy4gRm9yIGV4YW1wbGU6CiAgICAgICogICB7Im11IjogMywgInNpZ21hIjogMS41fS4gVGhlIGRhdGEgYXJndW1lbnQgd2lsbCBiZSB0aGUgc2FtZSBvYmplY3QgYXMgCiAgICAgICogICB0aGUgZGF0YSBhcmd1bWVudCBnaXZlbiBiZWxvdy4KICAgICAgKiBAcGFyYW0gZGF0YSAtIGFuIG9iamVjdCB0aGF0IHdpbGwgYmUgcGFzc2VkIG9uIHRvIHRoZSBsb2dfcG9zdCBmdW5jdGlvbgogICAgICAqICAgd2hlbiBzYW1wbGluZy4KICAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHNhbXBsZXIuCiAgICAgICovCiAgICAgIHZhciBTYW1wbGVyID0gZnVuY3Rpb24gKHBhcmFtcywgbG9nX3Bvc3QsIGRhdGEsIG9wdGlvbnMpIHsKICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtczsKICAgICAgICB0aGlzLmRhdGEgPSBkYXRhOwogICAgICAgIHRoaXMucGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7CgogICAgICAgIC8vIFNldHRpbmcgZGVmYXVsdCBvcHRpb25zIGlmIG5vdCBwYXNzZWQgdGhyb3VnaCB0aGUgb3B0aW9ucyBvYmplY3QKICAgICAgICB0aGlzLnBhcmFtX2luaXRfZnVuID0gZ2V0X29wdGlvbigicGFyYW1faW5pdF9mdW4iLCBvcHRpb25zLCBwYXJhbV9pbml0X2ZpeGVkKTsKICAgICAgICB2YXIgdGhpbm5pbmdfaW50ZXJ2YWwgPSBnZXRfb3B0aW9uKCJ0aGluIiwgb3B0aW9ucywgMSk7CiAgICAgICAgdmFyIHBhcmFtc190b19tb25pdG9yID0gZ2V0X29wdGlvbigibW9uaXRvciIsIG9wdGlvbnMsIG51bGwpOwogICAgICAgIHRoaXMudGhpbih0aGlubmluZ19pbnRlcnZhbCk7CiAgICAgICAgdGhpcy5tb25pdG9yKHBhcmFtc190b19tb25pdG9yKTsKICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOwogICAgICAgIC8vIENvbXBsZXRpbmcgdGhlIHBhcmFtcyBhbmQgaW5pdGlhbGl6aW5nIHRoZSBzdGF0ZS4KICAgICAgICB0aGlzLnBhcmFtcyA9IGNvbXBsZXRlX3BhcmFtcyh0aGlzLnBhcmFtcywgdGhpcy5wYXJhbV9pbml0X2Z1bik7CiAgICAgICAgdmFyIHN0YXRlID0ge307CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBhcmFtX25hbWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBzdGF0ZVt0aGlzLnBhcmFtX25hbWVzW2ldXSA9IHRoaXMucGFyYW1zW3RoaXMucGFyYW1fbmFtZXNbaV1dLmluaXQ7CiAgICAgICAgfQogICAgICAgIHRoaXMubG9nX3Bvc3QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gbG9nX3Bvc3Qoc3RhdGUsIGRhdGEpOwogICAgICAgIH07CiAgICAgICAgLy8gUnVubmluZyB0aGUgbG9nX3Bvc3QgZnVuY3Rpb24gb25jZSBpbiBjYXNlIGl0IGZ1cnRoZXIgbW9kaWZpZXMgdGhlIHN0YXRlCiAgICAgICAgLy8gZm9yIGV4YW1wbGUgYWRkaW5nIGRlcml2ZWQgcXVhbnRpdGllcy4KICAgICAgICB0aGlzLmxvZ19wb3N0KCk7CiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlOwogICAgICAgIHRoaXMuc3RlcHBlcnMgPSB0aGlzLmNyZWF0ZV9zdGVwcGVyX2Vuc2FtYmxlKHRoaXMucGFyYW1zLCB0aGlzLnN0YXRlLCB0aGlzLmxvZ19wb3N0LCB0aGlzLm9wdGlvbnMpOwogICAgICB9OwoKICAgICAgLyoqIFNob3VsZCByZXR1cm4gYSB2ZWN0b3Igb2Ygc3RlcHBlcnMgdGhhdCB3aGVuIGNhbGxlZCAKICAgICAgICogc2hvdWxkIHRha2UgYSBzdGVwIGluIHRoZSBwYXJhbWV0ZXIgc3BhY2UuCiAgICAgICAqLwogICAgICBTYW1wbGVyLnByb3RvdHlwZS5jcmVhdGVfc3RlcHBlcl9lbnNhbWJsZSA9IGZ1bmN0aW9uIChzdGF0ZSwgbG9nX3Bvc3QpIHsKICAgICAgICB0aHJvdyAiRXZlcnkgU2FtcGxlciBuZWVkcyB0byBpbXBsZW1lbnQgY3JlYXRlX3N0ZXBwZXJfZW5zYW1ibGUoKSI7CiAgICAgIH07CgogICAgICAvKiogUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBpbmZvIGFib3V0IHRoZSBzdGF0ZSBvZiB0aGUgU2FtcGxlci4KICAgICAgICovCiAgICAgIFNhbXBsZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLAogICAgICAgICAgdGhpbjogdGhpcy50aGluLAogICAgICAgICAgbW9uaXRvcjogdGhpcy5tb25pdG9yLAogICAgICAgICAgc3RlcHBlcnM6IHRoaXMuc3RlcHBlcnMKICAgICAgICB9OwogICAgICB9OwoKICAgICAgLyoqIFRha2VzIGEgc3RlcCBpbiB0aGUgcGFyYW1ldGVyIHNwYWNlLiBSZXR1cm5zIHRoZSBuZXcgc3BhY2UKICAgICAgICogYnV0IGFsc28gbW9kaWZpZXMgdGhlIHN0YXRlIGluIHBsYWNlLgogICAgICAgKi8KICAgICAgU2FtcGxlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBzaHVmZmxlX2FycmF5KHRoaXMuc3RlcHBlcnMpOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdGVwcGVycy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdGhpcy5zdGVwcGVyc1tpXS5zdGVwKCk7CiAgICAgICAgfQogICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLnN0YXRlKS5sZW5ndGggPiBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcykubGVuZ3RoKSB7CiAgICAgICAgICAvLyBUaGUgc3RhdGUgY29udGFpbnMgZGV2aXZlZCBxdWFudGl0aWVzIChub3Qgb25seSBwYXJhbWV0ZXJzKSBhbmQgd2UKICAgICAgICAgIC8vIG5lZWQgdG8gcnVuIHRoZSBsb2dfcG9zdCBvbmNlIG1vcmUgaW4gb3JkZXIgdG8gc2V0IHRoZSBkZXJpdmVkIHF1YW50aXRpZXMKICAgICAgICAgIC8vIGZvciB0aGUgZmluYWwgcGFyYW1ldGVyIHN0YXRlCiAgICAgICAgICB0aGlzLmxvZ19wb3N0KCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzLnN0YXRlOwogICAgICB9OwoKICAgICAgLyoqCiAgICAgICAqIFRha2VzIG5faXRlcmF0aW9ucyBzdGVwcyBpbiB0aGUgcGFyYW1ldGVyIHNwYWNlIGFuZCByZXR1cm5zIHRoZW0KICAgICAgICogYXMgYW4gb2JqZWN0IG9mIGFycmF5cyB3aXRoIG9uZSBhcnJheSBwZXIgcGFyYW1ldGVyLiBGb3IgZXhhbXBsZToKICAgICAgICoge211OiBbMSwgLTEsIDIsIDMsIC4uLl0sIHNpZ21hOiBbMSwgMiwgMiwgMSwgLi4uXX0uCiAgICAgICAqIElmIHRoaW4gaXMgPiAxIHRoZW4gbl9pdGVyYXRpb25zIC8gdGhpbiBzYW1wbGVzIGFyZSByZXR1cm5lZC4KICAgICAgICovCiAgICAgIFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZSA9IGZ1bmN0aW9uIChuX2l0ZXJhdGlvbnMpIHsKICAgICAgICAvLyBJbml0aWFsaXppbmcgY3Vycl9zYW1wbGUgd2hlcmUgdGhlIHNhbXBsZSBpcyBnb2luZyB0byBiZSBzYXZlZAogICAgICAgIC8vIGFzIGFuIG9iamVjdCBjb250YWluaW5nIG9uZSBhcnJheSBwZXIgcGFyYW1ldGVyIHRvIGJlIG1vbml0b3JlZC4KICAgICAgICB2YXIgaSwgaiwgbW9uaXRvcmVkX3BhcmFtczsKICAgICAgICBpZiAodGhpcy5tb25pdG9yZWRfcGFyYW1zID09PSBudWxsKSB7CiAgICAgICAgICBtb25pdG9yZWRfcGFyYW1zID0gT2JqZWN0LmtleXModGhpcy5zdGF0ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG1vbml0b3JlZF9wYXJhbXMgPSB0aGlzLm1vbml0b3JlZF9wYXJhbXM7CiAgICAgICAgfQogICAgICAgIHZhciBjdXJyX3NhbXBsZSA9IHt9OwogICAgICAgIGZvciAoaiA9IDA7IGogPCBtb25pdG9yZWRfcGFyYW1zLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBjdXJyX3NhbXBsZVttb25pdG9yZWRfcGFyYW1zW2pdXSA9IFtdOwogICAgICAgIH0KICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbl9pdGVyYXRpb25zOyBpKyspIHsKICAgICAgICAgIGlmIChpICUgdGhpcy50aGlubmluZ19pbnRlcnZhbCA9PT0gMCkgewogICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgbW9uaXRvcmVkX3BhcmFtcy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgIHZhciBwYXJhbSA9IG1vbml0b3JlZF9wYXJhbXNbal07CiAgICAgICAgICAgICAgY3Vycl9zYW1wbGVbcGFyYW1dLnB1c2goY2xvbmVfcGFyYW1fZHJhdyh0aGlzLnN0YXRlW3BhcmFtXSkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnN0ZXAoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGN1cnJfc2FtcGxlOwogICAgICB9OwoKICAgICAgLyoqCiAgICAgICAqIFRha2VzIG5faXRlcmF0aW9uIHN0ZXBzIGluIHBhcmFtZXRlciBzcGFjZSBidXQgcmV0dXJucyBub3RoaW5nLgogICAgICAgKi8KICAgICAgU2FtcGxlci5wcm90b3R5cGUuYnVybiA9IGZ1bmN0aW9uIChuX2l0ZXJhdGlvbnMpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5faXRlcmF0aW9uczsgaSsrKSB7CiAgICAgICAgICB0aGlzLnN0ZXAoKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICAvKioKICAgICAgICogU2V0cyB3aGF0IHBhcmFtZXRlcnMgc2hvdWxkIGJlIG1vbml0b3JlZCBhbmQgcmV0dXJuZWQgd2hlbiBjYWxsaW5nCiAgICAgICAqIHNhbXBsZS4KICAgICAgICovCiAgICAgIFNhbXBsZXIucHJvdG90eXBlLm1vbml0b3IgPSBmdW5jdGlvbiAocGFyYW1zX3RvX21vbml0b3IpIHsKICAgICAgICB0aGlzLm1vbml0b3JlZF9wYXJhbXMgPSBwYXJhbXNfdG9fbW9uaXRvcjsKICAgICAgfTsKCiAgICAgIC8qKgogICAgICAgKiBTZXRzIHRoZSB0aGlubmluZy4gRm9yIGV4YW1wbGUgdGhpbiA9PSAxMCBtZWFucyB0aGF0IGV2ZXJ5IDEwdGggcG9zdGVyaW9yCiAgICAgICAqIGRyYXcgd2lsbCBiZSBrZXB0LgogICAgICAgKi8KICAgICAgU2FtcGxlci5wcm90b3R5cGUudGhpbiA9IGZ1bmN0aW9uICh0aGlubmluZ19pbnRlcnZhbCkgewogICAgICAgIHRoaXMudGhpbm5pbmdfaW50ZXJ2YWwgPSB0aGlubmluZ19pbnRlcnZhbDsKICAgICAgfTsKCiAgICAgIC8qKgogICAgICAgKiBTZXRzIGFkYXB0YXRpb24gb24sIGlmIGFwcGxpY2FibGUsIGluIGFsbCBzdGVwcGVycy4KICAgICAgICovCiAgICAgIFNhbXBsZXIucHJvdG90eXBlLnN0YXJ0X2FkYXB0YXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLnN0ZXBwZXJzW2ldLnN0YXJ0X2FkYXB0YXRpb24oKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICAvKioKICAgICAgKiBTZXRzIGFkYXB0YXRpb24gb2ZmLCBpZiBhcHBsaWNhYmxlLCBpbiBhbGwgc3RlcHBlcnMuCiAgICAgICovCiAgICAgIFNhbXBsZXIucHJvdG90eXBlLnN0b3BfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3RlcHBlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHRoaXMuc3RlcHBlcnNbaV0uc3RvcF9hZGFwdGF0aW9uKCk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgLyoqCiAgICAgICogQGNsYXNzCiAgICAgICogQGltcGxlbWVudHMge1NhbXBsZXJ9CiAgICAgICogVGhpcyBzYW1wbGVyIHVzZXMgdGhlIEFtd2dTdGVwcGVyIGFzIHRoZSBzdGVwcGVyIGZ1bmN0aW9uIHdoaWNoIGltcGxlbWVudHMgdGhlIAogICAgICAqIEFkYXB0aXZlIE1ldHJvcG9saXMtV2l0aGluLUdpYmJzIGFsZ29yaXRobSBpbiAiRXhhbXBsZXMgb2YgQWRhcHRpdmUgTUNNQyIKICAgICAgKiBieSBSb2JlcnRzIGFuZCBSb3NlbnRoYWwgKDIwMDgpLiBBbiBhZGl0aW9uIGlzIHRoYXQgaXQgaGFuZGxlcyBpbnQgcGFyYW1ldGVycwogICAgICAqIGJ5IG1ha2luZyBkaXNjcmV0ZSBOb3JtYWwgcHJvcG9zYWxzIGFuZCBiaW5hcnkgcGFyYW1ldGVycyBieSB0YWtpbmcgb24gYSBuZXcgCiAgICAgICogdmFsdWUgcHJvcG9ydGlvbmFsIHRvIHRoZSBwb3N0ZXJpb3Igb2YgdGhlIHR3byBwb3NzaWJsZSBzdGF0ZXMgb2YgdGhlCiAgICAgICogcGFyYW1ldGVyLiBUaGlzIHNhbXBsZXIgY2FuIGJlIGVmZmljaWVudCB3aGVuIHRoZSBudW1iZXIgb2YgcGFyYW1ldGVycwogICAgICAqIGFyZSBub3QgdG9vIGhpZ2ggYW5kIHRoZSBjb3JyZWxhdGlvbnMgYmV0d2VlbiBwYXJhbWV0ZXJzIGFyZSBsb3cuCiAgICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgb25lIG9yIG1vcmUgcGFyYW1ldGVyIGRlZmluaXRpb25zCiAgICAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLgogICAgICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiAKICAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuCiAgICAgICovCiAgICAgIHZhciBBbXdnU2FtcGxlciA9IGZ1bmN0aW9uIChwYXJhbXMsIGxvZ19wb3N0LCBkYXRhLCBvcHRpb25zKSB7CiAgICAgICAgU2FtcGxlci5jYWxsKHRoaXMsIHBhcmFtcywgbG9nX3Bvc3QsIGRhdGEsIG9wdGlvbnMpOwogICAgICB9OwogICAgICBBbXdnU2FtcGxlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNhbXBsZXIucHJvdG90eXBlKTsKICAgICAgQW13Z1NhbXBsZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQW13Z1NhbXBsZXI7CiAgICAgIEFtd2dTYW1wbGVyLnByb3RvdHlwZS5jcmVhdGVfc3RlcHBlcl9lbnNhbWJsZSA9IGZ1bmN0aW9uIChwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykgewogICAgICAgIHJldHVybiBbbmV3IEFtd2dTdGVwcGVyKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKV07CiAgICAgIH07CgogICAgICAvLyBSZXR1cm5pbmcgdGhlIGZ1bmN0aW9ucyB0aGF0IHNob3VsZCBiZSBwdWJsaWNseSBleHBvc2VkIGJ5IHRoaXMgbW9kdWxlCiAgICAgIHJldHVybiB7CiAgICAgICAgcnVuaWY6IHJ1bmlmLAogICAgICAgIHJ1bmlmX2Rpc2NyZXRlOiBydW5pZl9kaXNjcmV0ZSwKICAgICAgICBybm9ybTogcm5vcm0sCiAgICAgICAgcGFyYW1faW5pdF9maXhlZDogcGFyYW1faW5pdF9maXhlZCwKICAgICAgICBjb21wbGV0ZV9wYXJhbXM6IGNvbXBsZXRlX3BhcmFtcywKICAgICAgICBSZWFsTWV0cm9wb2xpc1N0ZXBwZXI6IFJlYWxNZXRyb3BvbGlzU3RlcHBlciwKICAgICAgICBJbnRNZXRyb3BvbGlzU3RlcHBlcjogSW50TWV0cm9wb2xpc1N0ZXBwZXIsCiAgICAgICAgTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI6IE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLAogICAgICAgIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI6IE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIsCiAgICAgICAgQmluYXJ5U3RlcHBlcjogQmluYXJ5U3RlcHBlciwKICAgICAgICBCaW5hcnlDb21wb25lbnRTdGVwcGVyOiBCaW5hcnlDb21wb25lbnRTdGVwcGVyLAogICAgICAgIEFtd2dTdGVwcGVyOiBBbXdnU3RlcHBlciwKICAgICAgICBBbXdnU2FtcGxlcjogQW13Z1NhbXBsZXIKICAgICAgfTsKICAgIH0pOwogIH0pKG1jbWMkMSk7CiAgdmFyIG1jbWNFeHBvcnRzID0gbWNtYyQxLmV4cG9ydHM7CgogIGZ1bmN0aW9uIGFzY2VuZGluZyQxKGEsIGIpIHsKICAgIHJldHVybiBhID09IG51bGwgfHwgYiA9PSBudWxsID8gTmFOIDogYSA8IGIgPyAtMSA6IGEgPiBiID8gMSA6IGEgPj0gYiA/IDAgOiBOYU47CiAgfQoKICBmdW5jdGlvbiogbnVtYmVycyh2YWx1ZXMsIHZhbHVlb2YpIHsKICAgIHsKICAgICAgZm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzKSB7CiAgICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgKHZhbHVlID0gK3ZhbHVlKSA+PSB2YWx1ZSkgewogICAgICAgICAgeWllbGQgdmFsdWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBjb21wYXJlRGVmaW5lZChjb21wYXJlID0gYXNjZW5kaW5nJDEpIHsKICAgIGlmIChjb21wYXJlID09PSBhc2NlbmRpbmckMSkgcmV0dXJuIGFzY2VuZGluZ0RlZmluZWQ7CiAgICBpZiAodHlwZW9mIGNvbXBhcmUgIT09ICJmdW5jdGlvbiIpIHRocm93IG5ldyBUeXBlRXJyb3IoImNvbXBhcmUgaXMgbm90IGEgZnVuY3Rpb24iKTsKICAgIHJldHVybiAoYSwgYikgPT4gewogICAgICBjb25zdCB4ID0gY29tcGFyZShhLCBiKTsKICAgICAgaWYgKHggfHwgeCA9PT0gMCkgcmV0dXJuIHg7CiAgICAgIHJldHVybiAoY29tcGFyZShiLCBiKSA9PT0gMCkgLSAoY29tcGFyZShhLCBhKSA9PT0gMCk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBhc2NlbmRpbmdEZWZpbmVkKGEsIGIpIHsKICAgIHJldHVybiAoYSA9PSBudWxsIHx8ICEoYSA+PSBhKSkgLSAoYiA9PSBudWxsIHx8ICEoYiA+PSBiKSkgfHwgKGEgPCBiID8gLTEgOiBhID4gYiA/IDEgOiAwKTsKICB9CgogIGZ1bmN0aW9uIG1heCh2YWx1ZXMsIHZhbHVlb2YpIHsKICAgIGxldCBtYXg7CiAgICB7CiAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7CiAgICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgKG1heCA8IHZhbHVlIHx8IG1heCA9PT0gdW5kZWZpbmVkICYmIHZhbHVlID49IHZhbHVlKSkgewogICAgICAgICAgbWF4ID0gdmFsdWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gbWF4OwogIH0KCiAgZnVuY3Rpb24gbWluKHZhbHVlcywgdmFsdWVvZikgewogICAgbGV0IG1pbjsKICAgIHsKICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiB2YWx1ZXMpIHsKICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCAmJiAobWluID4gdmFsdWUgfHwgbWluID09PSB1bmRlZmluZWQgJiYgdmFsdWUgPj0gdmFsdWUpKSB7CiAgICAgICAgICBtaW4gPSB2YWx1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBtaW47CiAgfQoKICAvLyBCYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vbW91cm5lci9xdWlja3NlbGVjdAogIC8vIElTQyBsaWNlbnNlLCBDb3B5cmlnaHQgMjAxOCBWbGFkaW1pciBBZ2Fmb25raW4uCiAgZnVuY3Rpb24gcXVpY2tzZWxlY3QoYXJyYXksIGssIGxlZnQgPSAwLCByaWdodCA9IEluZmluaXR5LCBjb21wYXJlKSB7CiAgICBrID0gTWF0aC5mbG9vcihrKTsKICAgIGxlZnQgPSBNYXRoLmZsb29yKE1hdGgubWF4KDAsIGxlZnQpKTsKICAgIHJpZ2h0ID0gTWF0aC5mbG9vcihNYXRoLm1pbihhcnJheS5sZW5ndGggLSAxLCByaWdodCkpOwogICAgaWYgKCEobGVmdCA8PSBrICYmIGsgPD0gcmlnaHQpKSByZXR1cm4gYXJyYXk7CiAgICBjb21wYXJlID0gY29tcGFyZSA9PT0gdW5kZWZpbmVkID8gYXNjZW5kaW5nRGVmaW5lZCA6IGNvbXBhcmVEZWZpbmVkKGNvbXBhcmUpOwogICAgd2hpbGUgKHJpZ2h0ID4gbGVmdCkgewogICAgICBpZiAocmlnaHQgLSBsZWZ0ID4gNjAwKSB7CiAgICAgICAgY29uc3QgbiA9IHJpZ2h0IC0gbGVmdCArIDE7CiAgICAgICAgY29uc3QgbSA9IGsgLSBsZWZ0ICsgMTsKICAgICAgICBjb25zdCB6ID0gTWF0aC5sb2cobik7CiAgICAgICAgY29uc3QgcyA9IDAuNSAqIE1hdGguZXhwKDIgKiB6IC8gMyk7CiAgICAgICAgY29uc3Qgc2QgPSAwLjUgKiBNYXRoLnNxcnQoeiAqIHMgKiAobiAtIHMpIC8gbikgKiAobSAtIG4gLyAyIDwgMCA/IC0xIDogMSk7CiAgICAgICAgY29uc3QgbmV3TGVmdCA9IE1hdGgubWF4KGxlZnQsIE1hdGguZmxvb3IoayAtIG0gKiBzIC8gbiArIHNkKSk7CiAgICAgICAgY29uc3QgbmV3UmlnaHQgPSBNYXRoLm1pbihyaWdodCwgTWF0aC5mbG9vcihrICsgKG4gLSBtKSAqIHMgLyBuICsgc2QpKTsKICAgICAgICBxdWlja3NlbGVjdChhcnJheSwgaywgbmV3TGVmdCwgbmV3UmlnaHQsIGNvbXBhcmUpOwogICAgICB9CiAgICAgIGNvbnN0IHQgPSBhcnJheVtrXTsKICAgICAgbGV0IGkgPSBsZWZ0OwogICAgICBsZXQgaiA9IHJpZ2h0OwogICAgICBzd2FwKGFycmF5LCBsZWZ0LCBrKTsKICAgICAgaWYgKGNvbXBhcmUoYXJyYXlbcmlnaHRdLCB0KSA+IDApIHN3YXAoYXJyYXksIGxlZnQsIHJpZ2h0KTsKICAgICAgd2hpbGUgKGkgPCBqKSB7CiAgICAgICAgc3dhcChhcnJheSwgaSwgaiksICsraSwgLS1qOwogICAgICAgIHdoaWxlIChjb21wYXJlKGFycmF5W2ldLCB0KSA8IDApICsraTsKICAgICAgICB3aGlsZSAoY29tcGFyZShhcnJheVtqXSwgdCkgPiAwKSAtLWo7CiAgICAgIH0KICAgICAgaWYgKGNvbXBhcmUoYXJyYXlbbGVmdF0sIHQpID09PSAwKSBzd2FwKGFycmF5LCBsZWZ0LCBqKTtlbHNlICsraiwgc3dhcChhcnJheSwgaiwgcmlnaHQpOwogICAgICBpZiAoaiA8PSBrKSBsZWZ0ID0gaiArIDE7CiAgICAgIGlmIChrIDw9IGopIHJpZ2h0ID0gaiAtIDE7CiAgICB9CiAgICByZXR1cm4gYXJyYXk7CiAgfQogIGZ1bmN0aW9uIHN3YXAoYXJyYXksIGksIGopIHsKICAgIGNvbnN0IHQgPSBhcnJheVtpXTsKICAgIGFycmF5W2ldID0gYXJyYXlbal07CiAgICBhcnJheVtqXSA9IHQ7CiAgfQoKICBmdW5jdGlvbiBxdWFudGlsZSh2YWx1ZXMsIHAsIHZhbHVlb2YpIHsKICAgIHZhbHVlcyA9IEZsb2F0NjRBcnJheS5mcm9tKG51bWJlcnModmFsdWVzKSk7CiAgICBpZiAoIShuID0gdmFsdWVzLmxlbmd0aCkgfHwgaXNOYU4ocCA9ICtwKSkgcmV0dXJuOwogICAgaWYgKHAgPD0gMCB8fCBuIDwgMikgcmV0dXJuIG1pbih2YWx1ZXMpOwogICAgaWYgKHAgPj0gMSkgcmV0dXJuIG1heCh2YWx1ZXMpOwogICAgdmFyIG4sCiAgICAgIGkgPSAobiAtIDEpICogcCwKICAgICAgaTAgPSBNYXRoLmZsb29yKGkpLAogICAgICB2YWx1ZTAgPSBtYXgocXVpY2tzZWxlY3QodmFsdWVzLCBpMCkuc3ViYXJyYXkoMCwgaTAgKyAxKSksCiAgICAgIHZhbHVlMSA9IG1pbih2YWx1ZXMuc3ViYXJyYXkoaTAgKyAxKSk7CiAgICByZXR1cm4gdmFsdWUwICsgKHZhbHVlMSAtIHZhbHVlMCkgKiAoaSAtIGkwKTsKICB9CgogIGZ1bmN0aW9uIG1lZGlhbih2YWx1ZXMsIHZhbHVlb2YpIHsKICAgIHJldHVybiBxdWFudGlsZSh2YWx1ZXMsIDAuNSk7CiAgfQoKICB2YXIgbm9vcCA9IHsKICAgIHZhbHVlOiAoKSA9PiB7fQogIH07CiAgZnVuY3Rpb24gZGlzcGF0Y2goKSB7CiAgICBmb3IgKHZhciBpID0gMCwgbiA9IGFyZ3VtZW50cy5sZW5ndGgsIF8gPSB7fSwgdDsgaSA8IG47ICsraSkgewogICAgICBpZiAoISh0ID0gYXJndW1lbnRzW2ldICsgIiIpIHx8IHQgaW4gXyB8fCAvW1xzLl0vLnRlc3QodCkpIHRocm93IG5ldyBFcnJvcigiaWxsZWdhbCB0eXBlOiAiICsgdCk7CiAgICAgIF9bdF0gPSBbXTsKICAgIH0KICAgIHJldHVybiBuZXcgRGlzcGF0Y2goXyk7CiAgfQogIGZ1bmN0aW9uIERpc3BhdGNoKF8pIHsKICAgIHRoaXMuXyA9IF87CiAgfQogIGZ1bmN0aW9uIHBhcnNlVHlwZW5hbWVzJDEodHlwZW5hbWVzLCB0eXBlcykgewogICAgcmV0dXJuIHR5cGVuYW1lcy50cmltKCkuc3BsaXQoL158XHMrLykubWFwKGZ1bmN0aW9uICh0KSB7CiAgICAgIHZhciBuYW1lID0gIiIsCiAgICAgICAgaSA9IHQuaW5kZXhPZigiLiIpOwogICAgICBpZiAoaSA+PSAwKSBuYW1lID0gdC5zbGljZShpICsgMSksIHQgPSB0LnNsaWNlKDAsIGkpOwogICAgICBpZiAodCAmJiAhdHlwZXMuaGFzT3duUHJvcGVydHkodCkpIHRocm93IG5ldyBFcnJvcigidW5rbm93biB0eXBlOiAiICsgdCk7CiAgICAgIHJldHVybiB7CiAgICAgICAgdHlwZTogdCwKICAgICAgICBuYW1lOiBuYW1lCiAgICAgIH07CiAgICB9KTsKICB9CiAgRGlzcGF0Y2gucHJvdG90eXBlID0gZGlzcGF0Y2gucHJvdG90eXBlID0gewogICAgY29uc3RydWN0b3I6IERpc3BhdGNoLAogICAgb246IGZ1bmN0aW9uICh0eXBlbmFtZSwgY2FsbGJhY2spIHsKICAgICAgdmFyIF8gPSB0aGlzLl8sCiAgICAgICAgVCA9IHBhcnNlVHlwZW5hbWVzJDEodHlwZW5hbWUgKyAiIiwgXyksCiAgICAgICAgdCwKICAgICAgICBpID0gLTEsCiAgICAgICAgbiA9IFQubGVuZ3RoOwoKICAgICAgLy8gSWYgbm8gY2FsbGJhY2sgd2FzIHNwZWNpZmllZCwgcmV0dXJuIHRoZSBjYWxsYmFjayBvZiB0aGUgZ2l2ZW4gdHlwZSBhbmQgbmFtZS4KICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7CiAgICAgICAgd2hpbGUgKCsraSA8IG4pIGlmICgodCA9ICh0eXBlbmFtZSA9IFRbaV0pLnR5cGUpICYmICh0ID0gZ2V0JDEoX1t0XSwgdHlwZW5hbWUubmFtZSkpKSByZXR1cm4gdDsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIC8vIElmIGEgdHlwZSB3YXMgc3BlY2lmaWVkLCBzZXQgdGhlIGNhbGxiYWNrIGZvciB0aGUgZ2l2ZW4gdHlwZSBhbmQgbmFtZS4KICAgICAgLy8gT3RoZXJ3aXNlLCBpZiBhIG51bGwgY2FsbGJhY2sgd2FzIHNwZWNpZmllZCwgcmVtb3ZlIGNhbGxiYWNrcyBvZiB0aGUgZ2l2ZW4gbmFtZS4KICAgICAgaWYgKGNhbGxiYWNrICE9IG51bGwgJiYgdHlwZW9mIGNhbGxiYWNrICE9PSAiZnVuY3Rpb24iKSB0aHJvdyBuZXcgRXJyb3IoImludmFsaWQgY2FsbGJhY2s6ICIgKyBjYWxsYmFjayk7CiAgICAgIHdoaWxlICgrK2kgPCBuKSB7CiAgICAgICAgaWYgKHQgPSAodHlwZW5hbWUgPSBUW2ldKS50eXBlKSBfW3RdID0gc2V0JDEoX1t0XSwgdHlwZW5hbWUubmFtZSwgY2FsbGJhY2spO2Vsc2UgaWYgKGNhbGxiYWNrID09IG51bGwpIGZvciAodCBpbiBfKSBfW3RdID0gc2V0JDEoX1t0XSwgdHlwZW5hbWUubmFtZSwgbnVsbCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXM7CiAgICB9LAogICAgY29weTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgY29weSA9IHt9LAogICAgICAgIF8gPSB0aGlzLl87CiAgICAgIGZvciAodmFyIHQgaW4gXykgY29weVt0XSA9IF9bdF0uc2xpY2UoKTsKICAgICAgcmV0dXJuIG5ldyBEaXNwYXRjaChjb3B5KTsKICAgIH0sCiAgICBjYWxsOiBmdW5jdGlvbiAodHlwZSwgdGhhdCkgewogICAgICBpZiAoKG4gPSBhcmd1bWVudHMubGVuZ3RoIC0gMikgPiAwKSBmb3IgKHZhciBhcmdzID0gbmV3IEFycmF5KG4pLCBpID0gMCwgbiwgdDsgaSA8IG47ICsraSkgYXJnc1tpXSA9IGFyZ3VtZW50c1tpICsgMl07CiAgICAgIGlmICghdGhpcy5fLmhhc093blByb3BlcnR5KHR5cGUpKSB0aHJvdyBuZXcgRXJyb3IoInVua25vd24gdHlwZTogIiArIHR5cGUpOwogICAgICBmb3IgKHQgPSB0aGlzLl9bdHlwZV0sIGkgPSAwLCBuID0gdC5sZW5ndGg7IGkgPCBuOyArK2kpIHRbaV0udmFsdWUuYXBwbHkodGhhdCwgYXJncyk7CiAgICB9LAogICAgYXBwbHk6IGZ1bmN0aW9uICh0eXBlLCB0aGF0LCBhcmdzKSB7CiAgICAgIGlmICghdGhpcy5fLmhhc093blByb3BlcnR5KHR5cGUpKSB0aHJvdyBuZXcgRXJyb3IoInVua25vd24gdHlwZTogIiArIHR5cGUpOwogICAgICBmb3IgKHZhciB0ID0gdGhpcy5fW3R5cGVdLCBpID0gMCwgbiA9IHQubGVuZ3RoOyBpIDwgbjsgKytpKSB0W2ldLnZhbHVlLmFwcGx5KHRoYXQsIGFyZ3MpOwogICAgfQogIH07CiAgZnVuY3Rpb24gZ2V0JDEodHlwZSwgbmFtZSkgewogICAgZm9yICh2YXIgaSA9IDAsIG4gPSB0eXBlLmxlbmd0aCwgYzsgaSA8IG47ICsraSkgewogICAgICBpZiAoKGMgPSB0eXBlW2ldKS5uYW1lID09PSBuYW1lKSB7CiAgICAgICAgcmV0dXJuIGMudmFsdWU7CiAgICAgIH0KICAgIH0KICB9CiAgZnVuY3Rpb24gc2V0JDEodHlwZSwgbmFtZSwgY2FsbGJhY2spIHsKICAgIGZvciAodmFyIGkgPSAwLCBuID0gdHlwZS5sZW5ndGg7IGkgPCBuOyArK2kpIHsKICAgICAgaWYgKHR5cGVbaV0ubmFtZSA9PT0gbmFtZSkgewogICAgICAgIHR5cGVbaV0gPSBub29wLCB0eXBlID0gdHlwZS5zbGljZSgwLCBpKS5jb25jYXQodHlwZS5zbGljZShpICsgMSkpOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgICBpZiAoY2FsbGJhY2sgIT0gbnVsbCkgdHlwZS5wdXNoKHsKICAgICAgbmFtZTogbmFtZSwKICAgICAgdmFsdWU6IGNhbGxiYWNrCiAgICB9KTsKICAgIHJldHVybiB0eXBlOwogIH0KCiAgdmFyIHhodG1sID0gImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiOwogIHZhciBuYW1lc3BhY2VzID0gewogICAgc3ZnOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLAogICAgeGh0bWw6IHhodG1sLAogICAgeGxpbms6ICJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiwKICAgIHhtbDogImh0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZSIsCiAgICB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAveG1sbnMvIgogIH07CgogIGZ1bmN0aW9uIG5hbWVzcGFjZSAobmFtZSkgewogICAgdmFyIHByZWZpeCA9IG5hbWUgKz0gIiIsCiAgICAgIGkgPSBwcmVmaXguaW5kZXhPZigiOiIpOwogICAgaWYgKGkgPj0gMCAmJiAocHJlZml4ID0gbmFtZS5zbGljZSgwLCBpKSkgIT09ICJ4bWxucyIpIG5hbWUgPSBuYW1lLnNsaWNlKGkgKyAxKTsKICAgIHJldHVybiBuYW1lc3BhY2VzLmhhc093blByb3BlcnR5KHByZWZpeCkgPyB7CiAgICAgIHNwYWNlOiBuYW1lc3BhY2VzW3ByZWZpeF0sCiAgICAgIGxvY2FsOiBuYW1lCiAgICB9IDogbmFtZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnMKICB9CgogIGZ1bmN0aW9uIGNyZWF0b3JJbmhlcml0KG5hbWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBkb2N1bWVudCA9IHRoaXMub3duZXJEb2N1bWVudCwKICAgICAgICB1cmkgPSB0aGlzLm5hbWVzcGFjZVVSSTsKICAgICAgcmV0dXJuIHVyaSA9PT0geGh0bWwgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm5hbWVzcGFjZVVSSSA9PT0geGh0bWwgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5hbWUpIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHVyaSwgbmFtZSk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBjcmVhdG9yRml4ZWQoZnVsbG5hbWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0aGlzLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBjcmVhdG9yIChuYW1lKSB7CiAgICB2YXIgZnVsbG5hbWUgPSBuYW1lc3BhY2UobmFtZSk7CiAgICByZXR1cm4gKGZ1bGxuYW1lLmxvY2FsID8gY3JlYXRvckZpeGVkIDogY3JlYXRvckluaGVyaXQpKGZ1bGxuYW1lKTsKICB9CgogIGZ1bmN0aW9uIG5vbmUoKSB7fQogIGZ1bmN0aW9uIHNlbGVjdG9yIChzZWxlY3RvcikgewogICAgcmV0dXJuIHNlbGVjdG9yID09IG51bGwgPyBub25lIDogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBzZWxlY3Rpb25fc2VsZWN0IChzZWxlY3QpIHsKICAgIGlmICh0eXBlb2Ygc2VsZWN0ICE9PSAiZnVuY3Rpb24iKSBzZWxlY3QgPSBzZWxlY3RvcihzZWxlY3QpOwogICAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gbmV3IEFycmF5KG0pLCBqID0gMDsgaiA8IG07ICsraikgewogICAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgc3ViZ3JvdXAgPSBzdWJncm91cHNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIHN1Ym5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7CiAgICAgICAgaWYgKChub2RlID0gZ3JvdXBbaV0pICYmIChzdWJub2RlID0gc2VsZWN0LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKSkgewogICAgICAgICAgaWYgKCJfX2RhdGFfXyIgaW4gbm9kZSkgc3Vibm9kZS5fX2RhdGFfXyA9IG5vZGUuX19kYXRhX187CiAgICAgICAgICBzdWJncm91cFtpXSA9IHN1Ym5vZGU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gbmV3IFNlbGVjdGlvbiQxKHN1Ymdyb3VwcywgdGhpcy5fcGFyZW50cyk7CiAgfQoKICAvLyBHaXZlbiBzb21ldGhpbmcgYXJyYXkgbGlrZSAob3IgbnVsbCksIHJldHVybnMgc29tZXRoaW5nIHRoYXQgaXMgc3RyaWN0bHkgYW4KICAvLyBhcnJheS4gVGhpcyBpcyB1c2VkIHRvIGVuc3VyZSB0aGF0IGFycmF5LWxpa2Ugb2JqZWN0cyBwYXNzZWQgdG8gZDMuc2VsZWN0QWxsCiAgLy8gb3Igc2VsZWN0aW9uLnNlbGVjdEFsbCBhcmUgY29udmVydGVkIGludG8gcHJvcGVyIGFycmF5cyB3aGVuIGNyZWF0aW5nIGEKICAvLyBzZWxlY3Rpb247IHdlIGRvbuKAmXQgZXZlciB3YW50IHRvIGNyZWF0ZSBhIHNlbGVjdGlvbiBiYWNrZWQgYnkgYSBsaXZlCiAgLy8gSFRNTENvbGxlY3Rpb24gb3IgTm9kZUxpc3QuIEhvd2V2ZXIsIG5vdGUgdGhhdCBzZWxlY3Rpb24uc2VsZWN0QWxsIHdpbGwgdXNlIGEKICAvLyBzdGF0aWMgTm9kZUxpc3QgYXMgYSBncm91cCwgc2luY2UgaXQgc2FmZWx5IGRlcml2ZWQgZnJvbSBxdWVyeVNlbGVjdG9yQWxsLgogIGZ1bmN0aW9uIGFycmF5KHgpIHsKICAgIHJldHVybiB4ID09IG51bGwgPyBbXSA6IEFycmF5LmlzQXJyYXkoeCkgPyB4IDogQXJyYXkuZnJvbSh4KTsKICB9CgogIGZ1bmN0aW9uIGVtcHR5KCkgewogICAgcmV0dXJuIFtdOwogIH0KICBmdW5jdGlvbiBzZWxlY3RvckFsbCAoc2VsZWN0b3IpIHsKICAgIHJldHVybiBzZWxlY3RvciA9PSBudWxsID8gZW1wdHkgOiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIGFycmF5QWxsKHNlbGVjdCkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGFycmF5KHNlbGVjdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbl9zZWxlY3RBbGwgKHNlbGVjdCkgewogICAgaWYgKHR5cGVvZiBzZWxlY3QgPT09ICJmdW5jdGlvbiIpIHNlbGVjdCA9IGFycmF5QWxsKHNlbGVjdCk7ZWxzZSBzZWxlY3QgPSBzZWxlY3RvckFsbChzZWxlY3QpOwogICAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gW10sIHBhcmVudHMgPSBbXSwgaiA9IDA7IGogPCBtOyArK2opIHsKICAgICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7CiAgICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkgewogICAgICAgICAgc3ViZ3JvdXBzLnB1c2goc2VsZWN0LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKTsKICAgICAgICAgIHBhcmVudHMucHVzaChub2RlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBuZXcgU2VsZWN0aW9uJDEoc3ViZ3JvdXBzLCBwYXJlbnRzKTsKICB9CgogIGZ1bmN0aW9uIG1hdGNoZXIgKHNlbGVjdG9yKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdGhpcy5tYXRjaGVzKHNlbGVjdG9yKTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIGNoaWxkTWF0Y2hlcihzZWxlY3RvcikgewogICAgcmV0dXJuIGZ1bmN0aW9uIChub2RlKSB7CiAgICAgIHJldHVybiBub2RlLm1hdGNoZXMoc2VsZWN0b3IpOwogICAgfTsKICB9CgogIHZhciBmaW5kID0gQXJyYXkucHJvdG90eXBlLmZpbmQ7CiAgZnVuY3Rpb24gY2hpbGRGaW5kKG1hdGNoKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gZmluZC5jYWxsKHRoaXMuY2hpbGRyZW4sIG1hdGNoKTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIGNoaWxkRmlyc3QoKSB7CiAgICByZXR1cm4gdGhpcy5maXJzdEVsZW1lbnRDaGlsZDsKICB9CiAgZnVuY3Rpb24gc2VsZWN0aW9uX3NlbGVjdENoaWxkIChtYXRjaCkgewogICAgcmV0dXJuIHRoaXMuc2VsZWN0KG1hdGNoID09IG51bGwgPyBjaGlsZEZpcnN0IDogY2hpbGRGaW5kKHR5cGVvZiBtYXRjaCA9PT0gImZ1bmN0aW9uIiA/IG1hdGNoIDogY2hpbGRNYXRjaGVyKG1hdGNoKSkpOwogIH0KCiAgdmFyIGZpbHRlciA9IEFycmF5LnByb3RvdHlwZS5maWx0ZXI7CiAgZnVuY3Rpb24gY2hpbGRyZW4oKSB7CiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmNoaWxkcmVuKTsKICB9CiAgZnVuY3Rpb24gY2hpbGRyZW5GaWx0ZXIobWF0Y2gpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBmaWx0ZXIuY2FsbCh0aGlzLmNoaWxkcmVuLCBtYXRjaCk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBzZWxlY3Rpb25fc2VsZWN0Q2hpbGRyZW4gKG1hdGNoKSB7CiAgICByZXR1cm4gdGhpcy5zZWxlY3RBbGwobWF0Y2ggPT0gbnVsbCA/IGNoaWxkcmVuIDogY2hpbGRyZW5GaWx0ZXIodHlwZW9mIG1hdGNoID09PSAiZnVuY3Rpb24iID8gbWF0Y2ggOiBjaGlsZE1hdGNoZXIobWF0Y2gpKSk7CiAgfQoKICBmdW5jdGlvbiBzZWxlY3Rpb25fZmlsdGVyIChtYXRjaCkgewogICAgaWYgKHR5cGVvZiBtYXRjaCAhPT0gImZ1bmN0aW9uIikgbWF0Y2ggPSBtYXRjaGVyKG1hdGNoKTsKICAgIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIHN1Ymdyb3VwcyA9IG5ldyBBcnJheShtKSwgaiA9IDA7IGogPCBtOyArK2opIHsKICAgICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIHN1Ymdyb3VwID0gc3ViZ3JvdXBzW2pdID0gW10sIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7CiAgICAgICAgaWYgKChub2RlID0gZ3JvdXBbaV0pICYmIG1hdGNoLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKSB7CiAgICAgICAgICBzdWJncm91cC5wdXNoKG5vZGUpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIG5ldyBTZWxlY3Rpb24kMShzdWJncm91cHMsIHRoaXMuX3BhcmVudHMpOwogIH0KCiAgZnVuY3Rpb24gc3BhcnNlICh1cGRhdGUpIHsKICAgIHJldHVybiBuZXcgQXJyYXkodXBkYXRlLmxlbmd0aCk7CiAgfQoKICBmdW5jdGlvbiBzZWxlY3Rpb25fZW50ZXIgKCkgewogICAgcmV0dXJuIG5ldyBTZWxlY3Rpb24kMSh0aGlzLl9lbnRlciB8fCB0aGlzLl9ncm91cHMubWFwKHNwYXJzZSksIHRoaXMuX3BhcmVudHMpOwogIH0KICBmdW5jdGlvbiBFbnRlck5vZGUocGFyZW50LCBkYXR1bSkgewogICAgdGhpcy5vd25lckRvY3VtZW50ID0gcGFyZW50Lm93bmVyRG9jdW1lbnQ7CiAgICB0aGlzLm5hbWVzcGFjZVVSSSA9IHBhcmVudC5uYW1lc3BhY2VVUkk7CiAgICB0aGlzLl9uZXh0ID0gbnVsbDsKICAgIHRoaXMuX3BhcmVudCA9IHBhcmVudDsKICAgIHRoaXMuX19kYXRhX18gPSBkYXR1bTsKICB9CiAgRW50ZXJOb2RlLnByb3RvdHlwZSA9IHsKICAgIGNvbnN0cnVjdG9yOiBFbnRlck5vZGUsCiAgICBhcHBlbmRDaGlsZDogZnVuY3Rpb24gKGNoaWxkKSB7CiAgICAgIHJldHVybiB0aGlzLl9wYXJlbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLCB0aGlzLl9uZXh0KTsKICAgIH0sCiAgICBpbnNlcnRCZWZvcmU6IGZ1bmN0aW9uIChjaGlsZCwgbmV4dCkgewogICAgICByZXR1cm4gdGhpcy5fcGFyZW50Lmluc2VydEJlZm9yZShjaGlsZCwgbmV4dCk7CiAgICB9LAogICAgcXVlcnlTZWxlY3RvcjogZnVuY3Rpb24gKHNlbGVjdG9yKSB7CiAgICAgIHJldHVybiB0aGlzLl9wYXJlbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7CiAgICB9LAogICAgcXVlcnlTZWxlY3RvckFsbDogZnVuY3Rpb24gKHNlbGVjdG9yKSB7CiAgICAgIHJldHVybiB0aGlzLl9wYXJlbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7CiAgICB9CiAgfTsKCiAgZnVuY3Rpb24gY29uc3RhbnQkMSAoeCkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHg7CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gYmluZEluZGV4KHBhcmVudCwgZ3JvdXAsIGVudGVyLCB1cGRhdGUsIGV4aXQsIGRhdGEpIHsKICAgIHZhciBpID0gMCwKICAgICAgbm9kZSwKICAgICAgZ3JvdXBMZW5ndGggPSBncm91cC5sZW5ndGgsCiAgICAgIGRhdGFMZW5ndGggPSBkYXRhLmxlbmd0aDsKCiAgICAvLyBQdXQgYW55IG5vbi1udWxsIG5vZGVzIHRoYXQgZml0IGludG8gdXBkYXRlLgogICAgLy8gUHV0IGFueSBudWxsIG5vZGVzIGludG8gZW50ZXIuCiAgICAvLyBQdXQgYW55IHJlbWFpbmluZyBkYXRhIGludG8gZW50ZXIuCiAgICBmb3IgKDsgaSA8IGRhdGFMZW5ndGg7ICsraSkgewogICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7CiAgICAgICAgbm9kZS5fX2RhdGFfXyA9IGRhdGFbaV07CiAgICAgICAgdXBkYXRlW2ldID0gbm9kZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBlbnRlcltpXSA9IG5ldyBFbnRlck5vZGUocGFyZW50LCBkYXRhW2ldKTsKICAgICAgfQogICAgfQoKICAgIC8vIFB1dCBhbnkgbm9uLW51bGwgbm9kZXMgdGhhdCBkb27igJl0IGZpdCBpbnRvIGV4aXQuCiAgICBmb3IgKDsgaSA8IGdyb3VwTGVuZ3RoOyArK2kpIHsKICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkgewogICAgICAgIGV4aXRbaV0gPSBub2RlOwogICAgICB9CiAgICB9CiAgfQogIGZ1bmN0aW9uIGJpbmRLZXkocGFyZW50LCBncm91cCwgZW50ZXIsIHVwZGF0ZSwgZXhpdCwgZGF0YSwga2V5KSB7CiAgICB2YXIgaSwKICAgICAgbm9kZSwKICAgICAgbm9kZUJ5S2V5VmFsdWUgPSBuZXcgTWFwKCksCiAgICAgIGdyb3VwTGVuZ3RoID0gZ3JvdXAubGVuZ3RoLAogICAgICBkYXRhTGVuZ3RoID0gZGF0YS5sZW5ndGgsCiAgICAgIGtleVZhbHVlcyA9IG5ldyBBcnJheShncm91cExlbmd0aCksCiAgICAgIGtleVZhbHVlOwoKICAgIC8vIENvbXB1dGUgdGhlIGtleSBmb3IgZWFjaCBub2RlLgogICAgLy8gSWYgbXVsdGlwbGUgbm9kZXMgaGF2ZSB0aGUgc2FtZSBrZXksIHRoZSBkdXBsaWNhdGVzIGFyZSBhZGRlZCB0byBleGl0LgogICAgZm9yIChpID0gMDsgaSA8IGdyb3VwTGVuZ3RoOyArK2kpIHsKICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkgewogICAgICAgIGtleVZhbHVlc1tpXSA9IGtleVZhbHVlID0ga2V5LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApICsgIiI7CiAgICAgICAgaWYgKG5vZGVCeUtleVZhbHVlLmhhcyhrZXlWYWx1ZSkpIHsKICAgICAgICAgIGV4aXRbaV0gPSBub2RlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBub2RlQnlLZXlWYWx1ZS5zZXQoa2V5VmFsdWUsIG5vZGUpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIC8vIENvbXB1dGUgdGhlIGtleSBmb3IgZWFjaCBkYXR1bS4KICAgIC8vIElmIHRoZXJlIGEgbm9kZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBrZXksIGpvaW4gYW5kIGFkZCBpdCB0byB1cGRhdGUuCiAgICAvLyBJZiB0aGVyZSBpcyBub3QgKG9yIHRoZSBrZXkgaXMgYSBkdXBsaWNhdGUpLCBhZGQgaXQgdG8gZW50ZXIuCiAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YUxlbmd0aDsgKytpKSB7CiAgICAgIGtleVZhbHVlID0ga2V5LmNhbGwocGFyZW50LCBkYXRhW2ldLCBpLCBkYXRhKSArICIiOwogICAgICBpZiAobm9kZSA9IG5vZGVCeUtleVZhbHVlLmdldChrZXlWYWx1ZSkpIHsKICAgICAgICB1cGRhdGVbaV0gPSBub2RlOwogICAgICAgIG5vZGUuX19kYXRhX18gPSBkYXRhW2ldOwogICAgICAgIG5vZGVCeUtleVZhbHVlLmRlbGV0ZShrZXlWYWx1ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZW50ZXJbaV0gPSBuZXcgRW50ZXJOb2RlKHBhcmVudCwgZGF0YVtpXSk7CiAgICAgIH0KICAgIH0KCiAgICAvLyBBZGQgYW55IHJlbWFpbmluZyBub2RlcyB0aGF0IHdlcmUgbm90IGJvdW5kIHRvIGRhdGEgdG8gZXhpdC4KICAgIGZvciAoaSA9IDA7IGkgPCBncm91cExlbmd0aDsgKytpKSB7CiAgICAgIGlmICgobm9kZSA9IGdyb3VwW2ldKSAmJiBub2RlQnlLZXlWYWx1ZS5nZXQoa2V5VmFsdWVzW2ldKSA9PT0gbm9kZSkgewogICAgICAgIGV4aXRbaV0gPSBub2RlOwogICAgICB9CiAgICB9CiAgfQogIGZ1bmN0aW9uIGRhdHVtKG5vZGUpIHsKICAgIHJldHVybiBub2RlLl9fZGF0YV9fOwogIH0KICBmdW5jdGlvbiBzZWxlY3Rpb25fZGF0YSAodmFsdWUsIGtleSkgewogICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLCBkYXR1bSk7CiAgICB2YXIgYmluZCA9IGtleSA/IGJpbmRLZXkgOiBiaW5kSW5kZXgsCiAgICAgIHBhcmVudHMgPSB0aGlzLl9wYXJlbnRzLAogICAgICBncm91cHMgPSB0aGlzLl9ncm91cHM7CiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAiZnVuY3Rpb24iKSB2YWx1ZSA9IGNvbnN0YW50JDEodmFsdWUpOwogICAgZm9yICh2YXIgbSA9IGdyb3Vwcy5sZW5ndGgsIHVwZGF0ZSA9IG5ldyBBcnJheShtKSwgZW50ZXIgPSBuZXcgQXJyYXkobSksIGV4aXQgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7CiAgICAgIHZhciBwYXJlbnQgPSBwYXJlbnRzW2pdLAogICAgICAgIGdyb3VwID0gZ3JvdXBzW2pdLAogICAgICAgIGdyb3VwTGVuZ3RoID0gZ3JvdXAubGVuZ3RoLAogICAgICAgIGRhdGEgPSBhcnJheWxpa2UodmFsdWUuY2FsbChwYXJlbnQsIHBhcmVudCAmJiBwYXJlbnQuX19kYXRhX18sIGosIHBhcmVudHMpKSwKICAgICAgICBkYXRhTGVuZ3RoID0gZGF0YS5sZW5ndGgsCiAgICAgICAgZW50ZXJHcm91cCA9IGVudGVyW2pdID0gbmV3IEFycmF5KGRhdGFMZW5ndGgpLAogICAgICAgIHVwZGF0ZUdyb3VwID0gdXBkYXRlW2pdID0gbmV3IEFycmF5KGRhdGFMZW5ndGgpLAogICAgICAgIGV4aXRHcm91cCA9IGV4aXRbal0gPSBuZXcgQXJyYXkoZ3JvdXBMZW5ndGgpOwogICAgICBiaW5kKHBhcmVudCwgZ3JvdXAsIGVudGVyR3JvdXAsIHVwZGF0ZUdyb3VwLCBleGl0R3JvdXAsIGRhdGEsIGtleSk7CgogICAgICAvLyBOb3cgY29ubmVjdCB0aGUgZW50ZXIgbm9kZXMgdG8gdGhlaXIgZm9sbG93aW5nIHVwZGF0ZSBub2RlLCBzdWNoIHRoYXQKICAgICAgLy8gYXBwZW5kQ2hpbGQgY2FuIGluc2VydCB0aGUgbWF0ZXJpYWxpemVkIGVudGVyIG5vZGUgYmVmb3JlIHRoaXMgbm9kZSwKICAgICAgLy8gcmF0aGVyIHRoYW4gYXQgdGhlIGVuZCBvZiB0aGUgcGFyZW50IG5vZGUuCiAgICAgIGZvciAodmFyIGkwID0gMCwgaTEgPSAwLCBwcmV2aW91cywgbmV4dDsgaTAgPCBkYXRhTGVuZ3RoOyArK2kwKSB7CiAgICAgICAgaWYgKHByZXZpb3VzID0gZW50ZXJHcm91cFtpMF0pIHsKICAgICAgICAgIGlmIChpMCA+PSBpMSkgaTEgPSBpMCArIDE7CiAgICAgICAgICB3aGlsZSAoIShuZXh0ID0gdXBkYXRlR3JvdXBbaTFdKSAmJiArK2kxIDwgZGF0YUxlbmd0aCk7CiAgICAgICAgICBwcmV2aW91cy5fbmV4dCA9IG5leHQgfHwgbnVsbDsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHVwZGF0ZSA9IG5ldyBTZWxlY3Rpb24kMSh1cGRhdGUsIHBhcmVudHMpOwogICAgdXBkYXRlLl9lbnRlciA9IGVudGVyOwogICAgdXBkYXRlLl9leGl0ID0gZXhpdDsKICAgIHJldHVybiB1cGRhdGU7CiAgfQoKICAvLyBHaXZlbiBzb21lIGRhdGEsIHRoaXMgcmV0dXJucyBhbiBhcnJheS1saWtlIHZpZXcgb2YgaXQ6IGFuIG9iamVjdCB0aGF0CiAgLy8gZXhwb3NlcyBhIGxlbmd0aCBwcm9wZXJ0eSBhbmQgYWxsb3dzIG51bWVyaWMgaW5kZXhpbmcuIE5vdGUgdGhhdCB1bmxpa2UKICAvLyBzZWxlY3RBbGwsIHRoaXMgaXNu4oCZdCB3b3JyaWVkIGFib3V0IOKAnGxpdmXigJ0gY29sbGVjdGlvbnMgYmVjYXVzZSB0aGUgcmVzdWx0aW5nCiAgLy8gYXJyYXkgd2lsbCBvbmx5IGJlIHVzZWQgYnJpZWZseSB3aGlsZSBkYXRhIGlzIGJlaW5nIGJvdW5kLiAoSXQgaXMgcG9zc2libGUgdG8KICAvLyBjYXVzZSB0aGUgZGF0YSB0byBjaGFuZ2Ugd2hpbGUgaXRlcmF0aW5nIGJ5IHVzaW5nIGEga2V5IGZ1bmN0aW9uLCBidXQgcGxlYXNlCiAgLy8gZG9u4oCZdDsgd2XigJlkIHJhdGhlciBhdm9pZCBhIGdyYXR1aXRvdXMgY29weS4pCiAgZnVuY3Rpb24gYXJyYXlsaWtlKGRhdGEpIHsKICAgIHJldHVybiB0eXBlb2YgZGF0YSA9PT0gIm9iamVjdCIgJiYgImxlbmd0aCIgaW4gZGF0YSA/IGRhdGEgLy8gQXJyYXksIFR5cGVkQXJyYXksIE5vZGVMaXN0LCBhcnJheS1saWtlCiAgICA6IEFycmF5LmZyb20oZGF0YSk7IC8vIE1hcCwgU2V0LCBpdGVyYWJsZSwgc3RyaW5nLCBvciBhbnl0aGluZyBlbHNlCiAgfQoKICBmdW5jdGlvbiBzZWxlY3Rpb25fZXhpdCAoKSB7CiAgICByZXR1cm4gbmV3IFNlbGVjdGlvbiQxKHRoaXMuX2V4aXQgfHwgdGhpcy5fZ3JvdXBzLm1hcChzcGFyc2UpLCB0aGlzLl9wYXJlbnRzKTsKICB9CgogIGZ1bmN0aW9uIHNlbGVjdGlvbl9qb2luIChvbmVudGVyLCBvbnVwZGF0ZSwgb25leGl0KSB7CiAgICB2YXIgZW50ZXIgPSB0aGlzLmVudGVyKCksCiAgICAgIHVwZGF0ZSA9IHRoaXMsCiAgICAgIGV4aXQgPSB0aGlzLmV4aXQoKTsKICAgIGlmICh0eXBlb2Ygb25lbnRlciA9PT0gImZ1bmN0aW9uIikgewogICAgICBlbnRlciA9IG9uZW50ZXIoZW50ZXIpOwogICAgICBpZiAoZW50ZXIpIGVudGVyID0gZW50ZXIuc2VsZWN0aW9uKCk7CiAgICB9IGVsc2UgewogICAgICBlbnRlciA9IGVudGVyLmFwcGVuZChvbmVudGVyICsgIiIpOwogICAgfQogICAgaWYgKG9udXBkYXRlICE9IG51bGwpIHsKICAgICAgdXBkYXRlID0gb251cGRhdGUodXBkYXRlKTsKICAgICAgaWYgKHVwZGF0ZSkgdXBkYXRlID0gdXBkYXRlLnNlbGVjdGlvbigpOwogICAgfQogICAgaWYgKG9uZXhpdCA9PSBudWxsKSBleGl0LnJlbW92ZSgpO2Vsc2Ugb25leGl0KGV4aXQpOwogICAgcmV0dXJuIGVudGVyICYmIHVwZGF0ZSA/IGVudGVyLm1lcmdlKHVwZGF0ZSkub3JkZXIoKSA6IHVwZGF0ZTsKICB9CgogIGZ1bmN0aW9uIHNlbGVjdGlvbl9tZXJnZSAoY29udGV4dCkgewogICAgdmFyIHNlbGVjdGlvbiA9IGNvbnRleHQuc2VsZWN0aW9uID8gY29udGV4dC5zZWxlY3Rpb24oKSA6IGNvbnRleHQ7CiAgICBmb3IgKHZhciBncm91cHMwID0gdGhpcy5fZ3JvdXBzLCBncm91cHMxID0gc2VsZWN0aW9uLl9ncm91cHMsIG0wID0gZ3JvdXBzMC5sZW5ndGgsIG0xID0gZ3JvdXBzMS5sZW5ndGgsIG0gPSBNYXRoLm1pbihtMCwgbTEpLCBtZXJnZXMgPSBuZXcgQXJyYXkobTApLCBqID0gMDsgaiA8IG07ICsraikgewogICAgICBmb3IgKHZhciBncm91cDAgPSBncm91cHMwW2pdLCBncm91cDEgPSBncm91cHMxW2pdLCBuID0gZ3JvdXAwLmxlbmd0aCwgbWVyZ2UgPSBtZXJnZXNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7CiAgICAgICAgaWYgKG5vZGUgPSBncm91cDBbaV0gfHwgZ3JvdXAxW2ldKSB7CiAgICAgICAgICBtZXJnZVtpXSA9IG5vZGU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBmb3IgKDsgaiA8IG0wOyArK2opIHsKICAgICAgbWVyZ2VzW2pdID0gZ3JvdXBzMFtqXTsKICAgIH0KICAgIHJldHVybiBuZXcgU2VsZWN0aW9uJDEobWVyZ2VzLCB0aGlzLl9wYXJlbnRzKTsKICB9CgogIGZ1bmN0aW9uIHNlbGVjdGlvbl9vcmRlciAoKSB7CiAgICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIGogPSAtMSwgbSA9IGdyb3Vwcy5sZW5ndGg7ICsraiA8IG07KSB7CiAgICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBpID0gZ3JvdXAubGVuZ3RoIC0gMSwgbmV4dCA9IGdyb3VwW2ldLCBub2RlOyAtLWkgPj0gMDspIHsKICAgICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7CiAgICAgICAgICBpZiAobmV4dCAmJiBub2RlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKG5leHQpIF4gNCkgbmV4dC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBuZXh0KTsKICAgICAgICAgIG5leHQgPSBub2RlOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHRoaXM7CiAgfQoKICBmdW5jdGlvbiBzZWxlY3Rpb25fc29ydCAoY29tcGFyZSkgewogICAgaWYgKCFjb21wYXJlKSBjb21wYXJlID0gYXNjZW5kaW5nOwogICAgZnVuY3Rpb24gY29tcGFyZU5vZGUoYSwgYikgewogICAgICByZXR1cm4gYSAmJiBiID8gY29tcGFyZShhLl9fZGF0YV9fLCBiLl9fZGF0YV9fKSA6ICFhIC0gIWI7CiAgICB9CiAgICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBzb3J0Z3JvdXBzID0gbmV3IEFycmF5KG0pLCBqID0gMDsgaiA8IG07ICsraikgewogICAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgc29ydGdyb3VwID0gc29ydGdyb3Vwc1tqXSA9IG5ldyBBcnJheShuKSwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHsKICAgICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7CiAgICAgICAgICBzb3J0Z3JvdXBbaV0gPSBub2RlOwogICAgICAgIH0KICAgICAgfQogICAgICBzb3J0Z3JvdXAuc29ydChjb21wYXJlTm9kZSk7CiAgICB9CiAgICByZXR1cm4gbmV3IFNlbGVjdGlvbiQxKHNvcnRncm91cHMsIHRoaXMuX3BhcmVudHMpLm9yZGVyKCk7CiAgfQogIGZ1bmN0aW9uIGFzY2VuZGluZyhhLCBiKSB7CiAgICByZXR1cm4gYSA8IGIgPyAtMSA6IGEgPiBiID8gMSA6IGEgPj0gYiA/IDAgOiBOYU47CiAgfQoKICBmdW5jdGlvbiBzZWxlY3Rpb25fY2FsbCAoKSB7CiAgICB2YXIgY2FsbGJhY2sgPSBhcmd1bWVudHNbMF07CiAgICBhcmd1bWVudHNbMF0gPSB0aGlzOwogICAgY2FsbGJhY2suYXBwbHkobnVsbCwgYXJndW1lbnRzKTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgZnVuY3Rpb24gc2VsZWN0aW9uX25vZGVzICgpIHsKICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMpOwogIH0KCiAgZnVuY3Rpb24gc2VsZWN0aW9uX25vZGUgKCkgewogICAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBqID0gMCwgbSA9IGdyb3Vwcy5sZW5ndGg7IGogPCBtOyArK2opIHsKICAgICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIGkgPSAwLCBuID0gZ3JvdXAubGVuZ3RoOyBpIDwgbjsgKytpKSB7CiAgICAgICAgdmFyIG5vZGUgPSBncm91cFtpXTsKICAgICAgICBpZiAobm9kZSkgcmV0dXJuIG5vZGU7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBudWxsOwogIH0KCiAgZnVuY3Rpb24gc2VsZWN0aW9uX3NpemUgKCkgewogICAgbGV0IHNpemUgPSAwOwogICAgZm9yIChjb25zdCBub2RlIG9mIHRoaXMpICsrc2l6ZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycwogICAgcmV0dXJuIHNpemU7CiAgfQoKICBmdW5jdGlvbiBzZWxlY3Rpb25fZW1wdHkgKCkgewogICAgcmV0dXJuICF0aGlzLm5vZGUoKTsKICB9CgogIGZ1bmN0aW9uIHNlbGVjdGlvbl9lYWNoIChjYWxsYmFjaykgewogICAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBqID0gMCwgbSA9IGdyb3Vwcy5sZW5ndGg7IGogPCBtOyArK2opIHsKICAgICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIGkgPSAwLCBuID0gZ3JvdXAubGVuZ3RoLCBub2RlOyBpIDwgbjsgKytpKSB7CiAgICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkgY2FsbGJhY2suY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0aGlzOwogIH0KCiAgZnVuY3Rpb24gYXR0clJlbW92ZSQxKG5hbWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gYXR0clJlbW92ZU5TJDEoZnVsbG5hbWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsKTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIGF0dHJDb25zdGFudCQxKG5hbWUsIHZhbHVlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBhdHRyQ29uc3RhbnROUyQxKGZ1bGxuYW1lLCB2YWx1ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5zZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwsIHZhbHVlKTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIGF0dHJGdW5jdGlvbiQxKG5hbWUsIHZhbHVlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIGlmICh2ID09IG51bGwpIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpO2Vsc2UgdGhpcy5zZXRBdHRyaWJ1dGUobmFtZSwgdik7CiAgICB9OwogIH0KICBmdW5jdGlvbiBhdHRyRnVuY3Rpb25OUyQxKGZ1bGxuYW1lLCB2YWx1ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICBpZiAodiA9PSBudWxsKSB0aGlzLnJlbW92ZUF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCk7ZWxzZSB0aGlzLnNldEF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCwgdik7CiAgICB9OwogIH0KICBmdW5jdGlvbiBzZWxlY3Rpb25fYXR0ciAobmFtZSwgdmFsdWUpIHsKICAgIHZhciBmdWxsbmFtZSA9IG5hbWVzcGFjZShuYW1lKTsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikgewogICAgICB2YXIgbm9kZSA9IHRoaXMubm9kZSgpOwogICAgICByZXR1cm4gZnVsbG5hbWUubG9jYWwgPyBub2RlLmdldEF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCkgOiBub2RlLmdldEF0dHJpYnV0ZShmdWxsbmFtZSk7CiAgICB9CiAgICByZXR1cm4gdGhpcy5lYWNoKCh2YWx1ZSA9PSBudWxsID8gZnVsbG5hbWUubG9jYWwgPyBhdHRyUmVtb3ZlTlMkMSA6IGF0dHJSZW1vdmUkMSA6IHR5cGVvZiB2YWx1ZSA9PT0gImZ1bmN0aW9uIiA/IGZ1bGxuYW1lLmxvY2FsID8gYXR0ckZ1bmN0aW9uTlMkMSA6IGF0dHJGdW5jdGlvbiQxIDogZnVsbG5hbWUubG9jYWwgPyBhdHRyQ29uc3RhbnROUyQxIDogYXR0ckNvbnN0YW50JDEpKGZ1bGxuYW1lLCB2YWx1ZSkpOwogIH0KCiAgZnVuY3Rpb24gZGVmYXVsdFZpZXcgKG5vZGUpIHsKICAgIHJldHVybiBub2RlLm93bmVyRG9jdW1lbnQgJiYgbm9kZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3IC8vIG5vZGUgaXMgYSBOb2RlCiAgICB8fCBub2RlLmRvY3VtZW50ICYmIG5vZGUgLy8gbm9kZSBpcyBhIFdpbmRvdwogICAgfHwgbm9kZS5kZWZhdWx0VmlldzsgLy8gbm9kZSBpcyBhIERvY3VtZW50CiAgfQoKICBmdW5jdGlvbiBzdHlsZVJlbW92ZSQxKG5hbWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkobmFtZSk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBzdHlsZUNvbnN0YW50JDEobmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB0aGlzLnN0eWxlLnNldFByb3BlcnR5KG5hbWUsIHZhbHVlLCBwcmlvcml0eSk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBzdHlsZUZ1bmN0aW9uJDEobmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIGlmICh2ID09IG51bGwpIHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkobmFtZSk7ZWxzZSB0aGlzLnN0eWxlLnNldFByb3BlcnR5KG5hbWUsIHYsIHByaW9yaXR5KTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbl9zdHlsZSAobmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7CiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyB0aGlzLmVhY2goKHZhbHVlID09IG51bGwgPyBzdHlsZVJlbW92ZSQxIDogdHlwZW9mIHZhbHVlID09PSAiZnVuY3Rpb24iID8gc3R5bGVGdW5jdGlvbiQxIDogc3R5bGVDb25zdGFudCQxKShuYW1lLCB2YWx1ZSwgcHJpb3JpdHkgPT0gbnVsbCA/ICIiIDogcHJpb3JpdHkpKSA6IHN0eWxlVmFsdWUodGhpcy5ub2RlKCksIG5hbWUpOwogIH0KICBmdW5jdGlvbiBzdHlsZVZhbHVlKG5vZGUsIG5hbWUpIHsKICAgIHJldHVybiBub2RlLnN0eWxlLmdldFByb3BlcnR5VmFsdWUobmFtZSkgfHwgZGVmYXVsdFZpZXcobm9kZSkuZ2V0Q29tcHV0ZWRTdHlsZShub2RlLCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKG5hbWUpOwogIH0KCiAgZnVuY3Rpb24gcHJvcGVydHlSZW1vdmUobmFtZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgZGVsZXRlIHRoaXNbbmFtZV07CiAgICB9OwogIH0KICBmdW5jdGlvbiBwcm9wZXJ0eUNvbnN0YW50KG5hbWUsIHZhbHVlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB0aGlzW25hbWVdID0gdmFsdWU7CiAgICB9OwogIH0KICBmdW5jdGlvbiBwcm9wZXJ0eUZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIGlmICh2ID09IG51bGwpIGRlbGV0ZSB0aGlzW25hbWVdO2Vsc2UgdGhpc1tuYW1lXSA9IHY7CiAgICB9OwogIH0KICBmdW5jdGlvbiBzZWxlY3Rpb25fcHJvcGVydHkgKG5hbWUsIHZhbHVlKSB7CiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyB0aGlzLmVhY2goKHZhbHVlID09IG51bGwgPyBwcm9wZXJ0eVJlbW92ZSA6IHR5cGVvZiB2YWx1ZSA9PT0gImZ1bmN0aW9uIiA/IHByb3BlcnR5RnVuY3Rpb24gOiBwcm9wZXJ0eUNvbnN0YW50KShuYW1lLCB2YWx1ZSkpIDogdGhpcy5ub2RlKClbbmFtZV07CiAgfQoKICBmdW5jdGlvbiBjbGFzc0FycmF5KHN0cmluZykgewogICAgcmV0dXJuIHN0cmluZy50cmltKCkuc3BsaXQoL158XHMrLyk7CiAgfQogIGZ1bmN0aW9uIGNsYXNzTGlzdChub2RlKSB7CiAgICByZXR1cm4gbm9kZS5jbGFzc0xpc3QgfHwgbmV3IENsYXNzTGlzdChub2RlKTsKICB9CiAgZnVuY3Rpb24gQ2xhc3NMaXN0KG5vZGUpIHsKICAgIHRoaXMuX25vZGUgPSBub2RlOwogICAgdGhpcy5fbmFtZXMgPSBjbGFzc0FycmF5KG5vZGUuZ2V0QXR0cmlidXRlKCJjbGFzcyIpIHx8ICIiKTsKICB9CiAgQ2xhc3NMaXN0LnByb3RvdHlwZSA9IHsKICAgIGFkZDogZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgdmFyIGkgPSB0aGlzLl9uYW1lcy5pbmRleE9mKG5hbWUpOwogICAgICBpZiAoaSA8IDApIHsKICAgICAgICB0aGlzLl9uYW1lcy5wdXNoKG5hbWUpOwogICAgICAgIHRoaXMuX25vZGUuc2V0QXR0cmlidXRlKCJjbGFzcyIsIHRoaXMuX25hbWVzLmpvaW4oIiAiKSk7CiAgICAgIH0KICAgIH0sCiAgICByZW1vdmU6IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgIHZhciBpID0gdGhpcy5fbmFtZXMuaW5kZXhPZihuYW1lKTsKICAgICAgaWYgKGkgPj0gMCkgewogICAgICAgIHRoaXMuX25hbWVzLnNwbGljZShpLCAxKTsKICAgICAgICB0aGlzLl9ub2RlLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCB0aGlzLl9uYW1lcy5qb2luKCIgIikpOwogICAgICB9CiAgICB9LAogICAgY29udGFpbnM6IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgIHJldHVybiB0aGlzLl9uYW1lcy5pbmRleE9mKG5hbWUpID49IDA7CiAgICB9CiAgfTsKICBmdW5jdGlvbiBjbGFzc2VkQWRkKG5vZGUsIG5hbWVzKSB7CiAgICB2YXIgbGlzdCA9IGNsYXNzTGlzdChub2RlKSwKICAgICAgaSA9IC0xLAogICAgICBuID0gbmFtZXMubGVuZ3RoOwogICAgd2hpbGUgKCsraSA8IG4pIGxpc3QuYWRkKG5hbWVzW2ldKTsKICB9CiAgZnVuY3Rpb24gY2xhc3NlZFJlbW92ZShub2RlLCBuYW1lcykgewogICAgdmFyIGxpc3QgPSBjbGFzc0xpc3Qobm9kZSksCiAgICAgIGkgPSAtMSwKICAgICAgbiA9IG5hbWVzLmxlbmd0aDsKICAgIHdoaWxlICgrK2kgPCBuKSBsaXN0LnJlbW92ZShuYW1lc1tpXSk7CiAgfQogIGZ1bmN0aW9uIGNsYXNzZWRUcnVlKG5hbWVzKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICBjbGFzc2VkQWRkKHRoaXMsIG5hbWVzKTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIGNsYXNzZWRGYWxzZShuYW1lcykgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgY2xhc3NlZFJlbW92ZSh0aGlzLCBuYW1lcyk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBjbGFzc2VkRnVuY3Rpb24obmFtZXMsIHZhbHVlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAodmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKSA/IGNsYXNzZWRBZGQgOiBjbGFzc2VkUmVtb3ZlKSh0aGlzLCBuYW1lcyk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBzZWxlY3Rpb25fY2xhc3NlZCAobmFtZSwgdmFsdWUpIHsKICAgIHZhciBuYW1lcyA9IGNsYXNzQXJyYXkobmFtZSArICIiKTsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikgewogICAgICB2YXIgbGlzdCA9IGNsYXNzTGlzdCh0aGlzLm5vZGUoKSksCiAgICAgICAgaSA9IC0xLAogICAgICAgIG4gPSBuYW1lcy5sZW5ndGg7CiAgICAgIHdoaWxlICgrK2kgPCBuKSBpZiAoIWxpc3QuY29udGFpbnMobmFtZXNbaV0pKSByZXR1cm4gZmFsc2U7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgcmV0dXJuIHRoaXMuZWFjaCgodHlwZW9mIHZhbHVlID09PSAiZnVuY3Rpb24iID8gY2xhc3NlZEZ1bmN0aW9uIDogdmFsdWUgPyBjbGFzc2VkVHJ1ZSA6IGNsYXNzZWRGYWxzZSkobmFtZXMsIHZhbHVlKSk7CiAgfQoKICBmdW5jdGlvbiB0ZXh0UmVtb3ZlKCkgewogICAgdGhpcy50ZXh0Q29udGVudCA9ICIiOwogIH0KICBmdW5jdGlvbiB0ZXh0Q29uc3RhbnQkMSh2YWx1ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy50ZXh0Q29udGVudCA9IHZhbHVlOwogICAgfTsKICB9CiAgZnVuY3Rpb24gdGV4dEZ1bmN0aW9uJDEodmFsdWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB2ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgdGhpcy50ZXh0Q29udGVudCA9IHYgPT0gbnVsbCA/ICIiIDogdjsKICAgIH07CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbl90ZXh0ICh2YWx1ZSkgewogICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyB0aGlzLmVhY2godmFsdWUgPT0gbnVsbCA/IHRleHRSZW1vdmUgOiAodHlwZW9mIHZhbHVlID09PSAiZnVuY3Rpb24iID8gdGV4dEZ1bmN0aW9uJDEgOiB0ZXh0Q29uc3RhbnQkMSkodmFsdWUpKSA6IHRoaXMubm9kZSgpLnRleHRDb250ZW50OwogIH0KCiAgZnVuY3Rpb24gaHRtbFJlbW92ZSgpIHsKICAgIHRoaXMuaW5uZXJIVE1MID0gIiI7CiAgfQogIGZ1bmN0aW9uIGh0bWxDb25zdGFudCh2YWx1ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5pbm5lckhUTUwgPSB2YWx1ZTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIGh0bWxGdW5jdGlvbih2YWx1ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB0aGlzLmlubmVySFRNTCA9IHYgPT0gbnVsbCA/ICIiIDogdjsKICAgIH07CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbl9odG1sICh2YWx1ZSkgewogICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyB0aGlzLmVhY2godmFsdWUgPT0gbnVsbCA/IGh0bWxSZW1vdmUgOiAodHlwZW9mIHZhbHVlID09PSAiZnVuY3Rpb24iID8gaHRtbEZ1bmN0aW9uIDogaHRtbENvbnN0YW50KSh2YWx1ZSkpIDogdGhpcy5ub2RlKCkuaW5uZXJIVE1MOwogIH0KCiAgZnVuY3Rpb24gcmFpc2UoKSB7CiAgICBpZiAodGhpcy5uZXh0U2libGluZykgdGhpcy5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRoaXMpOwogIH0KICBmdW5jdGlvbiBzZWxlY3Rpb25fcmFpc2UgKCkgewogICAgcmV0dXJuIHRoaXMuZWFjaChyYWlzZSk7CiAgfQoKICBmdW5jdGlvbiBsb3dlcigpIHsKICAgIGlmICh0aGlzLnByZXZpb3VzU2libGluZykgdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLCB0aGlzLnBhcmVudE5vZGUuZmlyc3RDaGlsZCk7CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbl9sb3dlciAoKSB7CiAgICByZXR1cm4gdGhpcy5lYWNoKGxvd2VyKTsKICB9CgogIGZ1bmN0aW9uIHNlbGVjdGlvbl9hcHBlbmQgKG5hbWUpIHsKICAgIHZhciBjcmVhdGUgPSB0eXBlb2YgbmFtZSA9PT0gImZ1bmN0aW9uIiA/IG5hbWUgOiBjcmVhdG9yKG5hbWUpOwogICAgcmV0dXJuIHRoaXMuc2VsZWN0KGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHRoaXMuYXBwZW5kQ2hpbGQoY3JlYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpOwogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBjb25zdGFudE51bGwoKSB7CiAgICByZXR1cm4gbnVsbDsKICB9CiAgZnVuY3Rpb24gc2VsZWN0aW9uX2luc2VydCAobmFtZSwgYmVmb3JlKSB7CiAgICB2YXIgY3JlYXRlID0gdHlwZW9mIG5hbWUgPT09ICJmdW5jdGlvbiIgPyBuYW1lIDogY3JlYXRvcihuYW1lKSwKICAgICAgc2VsZWN0ID0gYmVmb3JlID09IG51bGwgPyBjb25zdGFudE51bGwgOiB0eXBlb2YgYmVmb3JlID09PSAiZnVuY3Rpb24iID8gYmVmb3JlIDogc2VsZWN0b3IoYmVmb3JlKTsKICAgIHJldHVybiB0aGlzLnNlbGVjdChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0aGlzLmluc2VydEJlZm9yZShjcmVhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgc2VsZWN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgbnVsbCk7CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIHJlbW92ZSgpIHsKICAgIHZhciBwYXJlbnQgPSB0aGlzLnBhcmVudE5vZGU7CiAgICBpZiAocGFyZW50KSBwYXJlbnQucmVtb3ZlQ2hpbGQodGhpcyk7CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbl9yZW1vdmUgKCkgewogICAgcmV0dXJuIHRoaXMuZWFjaChyZW1vdmUpOwogIH0KCiAgZnVuY3Rpb24gc2VsZWN0aW9uX2Nsb25lU2hhbGxvdygpIHsKICAgIHZhciBjbG9uZSA9IHRoaXMuY2xvbmVOb2RlKGZhbHNlKSwKICAgICAgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlOwogICAgcmV0dXJuIHBhcmVudCA/IHBhcmVudC5pbnNlcnRCZWZvcmUoY2xvbmUsIHRoaXMubmV4dFNpYmxpbmcpIDogY2xvbmU7CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbl9jbG9uZURlZXAoKSB7CiAgICB2YXIgY2xvbmUgPSB0aGlzLmNsb25lTm9kZSh0cnVlKSwKICAgICAgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlOwogICAgcmV0dXJuIHBhcmVudCA/IHBhcmVudC5pbnNlcnRCZWZvcmUoY2xvbmUsIHRoaXMubmV4dFNpYmxpbmcpIDogY2xvbmU7CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbl9jbG9uZSAoZGVlcCkgewogICAgcmV0dXJuIHRoaXMuc2VsZWN0KGRlZXAgPyBzZWxlY3Rpb25fY2xvbmVEZWVwIDogc2VsZWN0aW9uX2Nsb25lU2hhbGxvdyk7CiAgfQoKICBmdW5jdGlvbiBzZWxlY3Rpb25fZGF0dW0gKHZhbHVlKSB7CiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IHRoaXMucHJvcGVydHkoIl9fZGF0YV9fIiwgdmFsdWUpIDogdGhpcy5ub2RlKCkuX19kYXRhX187CiAgfQoKICBmdW5jdGlvbiBjb250ZXh0TGlzdGVuZXIobGlzdGVuZXIpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgbGlzdGVuZXIuY2FsbCh0aGlzLCBldmVudCwgdGhpcy5fX2RhdGFfXyk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBwYXJzZVR5cGVuYW1lcyh0eXBlbmFtZXMpIHsKICAgIHJldHVybiB0eXBlbmFtZXMudHJpbSgpLnNwbGl0KC9efFxzKy8pLm1hcChmdW5jdGlvbiAodCkgewogICAgICB2YXIgbmFtZSA9ICIiLAogICAgICAgIGkgPSB0LmluZGV4T2YoIi4iKTsKICAgICAgaWYgKGkgPj0gMCkgbmFtZSA9IHQuc2xpY2UoaSArIDEpLCB0ID0gdC5zbGljZSgwLCBpKTsKICAgICAgcmV0dXJuIHsKICAgICAgICB0eXBlOiB0LAogICAgICAgIG5hbWU6IG5hbWUKICAgICAgfTsKICAgIH0pOwogIH0KICBmdW5jdGlvbiBvblJlbW92ZSh0eXBlbmFtZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIG9uID0gdGhpcy5fX29uOwogICAgICBpZiAoIW9uKSByZXR1cm47CiAgICAgIGZvciAodmFyIGogPSAwLCBpID0gLTEsIG0gPSBvbi5sZW5ndGgsIG87IGogPCBtOyArK2opIHsKICAgICAgICBpZiAobyA9IG9uW2pdLCAoIXR5cGVuYW1lLnR5cGUgfHwgby50eXBlID09PSB0eXBlbmFtZS50eXBlKSAmJiBvLm5hbWUgPT09IHR5cGVuYW1lLm5hbWUpIHsKICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihvLnR5cGUsIG8ubGlzdGVuZXIsIG8ub3B0aW9ucyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG9uWysraV0gPSBvOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoKytpKSBvbi5sZW5ndGggPSBpO2Vsc2UgZGVsZXRlIHRoaXMuX19vbjsKICAgIH07CiAgfQogIGZ1bmN0aW9uIG9uQWRkKHR5cGVuYW1lLCB2YWx1ZSwgb3B0aW9ucykgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIG9uID0gdGhpcy5fX29uLAogICAgICAgIG8sCiAgICAgICAgbGlzdGVuZXIgPSBjb250ZXh0TGlzdGVuZXIodmFsdWUpOwogICAgICBpZiAob24pIGZvciAodmFyIGogPSAwLCBtID0gb24ubGVuZ3RoOyBqIDwgbTsgKytqKSB7CiAgICAgICAgaWYgKChvID0gb25bal0pLnR5cGUgPT09IHR5cGVuYW1lLnR5cGUgJiYgby5uYW1lID09PSB0eXBlbmFtZS5uYW1lKSB7CiAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoby50eXBlLCBvLmxpc3RlbmVyLCBvLm9wdGlvbnMpOwogICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKG8udHlwZSwgby5saXN0ZW5lciA9IGxpc3RlbmVyLCBvLm9wdGlvbnMgPSBvcHRpb25zKTsKICAgICAgICAgIG8udmFsdWUgPSB2YWx1ZTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKHR5cGVuYW1lLnR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKTsKICAgICAgbyA9IHsKICAgICAgICB0eXBlOiB0eXBlbmFtZS50eXBlLAogICAgICAgIG5hbWU6IHR5cGVuYW1lLm5hbWUsCiAgICAgICAgdmFsdWU6IHZhbHVlLAogICAgICAgIGxpc3RlbmVyOiBsaXN0ZW5lciwKICAgICAgICBvcHRpb25zOiBvcHRpb25zCiAgICAgIH07CiAgICAgIGlmICghb24pIHRoaXMuX19vbiA9IFtvXTtlbHNlIG9uLnB1c2gobyk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBzZWxlY3Rpb25fb24gKHR5cGVuYW1lLCB2YWx1ZSwgb3B0aW9ucykgewogICAgdmFyIHR5cGVuYW1lcyA9IHBhcnNlVHlwZW5hbWVzKHR5cGVuYW1lICsgIiIpLAogICAgICBpLAogICAgICBuID0gdHlwZW5hbWVzLmxlbmd0aCwKICAgICAgdDsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikgewogICAgICB2YXIgb24gPSB0aGlzLm5vZGUoKS5fX29uOwogICAgICBpZiAob24pIGZvciAodmFyIGogPSAwLCBtID0gb24ubGVuZ3RoLCBvOyBqIDwgbTsgKytqKSB7CiAgICAgICAgZm9yIChpID0gMCwgbyA9IG9uW2pdOyBpIDwgbjsgKytpKSB7CiAgICAgICAgICBpZiAoKHQgPSB0eXBlbmFtZXNbaV0pLnR5cGUgPT09IG8udHlwZSAmJiB0Lm5hbWUgPT09IG8ubmFtZSkgewogICAgICAgICAgICByZXR1cm4gby52YWx1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuOwogICAgfQogICAgb24gPSB2YWx1ZSA/IG9uQWRkIDogb25SZW1vdmU7CiAgICBmb3IgKGkgPSAwOyBpIDwgbjsgKytpKSB0aGlzLmVhY2gob24odHlwZW5hbWVzW2ldLCB2YWx1ZSwgb3B0aW9ucykpOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICBmdW5jdGlvbiBkaXNwYXRjaEV2ZW50KG5vZGUsIHR5cGUsIHBhcmFtcykgewogICAgdmFyIHdpbmRvdyA9IGRlZmF1bHRWaWV3KG5vZGUpLAogICAgICBldmVudCA9IHdpbmRvdy5DdXN0b21FdmVudDsKICAgIGlmICh0eXBlb2YgZXZlbnQgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgZXZlbnQgPSBuZXcgZXZlbnQodHlwZSwgcGFyYW1zKTsKICAgIH0gZWxzZSB7CiAgICAgIGV2ZW50ID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpOwogICAgICBpZiAocGFyYW1zKSBldmVudC5pbml0RXZlbnQodHlwZSwgcGFyYW1zLmJ1YmJsZXMsIHBhcmFtcy5jYW5jZWxhYmxlKSwgZXZlbnQuZGV0YWlsID0gcGFyYW1zLmRldGFpbDtlbHNlIGV2ZW50LmluaXRFdmVudCh0eXBlLCBmYWxzZSwgZmFsc2UpOwogICAgfQogICAgbm9kZS5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKICB9CiAgZnVuY3Rpb24gZGlzcGF0Y2hDb25zdGFudCh0eXBlLCBwYXJhbXMpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBkaXNwYXRjaEV2ZW50KHRoaXMsIHR5cGUsIHBhcmFtcyk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBkaXNwYXRjaEZ1bmN0aW9uKHR5cGUsIHBhcmFtcykgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGRpc3BhdGNoRXZlbnQodGhpcywgdHlwZSwgcGFyYW1zLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gc2VsZWN0aW9uX2Rpc3BhdGNoICh0eXBlLCBwYXJhbXMpIHsKICAgIHJldHVybiB0aGlzLmVhY2goKHR5cGVvZiBwYXJhbXMgPT09ICJmdW5jdGlvbiIgPyBkaXNwYXRjaEZ1bmN0aW9uIDogZGlzcGF0Y2hDb25zdGFudCkodHlwZSwgcGFyYW1zKSk7CiAgfQoKICBmdW5jdGlvbiogc2VsZWN0aW9uX2l0ZXJhdG9yICgpIHsKICAgIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgaiA9IDAsIG0gPSBncm91cHMubGVuZ3RoOyBqIDwgbTsgKytqKSB7CiAgICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBpID0gMCwgbiA9IGdyb3VwLmxlbmd0aCwgbm9kZTsgaSA8IG47ICsraSkgewogICAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHlpZWxkIG5vZGU7CiAgICAgIH0KICAgIH0KICB9CgogIHZhciByb290ID0gW251bGxdOwogIGZ1bmN0aW9uIFNlbGVjdGlvbiQxKGdyb3VwcywgcGFyZW50cykgewogICAgdGhpcy5fZ3JvdXBzID0gZ3JvdXBzOwogICAgdGhpcy5fcGFyZW50cyA9IHBhcmVudHM7CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbigpIHsKICAgIHJldHVybiBuZXcgU2VsZWN0aW9uJDEoW1tkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRdXSwgcm9vdCk7CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbl9zZWxlY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpczsKICB9CiAgU2VsZWN0aW9uJDEucHJvdG90eXBlID0gc2VsZWN0aW9uLnByb3RvdHlwZSA9IHsKICAgIGNvbnN0cnVjdG9yOiBTZWxlY3Rpb24kMSwKICAgIHNlbGVjdDogc2VsZWN0aW9uX3NlbGVjdCwKICAgIHNlbGVjdEFsbDogc2VsZWN0aW9uX3NlbGVjdEFsbCwKICAgIHNlbGVjdENoaWxkOiBzZWxlY3Rpb25fc2VsZWN0Q2hpbGQsCiAgICBzZWxlY3RDaGlsZHJlbjogc2VsZWN0aW9uX3NlbGVjdENoaWxkcmVuLAogICAgZmlsdGVyOiBzZWxlY3Rpb25fZmlsdGVyLAogICAgZGF0YTogc2VsZWN0aW9uX2RhdGEsCiAgICBlbnRlcjogc2VsZWN0aW9uX2VudGVyLAogICAgZXhpdDogc2VsZWN0aW9uX2V4aXQsCiAgICBqb2luOiBzZWxlY3Rpb25fam9pbiwKICAgIG1lcmdlOiBzZWxlY3Rpb25fbWVyZ2UsCiAgICBzZWxlY3Rpb246IHNlbGVjdGlvbl9zZWxlY3Rpb24sCiAgICBvcmRlcjogc2VsZWN0aW9uX29yZGVyLAogICAgc29ydDogc2VsZWN0aW9uX3NvcnQsCiAgICBjYWxsOiBzZWxlY3Rpb25fY2FsbCwKICAgIG5vZGVzOiBzZWxlY3Rpb25fbm9kZXMsCiAgICBub2RlOiBzZWxlY3Rpb25fbm9kZSwKICAgIHNpemU6IHNlbGVjdGlvbl9zaXplLAogICAgZW1wdHk6IHNlbGVjdGlvbl9lbXB0eSwKICAgIGVhY2g6IHNlbGVjdGlvbl9lYWNoLAogICAgYXR0cjogc2VsZWN0aW9uX2F0dHIsCiAgICBzdHlsZTogc2VsZWN0aW9uX3N0eWxlLAogICAgcHJvcGVydHk6IHNlbGVjdGlvbl9wcm9wZXJ0eSwKICAgIGNsYXNzZWQ6IHNlbGVjdGlvbl9jbGFzc2VkLAogICAgdGV4dDogc2VsZWN0aW9uX3RleHQsCiAgICBodG1sOiBzZWxlY3Rpb25faHRtbCwKICAgIHJhaXNlOiBzZWxlY3Rpb25fcmFpc2UsCiAgICBsb3dlcjogc2VsZWN0aW9uX2xvd2VyLAogICAgYXBwZW5kOiBzZWxlY3Rpb25fYXBwZW5kLAogICAgaW5zZXJ0OiBzZWxlY3Rpb25faW5zZXJ0LAogICAgcmVtb3ZlOiBzZWxlY3Rpb25fcmVtb3ZlLAogICAgY2xvbmU6IHNlbGVjdGlvbl9jbG9uZSwKICAgIGRhdHVtOiBzZWxlY3Rpb25fZGF0dW0sCiAgICBvbjogc2VsZWN0aW9uX29uLAogICAgZGlzcGF0Y2g6IHNlbGVjdGlvbl9kaXNwYXRjaCwKICAgIFtTeW1ib2wuaXRlcmF0b3JdOiBzZWxlY3Rpb25faXRlcmF0b3IKICB9OwoKICBmdW5jdGlvbiBkZWZpbmUgKGNvbnN0cnVjdG9yLCBmYWN0b3J5LCBwcm90b3R5cGUpIHsKICAgIGNvbnN0cnVjdG9yLnByb3RvdHlwZSA9IGZhY3RvcnkucHJvdG90eXBlID0gcHJvdG90eXBlOwogICAgcHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY29uc3RydWN0b3I7CiAgfQogIGZ1bmN0aW9uIGV4dGVuZChwYXJlbnQsIGRlZmluaXRpb24pIHsKICAgIHZhciBwcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHBhcmVudC5wcm90b3R5cGUpOwogICAgZm9yICh2YXIga2V5IGluIGRlZmluaXRpb24pIHByb3RvdHlwZVtrZXldID0gZGVmaW5pdGlvbltrZXldOwogICAgcmV0dXJuIHByb3RvdHlwZTsKICB9CgogIGZ1bmN0aW9uIENvbG9yKCkge30KICB2YXIgZGFya2VyID0gMC43OwogIHZhciBicmlnaHRlciA9IDEgLyBkYXJrZXI7CiAgdmFyIHJlSSA9ICJcXHMqKFsrLV0/XFxkKylcXHMqIiwKICAgIHJlTiA9ICJcXHMqKFsrLV0/KD86XFxkKlxcLik/XFxkKyg/OltlRV1bKy1dP1xcZCspPylcXHMqIiwKICAgIHJlUCA9ICJcXHMqKFsrLV0/KD86XFxkKlxcLik/XFxkKyg/OltlRV1bKy1dP1xcZCspPyklXFxzKiIsCiAgICByZUhleCA9IC9eIyhbMC05YS1mXXszLDh9KSQvLAogICAgcmVSZ2JJbnRlZ2VyID0gbmV3IFJlZ0V4cChgXnJnYlxcKCR7cmVJfSwke3JlSX0sJHtyZUl9XFwpJGApLAogICAgcmVSZ2JQZXJjZW50ID0gbmV3IFJlZ0V4cChgXnJnYlxcKCR7cmVQfSwke3JlUH0sJHtyZVB9XFwpJGApLAogICAgcmVSZ2JhSW50ZWdlciA9IG5ldyBSZWdFeHAoYF5yZ2JhXFwoJHtyZUl9LCR7cmVJfSwke3JlSX0sJHtyZU59XFwpJGApLAogICAgcmVSZ2JhUGVyY2VudCA9IG5ldyBSZWdFeHAoYF5yZ2JhXFwoJHtyZVB9LCR7cmVQfSwke3JlUH0sJHtyZU59XFwpJGApLAogICAgcmVIc2xQZXJjZW50ID0gbmV3IFJlZ0V4cChgXmhzbFxcKCR7cmVOfSwke3JlUH0sJHtyZVB9XFwpJGApLAogICAgcmVIc2xhUGVyY2VudCA9IG5ldyBSZWdFeHAoYF5oc2xhXFwoJHtyZU59LCR7cmVQfSwke3JlUH0sJHtyZU59XFwpJGApOwogIHZhciBuYW1lZCA9IHsKICAgIGFsaWNlYmx1ZTogMHhmMGY4ZmYsCiAgICBhbnRpcXVld2hpdGU6IDB4ZmFlYmQ3LAogICAgYXF1YTogMHgwMGZmZmYsCiAgICBhcXVhbWFyaW5lOiAweDdmZmZkNCwKICAgIGF6dXJlOiAweGYwZmZmZiwKICAgIGJlaWdlOiAweGY1ZjVkYywKICAgIGJpc3F1ZTogMHhmZmU0YzQsCiAgICBibGFjazogMHgwMDAwMDAsCiAgICBibGFuY2hlZGFsbW9uZDogMHhmZmViY2QsCiAgICBibHVlOiAweDAwMDBmZiwKICAgIGJsdWV2aW9sZXQ6IDB4OGEyYmUyLAogICAgYnJvd246IDB4YTUyYTJhLAogICAgYnVybHl3b29kOiAweGRlYjg4NywKICAgIGNhZGV0Ymx1ZTogMHg1ZjllYTAsCiAgICBjaGFydHJldXNlOiAweDdmZmYwMCwKICAgIGNob2NvbGF0ZTogMHhkMjY5MWUsCiAgICBjb3JhbDogMHhmZjdmNTAsCiAgICBjb3JuZmxvd2VyYmx1ZTogMHg2NDk1ZWQsCiAgICBjb3Juc2lsazogMHhmZmY4ZGMsCiAgICBjcmltc29uOiAweGRjMTQzYywKICAgIGN5YW46IDB4MDBmZmZmLAogICAgZGFya2JsdWU6IDB4MDAwMDhiLAogICAgZGFya2N5YW46IDB4MDA4YjhiLAogICAgZGFya2dvbGRlbnJvZDogMHhiODg2MGIsCiAgICBkYXJrZ3JheTogMHhhOWE5YTksCiAgICBkYXJrZ3JlZW46IDB4MDA2NDAwLAogICAgZGFya2dyZXk6IDB4YTlhOWE5LAogICAgZGFya2toYWtpOiAweGJkYjc2YiwKICAgIGRhcmttYWdlbnRhOiAweDhiMDA4YiwKICAgIGRhcmtvbGl2ZWdyZWVuOiAweDU1NmIyZiwKICAgIGRhcmtvcmFuZ2U6IDB4ZmY4YzAwLAogICAgZGFya29yY2hpZDogMHg5OTMyY2MsCiAgICBkYXJrcmVkOiAweDhiMDAwMCwKICAgIGRhcmtzYWxtb246IDB4ZTk5NjdhLAogICAgZGFya3NlYWdyZWVuOiAweDhmYmM4ZiwKICAgIGRhcmtzbGF0ZWJsdWU6IDB4NDgzZDhiLAogICAgZGFya3NsYXRlZ3JheTogMHgyZjRmNGYsCiAgICBkYXJrc2xhdGVncmV5OiAweDJmNGY0ZiwKICAgIGRhcmt0dXJxdW9pc2U6IDB4MDBjZWQxLAogICAgZGFya3Zpb2xldDogMHg5NDAwZDMsCiAgICBkZWVwcGluazogMHhmZjE0OTMsCiAgICBkZWVwc2t5Ymx1ZTogMHgwMGJmZmYsCiAgICBkaW1ncmF5OiAweDY5Njk2OSwKICAgIGRpbWdyZXk6IDB4Njk2OTY5LAogICAgZG9kZ2VyYmx1ZTogMHgxZTkwZmYsCiAgICBmaXJlYnJpY2s6IDB4YjIyMjIyLAogICAgZmxvcmFsd2hpdGU6IDB4ZmZmYWYwLAogICAgZm9yZXN0Z3JlZW46IDB4MjI4YjIyLAogICAgZnVjaHNpYTogMHhmZjAwZmYsCiAgICBnYWluc2Jvcm86IDB4ZGNkY2RjLAogICAgZ2hvc3R3aGl0ZTogMHhmOGY4ZmYsCiAgICBnb2xkOiAweGZmZDcwMCwKICAgIGdvbGRlbnJvZDogMHhkYWE1MjAsCiAgICBncmF5OiAweDgwODA4MCwKICAgIGdyZWVuOiAweDAwODAwMCwKICAgIGdyZWVueWVsbG93OiAweGFkZmYyZiwKICAgIGdyZXk6IDB4ODA4MDgwLAogICAgaG9uZXlkZXc6IDB4ZjBmZmYwLAogICAgaG90cGluazogMHhmZjY5YjQsCiAgICBpbmRpYW5yZWQ6IDB4Y2Q1YzVjLAogICAgaW5kaWdvOiAweDRiMDA4MiwKICAgIGl2b3J5OiAweGZmZmZmMCwKICAgIGtoYWtpOiAweGYwZTY4YywKICAgIGxhdmVuZGVyOiAweGU2ZTZmYSwKICAgIGxhdmVuZGVyYmx1c2g6IDB4ZmZmMGY1LAogICAgbGF3bmdyZWVuOiAweDdjZmMwMCwKICAgIGxlbW9uY2hpZmZvbjogMHhmZmZhY2QsCiAgICBsaWdodGJsdWU6IDB4YWRkOGU2LAogICAgbGlnaHRjb3JhbDogMHhmMDgwODAsCiAgICBsaWdodGN5YW46IDB4ZTBmZmZmLAogICAgbGlnaHRnb2xkZW5yb2R5ZWxsb3c6IDB4ZmFmYWQyLAogICAgbGlnaHRncmF5OiAweGQzZDNkMywKICAgIGxpZ2h0Z3JlZW46IDB4OTBlZTkwLAogICAgbGlnaHRncmV5OiAweGQzZDNkMywKICAgIGxpZ2h0cGluazogMHhmZmI2YzEsCiAgICBsaWdodHNhbG1vbjogMHhmZmEwN2EsCiAgICBsaWdodHNlYWdyZWVuOiAweDIwYjJhYSwKICAgIGxpZ2h0c2t5Ymx1ZTogMHg4N2NlZmEsCiAgICBsaWdodHNsYXRlZ3JheTogMHg3Nzg4OTksCiAgICBsaWdodHNsYXRlZ3JleTogMHg3Nzg4OTksCiAgICBsaWdodHN0ZWVsYmx1ZTogMHhiMGM0ZGUsCiAgICBsaWdodHllbGxvdzogMHhmZmZmZTAsCiAgICBsaW1lOiAweDAwZmYwMCwKICAgIGxpbWVncmVlbjogMHgzMmNkMzIsCiAgICBsaW5lbjogMHhmYWYwZTYsCiAgICBtYWdlbnRhOiAweGZmMDBmZiwKICAgIG1hcm9vbjogMHg4MDAwMDAsCiAgICBtZWRpdW1hcXVhbWFyaW5lOiAweDY2Y2RhYSwKICAgIG1lZGl1bWJsdWU6IDB4MDAwMGNkLAogICAgbWVkaXVtb3JjaGlkOiAweGJhNTVkMywKICAgIG1lZGl1bXB1cnBsZTogMHg5MzcwZGIsCiAgICBtZWRpdW1zZWFncmVlbjogMHgzY2IzNzEsCiAgICBtZWRpdW1zbGF0ZWJsdWU6IDB4N2I2OGVlLAogICAgbWVkaXVtc3ByaW5nZ3JlZW46IDB4MDBmYTlhLAogICAgbWVkaXVtdHVycXVvaXNlOiAweDQ4ZDFjYywKICAgIG1lZGl1bXZpb2xldHJlZDogMHhjNzE1ODUsCiAgICBtaWRuaWdodGJsdWU6IDB4MTkxOTcwLAogICAgbWludGNyZWFtOiAweGY1ZmZmYSwKICAgIG1pc3R5cm9zZTogMHhmZmU0ZTEsCiAgICBtb2NjYXNpbjogMHhmZmU0YjUsCiAgICBuYXZham93aGl0ZTogMHhmZmRlYWQsCiAgICBuYXZ5OiAweDAwMDA4MCwKICAgIG9sZGxhY2U6IDB4ZmRmNWU2LAogICAgb2xpdmU6IDB4ODA4MDAwLAogICAgb2xpdmVkcmFiOiAweDZiOGUyMywKICAgIG9yYW5nZTogMHhmZmE1MDAsCiAgICBvcmFuZ2VyZWQ6IDB4ZmY0NTAwLAogICAgb3JjaGlkOiAweGRhNzBkNiwKICAgIHBhbGVnb2xkZW5yb2Q6IDB4ZWVlOGFhLAogICAgcGFsZWdyZWVuOiAweDk4ZmI5OCwKICAgIHBhbGV0dXJxdW9pc2U6IDB4YWZlZWVlLAogICAgcGFsZXZpb2xldHJlZDogMHhkYjcwOTMsCiAgICBwYXBheWF3aGlwOiAweGZmZWZkNSwKICAgIHBlYWNocHVmZjogMHhmZmRhYjksCiAgICBwZXJ1OiAweGNkODUzZiwKICAgIHBpbms6IDB4ZmZjMGNiLAogICAgcGx1bTogMHhkZGEwZGQsCiAgICBwb3dkZXJibHVlOiAweGIwZTBlNiwKICAgIHB1cnBsZTogMHg4MDAwODAsCiAgICByZWJlY2NhcHVycGxlOiAweDY2MzM5OSwKICAgIHJlZDogMHhmZjAwMDAsCiAgICByb3N5YnJvd246IDB4YmM4ZjhmLAogICAgcm95YWxibHVlOiAweDQxNjllMSwKICAgIHNhZGRsZWJyb3duOiAweDhiNDUxMywKICAgIHNhbG1vbjogMHhmYTgwNzIsCiAgICBzYW5keWJyb3duOiAweGY0YTQ2MCwKICAgIHNlYWdyZWVuOiAweDJlOGI1NywKICAgIHNlYXNoZWxsOiAweGZmZjVlZSwKICAgIHNpZW5uYTogMHhhMDUyMmQsCiAgICBzaWx2ZXI6IDB4YzBjMGMwLAogICAgc2t5Ymx1ZTogMHg4N2NlZWIsCiAgICBzbGF0ZWJsdWU6IDB4NmE1YWNkLAogICAgc2xhdGVncmF5OiAweDcwODA5MCwKICAgIHNsYXRlZ3JleTogMHg3MDgwOTAsCiAgICBzbm93OiAweGZmZmFmYSwKICAgIHNwcmluZ2dyZWVuOiAweDAwZmY3ZiwKICAgIHN0ZWVsYmx1ZTogMHg0NjgyYjQsCiAgICB0YW46IDB4ZDJiNDhjLAogICAgdGVhbDogMHgwMDgwODAsCiAgICB0aGlzdGxlOiAweGQ4YmZkOCwKICAgIHRvbWF0bzogMHhmZjYzNDcsCiAgICB0dXJxdW9pc2U6IDB4NDBlMGQwLAogICAgdmlvbGV0OiAweGVlODJlZSwKICAgIHdoZWF0OiAweGY1ZGViMywKICAgIHdoaXRlOiAweGZmZmZmZiwKICAgIHdoaXRlc21va2U6IDB4ZjVmNWY1LAogICAgeWVsbG93OiAweGZmZmYwMCwKICAgIHllbGxvd2dyZWVuOiAweDlhY2QzMgogIH07CiAgZGVmaW5lKENvbG9yLCBjb2xvciwgewogICAgY29weShjaGFubmVscykgewogICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihuZXcgdGhpcy5jb25zdHJ1Y3RvcigpLCB0aGlzLCBjaGFubmVscyk7CiAgICB9LAogICAgZGlzcGxheWFibGUoKSB7CiAgICAgIHJldHVybiB0aGlzLnJnYigpLmRpc3BsYXlhYmxlKCk7CiAgICB9LAogICAgaGV4OiBjb2xvcl9mb3JtYXRIZXgsCiAgICAvLyBEZXByZWNhdGVkISBVc2UgY29sb3IuZm9ybWF0SGV4LgogICAgZm9ybWF0SGV4OiBjb2xvcl9mb3JtYXRIZXgsCiAgICBmb3JtYXRIZXg4OiBjb2xvcl9mb3JtYXRIZXg4LAogICAgZm9ybWF0SHNsOiBjb2xvcl9mb3JtYXRIc2wsCiAgICBmb3JtYXRSZ2I6IGNvbG9yX2Zvcm1hdFJnYiwKICAgIHRvU3RyaW5nOiBjb2xvcl9mb3JtYXRSZ2IKICB9KTsKICBmdW5jdGlvbiBjb2xvcl9mb3JtYXRIZXgoKSB7CiAgICByZXR1cm4gdGhpcy5yZ2IoKS5mb3JtYXRIZXgoKTsKICB9CiAgZnVuY3Rpb24gY29sb3JfZm9ybWF0SGV4OCgpIHsKICAgIHJldHVybiB0aGlzLnJnYigpLmZvcm1hdEhleDgoKTsKICB9CiAgZnVuY3Rpb24gY29sb3JfZm9ybWF0SHNsKCkgewogICAgcmV0dXJuIGhzbENvbnZlcnQodGhpcykuZm9ybWF0SHNsKCk7CiAgfQogIGZ1bmN0aW9uIGNvbG9yX2Zvcm1hdFJnYigpIHsKICAgIHJldHVybiB0aGlzLnJnYigpLmZvcm1hdFJnYigpOwogIH0KICBmdW5jdGlvbiBjb2xvcihmb3JtYXQpIHsKICAgIHZhciBtLCBsOwogICAgZm9ybWF0ID0gKGZvcm1hdCArICIiKS50cmltKCkudG9Mb3dlckNhc2UoKTsKICAgIHJldHVybiAobSA9IHJlSGV4LmV4ZWMoZm9ybWF0KSkgPyAobCA9IG1bMV0ubGVuZ3RoLCBtID0gcGFyc2VJbnQobVsxXSwgMTYpLCBsID09PSA2ID8gcmdibihtKSAvLyAjZmYwMDAwCiAgICA6IGwgPT09IDMgPyBuZXcgUmdiKG0gPj4gOCAmIDB4ZiB8IG0gPj4gNCAmIDB4ZjAsIG0gPj4gNCAmIDB4ZiB8IG0gJiAweGYwLCAobSAmIDB4ZikgPDwgNCB8IG0gJiAweGYsIDEpIC8vICNmMDAKICAgIDogbCA9PT0gOCA/IHJnYmEobSA+PiAyNCAmIDB4ZmYsIG0gPj4gMTYgJiAweGZmLCBtID4+IDggJiAweGZmLCAobSAmIDB4ZmYpIC8gMHhmZikgLy8gI2ZmMDAwMDAwCiAgICA6IGwgPT09IDQgPyByZ2JhKG0gPj4gMTIgJiAweGYgfCBtID4+IDggJiAweGYwLCBtID4+IDggJiAweGYgfCBtID4+IDQgJiAweGYwLCBtID4+IDQgJiAweGYgfCBtICYgMHhmMCwgKChtICYgMHhmKSA8PCA0IHwgbSAmIDB4ZikgLyAweGZmKSAvLyAjZjAwMAogICAgOiBudWxsIC8vIGludmFsaWQgaGV4CiAgICApIDogKG0gPSByZVJnYkludGVnZXIuZXhlYyhmb3JtYXQpKSA/IG5ldyBSZ2IobVsxXSwgbVsyXSwgbVszXSwgMSkgLy8gcmdiKDI1NSwgMCwgMCkKICAgIDogKG0gPSByZVJnYlBlcmNlbnQuZXhlYyhmb3JtYXQpKSA/IG5ldyBSZ2IobVsxXSAqIDI1NSAvIDEwMCwgbVsyXSAqIDI1NSAvIDEwMCwgbVszXSAqIDI1NSAvIDEwMCwgMSkgLy8gcmdiKDEwMCUsIDAlLCAwJSkKICAgIDogKG0gPSByZVJnYmFJbnRlZ2VyLmV4ZWMoZm9ybWF0KSkgPyByZ2JhKG1bMV0sIG1bMl0sIG1bM10sIG1bNF0pIC8vIHJnYmEoMjU1LCAwLCAwLCAxKQogICAgOiAobSA9IHJlUmdiYVBlcmNlbnQuZXhlYyhmb3JtYXQpKSA/IHJnYmEobVsxXSAqIDI1NSAvIDEwMCwgbVsyXSAqIDI1NSAvIDEwMCwgbVszXSAqIDI1NSAvIDEwMCwgbVs0XSkgLy8gcmdiKDEwMCUsIDAlLCAwJSwgMSkKICAgIDogKG0gPSByZUhzbFBlcmNlbnQuZXhlYyhmb3JtYXQpKSA/IGhzbGEobVsxXSwgbVsyXSAvIDEwMCwgbVszXSAvIDEwMCwgMSkgLy8gaHNsKDEyMCwgNTAlLCA1MCUpCiAgICA6IChtID0gcmVIc2xhUGVyY2VudC5leGVjKGZvcm1hdCkpID8gaHNsYShtWzFdLCBtWzJdIC8gMTAwLCBtWzNdIC8gMTAwLCBtWzRdKSAvLyBoc2xhKDEyMCwgNTAlLCA1MCUsIDEpCiAgICA6IG5hbWVkLmhhc093blByb3BlcnR5KGZvcm1hdCkgPyByZ2JuKG5hbWVkW2Zvcm1hdF0pIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zCiAgICA6IGZvcm1hdCA9PT0gInRyYW5zcGFyZW50IiA/IG5ldyBSZ2IoTmFOLCBOYU4sIE5hTiwgMCkgOiBudWxsOwogIH0KICBmdW5jdGlvbiByZ2JuKG4pIHsKICAgIHJldHVybiBuZXcgUmdiKG4gPj4gMTYgJiAweGZmLCBuID4+IDggJiAweGZmLCBuICYgMHhmZiwgMSk7CiAgfQogIGZ1bmN0aW9uIHJnYmEociwgZywgYiwgYSkgewogICAgaWYgKGEgPD0gMCkgciA9IGcgPSBiID0gTmFOOwogICAgcmV0dXJuIG5ldyBSZ2IociwgZywgYiwgYSk7CiAgfQogIGZ1bmN0aW9uIHJnYkNvbnZlcnQobykgewogICAgaWYgKCEobyBpbnN0YW5jZW9mIENvbG9yKSkgbyA9IGNvbG9yKG8pOwogICAgaWYgKCFvKSByZXR1cm4gbmV3IFJnYigpOwogICAgbyA9IG8ucmdiKCk7CiAgICByZXR1cm4gbmV3IFJnYihvLnIsIG8uZywgby5iLCBvLm9wYWNpdHkpOwogIH0KICBmdW5jdGlvbiByZ2IociwgZywgYiwgb3BhY2l0eSkgewogICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyByZ2JDb252ZXJ0KHIpIDogbmV3IFJnYihyLCBnLCBiLCBvcGFjaXR5ID09IG51bGwgPyAxIDogb3BhY2l0eSk7CiAgfQogIGZ1bmN0aW9uIFJnYihyLCBnLCBiLCBvcGFjaXR5KSB7CiAgICB0aGlzLnIgPSArcjsKICAgIHRoaXMuZyA9ICtnOwogICAgdGhpcy5iID0gK2I7CiAgICB0aGlzLm9wYWNpdHkgPSArb3BhY2l0eTsKICB9CiAgZGVmaW5lKFJnYiwgcmdiLCBleHRlbmQoQ29sb3IsIHsKICAgIGJyaWdodGVyKGspIHsKICAgICAgayA9IGsgPT0gbnVsbCA/IGJyaWdodGVyIDogTWF0aC5wb3coYnJpZ2h0ZXIsIGspOwogICAgICByZXR1cm4gbmV3IFJnYih0aGlzLnIgKiBrLCB0aGlzLmcgKiBrLCB0aGlzLmIgKiBrLCB0aGlzLm9wYWNpdHkpOwogICAgfSwKICAgIGRhcmtlcihrKSB7CiAgICAgIGsgPSBrID09IG51bGwgPyBkYXJrZXIgOiBNYXRoLnBvdyhkYXJrZXIsIGspOwogICAgICByZXR1cm4gbmV3IFJnYih0aGlzLnIgKiBrLCB0aGlzLmcgKiBrLCB0aGlzLmIgKiBrLCB0aGlzLm9wYWNpdHkpOwogICAgfSwKICAgIHJnYigpIHsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9LAogICAgY2xhbXAoKSB7CiAgICAgIHJldHVybiBuZXcgUmdiKGNsYW1waSh0aGlzLnIpLCBjbGFtcGkodGhpcy5nKSwgY2xhbXBpKHRoaXMuYiksIGNsYW1wYSh0aGlzLm9wYWNpdHkpKTsKICAgIH0sCiAgICBkaXNwbGF5YWJsZSgpIHsKICAgICAgcmV0dXJuIC0wLjUgPD0gdGhpcy5yICYmIHRoaXMuciA8IDI1NS41ICYmIC0wLjUgPD0gdGhpcy5nICYmIHRoaXMuZyA8IDI1NS41ICYmIC0wLjUgPD0gdGhpcy5iICYmIHRoaXMuYiA8IDI1NS41ICYmIDAgPD0gdGhpcy5vcGFjaXR5ICYmIHRoaXMub3BhY2l0eSA8PSAxOwogICAgfSwKICAgIGhleDogcmdiX2Zvcm1hdEhleCwKICAgIC8vIERlcHJlY2F0ZWQhIFVzZSBjb2xvci5mb3JtYXRIZXguCiAgICBmb3JtYXRIZXg6IHJnYl9mb3JtYXRIZXgsCiAgICBmb3JtYXRIZXg4OiByZ2JfZm9ybWF0SGV4OCwKICAgIGZvcm1hdFJnYjogcmdiX2Zvcm1hdFJnYiwKICAgIHRvU3RyaW5nOiByZ2JfZm9ybWF0UmdiCiAgfSkpOwogIGZ1bmN0aW9uIHJnYl9mb3JtYXRIZXgoKSB7CiAgICByZXR1cm4gYCMke2hleCh0aGlzLnIpfSR7aGV4KHRoaXMuZyl9JHtoZXgodGhpcy5iKX1gOwogIH0KICBmdW5jdGlvbiByZ2JfZm9ybWF0SGV4OCgpIHsKICAgIHJldHVybiBgIyR7aGV4KHRoaXMucil9JHtoZXgodGhpcy5nKX0ke2hleCh0aGlzLmIpfSR7aGV4KChpc05hTih0aGlzLm9wYWNpdHkpID8gMSA6IHRoaXMub3BhY2l0eSkgKiAyNTUpfWA7CiAgfQogIGZ1bmN0aW9uIHJnYl9mb3JtYXRSZ2IoKSB7CiAgICBjb25zdCBhID0gY2xhbXBhKHRoaXMub3BhY2l0eSk7CiAgICByZXR1cm4gYCR7YSA9PT0gMSA/ICJyZ2IoIiA6ICJyZ2JhKCJ9JHtjbGFtcGkodGhpcy5yKX0sICR7Y2xhbXBpKHRoaXMuZyl9LCAke2NsYW1waSh0aGlzLmIpfSR7YSA9PT0gMSA/ICIpIiA6IGAsICR7YX0pYH1gOwogIH0KICBmdW5jdGlvbiBjbGFtcGEob3BhY2l0eSkgewogICAgcmV0dXJuIGlzTmFOKG9wYWNpdHkpID8gMSA6IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIG9wYWNpdHkpKTsKICB9CiAgZnVuY3Rpb24gY2xhbXBpKHZhbHVlKSB7CiAgICByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5taW4oMjU1LCBNYXRoLnJvdW5kKHZhbHVlKSB8fCAwKSk7CiAgfQogIGZ1bmN0aW9uIGhleCh2YWx1ZSkgewogICAgdmFsdWUgPSBjbGFtcGkodmFsdWUpOwogICAgcmV0dXJuICh2YWx1ZSA8IDE2ID8gIjAiIDogIiIpICsgdmFsdWUudG9TdHJpbmcoMTYpOwogIH0KICBmdW5jdGlvbiBoc2xhKGgsIHMsIGwsIGEpIHsKICAgIGlmIChhIDw9IDApIGggPSBzID0gbCA9IE5hTjtlbHNlIGlmIChsIDw9IDAgfHwgbCA+PSAxKSBoID0gcyA9IE5hTjtlbHNlIGlmIChzIDw9IDApIGggPSBOYU47CiAgICByZXR1cm4gbmV3IEhzbChoLCBzLCBsLCBhKTsKICB9CiAgZnVuY3Rpb24gaHNsQ29udmVydChvKSB7CiAgICBpZiAobyBpbnN0YW5jZW9mIEhzbCkgcmV0dXJuIG5ldyBIc2woby5oLCBvLnMsIG8ubCwgby5vcGFjaXR5KTsKICAgIGlmICghKG8gaW5zdGFuY2VvZiBDb2xvcikpIG8gPSBjb2xvcihvKTsKICAgIGlmICghbykgcmV0dXJuIG5ldyBIc2woKTsKICAgIGlmIChvIGluc3RhbmNlb2YgSHNsKSByZXR1cm4gbzsKICAgIG8gPSBvLnJnYigpOwogICAgdmFyIHIgPSBvLnIgLyAyNTUsCiAgICAgIGcgPSBvLmcgLyAyNTUsCiAgICAgIGIgPSBvLmIgLyAyNTUsCiAgICAgIG1pbiA9IE1hdGgubWluKHIsIGcsIGIpLAogICAgICBtYXggPSBNYXRoLm1heChyLCBnLCBiKSwKICAgICAgaCA9IE5hTiwKICAgICAgcyA9IG1heCAtIG1pbiwKICAgICAgbCA9IChtYXggKyBtaW4pIC8gMjsKICAgIGlmIChzKSB7CiAgICAgIGlmIChyID09PSBtYXgpIGggPSAoZyAtIGIpIC8gcyArIChnIDwgYikgKiA2O2Vsc2UgaWYgKGcgPT09IG1heCkgaCA9IChiIC0gcikgLyBzICsgMjtlbHNlIGggPSAociAtIGcpIC8gcyArIDQ7CiAgICAgIHMgLz0gbCA8IDAuNSA/IG1heCArIG1pbiA6IDIgLSBtYXggLSBtaW47CiAgICAgIGggKj0gNjA7CiAgICB9IGVsc2UgewogICAgICBzID0gbCA+IDAgJiYgbCA8IDEgPyAwIDogaDsKICAgIH0KICAgIHJldHVybiBuZXcgSHNsKGgsIHMsIGwsIG8ub3BhY2l0eSk7CiAgfQogIGZ1bmN0aW9uIGhzbChoLCBzLCBsLCBvcGFjaXR5KSB7CiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/IGhzbENvbnZlcnQoaCkgOiBuZXcgSHNsKGgsIHMsIGwsIG9wYWNpdHkgPT0gbnVsbCA/IDEgOiBvcGFjaXR5KTsKICB9CiAgZnVuY3Rpb24gSHNsKGgsIHMsIGwsIG9wYWNpdHkpIHsKICAgIHRoaXMuaCA9ICtoOwogICAgdGhpcy5zID0gK3M7CiAgICB0aGlzLmwgPSArbDsKICAgIHRoaXMub3BhY2l0eSA9ICtvcGFjaXR5OwogIH0KICBkZWZpbmUoSHNsLCBoc2wsIGV4dGVuZChDb2xvciwgewogICAgYnJpZ2h0ZXIoaykgewogICAgICBrID0gayA9PSBudWxsID8gYnJpZ2h0ZXIgOiBNYXRoLnBvdyhicmlnaHRlciwgayk7CiAgICAgIHJldHVybiBuZXcgSHNsKHRoaXMuaCwgdGhpcy5zLCB0aGlzLmwgKiBrLCB0aGlzLm9wYWNpdHkpOwogICAgfSwKICAgIGRhcmtlcihrKSB7CiAgICAgIGsgPSBrID09IG51bGwgPyBkYXJrZXIgOiBNYXRoLnBvdyhkYXJrZXIsIGspOwogICAgICByZXR1cm4gbmV3IEhzbCh0aGlzLmgsIHRoaXMucywgdGhpcy5sICogaywgdGhpcy5vcGFjaXR5KTsKICAgIH0sCiAgICByZ2IoKSB7CiAgICAgIHZhciBoID0gdGhpcy5oICUgMzYwICsgKHRoaXMuaCA8IDApICogMzYwLAogICAgICAgIHMgPSBpc05hTihoKSB8fCBpc05hTih0aGlzLnMpID8gMCA6IHRoaXMucywKICAgICAgICBsID0gdGhpcy5sLAogICAgICAgIG0yID0gbCArIChsIDwgMC41ID8gbCA6IDEgLSBsKSAqIHMsCiAgICAgICAgbTEgPSAyICogbCAtIG0yOwogICAgICByZXR1cm4gbmV3IFJnYihoc2wycmdiKGggPj0gMjQwID8gaCAtIDI0MCA6IGggKyAxMjAsIG0xLCBtMiksIGhzbDJyZ2IoaCwgbTEsIG0yKSwgaHNsMnJnYihoIDwgMTIwID8gaCArIDI0MCA6IGggLSAxMjAsIG0xLCBtMiksIHRoaXMub3BhY2l0eSk7CiAgICB9LAogICAgY2xhbXAoKSB7CiAgICAgIHJldHVybiBuZXcgSHNsKGNsYW1waCh0aGlzLmgpLCBjbGFtcHQodGhpcy5zKSwgY2xhbXB0KHRoaXMubCksIGNsYW1wYSh0aGlzLm9wYWNpdHkpKTsKICAgIH0sCiAgICBkaXNwbGF5YWJsZSgpIHsKICAgICAgcmV0dXJuICgwIDw9IHRoaXMucyAmJiB0aGlzLnMgPD0gMSB8fCBpc05hTih0aGlzLnMpKSAmJiAwIDw9IHRoaXMubCAmJiB0aGlzLmwgPD0gMSAmJiAwIDw9IHRoaXMub3BhY2l0eSAmJiB0aGlzLm9wYWNpdHkgPD0gMTsKICAgIH0sCiAgICBmb3JtYXRIc2woKSB7CiAgICAgIGNvbnN0IGEgPSBjbGFtcGEodGhpcy5vcGFjaXR5KTsKICAgICAgcmV0dXJuIGAke2EgPT09IDEgPyAiaHNsKCIgOiAiaHNsYSgifSR7Y2xhbXBoKHRoaXMuaCl9LCAke2NsYW1wdCh0aGlzLnMpICogMTAwfSUsICR7Y2xhbXB0KHRoaXMubCkgKiAxMDB9JSR7YSA9PT0gMSA/ICIpIiA6IGAsICR7YX0pYH1gOwogICAgfQogIH0pKTsKICBmdW5jdGlvbiBjbGFtcGgodmFsdWUpIHsKICAgIHZhbHVlID0gKHZhbHVlIHx8IDApICUgMzYwOwogICAgcmV0dXJuIHZhbHVlIDwgMCA/IHZhbHVlICsgMzYwIDogdmFsdWU7CiAgfQogIGZ1bmN0aW9uIGNsYW1wdCh2YWx1ZSkgewogICAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKDEsIHZhbHVlIHx8IDApKTsKICB9CgogIC8qIEZyb20gRnZEIDEzLjM3LCBDU1MgQ29sb3IgTW9kdWxlIExldmVsIDMgKi8KICBmdW5jdGlvbiBoc2wycmdiKGgsIG0xLCBtMikgewogICAgcmV0dXJuIChoIDwgNjAgPyBtMSArIChtMiAtIG0xKSAqIGggLyA2MCA6IGggPCAxODAgPyBtMiA6IGggPCAyNDAgPyBtMSArIChtMiAtIG0xKSAqICgyNDAgLSBoKSAvIDYwIDogbTEpICogMjU1OwogIH0KCiAgdmFyIGNvbnN0YW50ID0geCA9PiAoKSA9PiB4OwoKICBmdW5jdGlvbiBsaW5lYXIoYSwgZCkgewogICAgcmV0dXJuIGZ1bmN0aW9uICh0KSB7CiAgICAgIHJldHVybiBhICsgdCAqIGQ7CiAgICB9OwogIH0KICBmdW5jdGlvbiBleHBvbmVudGlhbChhLCBiLCB5KSB7CiAgICByZXR1cm4gYSA9IE1hdGgucG93KGEsIHkpLCBiID0gTWF0aC5wb3coYiwgeSkgLSBhLCB5ID0gMSAvIHksIGZ1bmN0aW9uICh0KSB7CiAgICAgIHJldHVybiBNYXRoLnBvdyhhICsgdCAqIGIsIHkpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gZ2FtbWEoeSkgewogICAgcmV0dXJuICh5ID0gK3kpID09PSAxID8gbm9nYW1tYSA6IGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgIHJldHVybiBiIC0gYSA/IGV4cG9uZW50aWFsKGEsIGIsIHkpIDogY29uc3RhbnQoaXNOYU4oYSkgPyBiIDogYSk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBub2dhbW1hKGEsIGIpIHsKICAgIHZhciBkID0gYiAtIGE7CiAgICByZXR1cm4gZCA/IGxpbmVhcihhLCBkKSA6IGNvbnN0YW50KGlzTmFOKGEpID8gYiA6IGEpOwogIH0KCiAgdmFyIGludGVycG9sYXRlUmdiID0gKGZ1bmN0aW9uIHJnYkdhbW1hKHkpIHsKICAgIHZhciBjb2xvciA9IGdhbW1hKHkpOwogICAgZnVuY3Rpb24gcmdiJDEoc3RhcnQsIGVuZCkgewogICAgICB2YXIgciA9IGNvbG9yKChzdGFydCA9IHJnYihzdGFydCkpLnIsIChlbmQgPSByZ2IoZW5kKSkuciksCiAgICAgICAgZyA9IGNvbG9yKHN0YXJ0LmcsIGVuZC5nKSwKICAgICAgICBiID0gY29sb3Ioc3RhcnQuYiwgZW5kLmIpLAogICAgICAgIG9wYWNpdHkgPSBub2dhbW1hKHN0YXJ0Lm9wYWNpdHksIGVuZC5vcGFjaXR5KTsKICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgc3RhcnQuciA9IHIodCk7CiAgICAgICAgc3RhcnQuZyA9IGcodCk7CiAgICAgICAgc3RhcnQuYiA9IGIodCk7CiAgICAgICAgc3RhcnQub3BhY2l0eSA9IG9wYWNpdHkodCk7CiAgICAgICAgcmV0dXJuIHN0YXJ0ICsgIiI7CiAgICAgIH07CiAgICB9CiAgICByZ2IkMS5nYW1tYSA9IHJnYkdhbW1hOwogICAgcmV0dXJuIHJnYiQxOwogIH0pKDEpOwoKICBmdW5jdGlvbiBpbnRlcnBvbGF0ZU51bWJlciAoYSwgYikgewogICAgcmV0dXJuIGEgPSArYSwgYiA9ICtiLCBmdW5jdGlvbiAodCkgewogICAgICByZXR1cm4gYSAqICgxIC0gdCkgKyBiICogdDsKICAgIH07CiAgfQoKICB2YXIgcmVBID0gL1stK10/KD86XGQrXC4/XGQqfFwuP1xkKykoPzpbZUVdWy0rXT9cZCspPy9nLAogICAgcmVCID0gbmV3IFJlZ0V4cChyZUEuc291cmNlLCAiZyIpOwogIGZ1bmN0aW9uIHplcm8oYikgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGI7CiAgICB9OwogIH0KICBmdW5jdGlvbiBvbmUoYikgewogICAgcmV0dXJuIGZ1bmN0aW9uICh0KSB7CiAgICAgIHJldHVybiBiKHQpICsgIiI7CiAgICB9OwogIH0KICBmdW5jdGlvbiBpbnRlcnBvbGF0ZVN0cmluZyAoYSwgYikgewogICAgdmFyIGJpID0gcmVBLmxhc3RJbmRleCA9IHJlQi5sYXN0SW5kZXggPSAwLAogICAgICAvLyBzY2FuIGluZGV4IGZvciBuZXh0IG51bWJlciBpbiBiCiAgICAgIGFtLAogICAgICAvLyBjdXJyZW50IG1hdGNoIGluIGEKICAgICAgYm0sCiAgICAgIC8vIGN1cnJlbnQgbWF0Y2ggaW4gYgogICAgICBicywKICAgICAgLy8gc3RyaW5nIHByZWNlZGluZyBjdXJyZW50IG51bWJlciBpbiBiLCBpZiBhbnkKICAgICAgaSA9IC0xLAogICAgICAvLyBpbmRleCBpbiBzCiAgICAgIHMgPSBbXSwKICAgICAgLy8gc3RyaW5nIGNvbnN0YW50cyBhbmQgcGxhY2Vob2xkZXJzCiAgICAgIHEgPSBbXTsgLy8gbnVtYmVyIGludGVycG9sYXRvcnMKCiAgICAvLyBDb2VyY2UgaW5wdXRzIHRvIHN0cmluZ3MuCiAgICBhID0gYSArICIiLCBiID0gYiArICIiOwoKICAgIC8vIEludGVycG9sYXRlIHBhaXJzIG9mIG51bWJlcnMgaW4gYSAmIGIuCiAgICB3aGlsZSAoKGFtID0gcmVBLmV4ZWMoYSkpICYmIChibSA9IHJlQi5leGVjKGIpKSkgewogICAgICBpZiAoKGJzID0gYm0uaW5kZXgpID4gYmkpIHsKICAgICAgICAvLyBhIHN0cmluZyBwcmVjZWRlcyB0aGUgbmV4dCBudW1iZXIgaW4gYgogICAgICAgIGJzID0gYi5zbGljZShiaSwgYnMpOwogICAgICAgIGlmIChzW2ldKSBzW2ldICs9IGJzOyAvLyBjb2FsZXNjZSB3aXRoIHByZXZpb3VzIHN0cmluZwogICAgICAgIGVsc2Ugc1srK2ldID0gYnM7CiAgICAgIH0KICAgICAgaWYgKChhbSA9IGFtWzBdKSA9PT0gKGJtID0gYm1bMF0pKSB7CiAgICAgICAgLy8gbnVtYmVycyBpbiBhICYgYiBtYXRjaAogICAgICAgIGlmIChzW2ldKSBzW2ldICs9IGJtOyAvLyBjb2FsZXNjZSB3aXRoIHByZXZpb3VzIHN0cmluZwogICAgICAgIGVsc2Ugc1srK2ldID0gYm07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gaW50ZXJwb2xhdGUgbm9uLW1hdGNoaW5nIG51bWJlcnMKICAgICAgICBzWysraV0gPSBudWxsOwogICAgICAgIHEucHVzaCh7CiAgICAgICAgICBpOiBpLAogICAgICAgICAgeDogaW50ZXJwb2xhdGVOdW1iZXIoYW0sIGJtKQogICAgICAgIH0pOwogICAgICB9CiAgICAgIGJpID0gcmVCLmxhc3RJbmRleDsKICAgIH0KCiAgICAvLyBBZGQgcmVtYWlucyBvZiBiLgogICAgaWYgKGJpIDwgYi5sZW5ndGgpIHsKICAgICAgYnMgPSBiLnNsaWNlKGJpKTsKICAgICAgaWYgKHNbaV0pIHNbaV0gKz0gYnM7IC8vIGNvYWxlc2NlIHdpdGggcHJldmlvdXMgc3RyaW5nCiAgICAgIGVsc2Ugc1srK2ldID0gYnM7CiAgICB9CgogICAgLy8gU3BlY2lhbCBvcHRpbWl6YXRpb24gZm9yIG9ubHkgYSBzaW5nbGUgbWF0Y2guCiAgICAvLyBPdGhlcndpc2UsIGludGVycG9sYXRlIGVhY2ggb2YgdGhlIG51bWJlcnMgYW5kIHJlam9pbiB0aGUgc3RyaW5nLgogICAgcmV0dXJuIHMubGVuZ3RoIDwgMiA/IHFbMF0gPyBvbmUocVswXS54KSA6IHplcm8oYikgOiAoYiA9IHEubGVuZ3RoLCBmdW5jdGlvbiAodCkgewogICAgICBmb3IgKHZhciBpID0gMCwgbzsgaSA8IGI7ICsraSkgc1sobyA9IHFbaV0pLmldID0gby54KHQpOwogICAgICByZXR1cm4gcy5qb2luKCIiKTsKICAgIH0pOwogIH0KCiAgdmFyIGRlZ3JlZXMgPSAxODAgLyBNYXRoLlBJOwogIHZhciBpZGVudGl0eSA9IHsKICAgIHRyYW5zbGF0ZVg6IDAsCiAgICB0cmFuc2xhdGVZOiAwLAogICAgcm90YXRlOiAwLAogICAgc2tld1g6IDAsCiAgICBzY2FsZVg6IDEsCiAgICBzY2FsZVk6IDEKICB9OwogIGZ1bmN0aW9uIGRlY29tcG9zZSAoYSwgYiwgYywgZCwgZSwgZikgewogICAgdmFyIHNjYWxlWCwgc2NhbGVZLCBza2V3WDsKICAgIGlmIChzY2FsZVggPSBNYXRoLnNxcnQoYSAqIGEgKyBiICogYikpIGEgLz0gc2NhbGVYLCBiIC89IHNjYWxlWDsKICAgIGlmIChza2V3WCA9IGEgKiBjICsgYiAqIGQpIGMgLT0gYSAqIHNrZXdYLCBkIC09IGIgKiBza2V3WDsKICAgIGlmIChzY2FsZVkgPSBNYXRoLnNxcnQoYyAqIGMgKyBkICogZCkpIGMgLz0gc2NhbGVZLCBkIC89IHNjYWxlWSwgc2tld1ggLz0gc2NhbGVZOwogICAgaWYgKGEgKiBkIDwgYiAqIGMpIGEgPSAtYSwgYiA9IC1iLCBza2V3WCA9IC1za2V3WCwgc2NhbGVYID0gLXNjYWxlWDsKICAgIHJldHVybiB7CiAgICAgIHRyYW5zbGF0ZVg6IGUsCiAgICAgIHRyYW5zbGF0ZVk6IGYsCiAgICAgIHJvdGF0ZTogTWF0aC5hdGFuMihiLCBhKSAqIGRlZ3JlZXMsCiAgICAgIHNrZXdYOiBNYXRoLmF0YW4oc2tld1gpICogZGVncmVlcywKICAgICAgc2NhbGVYOiBzY2FsZVgsCiAgICAgIHNjYWxlWTogc2NhbGVZCiAgICB9OwogIH0KCiAgdmFyIHN2Z05vZGU7CgogIC8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovCiAgZnVuY3Rpb24gcGFyc2VDc3ModmFsdWUpIHsKICAgIGNvbnN0IG0gPSBuZXcgKHR5cGVvZiBET01NYXRyaXggPT09ICJmdW5jdGlvbiIgPyBET01NYXRyaXggOiBXZWJLaXRDU1NNYXRyaXgpKHZhbHVlICsgIiIpOwogICAgcmV0dXJuIG0uaXNJZGVudGl0eSA/IGlkZW50aXR5IDogZGVjb21wb3NlKG0uYSwgbS5iLCBtLmMsIG0uZCwgbS5lLCBtLmYpOwogIH0KICBmdW5jdGlvbiBwYXJzZVN2Zyh2YWx1ZSkgewogICAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiBpZGVudGl0eTsKICAgIGlmICghc3ZnTm9kZSkgc3ZnTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLCAiZyIpOwogICAgc3ZnTm9kZS5zZXRBdHRyaWJ1dGUoInRyYW5zZm9ybSIsIHZhbHVlKTsKICAgIGlmICghKHZhbHVlID0gc3ZnTm9kZS50cmFuc2Zvcm0uYmFzZVZhbC5jb25zb2xpZGF0ZSgpKSkgcmV0dXJuIGlkZW50aXR5OwogICAgdmFsdWUgPSB2YWx1ZS5tYXRyaXg7CiAgICByZXR1cm4gZGVjb21wb3NlKHZhbHVlLmEsIHZhbHVlLmIsIHZhbHVlLmMsIHZhbHVlLmQsIHZhbHVlLmUsIHZhbHVlLmYpOwogIH0KCiAgZnVuY3Rpb24gaW50ZXJwb2xhdGVUcmFuc2Zvcm0ocGFyc2UsIHB4Q29tbWEsIHB4UGFyZW4sIGRlZ1BhcmVuKSB7CiAgICBmdW5jdGlvbiBwb3AocykgewogICAgICByZXR1cm4gcy5sZW5ndGggPyBzLnBvcCgpICsgIiAiIDogIiI7CiAgICB9CiAgICBmdW5jdGlvbiB0cmFuc2xhdGUoeGEsIHlhLCB4YiwgeWIsIHMsIHEpIHsKICAgICAgaWYgKHhhICE9PSB4YiB8fCB5YSAhPT0geWIpIHsKICAgICAgICB2YXIgaSA9IHMucHVzaCgidHJhbnNsYXRlKCIsIG51bGwsIHB4Q29tbWEsIG51bGwsIHB4UGFyZW4pOwogICAgICAgIHEucHVzaCh7CiAgICAgICAgICBpOiBpIC0gNCwKICAgICAgICAgIHg6IGludGVycG9sYXRlTnVtYmVyKHhhLCB4YikKICAgICAgICB9LCB7CiAgICAgICAgICBpOiBpIC0gMiwKICAgICAgICAgIHg6IGludGVycG9sYXRlTnVtYmVyKHlhLCB5YikKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh4YiB8fCB5YikgewogICAgICAgIHMucHVzaCgidHJhbnNsYXRlKCIgKyB4YiArIHB4Q29tbWEgKyB5YiArIHB4UGFyZW4pOwogICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiByb3RhdGUoYSwgYiwgcywgcSkgewogICAgICBpZiAoYSAhPT0gYikgewogICAgICAgIGlmIChhIC0gYiA+IDE4MCkgYiArPSAzNjA7ZWxzZSBpZiAoYiAtIGEgPiAxODApIGEgKz0gMzYwOyAvLyBzaG9ydGVzdCBwYXRoCiAgICAgICAgcS5wdXNoKHsKICAgICAgICAgIGk6IHMucHVzaChwb3AocykgKyAicm90YXRlKCIsIG51bGwsIGRlZ1BhcmVuKSAtIDIsCiAgICAgICAgICB4OiBpbnRlcnBvbGF0ZU51bWJlcihhLCBiKQogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKGIpIHsKICAgICAgICBzLnB1c2gocG9wKHMpICsgInJvdGF0ZSgiICsgYiArIGRlZ1BhcmVuKTsKICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gc2tld1goYSwgYiwgcywgcSkgewogICAgICBpZiAoYSAhPT0gYikgewogICAgICAgIHEucHVzaCh7CiAgICAgICAgICBpOiBzLnB1c2gocG9wKHMpICsgInNrZXdYKCIsIG51bGwsIGRlZ1BhcmVuKSAtIDIsCiAgICAgICAgICB4OiBpbnRlcnBvbGF0ZU51bWJlcihhLCBiKQogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKGIpIHsKICAgICAgICBzLnB1c2gocG9wKHMpICsgInNrZXdYKCIgKyBiICsgZGVnUGFyZW4pOwogICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBzY2FsZSh4YSwgeWEsIHhiLCB5YiwgcywgcSkgewogICAgICBpZiAoeGEgIT09IHhiIHx8IHlhICE9PSB5YikgewogICAgICAgIHZhciBpID0gcy5wdXNoKHBvcChzKSArICJzY2FsZSgiLCBudWxsLCAiLCIsIG51bGwsICIpIik7CiAgICAgICAgcS5wdXNoKHsKICAgICAgICAgIGk6IGkgLSA0LAogICAgICAgICAgeDogaW50ZXJwb2xhdGVOdW1iZXIoeGEsIHhiKQogICAgICAgIH0sIHsKICAgICAgICAgIGk6IGkgLSAyLAogICAgICAgICAgeDogaW50ZXJwb2xhdGVOdW1iZXIoeWEsIHliKQogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHhiICE9PSAxIHx8IHliICE9PSAxKSB7CiAgICAgICAgcy5wdXNoKHBvcChzKSArICJzY2FsZSgiICsgeGIgKyAiLCIgKyB5YiArICIpIik7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBmdW5jdGlvbiAoYSwgYikgewogICAgICB2YXIgcyA9IFtdLAogICAgICAgIC8vIHN0cmluZyBjb25zdGFudHMgYW5kIHBsYWNlaG9sZGVycwogICAgICAgIHEgPSBbXTsgLy8gbnVtYmVyIGludGVycG9sYXRvcnMKICAgICAgYSA9IHBhcnNlKGEpLCBiID0gcGFyc2UoYik7CiAgICAgIHRyYW5zbGF0ZShhLnRyYW5zbGF0ZVgsIGEudHJhbnNsYXRlWSwgYi50cmFuc2xhdGVYLCBiLnRyYW5zbGF0ZVksIHMsIHEpOwogICAgICByb3RhdGUoYS5yb3RhdGUsIGIucm90YXRlLCBzLCBxKTsKICAgICAgc2tld1goYS5za2V3WCwgYi5za2V3WCwgcywgcSk7CiAgICAgIHNjYWxlKGEuc2NhbGVYLCBhLnNjYWxlWSwgYi5zY2FsZVgsIGIuc2NhbGVZLCBzLCBxKTsKICAgICAgYSA9IGIgPSBudWxsOyAvLyBnYwogICAgICByZXR1cm4gZnVuY3Rpb24gKHQpIHsKICAgICAgICB2YXIgaSA9IC0xLAogICAgICAgICAgbiA9IHEubGVuZ3RoLAogICAgICAgICAgbzsKICAgICAgICB3aGlsZSAoKytpIDwgbikgc1sobyA9IHFbaV0pLmldID0gby54KHQpOwogICAgICAgIHJldHVybiBzLmpvaW4oIiIpOwogICAgICB9OwogICAgfTsKICB9CiAgdmFyIGludGVycG9sYXRlVHJhbnNmb3JtQ3NzID0gaW50ZXJwb2xhdGVUcmFuc2Zvcm0ocGFyc2VDc3MsICJweCwgIiwgInB4KSIsICJkZWcpIik7CiAgdmFyIGludGVycG9sYXRlVHJhbnNmb3JtU3ZnID0gaW50ZXJwb2xhdGVUcmFuc2Zvcm0ocGFyc2VTdmcsICIsICIsICIpIiwgIikiKTsKCiAgdmFyIGZyYW1lID0gMCwKICAgIC8vIGlzIGFuIGFuaW1hdGlvbiBmcmFtZSBwZW5kaW5nPwogICAgdGltZW91dCQxID0gMCwKICAgIC8vIGlzIGEgdGltZW91dCBwZW5kaW5nPwogICAgaW50ZXJ2YWwgPSAwLAogICAgLy8gYXJlIGFueSB0aW1lcnMgYWN0aXZlPwogICAgcG9rZURlbGF5ID0gMTAwMCwKICAgIC8vIGhvdyBmcmVxdWVudGx5IHdlIGNoZWNrIGZvciBjbG9jayBza2V3CiAgICB0YXNrSGVhZCwKICAgIHRhc2tUYWlsLAogICAgY2xvY2tMYXN0ID0gMCwKICAgIGNsb2NrTm93ID0gMCwKICAgIGNsb2NrU2tldyA9IDAsCiAgICBjbG9jayA9IHR5cGVvZiBwZXJmb3JtYW5jZSA9PT0gIm9iamVjdCIgJiYgcGVyZm9ybWFuY2Uubm93ID8gcGVyZm9ybWFuY2UgOiBEYXRlLAogICAgc2V0RnJhbWUgPSB0eXBlb2Ygd2luZG93ID09PSAib2JqZWN0IiAmJiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID8gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZS5iaW5kKHdpbmRvdykgOiBmdW5jdGlvbiAoZikgewogICAgICBzZXRUaW1lb3V0KGYsIDE3KTsKICAgIH07CiAgZnVuY3Rpb24gbm93KCkgewogICAgcmV0dXJuIGNsb2NrTm93IHx8IChzZXRGcmFtZShjbGVhck5vdyksIGNsb2NrTm93ID0gY2xvY2subm93KCkgKyBjbG9ja1NrZXcpOwogIH0KICBmdW5jdGlvbiBjbGVhck5vdygpIHsKICAgIGNsb2NrTm93ID0gMDsKICB9CiAgZnVuY3Rpb24gVGltZXIoKSB7CiAgICB0aGlzLl9jYWxsID0gdGhpcy5fdGltZSA9IHRoaXMuX25leHQgPSBudWxsOwogIH0KICBUaW1lci5wcm90b3R5cGUgPSB0aW1lci5wcm90b3R5cGUgPSB7CiAgICBjb25zdHJ1Y3RvcjogVGltZXIsCiAgICByZXN0YXJ0OiBmdW5jdGlvbiAoY2FsbGJhY2ssIGRlbGF5LCB0aW1lKSB7CiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICJmdW5jdGlvbiIpIHRocm93IG5ldyBUeXBlRXJyb3IoImNhbGxiYWNrIGlzIG5vdCBhIGZ1bmN0aW9uIik7CiAgICAgIHRpbWUgPSAodGltZSA9PSBudWxsID8gbm93KCkgOiArdGltZSkgKyAoZGVsYXkgPT0gbnVsbCA/IDAgOiArZGVsYXkpOwogICAgICBpZiAoIXRoaXMuX25leHQgJiYgdGFza1RhaWwgIT09IHRoaXMpIHsKICAgICAgICBpZiAodGFza1RhaWwpIHRhc2tUYWlsLl9uZXh0ID0gdGhpcztlbHNlIHRhc2tIZWFkID0gdGhpczsKICAgICAgICB0YXNrVGFpbCA9IHRoaXM7CiAgICAgIH0KICAgICAgdGhpcy5fY2FsbCA9IGNhbGxiYWNrOwogICAgICB0aGlzLl90aW1lID0gdGltZTsKICAgICAgc2xlZXAoKTsKICAgIH0sCiAgICBzdG9wOiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICh0aGlzLl9jYWxsKSB7CiAgICAgICAgdGhpcy5fY2FsbCA9IG51bGw7CiAgICAgICAgdGhpcy5fdGltZSA9IEluZmluaXR5OwogICAgICAgIHNsZWVwKCk7CiAgICAgIH0KICAgIH0KICB9OwogIGZ1bmN0aW9uIHRpbWVyKGNhbGxiYWNrLCBkZWxheSwgdGltZSkgewogICAgdmFyIHQgPSBuZXcgVGltZXIoKTsKICAgIHQucmVzdGFydChjYWxsYmFjaywgZGVsYXksIHRpbWUpOwogICAgcmV0dXJuIHQ7CiAgfQogIGZ1bmN0aW9uIHRpbWVyRmx1c2goKSB7CiAgICBub3coKTsgLy8gR2V0IHRoZSBjdXJyZW50IHRpbWUsIGlmIG5vdCBhbHJlYWR5IHNldC4KICAgICsrZnJhbWU7IC8vIFByZXRlbmQgd2XigJl2ZSBzZXQgYW4gYWxhcm0sIGlmIHdlIGhhdmVu4oCZdCBhbHJlYWR5LgogICAgdmFyIHQgPSB0YXNrSGVhZCwKICAgICAgZTsKICAgIHdoaWxlICh0KSB7CiAgICAgIGlmICgoZSA9IGNsb2NrTm93IC0gdC5fdGltZSkgPj0gMCkgdC5fY2FsbC5jYWxsKHVuZGVmaW5lZCwgZSk7CiAgICAgIHQgPSB0Ll9uZXh0OwogICAgfQogICAgLS1mcmFtZTsKICB9CiAgZnVuY3Rpb24gd2FrZSgpIHsKICAgIGNsb2NrTm93ID0gKGNsb2NrTGFzdCA9IGNsb2NrLm5vdygpKSArIGNsb2NrU2tldzsKICAgIGZyYW1lID0gdGltZW91dCQxID0gMDsKICAgIHRyeSB7CiAgICAgIHRpbWVyRmx1c2goKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGZyYW1lID0gMDsKICAgICAgbmFwKCk7CiAgICAgIGNsb2NrTm93ID0gMDsKICAgIH0KICB9CiAgZnVuY3Rpb24gcG9rZSgpIHsKICAgIHZhciBub3cgPSBjbG9jay5ub3coKSwKICAgICAgZGVsYXkgPSBub3cgLSBjbG9ja0xhc3Q7CiAgICBpZiAoZGVsYXkgPiBwb2tlRGVsYXkpIGNsb2NrU2tldyAtPSBkZWxheSwgY2xvY2tMYXN0ID0gbm93OwogIH0KICBmdW5jdGlvbiBuYXAoKSB7CiAgICB2YXIgdDAsCiAgICAgIHQxID0gdGFza0hlYWQsCiAgICAgIHQyLAogICAgICB0aW1lID0gSW5maW5pdHk7CiAgICB3aGlsZSAodDEpIHsKICAgICAgaWYgKHQxLl9jYWxsKSB7CiAgICAgICAgaWYgKHRpbWUgPiB0MS5fdGltZSkgdGltZSA9IHQxLl90aW1lOwogICAgICAgIHQwID0gdDEsIHQxID0gdDEuX25leHQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdDIgPSB0MS5fbmV4dCwgdDEuX25leHQgPSBudWxsOwogICAgICAgIHQxID0gdDAgPyB0MC5fbmV4dCA9IHQyIDogdGFza0hlYWQgPSB0MjsKICAgICAgfQogICAgfQogICAgdGFza1RhaWwgPSB0MDsKICAgIHNsZWVwKHRpbWUpOwogIH0KICBmdW5jdGlvbiBzbGVlcCh0aW1lKSB7CiAgICBpZiAoZnJhbWUpIHJldHVybjsgLy8gU29vbmVzdCBhbGFybSBhbHJlYWR5IHNldCwgb3Igd2lsbCBiZS4KICAgIGlmICh0aW1lb3V0JDEpIHRpbWVvdXQkMSA9IGNsZWFyVGltZW91dCh0aW1lb3V0JDEpOwogICAgdmFyIGRlbGF5ID0gdGltZSAtIGNsb2NrTm93OyAvLyBTdHJpY3RseSBsZXNzIHRoYW4gaWYgd2UgcmVjb21wdXRlZCBjbG9ja05vdy4KICAgIGlmIChkZWxheSA+IDI0KSB7CiAgICAgIGlmICh0aW1lIDwgSW5maW5pdHkpIHRpbWVvdXQkMSA9IHNldFRpbWVvdXQod2FrZSwgdGltZSAtIGNsb2NrLm5vdygpIC0gY2xvY2tTa2V3KTsKICAgICAgaWYgKGludGVydmFsKSBpbnRlcnZhbCA9IGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpOwogICAgfSBlbHNlIHsKICAgICAgaWYgKCFpbnRlcnZhbCkgY2xvY2tMYXN0ID0gY2xvY2subm93KCksIGludGVydmFsID0gc2V0SW50ZXJ2YWwocG9rZSwgcG9rZURlbGF5KTsKICAgICAgZnJhbWUgPSAxLCBzZXRGcmFtZSh3YWtlKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHRpbWVvdXQgKGNhbGxiYWNrLCBkZWxheSwgdGltZSkgewogICAgdmFyIHQgPSBuZXcgVGltZXIoKTsKICAgIGRlbGF5ID0gZGVsYXkgPT0gbnVsbCA/IDAgOiArZGVsYXk7CiAgICB0LnJlc3RhcnQoZWxhcHNlZCA9PiB7CiAgICAgIHQuc3RvcCgpOwogICAgICBjYWxsYmFjayhlbGFwc2VkICsgZGVsYXkpOwogICAgfSwgZGVsYXksIHRpbWUpOwogICAgcmV0dXJuIHQ7CiAgfQoKICB2YXIgZW1wdHlPbiA9IGRpc3BhdGNoKCJzdGFydCIsICJlbmQiLCAiY2FuY2VsIiwgImludGVycnVwdCIpOwogIHZhciBlbXB0eVR3ZWVuID0gW107CiAgdmFyIENSRUFURUQgPSAwOwogIHZhciBTQ0hFRFVMRUQgPSAxOwogIHZhciBTVEFSVElORyA9IDI7CiAgdmFyIFNUQVJURUQgPSAzOwogIHZhciBSVU5OSU5HID0gNDsKICB2YXIgRU5ESU5HID0gNTsKICB2YXIgRU5ERUQgPSA2OwogIGZ1bmN0aW9uIHNjaGVkdWxlIChub2RlLCBuYW1lLCBpZCwgaW5kZXgsIGdyb3VwLCB0aW1pbmcpIHsKICAgIHZhciBzY2hlZHVsZXMgPSBub2RlLl9fdHJhbnNpdGlvbjsKICAgIGlmICghc2NoZWR1bGVzKSBub2RlLl9fdHJhbnNpdGlvbiA9IHt9O2Vsc2UgaWYgKGlkIGluIHNjaGVkdWxlcykgcmV0dXJuOwogICAgY3JlYXRlKG5vZGUsIGlkLCB7CiAgICAgIG5hbWU6IG5hbWUsCiAgICAgIGluZGV4OiBpbmRleCwKICAgICAgLy8gRm9yIGNvbnRleHQgZHVyaW5nIGNhbGxiYWNrLgogICAgICBncm91cDogZ3JvdXAsCiAgICAgIC8vIEZvciBjb250ZXh0IGR1cmluZyBjYWxsYmFjay4KICAgICAgb246IGVtcHR5T24sCiAgICAgIHR3ZWVuOiBlbXB0eVR3ZWVuLAogICAgICB0aW1lOiB0aW1pbmcudGltZSwKICAgICAgZGVsYXk6IHRpbWluZy5kZWxheSwKICAgICAgZHVyYXRpb246IHRpbWluZy5kdXJhdGlvbiwKICAgICAgZWFzZTogdGltaW5nLmVhc2UsCiAgICAgIHRpbWVyOiBudWxsLAogICAgICBzdGF0ZTogQ1JFQVRFRAogICAgfSk7CiAgfQogIGZ1bmN0aW9uIGluaXQobm9kZSwgaWQpIHsKICAgIHZhciBzY2hlZHVsZSA9IGdldChub2RlLCBpZCk7CiAgICBpZiAoc2NoZWR1bGUuc3RhdGUgPiBDUkVBVEVEKSB0aHJvdyBuZXcgRXJyb3IoInRvbyBsYXRlOyBhbHJlYWR5IHNjaGVkdWxlZCIpOwogICAgcmV0dXJuIHNjaGVkdWxlOwogIH0KICBmdW5jdGlvbiBzZXQobm9kZSwgaWQpIHsKICAgIHZhciBzY2hlZHVsZSA9IGdldChub2RlLCBpZCk7CiAgICBpZiAoc2NoZWR1bGUuc3RhdGUgPiBTVEFSVEVEKSB0aHJvdyBuZXcgRXJyb3IoInRvbyBsYXRlOyBhbHJlYWR5IHJ1bm5pbmciKTsKICAgIHJldHVybiBzY2hlZHVsZTsKICB9CiAgZnVuY3Rpb24gZ2V0KG5vZGUsIGlkKSB7CiAgICB2YXIgc2NoZWR1bGUgPSBub2RlLl9fdHJhbnNpdGlvbjsKICAgIGlmICghc2NoZWR1bGUgfHwgIShzY2hlZHVsZSA9IHNjaGVkdWxlW2lkXSkpIHRocm93IG5ldyBFcnJvcigidHJhbnNpdGlvbiBub3QgZm91bmQiKTsKICAgIHJldHVybiBzY2hlZHVsZTsKICB9CiAgZnVuY3Rpb24gY3JlYXRlKG5vZGUsIGlkLCBzZWxmKSB7CiAgICB2YXIgc2NoZWR1bGVzID0gbm9kZS5fX3RyYW5zaXRpb24sCiAgICAgIHR3ZWVuOwoKICAgIC8vIEluaXRpYWxpemUgdGhlIHNlbGYgdGltZXIgd2hlbiB0aGUgdHJhbnNpdGlvbiBpcyBjcmVhdGVkLgogICAgLy8gTm90ZSB0aGUgYWN0dWFsIGRlbGF5IGlzIG5vdCBrbm93biB1bnRpbCB0aGUgZmlyc3QgY2FsbGJhY2shCiAgICBzY2hlZHVsZXNbaWRdID0gc2VsZjsKICAgIHNlbGYudGltZXIgPSB0aW1lcihzY2hlZHVsZSwgMCwgc2VsZi50aW1lKTsKICAgIGZ1bmN0aW9uIHNjaGVkdWxlKGVsYXBzZWQpIHsKICAgICAgc2VsZi5zdGF0ZSA9IFNDSEVEVUxFRDsKICAgICAgc2VsZi50aW1lci5yZXN0YXJ0KHN0YXJ0LCBzZWxmLmRlbGF5LCBzZWxmLnRpbWUpOwoKICAgICAgLy8gSWYgdGhlIGVsYXBzZWQgZGVsYXkgaXMgbGVzcyB0aGFuIG91ciBmaXJzdCBzbGVlcCwgc3RhcnQgaW1tZWRpYXRlbHkuCiAgICAgIGlmIChzZWxmLmRlbGF5IDw9IGVsYXBzZWQpIHN0YXJ0KGVsYXBzZWQgLSBzZWxmLmRlbGF5KTsKICAgIH0KICAgIGZ1bmN0aW9uIHN0YXJ0KGVsYXBzZWQpIHsKICAgICAgdmFyIGksIGosIG4sIG87CgogICAgICAvLyBJZiB0aGUgc3RhdGUgaXMgbm90IFNDSEVEVUxFRCwgdGhlbiB3ZSBwcmV2aW91c2x5IGVycm9yZWQgb24gc3RhcnQuCiAgICAgIGlmIChzZWxmLnN0YXRlICE9PSBTQ0hFRFVMRUQpIHJldHVybiBzdG9wKCk7CiAgICAgIGZvciAoaSBpbiBzY2hlZHVsZXMpIHsKICAgICAgICBvID0gc2NoZWR1bGVzW2ldOwogICAgICAgIGlmIChvLm5hbWUgIT09IHNlbGYubmFtZSkgY29udGludWU7CgogICAgICAgIC8vIFdoaWxlIHRoaXMgZWxlbWVudCBhbHJlYWR5IGhhcyBhIHN0YXJ0aW5nIHRyYW5zaXRpb24gZHVyaW5nIHRoaXMgZnJhbWUsCiAgICAgICAgLy8gZGVmZXIgc3RhcnRpbmcgYW4gaW50ZXJydXB0aW5nIHRyYW5zaXRpb24gdW50aWwgdGhhdCB0cmFuc2l0aW9uIGhhcyBhCiAgICAgICAgLy8gY2hhbmNlIHRvIHRpY2sgKGFuZCBwb3NzaWJseSBlbmQpOyBzZWUgZDMvZDMtdHJhbnNpdGlvbiM1NCEKICAgICAgICBpZiAoby5zdGF0ZSA9PT0gU1RBUlRFRCkgcmV0dXJuIHRpbWVvdXQoc3RhcnQpOwoKICAgICAgICAvLyBJbnRlcnJ1cHQgdGhlIGFjdGl2ZSB0cmFuc2l0aW9uLCBpZiBhbnkuCiAgICAgICAgaWYgKG8uc3RhdGUgPT09IFJVTk5JTkcpIHsKICAgICAgICAgIG8uc3RhdGUgPSBFTkRFRDsKICAgICAgICAgIG8udGltZXIuc3RvcCgpOwogICAgICAgICAgby5vbi5jYWxsKCJpbnRlcnJ1cHQiLCBub2RlLCBub2RlLl9fZGF0YV9fLCBvLmluZGV4LCBvLmdyb3VwKTsKICAgICAgICAgIGRlbGV0ZSBzY2hlZHVsZXNbaV07CiAgICAgICAgfQoKICAgICAgICAvLyBDYW5jZWwgYW55IHByZS1lbXB0ZWQgdHJhbnNpdGlvbnMuCiAgICAgICAgZWxzZSBpZiAoK2kgPCBpZCkgewogICAgICAgICAgby5zdGF0ZSA9IEVOREVEOwogICAgICAgICAgby50aW1lci5zdG9wKCk7CiAgICAgICAgICBvLm9uLmNhbGwoImNhbmNlbCIsIG5vZGUsIG5vZGUuX19kYXRhX18sIG8uaW5kZXgsIG8uZ3JvdXApOwogICAgICAgICAgZGVsZXRlIHNjaGVkdWxlc1tpXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIERlZmVyIHRoZSBmaXJzdCB0aWNrIHRvIGVuZCBvZiB0aGUgY3VycmVudCBmcmFtZTsgc2VlIGQzL2QzIzE1NzYuCiAgICAgIC8vIE5vdGUgdGhlIHRyYW5zaXRpb24gbWF5IGJlIGNhbmNlbGVkIGFmdGVyIHN0YXJ0IGFuZCBiZWZvcmUgdGhlIGZpcnN0IHRpY2shCiAgICAgIC8vIE5vdGUgdGhpcyBtdXN0IGJlIHNjaGVkdWxlZCBiZWZvcmUgdGhlIHN0YXJ0IGV2ZW50OyBzZWUgZDMvZDMtdHJhbnNpdGlvbiMxNiEKICAgICAgLy8gQXNzdW1pbmcgdGhpcyBpcyBzdWNjZXNzZnVsLCBzdWJzZXF1ZW50IGNhbGxiYWNrcyBnbyBzdHJhaWdodCB0byB0aWNrLgogICAgICB0aW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoc2VsZi5zdGF0ZSA9PT0gU1RBUlRFRCkgewogICAgICAgICAgc2VsZi5zdGF0ZSA9IFJVTk5JTkc7CiAgICAgICAgICBzZWxmLnRpbWVyLnJlc3RhcnQodGljaywgc2VsZi5kZWxheSwgc2VsZi50aW1lKTsKICAgICAgICAgIHRpY2soZWxhcHNlZCk7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIC8vIERpc3BhdGNoIHRoZSBzdGFydCBldmVudC4KICAgICAgLy8gTm90ZSB0aGlzIG11c3QgYmUgZG9uZSBiZWZvcmUgdGhlIHR3ZWVuIGFyZSBpbml0aWFsaXplZC4KICAgICAgc2VsZi5zdGF0ZSA9IFNUQVJUSU5HOwogICAgICBzZWxmLm9uLmNhbGwoInN0YXJ0Iiwgbm9kZSwgbm9kZS5fX2RhdGFfXywgc2VsZi5pbmRleCwgc2VsZi5ncm91cCk7CiAgICAgIGlmIChzZWxmLnN0YXRlICE9PSBTVEFSVElORykgcmV0dXJuOyAvLyBpbnRlcnJ1cHRlZAogICAgICBzZWxmLnN0YXRlID0gU1RBUlRFRDsKCiAgICAgIC8vIEluaXRpYWxpemUgdGhlIHR3ZWVuLCBkZWxldGluZyBudWxsIHR3ZWVuLgogICAgICB0d2VlbiA9IG5ldyBBcnJheShuID0gc2VsZi50d2Vlbi5sZW5ndGgpOwogICAgICBmb3IgKGkgPSAwLCBqID0gLTE7IGkgPCBuOyArK2kpIHsKICAgICAgICBpZiAobyA9IHNlbGYudHdlZW5baV0udmFsdWUuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBzZWxmLmluZGV4LCBzZWxmLmdyb3VwKSkgewogICAgICAgICAgdHdlZW5bKytqXSA9IG87CiAgICAgICAgfQogICAgICB9CiAgICAgIHR3ZWVuLmxlbmd0aCA9IGogKyAxOwogICAgfQogICAgZnVuY3Rpb24gdGljayhlbGFwc2VkKSB7CiAgICAgIHZhciB0ID0gZWxhcHNlZCA8IHNlbGYuZHVyYXRpb24gPyBzZWxmLmVhc2UuY2FsbChudWxsLCBlbGFwc2VkIC8gc2VsZi5kdXJhdGlvbikgOiAoc2VsZi50aW1lci5yZXN0YXJ0KHN0b3ApLCBzZWxmLnN0YXRlID0gRU5ESU5HLCAxKSwKICAgICAgICBpID0gLTEsCiAgICAgICAgbiA9IHR3ZWVuLmxlbmd0aDsKICAgICAgd2hpbGUgKCsraSA8IG4pIHsKICAgICAgICB0d2VlbltpXS5jYWxsKG5vZGUsIHQpOwogICAgICB9CgogICAgICAvLyBEaXNwYXRjaCB0aGUgZW5kIGV2ZW50LgogICAgICBpZiAoc2VsZi5zdGF0ZSA9PT0gRU5ESU5HKSB7CiAgICAgICAgc2VsZi5vbi5jYWxsKCJlbmQiLCBub2RlLCBub2RlLl9fZGF0YV9fLCBzZWxmLmluZGV4LCBzZWxmLmdyb3VwKTsKICAgICAgICBzdG9wKCk7CiAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIHN0b3AoKSB7CiAgICAgIHNlbGYuc3RhdGUgPSBFTkRFRDsKICAgICAgc2VsZi50aW1lci5zdG9wKCk7CiAgICAgIGRlbGV0ZSBzY2hlZHVsZXNbaWRdOwogICAgICBmb3IgKHZhciBpIGluIHNjaGVkdWxlcykgcmV0dXJuOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCiAgICAgIGRlbGV0ZSBub2RlLl9fdHJhbnNpdGlvbjsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGludGVycnVwdCAobm9kZSwgbmFtZSkgewogICAgdmFyIHNjaGVkdWxlcyA9IG5vZGUuX190cmFuc2l0aW9uLAogICAgICBzY2hlZHVsZSwKICAgICAgYWN0aXZlLAogICAgICBlbXB0eSA9IHRydWUsCiAgICAgIGk7CiAgICBpZiAoIXNjaGVkdWxlcykgcmV0dXJuOwogICAgbmFtZSA9IG5hbWUgPT0gbnVsbCA/IG51bGwgOiBuYW1lICsgIiI7CiAgICBmb3IgKGkgaW4gc2NoZWR1bGVzKSB7CiAgICAgIGlmICgoc2NoZWR1bGUgPSBzY2hlZHVsZXNbaV0pLm5hbWUgIT09IG5hbWUpIHsKICAgICAgICBlbXB0eSA9IGZhbHNlOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGFjdGl2ZSA9IHNjaGVkdWxlLnN0YXRlID4gU1RBUlRJTkcgJiYgc2NoZWR1bGUuc3RhdGUgPCBFTkRJTkc7CiAgICAgIHNjaGVkdWxlLnN0YXRlID0gRU5ERUQ7CiAgICAgIHNjaGVkdWxlLnRpbWVyLnN0b3AoKTsKICAgICAgc2NoZWR1bGUub24uY2FsbChhY3RpdmUgPyAiaW50ZXJydXB0IiA6ICJjYW5jZWwiLCBub2RlLCBub2RlLl9fZGF0YV9fLCBzY2hlZHVsZS5pbmRleCwgc2NoZWR1bGUuZ3JvdXApOwogICAgICBkZWxldGUgc2NoZWR1bGVzW2ldOwogICAgfQogICAgaWYgKGVtcHR5KSBkZWxldGUgbm9kZS5fX3RyYW5zaXRpb247CiAgfQoKICBmdW5jdGlvbiBzZWxlY3Rpb25faW50ZXJydXB0IChuYW1lKSB7CiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgaW50ZXJydXB0KHRoaXMsIG5hbWUpOwogICAgfSk7CiAgfQoKICBmdW5jdGlvbiB0d2VlblJlbW92ZShpZCwgbmFtZSkgewogICAgdmFyIHR3ZWVuMCwgdHdlZW4xOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHNjaGVkdWxlID0gc2V0KHRoaXMsIGlkKSwKICAgICAgICB0d2VlbiA9IHNjaGVkdWxlLnR3ZWVuOwoKICAgICAgLy8gSWYgdGhpcyBub2RlIHNoYXJlZCB0d2VlbiB3aXRoIHRoZSBwcmV2aW91cyBub2RlLAogICAgICAvLyBqdXN0IGFzc2lnbiB0aGUgdXBkYXRlZCBzaGFyZWQgdHdlZW4gYW5kIHdl4oCZcmUgZG9uZSEKICAgICAgLy8gT3RoZXJ3aXNlLCBjb3B5LW9uLXdyaXRlLgogICAgICBpZiAodHdlZW4gIT09IHR3ZWVuMCkgewogICAgICAgIHR3ZWVuMSA9IHR3ZWVuMCA9IHR3ZWVuOwogICAgICAgIGZvciAodmFyIGkgPSAwLCBuID0gdHdlZW4xLmxlbmd0aDsgaSA8IG47ICsraSkgewogICAgICAgICAgaWYgKHR3ZWVuMVtpXS5uYW1lID09PSBuYW1lKSB7CiAgICAgICAgICAgIHR3ZWVuMSA9IHR3ZWVuMS5zbGljZSgpOwogICAgICAgICAgICB0d2VlbjEuc3BsaWNlKGksIDEpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgc2NoZWR1bGUudHdlZW4gPSB0d2VlbjE7CiAgICB9OwogIH0KICBmdW5jdGlvbiB0d2VlbkZ1bmN0aW9uKGlkLCBuYW1lLCB2YWx1ZSkgewogICAgdmFyIHR3ZWVuMCwgdHdlZW4xOwogICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gImZ1bmN0aW9uIikgdGhyb3cgbmV3IEVycm9yKCk7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgc2NoZWR1bGUgPSBzZXQodGhpcywgaWQpLAogICAgICAgIHR3ZWVuID0gc2NoZWR1bGUudHdlZW47CgogICAgICAvLyBJZiB0aGlzIG5vZGUgc2hhcmVkIHR3ZWVuIHdpdGggdGhlIHByZXZpb3VzIG5vZGUsCiAgICAgIC8vIGp1c3QgYXNzaWduIHRoZSB1cGRhdGVkIHNoYXJlZCB0d2VlbiBhbmQgd2XigJlyZSBkb25lIQogICAgICAvLyBPdGhlcndpc2UsIGNvcHktb24td3JpdGUuCiAgICAgIGlmICh0d2VlbiAhPT0gdHdlZW4wKSB7CiAgICAgICAgdHdlZW4xID0gKHR3ZWVuMCA9IHR3ZWVuKS5zbGljZSgpOwogICAgICAgIGZvciAodmFyIHQgPSB7CiAgICAgICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZQogICAgICAgICAgfSwgaSA9IDAsIG4gPSB0d2VlbjEubGVuZ3RoOyBpIDwgbjsgKytpKSB7CiAgICAgICAgICBpZiAodHdlZW4xW2ldLm5hbWUgPT09IG5hbWUpIHsKICAgICAgICAgICAgdHdlZW4xW2ldID0gdDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChpID09PSBuKSB0d2VlbjEucHVzaCh0KTsKICAgICAgfQogICAgICBzY2hlZHVsZS50d2VlbiA9IHR3ZWVuMTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIHRyYW5zaXRpb25fdHdlZW4gKG5hbWUsIHZhbHVlKSB7CiAgICB2YXIgaWQgPSB0aGlzLl9pZDsKICAgIG5hbWUgKz0gIiI7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHsKICAgICAgdmFyIHR3ZWVuID0gZ2V0KHRoaXMubm9kZSgpLCBpZCkudHdlZW47CiAgICAgIGZvciAodmFyIGkgPSAwLCBuID0gdHdlZW4ubGVuZ3RoLCB0OyBpIDwgbjsgKytpKSB7CiAgICAgICAgaWYgKCh0ID0gdHdlZW5baV0pLm5hbWUgPT09IG5hbWUpIHsKICAgICAgICAgIHJldHVybiB0LnZhbHVlOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIHJldHVybiB0aGlzLmVhY2goKHZhbHVlID09IG51bGwgPyB0d2VlblJlbW92ZSA6IHR3ZWVuRnVuY3Rpb24pKGlkLCBuYW1lLCB2YWx1ZSkpOwogIH0KICBmdW5jdGlvbiB0d2VlblZhbHVlKHRyYW5zaXRpb24sIG5hbWUsIHZhbHVlKSB7CiAgICB2YXIgaWQgPSB0cmFuc2l0aW9uLl9pZDsKICAgIHRyYW5zaXRpb24uZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBzY2hlZHVsZSA9IHNldCh0aGlzLCBpZCk7CiAgICAgIChzY2hlZHVsZS52YWx1ZSB8fCAoc2NoZWR1bGUudmFsdWUgPSB7fSkpW25hbWVdID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0pOwogICAgcmV0dXJuIGZ1bmN0aW9uIChub2RlKSB7CiAgICAgIHJldHVybiBnZXQobm9kZSwgaWQpLnZhbHVlW25hbWVdOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIGludGVycG9sYXRlIChhLCBiKSB7CiAgICB2YXIgYzsKICAgIHJldHVybiAodHlwZW9mIGIgPT09ICJudW1iZXIiID8gaW50ZXJwb2xhdGVOdW1iZXIgOiBiIGluc3RhbmNlb2YgY29sb3IgPyBpbnRlcnBvbGF0ZVJnYiA6IChjID0gY29sb3IoYikpID8gKGIgPSBjLCBpbnRlcnBvbGF0ZVJnYikgOiBpbnRlcnBvbGF0ZVN0cmluZykoYSwgYik7CiAgfQoKICBmdW5jdGlvbiBhdHRyUmVtb3ZlKG5hbWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gYXR0clJlbW92ZU5TKGZ1bGxuYW1lKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBhdHRyQ29uc3RhbnQobmFtZSwgaW50ZXJwb2xhdGUsIHZhbHVlMSkgewogICAgdmFyIHN0cmluZzAwLAogICAgICBzdHJpbmcxID0gdmFsdWUxICsgIiIsCiAgICAgIGludGVycG9sYXRlMDsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBzdHJpbmcwID0gdGhpcy5nZXRBdHRyaWJ1dGUobmFtZSk7CiAgICAgIHJldHVybiBzdHJpbmcwID09PSBzdHJpbmcxID8gbnVsbCA6IHN0cmluZzAgPT09IHN0cmluZzAwID8gaW50ZXJwb2xhdGUwIDogaW50ZXJwb2xhdGUwID0gaW50ZXJwb2xhdGUoc3RyaW5nMDAgPSBzdHJpbmcwLCB2YWx1ZTEpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gYXR0ckNvbnN0YW50TlMoZnVsbG5hbWUsIGludGVycG9sYXRlLCB2YWx1ZTEpIHsKICAgIHZhciBzdHJpbmcwMCwKICAgICAgc3RyaW5nMSA9IHZhbHVlMSArICIiLAogICAgICBpbnRlcnBvbGF0ZTA7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgc3RyaW5nMCA9IHRoaXMuZ2V0QXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsKTsKICAgICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgPyBpbnRlcnBvbGF0ZTAgOiBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHZhbHVlMSk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBhdHRyRnVuY3Rpb24obmFtZSwgaW50ZXJwb2xhdGUsIHZhbHVlKSB7CiAgICB2YXIgc3RyaW5nMDAsIHN0cmluZzEwLCBpbnRlcnBvbGF0ZTA7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgc3RyaW5nMCwKICAgICAgICB2YWx1ZTEgPSB2YWx1ZSh0aGlzKSwKICAgICAgICBzdHJpbmcxOwogICAgICBpZiAodmFsdWUxID09IG51bGwpIHJldHVybiB2b2lkIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpOwogICAgICBzdHJpbmcwID0gdGhpcy5nZXRBdHRyaWJ1dGUobmFtZSk7CiAgICAgIHN0cmluZzEgPSB2YWx1ZTEgKyAiIjsKICAgICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgJiYgc3RyaW5nMSA9PT0gc3RyaW5nMTAgPyBpbnRlcnBvbGF0ZTAgOiAoc3RyaW5nMTAgPSBzdHJpbmcxLCBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHZhbHVlMSkpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gYXR0ckZ1bmN0aW9uTlMoZnVsbG5hbWUsIGludGVycG9sYXRlLCB2YWx1ZSkgewogICAgdmFyIHN0cmluZzAwLCBzdHJpbmcxMCwgaW50ZXJwb2xhdGUwOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHN0cmluZzAsCiAgICAgICAgdmFsdWUxID0gdmFsdWUodGhpcyksCiAgICAgICAgc3RyaW5nMTsKICAgICAgaWYgKHZhbHVlMSA9PSBudWxsKSByZXR1cm4gdm9pZCB0aGlzLnJlbW92ZUF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCk7CiAgICAgIHN0cmluZzAgPSB0aGlzLmdldEF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCk7CiAgICAgIHN0cmluZzEgPSB2YWx1ZTEgKyAiIjsKICAgICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgJiYgc3RyaW5nMSA9PT0gc3RyaW5nMTAgPyBpbnRlcnBvbGF0ZTAgOiAoc3RyaW5nMTAgPSBzdHJpbmcxLCBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHZhbHVlMSkpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gdHJhbnNpdGlvbl9hdHRyIChuYW1lLCB2YWx1ZSkgewogICAgdmFyIGZ1bGxuYW1lID0gbmFtZXNwYWNlKG5hbWUpLAogICAgICBpID0gZnVsbG5hbWUgPT09ICJ0cmFuc2Zvcm0iID8gaW50ZXJwb2xhdGVUcmFuc2Zvcm1TdmcgOiBpbnRlcnBvbGF0ZTsKICAgIHJldHVybiB0aGlzLmF0dHJUd2VlbihuYW1lLCB0eXBlb2YgdmFsdWUgPT09ICJmdW5jdGlvbiIgPyAoZnVsbG5hbWUubG9jYWwgPyBhdHRyRnVuY3Rpb25OUyA6IGF0dHJGdW5jdGlvbikoZnVsbG5hbWUsIGksIHR3ZWVuVmFsdWUodGhpcywgImF0dHIuIiArIG5hbWUsIHZhbHVlKSkgOiB2YWx1ZSA9PSBudWxsID8gKGZ1bGxuYW1lLmxvY2FsID8gYXR0clJlbW92ZU5TIDogYXR0clJlbW92ZSkoZnVsbG5hbWUpIDogKGZ1bGxuYW1lLmxvY2FsID8gYXR0ckNvbnN0YW50TlMgOiBhdHRyQ29uc3RhbnQpKGZ1bGxuYW1lLCBpLCB2YWx1ZSkpOwogIH0KCiAgZnVuY3Rpb24gYXR0ckludGVycG9sYXRlKG5hbWUsIGkpIHsKICAgIHJldHVybiBmdW5jdGlvbiAodCkgewogICAgICB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCBpLmNhbGwodGhpcywgdCkpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gYXR0ckludGVycG9sYXRlTlMoZnVsbG5hbWUsIGkpIHsKICAgIHJldHVybiBmdW5jdGlvbiAodCkgewogICAgICB0aGlzLnNldEF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCwgaS5jYWxsKHRoaXMsIHQpKTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIGF0dHJUd2Vlbk5TKGZ1bGxuYW1lLCB2YWx1ZSkgewogICAgdmFyIHQwLCBpMDsKICAgIGZ1bmN0aW9uIHR3ZWVuKCkgewogICAgICB2YXIgaSA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIGlmIChpICE9PSBpMCkgdDAgPSAoaTAgPSBpKSAmJiBhdHRySW50ZXJwb2xhdGVOUyhmdWxsbmFtZSwgaSk7CiAgICAgIHJldHVybiB0MDsKICAgIH0KICAgIHR3ZWVuLl92YWx1ZSA9IHZhbHVlOwogICAgcmV0dXJuIHR3ZWVuOwogIH0KICBmdW5jdGlvbiBhdHRyVHdlZW4obmFtZSwgdmFsdWUpIHsKICAgIHZhciB0MCwgaTA7CiAgICBmdW5jdGlvbiB0d2VlbigpIHsKICAgICAgdmFyIGkgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICBpZiAoaSAhPT0gaTApIHQwID0gKGkwID0gaSkgJiYgYXR0ckludGVycG9sYXRlKG5hbWUsIGkpOwogICAgICByZXR1cm4gdDA7CiAgICB9CiAgICB0d2Vlbi5fdmFsdWUgPSB2YWx1ZTsKICAgIHJldHVybiB0d2VlbjsKICB9CiAgZnVuY3Rpb24gdHJhbnNpdGlvbl9hdHRyVHdlZW4gKG5hbWUsIHZhbHVlKSB7CiAgICB2YXIga2V5ID0gImF0dHIuIiArIG5hbWU7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHJldHVybiAoa2V5ID0gdGhpcy50d2VlbihrZXkpKSAmJiBrZXkuX3ZhbHVlOwogICAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiB0aGlzLnR3ZWVuKGtleSwgbnVsbCk7CiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAiZnVuY3Rpb24iKSB0aHJvdyBuZXcgRXJyb3IoKTsKICAgIHZhciBmdWxsbmFtZSA9IG5hbWVzcGFjZShuYW1lKTsKICAgIHJldHVybiB0aGlzLnR3ZWVuKGtleSwgKGZ1bGxuYW1lLmxvY2FsID8gYXR0clR3ZWVuTlMgOiBhdHRyVHdlZW4pKGZ1bGxuYW1lLCB2YWx1ZSkpOwogIH0KCiAgZnVuY3Rpb24gZGVsYXlGdW5jdGlvbihpZCwgdmFsdWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIGluaXQodGhpcywgaWQpLmRlbGF5ID0gK3ZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBkZWxheUNvbnN0YW50KGlkLCB2YWx1ZSkgewogICAgcmV0dXJuIHZhbHVlID0gK3ZhbHVlLCBmdW5jdGlvbiAoKSB7CiAgICAgIGluaXQodGhpcywgaWQpLmRlbGF5ID0gdmFsdWU7CiAgICB9OwogIH0KICBmdW5jdGlvbiB0cmFuc2l0aW9uX2RlbGF5ICh2YWx1ZSkgewogICAgdmFyIGlkID0gdGhpcy5faWQ7CiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IHRoaXMuZWFjaCgodHlwZW9mIHZhbHVlID09PSAiZnVuY3Rpb24iID8gZGVsYXlGdW5jdGlvbiA6IGRlbGF5Q29uc3RhbnQpKGlkLCB2YWx1ZSkpIDogZ2V0KHRoaXMubm9kZSgpLCBpZCkuZGVsYXk7CiAgfQoKICBmdW5jdGlvbiBkdXJhdGlvbkZ1bmN0aW9uKGlkLCB2YWx1ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgc2V0KHRoaXMsIGlkKS5kdXJhdGlvbiA9ICt2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gZHVyYXRpb25Db25zdGFudChpZCwgdmFsdWUpIHsKICAgIHJldHVybiB2YWx1ZSA9ICt2YWx1ZSwgZnVuY3Rpb24gKCkgewogICAgICBzZXQodGhpcywgaWQpLmR1cmF0aW9uID0gdmFsdWU7CiAgICB9OwogIH0KICBmdW5jdGlvbiB0cmFuc2l0aW9uX2R1cmF0aW9uICh2YWx1ZSkgewogICAgdmFyIGlkID0gdGhpcy5faWQ7CiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IHRoaXMuZWFjaCgodHlwZW9mIHZhbHVlID09PSAiZnVuY3Rpb24iID8gZHVyYXRpb25GdW5jdGlvbiA6IGR1cmF0aW9uQ29uc3RhbnQpKGlkLCB2YWx1ZSkpIDogZ2V0KHRoaXMubm9kZSgpLCBpZCkuZHVyYXRpb247CiAgfQoKICBmdW5jdGlvbiBlYXNlQ29uc3RhbnQoaWQsIHZhbHVlKSB7CiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAiZnVuY3Rpb24iKSB0aHJvdyBuZXcgRXJyb3IoKTsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHNldCh0aGlzLCBpZCkuZWFzZSA9IHZhbHVlOwogICAgfTsKICB9CiAgZnVuY3Rpb24gdHJhbnNpdGlvbl9lYXNlICh2YWx1ZSkgewogICAgdmFyIGlkID0gdGhpcy5faWQ7CiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IHRoaXMuZWFjaChlYXNlQ29uc3RhbnQoaWQsIHZhbHVlKSkgOiBnZXQodGhpcy5ub2RlKCksIGlkKS5lYXNlOwogIH0KCiAgZnVuY3Rpb24gZWFzZVZhcnlpbmcoaWQsIHZhbHVlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIGlmICh0eXBlb2YgdiAhPT0gImZ1bmN0aW9uIikgdGhyb3cgbmV3IEVycm9yKCk7CiAgICAgIHNldCh0aGlzLCBpZCkuZWFzZSA9IHY7CiAgICB9OwogIH0KICBmdW5jdGlvbiB0cmFuc2l0aW9uX2Vhc2VWYXJ5aW5nICh2YWx1ZSkgewogICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gImZ1bmN0aW9uIikgdGhyb3cgbmV3IEVycm9yKCk7CiAgICByZXR1cm4gdGhpcy5lYWNoKGVhc2VWYXJ5aW5nKHRoaXMuX2lkLCB2YWx1ZSkpOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNpdGlvbl9maWx0ZXIgKG1hdGNoKSB7CiAgICBpZiAodHlwZW9mIG1hdGNoICE9PSAiZnVuY3Rpb24iKSBtYXRjaCA9IG1hdGNoZXIobWF0Y2gpOwogICAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gbmV3IEFycmF5KG0pLCBqID0gMDsgaiA8IG07ICsraikgewogICAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgc3ViZ3JvdXAgPSBzdWJncm91cHNbal0gPSBbXSwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHsKICAgICAgICBpZiAoKG5vZGUgPSBncm91cFtpXSkgJiYgbWF0Y2guY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCkpIHsKICAgICAgICAgIHN1Ymdyb3VwLnB1c2gobm9kZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gbmV3IFRyYW5zaXRpb24oc3ViZ3JvdXBzLCB0aGlzLl9wYXJlbnRzLCB0aGlzLl9uYW1lLCB0aGlzLl9pZCk7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2l0aW9uX21lcmdlICh0cmFuc2l0aW9uKSB7CiAgICBpZiAodHJhbnNpdGlvbi5faWQgIT09IHRoaXMuX2lkKSB0aHJvdyBuZXcgRXJyb3IoKTsKICAgIGZvciAodmFyIGdyb3VwczAgPSB0aGlzLl9ncm91cHMsIGdyb3VwczEgPSB0cmFuc2l0aW9uLl9ncm91cHMsIG0wID0gZ3JvdXBzMC5sZW5ndGgsIG0xID0gZ3JvdXBzMS5sZW5ndGgsIG0gPSBNYXRoLm1pbihtMCwgbTEpLCBtZXJnZXMgPSBuZXcgQXJyYXkobTApLCBqID0gMDsgaiA8IG07ICsraikgewogICAgICBmb3IgKHZhciBncm91cDAgPSBncm91cHMwW2pdLCBncm91cDEgPSBncm91cHMxW2pdLCBuID0gZ3JvdXAwLmxlbmd0aCwgbWVyZ2UgPSBtZXJnZXNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7CiAgICAgICAgaWYgKG5vZGUgPSBncm91cDBbaV0gfHwgZ3JvdXAxW2ldKSB7CiAgICAgICAgICBtZXJnZVtpXSA9IG5vZGU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBmb3IgKDsgaiA8IG0wOyArK2opIHsKICAgICAgbWVyZ2VzW2pdID0gZ3JvdXBzMFtqXTsKICAgIH0KICAgIHJldHVybiBuZXcgVHJhbnNpdGlvbihtZXJnZXMsIHRoaXMuX3BhcmVudHMsIHRoaXMuX25hbWUsIHRoaXMuX2lkKTsKICB9CgogIGZ1bmN0aW9uIHN0YXJ0KG5hbWUpIHsKICAgIHJldHVybiAobmFtZSArICIiKS50cmltKCkuc3BsaXQoL158XHMrLykuZXZlcnkoZnVuY3Rpb24gKHQpIHsKICAgICAgdmFyIGkgPSB0LmluZGV4T2YoIi4iKTsKICAgICAgaWYgKGkgPj0gMCkgdCA9IHQuc2xpY2UoMCwgaSk7CiAgICAgIHJldHVybiAhdCB8fCB0ID09PSAic3RhcnQiOwogICAgfSk7CiAgfQogIGZ1bmN0aW9uIG9uRnVuY3Rpb24oaWQsIG5hbWUsIGxpc3RlbmVyKSB7CiAgICB2YXIgb24wLAogICAgICBvbjEsCiAgICAgIHNpdCA9IHN0YXJ0KG5hbWUpID8gaW5pdCA6IHNldDsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBzY2hlZHVsZSA9IHNpdCh0aGlzLCBpZCksCiAgICAgICAgb24gPSBzY2hlZHVsZS5vbjsKCiAgICAgIC8vIElmIHRoaXMgbm9kZSBzaGFyZWQgYSBkaXNwYXRjaCB3aXRoIHRoZSBwcmV2aW91cyBub2RlLAogICAgICAvLyBqdXN0IGFzc2lnbiB0aGUgdXBkYXRlZCBzaGFyZWQgZGlzcGF0Y2ggYW5kIHdl4oCZcmUgZG9uZSEKICAgICAgLy8gT3RoZXJ3aXNlLCBjb3B5LW9uLXdyaXRlLgogICAgICBpZiAob24gIT09IG9uMCkgKG9uMSA9IChvbjAgPSBvbikuY29weSgpKS5vbihuYW1lLCBsaXN0ZW5lcik7CiAgICAgIHNjaGVkdWxlLm9uID0gb24xOwogICAgfTsKICB9CiAgZnVuY3Rpb24gdHJhbnNpdGlvbl9vbiAobmFtZSwgbGlzdGVuZXIpIHsKICAgIHZhciBpZCA9IHRoaXMuX2lkOwogICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPCAyID8gZ2V0KHRoaXMubm9kZSgpLCBpZCkub24ub24obmFtZSkgOiB0aGlzLmVhY2gob25GdW5jdGlvbihpZCwgbmFtZSwgbGlzdGVuZXIpKTsKICB9CgogIGZ1bmN0aW9uIHJlbW92ZUZ1bmN0aW9uKGlkKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlOwogICAgICBmb3IgKHZhciBpIGluIHRoaXMuX190cmFuc2l0aW9uKSBpZiAoK2kgIT09IGlkKSByZXR1cm47CiAgICAgIGlmIChwYXJlbnQpIHBhcmVudC5yZW1vdmVDaGlsZCh0aGlzKTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIHRyYW5zaXRpb25fcmVtb3ZlICgpIHsKICAgIHJldHVybiB0aGlzLm9uKCJlbmQucmVtb3ZlIiwgcmVtb3ZlRnVuY3Rpb24odGhpcy5faWQpKTsKICB9CgogIGZ1bmN0aW9uIHRyYW5zaXRpb25fc2VsZWN0IChzZWxlY3QpIHsKICAgIHZhciBuYW1lID0gdGhpcy5fbmFtZSwKICAgICAgaWQgPSB0aGlzLl9pZDsKICAgIGlmICh0eXBlb2Ygc2VsZWN0ICE9PSAiZnVuY3Rpb24iKSBzZWxlY3QgPSBzZWxlY3RvcihzZWxlY3QpOwogICAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gbmV3IEFycmF5KG0pLCBqID0gMDsgaiA8IG07ICsraikgewogICAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgc3ViZ3JvdXAgPSBzdWJncm91cHNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIHN1Ym5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7CiAgICAgICAgaWYgKChub2RlID0gZ3JvdXBbaV0pICYmIChzdWJub2RlID0gc2VsZWN0LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKSkgewogICAgICAgICAgaWYgKCJfX2RhdGFfXyIgaW4gbm9kZSkgc3Vibm9kZS5fX2RhdGFfXyA9IG5vZGUuX19kYXRhX187CiAgICAgICAgICBzdWJncm91cFtpXSA9IHN1Ym5vZGU7CiAgICAgICAgICBzY2hlZHVsZShzdWJncm91cFtpXSwgbmFtZSwgaWQsIGksIHN1Ymdyb3VwLCBnZXQobm9kZSwgaWQpKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBuZXcgVHJhbnNpdGlvbihzdWJncm91cHMsIHRoaXMuX3BhcmVudHMsIG5hbWUsIGlkKTsKICB9CgogIGZ1bmN0aW9uIHRyYW5zaXRpb25fc2VsZWN0QWxsIChzZWxlY3QpIHsKICAgIHZhciBuYW1lID0gdGhpcy5fbmFtZSwKICAgICAgaWQgPSB0aGlzLl9pZDsKICAgIGlmICh0eXBlb2Ygc2VsZWN0ICE9PSAiZnVuY3Rpb24iKSBzZWxlY3QgPSBzZWxlY3RvckFsbChzZWxlY3QpOwogICAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gW10sIHBhcmVudHMgPSBbXSwgaiA9IDA7IGogPCBtOyArK2opIHsKICAgICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7CiAgICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkgewogICAgICAgICAgZm9yICh2YXIgY2hpbGRyZW4gPSBzZWxlY3QuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCksIGNoaWxkLCBpbmhlcml0ID0gZ2V0KG5vZGUsIGlkKSwgayA9IDAsIGwgPSBjaGlsZHJlbi5sZW5ndGg7IGsgPCBsOyArK2spIHsKICAgICAgICAgICAgaWYgKGNoaWxkID0gY2hpbGRyZW5ba10pIHsKICAgICAgICAgICAgICBzY2hlZHVsZShjaGlsZCwgbmFtZSwgaWQsIGssIGNoaWxkcmVuLCBpbmhlcml0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgc3ViZ3JvdXBzLnB1c2goY2hpbGRyZW4pOwogICAgICAgICAgcGFyZW50cy5wdXNoKG5vZGUpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIG5ldyBUcmFuc2l0aW9uKHN1Ymdyb3VwcywgcGFyZW50cywgbmFtZSwgaWQpOwogIH0KCiAgdmFyIFNlbGVjdGlvbiA9IHNlbGVjdGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3I7CiAgZnVuY3Rpb24gdHJhbnNpdGlvbl9zZWxlY3Rpb24gKCkgewogICAgcmV0dXJuIG5ldyBTZWxlY3Rpb24odGhpcy5fZ3JvdXBzLCB0aGlzLl9wYXJlbnRzKTsKICB9CgogIGZ1bmN0aW9uIHN0eWxlTnVsbChuYW1lLCBpbnRlcnBvbGF0ZSkgewogICAgdmFyIHN0cmluZzAwLCBzdHJpbmcxMCwgaW50ZXJwb2xhdGUwOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHN0cmluZzAgPSBzdHlsZVZhbHVlKHRoaXMsIG5hbWUpLAogICAgICAgIHN0cmluZzEgPSAodGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShuYW1lKSwgc3R5bGVWYWx1ZSh0aGlzLCBuYW1lKSk7CiAgICAgIHJldHVybiBzdHJpbmcwID09PSBzdHJpbmcxID8gbnVsbCA6IHN0cmluZzAgPT09IHN0cmluZzAwICYmIHN0cmluZzEgPT09IHN0cmluZzEwID8gaW50ZXJwb2xhdGUwIDogaW50ZXJwb2xhdGUwID0gaW50ZXJwb2xhdGUoc3RyaW5nMDAgPSBzdHJpbmcwLCBzdHJpbmcxMCA9IHN0cmluZzEpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gc3R5bGVSZW1vdmUobmFtZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShuYW1lKTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIHN0eWxlQ29uc3RhbnQobmFtZSwgaW50ZXJwb2xhdGUsIHZhbHVlMSkgewogICAgdmFyIHN0cmluZzAwLAogICAgICBzdHJpbmcxID0gdmFsdWUxICsgIiIsCiAgICAgIGludGVycG9sYXRlMDsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBzdHJpbmcwID0gc3R5bGVWYWx1ZSh0aGlzLCBuYW1lKTsKICAgICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgPyBpbnRlcnBvbGF0ZTAgOiBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHZhbHVlMSk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBzdHlsZUZ1bmN0aW9uKG5hbWUsIGludGVycG9sYXRlLCB2YWx1ZSkgewogICAgdmFyIHN0cmluZzAwLCBzdHJpbmcxMCwgaW50ZXJwb2xhdGUwOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHN0cmluZzAgPSBzdHlsZVZhbHVlKHRoaXMsIG5hbWUpLAogICAgICAgIHZhbHVlMSA9IHZhbHVlKHRoaXMpLAogICAgICAgIHN0cmluZzEgPSB2YWx1ZTEgKyAiIjsKICAgICAgaWYgKHZhbHVlMSA9PSBudWxsKSBzdHJpbmcxID0gdmFsdWUxID0gKHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkobmFtZSksIHN0eWxlVmFsdWUodGhpcywgbmFtZSkpOwogICAgICByZXR1cm4gc3RyaW5nMCA9PT0gc3RyaW5nMSA/IG51bGwgOiBzdHJpbmcwID09PSBzdHJpbmcwMCAmJiBzdHJpbmcxID09PSBzdHJpbmcxMCA/IGludGVycG9sYXRlMCA6IChzdHJpbmcxMCA9IHN0cmluZzEsIGludGVycG9sYXRlMCA9IGludGVycG9sYXRlKHN0cmluZzAwID0gc3RyaW5nMCwgdmFsdWUxKSk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBzdHlsZU1heWJlUmVtb3ZlKGlkLCBuYW1lKSB7CiAgICB2YXIgb24wLAogICAgICBvbjEsCiAgICAgIGxpc3RlbmVyMCwKICAgICAga2V5ID0gInN0eWxlLiIgKyBuYW1lLAogICAgICBldmVudCA9ICJlbmQuIiArIGtleSwKICAgICAgcmVtb3ZlOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHNjaGVkdWxlID0gc2V0KHRoaXMsIGlkKSwKICAgICAgICBvbiA9IHNjaGVkdWxlLm9uLAogICAgICAgIGxpc3RlbmVyID0gc2NoZWR1bGUudmFsdWVba2V5XSA9PSBudWxsID8gcmVtb3ZlIHx8IChyZW1vdmUgPSBzdHlsZVJlbW92ZShuYW1lKSkgOiB1bmRlZmluZWQ7CgogICAgICAvLyBJZiB0aGlzIG5vZGUgc2hhcmVkIGEgZGlzcGF0Y2ggd2l0aCB0aGUgcHJldmlvdXMgbm9kZSwKICAgICAgLy8ganVzdCBhc3NpZ24gdGhlIHVwZGF0ZWQgc2hhcmVkIGRpc3BhdGNoIGFuZCB3ZeKAmXJlIGRvbmUhCiAgICAgIC8vIE90aGVyd2lzZSwgY29weS1vbi13cml0ZS4KICAgICAgaWYgKG9uICE9PSBvbjAgfHwgbGlzdGVuZXIwICE9PSBsaXN0ZW5lcikgKG9uMSA9IChvbjAgPSBvbikuY29weSgpKS5vbihldmVudCwgbGlzdGVuZXIwID0gbGlzdGVuZXIpOwogICAgICBzY2hlZHVsZS5vbiA9IG9uMTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIHRyYW5zaXRpb25fc3R5bGUgKG5hbWUsIHZhbHVlLCBwcmlvcml0eSkgewogICAgdmFyIGkgPSAobmFtZSArPSAiIikgPT09ICJ0cmFuc2Zvcm0iID8gaW50ZXJwb2xhdGVUcmFuc2Zvcm1Dc3MgOiBpbnRlcnBvbGF0ZTsKICAgIHJldHVybiB2YWx1ZSA9PSBudWxsID8gdGhpcy5zdHlsZVR3ZWVuKG5hbWUsIHN0eWxlTnVsbChuYW1lLCBpKSkub24oImVuZC5zdHlsZS4iICsgbmFtZSwgc3R5bGVSZW1vdmUobmFtZSkpIDogdHlwZW9mIHZhbHVlID09PSAiZnVuY3Rpb24iID8gdGhpcy5zdHlsZVR3ZWVuKG5hbWUsIHN0eWxlRnVuY3Rpb24obmFtZSwgaSwgdHdlZW5WYWx1ZSh0aGlzLCAic3R5bGUuIiArIG5hbWUsIHZhbHVlKSkpLmVhY2goc3R5bGVNYXliZVJlbW92ZSh0aGlzLl9pZCwgbmFtZSkpIDogdGhpcy5zdHlsZVR3ZWVuKG5hbWUsIHN0eWxlQ29uc3RhbnQobmFtZSwgaSwgdmFsdWUpLCBwcmlvcml0eSkub24oImVuZC5zdHlsZS4iICsgbmFtZSwgbnVsbCk7CiAgfQoKICBmdW5jdGlvbiBzdHlsZUludGVycG9sYXRlKG5hbWUsIGksIHByaW9yaXR5KSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKHQpIHsKICAgICAgdGhpcy5zdHlsZS5zZXRQcm9wZXJ0eShuYW1lLCBpLmNhbGwodGhpcywgdCksIHByaW9yaXR5KTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIHN0eWxlVHdlZW4obmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7CiAgICB2YXIgdCwgaTA7CiAgICBmdW5jdGlvbiB0d2VlbigpIHsKICAgICAgdmFyIGkgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICBpZiAoaSAhPT0gaTApIHQgPSAoaTAgPSBpKSAmJiBzdHlsZUludGVycG9sYXRlKG5hbWUsIGksIHByaW9yaXR5KTsKICAgICAgcmV0dXJuIHQ7CiAgICB9CiAgICB0d2Vlbi5fdmFsdWUgPSB2YWx1ZTsKICAgIHJldHVybiB0d2VlbjsKICB9CiAgZnVuY3Rpb24gdHJhbnNpdGlvbl9zdHlsZVR3ZWVuIChuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpIHsKICAgIHZhciBrZXkgPSAic3R5bGUuIiArIChuYW1lICs9ICIiKTsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikgcmV0dXJuIChrZXkgPSB0aGlzLnR3ZWVuKGtleSkpICYmIGtleS5fdmFsdWU7CiAgICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIHRoaXMudHdlZW4oa2V5LCBudWxsKTsKICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICJmdW5jdGlvbiIpIHRocm93IG5ldyBFcnJvcigpOwogICAgcmV0dXJuIHRoaXMudHdlZW4oa2V5LCBzdHlsZVR3ZWVuKG5hbWUsIHZhbHVlLCBwcmlvcml0eSA9PSBudWxsID8gIiIgOiBwcmlvcml0eSkpOwogIH0KCiAgZnVuY3Rpb24gdGV4dENvbnN0YW50KHZhbHVlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB0aGlzLnRleHRDb250ZW50ID0gdmFsdWU7CiAgICB9OwogIH0KICBmdW5jdGlvbiB0ZXh0RnVuY3Rpb24odmFsdWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB2YWx1ZTEgPSB2YWx1ZSh0aGlzKTsKICAgICAgdGhpcy50ZXh0Q29udGVudCA9IHZhbHVlMSA9PSBudWxsID8gIiIgOiB2YWx1ZTE7CiAgICB9OwogIH0KICBmdW5jdGlvbiB0cmFuc2l0aW9uX3RleHQgKHZhbHVlKSB7CiAgICByZXR1cm4gdGhpcy50d2VlbigidGV4dCIsIHR5cGVvZiB2YWx1ZSA9PT0gImZ1bmN0aW9uIiA/IHRleHRGdW5jdGlvbih0d2VlblZhbHVlKHRoaXMsICJ0ZXh0IiwgdmFsdWUpKSA6IHRleHRDb25zdGFudCh2YWx1ZSA9PSBudWxsID8gIiIgOiB2YWx1ZSArICIiKSk7CiAgfQoKICBmdW5jdGlvbiB0ZXh0SW50ZXJwb2xhdGUoaSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICh0KSB7CiAgICAgIHRoaXMudGV4dENvbnRlbnQgPSBpLmNhbGwodGhpcywgdCk7CiAgICB9OwogIH0KICBmdW5jdGlvbiB0ZXh0VHdlZW4odmFsdWUpIHsKICAgIHZhciB0MCwgaTA7CiAgICBmdW5jdGlvbiB0d2VlbigpIHsKICAgICAgdmFyIGkgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICBpZiAoaSAhPT0gaTApIHQwID0gKGkwID0gaSkgJiYgdGV4dEludGVycG9sYXRlKGkpOwogICAgICByZXR1cm4gdDA7CiAgICB9CiAgICB0d2Vlbi5fdmFsdWUgPSB2YWx1ZTsKICAgIHJldHVybiB0d2VlbjsKICB9CiAgZnVuY3Rpb24gdHJhbnNpdGlvbl90ZXh0VHdlZW4gKHZhbHVlKSB7CiAgICB2YXIga2V5ID0gInRleHQiOwogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAxKSByZXR1cm4gKGtleSA9IHRoaXMudHdlZW4oa2V5KSkgJiYga2V5Ll92YWx1ZTsKICAgIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gdGhpcy50d2VlbihrZXksIG51bGwpOwogICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gImZ1bmN0aW9uIikgdGhyb3cgbmV3IEVycm9yKCk7CiAgICByZXR1cm4gdGhpcy50d2VlbihrZXksIHRleHRUd2Vlbih2YWx1ZSkpOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNpdGlvbl90cmFuc2l0aW9uICgpIHsKICAgIHZhciBuYW1lID0gdGhpcy5fbmFtZSwKICAgICAgaWQwID0gdGhpcy5faWQsCiAgICAgIGlkMSA9IG5ld0lkKCk7CiAgICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBqID0gMDsgaiA8IG07ICsraikgewogICAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHsKICAgICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7CiAgICAgICAgICB2YXIgaW5oZXJpdCA9IGdldChub2RlLCBpZDApOwogICAgICAgICAgc2NoZWR1bGUobm9kZSwgbmFtZSwgaWQxLCBpLCBncm91cCwgewogICAgICAgICAgICB0aW1lOiBpbmhlcml0LnRpbWUgKyBpbmhlcml0LmRlbGF5ICsgaW5oZXJpdC5kdXJhdGlvbiwKICAgICAgICAgICAgZGVsYXk6IDAsCiAgICAgICAgICAgIGR1cmF0aW9uOiBpbmhlcml0LmR1cmF0aW9uLAogICAgICAgICAgICBlYXNlOiBpbmhlcml0LmVhc2UKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIG5ldyBUcmFuc2l0aW9uKGdyb3VwcywgdGhpcy5fcGFyZW50cywgbmFtZSwgaWQxKTsKICB9CgogIGZ1bmN0aW9uIHRyYW5zaXRpb25fZW5kICgpIHsKICAgIHZhciBvbjAsCiAgICAgIG9uMSwKICAgICAgdGhhdCA9IHRoaXMsCiAgICAgIGlkID0gdGhhdC5faWQsCiAgICAgIHNpemUgPSB0aGF0LnNpemUoKTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHZhciBjYW5jZWwgPSB7CiAgICAgICAgICB2YWx1ZTogcmVqZWN0CiAgICAgICAgfSwKICAgICAgICBlbmQgPSB7CiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoLS1zaXplID09PSAwKSByZXNvbHZlKCk7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgdGhhdC5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgc2NoZWR1bGUgPSBzZXQodGhpcywgaWQpLAogICAgICAgICAgb24gPSBzY2hlZHVsZS5vbjsKCiAgICAgICAgLy8gSWYgdGhpcyBub2RlIHNoYXJlZCBhIGRpc3BhdGNoIHdpdGggdGhlIHByZXZpb3VzIG5vZGUsCiAgICAgICAgLy8ganVzdCBhc3NpZ24gdGhlIHVwZGF0ZWQgc2hhcmVkIGRpc3BhdGNoIGFuZCB3ZeKAmXJlIGRvbmUhCiAgICAgICAgLy8gT3RoZXJ3aXNlLCBjb3B5LW9uLXdyaXRlLgogICAgICAgIGlmIChvbiAhPT0gb24wKSB7CiAgICAgICAgICBvbjEgPSAob24wID0gb24pLmNvcHkoKTsKICAgICAgICAgIG9uMS5fLmNhbmNlbC5wdXNoKGNhbmNlbCk7CiAgICAgICAgICBvbjEuXy5pbnRlcnJ1cHQucHVzaChjYW5jZWwpOwogICAgICAgICAgb24xLl8uZW5kLnB1c2goZW5kKTsKICAgICAgICB9CiAgICAgICAgc2NoZWR1bGUub24gPSBvbjE7CiAgICAgIH0pOwoKICAgICAgLy8gVGhlIHNlbGVjdGlvbiB3YXMgZW1wdHksIHJlc29sdmUgZW5kIGltbWVkaWF0ZWx5CiAgICAgIGlmIChzaXplID09PSAwKSByZXNvbHZlKCk7CiAgICB9KTsKICB9CgogIHZhciBpZCA9IDA7CiAgZnVuY3Rpb24gVHJhbnNpdGlvbihncm91cHMsIHBhcmVudHMsIG5hbWUsIGlkKSB7CiAgICB0aGlzLl9ncm91cHMgPSBncm91cHM7CiAgICB0aGlzLl9wYXJlbnRzID0gcGFyZW50czsKICAgIHRoaXMuX25hbWUgPSBuYW1lOwogICAgdGhpcy5faWQgPSBpZDsKICB9CiAgZnVuY3Rpb24gbmV3SWQoKSB7CiAgICByZXR1cm4gKytpZDsKICB9CiAgdmFyIHNlbGVjdGlvbl9wcm90b3R5cGUgPSBzZWxlY3Rpb24ucHJvdG90eXBlOwogIFRyYW5zaXRpb24ucHJvdG90eXBlID0gewogICAgY29uc3RydWN0b3I6IFRyYW5zaXRpb24sCiAgICBzZWxlY3Q6IHRyYW5zaXRpb25fc2VsZWN0LAogICAgc2VsZWN0QWxsOiB0cmFuc2l0aW9uX3NlbGVjdEFsbCwKICAgIHNlbGVjdENoaWxkOiBzZWxlY3Rpb25fcHJvdG90eXBlLnNlbGVjdENoaWxkLAogICAgc2VsZWN0Q2hpbGRyZW46IHNlbGVjdGlvbl9wcm90b3R5cGUuc2VsZWN0Q2hpbGRyZW4sCiAgICBmaWx0ZXI6IHRyYW5zaXRpb25fZmlsdGVyLAogICAgbWVyZ2U6IHRyYW5zaXRpb25fbWVyZ2UsCiAgICBzZWxlY3Rpb246IHRyYW5zaXRpb25fc2VsZWN0aW9uLAogICAgdHJhbnNpdGlvbjogdHJhbnNpdGlvbl90cmFuc2l0aW9uLAogICAgY2FsbDogc2VsZWN0aW9uX3Byb3RvdHlwZS5jYWxsLAogICAgbm9kZXM6IHNlbGVjdGlvbl9wcm90b3R5cGUubm9kZXMsCiAgICBub2RlOiBzZWxlY3Rpb25fcHJvdG90eXBlLm5vZGUsCiAgICBzaXplOiBzZWxlY3Rpb25fcHJvdG90eXBlLnNpemUsCiAgICBlbXB0eTogc2VsZWN0aW9uX3Byb3RvdHlwZS5lbXB0eSwKICAgIGVhY2g6IHNlbGVjdGlvbl9wcm90b3R5cGUuZWFjaCwKICAgIG9uOiB0cmFuc2l0aW9uX29uLAogICAgYXR0cjogdHJhbnNpdGlvbl9hdHRyLAogICAgYXR0clR3ZWVuOiB0cmFuc2l0aW9uX2F0dHJUd2VlbiwKICAgIHN0eWxlOiB0cmFuc2l0aW9uX3N0eWxlLAogICAgc3R5bGVUd2VlbjogdHJhbnNpdGlvbl9zdHlsZVR3ZWVuLAogICAgdGV4dDogdHJhbnNpdGlvbl90ZXh0LAogICAgdGV4dFR3ZWVuOiB0cmFuc2l0aW9uX3RleHRUd2VlbiwKICAgIHJlbW92ZTogdHJhbnNpdGlvbl9yZW1vdmUsCiAgICB0d2VlbjogdHJhbnNpdGlvbl90d2VlbiwKICAgIGRlbGF5OiB0cmFuc2l0aW9uX2RlbGF5LAogICAgZHVyYXRpb246IHRyYW5zaXRpb25fZHVyYXRpb24sCiAgICBlYXNlOiB0cmFuc2l0aW9uX2Vhc2UsCiAgICBlYXNlVmFyeWluZzogdHJhbnNpdGlvbl9lYXNlVmFyeWluZywKICAgIGVuZDogdHJhbnNpdGlvbl9lbmQsCiAgICBbU3ltYm9sLml0ZXJhdG9yXTogc2VsZWN0aW9uX3Byb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdCiAgfTsKCiAgZnVuY3Rpb24gY3ViaWNJbk91dCh0KSB7CiAgICByZXR1cm4gKCh0ICo9IDIpIDw9IDEgPyB0ICogdCAqIHQgOiAodCAtPSAyKSAqIHQgKiB0ICsgMikgLyAyOwogIH0KCiAgdmFyIGRlZmF1bHRUaW1pbmcgPSB7CiAgICB0aW1lOiBudWxsLAogICAgLy8gU2V0IG9uIHVzZS4KICAgIGRlbGF5OiAwLAogICAgZHVyYXRpb246IDI1MCwKICAgIGVhc2U6IGN1YmljSW5PdXQKICB9OwogIGZ1bmN0aW9uIGluaGVyaXQobm9kZSwgaWQpIHsKICAgIHZhciB0aW1pbmc7CiAgICB3aGlsZSAoISh0aW1pbmcgPSBub2RlLl9fdHJhbnNpdGlvbikgfHwgISh0aW1pbmcgPSB0aW1pbmdbaWRdKSkgewogICAgICBpZiAoIShub2RlID0gbm9kZS5wYXJlbnROb2RlKSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgdHJhbnNpdGlvbiAke2lkfSBub3QgZm91bmRgKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHRpbWluZzsKICB9CiAgZnVuY3Rpb24gc2VsZWN0aW9uX3RyYW5zaXRpb24gKG5hbWUpIHsKICAgIHZhciBpZCwgdGltaW5nOwogICAgaWYgKG5hbWUgaW5zdGFuY2VvZiBUcmFuc2l0aW9uKSB7CiAgICAgIGlkID0gbmFtZS5faWQsIG5hbWUgPSBuYW1lLl9uYW1lOwogICAgfSBlbHNlIHsKICAgICAgaWQgPSBuZXdJZCgpLCAodGltaW5nID0gZGVmYXVsdFRpbWluZykudGltZSA9IG5vdygpLCBuYW1lID0gbmFtZSA9PSBudWxsID8gbnVsbCA6IG5hbWUgKyAiIjsKICAgIH0KICAgIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIGogPSAwOyBqIDwgbTsgKytqKSB7CiAgICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBuID0gZ3JvdXAubGVuZ3RoLCBub2RlLCBpID0gMDsgaSA8IG47ICsraSkgewogICAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHsKICAgICAgICAgIHNjaGVkdWxlKG5vZGUsIG5hbWUsIGlkLCBpLCBncm91cCwgdGltaW5nIHx8IGluaGVyaXQobm9kZSwgaWQpKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBuZXcgVHJhbnNpdGlvbihncm91cHMsIHRoaXMuX3BhcmVudHMsIG5hbWUsIGlkKTsKICB9CgogIHNlbGVjdGlvbi5wcm90b3R5cGUuaW50ZXJydXB0ID0gc2VsZWN0aW9uX2ludGVycnVwdDsKICBzZWxlY3Rpb24ucHJvdG90eXBlLnRyYW5zaXRpb24gPSBzZWxlY3Rpb25fdHJhbnNpdGlvbjsKCiAgZnVuY3Rpb24gVHJhbnNmb3JtKGssIHgsIHkpIHsKICAgIHRoaXMuayA9IGs7CiAgICB0aGlzLnggPSB4OwogICAgdGhpcy55ID0geTsKICB9CiAgVHJhbnNmb3JtLnByb3RvdHlwZSA9IHsKICAgIGNvbnN0cnVjdG9yOiBUcmFuc2Zvcm0sCiAgICBzY2FsZTogZnVuY3Rpb24gKGspIHsKICAgICAgcmV0dXJuIGsgPT09IDEgPyB0aGlzIDogbmV3IFRyYW5zZm9ybSh0aGlzLmsgKiBrLCB0aGlzLngsIHRoaXMueSk7CiAgICB9LAogICAgdHJhbnNsYXRlOiBmdW5jdGlvbiAoeCwgeSkgewogICAgICByZXR1cm4geCA9PT0gMCAmIHkgPT09IDAgPyB0aGlzIDogbmV3IFRyYW5zZm9ybSh0aGlzLmssIHRoaXMueCArIHRoaXMuayAqIHgsIHRoaXMueSArIHRoaXMuayAqIHkpOwogICAgfSwKICAgIGFwcGx5OiBmdW5jdGlvbiAocG9pbnQpIHsKICAgICAgcmV0dXJuIFtwb2ludFswXSAqIHRoaXMuayArIHRoaXMueCwgcG9pbnRbMV0gKiB0aGlzLmsgKyB0aGlzLnldOwogICAgfSwKICAgIGFwcGx5WDogZnVuY3Rpb24gKHgpIHsKICAgICAgcmV0dXJuIHggKiB0aGlzLmsgKyB0aGlzLng7CiAgICB9LAogICAgYXBwbHlZOiBmdW5jdGlvbiAoeSkgewogICAgICByZXR1cm4geSAqIHRoaXMuayArIHRoaXMueTsKICAgIH0sCiAgICBpbnZlcnQ6IGZ1bmN0aW9uIChsb2NhdGlvbikgewogICAgICByZXR1cm4gWyhsb2NhdGlvblswXSAtIHRoaXMueCkgLyB0aGlzLmssIChsb2NhdGlvblsxXSAtIHRoaXMueSkgLyB0aGlzLmtdOwogICAgfSwKICAgIGludmVydFg6IGZ1bmN0aW9uICh4KSB7CiAgICAgIHJldHVybiAoeCAtIHRoaXMueCkgLyB0aGlzLms7CiAgICB9LAogICAgaW52ZXJ0WTogZnVuY3Rpb24gKHkpIHsKICAgICAgcmV0dXJuICh5IC0gdGhpcy55KSAvIHRoaXMuazsKICAgIH0sCiAgICByZXNjYWxlWDogZnVuY3Rpb24gKHgpIHsKICAgICAgcmV0dXJuIHguY29weSgpLmRvbWFpbih4LnJhbmdlKCkubWFwKHRoaXMuaW52ZXJ0WCwgdGhpcykubWFwKHguaW52ZXJ0LCB4KSk7CiAgICB9LAogICAgcmVzY2FsZVk6IGZ1bmN0aW9uICh5KSB7CiAgICAgIHJldHVybiB5LmNvcHkoKS5kb21haW4oeS5yYW5nZSgpLm1hcCh0aGlzLmludmVydFksIHRoaXMpLm1hcCh5LmludmVydCwgeSkpOwogICAgfSwKICAgIHRvU3RyaW5nOiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAidHJhbnNsYXRlKCIgKyB0aGlzLnggKyAiLCIgKyB0aGlzLnkgKyAiKSBzY2FsZSgiICsgdGhpcy5rICsgIikiOwogICAgfQogIH07CiAgVHJhbnNmb3JtLnByb3RvdHlwZTsKCiAgLyoKICAgIENQVE1hdGggU3RhdGljIENsYXNzIC0gTm90IGludGVuZGVkIGZvciBpbnN0YW50aWF0aW9uIQoKICAgIE1vZGVsIFBhcmFtZXRlcnM6CiAgICAgIGEgPSBhbHBoYSAoY3VydmF0dXJlIGZvciB2YWx1ZSBmdW5jdGlvbikKICAgICAgbCA9IGxhbWJkYSAobG9zcyBhdmVyc2lvbiBmb3IgdmFsdWUgZnVuY3Rpb24pCiAgICAgIGcgPSBnYW1tYSAoc2Vuc2l0aXZpdHkgZm9yIGRlY2lzaW9uIHdlaWdodGluZyBmdW5jdGlvbikKCiAgICBWYXJpYWJsZXM6CiAgICAgIHggPSBvYmplY3RpdmUgdmFsdWUKICAgICAgdiA9IHN1YmplY3RpdmUgdmFsdWUKICAgICAgcCA9IG9iamVjdGl2ZSBwcm9iYWJpbGl0eQogICAgICB3ID0gc3ViamVjdGl2ZSBwcm9iYWJpbGl0eS9kZWNpc2lvbiB3ZWlnaHQKICAgICAgdSA9IHN1YmplY3RpdmUgdXRpbGl0eQoKICAgIEVxdWF0aW9uczoKICAgICAgdiA9IGlmICh4ID49IDApIHheYTsgaWYgKHggPCAwKSAtbCAqICgteCleYQogICAgICBhID0gaWYgKHggPj0gMCkgbG9nKHYpIC8gbG9nKHgpOyBpZiAoeCA8IDApIChsb2coLXYpIC0gbG9nKGwpKSAvIGxvZygteCkKICAgICAgbCA9IGlmICh4ID49IDApIDE7IGlmICh4IDwgMCkgLXYgLyAoLXgpXmEKCiAgICAgIHcgPSBwXmcgLyAocF5nICsgKDEgLSBwKV5nKV4oMSAvIGcpCgogICAgICB1ID0gU3VtX24odl9uICogd19uKQogICovCiAgY2xhc3MgQ1BUTWF0aCB7CiAgICBzdGF0aWMgYSA9IHsKICAgICAgREVGQVVMVDogMC41LAogICAgICBNSU46IDAuMCwKICAgICAgTUFYOiAxLjAsCiAgICAgIFNURVA6IDAuMDEsCiAgICAgIEpVTVA6IDAuMDUKICAgIH07CiAgICBzdGF0aWMgbCA9IHsKICAgICAgREVGQVVMVDogMi4wLAogICAgICBNSU46IDAuMCwKICAgICAgTUFYOiAxMC4wLAogICAgICBTVEVQOiAwLjAxLAogICAgICBKVU1QOiAwLjA1CiAgICB9OwogICAgc3RhdGljIGcgPSB7CiAgICAgIERFRkFVTFQ6IDAuNSwKICAgICAgTUlOOiAwLjAsCiAgICAgIE1BWDogMS4wLAogICAgICBTVEVQOiAwLjAxLAogICAgICBKVU1QOiAwLjA1CiAgICB9OwogICAgc3RhdGljIHhhbDJ2KHgsIGEsIGwpIHsKICAgICAgaWYgKHggPj0gMCkgewogICAgICAgIHJldHVybiB4ICoqIGE7CiAgICAgIH0KICAgICAgLy8gZWxzZSAoeCA8IDApCiAgICAgIHJldHVybiAtbCAqICgteCkgKiogYTsKICAgIH0KICAgIHN0YXRpYyB4bHYyYSh4LCBsLCB2KSB7CiAgICAgIGlmICh4ID49IDApIHsKICAgICAgICByZXR1cm4gTWF0aC5sb2codikgLyBNYXRoLmxvZyh4KTsKICAgICAgfQogICAgICAvLyBlbHNlICh4IDwgMCkKICAgICAgcmV0dXJuIChNYXRoLmxvZygtdikgLSBNYXRoLmxvZyhsKSkgLyBNYXRoLmxvZygteCk7CiAgICB9CiAgICBzdGF0aWMgeGF2MmwoeCwgYSwgdikgewogICAgICBpZiAoeCA+PSAwKSB7CiAgICAgICAgcmV0dXJuIE5hTjsKICAgICAgfQogICAgICAvLyBlbHNlICh4IDwgMCkKICAgICAgcmV0dXJuIC12IC8gKC14KSAqKiBhOwogICAgfQogICAgc3RhdGljIHBnMncocCwgZykgewogICAgICByZXR1cm4gcCAqKiBnIC8gKHAgKiogZyArICgxIC0gcCkgKiogZykgKiogKDEgLyBnKTsKICAgIH0KICAgIHN0YXRpYyB2dzJ1KHYsIHcpIHsKICAgICAgLy8gTnVtYmVycwogICAgICBpZiAodHlwZW9mIHYgPT09ICdudW1iZXInICYmIHR5cGVvZiB3ID09PSAnbnVtYmVyJykgewogICAgICAgIHJldHVybiB2ICogdzsKICAgICAgfQogICAgICAvLyBBcnJheXMKICAgICAgaWYgKHYgaW5zdGFuY2VvZiBBcnJheSAmJiB3IGluc3RhbmNlb2YgQXJyYXkgJiYgdi5sZW5ndGggPiAwICYmIHYubGVuZ3RoID09PSB3Lmxlbmd0aCkgewogICAgICAgIGxldCB1ID0gMDsKICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHYubGVuZ3RoOyBuICs9IDEpIHsKICAgICAgICAgIHUgKz0gdltuXSAqIHdbbl07CiAgICAgICAgfQogICAgICAgIHJldHVybiB1OwogICAgICB9CiAgICAgIC8vIE90aGVyd2lzZQogICAgICByZXR1cm4gTmFOOwogICAgfQogIH0KCiAgLy8gSW50ZXJuYWwgZGVwZW5kZW5jaWVzCgogIC8qIGVzbGludCBuby1yZXN0cmljdGVkLWdsb2JhbHM6IFsib2ZmIiwgInNlbGYiXSAqLwoKICBzZWxmLm9ubWVzc2FnZSA9IGV2ZW50ID0+IHsKICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgYWxwaGE6IHsKICAgICAgICB0eXBlOiAncmVhbCcsCiAgICAgICAgbG93ZXI6IENQVE1hdGguYS5NSU4sCiAgICAgICAgdXBwZXI6IENQVE1hdGguYS5NQVgKICAgICAgfSwKICAgICAgbGFtYmRhOiB7CiAgICAgICAgdHlwZTogJ3JlYWwnLAogICAgICAgIGxvd2VyOiBDUFRNYXRoLmwuTUlOLAogICAgICAgIHVwcGVyOiBDUFRNYXRoLmwuTUFYCiAgICAgIH0sCiAgICAgIGdhbW1hOiB7CiAgICAgICAgdHlwZTogJ3JlYWwnLAogICAgICAgIGxvd2VyOiBDUFRNYXRoLmcuTUlOLAogICAgICAgIHVwcGVyOiBDUFRNYXRoLmcuTUFYCiAgICAgIH0sCiAgICAgIGx1Y2U6IHsKICAgICAgICB0eXBlOiAncmVhbCcsCiAgICAgICAgbG93ZXI6IDAsCiAgICAgICAgdXBwZXI6IDEwMAogICAgICB9CiAgICB9OwogICAgY29uc3QgbG9nUG9zdCA9IChzdGF0ZSwgZGF0YSkgPT4gewogICAgICBsZXQgbHAgPSAwOwoKICAgICAgLy8gUHJpb3JzCiAgICAgIGNvbnN0IGFscGhhTWVhbiA9IDAuNTsKICAgICAgY29uc3QgYWxwaGFTYW1wbGVTaXplID0gMi41OwogICAgICBscCArPSBkaXN0cmlidXRpb25zRXhwb3J0cy5iZXRhKHN0YXRlLmFscGhhLCBhbHBoYU1lYW4gKiBhbHBoYVNhbXBsZVNpemUsICgxIC0gYWxwaGFNZWFuKSAqIGFscGhhU2FtcGxlU2l6ZSk7CiAgICAgIC8vIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy51bmlmKHN0YXRlLmFscGhhLCAwLCAxKTsKCiAgICAgIGNvbnN0IGxhbWJkYU1lYW4gPSAyOwogICAgICBjb25zdCBsYW1iZGFTaGFwZSA9IDM7CiAgICAgIGxwICs9IGRpc3RyaWJ1dGlvbnNFeHBvcnRzLmdhbW1hKHN0YXRlLmxhbWJkYSwgbGFtYmRhU2hhcGUsIGxhbWJkYVNoYXBlIC8gbGFtYmRhTWVhbik7CiAgICAgIC8vIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy51bmlmKHN0YXRlLmxhbWJkYSwgMCwgMTApOwoKICAgICAgY29uc3QgZ2FtbWFNZWFuID0gMC41OwogICAgICBjb25zdCBnYW1tYVNhbXBsZVNpemUgPSAyLjU7CiAgICAgIGxwICs9IGRpc3RyaWJ1dGlvbnNFeHBvcnRzLmJldGEoc3RhdGUuZ2FtbWEsIGdhbW1hTWVhbiAqIGdhbW1hU2FtcGxlU2l6ZSwgKDEgLSBnYW1tYU1lYW4pICogZ2FtbWFTYW1wbGVTaXplKTsKICAgICAgLy8gbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLnVuaWYoc3RhdGUuZ2FtbWEsIDAsIDEpOwoKICAgICAgY29uc3QgbHVjZU1lYW4gPSAyOwogICAgICBjb25zdCBsdWNlU2hhcGUgPSAzOwogICAgICBscCArPSBkaXN0cmlidXRpb25zRXhwb3J0cy5nYW1tYShzdGF0ZS5sdWNlLCBsdWNlU2hhcGUsIGx1Y2VTaGFwZSAvIGx1Y2VNZWFuKTsKICAgICAgLy8gbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLnVuaWYoc3RhdGUubHVjZSwgMCwgMTAwKTsKCiAgICAgIC8vIExpa2VsaWhvb2QKICAgICAgZGF0YS5mb3JFYWNoKGNob2ljZSA9PiB7CiAgICAgICAgLy8gVmFsdWVzCiAgICAgICAgY29uc3QgdmwgPSBDUFRNYXRoLnhhbDJ2KGNob2ljZS54bCwgc3RhdGUuYWxwaGEsIHN0YXRlLmxhbWJkYSk7CiAgICAgICAgY29uc3QgdncgPSBDUFRNYXRoLnhhbDJ2KGNob2ljZS54dywgc3RhdGUuYWxwaGEsIHN0YXRlLmxhbWJkYSk7CiAgICAgICAgY29uc3QgdnMgPSBDUFRNYXRoLnhhbDJ2KGNob2ljZS54cywgc3RhdGUuYWxwaGEsIHN0YXRlLmxhbWJkYSk7CgogICAgICAgIC8vIFByb2JhYmlsaXRpZXMKICAgICAgICBjb25zdCB3dyA9IENQVE1hdGgucGcydyhjaG9pY2UucHcsIHN0YXRlLmdhbW1hKTsKICAgICAgICBjb25zdCB3bCA9IDEgLSB3dzsKCiAgICAgICAgLy8gVXRpbGl0aWVzCiAgICAgICAgY29uc3QgdWcgPSB3bCAqIHZsICsgd3cgKiB2dzsKICAgICAgICBjb25zdCB1cyA9IHZzOwoKICAgICAgICAvLyBDaG9pY2Ugb2YgZ2FtYmxlIG9yIHN1cmUgaXMgc2FtcGxlZCBmcm9tIGEgQmVybm91bGxpIGRpc3RyaWJ1dGlvbgogICAgICAgIC8vIEx1Y2UgY2hvaWNlIHJ1bGUgaXMgdXNlZCB0byBjb21wdXRlIHByb2JhYmlsaXR5IG9mIGdhbWJsaW5nISAoMCA9IHN1cmUsIDEgPSBnYW1ibGUpCiAgICAgICAgY29uc3QgYmludmFsID0gMSAvICgxICsgTWF0aC5leHAoc3RhdGUubHVjZSAqICh1cyAtIHVnKSkpOwoKICAgICAgICAvLyBBY3R1YWwgcmVzcG9uc2UKICAgICAgICBjb25zdCByZXNwb25zZSA9IGNob2ljZS5yZXNwb25zZSA9PT0gJ3N1cmUnID8gMCA6IDE7CiAgICAgICAgbHAgKz0gZGlzdHJpYnV0aW9uc0V4cG9ydHMuYmVybihyZXNwb25zZSwgYmludmFsKTsKICAgICAgfSk7CiAgICAgIHJldHVybiBscDsKICAgIH07CgogICAgLy8gSW5pdGlhbGl6aW5nIHRoZSBzYW1wbGVyCiAgICBjb25zdCBzYW1wbGVyID0gbmV3IG1jbWNFeHBvcnRzLkFtd2dTYW1wbGVyKHBhcmFtcywgbG9nUG9zdCwgZXZlbnQuZGF0YSk7CiAgICAvLyBCdXJuaW5nIHNvbWUgc2FtcGxlcyB0byB0aGUgTUNNQyBnb2RzIGFuZCBzYW1wbGluZyA1MDAwIGRyYXdzCiAgICBzYW1wbGVyLmJ1cm4oMTAwMCk7CiAgICBjb25zdCBzYW1wbGVzID0gc2FtcGxlci5zYW1wbGUoNTAwMCk7CgogICAgLy8gRXh0cmFjdCBzdW1tYXJ5IHN0YXRzCiAgICBjb25zdCByZXN1bHRzID0gewogICAgICBhbHBoYTogbWVkaWFuKHNhbXBsZXMuYWxwaGEpLAogICAgICBsYW1iZGE6IG1lZGlhbihzYW1wbGVzLmxhbWJkYSksCiAgICAgIGdhbW1hOiBtZWRpYW4oc2FtcGxlcy5nYW1tYSksCiAgICAgIGx1Y2U6IG1lZGlhbihzYW1wbGVzLmx1Y2UpCiAgICB9OwogICAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICAgIHJlc3VsdHM6IHJlc3VsdHMsCiAgICAgIHNhbXBsZXM6IHNhbXBsZXMKICAgIH0pOwogIH07Cgp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1jcHQtZml0LXdvcmtlci5qcy5tYXAKCg==","data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3B0LWZpdC13b3JrZXIuanMiLCJzb3VyY2VzIjpbIi4uLy4uL25vZGVfbW9kdWxlcy9iYXllcy5qcy9kaXN0cmlidXRpb25zLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2JheWVzLmpzL21jbWMuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL2FzY2VuZGluZy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1hcnJheS9zcmMvbnVtYmVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9zb3J0LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9tYXguanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL21pbi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1hcnJheS9zcmMvcXVpY2tzZWxlY3QuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL3F1YW50aWxlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9tZWRpYW4uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtZGlzcGF0Y2gvc3JjL2Rpc3BhdGNoLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvbmFtZXNwYWNlcy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL25hbWVzcGFjZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL2NyZWF0b3IuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rvci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9zZWxlY3QuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9hcnJheS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdG9yQWxsLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NlbGVjdEFsbC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL21hdGNoZXIuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vc2VsZWN0Q2hpbGQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vc2VsZWN0Q2hpbGRyZW4uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZmlsdGVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NwYXJzZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9lbnRlci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL2NvbnN0YW50LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2RhdGEuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZXhpdC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9qb2luLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL21lcmdlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL29yZGVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NvcnQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vY2FsbC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9ub2Rlcy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9ub2RlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NpemUuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZW1wdHkuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZWFjaC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9hdHRyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvd2luZG93LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3N0eWxlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3Byb3BlcnR5LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2NsYXNzZWQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vdGV4dC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9odG1sLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3JhaXNlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2xvd2VyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2FwcGVuZC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9pbnNlcnQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vcmVtb3ZlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2Nsb25lLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2RhdHVtLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL29uLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2Rpc3BhdGNoLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2l0ZXJhdG9yLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2luZGV4LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWNvbG9yL3NyYy9kZWZpbmUuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtY29sb3Ivc3JjL2NvbG9yLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9jb25zdGFudC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvY29sb3IuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL3JnYi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvbnVtYmVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9zdHJpbmcuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL3RyYW5zZm9ybS9kZWNvbXBvc2UuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL3RyYW5zZm9ybS9wYXJzZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvdHJhbnNmb3JtL2luZGV4LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRpbWVyL3NyYy90aW1lci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10aW1lci9zcmMvdGltZW91dC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3NjaGVkdWxlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL2ludGVycnVwdC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy9zZWxlY3Rpb24vaW50ZXJydXB0LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vdHdlZW4uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9pbnRlcnBvbGF0ZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL2F0dHIuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9hdHRyVHdlZW4uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9kZWxheS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL2R1cmF0aW9uLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vZWFzZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL2Vhc2VWYXJ5aW5nLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vZmlsdGVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vbWVyZ2UuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9vbi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3JlbW92ZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3NlbGVjdC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3NlbGVjdEFsbC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3NlbGVjdGlvbi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3N0eWxlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vc3R5bGVUd2Vlbi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3RleHQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi90ZXh0VHdlZW4uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi90cmFuc2l0aW9uLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vZW5kLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vaW5kZXguanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtZWFzZS9zcmMvY3ViaWMuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvc2VsZWN0aW9uL3RyYW5zaXRpb24uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvc2VsZWN0aW9uL2luZGV4LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXpvb20vc3JjL3RyYW5zZm9ybS5qcyIsIi4uLy4uL2xpYnJhcmllcy9wcm9zcGVjdGFibGUtbWF0aC9zcmMvY3B0LW1hdGguanMiLCIuLi8uLi9saWJyYXJpZXMvcHJvc3BlY3RhYmxlLW1hdGgvc3JjL2luZGV4LmpzIiwiLi4vLi4vbGlicmFyaWVzL3Byb3NwZWN0YWJsZS1lbGVtZW50cy9zcmMvY29tcG9uZW50cy9jcHQtZml0LXdvcmtlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuXG4vLyBBIG51bWJlciBvZiBsb2cgcHJvYmFiaWxpdHkgZGVuc2l0eSBmdW5jdGlvbnMgKFBERikuIE5hbWluZyBhbmQgcGFyYW1ldGVyaXphdGlvblxuLy8gc2hvdWxkIG1hdGNoIFIncywgZXhjZXB0IGZvciB0aGF0IGFsbCBmdW5jdGlvbnMgcmVzaWRlIGluIGFuIGxkIG9iamVjdCAoXG4vLyBhcyBpbiBcImxvZyBkZW5zaXR5XCIpLCBzbyB0byBnZXQgYSBub3JtYWwgbG9nIGRlbnNpdHkgeW91IHdvdWxkIHdyaXRlXG4vLyBsZC5ub3JtKC4uLikuXG4vLyBNb3N0IG9mIHRoZSBjb2RlIGJlbG93IGlzIGRpcmVjdGx5IHRha2VuIGZyb20gdGhlIGdyZWF0IEpzdGF0IHByb2plY3Rcbi8vIChodHRwczovL2dpdGh1Yi5jb20vanN0YXQvKSB3aGljaCBpbmNsdWRlcyBQREYgZm9yIG1hbnkgY29tbW9uIHByb2JhYmlsaXR5XG4vLyBkaXN0cmlidXRpb25zLiBXaGF0IEkgaGF2ZSBkb25lIGlzIG9ubHkgdG8gY29udmVydCB0aGVzZSB0byBsb2cgUERGcy5cblxuLypcbk9yaWdpbmFsIHdvcmsgQ29weXJpZ2h0IChjKSAyMDEzIGpTdGF0XG5Nb2RpZmllZCB3b3JrIENvcHlyaWdodCAoYykgMjAxNSBSYXNtdXMgQsOlw6V0aCBcblxuUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxub2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xudG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG5mdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXG5UaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbklNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG5BVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG5MSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuVEhFIFNPRlRXQVJFLlxuXG4qL1xuXG5cbi8vIFRoaXMgYm9pbGVyIHBsYXRlIGNvZGUgaGVyZSBpcyB0YWtlbiBmcm9tOlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3VtZGpzL3VtZC9ibG9iL21hc3Rlci90ZW1wbGF0ZXMvcmV0dXJuRXhwb3J0cy5qc1xuLy8gSXQgc2hvdWxkIG1ha2Ugc2h1cmUgdGhhdCBtb2R1bGUgY2FuIGJlIGltcG9ydGVkIGJvdGggaW4gdGhlIGJyb3dzZXIsXG4vLyBOb2RlLCBhbmQgYnkgdXNpbmcgdGhlIEFzeW5jaHJvbm91cyBNb2R1bGUgRGVmaW5pdGlvbiBzdGFuZGFyZC5cbi8vIElmIHRoaXMgbW9kdWxlIGlzIGxvYWRlZCBpbiB0aGUgYnJvd3NlciBpdCB3aWxsIGNyZWF0ZWQgdGhlIGdsb2JhbFxuLy8gb2JqZWN0IGxkIC5cbihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgICAgICBkZWZpbmUoW10sIGZhY3RvcnkpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0XG4gICAgICAgIC8vIG9ubHkgQ29tbW9uSlMtbGlrZSBlbnZpcm9ubWVudHMgdGhhdCBzdXBwb3J0IG1vZHVsZS5leHBvcnRzLFxuICAgICAgICAvLyBsaWtlIE5vZGUuXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpXG4gICAgICAgIHJvb3QubGQgPSBmYWN0b3J5KCk7XG4gIH1cbn0odGhpcywgZnVuY3Rpb24oKSB7XG4gIC8vIE9iamVjdCB0byBob2xkIHRoZSBmdW5jdGlvbnMgdG8gYmUgZXhwb3J0ZWQuXG4gIHZhciBsZCAgPSB7fTtcbiAgXG4gIC8vLy8vLy8vLy8gSGVscGVyIGZ1bmN0aW9ucyAvLy8vLy8vLy8vXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIFxuICB2YXIgbGdhbW1hID0gZnVuY3Rpb24oeCkge1xuICAgIHZhciBqID0gMDtcbiAgICB2YXIgY29mID0gW1xuICAgICAgNzYuMTgwMDkxNzI5NDcxNDYsIC04Ni41MDUzMjAzMjk0MTY3NywgMjQuMDE0MDk4MjQwODMwOTEsXG4gICAgICAtMS4yMzE3Mzk1NzI0NTAxNTUsIDAuMTIwODY1MDk3Mzg2NjE3OWUtMiwgLTAuNTM5NTIzOTM4NDk1M2UtNVxuICAgIF07XG4gICAgdmFyIHNlciA9IDEuMDAwMDAwMDAwMTkwMDE1O1xuICAgIHZhciB4eCwgeSwgdG1wO1xuICAgIHRtcCA9ICh5ID0geHggPSB4KSArIDUuNTtcbiAgICB0bXAgLT0gKHh4ICsgMC41KSAqIGxvZyh0bXApO1xuICAgIGZvciAoOyBqIDwgNjsgaisrKVxuICAgICAgc2VyICs9IGNvZltqXSAvICsreTtcbiAgICByZXR1cm4gbG9nKDIuNTA2NjI4Mjc0NjMxMDAwNSAqIHNlciAvIHh4KSAtIHRtcDtcbiAgfTtcbiAgbGQubGdhbW1hID0gbGdhbW1hO1xuICBcbiAgdmFyIGxmYWN0b3JpYWwgPSBmdW5jdGlvbihuKSB7XG4gICAgcmV0dXJuIG4gPCAwID8gTmFOIDogbGdhbW1hKG4gKyAxKTtcbiAgfTtcbiAgbGQubGZhY3RvcmlhbCA9IGxmYWN0b3JpYWw7XG4gIFxuICB2YXIgbGNob29zZSA9IGZ1bmN0aW9uKG4sIGspe1xuICAgIHJldHVybiBsZmFjdG9yaWFsKG4pIC0gbGZhY3RvcmlhbChrKSAtIGxmYWN0b3JpYWwobiAtIGspO1xuICB9O1xuICBsZC5sY2hvb3NlID0gbGNob29zZTtcbiAgXG4gIHZhciBsYmV0YSA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gbGdhbW1hKGEpICsgbGdhbW1hKGIpIC0gbGdhbW1hKGEgKyBiKTtcbiAgfTtcbiAgbGQubGJldGEgPSBsYmV0YTtcbiAgXG4gIHZhciBsb2cgID0gTWF0aC5sb2c7XG4gIHZhciBleHAgID0gTWF0aC5leHA7XG4gIHZhciBhYnMgID0gTWF0aC5hYnM7XG4gIHZhciBwb3cgID0gTWF0aC5wb3c7XG4gIHZhciBzcXJ0ID0gTWF0aC5zcXJ0O1xuICB2YXIgcGkgICA9IE1hdGguUEk7XG4gIFxuICAvLy8vLy8vLy8vIENvbnRpbm91cyBkaXN0cmlidXRpb25zIC8vLy8vLy8vLy9cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIFxuICBsZC5iZXRhID0gZnVuY3Rpb24oeCwgc2hhcGUxLCBzaGFwZTIpIHtcbiAgICBpZiAoeCA+IDEgfHwgeCA8IDApIHtcbiAgICAgICAgcmV0dXJuIC1JbmZpbml0eTtcbiAgICB9XG4gICAgaWYoc2hhcGUxID09PSAxICYmIHNoYXBlMiA9PT0gMSkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAoc2hhcGUxIC0gMSkgKiBsb2coeCkgKyAoc2hhcGUyIC0gMSkgKiBsb2coMSAtIHgpIC0gbGJldGEoc2hhcGUxLCBzaGFwZTIpOyAgXG4gICAgfVxuICB9O1xuICBcbiAgbGQuY2F1Y2h5ID0gZnVuY3Rpb24oeCwgbG9jYXRpb24sIHNjYWxlKSB7XG4gICAgcmV0dXJuIGxvZyhzY2FsZSkgLSBsb2cocG93KHggLSBsb2NhdGlvbiwgMikgKyBwb3coc2NhbGUsIDIpKSAgLSBsb2cocGkpO1xuICB9O1xuICBcbiAgbGQubm9ybSA9IGZ1bmN0aW9uKHgsIG1lYW4sIHNkKSB7XG4gICAgICByZXR1cm4gLTAuNSAqIGxvZygyICogcGkpIC1sb2coc2QpIC0gcG93KHggLSBtZWFuLCAyKSAvICgyICogc2QgKiBzZCk7XG4gIH07XG5cbiAgLy8gQSBiaXZhcmlhdGUgTm9ybWFsIGRpc3RyaWJ1dGlvbiBwYXJhbWV0ZXJpemVkIGJ5IGFycmF5cyBvZiB0d28gbWVhbnMgYW5kIFNEcywgYW5kIFxuICAvLyB0aGUgY29ycmVsYXRpb24uXG4gIGxkLmJpdmFybm9ybSA9IGZ1bmN0aW9uKHgsIG1lYW4sIHNkLCBjb3JyKSB7XG4gICAgdmFyIHogPSBwb3coeFswXSAtIG1lYW5bMF0sIDIpIC8gcG93KHNkWzBdLCAyKSArXG4gICAgICAgICAgICBwb3coeFsxXSAtIG1lYW5bMV0sIDIpIC8gcG93KHNkWzFdLCAyKSAtIFxuICAgICAgICAgICAgKDIgKiBjb3JyICogKHhbMF0gLSBtZWFuWzBdKSAqICh4WzFdIC0gbWVhblsxXSkpIC8gKHNkWzBdICogc2RbMV0pO1xuICAgIHZhciBub3JtYWxpemluZ19mYWN0b3IgPSAtKCBsb2coMikgKyBsb2cocGkpICsgbG9nKHNkWzBdKSArIGxvZyhzZFsxXSkgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMC41ICogbG9nKDEgLSBwb3coY29yciwgMikpICk7IFxuICAgIHZhciBiaXZhcl9sb2dfZGVucyA9IG5vcm1hbGl6aW5nX2ZhY3RvciAtIHogLyAoMiAqICgxIC0gcG93KGNvcnIsIDIpICkgKTsgXG4gICAgcmV0dXJuIGJpdmFyX2xvZ19kZW5zO1xuICB9O1xuICBcblxuICBsZC5sYXBsYWNlID0gZnVuY3Rpb24oeCwgbG9jYXRpb24sIHNjYWxlKSB7XG4gICAgcmV0dXJuICgtYWJzKHggLSBsb2NhdGlvbikvc2NhbGUpIC0gbG9nKDIgKiBzY2FsZSk7XG4gIH07XG4gIFxuICBsZC5kZXhwID0gbGQubGFwbGFjZTtcbiAgXG4gIGxkLmdhbW1hID0gZnVuY3Rpb24oeCwgc2hhcGUsIHJhdGUpIHtcbiAgICB2YXIgc2NhbGUgPSAxIC8gcmF0ZTtcbiAgICBpZiAoeCA8IDApIHtcbiAgICAgIHJldHVybiAtSW5maW5pdHk7XG4gICAgfVxuICAgIGlmKCh4ID09PSAwICYmIHNoYXBlID09PSAxKSApIHtcbiAgICAgIHJldHVybiAtbG9nKHNjYWxlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIChzaGFwZSAtIDEpICogbG9nKHgpIC0geCAvIHNjYWxlIC0gbGdhbW1hKHNoYXBlKSAtIHNoYXBlICogbG9nKHNjYWxlKTtcbiAgICB9XG4gIH07XG4gIFxuICBsZC5pbnZnYW1tYSA9IGZ1bmN0aW9uKHgsIHNoYXBlLCBzY2FsZSkge1xuICAgICAgaWYgKHggPD0gMCkge1xuICAgICAgICByZXR1cm4gLUluZmluaXR5O1xuICAgICAgfVxuICAgICAgcmV0dXJuIC0oc2hhcGUgKyAxKSAqIGxvZyh4KSAtIHNjYWxlIC8geCAtIGxnYW1tYShzaGFwZSkgKyBzaGFwZSAqIGxvZyhzY2FsZSk7XG4gICAgfTtcbiAgXG4gIGxkLmxub3JtID0gIGZ1bmN0aW9uKHgsIG1lYW5sb2csIHNkbG9nKSB7XG4gICAgaWYgKHggPD0gMCkge1xuICAgICAgcmV0dXJuIC1JbmZpbml0eTtcbiAgICB9XG4gICAgcmV0dXJuIC1sb2coeCkgLSAwLjUgKiBsb2coMiAqIHBpKSAtIGxvZyhzZGxvZykgLSBcbiAgICAgICAgICAgIHBvdyhsb2coeCkgLSBtZWFubG9nLCAyKSAvICgyICogc2Rsb2cgKiBzZGxvZyk7XG4gIH07XG4gIFxuICBsZC5wYXJldG8gPSBmdW5jdGlvbih4LCBzY2FsZSwgc2hhcGUpIHtcbiAgICBpZiAoeCA8IHNjYWxlKSB7XG4gICAgICByZXR1cm4gLUluZmluaXR5O1xuICAgIH1cbiAgICByZXR1cm4gbG9nKHNoYXBlKSArIHNoYXBlICogbG9nKHNjYWxlKSAtIChzaGFwZSArIDEpICogbG9nKHgpO1xuICB9O1xuICBcbiAgbGQudCAgPSAgZnVuY3Rpb24oeCwgbG9jYXRpb24sIHNjYWxlLCBkZikge1xuICAgIGRmID0gZGYgPiAxZTEwMCA/IDFlMTAwIDogZGY7XG4gICAgcmV0dXJuIGxnYW1tYSgoZGYgKyAxKS8yKSAtIGxnYW1tYShkZi8yKSAtIGxvZyhzcXJ0KHBpICogZGYpICogc2NhbGUpICtcbiAgICAgICAgICAgbG9nKHBvdygxICsgKDEvZGYpICogcG93KCh4IC0gbG9jYXRpb24pL3NjYWxlLCAyKSwgLShkZiArIDEpLzIpKTtcbiAgfTtcbiAgXG4gIC8vIFRoaXMgaXMgYSBkaXJlY3QgamF2YXNjcmlwdCB0cmFuc2xhdGlvbiBvZiB0aGUgUiBjb2RlIHVzZWQgdG8gZXZhbHVhdGVcbiAgLy8gdGhlIGxvZyBkZW5zaXR5IG9mIGEgd2VpYnVsbCBkaXN0cmlidXRpb246IFxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vd2NoL3Itc291cmNlL2Jsb2IvYjE1NmUzYTcxMTk2N2Y1ODEzMWUyM2MxYjFkYzFlYTkwZTJmMGM0My9zcmMvbm1hdGgvZHdlaWJ1bGwuY1xuICBsZC53ZWlidWxsID0gZnVuY3Rpb24oeCwgc2hhcGUsIHNjYWxlKSB7XG4gICAgaWYgKHggPCAwKSByZXR1cm4gLUluZmluaXR5O1xuICAgIGlmKHggPT09IDAgJiYgc2hhcGUgPCAxKSByZXR1cm4gSW5maW5pdHk7XG4gICAgdmFyIHRtcDEgPSBwb3coeCAvIHNjYWxlLCBzaGFwZSAtIDEpO1xuICAgIHZhciB0bXAyID0gdG1wMSAqICh4IC8gc2NhbGUpO1xuXHQgIHJldHVybiAtdG1wMiArIGxvZyhzaGFwZSAqIHRtcDEgLyBzY2FsZSk7XG4gIH07XG4gIFxuICAvLyBUaGlzIGlzIGEgZGlyZWN0IGphdmFzY3JpcHQgdHJhbnNsYXRpb24gb2YgdGhlIFIgY29kZSB1c2VkIHRvIGV2YWx1YXRlXG4gIC8vIHRoZSBsb2cgZGVuc2l0eSBvZiBhIGxvZ2lzdGljIGRpc3RyaWJ1dGlvbjogXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS93Y2gvci1zb3VyY2UvYmxvYi9iMTU2ZTNhNzExOTY3ZjU4MTMxZTIzYzFiMWRjMWVhOTBlMmYwYzQzL3NyYy9ubWF0aC9kbG9naXMuY1xuICBsZC5sb2dpcyA9IGZ1bmN0aW9uKHgsIGxvY2F0aW9uLCBzY2FsZSkge1xuICAgIHggPSBhYnMoKHggLSBsb2NhdGlvbikgLyBzY2FsZSk7XG4gICAgdmFyIGUgPSBleHAoLXgpO1xuICAgIHZhciBmID0gMS4wICsgZTtcbiAgICByZXR1cm4gLSh4ICsgbG9nKHNjYWxlICogZiAqIGYpKTsgICAgXG4gIH07XG5cbiAgbGQuZGlyaWNobGV0ID0gZnVuY3Rpb24oeCwgYWxwaGEpIHtcbiAgICB2YXIgc3VtX2FscGhhID0gMDtcbiAgICB2YXIgc3VtX2xnYW1tYV9hbHBoYSA9IDA7XG4gICAgdmFyIHN1bV9hbHBoYV9zdWJfMV9sb2dfeCA9IDA7XG4gICAgdmFyIG4gPSBhbHBoYS5sZW5ndGg7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgc3VtX2FscGhhICs9IGFscGhhW2ldO1xuICAgICAgc3VtX2xnYW1tYV9hbHBoYSArPSBsZ2FtbWEoYWxwaGFbaV0pO1xuICAgICAgc3VtX2FscGhhX3N1Yl8xX2xvZ194ICs9IChhbHBoYVtpXSAtIDEpICogbG9nKHhbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gbGdhbW1hKHN1bV9hbHBoYSkgLSBzdW1fbGdhbW1hX2FscGhhICsgc3VtX2FscGhhX3N1Yl8xX2xvZ194O1xuICB9O1xuICAgXG4gICAgXG4gIGxkLmV4cCA9IGZ1bmN0aW9uKHgsIHJhdGUpIHtcbiAgICAgIHJldHVybiB4IDwgMCA/IC1JbmZpbml0eSA6IGxvZyhyYXRlKSAtcmF0ZSAqIHg7XG4gIH07XG4gIFxuICBsZC51bmlmID0gZnVuY3Rpb24oeCwgbWluLCBtYXgpIHtcbiAgICAgIHJldHVybiAoeCA8IG1pbiB8fCB4ID4gbWF4KSA/IC1JbmZpbml0eSA6IGxvZygxIC8gKG1heCAtIG1pbikpO1xuICB9O1xuICBcbiAgLy8vLy8vLy8vLyBEaXNjcmV0ZSBkaXN0cmlidXRpb25zIC8vLy8vLy8vLy9cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgXG4gIGxkLmJlcm4gPSBmdW5jdGlvbih4LCBwcm9iKSB7XG4gICAgICByZXR1cm4gISh4ID09PSAwIHx8IHggPT09IDEpID8gLUluZmluaXR5IDogbG9nKHggKiBwcm9iICsgKDEgLSB4KSAqICgxIC0gcHJvYikpO1xuICB9O1xuICBcbiAgbGQuY2F0ID0gZnVuY3Rpb24oeCwgcHJvYnMpIHtcbiAgICBpZih4IDwgMSB8fCB4ID4gcHJvYnMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gLUluZmluaXR5O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbG9nKCBwcm9ic1t4IC0gMV0gKTtcbiAgICB9XG4gIH07XG4gIFxuICBsZC5iaW5vbSA9IGZ1bmN0aW9uKHgsIHNpemUsIHByb2IpIHtcbiAgICBpZih4ID4gc2l6ZSB8fCB4IDwgMCkge1xuICAgICAgcmV0dXJuIC1JbmZpbml0eTtcbiAgICB9XG4gICAgaWYocHJvYiA9PT0gMCB8fCBwcm9iID09PSAxKSB7XG4gICAgICByZXR1cm4gKHNpemUgKiBwcm9iKSA9PT0geCA/IDAgOiAtSW5maW5pdHk7XG4gICAgfVxuICAgIHJldHVybiBsY2hvb3NlKHNpemUsIHgpICsgeCAqIGxvZyhwcm9iKSArIChzaXplIC0geCkgKiBsb2coMSAtIHByb2IpO1xuICB9O1xuICBcbiAgdmFyIG11bHRpbm9tID0gZnVuY3Rpb24oeCwgcHJvYnMpIHtcbiAgICB2YXIgbiA9IHgubGVuZ3RoO1xuICAgIHZhciBzaXplID0gMDtcbiAgICB2YXIgdG1wX3Rlcm0gPSAwO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgIGlmKHByb2JzW2ldID09PSAwKSB7XG4gICAgICAgIGlmKHhbaV0gIT09IDApIHtcbiAgICAgICAgICByZXR1cm4gLUluZmluaXR5OyAgXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNpemUgKz0geFtpXTtcbiAgICAgICAgdG1wX3Rlcm0gKz0geFtpXSAqIGxvZyhwcm9ic1tpXSkgLSBsZ2FtbWEoeFtpXSArIDEpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbGdhbW1hKHNpemUgKyAxKSArIHRtcF90ZXJtIDtcbiAgfTtcbiAgXG4gIGxkLm5iaW5vbSA9IGZ1bmN0aW9uKHgsIHNpemUsIHByb2IpIHtcbiAgICBpZih4IDwgMCkge1xuICAgICAgcmV0dXJuIC1JbmZpbml0eTtcbiAgICB9XG4gICAgcmV0dXJuIGxjaG9vc2UoeCArIHNpemUgLSAxLCBzaXplIC0gMSkgKyB4ICogbG9nKDEgLSBwcm9iKSArIHNpemUgKiBsb2cocHJvYik7XG4gIH07XG4gIFxuICBsZC5oeXBlciA9IGZ1bmN0aW9uKHgsIG0sIG4sIGspIHtcbiAgICBpZih4IDwgMCB8fCB4ID4gaykge1xuICAgICAgcmV0dXJuIC1JbmZpbml0eTtcbiAgICB9IGVsc2Uge1xuICAgIHJldHVybiBsY2hvb3NlKG0sIHgpICsgbGNob29zZShuLCBrLXgpIC0gbGNob29zZShtK24sIGspO1xuICAgIH1cbiAgfTtcbiAgXG4gIGxkLnBvaXMgPSBmdW5jdGlvbih4LCBsYW1iZGEpIHtcbiAgICAgIHJldHVybiB4IDwgMCA/IC1JbmZpbml0eSA6IGxvZyhsYW1iZGEpICogeCAtIGxhbWJkYSAtIGxmYWN0b3JpYWwoeCk7XG4gIH07XG4gIFxuICByZXR1cm4gbGQ7XG59KSk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8vIFRoaXMgYm9pbGVyIHBsYXRlIGNvZGUgaGVyZSBpcyB0YWtlbiBmcm9tOlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3VtZGpzL3VtZC9ibG9iL21hc3Rlci90ZW1wbGF0ZXMvcmV0dXJuRXhwb3J0cy5qc1xuLy8gSXQgc2hvdWxkIG1ha2Ugc2h1cmUgdGhhdCBtb2R1bGUgY2FuIGJlIGltcG9ydGVkIGJvdGggaW4gdGhlIGJyb3dzZXIsXG4vLyBOb2RlLCBhbmQgYnkgdXNpbmcgdGhlIEFzeW5jaHJvbm91cyBNb2R1bGUgRGVmaW5pdGlvbiBzdGFuZGFyZC5cbi8vIElmIHRoaXMgbW9kdWxlIGlzIGxvYWRlZCBpbiB0aGUgYnJvd3NlciBpdCB3aWxsIGNyZWF0ZWQgdGhlIGdsb2JhbFxuLy8gb2JqZWN0IG1jbWMgLlxuKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG4gICAgICAgIGRlZmluZShbXSwgZmFjdG9yeSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgICAgICAvLyBOb2RlLiBEb2VzIG5vdCB3b3JrIHdpdGggc3RyaWN0IENvbW1vbkpTLCBidXRcbiAgICAgICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsXG4gICAgICAgIC8vIGxpa2UgTm9kZS5cbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzIChyb290IGlzIHdpbmRvdylcbiAgICAgICAgcm9vdC5tY21jID0gZmFjdG9yeSgpO1xuICB9XG59KHRoaXMsIGZ1bmN0aW9uKCl7XG5cbi8vLyBUaGUgYWN0dWFsIG1vZHVsZSBjb2RlIHN0YXJ0cyBoZXJlIC8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vICBcbiAgXG4gIC8vLy8vLy8vLy8gSGVscGVyIEZ1bmN0aW9ucyAvLy8vLy8vLy8vXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIFxuICAvKiogUmV0dXJucyBhIHJhbmRvbSByZWFsIG51bWJlciBiZXR3ZWVuIG1pbiBhbmQgbWF4ICovXG4gIHZhciBydW5pZiA9IGZ1bmN0aW9uKG1pbiwgbWF4KSB7XG4gICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSArIG1pbjtcbiAgfTtcbiAgXG4gIC8qKiBSZXR1cm5zIGEgcmFuZG9tIGludGVnZXIgYmV0d2VlbiBtaW4gYW5kIG1heCAqL1xuICB2YXIgcnVuaWZfZGlzY3JldGUgPSBmdW5jdGlvbihtaW4sIG1heCkge1xuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluO1xuICB9O1xuICBcbiAgLyoqIFJldHVybnMgYSByYW5kb20gcmVhbCBudW1iZXIgZnJvbSBhIG5vcm1hbCBkaXN0cmliYnV0aW9uIGRlZmluZWRcbiAgICogIGJ5IG1lYW4gYW5kIHNkLiBcbiAgICogIEFkYXB0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vanN0YXQvanN0YXQvYmxvYi9tYXN0ZXIvc3JjL3NwZWNpYWwuanMgKi9cbiAgdmFyIHJub3JtID0gZnVuY3Rpb24obWVhbiwgc2QpIHtcbiAgICB2YXIgdSwgdiwgeCwgeSwgcTtcbiAgICBkbyB7XG4gICAgICB1ID0gTWF0aC5yYW5kb20oKTtcbiAgICAgIHYgPSAxLjcxNTYgKiAoTWF0aC5yYW5kb20oKSAtIDAuNSk7XG4gICAgICB4ID0gdSAtIDAuNDQ5ODcxO1xuICAgICAgeSA9IE1hdGguYWJzKHYpICsgMC4zODY1OTU7XG4gICAgICBxID0geCAqIHggKyB5ICogKDAuMTk2MDAgKiB5IC0gMC4yNTQ3MiAqIHgpO1xuICAgIH0gd2hpbGUgKHEgPiAwLjI3NTk3ICYmIChxID4gMC4yNzg0NiB8fCB2ICogdiA+IC00ICogTWF0aC5sb2codSkgKiB1ICogdSkpO1xuICAgIFxuICAgIHJldHVybiAodiAvIHUpICogc2QgKyBtZWFuO1xuICB9O1xuICBcbiAgXG4gIC8qKiBSZXR1cm5zIGEgZGVlcCBjbG9uZSBvZiBzcmMsIHNvcnQgb2YuLi4gSXQgb25seSBjb3BpZXMgYSBsaW1pdGVkXG4gICAqIG51bWJlciBvZiB0eXBlcyBhbmQsIGZvciBleGFtcGxlLCBmdW5jdGlvbiBhcmUgbm90IGNvcGllZC4gXG4gICAqIEZyb20gaHR0cDovL2Rhdmlkd2Fsc2gubmFtZS9qYXZhc2NyaXB0LWNsb25lXG4gICAqL1xuICB2YXIgZGVlcF9jbG9uZSA9IGZ1bmN0aW9uKHNyYykge1xuICBcdGZ1bmN0aW9uIG1peGluKGRlc3QsIHNvdXJjZSwgY29weUZ1bmMpIHtcbiAgXHRcdHZhciBuYW1lLCBzLCBpLCBlbXB0eSA9IHt9O1xuICBcdFx0Zm9yKG5hbWUgaW4gc291cmNlKXtcbiAgXHRcdFx0Ly8gdGhlICghKG5hbWUgaW4gZW1wdHkpIHx8IGVtcHR5W25hbWVdICE9PSBzKSBjb25kaXRpb24gYXZvaWRzIGNvcHlpbmcgcHJvcGVydGllcyBpbiBcInNvdXJjZVwiXG4gIFx0XHRcdC8vIGluaGVyaXRlZCBmcm9tIE9iamVjdC5wcm90b3R5cGUuXHQgRm9yIGV4YW1wbGUsIGlmIGRlc3QgaGFzIGEgY3VzdG9tIHRvU3RyaW5nKCkgbWV0aG9kLFxuICBcdFx0XHQvLyBkb24ndCBvdmVyd3JpdGUgaXQgd2l0aCB0aGUgdG9TdHJpbmcoKSBtZXRob2QgdGhhdCBzb3VyY2UgaW5oZXJpdGVkIGZyb20gT2JqZWN0LnByb3RvdHlwZVxuICBcdFx0XHRzID0gc291cmNlW25hbWVdO1xuICBcdFx0XHRpZighKG5hbWUgaW4gZGVzdCkgfHwgKGRlc3RbbmFtZV0gIT09IHMgJiYgKCEobmFtZSBpbiBlbXB0eSkgfHwgZW1wdHlbbmFtZV0gIT09IHMpKSl7XG4gIFx0XHRcdFx0ZGVzdFtuYW1lXSA9IGNvcHlGdW5jID8gY29weUZ1bmMocykgOiBzO1xuICBcdFx0XHR9XG4gIFx0XHR9XG4gIFx0XHRyZXR1cm4gZGVzdDtcbiAgXHR9XG4gIFx0aWYoIXNyYyB8fCB0eXBlb2Ygc3JjICE9IFwib2JqZWN0XCIgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHNyYykgPT09IFwiW29iamVjdCBGdW5jdGlvbl1cIil7XG4gIFx0XHQvLyBudWxsLCB1bmRlZmluZWQsIGFueSBub24tb2JqZWN0LCBvciBmdW5jdGlvblxuICBcdFx0cmV0dXJuIHNyYztcdC8vIGFueXRoaW5nXG4gIFx0fVxuICBcdGlmKHNyYy5ub2RlVHlwZSAmJiBcImNsb25lTm9kZVwiIGluIHNyYyl7XG4gIFx0XHQvLyBET00gTm9kZVxuICBcdFx0cmV0dXJuIHNyYy5jbG9uZU5vZGUodHJ1ZSk7IC8vIE5vZGVcbiAgXHR9XG4gIFx0aWYoc3JjIGluc3RhbmNlb2YgRGF0ZSl7XG4gIFx0XHQvLyBEYXRlXG4gIFx0XHRyZXR1cm4gbmV3IERhdGUoc3JjLmdldFRpbWUoKSk7XHQvLyBEYXRlXG4gIFx0fVxuICBcdGlmKHNyYyBpbnN0YW5jZW9mIFJlZ0V4cCl7XG4gIFx0XHQvLyBSZWdFeHBcbiAgXHRcdHJldHVybiBuZXcgUmVnRXhwKHNyYyk7ICAgLy8gUmVnRXhwXG4gIFx0fVxuICBcdHZhciByLCBpLCBsO1xuICBcdGlmKHNyYyBpbnN0YW5jZW9mIEFycmF5KXtcbiAgXHRcdC8vIGFycmF5XG4gIFx0XHRyID0gW107XG4gIFx0XHRmb3IoaSA9IDAsIGwgPSBzcmMubGVuZ3RoOyBpIDwgbDsgKytpKXtcbiAgXHRcdFx0aWYoaSBpbiBzcmMpe1xuICBcdFx0XHRcdHIucHVzaChkZWVwX2Nsb25lKHNyY1tpXSkpO1xuICBcdFx0XHR9XG4gIFx0XHR9XG4gIFx0fSBlbHNlIHtcbiAgXHRcdC8vIGdlbmVyaWMgb2JqZWN0c1xuICBcdFx0ciA9IHNyYy5jb25zdHJ1Y3RvciA/IG5ldyBzcmMuY29uc3RydWN0b3IoKSA6IHt9O1xuICBcdH1cbiAgXHRyZXR1cm4gbWl4aW4ociwgc3JjLCBkZWVwX2Nsb25lKTtcbiAgfTtcbiAgXG4gIC8qKiBTcGVjaWFsaXplZCBjbG9uZSBmdW5jdGlvbiB0aGF0IG9ubHkgY2xvbmVzIHNjYWxhcnMgYW5kIG5lc3RlZCBhcnJheXMgd2hlcmVcbiAgICogZWFjaCBhcnJheSBlaXRoZXIgY29uc2lzdHMgb2YgYWxsIGFycmF5cyBvciBhbGwgbnVtYmVycy4gVGhpcyBmdW5jdGlvblxuICAgKiBpcyBtZWFudCBhcyBhIGZhc3Qgd2F5IG9mIGNsb25pbmcgcGFyYW1ldGVyIGRyYXdzIHdpdGhpbiB0aGUgbWNtYyBzYW1wbGluZ1xuICAgKiBsb29wLlxuICAgKi9cbiAgdmFyIGNsb25lX3BhcmFtX2RyYXcgPSBmdW5jdGlvbih4KSB7XG4gICAgaWYoQXJyYXkuaXNBcnJheSh4KSkge1xuICAgICAgaWYoQXJyYXkuaXNBcnJheSh4WzBdKSkge1xuICAgICAgICAvLyB4IGlzIGFuIGFycmF5IG9mIGFycmF5cyBzbyB3ZSBuZWVkIHRvIGNsb25lIGl0IHJlY3Vyc2l2ZWx5XG4gICAgICAgIHZhciB4X2NvcHkgPSBbXTtcbiAgICAgICAgZm9yKHZhciBpID0gMCwgbGVuZ3RoID0geC5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgIHhfY29weS5wdXNoKGNsb25lX3BhcmFtX2RyYXcoeFtpXSkpO1xuICAgICAgICB9IFxuICAgICAgICByZXR1cm4geF9jb3B5O1xuICAgICAgfSBlbHNlIHsgLy8gV2UnbGwgYXNzdW1lIHggaXMgYSBhcnJheXMgb2Ygc2NhbGFyc1xuICAgICAgICByZXR1cm4geC5zbGljZSgwKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgeyAvLyBXZSdsbCBhc3N1bWUgeCBpcyBhIHNjYWxhclxuICAgICAgcmV0dXJuIHg7XG4gICAgfVxuICB9O1xuICBcbiAgLyoqIFJldHVybnMgdHJ1ZSBpZiBvYmplY3QgaXMgYSBudW1iZXIuXG4gICAqL1xuICB2YXIgaXNfbnVtYmVyID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICByZXR1cm4gdHlwZW9mIG9iamVjdCA9PSBcIm51bWJlclwiIHx8ICh0eXBlb2Ygb2JqZWN0ID09IFwib2JqZWN0XCIgJiYgb2JqZWN0LmNvbnN0cnVjdG9yID09PSBOdW1iZXIpO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGEgKHBvc3NpYmx5IG11bHRpZGltZW5zaW9uYWwvbmVzdGVkKSBhcnJheS5cbiAgICogQHBhcmFtIGRpbSAtIEFuIGFycmF5IGdpdmluZyB0aGUgZGltZW5zaW9uIG9mIHRoZSBhcnJheS4gRm9yIGV4YW1wbGUsXG4gICAqICAgWzVdIHdvdWxkIHlpZWxkIGEgNSBlbGVtZW50IGFycmF5LCBhbmQgWzMsM10gd291bGQgeWllbGQgYSAzIGJ5IDMgbWF0cml4LlxuICAgKiBAcGFyYW0gaW5pdCAtIEEgdmFsdWUgb3IgYSBmdW5jdGlvbiB1c2VkIHRvIGZpbGwgaW4gdGhlIGVhY2ggZWxlbWVudCBpblxuICAgKiAgIHRoZSBhcnJheS4gSWYgaXQgaXMgYSBmdW5jdGlvbiBpdCBzaG91bGQgdGFrZSBubyBhcmd1bWVudHMsIGl0IHdpbGwgYmUgXG4gICAqICAgZXZhbHVhdGVkIG9uY2UgZm9yIGVhY2ggZWxlbWVudCwgYW5kIGl0J3MgcmV0dXJuIHZhbHVlIHdpbGwgYmUgdXNlZCB0b1xuICAgKiAgIGZpbGwgaW4gZWFjaCBlbGVtZW50LlxuICAgKiBAZXhhbXBsZSBcbiAgICogLy8gVGhlIGZvbGxvd2luZyB3b3VsZCByZXR1cm4gW1sxLDFdLFsxLDFdLFsxLDFdXVxuICAgKiBjcmVhdGVfYXJyYXkoWzIsM10sIDEpXG4gICAqL1xuICB2YXIgY3JlYXRlX2FycmF5ID0gZnVuY3Rpb24oZGltLCBpbml0KSB7XG4gICAgdmFyIGFyciA9IG5ldyBBcnJheShkaW1bMF0pO1xuICAgIHZhciBpO1xuICAgIGlmKGRpbS5sZW5ndGggPT0gMSkgeyAvLyBGaWxsIGl0IHVwIHdpdGggaW5pdFxuICAgICAgaWYodHlwZW9mIGluaXQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBmb3IoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykge1xuICAgICAgICAgIGFycltpXSA9IGluaXQoKTtcbiAgICAgICAgfSAgXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykge1xuICAgICAgICAgIGFycltpXSA9IGluaXQ7XG4gICAgICAgIH0gXG4gICAgICB9XG4gICAgfSBlbHNlIGlmKGRpbS5sZW5ndGggPiAxKSB7XG4gICAgICBmb3IoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykge1xuICAgICAgICBhcnJbaV0gPSBjcmVhdGVfYXJyYXkoZGltLnNsaWNlKDEpLCBpbml0KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgXCJjcmVhdGVfYXJyYXkgY2FuJ3QgY3JlYXRlIGEgZGltZW5zaW9ubGVzcyBhcnJheVwiO1xuICAgIH1cbiAgICByZXR1cm4gYXJyO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFJldHVybiB0aGUgZGltZW5zaW9ucyBvZiBhIHBvc3NpYmx5IG5lc3RlZCBhcnJheSBhcyBhbiBhcnJheS4gRm9yIFxuICAgKiBleGFtcGxlLCBhcnJheV9kaW0oIFtbMSwgMl0sIFsxLCAyXV0gKSBzaG91bGQgcmV0dXJuIFsyLCAyXVxuICAgKiBBc3N1bWVzIHRoYXQgYWxsIGFycmF5cyBpbnNpZGUgYW5vdGhlciBhcnJheSBhcmUgb2YgdGhlIHNhbWUgbGVuZ3RoLlxuICAgKiBAZXhhbXBsZVxuICAgKiAvLyBTaG91bGQgcmV0dXJuIFs0LCAyLCAxXVxuICAgKiBhcnJheV9kaW0oY3JlYXRlX2FycmF5KFs0LCAyLCAxXSwgMCkpXG4gICAqL1xuICB2YXIgYXJyYXlfZGltID0gZnVuY3Rpb24oYSkge1xuICAgIGlmKEFycmF5LmlzQXJyYXkoYVswXSkpIHtcbiAgICAgIHJldHVybiBbYS5sZW5ndGhdLmNvbmNhdChhcnJheV9kaW0oYVswXSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW2EubGVuZ3RoXTtcbiAgICB9XG4gIH07XG4gIFxuICAvKipcbiAgICogQ2hlY2tzIGlmIHR3byBhcnJheXMgYXJlIGVxdWFsIGluIHRoZSBzZW5zZSB0aGF0IHRoZXkgY29udGFpbiB0aGUgc2FtZSBlbGVtZW50c1xuICAgKiBhcyBqdWRnZWQgYnkgdGhlIFwiPT1cIiBvcGVyYXRvci4gUmV0dXJucyB0cnVlIG9yIGZhbHNlLlxuICAgKiBBZGFwdGVkIGZyb20gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTQ4NTM5NzQvMTAwMTg0OFxuICAgKi8gXG4gIHZhciBhcnJheV9lcXVhbCA9IGZ1bmN0aW9uIChhMSwgYTIpIHtcbiAgICAgIGlmIChhMS5sZW5ndGggIT0gYTIubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGExLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBuZXN0ZWQgYXJyYXlzXG4gICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYTFbaV0pICYmIEFycmF5LmlzQXJyYXkoYTJbaV0pKSB7XG4gICAgICAgICAgICAgIC8vIHJlY3Vyc2UgaW50byB0aGUgbmVzdGVkIGFycmF5c1xuICAgICAgICAgICAgICBpZiAoIWFycmF5X2VxdWFsKGExW2ldLCBhMltpXSkpIHJldHVybiBmYWxzZTsgICAgICAgXG4gICAgICAgICAgfSAgICAgICAgICAgXG4gICAgICAgICAgZWxzZSBpZiAoYTFbaV0gIT0gYTJbaV0pIHsgXG4gICAgICAgICAgICAgIC8vIFdhcm5pbmcgLSB0d28gZGlmZmVyZW50IG9iamVjdCBpbnN0YW5jZXMgd2lsbCBuZXZlciBiZSBlcXVhbDoge3g6MjB9ICE9IHt4OjIwfVxuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7ICAgXG4gICAgICAgICAgfSAgICAgICAgICAgXG4gICAgICB9ICAgICAgIFxuICAgICAgcmV0dXJuIHRydWU7XG4gIH07XG4gIFxuICAvKipcbiAgICogVHJhdmVyc2VzIGEgcG9zc2libHkgbmVzdGVkIGFycmF5IGEgYW5kIGFwcGxpZXMgZnVuIHRvIGFsbCBcImxlYWYgbm9kZXNcIiwgXG4gICAqIHRoYXQgaXMsIHZhbHVlcyB0aGF0IGFyZSBub3QgYXJyYXlzLiBSZXR1cm5zIGFuIGFycmF5IG9mIHRoZSBzYW1lIHNpemUgYXNcbiAgICogYS5cbiAgICovXG4gIHZhciBuZXN0ZWRfYXJyYXlfYXBwbHkgPSBmdW5jdGlvbihhLCBmdW4pIHtcbiAgICBpZihBcnJheS5pc0FycmF5KGEpKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gbmV3IEFycmF5KGEubGVuZ3RoKTtcbiAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHJlc3VsdFtpXSA9IG5lc3RlZF9hcnJheV9hcHBseShhW2ldLCBmdW4pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZ1bihhKTtcbiAgICB9XG4gIH07XG4gIFxuICAvKiogUmFuZG9taXppbmcgdGhlIGFycmF5IGVsZW1lbnQgb3JkZXIgaW4tcGxhY2UuIFVzaW5nIER1cnN0ZW5mZWxkXG4gICAqIHNodWZmbGUgYWxnb3JpdGhtLiBBZGFwdGVkIGZyb20gaGVyZTogXG4gICAqIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzEyNjQ2ODY0LzEwMDE4NDhcbiAgICovXG4gIGZ1bmN0aW9uIHNodWZmbGVfYXJyYXkoYXJyYXkpIHtcbiAgICAgIGZvciAodmFyIGkgPSBhcnJheS5sZW5ndGggLSAxOyBpID4gMDsgaS0tKSB7XG4gICAgICAgICAgdmFyIGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaSArIDEpKTtcbiAgICAgICAgICB2YXIgdGVtcCA9IGFycmF5W2ldO1xuICAgICAgICAgIGFycmF5W2ldID0gYXJyYXlbal07XG4gICAgICAgICAgYXJyYXlbal0gPSB0ZW1wO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFycmF5O1xuICB9XG4gIFxuICAvKipcbiAgICogRG9lcyB0aGUgc2FtZSB0aGluZyBhcyBuZXN0ZWRfYXJyYXlfYXBwbHksIHRoYXQgaXMsIHRyYXZlcnNlcyBhIHBvc3NpYmx5XG4gICAqIG5lc3RlZCBhcnJheSBhIGFuZCBhcHBsaWVzIGZ1biB0byBhbGwgXCJsZWFmIG5vZGVzXCIgYW5kIHJldHVybnMgYW4gYXJyYXkgXG4gICAqIG9mIHRoZSBzYW1lIHNpemUgYXMgYS4gVGhlIGRpZmZlcmVuY2UgaXMgdGhhdCBuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5XG4gICAqIGJyYW5jaGVzIHJhbmRvbWx5LlxuICAgKi9cbiAgdmFyIG5lc3RlZF9hcnJheV9yYW5kb21fYXBwbHkgPSBmdW5jdGlvbihhLCBmdW4pIHtcbiAgICBpZihBcnJheS5pc0FycmF5KGEpKSB7XG4gICAgICB2YXIgbGVuID0gYS5sZW5ndGg7XG4gICAgICB2YXIgaTtcbiAgICAgIHZhciBhcnJheV9pcyA9IFtdO1xuICAgICAgZm9yKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgYXJyYXlfaXNbaV0gPSBpO1xuICAgICAgfVxuICAgICAgc2h1ZmZsZV9hcnJheShhcnJheV9pcyk7XG4gICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICBcbiAgICAgIGZvcihpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHZhciBhcnJheV9pID0gYXJyYXlfaXNbaV07XG4gICAgICAgIHJlc3VsdFthcnJheV9pXSA9IG5lc3RlZF9hcnJheV9hcHBseShhW2FycmF5X2ldLCBmdW4pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZ1bihhKTtcbiAgICB9XG4gIH07XG4gIFxuICAvKipcbiAgICogQWxsb3dzIGEgcHJldHR5IHdheSBvZiBzZXR0aW5nIGRlZmF1bHQgb3B0aW9ucyB3aGVyZSB0aGUgZGVmdWx0cyBjYW4gYmVcbiAgICogb3ZlcnJpZGRlbiBieSBhbiBvcHRpb25zIG9iamVjdC5cbiAgICogIEBwYXJhbSBvcHRpb25fbmFtZSAtIHRoZSBuYW1lIG9mIHRoZSBvcHRpb24gYXMgYSBzdHJpbmdcbiAgICogIEBwYXJhbSBteV9vcHRpb25zIC0gYW4gb3B0aW9uIG9iamVjdCB0aGF0IGNvdWxkIGhhdmUgb3B0aW9uX25hbWUgXG4gICAqICAgIGFzIGEgbWVtYmVyLlxuICAgKiBAcGFyYW0gZGVmYXVsX3ZhbHVlIC0gZGVmdWx0IHZhbHVlIHRoYXQgaXMgcmV0dXJuZWQgaWYgb3B0aW9uX25hbWUgXG4gICAqICAgaXMgbm90IGRlZmluZWQgaW4gbXlfb3B0aW9ucy5cbiAgICogQGV4YW1wbGVcbiAgICogdmFyIG15X29wdGlvbnMgPSB7cGk6IDMuMTQxNTl9XG4gICAqIHZhciBwaSA9IGdldF9vcHRpb24oXCJwaVwiLCBteV9vcHRpb25zLCAzLjE0KVxuICAgKi9cbiAgLy8gUHJldHR5IHdheSBvZiBzZXR0aW5nIGRlZmF1bHQgb3B0aW9ucyB3aGVyZSB0aGUgZGVmYXVsdHMgY2FuIGJlIG92ZXJyaWRkZW5cbiAgLy8gYnkgYW4gb3B0aW9ucyBvYmplY3QuIEZvciBleGFtcGxlOlxuICAvLyB2YXIgcGkgPSBnZXRfb3B0aW9uKFwicGlcIiwgbXlfb3B0aW9ucywgMy4xNClcbiAgdmFyIGdldF9vcHRpb24gPSBmdW5jdGlvbihvcHRpb25fbmFtZSwgb3B0aW9ucywgZGVmYXVsX3ZhbHVlKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgcmV0dXJuIG9wdGlvbnMuaGFzT3duUHJvcGVydHkob3B0aW9uX25hbWUpICYmIFxuICAgICAgICAgICBvcHRpb25zW29wdGlvbl9uYW1lXSAhPT0gdW5kZWZpbmVkICAmJiBcbiAgICAgICAgICAgb3B0aW9uc1tvcHRpb25fbmFtZV0gIT09IG51bGwgPyBvcHRpb25zW29wdGlvbl9uYW1lXSA6IGRlZmF1bF92YWx1ZTtcbiAgfTtcbiAgXG4gIC8qKiBWZXJzaW9uIG9mIGdldF9vcHRpb24gd2hlcmUgdGhlIG9wdGlvbiBzaG91bGQgYmUgYSBvbmUgb3IgbXVsdGktZGltZW5zaW9uYWxcbiAgICogYXJyYXkgYW5kIHdoZXJlIHRoZSBkZWZhdWx0IGNhbiBiZSBvdmVycmlkZGVuIGVpdGhlciBieSBhIHNjYWxhciBvciBieSBhbiBhcnJheS5cbiAgICogSWYgaXQncyBhIHNjYWxhciB0aGUgdGhhdCBzY2FsYXIgaXMgdXNlZCB0byBpbml0aWFsaXplIGFuIGFycmF5IHdpdGggXG4gICAqIGRpbSBkaW1lbnNpb25zLlxuICAgKiBcbiAgICovXG4gIHZhciBnZXRfbXVsdGlkaW1fb3B0aW9uID0gZnVuY3Rpb24ob3B0aW9uX25hbWUsIG9wdGlvbnMsIGRpbSwgZGVmYXVsX3ZhbHVlKSB7XG4gICAgdmFyIHZhbHVlID0gZ2V0X29wdGlvbihvcHRpb25fbmFtZSwgb3B0aW9ucywgZGVmYXVsX3ZhbHVlKTtcbiAgICAgaWYoISBBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgIHZhbHVlID0gY3JlYXRlX2FycmF5KGRpbSwgdmFsdWUpO1xuICAgICB9IFxuICAgICBpZighIGFycmF5X2VxdWFsKCBhcnJheV9kaW0odmFsdWUpLCBkaW0pKSB7XG4gICAgICAgdGhyb3cgXCJUaGUgb3B0aW9uIFwiICsgb3B0aW9uX25hbWUgKyBcIiBpcyBvZiBkaW1lbnNpb24gW1wiICsgXG4gICAgICAgICAgICAgYXJyYXlfZGltKHZhbHVlKSArIFwiXSBidXQgc2hvdWxkIGJlIFtcIiArIGRpbSArIFwiXS5cIjtcbiAgICB9XG4gICAgIHJldHVybiB2YWx1ZTtcbiAgfTtcbiAgXG4gIC8vLy8vLy8vLy8gRnVuY3Rpb25zIGZvciBoYW5kbGluZyBwYXJhbWV0ZXIgb2JqZWN0cyAvLy8vLy8vLy8vXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIFxuICAvKipcbiAgICogUmV0dXJucyBhIGZpeGVkIChzYW1lIGV2ZXJ5IHRpbWUpIG51bWJlciB0aGF0IGNvdWxkIGJlIHVzZWQgdG8gaW5pdGlhbGl6ZVxuICAgKiBhIHBhcmFtZXRlciBvZiBhIGNlcnRhaW4gdHlwZSwgcG9zc2libHkgd2l0aCBsb3dlciBhbmQgdXBwZXIgYm91bmRzLlxuICAgKiBUaGUgcG9zc2lsZSB0eXBlcyBhcmUgXCJyZWFsXCIsIFwiaW50XCIsIGFuZCBcImJpbmFyeVwiLlxuICAgKi9cbiAgdmFyIHBhcmFtX2luaXRfZml4ZWQgPSBmdW5jdGlvbih0eXBlLCBsb3dlciwgdXBwZXIpIHtcbiAgICBpZihsb3dlciA+IHVwcGVyKSB7XG4gICAgICB0aHJvdyBcIkNhbiBub3QgaW5pdGlhbGl6ZSBwYXJhbWV0ZXIgd2hlcmUgbG93ZXIgYm91bmQgPiB1cHBlciBib3VuZFwiO1xuICAgIH1cbiAgICBpZih0eXBlID09PSBcInJlYWxcIikge1xuICAgICAgaWYobG93ZXIgPT09IC1JbmZpbml0eSAmJiB1cHBlciA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgcmV0dXJuIDAuNTtcbiAgICAgIH0gZWxzZSBpZihsb3dlciA9PT0gLUluZmluaXR5KSB7XG4gICAgICAgIHJldHVybiB1cHBlciAtIDAuNTtcbiAgICAgIH0gZWxzZSBpZih1cHBlciA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgcmV0dXJuIGxvd2VyICsgMC41O1xuICAgICAgfSBlbHNlIGlmKGxvd2VyIDw9IHVwcGVyKSB7XG4gICAgICAgIHJldHVybiAobG93ZXIgKyB1cHBlcikgLyAyO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZih0eXBlID09PSBcImludFwiKSB7XG4gICAgICBpZihsb3dlciA9PT0gLUluZmluaXR5ICYmIHVwcGVyID09PSBJbmZpbml0eSkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICAgIH0gZWxzZSBpZihsb3dlciA9PT0gLUluZmluaXR5KSB7XG4gICAgICAgIHJldHVybiB1cHBlciAtIDE7XG4gICAgICB9IGVsc2UgaWYodXBwZXIgPT09IEluZmluaXR5KSB7XG4gICAgICAgIHJldHVybiBsb3dlciArIDE7XG4gICAgICB9IGVsc2UgaWYobG93ZXIgPD0gdXBwZXIpe1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCgobG93ZXIgKyB1cHBlcikgLyAyKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYodHlwZSA9PT0gXCJiaW5hcnlcIikge1xuICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICAgIHRocm93IFwiQ291bGQgbm90IGluaXRpYWxpemUgcGFyYW1ldGVyIG9mIHR5cGUgXCIgKyB0eXBlICsgXCJbXCIgKyBsb3dlciArIFwiLCBcIiArIHVwcGVyICsgXCJdXCI7XG4gIH07XG4gIFxuICAvKipcbiAgICogQ29tcGxldGVzIHBhcmFtc190b19jb21wbGV0ZSwgYW4gb2JqZWN0IGNvbnRhaW5pbmcgcGFyYW1ldGVyIGRlc2NyaXB0aW9ucywgXG4gICAqIGFuZCBpbml0aWFsaXplcyBub24taW5pdGlhbGl6ZWQgcGFyYW1ldGVycy4gVGhpcyBtb2RpZmllZCB2ZXJzaW9uIG9mXG4gICAqIHBhcmFtc190b19jb21wbGV0ZSBpcyByZXR1cm5lZCBhcyBhIGRlZXAgY29weSBhbmQgbm90IG1vZGlmaWVkIGluIHBsYWNlLlxuICAgKiBJbml0aWFsaXphdGlvbiBpcyBkb25lIGJ5IHN1cHBseWluZyBhIHBhcmFtX2luaXQgZnVuY3Rpb24gd2l0aCBzaWduYXR1cmVcbiAgICogZnVuY3Rpb24odHlwZSwgbG93ZXIsIHVwcGVyKSB0aGF0IHNob3VsZCByZXR1cm4gYSBzaW5nbGUgbnVtYmVyIFxuICAgKiAobGlrZSBwYXJhbV9pbml0X2ZpeGVkLCBmb3IgZXhhbXBsZSkuXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciBwYXJhbXMgPSB7IFwibXVcIjoge1widHlwZVwiOiBcInJlYWxcIn0gfVxuICAgKiBwYXJhbXMgPSBjb21wbGV0ZV9wYXJhbXMocGFyYW1zKTtcbiAgICogLy8gcGFyYW1zIHNob3VsZCBub3cgYmU6XG4gICAqIC8vICB7XCJtdVwiOiB7IFwidHlwZVwiOiBcInJlYWxcIiwgXCJkaW1cIjogWzFdLCBcInVwcGVyXCI6IEluZmluaXR5LFxuICAgKiAvLyAgICAgICAgICAgXCJsb3dlclwiOiAtSW5maW5pdHksIFwiaW5pdFwiOiAwLjUgfX1cbiAgICovIFxuICB2YXIgY29tcGxldGVfcGFyYW1zICA9IGZ1bmN0aW9uKHBhcmFtc190b19jb21wbGV0ZSwgcGFyYW1faW5pdCkge1xuICAgIHZhciBwYXJhbXMgPSBkZWVwX2Nsb25lKHBhcmFtc190b19jb21wbGV0ZSk7XG4gICAgZm9yICh2YXIgcGFyYW1fbmFtZSBpbiBwYXJhbXMpIHsgaWYgKCFwYXJhbXMuaGFzT3duUHJvcGVydHkocGFyYW1fbmFtZSkpIGNvbnRpbnVlO1xuICAgICAgdmFyIHBhcmFtID0gcGFyYW1zW3BhcmFtX25hbWVdO1xuICAgICAgaWYoICFwYXJhbS5oYXNPd25Qcm9wZXJ0eShcInR5cGVcIikpIHtcbiAgICAgICAgcGFyYW0udHlwZSA9IFwicmVhbFwiO1xuICAgICAgfVxuICAgICAgaWYoIXBhcmFtLmhhc093blByb3BlcnR5KFwiZGltXCIpKSB7XG4gICAgICAgIHBhcmFtLmRpbSA9IFsxXTtcbiAgICAgIH1cbiAgICAgIGlmKGlzX251bWJlcihwYXJhbS5kaW0pKSB7XG4gICAgICAgIHBhcmFtLmRpbSA9IFtwYXJhbS5kaW1dO1xuICAgICAgfVxuICAgICAgaWYocGFyYW0udHlwZSA9PSBcImJpbmFyeVwiKSB7XG4gICAgICAgIHBhcmFtLnVwcGVyID0gMTtcbiAgICAgICAgcGFyYW0ubG93ZXIgPSAwO1xuICAgICAgfVxuICAgICAgaWYoIXBhcmFtLmhhc093blByb3BlcnR5KFwidXBwZXJcIikpIHtcbiAgICAgICAgcGFyYW0udXBwZXIgPSBJbmZpbml0eTtcbiAgICAgIH1cbiAgICAgIGlmKCFwYXJhbS5oYXNPd25Qcm9wZXJ0eShcImxvd2VyXCIpKSB7XG4gICAgICAgIHBhcmFtLmxvd2VyID0gLUluZmluaXR5O1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZihwYXJhbS5oYXNPd25Qcm9wZXJ0eShcImluaXRcIikpIHtcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBqdXN0IGEgbnVtYmVyIG9yIGEgbmVzdGVkIGFycmF5IHdlIGxlYXZlIGl0IGFsb25lLCBidXQgaWYuLi5cbiAgICAgICAgaWYoYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pICYmIHR5cGVvZiBwYXJhbS5pbml0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAvLyBwYXJhbS5pbml0IGlzIGEgZnVuY3Rpb24sIHVzZSB0aGF0IHRvIGluaXRpYWxpemUgdGhlIHBhcmFtZXRlci5cbiAgICAgICAgICBwYXJhbS5pbml0ID0gcGFyYW0uaW5pdCgpO1xuICAgICAgICB9IGVsc2UgaWYoIWFycmF5X2VxdWFsKHBhcmFtLmRpbSwgWzFdKSAmJiAhQXJyYXkuaXNBcnJheShwYXJhbS5pbml0KSkge1xuICAgICAgICAvLyBXZSBoYXZlIGEgbXVsdGlkaW1lbnNpb25hbCBwYXJhbWV0ZXIgd2hlcmUgdGhlIHBhcmFtLmluaXQgZXhpc3QgYnV0XG4gICAgICAgIC8vIGlzIG5vdCBhbiBhcnJheS4gVGhlbiBhc3N1bWUgaXQgaXMgYSBudW1iZXIgb3IgYSBmdW5jdGlvbiBhbmQgdXNlXG4gICAgICAgIC8vIGl0IHRvIGluaXRpYWxpemUgdGhlIHBhcmFtZXRlci5cbiAgICAgICAgcGFyYW0uaW5pdCA9IGNyZWF0ZV9hcnJheShwYXJhbS5kaW0sIHBhcmFtLmluaXQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgeyAvLyBXZSB1c2UgdGhlIGRlZmF1bHQgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24uXG4gICAgICAgIGlmKGFycmF5X2VxdWFsKHBhcmFtLmRpbSwgWzFdKSkge1xuICAgICAgICAgIHBhcmFtLmluaXQgPSBwYXJhbV9pbml0KHBhcmFtLnR5cGUsIHBhcmFtLmxvd2VyLCBwYXJhbS51cHBlcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGFyYW0uaW5pdCA9IGNyZWF0ZV9hcnJheShwYXJhbS5kaW0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHBhcmFtX2luaXQocGFyYW0udHlwZSwgcGFyYW0ubG93ZXIsIHBhcmFtLnVwcGVyKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcGFyYW1zO1xuICB9O1xuICBcbiAgXG4gIC8vLy8vLy8vLy8gU3RlcHBlciBGdW5jdGlvbnMgLy8vLy8vLy8vLy9cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBcbiAgXG4gIC8qKlxuICAgKiBAaW50ZXJmYWNlXG4gICAqIEEgU3RlcHBlciBpcyBhbiBvYmplY3QgcmVzcG9uc2libGUgZm9yIHB1c2hpbmcgYXJvdW5kIG9uZVxuICAgKiBvciBtb3JlIHBhcmFtZXRlciB2YWx1ZXMgaW4gYSBzdGF0ZSBhY2NvcmRpbmcgdG8gdGhlIGRpc3RyaWJ1dGlvblxuICAgKiBkZWZpbmVkIGJ5IHRoZSBsb2cgcG9zdGVyaW9yLiBUaGlzIGRlZmluZXMgdGhlIFN0ZXBwZXIgXCJpbnRlcmZhY2VcIixcbiAgICogd2hlcmUgXCJpbnRlcmZhY2VcIiBtZWFucyB0aGF0IFN0ZXBwZXIgZGVmaW5lcyBhIGNsYXNzIHRoYXQgaXMgbmV2ZXJcbiAgICogbWVhbnQgdG8gYmUgaW5zdGFudGlhdGVkLCBidXQganVzdCB0byBiZSBzdWJjbGFzc2VkIGJ5IHNwZWNpYWxpemVkXG4gICAqIHN0ZXBwZXIgZnVuY3Rpb25zLlxuICAgKiBAaW50ZXJmYWNlXG4gICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBwYXJhbWV0ZXIgZGVmaW5pdGlvbnMsIGZvciBleGFtcGxlOlxuICAgKiAgIHtcIm11XCI6IHsgXCJ0eXBlXCI6IFwicmVhbFwiLCBcImRpbVwiOiBbMV0sIFwidXBwZXJcIjogSW5maW5pdHksIFxuICAgKiAgIFwibG93ZXJcIjogLUluZmluaXR5LCBcImluaXRcIjogMC41IH19XG4gICAqICAgVGhlIHBhcmFtZXRlciBkZWZpbml0aW9ucyBhcmUgZXhwZWN0ZWQgdG8gYmUgXCJjb21wbGV0ZVwiLCB0aGF0IGlzLFxuICAgKiAgIHNwZWNpZnlpbmcgYWxsIHJlbGV2YW50IGF0dHJpYnV0ZXMgc3VjaCBhcyBkaW0sIGxvd2VyIGFuZCB1cHBlci5cbiAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzIGluIHBhcmFtc1xuICAgKiAgIChhbmQgcG9zc2libHkgbW9yZSkuIFRoZSBwYXJhbWV0ZXIgbmFtZXMgYXJlIGdpdmVuIGFzIGtleXMgYW5kIHRoZSBzdGF0ZXNcbiAgICogICBhcyBzY2FsYXJzIG9yLCBwb3NzaWJseSBuZXN0ZWQsIGFycmF5cy4gRm9yIGV4YW1wbGU6XG4gICAqICAge211OiAxMCwgc2lnbWE6IDUsIGJldGE6IFsxLCAyLjVdfVxuICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uICp0YWtpbmcgbm8gcGFyYW1ldGVycyogdGhhdCByZXR1cm5zIHRoZVxuICAgKiAgIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIFRoYXQgaXMsIHRoZSB2YWx1ZSBvZiBsb2dfcG9zdFxuICAgKiAgIHNob3VsZCBjaGFuZ2UgaWYgdGhlIHRoZSB2YWx1ZXMgaW4gc3RhdGUgYXJlIGNoYW5nZWQuXG4gIFxuICAgKi9cbiAgdmFyIFN0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCkge1xuICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICB0aGlzLmxvZ19wb3N0ID0gbG9nX3Bvc3Q7XG4gIH07XG4gIFxuICAvKipcbiAgICogVGFrZXMgYSBzdGVwIGluIHRoZSBwYXJhbWV0ZXIgc3BhY2UuIFNob3VsZCByZXR1cm4gdGhlIG5ldyBzdGF0ZSxcbiAgICogYnV0IGlzIG1haW5seSBjYWxsZWQgZm9yIGl0J3Mgc2lkZSBlZmZlY3Qgb2YgbWFraW5nIGEgY2hhbmdlIGluIHRoZVxuICAgKiBzdGF0ZSBvYmplY3QuXG4gICAqL1xuICBTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24oKSB7XG4gICAgdGhyb3cgXCJFdmVyeSBTdGVwcGVyIG5lZWQgdG8gaW1wbGVtZW50IHN0ZXAoKVwiO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIElmIGltcGxlbWVudGVkLCBtYWtlcyB0aGUgc3RlcHBlciBhZGFwdCB3aGlsZSBzdGVwcGluZy5cbiAgICovIFxuICBTdGVwcGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gT3B0aW9uYWwsIHNvbWUgc3RlcHBlcnMgbWlnaHQgbm90IGJlIGFkYXB0aXZlLiAqLyBcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBJZiBpbXBsZW1lbnRlZCwgbWFrZXMgdGhlIHN0ZXBwZXIgY2Vhc2UgYWRhcHRpbmcgd2hpbGUgc3RlcHBpbmcuXG4gICAqLyBcbiAgU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gT3B0aW9uYWwsIHNvbWUgc3RlcHBlcnMgbWlnaHQgbm90IGJlIGFkYXB0aXZlLiAqLyBcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIG9iamVjdCBjb250YWluZyBpbmZvIHJlZ2FyZGluZyB0aGUgc3RlcHBlci5cbiAgICovIFxuICBTdGVwcGVyLnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBpbmZvIGFib3V0IHRoZSBzdGF0ZSBvZiB0aGUgc3RlcHBlci5cbiAgICByZXR1cm4ge307XG4gIH07XG4gIFxuICBcbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn1cbiAgICogQ29uc3RydWN0b3IgZm9yIGFuIG9iamVjdCB0aGF0IGltcGxlbWVudHMgdGhlIG1ldHJvcG9saXMgc3RlcCBpblxuICAgKiB0aGUgQWRhcHRpdmUgTWV0cm9wb2xpcy1XaXRoaW4tR2liYnMgYWxnb3JpdGhtIGluIFwiRXhhbXBsZXMgb2YgQWRhcHRpdmUgTUNNQ1wiXG4gICAqIGJ5IFJvYmVydHMgYW5kIFJvc2VudGhhbCAoMjAwOCkuXG4gICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIHNpbmdsZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbi5cbiAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLlxuICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbG9nIGRlbnNpdHkgdGhhdCBkZXBlbmRzIG9uIHRoZSBzdGF0ZS4gXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci5cbiAgICogQHBhcmFtIGdlbmVyYXRlX3Byb3Bvc2FsIC0gYSBmdW5jdGlvbiByZXR1cm5pbmcgYSBwcm9wb3NhbCAoYXMgYSBudW1iZXIpXG4gICAqIHdpdGggc2lnbmF0dXJlIGZ1bmN0aW9uKHBhcmFtX3N0YXRlLCBsb2dfc2NhbGUpIHdoZXJlIHBhcmFtX3N0YXRlIGlzIGFcbiAgICogbnVtYmVyIGFuZCBsb2dfc2NhbGUgZGVmaW5lcyB0aGUgc2NhbGUgb2YgdGhlIHByb3Bvc2FsIHNvbWVob3cuXG4gICovXG4gIHZhciBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciA9IGZ1bmN0aW9uKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zLCBnZW5lcmF0ZV9wcm9wb3NhbCkge1xuICAgIFN0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCk7XG4gICAgXG4gICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpO1xuICAgIGlmKHBhcmFtX25hbWVzLmxlbmd0aCAgIT0gMSkge1xuICAgICAgdGhyb3cgXCJPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciBjYW4gb25seSBoYW5kbGUgb25lIHBhcmFtZXRlci5cIjtcbiAgICB9XG4gICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07XG4gICAgdmFyIHBhcmFtID0gdGhpcy5wYXJhbXNbdGhpcy5wYXJhbV9uYW1lXTtcbiAgICBpZighYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pKSB7XG4gICAgICB0aHJvdyBcIk9uZWRpbU1ldHJvcG9saXNTdGVwcGVyIGNhbiBvbmx5IGhhbmRsZSBvbmUgb25lLWRpbWVuc2lvbmFsIHBhcmFtZXRlci5cIjtcbiAgICB9XG4gICAgdGhpcy5sb3dlciA9IHBhcmFtLmxvd2VyO1xuICAgIHRoaXMudXBwZXIgPSBwYXJhbS51cHBlcjtcbiAgICBcbiAgICB0aGlzLnByb3BfbG9nX3NjYWxlICAgICA9IGdldF9vcHRpb24oXCJwcm9wX2xvZ19zY2FsZVwiLCBvcHRpb25zLCAwKTtcbiAgICB0aGlzLmJhdGNoX3NpemUgICAgICAgICA9IGdldF9vcHRpb24oXCJiYXRjaF9zaXplXCIsIG9wdGlvbnMsIDUwKTtcbiAgICB0aGlzLm1heF9hZGFwdGF0aW9uICAgICA9IGdldF9vcHRpb24oXCJtYXhfYWRhcHRhdGlvblwiLCBvcHRpb25zLCAwLjMzKTtcbiAgICB0aGlzLmluaXRpYWxfYWRhcHRhdGlvbiA9IGdldF9vcHRpb24oXCJpbml0aWFsX2FkYXB0YXRpb25cIiwgb3B0aW9ucywgMS4wKTtcbiAgICB0aGlzLnRhcmdldF9hY2NlcHRfcmF0ZSA9IGdldF9vcHRpb24oXCJ0YXJnZXRfYWNjZXB0X3JhdGVcIiwgb3B0aW9ucywgMC40NCk7XG4gICAgdGhpcy5pc19hZGFwdGluZyAgICAgICAgPSBnZXRfb3B0aW9uKFwiaXNfYWRhcHRpbmdcIiwgb3B0aW9ucywgdHJ1ZSk7XG4gICAgXG4gICAgdGhpcy5nZW5lcmF0ZV9wcm9wb3NhbCA9IGdlbmVyYXRlX3Byb3Bvc2FsO1xuICAgIFxuICAgIHRoaXMuYWNjZXB0YW5jZV9jb3VudCA9IDA7XG4gICAgdGhpcy5iYXRjaF9jb3VudCA9IDA7XG4gICAgdGhpcy5pdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uID0gMDsgIFxuICB9O1xuICBcbiAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7IFxuICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlcjtcbiAgXG4gIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGFyYW1fc3RhdGUgPSB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV07XG4gICAgICB2YXIgcGFyYW1fcHJvcG9zYWwgPSB0aGlzLmdlbmVyYXRlX3Byb3Bvc2FsKHBhcmFtX3N0YXRlLCB0aGlzLnByb3BfbG9nX3NjYWxlKTtcbiAgICAgIGlmKHBhcmFtX3Byb3Bvc2FsIDwgdGhpcy5sb3dlciB8fCBwYXJhbV9wcm9wb3NhbCA+IHRoaXMudXBwZXIpIHtcbiAgICAgICAgLy8gT3V0c2lkZSBvZiBsaW1pdHMgb2YgdGhlIHBhcmFtZXRlciwgcmVqZWN0IHRoZSBwcm9wb3NhbCBcbiAgICAgICAgLy8gYW5kIHN0YXkgYXQgdGhlIGN1cnJlbnQgc3RhdGUuXG4gICAgICB9IGVsc2UgeyAvLyBtYWtlIGEgTWV0cm9wb2xpcyBzdGVwXG4gICAgICAgIHZhciBjdXJyX2xvZ19kZW5zID0gdGhpcy5sb2dfcG9zdCgpO1xuICAgICAgICB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0gPSBwYXJhbV9wcm9wb3NhbDtcbiAgICAgICAgdmFyIHByb3BfbG9nX2RlbnMgPSB0aGlzLmxvZ19wb3N0KCk7XG4gICAgICAgIHZhciBhY2NlcHRfcHJvYiA9IE1hdGguZXhwKHByb3BfbG9nX2RlbnMgLSBjdXJyX2xvZ19kZW5zKTtcbiAgICAgICAgaWYoYWNjZXB0X3Byb2IgPiBNYXRoLnJhbmRvbSgpKSB7XG4gICAgICAgICAgLy8gV2UgZG8gbm90aGluZyBhcyB0aGUgc3RhdGUgb2YgcGFyYW0gaGFzIGFscmVhZHkgYmVlbiBjaGFuZ2VkIHRvIHRoZSBwcm9wb3NhbFxuICAgICAgICAgIGlmKHRoaXMuaXNfYWRhcHRpbmcpIHRoaXMuYWNjZXB0YW5jZV9jb3VudCsrIDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyByZXZlcnQgc3RhdGUgYmFjayB0byB0aGUgb2xkIHN0YXRlIG9mIHBhcmFtXG4gICAgICAgICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gcGFyYW1fc3RhdGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmKHRoaXMuaXNfYWRhcHRpbmcpIHtcbiAgICAgICAgdGhpcy5pdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uICsrO1xuICAgICAgICBpZih0aGlzLml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24gPj0gdGhpcy5iYXRjaF9zaXplKSB7IC8vIHRoZW4gYWRhcHRcbiAgICAgICAgICB0aGlzLmJhdGNoX2NvdW50ICsrO1xuICAgICAgICAgIHZhciBsb2dfc2RfYWRqdXN0bWVudCA9IFxuICAgICAgICAgICAgTWF0aC5taW4odGhpcy5tYXhfYWRhcHRhdGlvbiwgXG4gICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxfYWRhcHRhdGlvbiAvIE1hdGguc3FydCh0aGlzLmJhdGNoX2NvdW50KSk7XG4gICAgICAgICAgaWYodGhpcy5hY2NlcHRhbmNlX2NvdW50IC8gdGhpcy5iYXRjaF9zaXplID4gdGhpcy50YXJnZXRfYWNjZXB0X3JhdGUpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcF9sb2dfc2NhbGUgKz0gbG9nX3NkX2FkanVzdG1lbnQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucHJvcF9sb2dfc2NhbGUgLT0gbG9nX3NkX2FkanVzdG1lbnQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuYWNjZXB0YW5jZV9jb3VudCA9IDA7XG4gICAgICAgICAgdGhpcy5pdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uID0gMDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXTtcbiAgfTtcbiAgXG4gIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5pc19hZGFwdGluZyA9IHRydWU7XG4gIH07XG4gIFxuICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5pc19hZGFwdGluZyA9IGZhbHNlO1xuICB9O1xuICBcbiAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcHJvcF9sb2dfc2NhbGU6IHRoaXMucHJvcF9sb2dfc2NhbGUsXG4gICAgICBpc19hZGFwdGluZzogdGhpcy5pc19hZGFwdGluZyxcbiAgICAgIGFjY2VwdGFuY2VfY291bnQ6IHRoaXMuYWNjZXB0YW5jZV9jb3VudCxcbiAgICAgIGl0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb246IHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbixcbiAgICAgIGJhdGNoX2NvdW50OiB0aGlzLmJhdGNoX2NvdW50XG4gICAgfTtcbiAgfTtcbiAgXG4gIFxuICAvKipcbiAgICogRnVuY3Rpb24gcmV0dXJuaW5nIGEgTm9ybWFsIHByb3Bvc2FsLlxuICAgKi9cbiAgdmFyIG5vcm1hbF9wcm9wb3NhbCA9IGZ1bmN0aW9uKHBhcmFtX3N0YXRlLCBwcm9wX2xvZ19zY2FsZSkge1xuICAgIHJldHVybiBybm9ybShwYXJhbV9zdGF0ZSAsIE1hdGguZXhwKHByb3BfbG9nX3NjYWxlKSk7XG4gIH07XG4gIFxuICAvKipcbiAgICogQGNsYXNzXG4gICAqIEBhdWdtZW50cyB7T25lZGltTWV0cm9wb2xpc1N0ZXBwZXJ9XG4gICAqIEEgXCJzdWJjbGFzc1wiIG9mIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyIG1ha2luZyBjb250aW5vdXMgTm9ybWFsIHByb3Bvc2Fscy5cbiAgICovXG4gIHZhciBSZWFsTWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykge1xuICAgIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIG5vcm1hbF9wcm9wb3NhbCk7XG4gIH07XG4gIFxuICBSZWFsTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUpOyBcbiAgUmVhbE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFJlYWxNZXRyb3BvbGlzU3RlcHBlcjtcbiAgXG4gIC8qKlxuICAgKiBGdW5jdGlvbiByZXR1cm5pbmcgYSBkaXNjcmV0aXplZCBOb3JtYWwgcHJvcG9zYWwuXG4gICAqL1xuICB2YXIgZGlzY3JldGVfbm9ybWFsX3Byb3Bvc2FsID0gZnVuY3Rpb24ocGFyYW1fc3RhdGUsIHByb3BfbG9nX3NjYWxlKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQocm5vcm0ocGFyYW1fc3RhdGUgLCBNYXRoLmV4cChwcm9wX2xvZ19zY2FsZSkpKTtcbiAgfTtcbiAgXG4gICAgLyoqXG4gICAqIEBjbGFzc1xuICAgKiBAYXVnbWVudHMge09uZWRpbU1ldHJvcG9saXNTdGVwcGVyfVxuICAgKiBBIFwic3ViY2xhc3NcIiBvZiBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciBtYWtpbmcgZGlzY3JldGl6ZWQgTm9ybWFsIHByb3Bvc2Fscy5cbiAgICovXG4gIHZhciBJbnRNZXRyb3BvbGlzU3RlcHBlciA9IGZ1bmN0aW9uKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7XG4gICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgZGlzY3JldGVfbm9ybWFsX3Byb3Bvc2FsKTtcbiAgfTtcbiAgXG4gIEludE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlKTsgXG4gIEludE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEludE1ldHJvcG9saXNTdGVwcGVyO1xuICBcbiAgXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICogQGltcGxlbWVudHMge1N0ZXBwZXJ9XG4gICAqIENvbnN0cnVjdG9yIGZvciBhbiBvYmplY3QgdGhhdCBpbXBsZW1lbnRzIHRoZSBtZXRyb3BvbGlzIHN0ZXAgaW5cbiAgICogdGhlIEFkYXB0aXZlIE1ldHJvcG9saXMtV2l0aGluLUdpYmJzIGFsZ29yaXRobSBpbiBcIkV4YW1wbGVzIG9mIEFkYXB0aXZlIE1DTUNcIlxuICAgKiBieSBSb2JlcnRzIGFuZCBSb3NlbnRoYWwgKDIwMDgpIGZvciBwb3NzaWJseSBtdWx0aWRpbWVuc2lvbmFsIGFycmF5cy4gVGhhdFxuICAgKiBpcywgaW5zdGVhZCBvZiBqdXN0IHRha2luZyBhIHN0ZXAgZm9yIGEgb25lLWRpbWVuc2lvbmFsIHBhcmFtZXRlciBsaWtlIFxuICAgKiBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciwgdGhpcyBTdGVwcGVyIGlzIHJlc3BvbnNpYmxlIGZvciB0YWtpbmcgc3RlcHMgXG4gICAqIGZvciBhIG11bHRpZGltZW5zaW9uYWwgYXJyYXkuIEl0J3Mgc3RpbGwgcHJldHR5IGR1bWIgYW5kIGp1c3QgdGFrZXNcbiAgICogb25lLWRpbWVuc2lvbmFsIHN0ZXBzIGZvciBlYWNoIHBhcmFtZXRlciBjb21wb25lbnQsIHRob3VnaC5cbiAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgc2luZ2xlIHBhcmFtZXRlciBkZWZpbml0aW9uIGZvciBhIFxuICAgKiAgIG11bHRpZGltZW5zaW9uYWwgcGFyYW1ldGVyLlxuICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuXG4gICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiBcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIHRoZSBzdGVwcGVyLlxuICAgKiBAcGFyYW0gU3ViU3RlcHBlciAtIGEgY29uc3RydWN0b3IgZm9yIHRoZSB0eXBlIG9mIG9uZSBkaW1lbnNpb25hbCBTdGVwcGVyIHRvIGFwcGx5IG9uXG4gICAqICAgYWxsIHRoZSBjb21wb25lbnRzIG9mIHRoZSBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlci5cbiAgKi9cbiAgdmFyIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgU3ViU3RlcHBlcikge1xuICAgIFN0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCk7XG4gICAgXG4gICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpO1xuICAgIGlmKHBhcmFtX25hbWVzLmxlbmd0aCAgIT0gMSkge1xuICAgICAgdGhyb3cgXCJNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIGNhbid0IGhhbmRsZSBtb3JlIHRoYW4gb25lIHBhcmFtZXRlci5cIjtcbiAgICB9XG4gICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07XG4gICAgdmFyIHBhcmFtID0gdGhpcy5wYXJhbXNbdGhpcy5wYXJhbV9uYW1lXTtcbiAgICB0aGlzLmxvd2VyID0gcGFyYW0ubG93ZXI7XG4gICAgdGhpcy51cHBlciA9IHBhcmFtLnVwcGVyO1xuICAgIHRoaXMuZGltID0gcGFyYW0uZGltO1xuICBcbiAgICB0aGlzLnByb3BfbG9nX3NjYWxlICAgICA9IGdldF9tdWx0aWRpbV9vcHRpb24oXCJwcm9wX2xvZ19zY2FsZVwiLCBvcHRpb25zLCB0aGlzLmRpbSwgMCk7XG4gICAgdGhpcy5iYXRjaF9zaXplICAgICAgICAgPSBnZXRfbXVsdGlkaW1fb3B0aW9uKFwiYmF0Y2hfc2l6ZVwiLCBvcHRpb25zLCB0aGlzLmRpbSwgNTApO1xuICAgIHRoaXMubWF4X2FkYXB0YXRpb24gICAgID0gZ2V0X211bHRpZGltX29wdGlvbihcIm1heF9hZGFwdGF0aW9uXCIsIG9wdGlvbnMsIHRoaXMuZGltLCAwLjMzKTtcbiAgICB0aGlzLmluaXRpYWxfYWRhcHRhdGlvbiA9IGdldF9tdWx0aWRpbV9vcHRpb24oXCJpbml0aWFsX2FkYXB0YXRpb25cIiwgb3B0aW9ucywgdGhpcy5kaW0sIDEuMCk7XG4gICAgdGhpcy50YXJnZXRfYWNjZXB0X3JhdGUgPSBnZXRfbXVsdGlkaW1fb3B0aW9uKFwidGFyZ2V0X2FjY2VwdF9yYXRlXCIsIG9wdGlvbnMsIHRoaXMuZGltLCAwLjQ0KTtcbiAgICB0aGlzLmlzX2FkYXB0aW5nICAgICAgICA9IGdldF9tdWx0aWRpbV9vcHRpb24oXCJpc19hZGFwdGluZ1wiLCBvcHRpb25zLCB0aGlzLmRpbSwgdHJ1ZSk7XG4gICAgXG4gICAgLy8gVGhpcyBoYWNrIGJlbG93IGlzIGEgcmVjdXJzaXZlIGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBhbiBhcnJheSBvZiBcbiAgICAvLyBvbmUgZGltZW5zaW9uYWwgc3RlcHBlcnMgYWNjb3JkaW5nIHRvIGRpbS5cbiAgICB2YXIgY3JlYXRlX3N1YnN0ZXBwZXJzID0gXG4gICAgICBmdW5jdGlvbihkaW0sIHN1YnN0YXRlLCBsb2dfcG9zdCwgcHJvcF9sb2dfc2NhbGUsIGJhdGNoX3NpemUsIG1heF9hZGFwdGF0aW9uLCBpbml0aWFsX2FkYXB0YXRpb24sIHRhcmdldF9hY2NlcHRfcmF0ZSwgaXNfYWRhcHRpbmcpIHtcbiAgICAgIHZhciBzdWJzdGVwcGVycyA9IFtdO1xuICAgICAgaWYoZGltLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHtcbiAgICAgICAgICB2YXIgc3Vib3B0aW9ucyA9IHtwcm9wX2xvZ19zY2FsZTogcHJvcF9sb2dfc2NhbGVbaV0sIGJhdGNoX3NpemU6IGJhdGNoX3NpemVbaV0sXG4gICAgICAgICAgICBtYXhfYWRhcHRhdGlvbjogbWF4X2FkYXB0YXRpb25baV0sIGluaXRpYWxfYWRhcHRhdGlvbjogaW5pdGlhbF9hZGFwdGF0aW9uW2ldLFxuICAgICAgICAgICAgdGFyZ2V0X2FjY2VwdF9yYXRlOiB0YXJnZXRfYWNjZXB0X3JhdGVbaV0sIGlzX2FkYXB0aW5nOiBpc19hZGFwdGluZ1tpXX07XG4gICAgICAgICAgICB2YXIgc3VicGFyYW0gPSB7fTtcbiAgICAgICAgICAgIHN1YnBhcmFtW2ldID0gZGVlcF9jbG9uZShwYXJhbSk7XG4gICAgICAgICAgICBzdWJwYXJhbVtpXS5kaW0gPSBbMV07IC8vIEFzIHRoaXMgc2hvdWxkIG5vdyBiZSBhIG9uZS1kaW0gcGFyYW1ldGVyXG4gICAgICAgICAgICBkZWxldGUgc3VicGFyYW1baV0uaW5pdDsgLy8gQXMgaXQgc291bGQgbm90IGJlIG5lZWRlZFxuICAgICAgICAgIHN1YnN0ZXBwZXJzW2ldID0gbmV3IFN1YlN0ZXBwZXIoc3VicGFyYW0sIHN1YnN0YXRlLCBsb2dfcG9zdCwgc3Vib3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBkaW1bMF07IGkrKykge1xuICAgICAgICAgIHN1YnN0ZXBwZXJzW2ldID0gY3JlYXRlX3N1YnN0ZXBwZXJzKGRpbS5zbGljZSgxKSwgc3Vic3RhdGVbaV0sIGxvZ19wb3N0LCBwcm9wX2xvZ19zY2FsZVtpXSwgXG4gICAgICAgICAgICBiYXRjaF9zaXplW2ldLCBtYXhfYWRhcHRhdGlvbltpXSwgaW5pdGlhbF9hZGFwdGF0aW9uW2ldLCB0YXJnZXRfYWNjZXB0X3JhdGVbaV0sIGlzX2FkYXB0aW5nW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHN1YnN0ZXBwZXJzO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5zdWJzdGVwcGVycyA9IGNyZWF0ZV9zdWJzdGVwcGVycyh0aGlzLmRpbSwgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdLCB0aGlzLmxvZ19wb3N0LFxuICAgICAgdGhpcy5wcm9wX2xvZ19zY2FsZSwgdGhpcy5iYXRjaF9zaXplLCB0aGlzLm1heF9hZGFwdGF0aW9uLCB0aGlzLmluaXRpYWxfYWRhcHRhdGlvbixcbiAgICAgIHRoaXMudGFyZ2V0X2FjY2VwdF9yYXRlLCB0aGlzLmlzX2FkYXB0aW5nKTtcbiAgICBcbiAgfTtcbiAgXG4gIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7IFxuICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI7XG4gIFxuICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gR28gdGhyb3VnaCB0aGUgc3Vic3RlcHBlcnMgaW4gYSByYW5kb20gb3JkZXIgYW5kIGNhbGwgc3RlcCgpIG9uIHRoZW0uXG4gICAgcmV0dXJuIG5lc3RlZF9hcnJheV9yYW5kb21fYXBwbHkodGhpcy5zdWJzdGVwcGVycywgZnVuY3Rpb24oc3Vic3RlcHBlcikge3JldHVybiBzdWJzdGVwcGVyLnN0ZXAoKTsgfSk7XG4gIH07XG4gIFxuICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgbmVzdGVkX2FycmF5X2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uKHN1YnN0ZXBwZXIpIHtzdWJzdGVwcGVyLnN0YXJ0X2FkYXB0YXRpb24oKTsgfSk7XG4gIH07XG4gIFxuICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5zdG9wX2FkYXB0YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICBuZXN0ZWRfYXJyYXlfYXBwbHkodGhpcy5zdWJzdGVwcGVycywgZnVuY3Rpb24oc3Vic3RlcHBlcikge3N1YnN0ZXBwZXIuc3RvcF9hZGFwdGF0aW9uKCk7IH0pO1xuICB9O1xuICBcbiAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXN0ZWRfYXJyYXlfYXBwbHkodGhpcy5zdWJzdGVwcGVycywgZnVuY3Rpb24oc3Vic3RlcHBlcikge1xuICAgICAgcmV0dXJuIHN1YnN0ZXBwZXIuaW5mbygpOyBcbiAgICB9KTtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICogQGF1Z21lbnRzIHtNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyfVxuICAgKiBBIFwic3ViY2xhc3NcIiBvZiBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIG1ha2luZyBjb250aW5vdXMgTm9ybWFsIHByb3Bvc2Fscy5cbiAgICovXG4gIHZhciBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciA9IGZ1bmN0aW9uKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7XG4gICAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zLCBSZWFsTWV0cm9wb2xpc1N0ZXBwZXIpO1xuICB9O1xuICBcbiAgTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSk7IFxuICBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjtcblxuICAvKipcbiAgICogQGNsYXNzXG4gICAqIEBhdWdtZW50cyB7TXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcn1cbiAgICogQSBcInN1YmNsYXNzXCIgb2YgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciBtYWtpbmcgZGlzY3JldGl6ZWQgTm9ybWFsIHByb3Bvc2Fscy5cbiAgICovICAgIFxuICB2YXIgTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciA9IGZ1bmN0aW9uKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7XG4gICAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zLCBJbnRNZXRyb3BvbGlzU3RlcHBlcik7XG4gIH07XG4gIFxuICBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUpOyBcbiAgTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyO1xuICBcbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn1cbiAgICogQ29uc3RydWN0b3IgZm9yIGFuIG9iamVjdCB0aGF0IGltcGxlbWVudHMgYSBzdGVwIGZvciBhIGJpbmFyeSBwYXJhbWV0ZXIuXG4gICAqIFRoaXMgaXMgZG9uZSBieSBldmFsdWF0aW5nIHRoZSBsb2cgcG9zdGVyaW9yIGZvciBib3RoIHN0YXRlcyBvZiB0aGVcbiAgICogcGFyYW1ldGVyIGFuZCB0aGVuIHNlbGVjdGluZyBhIHN0YXRlIHJhbmRvbWx5IHdpdGggcHJvYmFiaWxpdHkgcmVsYXRpdmUgXG4gICAqIHRvIHRoZSBwb3N0ZXJpb3Igb2YgZWFjaCBzdGF0ZS5cbiAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgc2luZ2xlIHBhcmFtZXRlciBkZWZpbml0aW9uLlxuICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuXG4gICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiBcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIHRoZSBzdGVwcGVyLlxuICAqL1xuICB2YXIgQmluYXJ5U3RlcHBlciA9IGZ1bmN0aW9uKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7XG4gICAgU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0KTtcbiAgICB2YXIgcGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7XG4gICAgaWYocGFyYW1fbmFtZXMubGVuZ3RoICA9PSAxKSB7XG4gICAgICB0aGlzLnBhcmFtX25hbWUgPSBwYXJhbV9uYW1lc1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgXCJCaW5hcnlTdGVwcGVyIGNhbid0IGhhbmRsZSBtb3JlIHRoYW4gb25lIHBhcmFtZXRlci5cIjtcbiAgICB9XG4gIH07XG4gIFxuICBCaW5hcnlTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOyBcbiAgQmluYXJ5U3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCaW5hcnlTdGVwcGVyO1xuICBcbiAgQmluYXJ5U3RlcHBlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSA9IDA7XG4gICAgdmFyIHplcm9fbG9nX2RlbnMgPSB0aGlzLmxvZ19wb3N0KCk7XG4gICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gMTtcbiAgICB2YXIgb25lX2xvZ19kZW5zID0gdGhpcy5sb2dfcG9zdCgpO1xuICAgIHZhciBtYXhfbG9nX2RlbnMgPSBNYXRoLm1heCh6ZXJvX2xvZ19kZW5zLCBvbmVfbG9nX2RlbnMpO1xuICAgIHplcm9fbG9nX2RlbnMgLT0gbWF4X2xvZ19kZW5zO1xuICAgIG9uZV9sb2dfZGVucyAtPSBtYXhfbG9nX2RlbnM7XG4gICAgdmFyIHplcm9fcHJvYiA9IE1hdGguZXhwKHplcm9fbG9nX2RlbnMgLSBNYXRoLmxvZyggTWF0aC5leHAoemVyb19sb2dfZGVucykgKyBNYXRoLmV4cChvbmVfbG9nX2RlbnMpICkgKTtcbiAgICBpZihNYXRoLnJhbmRvbSgpIDwgemVyb19wcm9iKSB7XG4gICAgICB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0gPSAwO1xuICAgICAgcmV0dXJuIDA7XG4gICAgfSAvLyBlbHNlIGtlZXAgdGhlIHBhcmFtIGF0IDEgLlxuICAgIHJldHVybiAxO1xuICB9O1xuICBcbiAgICAvKipcbiAgICogQGNsYXNzXG4gICAqIEBpbXBsZW1lbnRzIHtTdGVwcGVyfVxuICAgKiBKdXN0IGxpa2UgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciB0aGlzIFN0ZXBwZXIgdGFrZXMgYSBzdGVwcyBmb3JcbiAgICogYSBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlciBieSB1cGRhdGluZyBlYWNoIGNvbXBvbmVudCBpbiB0dXJuLiBUaGUgZGlmZmVyZW5jZVxuICAgKiBpcyB0aGF0IHRoaXMgc3RlcHBlciB3b3JrcyBvbiBiaW5hcnkgcGFyYW1ldGVycy5cbiAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgc2luZ2xlIHBhcmFtZXRlciBkZWZpbml0aW9uIGZvciBhIFxuICAgKiAgIG11bHRpZGltZW5zaW9uYWwgcGFyYW1ldGVyLlxuICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuXG4gICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiBcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIHRoZSBzdGVwcGVyLlxuICAqL1xuICB2YXIgQmluYXJ5Q29tcG9uZW50U3RlcHBlciA9IGZ1bmN0aW9uKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7XG4gICAgU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0KTtcbiAgICBcbiAgICB2YXIgcGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7XG4gICAgaWYocGFyYW1fbmFtZXMubGVuZ3RoICA9PSAxKSB7XG4gICAgICB0aGlzLnBhcmFtX25hbWUgPSBwYXJhbV9uYW1lc1swXTtcbiAgICAgIHZhciBwYXJhbSA9IHRoaXMucGFyYW1zW3RoaXMucGFyYW1fbmFtZV07XG4gICAgICB0aGlzLmRpbSA9IHBhcmFtLmRpbTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgXCJCaW5hcnlDb21wb25lbnRTdGVwcGVyIGNhbid0IGhhbmRsZSBtb3JlIHRoYW4gb25lIHBhcmFtZXRlci5cIjtcbiAgICB9XG4gICAgXG4gICAgdmFyIGNyZWF0ZV9zdWJzdGVwcGVycyA9IFxuICAgICAgZnVuY3Rpb24oZGltLCBzdWJzdGF0ZSwgbG9nX3Bvc3QpIHtcbiAgICAgIHZhciBzdWJzdGVwcGVycyA9IFtdO1xuICAgICAgdmFyIGk7XG4gICAgICBpZihkaW0ubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGZvcihpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7XG4gICAgICAgICAgdmFyIHN1YnBhcmFtcyA9IHt9O1xuICAgICAgICAgIHN1YnBhcmFtc1tpXSA9IHBhcmFtO1xuICAgICAgICAgIHN1YnN0ZXBwZXJzW2ldID0gbmV3IEJpbmFyeVN0ZXBwZXIoc3VicGFyYW1zLCBzdWJzdGF0ZSwgbG9nX3Bvc3QpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykge1xuICAgICAgICAgIHN1YnN0ZXBwZXJzW2ldID0gY3JlYXRlX3N1YnN0ZXBwZXJzKGRpbS5zbGljZSgxKSwgc3Vic3RhdGVbaV0sIGxvZ19wb3N0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHN1YnN0ZXBwZXJzO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5zdWJzdGVwcGVycyA9IGNyZWF0ZV9zdWJzdGVwcGVycyh0aGlzLmRpbSwgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdLCB0aGlzLmxvZ19wb3N0KTtcbiAgfTtcbiAgXG4gIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7IFxuICBCaW5hcnlDb21wb25lbnRTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEJpbmFyeUNvbXBvbmVudFN0ZXBwZXI7XG4gIFxuICBCaW5hcnlDb21wb25lbnRTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gR28gdGhyb3VnaCB0aGUgc3Vic3RlcHBlcnMgaW4gYSByYW5kb20gb3JkZXIgYW5kIGNhbGwgc3RlcCgpIG9uIHRoZW0uXG4gICAgcmV0dXJuIG5lc3RlZF9hcnJheV9yYW5kb21fYXBwbHkodGhpcy5zdWJzdGVwcGVycywgZnVuY3Rpb24oc3Vic3RlcHBlcikge3JldHVybiBzdWJzdGVwcGVyLnN0ZXAoKTsgfSk7XG4gIH07XG4gIFxuICAvKipcbiAgICogQGNsYXNzXG4gICAqIEBpbXBsZW1lbnRzIHtTdGVwcGVyfVxuICAgKiBUaGlzIHN0ZXBwZXIgY2FuIGJlIHJlc3BvbnNpYmxlIGZvciB0YWtpbmcgYSBzdGVwIGZvciBvbmUgb3IgbW9yZSBwYXJhbWV0ZXJzLlxuICAgKiBGb3IgcmVhbCBhbmQgaW50IHBhcmFtZXRlcnMgaXQgdGFrZXMgTWV0cm9wb2xpcyB3aXRoaW4gR2liYnMgc3RlcHMsIGFuZCBmb3IgXG4gICAqIGJpbmFyeSBwYXJhbWV0ZXJzIGl0IGRvZXMgZXZhbHVhdGVzIHRoZSBwb3N0ZXJpb3IgZm9yIGJvdGggcGFyYW10ZXIgdmFsdWVzIGFuZFxuICAgKiByYW5kb21seSBjaGFuZ2VzIHRvIGEgY2VydGFpbiB2YWx1ZSBwcm9wb3J0aW9uYWxseSB0byB0aGF0IHZhbHVlJ3MgcG9zdGVyaW9yXG4gICAqICh0aGlzIGlzIGFsc28gZG9uZSBmb3IgZWFjaCBwYXJhbWV0ZXIsIHNvIGFsc28gYSAqIHdpdGhpbiBHaWJicyBhcHByb2FjaCkuXG4gICAqIFRoaXMgc3RlcHBlciBpcyBhbHNvIGFkYXB0aXZlIGFuZCBjYW4gYmUgZWZmaWNpZW50IHdoZW4gdGhlIG51bWJlciBvZiBwYXJhbWV0ZXJzXG4gICAqIGFyZSBub3QgdG9vIGhpZ2ggYW5kIHRoZSBjb3JyZWxhdGlvbnMgYmV0d2VlbiBwYXJhbWV0ZXJzIGFyZSBsb3cuXG4gICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIG9uZSBvciBtb3JlIHBhcmFtZXRlciBkZWZpbml0aW9uc1xuICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuXG4gICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiBcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIHRoZSBzdGVwcGVyLlxuICAqL1xuICB2YXIgQW13Z1N0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykge1xuICAgIFN0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCk7XG4gICAgdGhpcy5wYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTtcbiAgICB0aGlzLnN1YnN0ZXBwZXJzID0gW107XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMucGFyYW1fbmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBwYXJhbSA9IHBhcmFtc1t0aGlzLnBhcmFtX25hbWVzW2ldXTtcbiAgICAgIHZhciBTZWxlY3RTdGVwcGVyO1xuICAgICAgc3dpdGNoIChwYXJhbS50eXBlKSB7XG4gICAgICAgIGNhc2UgXCJyZWFsXCI6XG4gICAgICAgICAgaWYoYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pKSB7XG4gICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gUmVhbE1ldHJvcG9saXNTdGVwcGVyO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiaW50XCI6XG4gICAgICAgICAgaWYoYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pKSB7XG4gICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gSW50TWV0cm9wb2xpc1N0ZXBwZXI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImJpbmFyeVwiOlxuICAgICAgICAgIGlmKGFycmF5X2VxdWFsKHBhcmFtLmRpbSwgWzFdKSkge1xuICAgICAgICAgICAgU2VsZWN0U3RlcHBlciA9IEJpbmFyeVN0ZXBwZXI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBCaW5hcnlDb21wb25lbnRTdGVwcGVyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aHJvdyBcIkFtd2dTdGVwcGVyIGNhbid0IGhhbmRsZSBwYXJhbWV0ZXIgXCIgKyB0aGlzLnBhcmFtX25hbWVzW2ldICArXCIgd2l0aCB0eXBlIFwiICsgcGFyYW0udHlwZTsgXG4gICAgICB9XG4gICAgICB2YXIgcGFyYW1fb2JqZWN0X3dyYXAgPSB7fTtcbiAgICAgIHBhcmFtX29iamVjdF93cmFwW3RoaXMucGFyYW1fbmFtZXNbaV1dID0gcGFyYW07XG4gICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgIHZhciBwYXJhbV9vcHRpb25zID0gb3B0aW9ucy5wYXJhbXMgJiYgb3B0aW9ucy5wYXJhbXNbdGhpcy5wYXJhbV9uYW1lc1tpXV0gfHwge307XG4gICAgICBwYXJhbV9vcHRpb25zLnByb3BfbG9nX3NjYWxlICAgICA9IHBhcmFtX29wdGlvbnMucHJvcF9sb2dfc2NhbGUgICAgIHx8IG9wdGlvbnMucHJvcF9sb2dfc2NhbGU7IFxuICAgICAgcGFyYW1fb3B0aW9ucy5iYXRjaF9zaXplICAgICAgICAgPSBwYXJhbV9vcHRpb25zLmJhdGNoX3NpemUgICAgICAgICB8fCBvcHRpb25zLmJhdGNoX3NpemU7IFxuICAgICAgcGFyYW1fb3B0aW9ucy5tYXhfYWRhcHRhdGlvbiAgICAgPSBwYXJhbV9vcHRpb25zLm1heF9hZGFwdGF0aW9uICAgICB8fCBvcHRpb25zLm1heF9hZGFwdGF0aW9uO1xuICAgICAgcGFyYW1fb3B0aW9ucy5pbml0aWFsX2FkYXB0YXRpb24gPSBwYXJhbV9vcHRpb25zLmluaXRpYWxfYWRhcHRhdGlvbiB8fCBvcHRpb25zLmluaXRpYWxfYWRhcHRhdGlvbjtcbiAgICAgIHBhcmFtX29wdGlvbnMudGFyZ2V0X2FjY2VwdF9yYXRlID0gcGFyYW1fb3B0aW9ucy50YXJnZXRfYWNjZXB0X3JhdGUgfHwgb3B0aW9ucy50YXJnZXRfYWNjZXB0X3JhdGU7IFxuICAgICAgcGFyYW1fb3B0aW9ucy5pc19hZGFwdGluZyAgICAgICAgPSBwYXJhbV9vcHRpb25zLmlzX2FkYXB0aW5nICAgICAgICB8fCBvcHRpb25zLmlzX2FkYXB0aW5nOyBcbiAgICAgIHRoaXMuc3Vic3RlcHBlcnNbaV0gPSBuZXcgU2VsZWN0U3RlcHBlcihwYXJhbV9vYmplY3Rfd3JhcCwgc3RhdGUsIGxvZ19wb3N0LCBwYXJhbV9vcHRpb25zKTtcbiAgICB9XG4gIH07XG4gIFxuICBBbXdnU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN0ZXBwZXIucHJvdG90eXBlKTsgXG4gIEFtd2dTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEFtd2dTdGVwcGVyO1xuICBcbiAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbigpIHtcbiAgICBzaHVmZmxlX2FycmF5KHRoaXMuc3Vic3RlcHBlcnMpO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnN1YnN0ZXBwZXJzW2ldLnN0ZXAoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc3RhdGU7XG4gIH07XG4gIFxuICBBbXdnU3RlcHBlci5wcm90b3R5cGUuc3RhcnRfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnN1YnN0ZXBwZXJzW2ldLnN0YXJ0X2FkYXB0YXRpb24oKTtcbiAgICB9XG4gIH07XG4gIFxuICBBbXdnU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vic3RlcHBlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuc3Vic3RlcHBlcnNbaV0uc3RvcF9hZGFwdGF0aW9uKCk7XG4gICAgfSBcbiAgfTtcbiAgXG4gIEFtd2dTdGVwcGVyLnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGluZm8gPSB7fTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5zdWJzdGVwcGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgaW5mb1t0aGlzLnBhcmFtX25hbWVzW2ldXSA9IHRoaXMuc3Vic3RlcHBlcnNbaV0uaW5mbygpO1xuICAgIH1cbiAgICByZXR1cm4gaW5mbztcbiAgfTtcbiAgXG4gIFxuICBcbiAgLy8vLy8vLy8vLy8gU2FtcGxlciBGdW5jdGlvbnMgLy8vLy8vLy8vL1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIFxuICBcbiAgIC8qKlxuICAgKiBAaW50ZXJmYWNlXG4gICAqIFdoaWxlIHlvdSBjb3VsZCBmaXQgYSBtb2RlbCBieSBwYXN0aW5nIHRvZ2V0aGVyIFN0ZXBwZXJzLCBhXG4gIC8vIFNhbXBsZXIgaXMgaGVyZSBpcyBhIGNvbnZlbmllbmNlIGNsYXNzIHdoZXJlIGFuIGluc3RhbmNlIG9mIFNhbXBsZXJcbiAgLy8gc2V0cyB1cCB0aGUgU3RlcHBlcnMsIGNoZWNrcyB0aGUgcGFyYW1ldGVyIGRlZmluaXRpb24sXG4gIC8vIGFuZCBtYW5hZ2VzIHRoZSBzYW1wbGluZy4gVGhpcyBoZXJlIGRlZmluZXMgdGhlIFNhbXBsZXIgXCJpbnRlcmZhY2VcIi5cbiAgICogQGludGVyZmFjZVxuICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggcGFyYW1ldGVyIGRlZmluaXRpb25zLCBmb3IgZXhhbXBsZTpcbiAgICogICB7XCJtdVwiOiB7XCJ0eXBlXCI6IFwicmVhbFwifSwgXCJzaWdtYVwiOiB7XCJ0eXBlXCI6IFwicmVhbFwiLCBcImxvd2VyXCIgPSAwfX1cbiAgICogICBUaGUgcGFyYW1ldGVyIGRlZmluaXRpb25zIGRvZXNuJ3QgaGF2ZSB0byBiZSBcImNvbXBsZXRlXCIgYW5kIHByb3BlcnRpZXNcbiAgICogICBsZWZ0IG91dCAobGlrZSBsb3dlciBhbmQgdXBwZXIpIHdpbGwgYmUgZmlsbGVkIGluIGJ5IGRlZmF1bHRzLlxuICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHdpdGggc2lnbmF0dXJlIGZ1bmN0aW9uKHN0YXRlLCBkYXRhKS4gSGVyZVxuICAgKiAgIHN0YXRlIHdpbGwgYmUgYW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3RhdGUgd2l0aCBlYWNoIHBhcmFtZXRlciBhcyBhIFxuICAgKiAgIGtleSBhbmQgdGhlIHBhcmFtZXRlciB2YWx1ZXMgYXMgbnVtYmVycyBvciBhcnJheXMuIEZvciBleGFtcGxlOlxuICAgKiAgIHtcIm11XCI6IDMsIFwic2lnbWFcIjogMS41fS4gVGhlIGRhdGEgYXJndW1lbnQgd2lsbCBiZSB0aGUgc2FtZSBvYmplY3QgYXMgXG4gICAqICAgdGhlIGRhdGEgYXJndW1lbnQgZ2l2ZW4gYmVsb3cuXG4gICAqIEBwYXJhbSBkYXRhIC0gYW4gb2JqZWN0IHRoYXQgd2lsbCBiZSBwYXNzZWQgb24gdG8gdGhlIGxvZ19wb3N0IGZ1bmN0aW9uXG4gICAqICAgd2hlbiBzYW1wbGluZy5cbiAgICogQHBhcmFtIG9wdGlvbnMgLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIHRoZSBzYW1wbGVyLlxuICAgKi9cbiAgdmFyIFNhbXBsZXIgPSBmdW5jdGlvbihwYXJhbXMsIGxvZ19wb3N0LCBkYXRhLCBvcHRpb25zKSB7XG4gICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICB0aGlzLnBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpO1xuICAgIFxuICAgIC8vIFNldHRpbmcgZGVmYXVsdCBvcHRpb25zIGlmIG5vdCBwYXNzZWQgdGhyb3VnaCB0aGUgb3B0aW9ucyBvYmplY3RcbiAgICB0aGlzLnBhcmFtX2luaXRfZnVuICAgPSBnZXRfb3B0aW9uKFwicGFyYW1faW5pdF9mdW5cIiwgb3B0aW9ucywgcGFyYW1faW5pdF9maXhlZCk7XG4gICAgdmFyIHRoaW5uaW5nX2ludGVydmFsID0gZ2V0X29wdGlvbihcInRoaW5cIiwgb3B0aW9ucywgMSk7XG4gICAgdmFyIHBhcmFtc190b19tb25pdG9yID0gZ2V0X29wdGlvbihcIm1vbml0b3JcIiwgb3B0aW9ucywgbnVsbCk7XG4gICAgdGhpcy50aGluKHRoaW5uaW5nX2ludGVydmFsKTtcbiAgICB0aGlzLm1vbml0b3IocGFyYW1zX3RvX21vbml0b3IpO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgLy8gQ29tcGxldGluZyB0aGUgcGFyYW1zIGFuZCBpbml0aWFsaXppbmcgdGhlIHN0YXRlLlxuICAgIHRoaXMucGFyYW1zID0gY29tcGxldGVfcGFyYW1zKHRoaXMucGFyYW1zLCB0aGlzLnBhcmFtX2luaXRfZnVuKTtcbiAgICB2YXIgc3RhdGUgPSB7fTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5wYXJhbV9uYW1lcy5sZW5ndGg7IGkrKyApIHtcbiAgICAgIHN0YXRlW3RoaXMucGFyYW1fbmFtZXNbaV1dID0gdGhpcy5wYXJhbXNbdGhpcy5wYXJhbV9uYW1lc1tpXV0uaW5pdDtcbiAgICB9XG4gICAgdGhpcy5sb2dfcG9zdCA9IGZ1bmN0aW9uKCkgeyBcbiAgICAgIHJldHVybiBsb2dfcG9zdChzdGF0ZSwgZGF0YSk7XG4gICAgfTtcbiAgICAvLyBSdW5uaW5nIHRoZSBsb2dfcG9zdCBmdW5jdGlvbiBvbmNlIGluIGNhc2UgaXQgZnVydGhlciBtb2RpZmllcyB0aGUgc3RhdGVcbiAgICAvLyBmb3IgZXhhbXBsZSBhZGRpbmcgZGVyaXZlZCBxdWFudGl0aWVzLlxuICAgIHRoaXMubG9nX3Bvc3QoKTtcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgdGhpcy5zdGVwcGVycyA9IHRoaXMuY3JlYXRlX3N0ZXBwZXJfZW5zYW1ibGUodGhpcy5wYXJhbXMsIHRoaXMuc3RhdGUsIHRoaXMubG9nX3Bvc3QsIHRoaXMub3B0aW9ucyk7XG4gIH07XG4gIFxuICAvKiogU2hvdWxkIHJldHVybiBhIHZlY3RvciBvZiBzdGVwcGVycyB0aGF0IHdoZW4gY2FsbGVkIFxuICAgKiBzaG91bGQgdGFrZSBhIHN0ZXAgaW4gdGhlIHBhcmFtZXRlciBzcGFjZS5cbiAgICovXG4gIFNhbXBsZXIucHJvdG90eXBlLmNyZWF0ZV9zdGVwcGVyX2Vuc2FtYmxlID0gZnVuY3Rpb24oc3RhdGUsIGxvZ19wb3N0KXtcbiAgICB0aHJvdyBcIkV2ZXJ5IFNhbXBsZXIgbmVlZHMgdG8gaW1wbGVtZW50IGNyZWF0ZV9zdGVwcGVyX2Vuc2FtYmxlKClcIjtcbiAgfTtcbiAgXG4gIC8qKiBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGluZm8gYWJvdXQgdGhlIHN0YXRlIG9mIHRoZSBTYW1wbGVyLlxuICAgKi8gXG4gIFNhbXBsZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge3N0YXRlOiB0aGlzLnN0YXRlLCB0aGluOiB0aGlzLnRoaW4sIG1vbml0b3I6IHRoaXMubW9uaXRvcixcbiAgICAgICAgICAgIHN0ZXBwZXJzOiB0aGlzLnN0ZXBwZXJzfTtcbiAgfTtcbiAgXG4gIC8qKiBUYWtlcyBhIHN0ZXAgaW4gdGhlIHBhcmFtZXRlciBzcGFjZS4gUmV0dXJucyB0aGUgbmV3IHNwYWNlXG4gICAqIGJ1dCBhbHNvIG1vZGlmaWVzIHRoZSBzdGF0ZSBpbiBwbGFjZS5cbiAgICovIFxuICBTYW1wbGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24oKSB7XG4gICAgc2h1ZmZsZV9hcnJheSh0aGlzLnN0ZXBwZXJzKTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5zdGVwcGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5zdGVwcGVyc1tpXS5zdGVwKCk7XG4gICAgfVxuICAgIGlmKE9iamVjdC5rZXlzKHRoaXMuc3RhdGUpLmxlbmd0aCA+IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKS5sZW5ndGgpIHtcbiAgICAgIC8vIFRoZSBzdGF0ZSBjb250YWlucyBkZXZpdmVkIHF1YW50aXRpZXMgKG5vdCBvbmx5IHBhcmFtZXRlcnMpIGFuZCB3ZVxuICAgICAgLy8gbmVlZCB0byBydW4gdGhlIGxvZ19wb3N0IG9uY2UgbW9yZSBpbiBvcmRlciB0byBzZXQgdGhlIGRlcml2ZWQgcXVhbnRpdGllc1xuICAgICAgLy8gZm9yIHRoZSBmaW5hbCBwYXJhbWV0ZXIgc3RhdGVcbiAgICAgIHRoaXMubG9nX3Bvc3QoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc3RhdGU7XG4gIH07XG4gIFxuICAvKipcbiAgICogVGFrZXMgbl9pdGVyYXRpb25zIHN0ZXBzIGluIHRoZSBwYXJhbWV0ZXIgc3BhY2UgYW5kIHJldHVybnMgdGhlbVxuICAgKiBhcyBhbiBvYmplY3Qgb2YgYXJyYXlzIHdpdGggb25lIGFycmF5IHBlciBwYXJhbWV0ZXIuIEZvciBleGFtcGxlOlxuICAgKiB7bXU6IFsxLCAtMSwgMiwgMywgLi4uXSwgc2lnbWE6IFsxLCAyLCAyLCAxLCAuLi5dfS5cbiAgICogSWYgdGhpbiBpcyA+IDEgdGhlbiBuX2l0ZXJhdGlvbnMgLyB0aGluIHNhbXBsZXMgYXJlIHJldHVybmVkLlxuICAgKi8gXG4gIFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZSA9IGZ1bmN0aW9uKG5faXRlcmF0aW9ucykge1xuICAgICAgLy8gSW5pdGlhbGl6aW5nIGN1cnJfc2FtcGxlIHdoZXJlIHRoZSBzYW1wbGUgaXMgZ29pbmcgdG8gYmUgc2F2ZWRcbiAgICAgIC8vIGFzIGFuIG9iamVjdCBjb250YWluaW5nIG9uZSBhcnJheSBwZXIgcGFyYW1ldGVyIHRvIGJlIG1vbml0b3JlZC5cbiAgICAgIHZhciBpLCBqLCBtb25pdG9yZWRfcGFyYW1zO1xuICAgICAgaWYodGhpcy5tb25pdG9yZWRfcGFyYW1zID09PSBudWxsKSB7XG4gICAgICAgIG1vbml0b3JlZF9wYXJhbXMgPSBPYmplY3Qua2V5cyh0aGlzLnN0YXRlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1vbml0b3JlZF9wYXJhbXMgPSB0aGlzLm1vbml0b3JlZF9wYXJhbXM7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHZhciBjdXJyX3NhbXBsZSA9IHt9O1xuICAgICAgZm9yKGogPSAwOyBqIDwgbW9uaXRvcmVkX3BhcmFtcy5sZW5ndGg7IGorKykge1xuICAgICAgICBjdXJyX3NhbXBsZVttb25pdG9yZWRfcGFyYW1zW2pdXSA9IFtdO1xuICAgICAgfVxuICAgICAgXG4gICAgICBmb3IoaSA9IDA7IGkgPCBuX2l0ZXJhdGlvbnM7IGkrKykge1xuICAgICAgICBpZihpICUgdGhpcy50aGlubmluZ19pbnRlcnZhbCA9PT0gMCkge1xuICAgICAgICAgIGZvcihqID0gMDsgaiA8IG1vbml0b3JlZF9wYXJhbXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIHZhciBwYXJhbSA9IG1vbml0b3JlZF9wYXJhbXNbal07XG4gICAgICAgICAgICBjdXJyX3NhbXBsZVtwYXJhbV0ucHVzaCggY2xvbmVfcGFyYW1fZHJhdyh0aGlzLnN0YXRlW3BhcmFtXSkgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGVwKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY3Vycl9zYW1wbGU7XG4gIH07XG4gIFxuICAvKipcbiAgICogVGFrZXMgbl9pdGVyYXRpb24gc3RlcHMgaW4gcGFyYW1ldGVyIHNwYWNlIGJ1dCByZXR1cm5zIG5vdGhpbmcuXG4gICAqLyBcbiAgU2FtcGxlci5wcm90b3R5cGUuYnVybiA9IGZ1bmN0aW9uKG5faXRlcmF0aW9ucykge1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBuX2l0ZXJhdGlvbnM7IGkrKykge1xuICAgICAgdGhpcy5zdGVwKCk7XG4gICAgfVxuICB9O1xuICBcbiAgLyoqXG4gICAqIFNldHMgd2hhdCBwYXJhbWV0ZXJzIHNob3VsZCBiZSBtb25pdG9yZWQgYW5kIHJldHVybmVkIHdoZW4gY2FsbGluZ1xuICAgKiBzYW1wbGUuXG4gICAqLyBcbiAgU2FtcGxlci5wcm90b3R5cGUubW9uaXRvciA9IGZ1bmN0aW9uKHBhcmFtc190b19tb25pdG9yKSB7XG4gICAgICB0aGlzLm1vbml0b3JlZF9wYXJhbXMgPSBwYXJhbXNfdG9fbW9uaXRvcjtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB0aGlubmluZy4gRm9yIGV4YW1wbGUgdGhpbiA9PSAxMCBtZWFucyB0aGF0IGV2ZXJ5IDEwdGggcG9zdGVyaW9yXG4gICAqIGRyYXcgd2lsbCBiZSBrZXB0LlxuICAgKi8gXG4gIFNhbXBsZXIucHJvdG90eXBlLnRoaW4gPSBmdW5jdGlvbih0aGlubmluZ19pbnRlcnZhbCkge1xuICAgIHRoaXMudGhpbm5pbmdfaW50ZXJ2YWwgPSB0aGlubmluZ19pbnRlcnZhbDtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBTZXRzIGFkYXB0YXRpb24gb24sIGlmIGFwcGxpY2FibGUsIGluIGFsbCBzdGVwcGVycy5cbiAgICovIFxuICBTYW1wbGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuc3RlcHBlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuc3RlcHBlcnNbaV0uc3RhcnRfYWRhcHRhdGlvbigpO1xuICAgIH1cbiAgfTtcbiAgXG4gICAgLyoqXG4gICAqIFNldHMgYWRhcHRhdGlvbiBvZmYsIGlmIGFwcGxpY2FibGUsIGluIGFsbCBzdGVwcGVycy5cbiAgICovIFxuICBTYW1wbGVyLnByb3RvdHlwZS5zdG9wX2FkYXB0YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5zdGVwcGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5zdGVwcGVyc1tpXS5zdG9wX2FkYXB0YXRpb24oKTtcbiAgICB9XG4gIH07XG4gIFxuICAgLyoqXG4gICAqIEBjbGFzc1xuICAgKiBAaW1wbGVtZW50cyB7U2FtcGxlcn1cbiAgICogVGhpcyBzYW1wbGVyIHVzZXMgdGhlIEFtd2dTdGVwcGVyIGFzIHRoZSBzdGVwcGVyIGZ1bmN0aW9uIHdoaWNoIGltcGxlbWVudHMgdGhlIFxuICAgKiBBZGFwdGl2ZSBNZXRyb3BvbGlzLVdpdGhpbi1HaWJicyBhbGdvcml0aG0gaW4gXCJFeGFtcGxlcyBvZiBBZGFwdGl2ZSBNQ01DXCJcbiAgICogYnkgUm9iZXJ0cyBhbmQgUm9zZW50aGFsICgyMDA4KS4gQW4gYWRpdGlvbiBpcyB0aGF0IGl0IGhhbmRsZXMgaW50IHBhcmFtZXRlcnNcbiAgICogYnkgbWFraW5nIGRpc2NyZXRlIE5vcm1hbCBwcm9wb3NhbHMgYW5kIGJpbmFyeSBwYXJhbWV0ZXJzIGJ5IHRha2luZyBvbiBhIG5ldyBcbiAgICogdmFsdWUgcHJvcG9ydGlvbmFsIHRvIHRoZSBwb3N0ZXJpb3Igb2YgdGhlIHR3byBwb3NzaWJsZSBzdGF0ZXMgb2YgdGhlXG4gICAqIHBhcmFtZXRlci4gVGhpcyBzYW1wbGVyIGNhbiBiZSBlZmZpY2llbnQgd2hlbiB0aGUgbnVtYmVyIG9mIHBhcmFtZXRlcnNcbiAgICogYXJlIG5vdCB0b28gaGlnaCBhbmQgdGhlIGNvcnJlbGF0aW9ucyBiZXR3ZWVuIHBhcmFtZXRlcnMgYXJlIGxvdy5cbiAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgb25lIG9yIG1vcmUgcGFyYW1ldGVyIGRlZmluaXRpb25zXG4gICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy5cbiAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIFxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuXG4gICovXG4gIHZhciBBbXdnU2FtcGxlciA9IGZ1bmN0aW9uKHBhcmFtcywgbG9nX3Bvc3QsIGRhdGEsIG9wdGlvbnMpIHtcbiAgICBTYW1wbGVyLmNhbGwodGhpcywgcGFyYW1zLCBsb2dfcG9zdCwgZGF0YSwgb3B0aW9ucyk7XG4gIH07XG4gIFxuICBBbXdnU2FtcGxlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNhbXBsZXIucHJvdG90eXBlKTsgXG4gIEFtd2dTYW1wbGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEFtd2dTYW1wbGVyO1xuICBcbiAgQW13Z1NhbXBsZXIucHJvdG90eXBlLmNyZWF0ZV9zdGVwcGVyX2Vuc2FtYmxlID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpe1xuICAgIHJldHVybiBbIG5ldyBBbXdnU3RlcHBlcihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykgXTtcbiAgfTtcbiAgXG4gIFxuICAvLyBSZXR1cm5pbmcgdGhlIGZ1bmN0aW9ucyB0aGF0IHNob3VsZCBiZSBwdWJsaWNseSBleHBvc2VkIGJ5IHRoaXMgbW9kdWxlXG4gIHJldHVybiB7XG4gICAgcnVuaWY6IHJ1bmlmLFxuICAgIHJ1bmlmX2Rpc2NyZXRlOiBydW5pZl9kaXNjcmV0ZSxcbiAgICBybm9ybTogcm5vcm0sXG4gICAgcGFyYW1faW5pdF9maXhlZDogcGFyYW1faW5pdF9maXhlZCwgXG4gICAgY29tcGxldGVfcGFyYW1zOiBjb21wbGV0ZV9wYXJhbXMsIFxuICAgIFJlYWxNZXRyb3BvbGlzU3RlcHBlcjogUmVhbE1ldHJvcG9saXNTdGVwcGVyLCBcbiAgICBJbnRNZXRyb3BvbGlzU3RlcHBlcjogSW50TWV0cm9wb2xpc1N0ZXBwZXIsIFxuICAgIE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyOiBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciwgXG4gICAgTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjogTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciwgXG4gICAgQmluYXJ5U3RlcHBlcjogQmluYXJ5U3RlcHBlciwgXG4gICAgQmluYXJ5Q29tcG9uZW50U3RlcHBlcjogQmluYXJ5Q29tcG9uZW50U3RlcHBlciwgXG4gICAgQW13Z1N0ZXBwZXI6IEFtd2dTdGVwcGVyLCBcbiAgICBBbXdnU2FtcGxlcjogQW13Z1NhbXBsZXJcbiAgfTtcbn0pKTtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGFzY2VuZGluZyhhLCBiKSB7XG4gIHJldHVybiBhID09IG51bGwgfHwgYiA9PSBudWxsID8gTmFOIDogYSA8IGIgPyAtMSA6IGEgPiBiID8gMSA6IGEgPj0gYiA/IDAgOiBOYU47XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBudW1iZXIoeCkge1xuICByZXR1cm4geCA9PT0gbnVsbCA/IE5hTiA6ICt4O1xufVxuXG5leHBvcnQgZnVuY3Rpb24qIG51bWJlcnModmFsdWVzLCB2YWx1ZW9mKSB7XG4gIGlmICh2YWx1ZW9mID09PSB1bmRlZmluZWQpIHtcbiAgICBmb3IgKGxldCB2YWx1ZSBvZiB2YWx1ZXMpIHtcbiAgICAgIGlmICh2YWx1ZSAhPSBudWxsICYmICh2YWx1ZSA9ICt2YWx1ZSkgPj0gdmFsdWUpIHtcbiAgICAgICAgeWllbGQgdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGxldCBpbmRleCA9IC0xO1xuICAgIGZvciAobGV0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgICAgaWYgKCh2YWx1ZSA9IHZhbHVlb2YodmFsdWUsICsraW5kZXgsIHZhbHVlcykpICE9IG51bGwgJiYgKHZhbHVlID0gK3ZhbHVlKSA+PSB2YWx1ZSkge1xuICAgICAgICB5aWVsZCB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCBhc2NlbmRpbmcgZnJvbSBcIi4vYXNjZW5kaW5nLmpzXCI7XG5pbXBvcnQgcGVybXV0ZSBmcm9tIFwiLi9wZXJtdXRlLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNvcnQodmFsdWVzLCAuLi5GKSB7XG4gIGlmICh0eXBlb2YgdmFsdWVzW1N5bWJvbC5pdGVyYXRvcl0gIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcInZhbHVlcyBpcyBub3QgaXRlcmFibGVcIik7XG4gIHZhbHVlcyA9IEFycmF5LmZyb20odmFsdWVzKTtcbiAgbGV0IFtmXSA9IEY7XG4gIGlmICgoZiAmJiBmLmxlbmd0aCAhPT0gMikgfHwgRi5sZW5ndGggPiAxKSB7XG4gICAgY29uc3QgaW5kZXggPSBVaW50MzJBcnJheS5mcm9tKHZhbHVlcywgKGQsIGkpID0+IGkpO1xuICAgIGlmIChGLmxlbmd0aCA+IDEpIHtcbiAgICAgIEYgPSBGLm1hcChmID0+IHZhbHVlcy5tYXAoZikpO1xuICAgICAgaW5kZXguc29ydCgoaSwgaikgPT4ge1xuICAgICAgICBmb3IgKGNvbnN0IGYgb2YgRikge1xuICAgICAgICAgIGNvbnN0IGMgPSBhc2NlbmRpbmdEZWZpbmVkKGZbaV0sIGZbal0pO1xuICAgICAgICAgIGlmIChjKSByZXR1cm4gYztcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGYgPSB2YWx1ZXMubWFwKGYpO1xuICAgICAgaW5kZXguc29ydCgoaSwgaikgPT4gYXNjZW5kaW5nRGVmaW5lZChmW2ldLCBmW2pdKSk7XG4gICAgfVxuICAgIHJldHVybiBwZXJtdXRlKHZhbHVlcywgaW5kZXgpO1xuICB9XG4gIHJldHVybiB2YWx1ZXMuc29ydChjb21wYXJlRGVmaW5lZChmKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb21wYXJlRGVmaW5lZChjb21wYXJlID0gYXNjZW5kaW5nKSB7XG4gIGlmIChjb21wYXJlID09PSBhc2NlbmRpbmcpIHJldHVybiBhc2NlbmRpbmdEZWZpbmVkO1xuICBpZiAodHlwZW9mIGNvbXBhcmUgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcImNvbXBhcmUgaXMgbm90IGEgZnVuY3Rpb25cIik7XG4gIHJldHVybiAoYSwgYikgPT4ge1xuICAgIGNvbnN0IHggPSBjb21wYXJlKGEsIGIpO1xuICAgIGlmICh4IHx8IHggPT09IDApIHJldHVybiB4O1xuICAgIHJldHVybiAoY29tcGFyZShiLCBiKSA9PT0gMCkgLSAoY29tcGFyZShhLCBhKSA9PT0gMCk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhc2NlbmRpbmdEZWZpbmVkKGEsIGIpIHtcbiAgcmV0dXJuIChhID09IG51bGwgfHwgIShhID49IGEpKSAtIChiID09IG51bGwgfHwgIShiID49IGIpKSB8fCAoYSA8IGIgPyAtMSA6IGEgPiBiID8gMSA6IDApO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWF4KHZhbHVlcywgdmFsdWVvZikge1xuICBsZXQgbWF4O1xuICBpZiAodmFsdWVvZiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB2YWx1ZXMpIHtcbiAgICAgIGlmICh2YWx1ZSAhPSBudWxsXG4gICAgICAgICAgJiYgKG1heCA8IHZhbHVlIHx8IChtYXggPT09IHVuZGVmaW5lZCAmJiB2YWx1ZSA+PSB2YWx1ZSkpKSB7XG4gICAgICAgIG1heCA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBsZXQgaW5kZXggPSAtMTtcbiAgICBmb3IgKGxldCB2YWx1ZSBvZiB2YWx1ZXMpIHtcbiAgICAgIGlmICgodmFsdWUgPSB2YWx1ZW9mKHZhbHVlLCArK2luZGV4LCB2YWx1ZXMpKSAhPSBudWxsXG4gICAgICAgICAgJiYgKG1heCA8IHZhbHVlIHx8IChtYXggPT09IHVuZGVmaW5lZCAmJiB2YWx1ZSA+PSB2YWx1ZSkpKSB7XG4gICAgICAgIG1heCA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gbWF4O1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWluKHZhbHVlcywgdmFsdWVvZikge1xuICBsZXQgbWluO1xuICBpZiAodmFsdWVvZiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB2YWx1ZXMpIHtcbiAgICAgIGlmICh2YWx1ZSAhPSBudWxsXG4gICAgICAgICAgJiYgKG1pbiA+IHZhbHVlIHx8IChtaW4gPT09IHVuZGVmaW5lZCAmJiB2YWx1ZSA+PSB2YWx1ZSkpKSB7XG4gICAgICAgIG1pbiA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBsZXQgaW5kZXggPSAtMTtcbiAgICBmb3IgKGxldCB2YWx1ZSBvZiB2YWx1ZXMpIHtcbiAgICAgIGlmICgodmFsdWUgPSB2YWx1ZW9mKHZhbHVlLCArK2luZGV4LCB2YWx1ZXMpKSAhPSBudWxsXG4gICAgICAgICAgJiYgKG1pbiA+IHZhbHVlIHx8IChtaW4gPT09IHVuZGVmaW5lZCAmJiB2YWx1ZSA+PSB2YWx1ZSkpKSB7XG4gICAgICAgIG1pbiA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gbWluO1xufVxuIiwiaW1wb3J0IHthc2NlbmRpbmdEZWZpbmVkLCBjb21wYXJlRGVmaW5lZH0gZnJvbSBcIi4vc29ydC5qc1wiO1xuXG4vLyBCYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vbW91cm5lci9xdWlja3NlbGVjdFxuLy8gSVNDIGxpY2Vuc2UsIENvcHlyaWdodCAyMDE4IFZsYWRpbWlyIEFnYWZvbmtpbi5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHF1aWNrc2VsZWN0KGFycmF5LCBrLCBsZWZ0ID0gMCwgcmlnaHQgPSBJbmZpbml0eSwgY29tcGFyZSkge1xuICBrID0gTWF0aC5mbG9vcihrKTtcbiAgbGVmdCA9IE1hdGguZmxvb3IoTWF0aC5tYXgoMCwgbGVmdCkpO1xuICByaWdodCA9IE1hdGguZmxvb3IoTWF0aC5taW4oYXJyYXkubGVuZ3RoIC0gMSwgcmlnaHQpKTtcblxuICBpZiAoIShsZWZ0IDw9IGsgJiYgayA8PSByaWdodCkpIHJldHVybiBhcnJheTtcblxuICBjb21wYXJlID0gY29tcGFyZSA9PT0gdW5kZWZpbmVkID8gYXNjZW5kaW5nRGVmaW5lZCA6IGNvbXBhcmVEZWZpbmVkKGNvbXBhcmUpO1xuXG4gIHdoaWxlIChyaWdodCA+IGxlZnQpIHtcbiAgICBpZiAocmlnaHQgLSBsZWZ0ID4gNjAwKSB7XG4gICAgICBjb25zdCBuID0gcmlnaHQgLSBsZWZ0ICsgMTtcbiAgICAgIGNvbnN0IG0gPSBrIC0gbGVmdCArIDE7XG4gICAgICBjb25zdCB6ID0gTWF0aC5sb2cobik7XG4gICAgICBjb25zdCBzID0gMC41ICogTWF0aC5leHAoMiAqIHogLyAzKTtcbiAgICAgIGNvbnN0IHNkID0gMC41ICogTWF0aC5zcXJ0KHogKiBzICogKG4gLSBzKSAvIG4pICogKG0gLSBuIC8gMiA8IDAgPyAtMSA6IDEpO1xuICAgICAgY29uc3QgbmV3TGVmdCA9IE1hdGgubWF4KGxlZnQsIE1hdGguZmxvb3IoayAtIG0gKiBzIC8gbiArIHNkKSk7XG4gICAgICBjb25zdCBuZXdSaWdodCA9IE1hdGgubWluKHJpZ2h0LCBNYXRoLmZsb29yKGsgKyAobiAtIG0pICogcyAvIG4gKyBzZCkpO1xuICAgICAgcXVpY2tzZWxlY3QoYXJyYXksIGssIG5ld0xlZnQsIG5ld1JpZ2h0LCBjb21wYXJlKTtcbiAgICB9XG5cbiAgICBjb25zdCB0ID0gYXJyYXlba107XG4gICAgbGV0IGkgPSBsZWZ0O1xuICAgIGxldCBqID0gcmlnaHQ7XG5cbiAgICBzd2FwKGFycmF5LCBsZWZ0LCBrKTtcbiAgICBpZiAoY29tcGFyZShhcnJheVtyaWdodF0sIHQpID4gMCkgc3dhcChhcnJheSwgbGVmdCwgcmlnaHQpO1xuXG4gICAgd2hpbGUgKGkgPCBqKSB7XG4gICAgICBzd2FwKGFycmF5LCBpLCBqKSwgKytpLCAtLWo7XG4gICAgICB3aGlsZSAoY29tcGFyZShhcnJheVtpXSwgdCkgPCAwKSArK2k7XG4gICAgICB3aGlsZSAoY29tcGFyZShhcnJheVtqXSwgdCkgPiAwKSAtLWo7XG4gICAgfVxuXG4gICAgaWYgKGNvbXBhcmUoYXJyYXlbbGVmdF0sIHQpID09PSAwKSBzd2FwKGFycmF5LCBsZWZ0LCBqKTtcbiAgICBlbHNlICsraiwgc3dhcChhcnJheSwgaiwgcmlnaHQpO1xuXG4gICAgaWYgKGogPD0gaykgbGVmdCA9IGogKyAxO1xuICAgIGlmIChrIDw9IGopIHJpZ2h0ID0gaiAtIDE7XG4gIH1cblxuICByZXR1cm4gYXJyYXk7XG59XG5cbmZ1bmN0aW9uIHN3YXAoYXJyYXksIGksIGopIHtcbiAgY29uc3QgdCA9IGFycmF5W2ldO1xuICBhcnJheVtpXSA9IGFycmF5W2pdO1xuICBhcnJheVtqXSA9IHQ7XG59XG4iLCJpbXBvcnQgbWF4IGZyb20gXCIuL21heC5qc1wiO1xuaW1wb3J0IG1heEluZGV4IGZyb20gXCIuL21heEluZGV4LmpzXCI7XG5pbXBvcnQgbWluIGZyb20gXCIuL21pbi5qc1wiO1xuaW1wb3J0IG1pbkluZGV4IGZyb20gXCIuL21pbkluZGV4LmpzXCI7XG5pbXBvcnQgcXVpY2tzZWxlY3QgZnJvbSBcIi4vcXVpY2tzZWxlY3QuanNcIjtcbmltcG9ydCBudW1iZXIsIHtudW1iZXJzfSBmcm9tIFwiLi9udW1iZXIuanNcIjtcbmltcG9ydCB7YXNjZW5kaW5nRGVmaW5lZH0gZnJvbSBcIi4vc29ydC5qc1wiO1xuaW1wb3J0IGdyZWF0ZXN0IGZyb20gXCIuL2dyZWF0ZXN0LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHF1YW50aWxlKHZhbHVlcywgcCwgdmFsdWVvZikge1xuICB2YWx1ZXMgPSBGbG9hdDY0QXJyYXkuZnJvbShudW1iZXJzKHZhbHVlcywgdmFsdWVvZikpO1xuICBpZiAoIShuID0gdmFsdWVzLmxlbmd0aCkgfHwgaXNOYU4ocCA9ICtwKSkgcmV0dXJuO1xuICBpZiAocCA8PSAwIHx8IG4gPCAyKSByZXR1cm4gbWluKHZhbHVlcyk7XG4gIGlmIChwID49IDEpIHJldHVybiBtYXgodmFsdWVzKTtcbiAgdmFyIG4sXG4gICAgICBpID0gKG4gLSAxKSAqIHAsXG4gICAgICBpMCA9IE1hdGguZmxvb3IoaSksXG4gICAgICB2YWx1ZTAgPSBtYXgocXVpY2tzZWxlY3QodmFsdWVzLCBpMCkuc3ViYXJyYXkoMCwgaTAgKyAxKSksXG4gICAgICB2YWx1ZTEgPSBtaW4odmFsdWVzLnN1YmFycmF5KGkwICsgMSkpO1xuICByZXR1cm4gdmFsdWUwICsgKHZhbHVlMSAtIHZhbHVlMCkgKiAoaSAtIGkwKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHF1YW50aWxlU29ydGVkKHZhbHVlcywgcCwgdmFsdWVvZiA9IG51bWJlcikge1xuICBpZiAoIShuID0gdmFsdWVzLmxlbmd0aCkgfHwgaXNOYU4ocCA9ICtwKSkgcmV0dXJuO1xuICBpZiAocCA8PSAwIHx8IG4gPCAyKSByZXR1cm4gK3ZhbHVlb2YodmFsdWVzWzBdLCAwLCB2YWx1ZXMpO1xuICBpZiAocCA+PSAxKSByZXR1cm4gK3ZhbHVlb2YodmFsdWVzW24gLSAxXSwgbiAtIDEsIHZhbHVlcyk7XG4gIHZhciBuLFxuICAgICAgaSA9IChuIC0gMSkgKiBwLFxuICAgICAgaTAgPSBNYXRoLmZsb29yKGkpLFxuICAgICAgdmFsdWUwID0gK3ZhbHVlb2YodmFsdWVzW2kwXSwgaTAsIHZhbHVlcyksXG4gICAgICB2YWx1ZTEgPSArdmFsdWVvZih2YWx1ZXNbaTAgKyAxXSwgaTAgKyAxLCB2YWx1ZXMpO1xuICByZXR1cm4gdmFsdWUwICsgKHZhbHVlMSAtIHZhbHVlMCkgKiAoaSAtIGkwKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHF1YW50aWxlSW5kZXgodmFsdWVzLCBwLCB2YWx1ZW9mID0gbnVtYmVyKSB7XG4gIGlmIChpc05hTihwID0gK3ApKSByZXR1cm47XG4gIG51bWJlcnMgPSBGbG9hdDY0QXJyYXkuZnJvbSh2YWx1ZXMsIChfLCBpKSA9PiBudW1iZXIodmFsdWVvZih2YWx1ZXNbaV0sIGksIHZhbHVlcykpKTtcbiAgaWYgKHAgPD0gMCkgcmV0dXJuIG1pbkluZGV4KG51bWJlcnMpO1xuICBpZiAocCA+PSAxKSByZXR1cm4gbWF4SW5kZXgobnVtYmVycyk7XG4gIHZhciBudW1iZXJzLFxuICAgICAgaW5kZXggPSBVaW50MzJBcnJheS5mcm9tKHZhbHVlcywgKF8sIGkpID0+IGkpLFxuICAgICAgaiA9IG51bWJlcnMubGVuZ3RoIC0gMSxcbiAgICAgIGkgPSBNYXRoLmZsb29yKGogKiBwKTtcbiAgcXVpY2tzZWxlY3QoaW5kZXgsIGksIDAsIGosIChpLCBqKSA9PiBhc2NlbmRpbmdEZWZpbmVkKG51bWJlcnNbaV0sIG51bWJlcnNbal0pKTtcbiAgaSA9IGdyZWF0ZXN0KGluZGV4LnN1YmFycmF5KDAsIGkgKyAxKSwgKGkpID0+IG51bWJlcnNbaV0pO1xuICByZXR1cm4gaSA+PSAwID8gaSA6IC0xO1xufVxuIiwiaW1wb3J0IHF1YW50aWxlLCB7cXVhbnRpbGVJbmRleH0gZnJvbSBcIi4vcXVhbnRpbGUuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWVkaWFuKHZhbHVlcywgdmFsdWVvZikge1xuICByZXR1cm4gcXVhbnRpbGUodmFsdWVzLCAwLjUsIHZhbHVlb2YpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWVkaWFuSW5kZXgodmFsdWVzLCB2YWx1ZW9mKSB7XG4gIHJldHVybiBxdWFudGlsZUluZGV4KHZhbHVlcywgMC41LCB2YWx1ZW9mKTtcbn1cbiIsInZhciBub29wID0ge3ZhbHVlOiAoKSA9PiB7fX07XG5cbmZ1bmN0aW9uIGRpc3BhdGNoKCkge1xuICBmb3IgKHZhciBpID0gMCwgbiA9IGFyZ3VtZW50cy5sZW5ndGgsIF8gPSB7fSwgdDsgaSA8IG47ICsraSkge1xuICAgIGlmICghKHQgPSBhcmd1bWVudHNbaV0gKyBcIlwiKSB8fCAodCBpbiBfKSB8fCAvW1xccy5dLy50ZXN0KHQpKSB0aHJvdyBuZXcgRXJyb3IoXCJpbGxlZ2FsIHR5cGU6IFwiICsgdCk7XG4gICAgX1t0XSA9IFtdO1xuICB9XG4gIHJldHVybiBuZXcgRGlzcGF0Y2goXyk7XG59XG5cbmZ1bmN0aW9uIERpc3BhdGNoKF8pIHtcbiAgdGhpcy5fID0gXztcbn1cblxuZnVuY3Rpb24gcGFyc2VUeXBlbmFtZXModHlwZW5hbWVzLCB0eXBlcykge1xuICByZXR1cm4gdHlwZW5hbWVzLnRyaW0oKS5zcGxpdCgvXnxcXHMrLykubWFwKGZ1bmN0aW9uKHQpIHtcbiAgICB2YXIgbmFtZSA9IFwiXCIsIGkgPSB0LmluZGV4T2YoXCIuXCIpO1xuICAgIGlmIChpID49IDApIG5hbWUgPSB0LnNsaWNlKGkgKyAxKSwgdCA9IHQuc2xpY2UoMCwgaSk7XG4gICAgaWYgKHQgJiYgIXR5cGVzLmhhc093blByb3BlcnR5KHQpKSB0aHJvdyBuZXcgRXJyb3IoXCJ1bmtub3duIHR5cGU6IFwiICsgdCk7XG4gICAgcmV0dXJuIHt0eXBlOiB0LCBuYW1lOiBuYW1lfTtcbiAgfSk7XG59XG5cbkRpc3BhdGNoLnByb3RvdHlwZSA9IGRpc3BhdGNoLnByb3RvdHlwZSA9IHtcbiAgY29uc3RydWN0b3I6IERpc3BhdGNoLFxuICBvbjogZnVuY3Rpb24odHlwZW5hbWUsIGNhbGxiYWNrKSB7XG4gICAgdmFyIF8gPSB0aGlzLl8sXG4gICAgICAgIFQgPSBwYXJzZVR5cGVuYW1lcyh0eXBlbmFtZSArIFwiXCIsIF8pLFxuICAgICAgICB0LFxuICAgICAgICBpID0gLTEsXG4gICAgICAgIG4gPSBULmxlbmd0aDtcblxuICAgIC8vIElmIG5vIGNhbGxiYWNrIHdhcyBzcGVjaWZpZWQsIHJldHVybiB0aGUgY2FsbGJhY2sgb2YgdGhlIGdpdmVuIHR5cGUgYW5kIG5hbWUuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgICB3aGlsZSAoKytpIDwgbikgaWYgKCh0ID0gKHR5cGVuYW1lID0gVFtpXSkudHlwZSkgJiYgKHQgPSBnZXQoX1t0XSwgdHlwZW5hbWUubmFtZSkpKSByZXR1cm4gdDtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJZiBhIHR5cGUgd2FzIHNwZWNpZmllZCwgc2V0IHRoZSBjYWxsYmFjayBmb3IgdGhlIGdpdmVuIHR5cGUgYW5kIG5hbWUuXG4gICAgLy8gT3RoZXJ3aXNlLCBpZiBhIG51bGwgY2FsbGJhY2sgd2FzIHNwZWNpZmllZCwgcmVtb3ZlIGNhbGxiYWNrcyBvZiB0aGUgZ2l2ZW4gbmFtZS5cbiAgICBpZiAoY2FsbGJhY2sgIT0gbnVsbCAmJiB0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBjYWxsYmFjazogXCIgKyBjYWxsYmFjayk7XG4gICAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICAgIGlmICh0ID0gKHR5cGVuYW1lID0gVFtpXSkudHlwZSkgX1t0XSA9IHNldChfW3RdLCB0eXBlbmFtZS5uYW1lLCBjYWxsYmFjayk7XG4gICAgICBlbHNlIGlmIChjYWxsYmFjayA9PSBudWxsKSBmb3IgKHQgaW4gXykgX1t0XSA9IHNldChfW3RdLCB0eXBlbmFtZS5uYW1lLCBudWxsKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfSxcbiAgY29weTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNvcHkgPSB7fSwgXyA9IHRoaXMuXztcbiAgICBmb3IgKHZhciB0IGluIF8pIGNvcHlbdF0gPSBfW3RdLnNsaWNlKCk7XG4gICAgcmV0dXJuIG5ldyBEaXNwYXRjaChjb3B5KTtcbiAgfSxcbiAgY2FsbDogZnVuY3Rpb24odHlwZSwgdGhhdCkge1xuICAgIGlmICgobiA9IGFyZ3VtZW50cy5sZW5ndGggLSAyKSA+IDApIGZvciAodmFyIGFyZ3MgPSBuZXcgQXJyYXkobiksIGkgPSAwLCBuLCB0OyBpIDwgbjsgKytpKSBhcmdzW2ldID0gYXJndW1lbnRzW2kgKyAyXTtcbiAgICBpZiAoIXRoaXMuXy5oYXNPd25Qcm9wZXJ0eSh0eXBlKSkgdGhyb3cgbmV3IEVycm9yKFwidW5rbm93biB0eXBlOiBcIiArIHR5cGUpO1xuICAgIGZvciAodCA9IHRoaXMuX1t0eXBlXSwgaSA9IDAsIG4gPSB0Lmxlbmd0aDsgaSA8IG47ICsraSkgdFtpXS52YWx1ZS5hcHBseSh0aGF0LCBhcmdzKTtcbiAgfSxcbiAgYXBwbHk6IGZ1bmN0aW9uKHR5cGUsIHRoYXQsIGFyZ3MpIHtcbiAgICBpZiAoIXRoaXMuXy5oYXNPd25Qcm9wZXJ0eSh0eXBlKSkgdGhyb3cgbmV3IEVycm9yKFwidW5rbm93biB0eXBlOiBcIiArIHR5cGUpO1xuICAgIGZvciAodmFyIHQgPSB0aGlzLl9bdHlwZV0sIGkgPSAwLCBuID0gdC5sZW5ndGg7IGkgPCBuOyArK2kpIHRbaV0udmFsdWUuYXBwbHkodGhhdCwgYXJncyk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGdldCh0eXBlLCBuYW1lKSB7XG4gIGZvciAodmFyIGkgPSAwLCBuID0gdHlwZS5sZW5ndGgsIGM7IGkgPCBuOyArK2kpIHtcbiAgICBpZiAoKGMgPSB0eXBlW2ldKS5uYW1lID09PSBuYW1lKSB7XG4gICAgICByZXR1cm4gYy52YWx1ZTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gc2V0KHR5cGUsIG5hbWUsIGNhbGxiYWNrKSB7XG4gIGZvciAodmFyIGkgPSAwLCBuID0gdHlwZS5sZW5ndGg7IGkgPCBuOyArK2kpIHtcbiAgICBpZiAodHlwZVtpXS5uYW1lID09PSBuYW1lKSB7XG4gICAgICB0eXBlW2ldID0gbm9vcCwgdHlwZSA9IHR5cGUuc2xpY2UoMCwgaSkuY29uY2F0KHR5cGUuc2xpY2UoaSArIDEpKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBpZiAoY2FsbGJhY2sgIT0gbnVsbCkgdHlwZS5wdXNoKHtuYW1lOiBuYW1lLCB2YWx1ZTogY2FsbGJhY2t9KTtcbiAgcmV0dXJuIHR5cGU7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGRpc3BhdGNoO1xuIiwiZXhwb3J0IHZhciB4aHRtbCA9IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHN2ZzogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFxuICB4aHRtbDogeGh0bWwsXG4gIHhsaW5rOiBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIixcbiAgeG1sOiBcImh0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZVwiLFxuICB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3htbG5zL1wiXG59O1xuIiwiaW1wb3J0IG5hbWVzcGFjZXMgZnJvbSBcIi4vbmFtZXNwYWNlcy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lKSB7XG4gIHZhciBwcmVmaXggPSBuYW1lICs9IFwiXCIsIGkgPSBwcmVmaXguaW5kZXhPZihcIjpcIik7XG4gIGlmIChpID49IDAgJiYgKHByZWZpeCA9IG5hbWUuc2xpY2UoMCwgaSkpICE9PSBcInhtbG5zXCIpIG5hbWUgPSBuYW1lLnNsaWNlKGkgKyAxKTtcbiAgcmV0dXJuIG5hbWVzcGFjZXMuaGFzT3duUHJvcGVydHkocHJlZml4KSA/IHtzcGFjZTogbmFtZXNwYWNlc1twcmVmaXhdLCBsb2NhbDogbmFtZX0gOiBuYW1lOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXByb3RvdHlwZS1idWlsdGluc1xufVxuIiwiaW1wb3J0IG5hbWVzcGFjZSBmcm9tIFwiLi9uYW1lc3BhY2UuanNcIjtcbmltcG9ydCB7eGh0bWx9IGZyb20gXCIuL25hbWVzcGFjZXMuanNcIjtcblxuZnVuY3Rpb24gY3JlYXRvckluaGVyaXQobmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGRvY3VtZW50ID0gdGhpcy5vd25lckRvY3VtZW50LFxuICAgICAgICB1cmkgPSB0aGlzLm5hbWVzcGFjZVVSSTtcbiAgICByZXR1cm4gdXJpID09PSB4aHRtbCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubmFtZXNwYWNlVVJJID09PSB4aHRtbFxuICAgICAgICA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobmFtZSlcbiAgICAgICAgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlModXJpLCBuYW1lKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY3JlYXRvckZpeGVkKGZ1bGxuYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lKSB7XG4gIHZhciBmdWxsbmFtZSA9IG5hbWVzcGFjZShuYW1lKTtcbiAgcmV0dXJuIChmdWxsbmFtZS5sb2NhbFxuICAgICAgPyBjcmVhdG9yRml4ZWRcbiAgICAgIDogY3JlYXRvckluaGVyaXQpKGZ1bGxuYW1lKTtcbn1cbiIsImZ1bmN0aW9uIG5vbmUoKSB7fVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzZWxlY3Rvcikge1xuICByZXR1cm4gc2VsZWN0b3IgPT0gbnVsbCA/IG5vbmUgOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgfTtcbn1cbiIsImltcG9ydCB7U2VsZWN0aW9ufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuaW1wb3J0IHNlbGVjdG9yIGZyb20gXCIuLi9zZWxlY3Rvci5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzZWxlY3QpIHtcbiAgaWYgKHR5cGVvZiBzZWxlY3QgIT09IFwiZnVuY3Rpb25cIikgc2VsZWN0ID0gc2VsZWN0b3Ioc2VsZWN0KTtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBzdWJncm91cHMgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIHN1Ymdyb3VwID0gc3ViZ3JvdXBzW2pdID0gbmV3IEFycmF5KG4pLCBub2RlLCBzdWJub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKChub2RlID0gZ3JvdXBbaV0pICYmIChzdWJub2RlID0gc2VsZWN0LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKSkge1xuICAgICAgICBpZiAoXCJfX2RhdGFfX1wiIGluIG5vZGUpIHN1Ym5vZGUuX19kYXRhX18gPSBub2RlLl9fZGF0YV9fO1xuICAgICAgICBzdWJncm91cFtpXSA9IHN1Ym5vZGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBTZWxlY3Rpb24oc3ViZ3JvdXBzLCB0aGlzLl9wYXJlbnRzKTtcbn1cbiIsIi8vIEdpdmVuIHNvbWV0aGluZyBhcnJheSBsaWtlIChvciBudWxsKSwgcmV0dXJucyBzb21ldGhpbmcgdGhhdCBpcyBzdHJpY3RseSBhblxuLy8gYXJyYXkuIFRoaXMgaXMgdXNlZCB0byBlbnN1cmUgdGhhdCBhcnJheS1saWtlIG9iamVjdHMgcGFzc2VkIHRvIGQzLnNlbGVjdEFsbFxuLy8gb3Igc2VsZWN0aW9uLnNlbGVjdEFsbCBhcmUgY29udmVydGVkIGludG8gcHJvcGVyIGFycmF5cyB3aGVuIGNyZWF0aW5nIGFcbi8vIHNlbGVjdGlvbjsgd2UgZG9u4oCZdCBldmVyIHdhbnQgdG8gY3JlYXRlIGEgc2VsZWN0aW9uIGJhY2tlZCBieSBhIGxpdmVcbi8vIEhUTUxDb2xsZWN0aW9uIG9yIE5vZGVMaXN0LiBIb3dldmVyLCBub3RlIHRoYXQgc2VsZWN0aW9uLnNlbGVjdEFsbCB3aWxsIHVzZSBhXG4vLyBzdGF0aWMgTm9kZUxpc3QgYXMgYSBncm91cCwgc2luY2UgaXQgc2FmZWx5IGRlcml2ZWQgZnJvbSBxdWVyeVNlbGVjdG9yQWxsLlxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYXJyYXkoeCkge1xuICByZXR1cm4geCA9PSBudWxsID8gW10gOiBBcnJheS5pc0FycmF5KHgpID8geCA6IEFycmF5LmZyb20oeCk7XG59XG4iLCJmdW5jdGlvbiBlbXB0eSgpIHtcbiAgcmV0dXJuIFtdO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzZWxlY3Rvcikge1xuICByZXR1cm4gc2VsZWN0b3IgPT0gbnVsbCA/IGVtcHR5IDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gIH07XG59XG4iLCJpbXBvcnQge1NlbGVjdGlvbn0gZnJvbSBcIi4vaW5kZXguanNcIjtcbmltcG9ydCBhcnJheSBmcm9tIFwiLi4vYXJyYXkuanNcIjtcbmltcG9ydCBzZWxlY3RvckFsbCBmcm9tIFwiLi4vc2VsZWN0b3JBbGwuanNcIjtcblxuZnVuY3Rpb24gYXJyYXlBbGwoc2VsZWN0KSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gYXJyYXkoc2VsZWN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzZWxlY3QpIHtcbiAgaWYgKHR5cGVvZiBzZWxlY3QgPT09IFwiZnVuY3Rpb25cIikgc2VsZWN0ID0gYXJyYXlBbGwoc2VsZWN0KTtcbiAgZWxzZSBzZWxlY3QgPSBzZWxlY3RvckFsbChzZWxlY3QpO1xuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIHN1Ymdyb3VwcyA9IFtdLCBwYXJlbnRzID0gW10sIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICAgIHN1Ymdyb3Vwcy5wdXNoKHNlbGVjdC5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGdyb3VwKSk7XG4gICAgICAgIHBhcmVudHMucHVzaChub2RlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IFNlbGVjdGlvbihzdWJncm91cHMsIHBhcmVudHMpO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1hdGNoZXMoc2VsZWN0b3IpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2hpbGRNYXRjaGVyKHNlbGVjdG9yKSB7XG4gIHJldHVybiBmdW5jdGlvbihub2RlKSB7XG4gICAgcmV0dXJuIG5vZGUubWF0Y2hlcyhzZWxlY3Rvcik7XG4gIH07XG59XG5cbiIsImltcG9ydCB7Y2hpbGRNYXRjaGVyfSBmcm9tIFwiLi4vbWF0Y2hlci5qc1wiO1xuXG52YXIgZmluZCA9IEFycmF5LnByb3RvdHlwZS5maW5kO1xuXG5mdW5jdGlvbiBjaGlsZEZpbmQobWF0Y2gpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmaW5kLmNhbGwodGhpcy5jaGlsZHJlbiwgbWF0Y2gpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBjaGlsZEZpcnN0KCkge1xuICByZXR1cm4gdGhpcy5maXJzdEVsZW1lbnRDaGlsZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obWF0Y2gpIHtcbiAgcmV0dXJuIHRoaXMuc2VsZWN0KG1hdGNoID09IG51bGwgPyBjaGlsZEZpcnN0XG4gICAgICA6IGNoaWxkRmluZCh0eXBlb2YgbWF0Y2ggPT09IFwiZnVuY3Rpb25cIiA/IG1hdGNoIDogY2hpbGRNYXRjaGVyKG1hdGNoKSkpO1xufVxuIiwiaW1wb3J0IHtjaGlsZE1hdGNoZXJ9IGZyb20gXCIuLi9tYXRjaGVyLmpzXCI7XG5cbnZhciBmaWx0ZXIgPSBBcnJheS5wcm90b3R5cGUuZmlsdGVyO1xuXG5mdW5jdGlvbiBjaGlsZHJlbigpIHtcbiAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5jaGlsZHJlbik7XG59XG5cbmZ1bmN0aW9uIGNoaWxkcmVuRmlsdGVyKG1hdGNoKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZmlsdGVyLmNhbGwodGhpcy5jaGlsZHJlbiwgbWF0Y2gpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihtYXRjaCkge1xuICByZXR1cm4gdGhpcy5zZWxlY3RBbGwobWF0Y2ggPT0gbnVsbCA/IGNoaWxkcmVuXG4gICAgICA6IGNoaWxkcmVuRmlsdGVyKHR5cGVvZiBtYXRjaCA9PT0gXCJmdW5jdGlvblwiID8gbWF0Y2ggOiBjaGlsZE1hdGNoZXIobWF0Y2gpKSk7XG59XG4iLCJpbXBvcnQge1NlbGVjdGlvbn0gZnJvbSBcIi4vaW5kZXguanNcIjtcbmltcG9ydCBtYXRjaGVyIGZyb20gXCIuLi9tYXRjaGVyLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG1hdGNoKSB7XG4gIGlmICh0eXBlb2YgbWF0Y2ggIT09IFwiZnVuY3Rpb25cIikgbWF0Y2ggPSBtYXRjaGVyKG1hdGNoKTtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBzdWJncm91cHMgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIHN1Ymdyb3VwID0gc3ViZ3JvdXBzW2pdID0gW10sIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAoKG5vZGUgPSBncm91cFtpXSkgJiYgbWF0Y2guY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCkpIHtcbiAgICAgICAgc3ViZ3JvdXAucHVzaChub2RlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IFNlbGVjdGlvbihzdWJncm91cHMsIHRoaXMuX3BhcmVudHMpO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odXBkYXRlKSB7XG4gIHJldHVybiBuZXcgQXJyYXkodXBkYXRlLmxlbmd0aCk7XG59XG4iLCJpbXBvcnQgc3BhcnNlIGZyb20gXCIuL3NwYXJzZS5qc1wiO1xuaW1wb3J0IHtTZWxlY3Rpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFNlbGVjdGlvbih0aGlzLl9lbnRlciB8fCB0aGlzLl9ncm91cHMubWFwKHNwYXJzZSksIHRoaXMuX3BhcmVudHMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gRW50ZXJOb2RlKHBhcmVudCwgZGF0dW0pIHtcbiAgdGhpcy5vd25lckRvY3VtZW50ID0gcGFyZW50Lm93bmVyRG9jdW1lbnQ7XG4gIHRoaXMubmFtZXNwYWNlVVJJID0gcGFyZW50Lm5hbWVzcGFjZVVSSTtcbiAgdGhpcy5fbmV4dCA9IG51bGw7XG4gIHRoaXMuX3BhcmVudCA9IHBhcmVudDtcbiAgdGhpcy5fX2RhdGFfXyA9IGRhdHVtO1xufVxuXG5FbnRlck5vZGUucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogRW50ZXJOb2RlLFxuICBhcHBlbmRDaGlsZDogZnVuY3Rpb24oY2hpbGQpIHsgcmV0dXJuIHRoaXMuX3BhcmVudC5pbnNlcnRCZWZvcmUoY2hpbGQsIHRoaXMuX25leHQpOyB9LFxuICBpbnNlcnRCZWZvcmU6IGZ1bmN0aW9uKGNoaWxkLCBuZXh0KSB7IHJldHVybiB0aGlzLl9wYXJlbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLCBuZXh0KTsgfSxcbiAgcXVlcnlTZWxlY3RvcjogZnVuY3Rpb24oc2VsZWN0b3IpIHsgcmV0dXJuIHRoaXMuX3BhcmVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTsgfSxcbiAgcXVlcnlTZWxlY3RvckFsbDogZnVuY3Rpb24oc2VsZWN0b3IpIHsgcmV0dXJuIHRoaXMuX3BhcmVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTsgfVxufTtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB4O1xuICB9O1xufVxuIiwiaW1wb3J0IHtTZWxlY3Rpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5pbXBvcnQge0VudGVyTm9kZX0gZnJvbSBcIi4vZW50ZXIuanNcIjtcbmltcG9ydCBjb25zdGFudCBmcm9tIFwiLi4vY29uc3RhbnQuanNcIjtcblxuZnVuY3Rpb24gYmluZEluZGV4KHBhcmVudCwgZ3JvdXAsIGVudGVyLCB1cGRhdGUsIGV4aXQsIGRhdGEpIHtcbiAgdmFyIGkgPSAwLFxuICAgICAgbm9kZSxcbiAgICAgIGdyb3VwTGVuZ3RoID0gZ3JvdXAubGVuZ3RoLFxuICAgICAgZGF0YUxlbmd0aCA9IGRhdGEubGVuZ3RoO1xuXG4gIC8vIFB1dCBhbnkgbm9uLW51bGwgbm9kZXMgdGhhdCBmaXQgaW50byB1cGRhdGUuXG4gIC8vIFB1dCBhbnkgbnVsbCBub2RlcyBpbnRvIGVudGVyLlxuICAvLyBQdXQgYW55IHJlbWFpbmluZyBkYXRhIGludG8gZW50ZXIuXG4gIGZvciAoOyBpIDwgZGF0YUxlbmd0aDsgKytpKSB7XG4gICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgbm9kZS5fX2RhdGFfXyA9IGRhdGFbaV07XG4gICAgICB1cGRhdGVbaV0gPSBub2RlO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbnRlcltpXSA9IG5ldyBFbnRlck5vZGUocGFyZW50LCBkYXRhW2ldKTtcbiAgICB9XG4gIH1cblxuICAvLyBQdXQgYW55IG5vbi1udWxsIG5vZGVzIHRoYXQgZG9u4oCZdCBmaXQgaW50byBleGl0LlxuICBmb3IgKDsgaSA8IGdyb3VwTGVuZ3RoOyArK2kpIHtcbiAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICBleGl0W2ldID0gbm9kZTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYmluZEtleShwYXJlbnQsIGdyb3VwLCBlbnRlciwgdXBkYXRlLCBleGl0LCBkYXRhLCBrZXkpIHtcbiAgdmFyIGksXG4gICAgICBub2RlLFxuICAgICAgbm9kZUJ5S2V5VmFsdWUgPSBuZXcgTWFwLFxuICAgICAgZ3JvdXBMZW5ndGggPSBncm91cC5sZW5ndGgsXG4gICAgICBkYXRhTGVuZ3RoID0gZGF0YS5sZW5ndGgsXG4gICAgICBrZXlWYWx1ZXMgPSBuZXcgQXJyYXkoZ3JvdXBMZW5ndGgpLFxuICAgICAga2V5VmFsdWU7XG5cbiAgLy8gQ29tcHV0ZSB0aGUga2V5IGZvciBlYWNoIG5vZGUuXG4gIC8vIElmIG11bHRpcGxlIG5vZGVzIGhhdmUgdGhlIHNhbWUga2V5LCB0aGUgZHVwbGljYXRlcyBhcmUgYWRkZWQgdG8gZXhpdC5cbiAgZm9yIChpID0gMDsgaSA8IGdyb3VwTGVuZ3RoOyArK2kpIHtcbiAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICBrZXlWYWx1ZXNbaV0gPSBrZXlWYWx1ZSA9IGtleS5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGdyb3VwKSArIFwiXCI7XG4gICAgICBpZiAobm9kZUJ5S2V5VmFsdWUuaGFzKGtleVZhbHVlKSkge1xuICAgICAgICBleGl0W2ldID0gbm9kZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vZGVCeUtleVZhbHVlLnNldChrZXlWYWx1ZSwgbm9kZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gQ29tcHV0ZSB0aGUga2V5IGZvciBlYWNoIGRhdHVtLlxuICAvLyBJZiB0aGVyZSBhIG5vZGUgYXNzb2NpYXRlZCB3aXRoIHRoaXMga2V5LCBqb2luIGFuZCBhZGQgaXQgdG8gdXBkYXRlLlxuICAvLyBJZiB0aGVyZSBpcyBub3QgKG9yIHRoZSBrZXkgaXMgYSBkdXBsaWNhdGUpLCBhZGQgaXQgdG8gZW50ZXIuXG4gIGZvciAoaSA9IDA7IGkgPCBkYXRhTGVuZ3RoOyArK2kpIHtcbiAgICBrZXlWYWx1ZSA9IGtleS5jYWxsKHBhcmVudCwgZGF0YVtpXSwgaSwgZGF0YSkgKyBcIlwiO1xuICAgIGlmIChub2RlID0gbm9kZUJ5S2V5VmFsdWUuZ2V0KGtleVZhbHVlKSkge1xuICAgICAgdXBkYXRlW2ldID0gbm9kZTtcbiAgICAgIG5vZGUuX19kYXRhX18gPSBkYXRhW2ldO1xuICAgICAgbm9kZUJ5S2V5VmFsdWUuZGVsZXRlKGtleVZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZW50ZXJbaV0gPSBuZXcgRW50ZXJOb2RlKHBhcmVudCwgZGF0YVtpXSk7XG4gICAgfVxuICB9XG5cbiAgLy8gQWRkIGFueSByZW1haW5pbmcgbm9kZXMgdGhhdCB3ZXJlIG5vdCBib3VuZCB0byBkYXRhIHRvIGV4aXQuXG4gIGZvciAoaSA9IDA7IGkgPCBncm91cExlbmd0aDsgKytpKSB7XG4gICAgaWYgKChub2RlID0gZ3JvdXBbaV0pICYmIChub2RlQnlLZXlWYWx1ZS5nZXQoa2V5VmFsdWVzW2ldKSA9PT0gbm9kZSkpIHtcbiAgICAgIGV4aXRbaV0gPSBub2RlO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBkYXR1bShub2RlKSB7XG4gIHJldHVybiBub2RlLl9fZGF0YV9fO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIEFycmF5LmZyb20odGhpcywgZGF0dW0pO1xuXG4gIHZhciBiaW5kID0ga2V5ID8gYmluZEtleSA6IGJpbmRJbmRleCxcbiAgICAgIHBhcmVudHMgPSB0aGlzLl9wYXJlbnRzLFxuICAgICAgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzO1xuXG4gIGlmICh0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikgdmFsdWUgPSBjb25zdGFudCh2YWx1ZSk7XG5cbiAgZm9yICh2YXIgbSA9IGdyb3Vwcy5sZW5ndGgsIHVwZGF0ZSA9IG5ldyBBcnJheShtKSwgZW50ZXIgPSBuZXcgQXJyYXkobSksIGV4aXQgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgdmFyIHBhcmVudCA9IHBhcmVudHNbal0sXG4gICAgICAgIGdyb3VwID0gZ3JvdXBzW2pdLFxuICAgICAgICBncm91cExlbmd0aCA9IGdyb3VwLmxlbmd0aCxcbiAgICAgICAgZGF0YSA9IGFycmF5bGlrZSh2YWx1ZS5jYWxsKHBhcmVudCwgcGFyZW50ICYmIHBhcmVudC5fX2RhdGFfXywgaiwgcGFyZW50cykpLFxuICAgICAgICBkYXRhTGVuZ3RoID0gZGF0YS5sZW5ndGgsXG4gICAgICAgIGVudGVyR3JvdXAgPSBlbnRlcltqXSA9IG5ldyBBcnJheShkYXRhTGVuZ3RoKSxcbiAgICAgICAgdXBkYXRlR3JvdXAgPSB1cGRhdGVbal0gPSBuZXcgQXJyYXkoZGF0YUxlbmd0aCksXG4gICAgICAgIGV4aXRHcm91cCA9IGV4aXRbal0gPSBuZXcgQXJyYXkoZ3JvdXBMZW5ndGgpO1xuXG4gICAgYmluZChwYXJlbnQsIGdyb3VwLCBlbnRlckdyb3VwLCB1cGRhdGVHcm91cCwgZXhpdEdyb3VwLCBkYXRhLCBrZXkpO1xuXG4gICAgLy8gTm93IGNvbm5lY3QgdGhlIGVudGVyIG5vZGVzIHRvIHRoZWlyIGZvbGxvd2luZyB1cGRhdGUgbm9kZSwgc3VjaCB0aGF0XG4gICAgLy8gYXBwZW5kQ2hpbGQgY2FuIGluc2VydCB0aGUgbWF0ZXJpYWxpemVkIGVudGVyIG5vZGUgYmVmb3JlIHRoaXMgbm9kZSxcbiAgICAvLyByYXRoZXIgdGhhbiBhdCB0aGUgZW5kIG9mIHRoZSBwYXJlbnQgbm9kZS5cbiAgICBmb3IgKHZhciBpMCA9IDAsIGkxID0gMCwgcHJldmlvdXMsIG5leHQ7IGkwIDwgZGF0YUxlbmd0aDsgKytpMCkge1xuICAgICAgaWYgKHByZXZpb3VzID0gZW50ZXJHcm91cFtpMF0pIHtcbiAgICAgICAgaWYgKGkwID49IGkxKSBpMSA9IGkwICsgMTtcbiAgICAgICAgd2hpbGUgKCEobmV4dCA9IHVwZGF0ZUdyb3VwW2kxXSkgJiYgKytpMSA8IGRhdGFMZW5ndGgpO1xuICAgICAgICBwcmV2aW91cy5fbmV4dCA9IG5leHQgfHwgbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB1cGRhdGUgPSBuZXcgU2VsZWN0aW9uKHVwZGF0ZSwgcGFyZW50cyk7XG4gIHVwZGF0ZS5fZW50ZXIgPSBlbnRlcjtcbiAgdXBkYXRlLl9leGl0ID0gZXhpdDtcbiAgcmV0dXJuIHVwZGF0ZTtcbn1cblxuLy8gR2l2ZW4gc29tZSBkYXRhLCB0aGlzIHJldHVybnMgYW4gYXJyYXktbGlrZSB2aWV3IG9mIGl0OiBhbiBvYmplY3QgdGhhdFxuLy8gZXhwb3NlcyBhIGxlbmd0aCBwcm9wZXJ0eSBhbmQgYWxsb3dzIG51bWVyaWMgaW5kZXhpbmcuIE5vdGUgdGhhdCB1bmxpa2Vcbi8vIHNlbGVjdEFsbCwgdGhpcyBpc27igJl0IHdvcnJpZWQgYWJvdXQg4oCcbGl2ZeKAnSBjb2xsZWN0aW9ucyBiZWNhdXNlIHRoZSByZXN1bHRpbmdcbi8vIGFycmF5IHdpbGwgb25seSBiZSB1c2VkIGJyaWVmbHkgd2hpbGUgZGF0YSBpcyBiZWluZyBib3VuZC4gKEl0IGlzIHBvc3NpYmxlIHRvXG4vLyBjYXVzZSB0aGUgZGF0YSB0byBjaGFuZ2Ugd2hpbGUgaXRlcmF0aW5nIGJ5IHVzaW5nIGEga2V5IGZ1bmN0aW9uLCBidXQgcGxlYXNlXG4vLyBkb27igJl0OyB3ZeKAmWQgcmF0aGVyIGF2b2lkIGEgZ3JhdHVpdG91cyBjb3B5LilcbmZ1bmN0aW9uIGFycmF5bGlrZShkYXRhKSB7XG4gIHJldHVybiB0eXBlb2YgZGF0YSA9PT0gXCJvYmplY3RcIiAmJiBcImxlbmd0aFwiIGluIGRhdGFcbiAgICA/IGRhdGEgLy8gQXJyYXksIFR5cGVkQXJyYXksIE5vZGVMaXN0LCBhcnJheS1saWtlXG4gICAgOiBBcnJheS5mcm9tKGRhdGEpOyAvLyBNYXAsIFNldCwgaXRlcmFibGUsIHN0cmluZywgb3IgYW55dGhpbmcgZWxzZVxufVxuIiwiaW1wb3J0IHNwYXJzZSBmcm9tIFwiLi9zcGFyc2UuanNcIjtcbmltcG9ydCB7U2VsZWN0aW9ufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBTZWxlY3Rpb24odGhpcy5fZXhpdCB8fCB0aGlzLl9ncm91cHMubWFwKHNwYXJzZSksIHRoaXMuX3BhcmVudHMpO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24ob25lbnRlciwgb251cGRhdGUsIG9uZXhpdCkge1xuICB2YXIgZW50ZXIgPSB0aGlzLmVudGVyKCksIHVwZGF0ZSA9IHRoaXMsIGV4aXQgPSB0aGlzLmV4aXQoKTtcbiAgaWYgKHR5cGVvZiBvbmVudGVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBlbnRlciA9IG9uZW50ZXIoZW50ZXIpO1xuICAgIGlmIChlbnRlcikgZW50ZXIgPSBlbnRlci5zZWxlY3Rpb24oKTtcbiAgfSBlbHNlIHtcbiAgICBlbnRlciA9IGVudGVyLmFwcGVuZChvbmVudGVyICsgXCJcIik7XG4gIH1cbiAgaWYgKG9udXBkYXRlICE9IG51bGwpIHtcbiAgICB1cGRhdGUgPSBvbnVwZGF0ZSh1cGRhdGUpO1xuICAgIGlmICh1cGRhdGUpIHVwZGF0ZSA9IHVwZGF0ZS5zZWxlY3Rpb24oKTtcbiAgfVxuICBpZiAob25leGl0ID09IG51bGwpIGV4aXQucmVtb3ZlKCk7IGVsc2Ugb25leGl0KGV4aXQpO1xuICByZXR1cm4gZW50ZXIgJiYgdXBkYXRlID8gZW50ZXIubWVyZ2UodXBkYXRlKS5vcmRlcigpIDogdXBkYXRlO1xufVxuIiwiaW1wb3J0IHtTZWxlY3Rpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGNvbnRleHQpIHtcbiAgdmFyIHNlbGVjdGlvbiA9IGNvbnRleHQuc2VsZWN0aW9uID8gY29udGV4dC5zZWxlY3Rpb24oKSA6IGNvbnRleHQ7XG5cbiAgZm9yICh2YXIgZ3JvdXBzMCA9IHRoaXMuX2dyb3VwcywgZ3JvdXBzMSA9IHNlbGVjdGlvbi5fZ3JvdXBzLCBtMCA9IGdyb3VwczAubGVuZ3RoLCBtMSA9IGdyb3VwczEubGVuZ3RoLCBtID0gTWF0aC5taW4obTAsIG0xKSwgbWVyZ2VzID0gbmV3IEFycmF5KG0wKSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cDAgPSBncm91cHMwW2pdLCBncm91cDEgPSBncm91cHMxW2pdLCBuID0gZ3JvdXAwLmxlbmd0aCwgbWVyZ2UgPSBtZXJnZXNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwMFtpXSB8fCBncm91cDFbaV0pIHtcbiAgICAgICAgbWVyZ2VbaV0gPSBub2RlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZvciAoOyBqIDwgbTA7ICsraikge1xuICAgIG1lcmdlc1tqXSA9IGdyb3VwczBbal07XG4gIH1cblxuICByZXR1cm4gbmV3IFNlbGVjdGlvbihtZXJnZXMsIHRoaXMuX3BhcmVudHMpO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBqID0gLTEsIG0gPSBncm91cHMubGVuZ3RoOyArK2ogPCBtOykge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBpID0gZ3JvdXAubGVuZ3RoIC0gMSwgbmV4dCA9IGdyb3VwW2ldLCBub2RlOyAtLWkgPj0gMDspIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgaWYgKG5leHQgJiYgbm9kZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihuZXh0KSBeIDQpIG5leHQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgbmV4dCk7XG4gICAgICAgIG5leHQgPSBub2RlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufVxuIiwiaW1wb3J0IHtTZWxlY3Rpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGNvbXBhcmUpIHtcbiAgaWYgKCFjb21wYXJlKSBjb21wYXJlID0gYXNjZW5kaW5nO1xuXG4gIGZ1bmN0aW9uIGNvbXBhcmVOb2RlKGEsIGIpIHtcbiAgICByZXR1cm4gYSAmJiBiID8gY29tcGFyZShhLl9fZGF0YV9fLCBiLl9fZGF0YV9fKSA6ICFhIC0gIWI7XG4gIH1cblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBzb3J0Z3JvdXBzID0gbmV3IEFycmF5KG0pLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBuID0gZ3JvdXAubGVuZ3RoLCBzb3J0Z3JvdXAgPSBzb3J0Z3JvdXBzW2pdID0gbmV3IEFycmF5KG4pLCBub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgICBzb3J0Z3JvdXBbaV0gPSBub2RlO1xuICAgICAgfVxuICAgIH1cbiAgICBzb3J0Z3JvdXAuc29ydChjb21wYXJlTm9kZSk7XG4gIH1cblxuICByZXR1cm4gbmV3IFNlbGVjdGlvbihzb3J0Z3JvdXBzLCB0aGlzLl9wYXJlbnRzKS5vcmRlcigpO1xufVxuXG5mdW5jdGlvbiBhc2NlbmRpbmcoYSwgYikge1xuICByZXR1cm4gYSA8IGIgPyAtMSA6IGEgPiBiID8gMSA6IGEgPj0gYiA/IDAgOiBOYU47XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgdmFyIGNhbGxiYWNrID0gYXJndW1lbnRzWzBdO1xuICBhcmd1bWVudHNbMF0gPSB0aGlzO1xuICBjYWxsYmFjay5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICByZXR1cm4gdGhpcztcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzKTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgaiA9IDAsIG0gPSBncm91cHMubGVuZ3RoOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIGkgPSAwLCBuID0gZ3JvdXAubGVuZ3RoOyBpIDwgbjsgKytpKSB7XG4gICAgICB2YXIgbm9kZSA9IGdyb3VwW2ldO1xuICAgICAgaWYgKG5vZGUpIHJldHVybiBub2RlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIGxldCBzaXplID0gMDtcbiAgZm9yIChjb25zdCBub2RlIG9mIHRoaXMpICsrc2l6ZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICByZXR1cm4gc2l6ZTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gIXRoaXMubm9kZSgpO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oY2FsbGJhY2spIHtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIGogPSAwLCBtID0gZ3JvdXBzLmxlbmd0aDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBpID0gMCwgbiA9IGdyb3VwLmxlbmd0aCwgbm9kZTsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkgY2FsbGJhY2suY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59XG4iLCJpbXBvcnQgbmFtZXNwYWNlIGZyb20gXCIuLi9uYW1lc3BhY2UuanNcIjtcblxuZnVuY3Rpb24gYXR0clJlbW92ZShuYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0clJlbW92ZU5TKGZ1bGxuYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJDb25zdGFudChuYW1lLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyQ29uc3RhbnROUyhmdWxsbmFtZSwgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc2V0QXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsLCB2YWx1ZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJGdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmICh2ID09IG51bGwpIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgIGVsc2UgdGhpcy5zZXRBdHRyaWJ1dGUobmFtZSwgdik7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJGdW5jdGlvbk5TKGZ1bGxuYW1lLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmICh2ID09IG51bGwpIHRoaXMucmVtb3ZlQXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsKTtcbiAgICBlbHNlIHRoaXMuc2V0QXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsLCB2KTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgdmFyIGZ1bGxuYW1lID0gbmFtZXNwYWNlKG5hbWUpO1xuXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikge1xuICAgIHZhciBub2RlID0gdGhpcy5ub2RlKCk7XG4gICAgcmV0dXJuIGZ1bGxuYW1lLmxvY2FsXG4gICAgICAgID8gbm9kZS5nZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwpXG4gICAgICAgIDogbm9kZS5nZXRBdHRyaWJ1dGUoZnVsbG5hbWUpO1xuICB9XG5cbiAgcmV0dXJuIHRoaXMuZWFjaCgodmFsdWUgPT0gbnVsbFxuICAgICAgPyAoZnVsbG5hbWUubG9jYWwgPyBhdHRyUmVtb3ZlTlMgOiBhdHRyUmVtb3ZlKSA6ICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgPyAoZnVsbG5hbWUubG9jYWwgPyBhdHRyRnVuY3Rpb25OUyA6IGF0dHJGdW5jdGlvbilcbiAgICAgIDogKGZ1bGxuYW1lLmxvY2FsID8gYXR0ckNvbnN0YW50TlMgOiBhdHRyQ29uc3RhbnQpKSkoZnVsbG5hbWUsIHZhbHVlKSk7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbihub2RlKSB7XG4gIHJldHVybiAobm9kZS5vd25lckRvY3VtZW50ICYmIG5vZGUub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldykgLy8gbm9kZSBpcyBhIE5vZGVcbiAgICAgIHx8IChub2RlLmRvY3VtZW50ICYmIG5vZGUpIC8vIG5vZGUgaXMgYSBXaW5kb3dcbiAgICAgIHx8IG5vZGUuZGVmYXVsdFZpZXc7IC8vIG5vZGUgaXMgYSBEb2N1bWVudFxufVxuIiwiaW1wb3J0IGRlZmF1bHRWaWV3IGZyb20gXCIuLi93aW5kb3cuanNcIjtcblxuZnVuY3Rpb24gc3R5bGVSZW1vdmUobmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShuYW1lKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc3R5bGVDb25zdGFudChuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc3R5bGUuc2V0UHJvcGVydHkobmFtZSwgdmFsdWUsIHByaW9yaXR5KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc3R5bGVGdW5jdGlvbihuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAodiA9PSBudWxsKSB0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KG5hbWUpO1xuICAgIGVsc2UgdGhpcy5zdHlsZS5zZXRQcm9wZXJ0eShuYW1lLCB2LCBwcmlvcml0eSk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBwcmlvcml0eSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDFcbiAgICAgID8gdGhpcy5lYWNoKCh2YWx1ZSA9PSBudWxsXG4gICAgICAgICAgICA/IHN0eWxlUmVtb3ZlIDogdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICAgID8gc3R5bGVGdW5jdGlvblxuICAgICAgICAgICAgOiBzdHlsZUNvbnN0YW50KShuYW1lLCB2YWx1ZSwgcHJpb3JpdHkgPT0gbnVsbCA/IFwiXCIgOiBwcmlvcml0eSkpXG4gICAgICA6IHN0eWxlVmFsdWUodGhpcy5ub2RlKCksIG5hbWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3R5bGVWYWx1ZShub2RlLCBuYW1lKSB7XG4gIHJldHVybiBub2RlLnN0eWxlLmdldFByb3BlcnR5VmFsdWUobmFtZSlcbiAgICAgIHx8IGRlZmF1bHRWaWV3KG5vZGUpLmdldENvbXB1dGVkU3R5bGUobm9kZSwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZShuYW1lKTtcbn1cbiIsImZ1bmN0aW9uIHByb3BlcnR5UmVtb3ZlKG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIGRlbGV0ZSB0aGlzW25hbWVdO1xuICB9O1xufVxuXG5mdW5jdGlvbiBwcm9wZXJ0eUNvbnN0YW50KG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzW25hbWVdID0gdmFsdWU7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHByb3BlcnR5RnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAodiA9PSBudWxsKSBkZWxldGUgdGhpc1tuYW1lXTtcbiAgICBlbHNlIHRoaXNbbmFtZV0gPSB2O1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDFcbiAgICAgID8gdGhpcy5lYWNoKCh2YWx1ZSA9PSBudWxsXG4gICAgICAgICAgPyBwcm9wZXJ0eVJlbW92ZSA6IHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgPyBwcm9wZXJ0eUZ1bmN0aW9uXG4gICAgICAgICAgOiBwcm9wZXJ0eUNvbnN0YW50KShuYW1lLCB2YWx1ZSkpXG4gICAgICA6IHRoaXMubm9kZSgpW25hbWVdO1xufVxuIiwiZnVuY3Rpb24gY2xhc3NBcnJheShzdHJpbmcpIHtcbiAgcmV0dXJuIHN0cmluZy50cmltKCkuc3BsaXQoL158XFxzKy8pO1xufVxuXG5mdW5jdGlvbiBjbGFzc0xpc3Qobm9kZSkge1xuICByZXR1cm4gbm9kZS5jbGFzc0xpc3QgfHwgbmV3IENsYXNzTGlzdChub2RlKTtcbn1cblxuZnVuY3Rpb24gQ2xhc3NMaXN0KG5vZGUpIHtcbiAgdGhpcy5fbm9kZSA9IG5vZGU7XG4gIHRoaXMuX25hbWVzID0gY2xhc3NBcnJheShub2RlLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpIHx8IFwiXCIpO1xufVxuXG5DbGFzc0xpc3QucHJvdG90eXBlID0ge1xuICBhZGQ6IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgaSA9IHRoaXMuX25hbWVzLmluZGV4T2YobmFtZSk7XG4gICAgaWYgKGkgPCAwKSB7XG4gICAgICB0aGlzLl9uYW1lcy5wdXNoKG5hbWUpO1xuICAgICAgdGhpcy5fbm9kZS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCB0aGlzLl9uYW1lcy5qb2luKFwiIFwiKSk7XG4gICAgfVxuICB9LFxuICByZW1vdmU6IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgaSA9IHRoaXMuX25hbWVzLmluZGV4T2YobmFtZSk7XG4gICAgaWYgKGkgPj0gMCkge1xuICAgICAgdGhpcy5fbmFtZXMuc3BsaWNlKGksIDEpO1xuICAgICAgdGhpcy5fbm9kZS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCB0aGlzLl9uYW1lcy5qb2luKFwiIFwiKSk7XG4gICAgfVxuICB9LFxuICBjb250YWluczogZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiB0aGlzLl9uYW1lcy5pbmRleE9mKG5hbWUpID49IDA7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGNsYXNzZWRBZGQobm9kZSwgbmFtZXMpIHtcbiAgdmFyIGxpc3QgPSBjbGFzc0xpc3Qobm9kZSksIGkgPSAtMSwgbiA9IG5hbWVzLmxlbmd0aDtcbiAgd2hpbGUgKCsraSA8IG4pIGxpc3QuYWRkKG5hbWVzW2ldKTtcbn1cblxuZnVuY3Rpb24gY2xhc3NlZFJlbW92ZShub2RlLCBuYW1lcykge1xuICB2YXIgbGlzdCA9IGNsYXNzTGlzdChub2RlKSwgaSA9IC0xLCBuID0gbmFtZXMubGVuZ3RoO1xuICB3aGlsZSAoKytpIDwgbikgbGlzdC5yZW1vdmUobmFtZXNbaV0pO1xufVxuXG5mdW5jdGlvbiBjbGFzc2VkVHJ1ZShuYW1lcykge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgY2xhc3NlZEFkZCh0aGlzLCBuYW1lcyk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGNsYXNzZWRGYWxzZShuYW1lcykge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgY2xhc3NlZFJlbW92ZSh0aGlzLCBuYW1lcyk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGNsYXNzZWRGdW5jdGlvbihuYW1lcywgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICh2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpID8gY2xhc3NlZEFkZCA6IGNsYXNzZWRSZW1vdmUpKHRoaXMsIG5hbWVzKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgdmFyIG5hbWVzID0gY2xhc3NBcnJheShuYW1lICsgXCJcIik7XG5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgdmFyIGxpc3QgPSBjbGFzc0xpc3QodGhpcy5ub2RlKCkpLCBpID0gLTEsIG4gPSBuYW1lcy5sZW5ndGg7XG4gICAgd2hpbGUgKCsraSA8IG4pIGlmICghbGlzdC5jb250YWlucyhuYW1lc1tpXSkpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiB0aGlzLmVhY2goKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IGNsYXNzZWRGdW5jdGlvbiA6IHZhbHVlXG4gICAgICA/IGNsYXNzZWRUcnVlXG4gICAgICA6IGNsYXNzZWRGYWxzZSkobmFtZXMsIHZhbHVlKSk7XG59XG4iLCJmdW5jdGlvbiB0ZXh0UmVtb3ZlKCkge1xuICB0aGlzLnRleHRDb250ZW50ID0gXCJcIjtcbn1cblxuZnVuY3Rpb24gdGV4dENvbnN0YW50KHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnRleHRDb250ZW50ID0gdmFsdWU7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHRleHRGdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHRoaXMudGV4dENvbnRlbnQgPSB2ID09IG51bGwgPyBcIlwiIDogdjtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgID8gdGhpcy5lYWNoKHZhbHVlID09IG51bGxcbiAgICAgICAgICA/IHRleHRSZW1vdmUgOiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICA/IHRleHRGdW5jdGlvblxuICAgICAgICAgIDogdGV4dENvbnN0YW50KSh2YWx1ZSkpXG4gICAgICA6IHRoaXMubm9kZSgpLnRleHRDb250ZW50O1xufVxuIiwiZnVuY3Rpb24gaHRtbFJlbW92ZSgpIHtcbiAgdGhpcy5pbm5lckhUTUwgPSBcIlwiO1xufVxuXG5mdW5jdGlvbiBodG1sQ29uc3RhbnQodmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaW5uZXJIVE1MID0gdmFsdWU7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGh0bWxGdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHRoaXMuaW5uZXJIVE1MID0gdiA9PSBudWxsID8gXCJcIiA6IHY7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICA/IHRoaXMuZWFjaCh2YWx1ZSA9PSBudWxsXG4gICAgICAgICAgPyBodG1sUmVtb3ZlIDogKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgPyBodG1sRnVuY3Rpb25cbiAgICAgICAgICA6IGh0bWxDb25zdGFudCkodmFsdWUpKVxuICAgICAgOiB0aGlzLm5vZGUoKS5pbm5lckhUTUw7XG59XG4iLCJmdW5jdGlvbiByYWlzZSgpIHtcbiAgaWYgKHRoaXMubmV4dFNpYmxpbmcpIHRoaXMucGFyZW50Tm9kZS5hcHBlbmRDaGlsZCh0aGlzKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLmVhY2gocmFpc2UpO1xufVxuIiwiZnVuY3Rpb24gbG93ZXIoKSB7XG4gIGlmICh0aGlzLnByZXZpb3VzU2libGluZykgdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLCB0aGlzLnBhcmVudE5vZGUuZmlyc3RDaGlsZCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5lYWNoKGxvd2VyKTtcbn1cbiIsImltcG9ydCBjcmVhdG9yIGZyb20gXCIuLi9jcmVhdG9yLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUpIHtcbiAgdmFyIGNyZWF0ZSA9IHR5cGVvZiBuYW1lID09PSBcImZ1bmN0aW9uXCIgPyBuYW1lIDogY3JlYXRvcihuYW1lKTtcbiAgcmV0dXJuIHRoaXMuc2VsZWN0KGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmFwcGVuZENoaWxkKGNyZWF0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfSk7XG59XG4iLCJpbXBvcnQgY3JlYXRvciBmcm9tIFwiLi4vY3JlYXRvci5qc1wiO1xuaW1wb3J0IHNlbGVjdG9yIGZyb20gXCIuLi9zZWxlY3Rvci5qc1wiO1xuXG5mdW5jdGlvbiBjb25zdGFudE51bGwoKSB7XG4gIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCBiZWZvcmUpIHtcbiAgdmFyIGNyZWF0ZSA9IHR5cGVvZiBuYW1lID09PSBcImZ1bmN0aW9uXCIgPyBuYW1lIDogY3JlYXRvcihuYW1lKSxcbiAgICAgIHNlbGVjdCA9IGJlZm9yZSA9PSBudWxsID8gY29uc3RhbnROdWxsIDogdHlwZW9mIGJlZm9yZSA9PT0gXCJmdW5jdGlvblwiID8gYmVmb3JlIDogc2VsZWN0b3IoYmVmb3JlKTtcbiAgcmV0dXJuIHRoaXMuc2VsZWN0KGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmluc2VydEJlZm9yZShjcmVhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgc2VsZWN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgbnVsbCk7XG4gIH0pO1xufVxuIiwiZnVuY3Rpb24gcmVtb3ZlKCkge1xuICB2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlO1xuICBpZiAocGFyZW50KSBwYXJlbnQucmVtb3ZlQ2hpbGQodGhpcyk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5lYWNoKHJlbW92ZSk7XG59XG4iLCJmdW5jdGlvbiBzZWxlY3Rpb25fY2xvbmVTaGFsbG93KCkge1xuICB2YXIgY2xvbmUgPSB0aGlzLmNsb25lTm9kZShmYWxzZSksIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTtcbiAgcmV0dXJuIHBhcmVudCA/IHBhcmVudC5pbnNlcnRCZWZvcmUoY2xvbmUsIHRoaXMubmV4dFNpYmxpbmcpIDogY2xvbmU7XG59XG5cbmZ1bmN0aW9uIHNlbGVjdGlvbl9jbG9uZURlZXAoKSB7XG4gIHZhciBjbG9uZSA9IHRoaXMuY2xvbmVOb2RlKHRydWUpLCBwYXJlbnQgPSB0aGlzLnBhcmVudE5vZGU7XG4gIHJldHVybiBwYXJlbnQgPyBwYXJlbnQuaW5zZXJ0QmVmb3JlKGNsb25lLCB0aGlzLm5leHRTaWJsaW5nKSA6IGNsb25lO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihkZWVwKSB7XG4gIHJldHVybiB0aGlzLnNlbGVjdChkZWVwID8gc2VsZWN0aW9uX2Nsb25lRGVlcCA6IHNlbGVjdGlvbl9jbG9uZVNoYWxsb3cpO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgID8gdGhpcy5wcm9wZXJ0eShcIl9fZGF0YV9fXCIsIHZhbHVlKVxuICAgICAgOiB0aGlzLm5vZGUoKS5fX2RhdGFfXztcbn1cbiIsImZ1bmN0aW9uIGNvbnRleHRMaXN0ZW5lcihsaXN0ZW5lcikge1xuICByZXR1cm4gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBsaXN0ZW5lci5jYWxsKHRoaXMsIGV2ZW50LCB0aGlzLl9fZGF0YV9fKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gcGFyc2VUeXBlbmFtZXModHlwZW5hbWVzKSB7XG4gIHJldHVybiB0eXBlbmFtZXMudHJpbSgpLnNwbGl0KC9efFxccysvKS5tYXAoZnVuY3Rpb24odCkge1xuICAgIHZhciBuYW1lID0gXCJcIiwgaSA9IHQuaW5kZXhPZihcIi5cIik7XG4gICAgaWYgKGkgPj0gMCkgbmFtZSA9IHQuc2xpY2UoaSArIDEpLCB0ID0gdC5zbGljZSgwLCBpKTtcbiAgICByZXR1cm4ge3R5cGU6IHQsIG5hbWU6IG5hbWV9O1xuICB9KTtcbn1cblxuZnVuY3Rpb24gb25SZW1vdmUodHlwZW5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBvbiA9IHRoaXMuX19vbjtcbiAgICBpZiAoIW9uKSByZXR1cm47XG4gICAgZm9yICh2YXIgaiA9IDAsIGkgPSAtMSwgbSA9IG9uLmxlbmd0aCwgbzsgaiA8IG07ICsraikge1xuICAgICAgaWYgKG8gPSBvbltqXSwgKCF0eXBlbmFtZS50eXBlIHx8IG8udHlwZSA9PT0gdHlwZW5hbWUudHlwZSkgJiYgby5uYW1lID09PSB0eXBlbmFtZS5uYW1lKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihvLnR5cGUsIG8ubGlzdGVuZXIsIG8ub3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvblsrK2ldID0gbztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCsraSkgb24ubGVuZ3RoID0gaTtcbiAgICBlbHNlIGRlbGV0ZSB0aGlzLl9fb247XG4gIH07XG59XG5cbmZ1bmN0aW9uIG9uQWRkKHR5cGVuYW1lLCB2YWx1ZSwgb3B0aW9ucykge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG9uID0gdGhpcy5fX29uLCBvLCBsaXN0ZW5lciA9IGNvbnRleHRMaXN0ZW5lcih2YWx1ZSk7XG4gICAgaWYgKG9uKSBmb3IgKHZhciBqID0gMCwgbSA9IG9uLmxlbmd0aDsgaiA8IG07ICsraikge1xuICAgICAgaWYgKChvID0gb25bal0pLnR5cGUgPT09IHR5cGVuYW1lLnR5cGUgJiYgby5uYW1lID09PSB0eXBlbmFtZS5uYW1lKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihvLnR5cGUsIG8ubGlzdGVuZXIsIG8ub3B0aW9ucyk7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihvLnR5cGUsIG8ubGlzdGVuZXIgPSBsaXN0ZW5lciwgby5vcHRpb25zID0gb3B0aW9ucyk7XG4gICAgICAgIG8udmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIodHlwZW5hbWUudHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpO1xuICAgIG8gPSB7dHlwZTogdHlwZW5hbWUudHlwZSwgbmFtZTogdHlwZW5hbWUubmFtZSwgdmFsdWU6IHZhbHVlLCBsaXN0ZW5lcjogbGlzdGVuZXIsIG9wdGlvbnM6IG9wdGlvbnN9O1xuICAgIGlmICghb24pIHRoaXMuX19vbiA9IFtvXTtcbiAgICBlbHNlIG9uLnB1c2gobyk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHR5cGVuYW1lLCB2YWx1ZSwgb3B0aW9ucykge1xuICB2YXIgdHlwZW5hbWVzID0gcGFyc2VUeXBlbmFtZXModHlwZW5hbWUgKyBcIlwiKSwgaSwgbiA9IHR5cGVuYW1lcy5sZW5ndGgsIHQ7XG5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgdmFyIG9uID0gdGhpcy5ub2RlKCkuX19vbjtcbiAgICBpZiAob24pIGZvciAodmFyIGogPSAwLCBtID0gb24ubGVuZ3RoLCBvOyBqIDwgbTsgKytqKSB7XG4gICAgICBmb3IgKGkgPSAwLCBvID0gb25bal07IGkgPCBuOyArK2kpIHtcbiAgICAgICAgaWYgKCh0ID0gdHlwZW5hbWVzW2ldKS50eXBlID09PSBvLnR5cGUgJiYgdC5uYW1lID09PSBvLm5hbWUpIHtcbiAgICAgICAgICByZXR1cm4gby52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICBvbiA9IHZhbHVlID8gb25BZGQgOiBvblJlbW92ZTtcbiAgZm9yIChpID0gMDsgaSA8IG47ICsraSkgdGhpcy5lYWNoKG9uKHR5cGVuYW1lc1tpXSwgdmFsdWUsIG9wdGlvbnMpKTtcbiAgcmV0dXJuIHRoaXM7XG59XG4iLCJpbXBvcnQgZGVmYXVsdFZpZXcgZnJvbSBcIi4uL3dpbmRvdy5qc1wiO1xuXG5mdW5jdGlvbiBkaXNwYXRjaEV2ZW50KG5vZGUsIHR5cGUsIHBhcmFtcykge1xuICB2YXIgd2luZG93ID0gZGVmYXVsdFZpZXcobm9kZSksXG4gICAgICBldmVudCA9IHdpbmRvdy5DdXN0b21FdmVudDtcblxuICBpZiAodHlwZW9mIGV2ZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBldmVudCA9IG5ldyBldmVudCh0eXBlLCBwYXJhbXMpO1xuICB9IGVsc2Uge1xuICAgIGV2ZW50ID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIik7XG4gICAgaWYgKHBhcmFtcykgZXZlbnQuaW5pdEV2ZW50KHR5cGUsIHBhcmFtcy5idWJibGVzLCBwYXJhbXMuY2FuY2VsYWJsZSksIGV2ZW50LmRldGFpbCA9IHBhcmFtcy5kZXRhaWw7XG4gICAgZWxzZSBldmVudC5pbml0RXZlbnQodHlwZSwgZmFsc2UsIGZhbHNlKTtcbiAgfVxuXG4gIG5vZGUuZGlzcGF0Y2hFdmVudChldmVudCk7XG59XG5cbmZ1bmN0aW9uIGRpc3BhdGNoQ29uc3RhbnQodHlwZSwgcGFyYW1zKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZGlzcGF0Y2hFdmVudCh0aGlzLCB0eXBlLCBwYXJhbXMpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBkaXNwYXRjaEZ1bmN0aW9uKHR5cGUsIHBhcmFtcykge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGRpc3BhdGNoRXZlbnQodGhpcywgdHlwZSwgcGFyYW1zLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih0eXBlLCBwYXJhbXMpIHtcbiAgcmV0dXJuIHRoaXMuZWFjaCgodHlwZW9mIHBhcmFtcyA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IGRpc3BhdGNoRnVuY3Rpb25cbiAgICAgIDogZGlzcGF0Y2hDb25zdGFudCkodHlwZSwgcGFyYW1zKSk7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiooKSB7XG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgaiA9IDAsIG0gPSBncm91cHMubGVuZ3RoOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIGkgPSAwLCBuID0gZ3JvdXAubGVuZ3RoLCBub2RlOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB5aWVsZCBub2RlO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHNlbGVjdGlvbl9zZWxlY3QgZnJvbSBcIi4vc2VsZWN0LmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX3NlbGVjdEFsbCBmcm9tIFwiLi9zZWxlY3RBbGwuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fc2VsZWN0Q2hpbGQgZnJvbSBcIi4vc2VsZWN0Q2hpbGQuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fc2VsZWN0Q2hpbGRyZW4gZnJvbSBcIi4vc2VsZWN0Q2hpbGRyZW4uanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fZmlsdGVyIGZyb20gXCIuL2ZpbHRlci5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9kYXRhIGZyb20gXCIuL2RhdGEuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fZW50ZXIgZnJvbSBcIi4vZW50ZXIuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fZXhpdCBmcm9tIFwiLi9leGl0LmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2pvaW4gZnJvbSBcIi4vam9pbi5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9tZXJnZSBmcm9tIFwiLi9tZXJnZS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9vcmRlciBmcm9tIFwiLi9vcmRlci5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9zb3J0IGZyb20gXCIuL3NvcnQuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fY2FsbCBmcm9tIFwiLi9jYWxsLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX25vZGVzIGZyb20gXCIuL25vZGVzLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX25vZGUgZnJvbSBcIi4vbm9kZS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9zaXplIGZyb20gXCIuL3NpemUuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fZW1wdHkgZnJvbSBcIi4vZW1wdHkuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fZWFjaCBmcm9tIFwiLi9lYWNoLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2F0dHIgZnJvbSBcIi4vYXR0ci5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9zdHlsZSBmcm9tIFwiLi9zdHlsZS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9wcm9wZXJ0eSBmcm9tIFwiLi9wcm9wZXJ0eS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9jbGFzc2VkIGZyb20gXCIuL2NsYXNzZWQuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fdGV4dCBmcm9tIFwiLi90ZXh0LmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2h0bWwgZnJvbSBcIi4vaHRtbC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9yYWlzZSBmcm9tIFwiLi9yYWlzZS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9sb3dlciBmcm9tIFwiLi9sb3dlci5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9hcHBlbmQgZnJvbSBcIi4vYXBwZW5kLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2luc2VydCBmcm9tIFwiLi9pbnNlcnQuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fcmVtb3ZlIGZyb20gXCIuL3JlbW92ZS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9jbG9uZSBmcm9tIFwiLi9jbG9uZS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9kYXR1bSBmcm9tIFwiLi9kYXR1bS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9vbiBmcm9tIFwiLi9vbi5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9kaXNwYXRjaCBmcm9tIFwiLi9kaXNwYXRjaC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9pdGVyYXRvciBmcm9tIFwiLi9pdGVyYXRvci5qc1wiO1xuXG5leHBvcnQgdmFyIHJvb3QgPSBbbnVsbF07XG5cbmV4cG9ydCBmdW5jdGlvbiBTZWxlY3Rpb24oZ3JvdXBzLCBwYXJlbnRzKSB7XG4gIHRoaXMuX2dyb3VwcyA9IGdyb3VwcztcbiAgdGhpcy5fcGFyZW50cyA9IHBhcmVudHM7XG59XG5cbmZ1bmN0aW9uIHNlbGVjdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBTZWxlY3Rpb24oW1tkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRdXSwgcm9vdCk7XG59XG5cbmZ1bmN0aW9uIHNlbGVjdGlvbl9zZWxlY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzO1xufVxuXG5TZWxlY3Rpb24ucHJvdG90eXBlID0gc2VsZWN0aW9uLnByb3RvdHlwZSA9IHtcbiAgY29uc3RydWN0b3I6IFNlbGVjdGlvbixcbiAgc2VsZWN0OiBzZWxlY3Rpb25fc2VsZWN0LFxuICBzZWxlY3RBbGw6IHNlbGVjdGlvbl9zZWxlY3RBbGwsXG4gIHNlbGVjdENoaWxkOiBzZWxlY3Rpb25fc2VsZWN0Q2hpbGQsXG4gIHNlbGVjdENoaWxkcmVuOiBzZWxlY3Rpb25fc2VsZWN0Q2hpbGRyZW4sXG4gIGZpbHRlcjogc2VsZWN0aW9uX2ZpbHRlcixcbiAgZGF0YTogc2VsZWN0aW9uX2RhdGEsXG4gIGVudGVyOiBzZWxlY3Rpb25fZW50ZXIsXG4gIGV4aXQ6IHNlbGVjdGlvbl9leGl0LFxuICBqb2luOiBzZWxlY3Rpb25fam9pbixcbiAgbWVyZ2U6IHNlbGVjdGlvbl9tZXJnZSxcbiAgc2VsZWN0aW9uOiBzZWxlY3Rpb25fc2VsZWN0aW9uLFxuICBvcmRlcjogc2VsZWN0aW9uX29yZGVyLFxuICBzb3J0OiBzZWxlY3Rpb25fc29ydCxcbiAgY2FsbDogc2VsZWN0aW9uX2NhbGwsXG4gIG5vZGVzOiBzZWxlY3Rpb25fbm9kZXMsXG4gIG5vZGU6IHNlbGVjdGlvbl9ub2RlLFxuICBzaXplOiBzZWxlY3Rpb25fc2l6ZSxcbiAgZW1wdHk6IHNlbGVjdGlvbl9lbXB0eSxcbiAgZWFjaDogc2VsZWN0aW9uX2VhY2gsXG4gIGF0dHI6IHNlbGVjdGlvbl9hdHRyLFxuICBzdHlsZTogc2VsZWN0aW9uX3N0eWxlLFxuICBwcm9wZXJ0eTogc2VsZWN0aW9uX3Byb3BlcnR5LFxuICBjbGFzc2VkOiBzZWxlY3Rpb25fY2xhc3NlZCxcbiAgdGV4dDogc2VsZWN0aW9uX3RleHQsXG4gIGh0bWw6IHNlbGVjdGlvbl9odG1sLFxuICByYWlzZTogc2VsZWN0aW9uX3JhaXNlLFxuICBsb3dlcjogc2VsZWN0aW9uX2xvd2VyLFxuICBhcHBlbmQ6IHNlbGVjdGlvbl9hcHBlbmQsXG4gIGluc2VydDogc2VsZWN0aW9uX2luc2VydCxcbiAgcmVtb3ZlOiBzZWxlY3Rpb25fcmVtb3ZlLFxuICBjbG9uZTogc2VsZWN0aW9uX2Nsb25lLFxuICBkYXR1bTogc2VsZWN0aW9uX2RhdHVtLFxuICBvbjogc2VsZWN0aW9uX29uLFxuICBkaXNwYXRjaDogc2VsZWN0aW9uX2Rpc3BhdGNoLFxuICBbU3ltYm9sLml0ZXJhdG9yXTogc2VsZWN0aW9uX2l0ZXJhdG9yXG59O1xuXG5leHBvcnQgZGVmYXVsdCBzZWxlY3Rpb247XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbihjb25zdHJ1Y3RvciwgZmFjdG9yeSwgcHJvdG90eXBlKSB7XG4gIGNvbnN0cnVjdG9yLnByb3RvdHlwZSA9IGZhY3RvcnkucHJvdG90eXBlID0gcHJvdG90eXBlO1xuICBwcm90b3R5cGUuY29uc3RydWN0b3IgPSBjb25zdHJ1Y3Rvcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZChwYXJlbnQsIGRlZmluaXRpb24pIHtcbiAgdmFyIHByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSk7XG4gIGZvciAodmFyIGtleSBpbiBkZWZpbml0aW9uKSBwcm90b3R5cGVba2V5XSA9IGRlZmluaXRpb25ba2V5XTtcbiAgcmV0dXJuIHByb3RvdHlwZTtcbn1cbiIsImltcG9ydCBkZWZpbmUsIHtleHRlbmR9IGZyb20gXCIuL2RlZmluZS5qc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gQ29sb3IoKSB7fVxuXG5leHBvcnQgdmFyIGRhcmtlciA9IDAuNztcbmV4cG9ydCB2YXIgYnJpZ2h0ZXIgPSAxIC8gZGFya2VyO1xuXG52YXIgcmVJID0gXCJcXFxccyooWystXT9cXFxcZCspXFxcXHMqXCIsXG4gICAgcmVOID0gXCJcXFxccyooWystXT8oPzpcXFxcZCpcXFxcLik/XFxcXGQrKD86W2VFXVsrLV0/XFxcXGQrKT8pXFxcXHMqXCIsXG4gICAgcmVQID0gXCJcXFxccyooWystXT8oPzpcXFxcZCpcXFxcLik/XFxcXGQrKD86W2VFXVsrLV0/XFxcXGQrKT8pJVxcXFxzKlwiLFxuICAgIHJlSGV4ID0gL14jKFswLTlhLWZdezMsOH0pJC8sXG4gICAgcmVSZ2JJbnRlZ2VyID0gbmV3IFJlZ0V4cChgXnJnYlxcXFwoJHtyZUl9LCR7cmVJfSwke3JlSX1cXFxcKSRgKSxcbiAgICByZVJnYlBlcmNlbnQgPSBuZXcgUmVnRXhwKGBecmdiXFxcXCgke3JlUH0sJHtyZVB9LCR7cmVQfVxcXFwpJGApLFxuICAgIHJlUmdiYUludGVnZXIgPSBuZXcgUmVnRXhwKGBecmdiYVxcXFwoJHtyZUl9LCR7cmVJfSwke3JlSX0sJHtyZU59XFxcXCkkYCksXG4gICAgcmVSZ2JhUGVyY2VudCA9IG5ldyBSZWdFeHAoYF5yZ2JhXFxcXCgke3JlUH0sJHtyZVB9LCR7cmVQfSwke3JlTn1cXFxcKSRgKSxcbiAgICByZUhzbFBlcmNlbnQgPSBuZXcgUmVnRXhwKGBeaHNsXFxcXCgke3JlTn0sJHtyZVB9LCR7cmVQfVxcXFwpJGApLFxuICAgIHJlSHNsYVBlcmNlbnQgPSBuZXcgUmVnRXhwKGBeaHNsYVxcXFwoJHtyZU59LCR7cmVQfSwke3JlUH0sJHtyZU59XFxcXCkkYCk7XG5cbnZhciBuYW1lZCA9IHtcbiAgYWxpY2VibHVlOiAweGYwZjhmZixcbiAgYW50aXF1ZXdoaXRlOiAweGZhZWJkNyxcbiAgYXF1YTogMHgwMGZmZmYsXG4gIGFxdWFtYXJpbmU6IDB4N2ZmZmQ0LFxuICBhenVyZTogMHhmMGZmZmYsXG4gIGJlaWdlOiAweGY1ZjVkYyxcbiAgYmlzcXVlOiAweGZmZTRjNCxcbiAgYmxhY2s6IDB4MDAwMDAwLFxuICBibGFuY2hlZGFsbW9uZDogMHhmZmViY2QsXG4gIGJsdWU6IDB4MDAwMGZmLFxuICBibHVldmlvbGV0OiAweDhhMmJlMixcbiAgYnJvd246IDB4YTUyYTJhLFxuICBidXJseXdvb2Q6IDB4ZGViODg3LFxuICBjYWRldGJsdWU6IDB4NWY5ZWEwLFxuICBjaGFydHJldXNlOiAweDdmZmYwMCxcbiAgY2hvY29sYXRlOiAweGQyNjkxZSxcbiAgY29yYWw6IDB4ZmY3ZjUwLFxuICBjb3JuZmxvd2VyYmx1ZTogMHg2NDk1ZWQsXG4gIGNvcm5zaWxrOiAweGZmZjhkYyxcbiAgY3JpbXNvbjogMHhkYzE0M2MsXG4gIGN5YW46IDB4MDBmZmZmLFxuICBkYXJrYmx1ZTogMHgwMDAwOGIsXG4gIGRhcmtjeWFuOiAweDAwOGI4YixcbiAgZGFya2dvbGRlbnJvZDogMHhiODg2MGIsXG4gIGRhcmtncmF5OiAweGE5YTlhOSxcbiAgZGFya2dyZWVuOiAweDAwNjQwMCxcbiAgZGFya2dyZXk6IDB4YTlhOWE5LFxuICBkYXJra2hha2k6IDB4YmRiNzZiLFxuICBkYXJrbWFnZW50YTogMHg4YjAwOGIsXG4gIGRhcmtvbGl2ZWdyZWVuOiAweDU1NmIyZixcbiAgZGFya29yYW5nZTogMHhmZjhjMDAsXG4gIGRhcmtvcmNoaWQ6IDB4OTkzMmNjLFxuICBkYXJrcmVkOiAweDhiMDAwMCxcbiAgZGFya3NhbG1vbjogMHhlOTk2N2EsXG4gIGRhcmtzZWFncmVlbjogMHg4ZmJjOGYsXG4gIGRhcmtzbGF0ZWJsdWU6IDB4NDgzZDhiLFxuICBkYXJrc2xhdGVncmF5OiAweDJmNGY0ZixcbiAgZGFya3NsYXRlZ3JleTogMHgyZjRmNGYsXG4gIGRhcmt0dXJxdW9pc2U6IDB4MDBjZWQxLFxuICBkYXJrdmlvbGV0OiAweDk0MDBkMyxcbiAgZGVlcHBpbms6IDB4ZmYxNDkzLFxuICBkZWVwc2t5Ymx1ZTogMHgwMGJmZmYsXG4gIGRpbWdyYXk6IDB4Njk2OTY5LFxuICBkaW1ncmV5OiAweDY5Njk2OSxcbiAgZG9kZ2VyYmx1ZTogMHgxZTkwZmYsXG4gIGZpcmVicmljazogMHhiMjIyMjIsXG4gIGZsb3JhbHdoaXRlOiAweGZmZmFmMCxcbiAgZm9yZXN0Z3JlZW46IDB4MjI4YjIyLFxuICBmdWNoc2lhOiAweGZmMDBmZixcbiAgZ2FpbnNib3JvOiAweGRjZGNkYyxcbiAgZ2hvc3R3aGl0ZTogMHhmOGY4ZmYsXG4gIGdvbGQ6IDB4ZmZkNzAwLFxuICBnb2xkZW5yb2Q6IDB4ZGFhNTIwLFxuICBncmF5OiAweDgwODA4MCxcbiAgZ3JlZW46IDB4MDA4MDAwLFxuICBncmVlbnllbGxvdzogMHhhZGZmMmYsXG4gIGdyZXk6IDB4ODA4MDgwLFxuICBob25leWRldzogMHhmMGZmZjAsXG4gIGhvdHBpbms6IDB4ZmY2OWI0LFxuICBpbmRpYW5yZWQ6IDB4Y2Q1YzVjLFxuICBpbmRpZ286IDB4NGIwMDgyLFxuICBpdm9yeTogMHhmZmZmZjAsXG4gIGtoYWtpOiAweGYwZTY4YyxcbiAgbGF2ZW5kZXI6IDB4ZTZlNmZhLFxuICBsYXZlbmRlcmJsdXNoOiAweGZmZjBmNSxcbiAgbGF3bmdyZWVuOiAweDdjZmMwMCxcbiAgbGVtb25jaGlmZm9uOiAweGZmZmFjZCxcbiAgbGlnaHRibHVlOiAweGFkZDhlNixcbiAgbGlnaHRjb3JhbDogMHhmMDgwODAsXG4gIGxpZ2h0Y3lhbjogMHhlMGZmZmYsXG4gIGxpZ2h0Z29sZGVucm9keWVsbG93OiAweGZhZmFkMixcbiAgbGlnaHRncmF5OiAweGQzZDNkMyxcbiAgbGlnaHRncmVlbjogMHg5MGVlOTAsXG4gIGxpZ2h0Z3JleTogMHhkM2QzZDMsXG4gIGxpZ2h0cGluazogMHhmZmI2YzEsXG4gIGxpZ2h0c2FsbW9uOiAweGZmYTA3YSxcbiAgbGlnaHRzZWFncmVlbjogMHgyMGIyYWEsXG4gIGxpZ2h0c2t5Ymx1ZTogMHg4N2NlZmEsXG4gIGxpZ2h0c2xhdGVncmF5OiAweDc3ODg5OSxcbiAgbGlnaHRzbGF0ZWdyZXk6IDB4Nzc4ODk5LFxuICBsaWdodHN0ZWVsYmx1ZTogMHhiMGM0ZGUsXG4gIGxpZ2h0eWVsbG93OiAweGZmZmZlMCxcbiAgbGltZTogMHgwMGZmMDAsXG4gIGxpbWVncmVlbjogMHgzMmNkMzIsXG4gIGxpbmVuOiAweGZhZjBlNixcbiAgbWFnZW50YTogMHhmZjAwZmYsXG4gIG1hcm9vbjogMHg4MDAwMDAsXG4gIG1lZGl1bWFxdWFtYXJpbmU6IDB4NjZjZGFhLFxuICBtZWRpdW1ibHVlOiAweDAwMDBjZCxcbiAgbWVkaXVtb3JjaGlkOiAweGJhNTVkMyxcbiAgbWVkaXVtcHVycGxlOiAweDkzNzBkYixcbiAgbWVkaXVtc2VhZ3JlZW46IDB4M2NiMzcxLFxuICBtZWRpdW1zbGF0ZWJsdWU6IDB4N2I2OGVlLFxuICBtZWRpdW1zcHJpbmdncmVlbjogMHgwMGZhOWEsXG4gIG1lZGl1bXR1cnF1b2lzZTogMHg0OGQxY2MsXG4gIG1lZGl1bXZpb2xldHJlZDogMHhjNzE1ODUsXG4gIG1pZG5pZ2h0Ymx1ZTogMHgxOTE5NzAsXG4gIG1pbnRjcmVhbTogMHhmNWZmZmEsXG4gIG1pc3R5cm9zZTogMHhmZmU0ZTEsXG4gIG1vY2Nhc2luOiAweGZmZTRiNSxcbiAgbmF2YWpvd2hpdGU6IDB4ZmZkZWFkLFxuICBuYXZ5OiAweDAwMDA4MCxcbiAgb2xkbGFjZTogMHhmZGY1ZTYsXG4gIG9saXZlOiAweDgwODAwMCxcbiAgb2xpdmVkcmFiOiAweDZiOGUyMyxcbiAgb3JhbmdlOiAweGZmYTUwMCxcbiAgb3JhbmdlcmVkOiAweGZmNDUwMCxcbiAgb3JjaGlkOiAweGRhNzBkNixcbiAgcGFsZWdvbGRlbnJvZDogMHhlZWU4YWEsXG4gIHBhbGVncmVlbjogMHg5OGZiOTgsXG4gIHBhbGV0dXJxdW9pc2U6IDB4YWZlZWVlLFxuICBwYWxldmlvbGV0cmVkOiAweGRiNzA5MyxcbiAgcGFwYXlhd2hpcDogMHhmZmVmZDUsXG4gIHBlYWNocHVmZjogMHhmZmRhYjksXG4gIHBlcnU6IDB4Y2Q4NTNmLFxuICBwaW5rOiAweGZmYzBjYixcbiAgcGx1bTogMHhkZGEwZGQsXG4gIHBvd2RlcmJsdWU6IDB4YjBlMGU2LFxuICBwdXJwbGU6IDB4ODAwMDgwLFxuICByZWJlY2NhcHVycGxlOiAweDY2MzM5OSxcbiAgcmVkOiAweGZmMDAwMCxcbiAgcm9zeWJyb3duOiAweGJjOGY4ZixcbiAgcm95YWxibHVlOiAweDQxNjllMSxcbiAgc2FkZGxlYnJvd246IDB4OGI0NTEzLFxuICBzYWxtb246IDB4ZmE4MDcyLFxuICBzYW5keWJyb3duOiAweGY0YTQ2MCxcbiAgc2VhZ3JlZW46IDB4MmU4YjU3LFxuICBzZWFzaGVsbDogMHhmZmY1ZWUsXG4gIHNpZW5uYTogMHhhMDUyMmQsXG4gIHNpbHZlcjogMHhjMGMwYzAsXG4gIHNreWJsdWU6IDB4ODdjZWViLFxuICBzbGF0ZWJsdWU6IDB4NmE1YWNkLFxuICBzbGF0ZWdyYXk6IDB4NzA4MDkwLFxuICBzbGF0ZWdyZXk6IDB4NzA4MDkwLFxuICBzbm93OiAweGZmZmFmYSxcbiAgc3ByaW5nZ3JlZW46IDB4MDBmZjdmLFxuICBzdGVlbGJsdWU6IDB4NDY4MmI0LFxuICB0YW46IDB4ZDJiNDhjLFxuICB0ZWFsOiAweDAwODA4MCxcbiAgdGhpc3RsZTogMHhkOGJmZDgsXG4gIHRvbWF0bzogMHhmZjYzNDcsXG4gIHR1cnF1b2lzZTogMHg0MGUwZDAsXG4gIHZpb2xldDogMHhlZTgyZWUsXG4gIHdoZWF0OiAweGY1ZGViMyxcbiAgd2hpdGU6IDB4ZmZmZmZmLFxuICB3aGl0ZXNtb2tlOiAweGY1ZjVmNSxcbiAgeWVsbG93OiAweGZmZmYwMCxcbiAgeWVsbG93Z3JlZW46IDB4OWFjZDMyXG59O1xuXG5kZWZpbmUoQ29sb3IsIGNvbG9yLCB7XG4gIGNvcHkoY2hhbm5lbHMpIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihuZXcgdGhpcy5jb25zdHJ1Y3RvciwgdGhpcywgY2hhbm5lbHMpO1xuICB9LFxuICBkaXNwbGF5YWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5yZ2IoKS5kaXNwbGF5YWJsZSgpO1xuICB9LFxuICBoZXg6IGNvbG9yX2Zvcm1hdEhleCwgLy8gRGVwcmVjYXRlZCEgVXNlIGNvbG9yLmZvcm1hdEhleC5cbiAgZm9ybWF0SGV4OiBjb2xvcl9mb3JtYXRIZXgsXG4gIGZvcm1hdEhleDg6IGNvbG9yX2Zvcm1hdEhleDgsXG4gIGZvcm1hdEhzbDogY29sb3JfZm9ybWF0SHNsLFxuICBmb3JtYXRSZ2I6IGNvbG9yX2Zvcm1hdFJnYixcbiAgdG9TdHJpbmc6IGNvbG9yX2Zvcm1hdFJnYlxufSk7XG5cbmZ1bmN0aW9uIGNvbG9yX2Zvcm1hdEhleCgpIHtcbiAgcmV0dXJuIHRoaXMucmdiKCkuZm9ybWF0SGV4KCk7XG59XG5cbmZ1bmN0aW9uIGNvbG9yX2Zvcm1hdEhleDgoKSB7XG4gIHJldHVybiB0aGlzLnJnYigpLmZvcm1hdEhleDgoKTtcbn1cblxuZnVuY3Rpb24gY29sb3JfZm9ybWF0SHNsKCkge1xuICByZXR1cm4gaHNsQ29udmVydCh0aGlzKS5mb3JtYXRIc2woKTtcbn1cblxuZnVuY3Rpb24gY29sb3JfZm9ybWF0UmdiKCkge1xuICByZXR1cm4gdGhpcy5yZ2IoKS5mb3JtYXRSZ2IoKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29sb3IoZm9ybWF0KSB7XG4gIHZhciBtLCBsO1xuICBmb3JtYXQgPSAoZm9ybWF0ICsgXCJcIikudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiAobSA9IHJlSGV4LmV4ZWMoZm9ybWF0KSkgPyAobCA9IG1bMV0ubGVuZ3RoLCBtID0gcGFyc2VJbnQobVsxXSwgMTYpLCBsID09PSA2ID8gcmdibihtKSAvLyAjZmYwMDAwXG4gICAgICA6IGwgPT09IDMgPyBuZXcgUmdiKChtID4+IDggJiAweGYpIHwgKG0gPj4gNCAmIDB4ZjApLCAobSA+PiA0ICYgMHhmKSB8IChtICYgMHhmMCksICgobSAmIDB4ZikgPDwgNCkgfCAobSAmIDB4ZiksIDEpIC8vICNmMDBcbiAgICAgIDogbCA9PT0gOCA/IHJnYmEobSA+PiAyNCAmIDB4ZmYsIG0gPj4gMTYgJiAweGZmLCBtID4+IDggJiAweGZmLCAobSAmIDB4ZmYpIC8gMHhmZikgLy8gI2ZmMDAwMDAwXG4gICAgICA6IGwgPT09IDQgPyByZ2JhKChtID4+IDEyICYgMHhmKSB8IChtID4+IDggJiAweGYwKSwgKG0gPj4gOCAmIDB4ZikgfCAobSA+PiA0ICYgMHhmMCksIChtID4+IDQgJiAweGYpIHwgKG0gJiAweGYwKSwgKCgobSAmIDB4ZikgPDwgNCkgfCAobSAmIDB4ZikpIC8gMHhmZikgLy8gI2YwMDBcbiAgICAgIDogbnVsbCkgLy8gaW52YWxpZCBoZXhcbiAgICAgIDogKG0gPSByZVJnYkludGVnZXIuZXhlYyhmb3JtYXQpKSA/IG5ldyBSZ2IobVsxXSwgbVsyXSwgbVszXSwgMSkgLy8gcmdiKDI1NSwgMCwgMClcbiAgICAgIDogKG0gPSByZVJnYlBlcmNlbnQuZXhlYyhmb3JtYXQpKSA/IG5ldyBSZ2IobVsxXSAqIDI1NSAvIDEwMCwgbVsyXSAqIDI1NSAvIDEwMCwgbVszXSAqIDI1NSAvIDEwMCwgMSkgLy8gcmdiKDEwMCUsIDAlLCAwJSlcbiAgICAgIDogKG0gPSByZVJnYmFJbnRlZ2VyLmV4ZWMoZm9ybWF0KSkgPyByZ2JhKG1bMV0sIG1bMl0sIG1bM10sIG1bNF0pIC8vIHJnYmEoMjU1LCAwLCAwLCAxKVxuICAgICAgOiAobSA9IHJlUmdiYVBlcmNlbnQuZXhlYyhmb3JtYXQpKSA/IHJnYmEobVsxXSAqIDI1NSAvIDEwMCwgbVsyXSAqIDI1NSAvIDEwMCwgbVszXSAqIDI1NSAvIDEwMCwgbVs0XSkgLy8gcmdiKDEwMCUsIDAlLCAwJSwgMSlcbiAgICAgIDogKG0gPSByZUhzbFBlcmNlbnQuZXhlYyhmb3JtYXQpKSA/IGhzbGEobVsxXSwgbVsyXSAvIDEwMCwgbVszXSAvIDEwMCwgMSkgLy8gaHNsKDEyMCwgNTAlLCA1MCUpXG4gICAgICA6IChtID0gcmVIc2xhUGVyY2VudC5leGVjKGZvcm1hdCkpID8gaHNsYShtWzFdLCBtWzJdIC8gMTAwLCBtWzNdIC8gMTAwLCBtWzRdKSAvLyBoc2xhKDEyMCwgNTAlLCA1MCUsIDEpXG4gICAgICA6IG5hbWVkLmhhc093blByb3BlcnR5KGZvcm1hdCkgPyByZ2JuKG5hbWVkW2Zvcm1hdF0pIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG4gICAgICA6IGZvcm1hdCA9PT0gXCJ0cmFuc3BhcmVudFwiID8gbmV3IFJnYihOYU4sIE5hTiwgTmFOLCAwKVxuICAgICAgOiBudWxsO1xufVxuXG5mdW5jdGlvbiByZ2JuKG4pIHtcbiAgcmV0dXJuIG5ldyBSZ2IobiA+PiAxNiAmIDB4ZmYsIG4gPj4gOCAmIDB4ZmYsIG4gJiAweGZmLCAxKTtcbn1cblxuZnVuY3Rpb24gcmdiYShyLCBnLCBiLCBhKSB7XG4gIGlmIChhIDw9IDApIHIgPSBnID0gYiA9IE5hTjtcbiAgcmV0dXJuIG5ldyBSZ2IociwgZywgYiwgYSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZ2JDb252ZXJ0KG8pIHtcbiAgaWYgKCEobyBpbnN0YW5jZW9mIENvbG9yKSkgbyA9IGNvbG9yKG8pO1xuICBpZiAoIW8pIHJldHVybiBuZXcgUmdiO1xuICBvID0gby5yZ2IoKTtcbiAgcmV0dXJuIG5ldyBSZ2Ioby5yLCBvLmcsIG8uYiwgby5vcGFjaXR5KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJnYihyLCBnLCBiLCBvcGFjaXR5KSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID09PSAxID8gcmdiQ29udmVydChyKSA6IG5ldyBSZ2IociwgZywgYiwgb3BhY2l0eSA9PSBudWxsID8gMSA6IG9wYWNpdHkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gUmdiKHIsIGcsIGIsIG9wYWNpdHkpIHtcbiAgdGhpcy5yID0gK3I7XG4gIHRoaXMuZyA9ICtnO1xuICB0aGlzLmIgPSArYjtcbiAgdGhpcy5vcGFjaXR5ID0gK29wYWNpdHk7XG59XG5cbmRlZmluZShSZ2IsIHJnYiwgZXh0ZW5kKENvbG9yLCB7XG4gIGJyaWdodGVyKGspIHtcbiAgICBrID0gayA9PSBudWxsID8gYnJpZ2h0ZXIgOiBNYXRoLnBvdyhicmlnaHRlciwgayk7XG4gICAgcmV0dXJuIG5ldyBSZ2IodGhpcy5yICogaywgdGhpcy5nICogaywgdGhpcy5iICogaywgdGhpcy5vcGFjaXR5KTtcbiAgfSxcbiAgZGFya2VyKGspIHtcbiAgICBrID0gayA9PSBudWxsID8gZGFya2VyIDogTWF0aC5wb3coZGFya2VyLCBrKTtcbiAgICByZXR1cm4gbmV3IFJnYih0aGlzLnIgKiBrLCB0aGlzLmcgKiBrLCB0aGlzLmIgKiBrLCB0aGlzLm9wYWNpdHkpO1xuICB9LFxuICByZ2IoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG4gIGNsYW1wKCkge1xuICAgIHJldHVybiBuZXcgUmdiKGNsYW1waSh0aGlzLnIpLCBjbGFtcGkodGhpcy5nKSwgY2xhbXBpKHRoaXMuYiksIGNsYW1wYSh0aGlzLm9wYWNpdHkpKTtcbiAgfSxcbiAgZGlzcGxheWFibGUoKSB7XG4gICAgcmV0dXJuICgtMC41IDw9IHRoaXMuciAmJiB0aGlzLnIgPCAyNTUuNSlcbiAgICAgICAgJiYgKC0wLjUgPD0gdGhpcy5nICYmIHRoaXMuZyA8IDI1NS41KVxuICAgICAgICAmJiAoLTAuNSA8PSB0aGlzLmIgJiYgdGhpcy5iIDwgMjU1LjUpXG4gICAgICAgICYmICgwIDw9IHRoaXMub3BhY2l0eSAmJiB0aGlzLm9wYWNpdHkgPD0gMSk7XG4gIH0sXG4gIGhleDogcmdiX2Zvcm1hdEhleCwgLy8gRGVwcmVjYXRlZCEgVXNlIGNvbG9yLmZvcm1hdEhleC5cbiAgZm9ybWF0SGV4OiByZ2JfZm9ybWF0SGV4LFxuICBmb3JtYXRIZXg4OiByZ2JfZm9ybWF0SGV4OCxcbiAgZm9ybWF0UmdiOiByZ2JfZm9ybWF0UmdiLFxuICB0b1N0cmluZzogcmdiX2Zvcm1hdFJnYlxufSkpO1xuXG5mdW5jdGlvbiByZ2JfZm9ybWF0SGV4KCkge1xuICByZXR1cm4gYCMke2hleCh0aGlzLnIpfSR7aGV4KHRoaXMuZyl9JHtoZXgodGhpcy5iKX1gO1xufVxuXG5mdW5jdGlvbiByZ2JfZm9ybWF0SGV4OCgpIHtcbiAgcmV0dXJuIGAjJHtoZXgodGhpcy5yKX0ke2hleCh0aGlzLmcpfSR7aGV4KHRoaXMuYil9JHtoZXgoKGlzTmFOKHRoaXMub3BhY2l0eSkgPyAxIDogdGhpcy5vcGFjaXR5KSAqIDI1NSl9YDtcbn1cblxuZnVuY3Rpb24gcmdiX2Zvcm1hdFJnYigpIHtcbiAgY29uc3QgYSA9IGNsYW1wYSh0aGlzLm9wYWNpdHkpO1xuICByZXR1cm4gYCR7YSA9PT0gMSA/IFwicmdiKFwiIDogXCJyZ2JhKFwifSR7Y2xhbXBpKHRoaXMucil9LCAke2NsYW1waSh0aGlzLmcpfSwgJHtjbGFtcGkodGhpcy5iKX0ke2EgPT09IDEgPyBcIilcIiA6IGAsICR7YX0pYH1gO1xufVxuXG5mdW5jdGlvbiBjbGFtcGEob3BhY2l0eSkge1xuICByZXR1cm4gaXNOYU4ob3BhY2l0eSkgPyAxIDogTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgb3BhY2l0eSkpO1xufVxuXG5mdW5jdGlvbiBjbGFtcGkodmFsdWUpIHtcbiAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKDI1NSwgTWF0aC5yb3VuZCh2YWx1ZSkgfHwgMCkpO1xufVxuXG5mdW5jdGlvbiBoZXgodmFsdWUpIHtcbiAgdmFsdWUgPSBjbGFtcGkodmFsdWUpO1xuICByZXR1cm4gKHZhbHVlIDwgMTYgPyBcIjBcIiA6IFwiXCIpICsgdmFsdWUudG9TdHJpbmcoMTYpO1xufVxuXG5mdW5jdGlvbiBoc2xhKGgsIHMsIGwsIGEpIHtcbiAgaWYgKGEgPD0gMCkgaCA9IHMgPSBsID0gTmFOO1xuICBlbHNlIGlmIChsIDw9IDAgfHwgbCA+PSAxKSBoID0gcyA9IE5hTjtcbiAgZWxzZSBpZiAocyA8PSAwKSBoID0gTmFOO1xuICByZXR1cm4gbmV3IEhzbChoLCBzLCBsLCBhKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhzbENvbnZlcnQobykge1xuICBpZiAobyBpbnN0YW5jZW9mIEhzbCkgcmV0dXJuIG5ldyBIc2woby5oLCBvLnMsIG8ubCwgby5vcGFjaXR5KTtcbiAgaWYgKCEobyBpbnN0YW5jZW9mIENvbG9yKSkgbyA9IGNvbG9yKG8pO1xuICBpZiAoIW8pIHJldHVybiBuZXcgSHNsO1xuICBpZiAobyBpbnN0YW5jZW9mIEhzbCkgcmV0dXJuIG87XG4gIG8gPSBvLnJnYigpO1xuICB2YXIgciA9IG8uciAvIDI1NSxcbiAgICAgIGcgPSBvLmcgLyAyNTUsXG4gICAgICBiID0gby5iIC8gMjU1LFxuICAgICAgbWluID0gTWF0aC5taW4ociwgZywgYiksXG4gICAgICBtYXggPSBNYXRoLm1heChyLCBnLCBiKSxcbiAgICAgIGggPSBOYU4sXG4gICAgICBzID0gbWF4IC0gbWluLFxuICAgICAgbCA9IChtYXggKyBtaW4pIC8gMjtcbiAgaWYgKHMpIHtcbiAgICBpZiAociA9PT0gbWF4KSBoID0gKGcgLSBiKSAvIHMgKyAoZyA8IGIpICogNjtcbiAgICBlbHNlIGlmIChnID09PSBtYXgpIGggPSAoYiAtIHIpIC8gcyArIDI7XG4gICAgZWxzZSBoID0gKHIgLSBnKSAvIHMgKyA0O1xuICAgIHMgLz0gbCA8IDAuNSA/IG1heCArIG1pbiA6IDIgLSBtYXggLSBtaW47XG4gICAgaCAqPSA2MDtcbiAgfSBlbHNlIHtcbiAgICBzID0gbCA+IDAgJiYgbCA8IDEgPyAwIDogaDtcbiAgfVxuICByZXR1cm4gbmV3IEhzbChoLCBzLCBsLCBvLm9wYWNpdHkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaHNsKGgsIHMsIGwsIG9wYWNpdHkpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyBoc2xDb252ZXJ0KGgpIDogbmV3IEhzbChoLCBzLCBsLCBvcGFjaXR5ID09IG51bGwgPyAxIDogb3BhY2l0eSk7XG59XG5cbmZ1bmN0aW9uIEhzbChoLCBzLCBsLCBvcGFjaXR5KSB7XG4gIHRoaXMuaCA9ICtoO1xuICB0aGlzLnMgPSArcztcbiAgdGhpcy5sID0gK2w7XG4gIHRoaXMub3BhY2l0eSA9ICtvcGFjaXR5O1xufVxuXG5kZWZpbmUoSHNsLCBoc2wsIGV4dGVuZChDb2xvciwge1xuICBicmlnaHRlcihrKSB7XG4gICAgayA9IGsgPT0gbnVsbCA/IGJyaWdodGVyIDogTWF0aC5wb3coYnJpZ2h0ZXIsIGspO1xuICAgIHJldHVybiBuZXcgSHNsKHRoaXMuaCwgdGhpcy5zLCB0aGlzLmwgKiBrLCB0aGlzLm9wYWNpdHkpO1xuICB9LFxuICBkYXJrZXIoaykge1xuICAgIGsgPSBrID09IG51bGwgPyBkYXJrZXIgOiBNYXRoLnBvdyhkYXJrZXIsIGspO1xuICAgIHJldHVybiBuZXcgSHNsKHRoaXMuaCwgdGhpcy5zLCB0aGlzLmwgKiBrLCB0aGlzLm9wYWNpdHkpO1xuICB9LFxuICByZ2IoKSB7XG4gICAgdmFyIGggPSB0aGlzLmggJSAzNjAgKyAodGhpcy5oIDwgMCkgKiAzNjAsXG4gICAgICAgIHMgPSBpc05hTihoKSB8fCBpc05hTih0aGlzLnMpID8gMCA6IHRoaXMucyxcbiAgICAgICAgbCA9IHRoaXMubCxcbiAgICAgICAgbTIgPSBsICsgKGwgPCAwLjUgPyBsIDogMSAtIGwpICogcyxcbiAgICAgICAgbTEgPSAyICogbCAtIG0yO1xuICAgIHJldHVybiBuZXcgUmdiKFxuICAgICAgaHNsMnJnYihoID49IDI0MCA/IGggLSAyNDAgOiBoICsgMTIwLCBtMSwgbTIpLFxuICAgICAgaHNsMnJnYihoLCBtMSwgbTIpLFxuICAgICAgaHNsMnJnYihoIDwgMTIwID8gaCArIDI0MCA6IGggLSAxMjAsIG0xLCBtMiksXG4gICAgICB0aGlzLm9wYWNpdHlcbiAgICApO1xuICB9LFxuICBjbGFtcCgpIHtcbiAgICByZXR1cm4gbmV3IEhzbChjbGFtcGgodGhpcy5oKSwgY2xhbXB0KHRoaXMucyksIGNsYW1wdCh0aGlzLmwpLCBjbGFtcGEodGhpcy5vcGFjaXR5KSk7XG4gIH0sXG4gIGRpc3BsYXlhYmxlKCkge1xuICAgIHJldHVybiAoMCA8PSB0aGlzLnMgJiYgdGhpcy5zIDw9IDEgfHwgaXNOYU4odGhpcy5zKSlcbiAgICAgICAgJiYgKDAgPD0gdGhpcy5sICYmIHRoaXMubCA8PSAxKVxuICAgICAgICAmJiAoMCA8PSB0aGlzLm9wYWNpdHkgJiYgdGhpcy5vcGFjaXR5IDw9IDEpO1xuICB9LFxuICBmb3JtYXRIc2woKSB7XG4gICAgY29uc3QgYSA9IGNsYW1wYSh0aGlzLm9wYWNpdHkpO1xuICAgIHJldHVybiBgJHthID09PSAxID8gXCJoc2woXCIgOiBcImhzbGEoXCJ9JHtjbGFtcGgodGhpcy5oKX0sICR7Y2xhbXB0KHRoaXMucykgKiAxMDB9JSwgJHtjbGFtcHQodGhpcy5sKSAqIDEwMH0lJHthID09PSAxID8gXCIpXCIgOiBgLCAke2F9KWB9YDtcbiAgfVxufSkpO1xuXG5mdW5jdGlvbiBjbGFtcGgodmFsdWUpIHtcbiAgdmFsdWUgPSAodmFsdWUgfHwgMCkgJSAzNjA7XG4gIHJldHVybiB2YWx1ZSA8IDAgPyB2YWx1ZSArIDM2MCA6IHZhbHVlO1xufVxuXG5mdW5jdGlvbiBjbGFtcHQodmFsdWUpIHtcbiAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKDEsIHZhbHVlIHx8IDApKTtcbn1cblxuLyogRnJvbSBGdkQgMTMuMzcsIENTUyBDb2xvciBNb2R1bGUgTGV2ZWwgMyAqL1xuZnVuY3Rpb24gaHNsMnJnYihoLCBtMSwgbTIpIHtcbiAgcmV0dXJuIChoIDwgNjAgPyBtMSArIChtMiAtIG0xKSAqIGggLyA2MFxuICAgICAgOiBoIDwgMTgwID8gbTJcbiAgICAgIDogaCA8IDI0MCA/IG0xICsgKG0yIC0gbTEpICogKDI0MCAtIGgpIC8gNjBcbiAgICAgIDogbTEpICogMjU1O1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgeCA9PiAoKSA9PiB4O1xuIiwiaW1wb3J0IGNvbnN0YW50IGZyb20gXCIuL2NvbnN0YW50LmpzXCI7XG5cbmZ1bmN0aW9uIGxpbmVhcihhLCBkKSB7XG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIGEgKyB0ICogZDtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZXhwb25lbnRpYWwoYSwgYiwgeSkge1xuICByZXR1cm4gYSA9IE1hdGgucG93KGEsIHkpLCBiID0gTWF0aC5wb3coYiwgeSkgLSBhLCB5ID0gMSAvIHksIGZ1bmN0aW9uKHQpIHtcbiAgICByZXR1cm4gTWF0aC5wb3coYSArIHQgKiBiLCB5KTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGh1ZShhLCBiKSB7XG4gIHZhciBkID0gYiAtIGE7XG4gIHJldHVybiBkID8gbGluZWFyKGEsIGQgPiAxODAgfHwgZCA8IC0xODAgPyBkIC0gMzYwICogTWF0aC5yb3VuZChkIC8gMzYwKSA6IGQpIDogY29uc3RhbnQoaXNOYU4oYSkgPyBiIDogYSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnYW1tYSh5KSB7XG4gIHJldHVybiAoeSA9ICt5KSA9PT0gMSA/IG5vZ2FtbWEgOiBmdW5jdGlvbihhLCBiKSB7XG4gICAgcmV0dXJuIGIgLSBhID8gZXhwb25lbnRpYWwoYSwgYiwgeSkgOiBjb25zdGFudChpc05hTihhKSA/IGIgOiBhKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbm9nYW1tYShhLCBiKSB7XG4gIHZhciBkID0gYiAtIGE7XG4gIHJldHVybiBkID8gbGluZWFyKGEsIGQpIDogY29uc3RhbnQoaXNOYU4oYSkgPyBiIDogYSk7XG59XG4iLCJpbXBvcnQge3JnYiBhcyBjb2xvclJnYn0gZnJvbSBcImQzLWNvbG9yXCI7XG5pbXBvcnQgYmFzaXMgZnJvbSBcIi4vYmFzaXMuanNcIjtcbmltcG9ydCBiYXNpc0Nsb3NlZCBmcm9tIFwiLi9iYXNpc0Nsb3NlZC5qc1wiO1xuaW1wb3J0IG5vZ2FtbWEsIHtnYW1tYX0gZnJvbSBcIi4vY29sb3IuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uIHJnYkdhbW1hKHkpIHtcbiAgdmFyIGNvbG9yID0gZ2FtbWEoeSk7XG5cbiAgZnVuY3Rpb24gcmdiKHN0YXJ0LCBlbmQpIHtcbiAgICB2YXIgciA9IGNvbG9yKChzdGFydCA9IGNvbG9yUmdiKHN0YXJ0KSkuciwgKGVuZCA9IGNvbG9yUmdiKGVuZCkpLnIpLFxuICAgICAgICBnID0gY29sb3Ioc3RhcnQuZywgZW5kLmcpLFxuICAgICAgICBiID0gY29sb3Ioc3RhcnQuYiwgZW5kLmIpLFxuICAgICAgICBvcGFjaXR5ID0gbm9nYW1tYShzdGFydC5vcGFjaXR5LCBlbmQub3BhY2l0eSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgIHN0YXJ0LnIgPSByKHQpO1xuICAgICAgc3RhcnQuZyA9IGcodCk7XG4gICAgICBzdGFydC5iID0gYih0KTtcbiAgICAgIHN0YXJ0Lm9wYWNpdHkgPSBvcGFjaXR5KHQpO1xuICAgICAgcmV0dXJuIHN0YXJ0ICsgXCJcIjtcbiAgICB9O1xuICB9XG5cbiAgcmdiLmdhbW1hID0gcmdiR2FtbWE7XG5cbiAgcmV0dXJuIHJnYjtcbn0pKDEpO1xuXG5mdW5jdGlvbiByZ2JTcGxpbmUoc3BsaW5lKSB7XG4gIHJldHVybiBmdW5jdGlvbihjb2xvcnMpIHtcbiAgICB2YXIgbiA9IGNvbG9ycy5sZW5ndGgsXG4gICAgICAgIHIgPSBuZXcgQXJyYXkobiksXG4gICAgICAgIGcgPSBuZXcgQXJyYXkobiksXG4gICAgICAgIGIgPSBuZXcgQXJyYXkobiksXG4gICAgICAgIGksIGNvbG9yO1xuICAgIGZvciAoaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGNvbG9yID0gY29sb3JSZ2IoY29sb3JzW2ldKTtcbiAgICAgIHJbaV0gPSBjb2xvci5yIHx8IDA7XG4gICAgICBnW2ldID0gY29sb3IuZyB8fCAwO1xuICAgICAgYltpXSA9IGNvbG9yLmIgfHwgMDtcbiAgICB9XG4gICAgciA9IHNwbGluZShyKTtcbiAgICBnID0gc3BsaW5lKGcpO1xuICAgIGIgPSBzcGxpbmUoYik7XG4gICAgY29sb3Iub3BhY2l0eSA9IDE7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgIGNvbG9yLnIgPSByKHQpO1xuICAgICAgY29sb3IuZyA9IGcodCk7XG4gICAgICBjb2xvci5iID0gYih0KTtcbiAgICAgIHJldHVybiBjb2xvciArIFwiXCI7XG4gICAgfTtcbiAgfTtcbn1cblxuZXhwb3J0IHZhciByZ2JCYXNpcyA9IHJnYlNwbGluZShiYXNpcyk7XG5leHBvcnQgdmFyIHJnYkJhc2lzQ2xvc2VkID0gcmdiU3BsaW5lKGJhc2lzQ2xvc2VkKTtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGEsIGIpIHtcbiAgcmV0dXJuIGEgPSArYSwgYiA9ICtiLCBmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIGEgKiAoMSAtIHQpICsgYiAqIHQ7XG4gIH07XG59XG4iLCJpbXBvcnQgbnVtYmVyIGZyb20gXCIuL251bWJlci5qc1wiO1xuXG52YXIgcmVBID0gL1stK10/KD86XFxkK1xcLj9cXGQqfFxcLj9cXGQrKSg/OltlRV1bLStdP1xcZCspPy9nLFxuICAgIHJlQiA9IG5ldyBSZWdFeHAocmVBLnNvdXJjZSwgXCJnXCIpO1xuXG5mdW5jdGlvbiB6ZXJvKGIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBiO1xuICB9O1xufVxuXG5mdW5jdGlvbiBvbmUoYikge1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIHJldHVybiBiKHQpICsgXCJcIjtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYikge1xuICB2YXIgYmkgPSByZUEubGFzdEluZGV4ID0gcmVCLmxhc3RJbmRleCA9IDAsIC8vIHNjYW4gaW5kZXggZm9yIG5leHQgbnVtYmVyIGluIGJcbiAgICAgIGFtLCAvLyBjdXJyZW50IG1hdGNoIGluIGFcbiAgICAgIGJtLCAvLyBjdXJyZW50IG1hdGNoIGluIGJcbiAgICAgIGJzLCAvLyBzdHJpbmcgcHJlY2VkaW5nIGN1cnJlbnQgbnVtYmVyIGluIGIsIGlmIGFueVxuICAgICAgaSA9IC0xLCAvLyBpbmRleCBpbiBzXG4gICAgICBzID0gW10sIC8vIHN0cmluZyBjb25zdGFudHMgYW5kIHBsYWNlaG9sZGVyc1xuICAgICAgcSA9IFtdOyAvLyBudW1iZXIgaW50ZXJwb2xhdG9yc1xuXG4gIC8vIENvZXJjZSBpbnB1dHMgdG8gc3RyaW5ncy5cbiAgYSA9IGEgKyBcIlwiLCBiID0gYiArIFwiXCI7XG5cbiAgLy8gSW50ZXJwb2xhdGUgcGFpcnMgb2YgbnVtYmVycyBpbiBhICYgYi5cbiAgd2hpbGUgKChhbSA9IHJlQS5leGVjKGEpKVxuICAgICAgJiYgKGJtID0gcmVCLmV4ZWMoYikpKSB7XG4gICAgaWYgKChicyA9IGJtLmluZGV4KSA+IGJpKSB7IC8vIGEgc3RyaW5nIHByZWNlZGVzIHRoZSBuZXh0IG51bWJlciBpbiBiXG4gICAgICBicyA9IGIuc2xpY2UoYmksIGJzKTtcbiAgICAgIGlmIChzW2ldKSBzW2ldICs9IGJzOyAvLyBjb2FsZXNjZSB3aXRoIHByZXZpb3VzIHN0cmluZ1xuICAgICAgZWxzZSBzWysraV0gPSBicztcbiAgICB9XG4gICAgaWYgKChhbSA9IGFtWzBdKSA9PT0gKGJtID0gYm1bMF0pKSB7IC8vIG51bWJlcnMgaW4gYSAmIGIgbWF0Y2hcbiAgICAgIGlmIChzW2ldKSBzW2ldICs9IGJtOyAvLyBjb2FsZXNjZSB3aXRoIHByZXZpb3VzIHN0cmluZ1xuICAgICAgZWxzZSBzWysraV0gPSBibTtcbiAgICB9IGVsc2UgeyAvLyBpbnRlcnBvbGF0ZSBub24tbWF0Y2hpbmcgbnVtYmVyc1xuICAgICAgc1srK2ldID0gbnVsbDtcbiAgICAgIHEucHVzaCh7aTogaSwgeDogbnVtYmVyKGFtLCBibSl9KTtcbiAgICB9XG4gICAgYmkgPSByZUIubGFzdEluZGV4O1xuICB9XG5cbiAgLy8gQWRkIHJlbWFpbnMgb2YgYi5cbiAgaWYgKGJpIDwgYi5sZW5ndGgpIHtcbiAgICBicyA9IGIuc2xpY2UoYmkpO1xuICAgIGlmIChzW2ldKSBzW2ldICs9IGJzOyAvLyBjb2FsZXNjZSB3aXRoIHByZXZpb3VzIHN0cmluZ1xuICAgIGVsc2Ugc1srK2ldID0gYnM7XG4gIH1cblxuICAvLyBTcGVjaWFsIG9wdGltaXphdGlvbiBmb3Igb25seSBhIHNpbmdsZSBtYXRjaC5cbiAgLy8gT3RoZXJ3aXNlLCBpbnRlcnBvbGF0ZSBlYWNoIG9mIHRoZSBudW1iZXJzIGFuZCByZWpvaW4gdGhlIHN0cmluZy5cbiAgcmV0dXJuIHMubGVuZ3RoIDwgMiA/IChxWzBdXG4gICAgICA/IG9uZShxWzBdLngpXG4gICAgICA6IHplcm8oYikpXG4gICAgICA6IChiID0gcS5sZW5ndGgsIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbzsgaSA8IGI7ICsraSkgc1sobyA9IHFbaV0pLmldID0gby54KHQpO1xuICAgICAgICAgIHJldHVybiBzLmpvaW4oXCJcIik7XG4gICAgICAgIH0pO1xufVxuIiwidmFyIGRlZ3JlZXMgPSAxODAgLyBNYXRoLlBJO1xuXG5leHBvcnQgdmFyIGlkZW50aXR5ID0ge1xuICB0cmFuc2xhdGVYOiAwLFxuICB0cmFuc2xhdGVZOiAwLFxuICByb3RhdGU6IDAsXG4gIHNrZXdYOiAwLFxuICBzY2FsZVg6IDEsXG4gIHNjYWxlWTogMVxufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYiwgYywgZCwgZSwgZikge1xuICB2YXIgc2NhbGVYLCBzY2FsZVksIHNrZXdYO1xuICBpZiAoc2NhbGVYID0gTWF0aC5zcXJ0KGEgKiBhICsgYiAqIGIpKSBhIC89IHNjYWxlWCwgYiAvPSBzY2FsZVg7XG4gIGlmIChza2V3WCA9IGEgKiBjICsgYiAqIGQpIGMgLT0gYSAqIHNrZXdYLCBkIC09IGIgKiBza2V3WDtcbiAgaWYgKHNjYWxlWSA9IE1hdGguc3FydChjICogYyArIGQgKiBkKSkgYyAvPSBzY2FsZVksIGQgLz0gc2NhbGVZLCBza2V3WCAvPSBzY2FsZVk7XG4gIGlmIChhICogZCA8IGIgKiBjKSBhID0gLWEsIGIgPSAtYiwgc2tld1ggPSAtc2tld1gsIHNjYWxlWCA9IC1zY2FsZVg7XG4gIHJldHVybiB7XG4gICAgdHJhbnNsYXRlWDogZSxcbiAgICB0cmFuc2xhdGVZOiBmLFxuICAgIHJvdGF0ZTogTWF0aC5hdGFuMihiLCBhKSAqIGRlZ3JlZXMsXG4gICAgc2tld1g6IE1hdGguYXRhbihza2V3WCkgKiBkZWdyZWVzLFxuICAgIHNjYWxlWDogc2NhbGVYLFxuICAgIHNjYWxlWTogc2NhbGVZXG4gIH07XG59XG4iLCJpbXBvcnQgZGVjb21wb3NlLCB7aWRlbnRpdHl9IGZyb20gXCIuL2RlY29tcG9zZS5qc1wiO1xuXG52YXIgc3ZnTm9kZTtcblxuLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWYgKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNzcyh2YWx1ZSkge1xuICBjb25zdCBtID0gbmV3ICh0eXBlb2YgRE9NTWF0cml4ID09PSBcImZ1bmN0aW9uXCIgPyBET01NYXRyaXggOiBXZWJLaXRDU1NNYXRyaXgpKHZhbHVlICsgXCJcIik7XG4gIHJldHVybiBtLmlzSWRlbnRpdHkgPyBpZGVudGl0eSA6IGRlY29tcG9zZShtLmEsIG0uYiwgbS5jLCBtLmQsIG0uZSwgbS5mKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU3ZnKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gaWRlbnRpdHk7XG4gIGlmICghc3ZnTm9kZSkgc3ZnTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwiZ1wiKTtcbiAgc3ZnTm9kZS5zZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIiwgdmFsdWUpO1xuICBpZiAoISh2YWx1ZSA9IHN2Z05vZGUudHJhbnNmb3JtLmJhc2VWYWwuY29uc29saWRhdGUoKSkpIHJldHVybiBpZGVudGl0eTtcbiAgdmFsdWUgPSB2YWx1ZS5tYXRyaXg7XG4gIHJldHVybiBkZWNvbXBvc2UodmFsdWUuYSwgdmFsdWUuYiwgdmFsdWUuYywgdmFsdWUuZCwgdmFsdWUuZSwgdmFsdWUuZik7XG59XG4iLCJpbXBvcnQgbnVtYmVyIGZyb20gXCIuLi9udW1iZXIuanNcIjtcbmltcG9ydCB7cGFyc2VDc3MsIHBhcnNlU3ZnfSBmcm9tIFwiLi9wYXJzZS5qc1wiO1xuXG5mdW5jdGlvbiBpbnRlcnBvbGF0ZVRyYW5zZm9ybShwYXJzZSwgcHhDb21tYSwgcHhQYXJlbiwgZGVnUGFyZW4pIHtcblxuICBmdW5jdGlvbiBwb3Aocykge1xuICAgIHJldHVybiBzLmxlbmd0aCA/IHMucG9wKCkgKyBcIiBcIiA6IFwiXCI7XG4gIH1cblxuICBmdW5jdGlvbiB0cmFuc2xhdGUoeGEsIHlhLCB4YiwgeWIsIHMsIHEpIHtcbiAgICBpZiAoeGEgIT09IHhiIHx8IHlhICE9PSB5Yikge1xuICAgICAgdmFyIGkgPSBzLnB1c2goXCJ0cmFuc2xhdGUoXCIsIG51bGwsIHB4Q29tbWEsIG51bGwsIHB4UGFyZW4pO1xuICAgICAgcS5wdXNoKHtpOiBpIC0gNCwgeDogbnVtYmVyKHhhLCB4Yil9LCB7aTogaSAtIDIsIHg6IG51bWJlcih5YSwgeWIpfSk7XG4gICAgfSBlbHNlIGlmICh4YiB8fCB5Yikge1xuICAgICAgcy5wdXNoKFwidHJhbnNsYXRlKFwiICsgeGIgKyBweENvbW1hICsgeWIgKyBweFBhcmVuKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByb3RhdGUoYSwgYiwgcywgcSkge1xuICAgIGlmIChhICE9PSBiKSB7XG4gICAgICBpZiAoYSAtIGIgPiAxODApIGIgKz0gMzYwOyBlbHNlIGlmIChiIC0gYSA+IDE4MCkgYSArPSAzNjA7IC8vIHNob3J0ZXN0IHBhdGhcbiAgICAgIHEucHVzaCh7aTogcy5wdXNoKHBvcChzKSArIFwicm90YXRlKFwiLCBudWxsLCBkZWdQYXJlbikgLSAyLCB4OiBudW1iZXIoYSwgYil9KTtcbiAgICB9IGVsc2UgaWYgKGIpIHtcbiAgICAgIHMucHVzaChwb3AocykgKyBcInJvdGF0ZShcIiArIGIgKyBkZWdQYXJlbik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2tld1goYSwgYiwgcywgcSkge1xuICAgIGlmIChhICE9PSBiKSB7XG4gICAgICBxLnB1c2goe2k6IHMucHVzaChwb3AocykgKyBcInNrZXdYKFwiLCBudWxsLCBkZWdQYXJlbikgLSAyLCB4OiBudW1iZXIoYSwgYil9KTtcbiAgICB9IGVsc2UgaWYgKGIpIHtcbiAgICAgIHMucHVzaChwb3AocykgKyBcInNrZXdYKFwiICsgYiArIGRlZ1BhcmVuKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzY2FsZSh4YSwgeWEsIHhiLCB5YiwgcywgcSkge1xuICAgIGlmICh4YSAhPT0geGIgfHwgeWEgIT09IHliKSB7XG4gICAgICB2YXIgaSA9IHMucHVzaChwb3AocykgKyBcInNjYWxlKFwiLCBudWxsLCBcIixcIiwgbnVsbCwgXCIpXCIpO1xuICAgICAgcS5wdXNoKHtpOiBpIC0gNCwgeDogbnVtYmVyKHhhLCB4Yil9LCB7aTogaSAtIDIsIHg6IG51bWJlcih5YSwgeWIpfSk7XG4gICAgfSBlbHNlIGlmICh4YiAhPT0gMSB8fCB5YiAhPT0gMSkge1xuICAgICAgcy5wdXNoKHBvcChzKSArIFwic2NhbGUoXCIgKyB4YiArIFwiLFwiICsgeWIgKyBcIilcIik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKGEsIGIpIHtcbiAgICB2YXIgcyA9IFtdLCAvLyBzdHJpbmcgY29uc3RhbnRzIGFuZCBwbGFjZWhvbGRlcnNcbiAgICAgICAgcSA9IFtdOyAvLyBudW1iZXIgaW50ZXJwb2xhdG9yc1xuICAgIGEgPSBwYXJzZShhKSwgYiA9IHBhcnNlKGIpO1xuICAgIHRyYW5zbGF0ZShhLnRyYW5zbGF0ZVgsIGEudHJhbnNsYXRlWSwgYi50cmFuc2xhdGVYLCBiLnRyYW5zbGF0ZVksIHMsIHEpO1xuICAgIHJvdGF0ZShhLnJvdGF0ZSwgYi5yb3RhdGUsIHMsIHEpO1xuICAgIHNrZXdYKGEuc2tld1gsIGIuc2tld1gsIHMsIHEpO1xuICAgIHNjYWxlKGEuc2NhbGVYLCBhLnNjYWxlWSwgYi5zY2FsZVgsIGIuc2NhbGVZLCBzLCBxKTtcbiAgICBhID0gYiA9IG51bGw7IC8vIGdjXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgIHZhciBpID0gLTEsIG4gPSBxLmxlbmd0aCwgbztcbiAgICAgIHdoaWxlICgrK2kgPCBuKSBzWyhvID0gcVtpXSkuaV0gPSBvLngodCk7XG4gICAgICByZXR1cm4gcy5qb2luKFwiXCIpO1xuICAgIH07XG4gIH07XG59XG5cbmV4cG9ydCB2YXIgaW50ZXJwb2xhdGVUcmFuc2Zvcm1Dc3MgPSBpbnRlcnBvbGF0ZVRyYW5zZm9ybShwYXJzZUNzcywgXCJweCwgXCIsIFwicHgpXCIsIFwiZGVnKVwiKTtcbmV4cG9ydCB2YXIgaW50ZXJwb2xhdGVUcmFuc2Zvcm1TdmcgPSBpbnRlcnBvbGF0ZVRyYW5zZm9ybShwYXJzZVN2ZywgXCIsIFwiLCBcIilcIiwgXCIpXCIpO1xuIiwidmFyIGZyYW1lID0gMCwgLy8gaXMgYW4gYW5pbWF0aW9uIGZyYW1lIHBlbmRpbmc/XG4gICAgdGltZW91dCA9IDAsIC8vIGlzIGEgdGltZW91dCBwZW5kaW5nP1xuICAgIGludGVydmFsID0gMCwgLy8gYXJlIGFueSB0aW1lcnMgYWN0aXZlP1xuICAgIHBva2VEZWxheSA9IDEwMDAsIC8vIGhvdyBmcmVxdWVudGx5IHdlIGNoZWNrIGZvciBjbG9jayBza2V3XG4gICAgdGFza0hlYWQsXG4gICAgdGFza1RhaWwsXG4gICAgY2xvY2tMYXN0ID0gMCxcbiAgICBjbG9ja05vdyA9IDAsXG4gICAgY2xvY2tTa2V3ID0gMCxcbiAgICBjbG9jayA9IHR5cGVvZiBwZXJmb3JtYW5jZSA9PT0gXCJvYmplY3RcIiAmJiBwZXJmb3JtYW5jZS5ub3cgPyBwZXJmb3JtYW5jZSA6IERhdGUsXG4gICAgc2V0RnJhbWUgPSB0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiICYmIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPyB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lLmJpbmQod2luZG93KSA6IGZ1bmN0aW9uKGYpIHsgc2V0VGltZW91dChmLCAxNyk7IH07XG5cbmV4cG9ydCBmdW5jdGlvbiBub3coKSB7XG4gIHJldHVybiBjbG9ja05vdyB8fCAoc2V0RnJhbWUoY2xlYXJOb3cpLCBjbG9ja05vdyA9IGNsb2NrLm5vdygpICsgY2xvY2tTa2V3KTtcbn1cblxuZnVuY3Rpb24gY2xlYXJOb3coKSB7XG4gIGNsb2NrTm93ID0gMDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFRpbWVyKCkge1xuICB0aGlzLl9jYWxsID1cbiAgdGhpcy5fdGltZSA9XG4gIHRoaXMuX25leHQgPSBudWxsO1xufVxuXG5UaW1lci5wcm90b3R5cGUgPSB0aW1lci5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBUaW1lcixcbiAgcmVzdGFydDogZnVuY3Rpb24oY2FsbGJhY2ssIGRlbGF5LCB0aW1lKSB7XG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiY2FsbGJhY2sgaXMgbm90IGEgZnVuY3Rpb25cIik7XG4gICAgdGltZSA9ICh0aW1lID09IG51bGwgPyBub3coKSA6ICt0aW1lKSArIChkZWxheSA9PSBudWxsID8gMCA6ICtkZWxheSk7XG4gICAgaWYgKCF0aGlzLl9uZXh0ICYmIHRhc2tUYWlsICE9PSB0aGlzKSB7XG4gICAgICBpZiAodGFza1RhaWwpIHRhc2tUYWlsLl9uZXh0ID0gdGhpcztcbiAgICAgIGVsc2UgdGFza0hlYWQgPSB0aGlzO1xuICAgICAgdGFza1RhaWwgPSB0aGlzO1xuICAgIH1cbiAgICB0aGlzLl9jYWxsID0gY2FsbGJhY2s7XG4gICAgdGhpcy5fdGltZSA9IHRpbWU7XG4gICAgc2xlZXAoKTtcbiAgfSxcbiAgc3RvcDogZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX2NhbGwpIHtcbiAgICAgIHRoaXMuX2NhbGwgPSBudWxsO1xuICAgICAgdGhpcy5fdGltZSA9IEluZmluaXR5O1xuICAgICAgc2xlZXAoKTtcbiAgICB9XG4gIH1cbn07XG5cbmV4cG9ydCBmdW5jdGlvbiB0aW1lcihjYWxsYmFjaywgZGVsYXksIHRpbWUpIHtcbiAgdmFyIHQgPSBuZXcgVGltZXI7XG4gIHQucmVzdGFydChjYWxsYmFjaywgZGVsYXksIHRpbWUpO1xuICByZXR1cm4gdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRpbWVyRmx1c2goKSB7XG4gIG5vdygpOyAvLyBHZXQgdGhlIGN1cnJlbnQgdGltZSwgaWYgbm90IGFscmVhZHkgc2V0LlxuICArK2ZyYW1lOyAvLyBQcmV0ZW5kIHdl4oCZdmUgc2V0IGFuIGFsYXJtLCBpZiB3ZSBoYXZlbuKAmXQgYWxyZWFkeS5cbiAgdmFyIHQgPSB0YXNrSGVhZCwgZTtcbiAgd2hpbGUgKHQpIHtcbiAgICBpZiAoKGUgPSBjbG9ja05vdyAtIHQuX3RpbWUpID49IDApIHQuX2NhbGwuY2FsbCh1bmRlZmluZWQsIGUpO1xuICAgIHQgPSB0Ll9uZXh0O1xuICB9XG4gIC0tZnJhbWU7XG59XG5cbmZ1bmN0aW9uIHdha2UoKSB7XG4gIGNsb2NrTm93ID0gKGNsb2NrTGFzdCA9IGNsb2NrLm5vdygpKSArIGNsb2NrU2tldztcbiAgZnJhbWUgPSB0aW1lb3V0ID0gMDtcbiAgdHJ5IHtcbiAgICB0aW1lckZsdXNoKCk7XG4gIH0gZmluYWxseSB7XG4gICAgZnJhbWUgPSAwO1xuICAgIG5hcCgpO1xuICAgIGNsb2NrTm93ID0gMDtcbiAgfVxufVxuXG5mdW5jdGlvbiBwb2tlKCkge1xuICB2YXIgbm93ID0gY2xvY2subm93KCksIGRlbGF5ID0gbm93IC0gY2xvY2tMYXN0O1xuICBpZiAoZGVsYXkgPiBwb2tlRGVsYXkpIGNsb2NrU2tldyAtPSBkZWxheSwgY2xvY2tMYXN0ID0gbm93O1xufVxuXG5mdW5jdGlvbiBuYXAoKSB7XG4gIHZhciB0MCwgdDEgPSB0YXNrSGVhZCwgdDIsIHRpbWUgPSBJbmZpbml0eTtcbiAgd2hpbGUgKHQxKSB7XG4gICAgaWYgKHQxLl9jYWxsKSB7XG4gICAgICBpZiAodGltZSA+IHQxLl90aW1lKSB0aW1lID0gdDEuX3RpbWU7XG4gICAgICB0MCA9IHQxLCB0MSA9IHQxLl9uZXh0O1xuICAgIH0gZWxzZSB7XG4gICAgICB0MiA9IHQxLl9uZXh0LCB0MS5fbmV4dCA9IG51bGw7XG4gICAgICB0MSA9IHQwID8gdDAuX25leHQgPSB0MiA6IHRhc2tIZWFkID0gdDI7XG4gICAgfVxuICB9XG4gIHRhc2tUYWlsID0gdDA7XG4gIHNsZWVwKHRpbWUpO1xufVxuXG5mdW5jdGlvbiBzbGVlcCh0aW1lKSB7XG4gIGlmIChmcmFtZSkgcmV0dXJuOyAvLyBTb29uZXN0IGFsYXJtIGFscmVhZHkgc2V0LCBvciB3aWxsIGJlLlxuICBpZiAodGltZW91dCkgdGltZW91dCA9IGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgdmFyIGRlbGF5ID0gdGltZSAtIGNsb2NrTm93OyAvLyBTdHJpY3RseSBsZXNzIHRoYW4gaWYgd2UgcmVjb21wdXRlZCBjbG9ja05vdy5cbiAgaWYgKGRlbGF5ID4gMjQpIHtcbiAgICBpZiAodGltZSA8IEluZmluaXR5KSB0aW1lb3V0ID0gc2V0VGltZW91dCh3YWtlLCB0aW1lIC0gY2xvY2subm93KCkgLSBjbG9ja1NrZXcpO1xuICAgIGlmIChpbnRlcnZhbCkgaW50ZXJ2YWwgPSBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoIWludGVydmFsKSBjbG9ja0xhc3QgPSBjbG9jay5ub3coKSwgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChwb2tlLCBwb2tlRGVsYXkpO1xuICAgIGZyYW1lID0gMSwgc2V0RnJhbWUod2FrZSk7XG4gIH1cbn1cbiIsImltcG9ydCB7VGltZXJ9IGZyb20gXCIuL3RpbWVyLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGNhbGxiYWNrLCBkZWxheSwgdGltZSkge1xuICB2YXIgdCA9IG5ldyBUaW1lcjtcbiAgZGVsYXkgPSBkZWxheSA9PSBudWxsID8gMCA6ICtkZWxheTtcbiAgdC5yZXN0YXJ0KGVsYXBzZWQgPT4ge1xuICAgIHQuc3RvcCgpO1xuICAgIGNhbGxiYWNrKGVsYXBzZWQgKyBkZWxheSk7XG4gIH0sIGRlbGF5LCB0aW1lKTtcbiAgcmV0dXJuIHQ7XG59XG4iLCJpbXBvcnQge2Rpc3BhdGNofSBmcm9tIFwiZDMtZGlzcGF0Y2hcIjtcbmltcG9ydCB7dGltZXIsIHRpbWVvdXR9IGZyb20gXCJkMy10aW1lclwiO1xuXG52YXIgZW1wdHlPbiA9IGRpc3BhdGNoKFwic3RhcnRcIiwgXCJlbmRcIiwgXCJjYW5jZWxcIiwgXCJpbnRlcnJ1cHRcIik7XG52YXIgZW1wdHlUd2VlbiA9IFtdO1xuXG5leHBvcnQgdmFyIENSRUFURUQgPSAwO1xuZXhwb3J0IHZhciBTQ0hFRFVMRUQgPSAxO1xuZXhwb3J0IHZhciBTVEFSVElORyA9IDI7XG5leHBvcnQgdmFyIFNUQVJURUQgPSAzO1xuZXhwb3J0IHZhciBSVU5OSU5HID0gNDtcbmV4cG9ydCB2YXIgRU5ESU5HID0gNTtcbmV4cG9ydCB2YXIgRU5ERUQgPSA2O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihub2RlLCBuYW1lLCBpZCwgaW5kZXgsIGdyb3VwLCB0aW1pbmcpIHtcbiAgdmFyIHNjaGVkdWxlcyA9IG5vZGUuX190cmFuc2l0aW9uO1xuICBpZiAoIXNjaGVkdWxlcykgbm9kZS5fX3RyYW5zaXRpb24gPSB7fTtcbiAgZWxzZSBpZiAoaWQgaW4gc2NoZWR1bGVzKSByZXR1cm47XG4gIGNyZWF0ZShub2RlLCBpZCwge1xuICAgIG5hbWU6IG5hbWUsXG4gICAgaW5kZXg6IGluZGV4LCAvLyBGb3IgY29udGV4dCBkdXJpbmcgY2FsbGJhY2suXG4gICAgZ3JvdXA6IGdyb3VwLCAvLyBGb3IgY29udGV4dCBkdXJpbmcgY2FsbGJhY2suXG4gICAgb246IGVtcHR5T24sXG4gICAgdHdlZW46IGVtcHR5VHdlZW4sXG4gICAgdGltZTogdGltaW5nLnRpbWUsXG4gICAgZGVsYXk6IHRpbWluZy5kZWxheSxcbiAgICBkdXJhdGlvbjogdGltaW5nLmR1cmF0aW9uLFxuICAgIGVhc2U6IHRpbWluZy5lYXNlLFxuICAgIHRpbWVyOiBudWxsLFxuICAgIHN0YXRlOiBDUkVBVEVEXG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5pdChub2RlLCBpZCkge1xuICB2YXIgc2NoZWR1bGUgPSBnZXQobm9kZSwgaWQpO1xuICBpZiAoc2NoZWR1bGUuc3RhdGUgPiBDUkVBVEVEKSB0aHJvdyBuZXcgRXJyb3IoXCJ0b28gbGF0ZTsgYWxyZWFkeSBzY2hlZHVsZWRcIik7XG4gIHJldHVybiBzY2hlZHVsZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldChub2RlLCBpZCkge1xuICB2YXIgc2NoZWR1bGUgPSBnZXQobm9kZSwgaWQpO1xuICBpZiAoc2NoZWR1bGUuc3RhdGUgPiBTVEFSVEVEKSB0aHJvdyBuZXcgRXJyb3IoXCJ0b28gbGF0ZTsgYWxyZWFkeSBydW5uaW5nXCIpO1xuICByZXR1cm4gc2NoZWR1bGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXQobm9kZSwgaWQpIHtcbiAgdmFyIHNjaGVkdWxlID0gbm9kZS5fX3RyYW5zaXRpb247XG4gIGlmICghc2NoZWR1bGUgfHwgIShzY2hlZHVsZSA9IHNjaGVkdWxlW2lkXSkpIHRocm93IG5ldyBFcnJvcihcInRyYW5zaXRpb24gbm90IGZvdW5kXCIpO1xuICByZXR1cm4gc2NoZWR1bGU7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZShub2RlLCBpZCwgc2VsZikge1xuICB2YXIgc2NoZWR1bGVzID0gbm9kZS5fX3RyYW5zaXRpb24sXG4gICAgICB0d2VlbjtcblxuICAvLyBJbml0aWFsaXplIHRoZSBzZWxmIHRpbWVyIHdoZW4gdGhlIHRyYW5zaXRpb24gaXMgY3JlYXRlZC5cbiAgLy8gTm90ZSB0aGUgYWN0dWFsIGRlbGF5IGlzIG5vdCBrbm93biB1bnRpbCB0aGUgZmlyc3QgY2FsbGJhY2shXG4gIHNjaGVkdWxlc1tpZF0gPSBzZWxmO1xuICBzZWxmLnRpbWVyID0gdGltZXIoc2NoZWR1bGUsIDAsIHNlbGYudGltZSk7XG5cbiAgZnVuY3Rpb24gc2NoZWR1bGUoZWxhcHNlZCkge1xuICAgIHNlbGYuc3RhdGUgPSBTQ0hFRFVMRUQ7XG4gICAgc2VsZi50aW1lci5yZXN0YXJ0KHN0YXJ0LCBzZWxmLmRlbGF5LCBzZWxmLnRpbWUpO1xuXG4gICAgLy8gSWYgdGhlIGVsYXBzZWQgZGVsYXkgaXMgbGVzcyB0aGFuIG91ciBmaXJzdCBzbGVlcCwgc3RhcnQgaW1tZWRpYXRlbHkuXG4gICAgaWYgKHNlbGYuZGVsYXkgPD0gZWxhcHNlZCkgc3RhcnQoZWxhcHNlZCAtIHNlbGYuZGVsYXkpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnQoZWxhcHNlZCkge1xuICAgIHZhciBpLCBqLCBuLCBvO1xuXG4gICAgLy8gSWYgdGhlIHN0YXRlIGlzIG5vdCBTQ0hFRFVMRUQsIHRoZW4gd2UgcHJldmlvdXNseSBlcnJvcmVkIG9uIHN0YXJ0LlxuICAgIGlmIChzZWxmLnN0YXRlICE9PSBTQ0hFRFVMRUQpIHJldHVybiBzdG9wKCk7XG5cbiAgICBmb3IgKGkgaW4gc2NoZWR1bGVzKSB7XG4gICAgICBvID0gc2NoZWR1bGVzW2ldO1xuICAgICAgaWYgKG8ubmFtZSAhPT0gc2VsZi5uYW1lKSBjb250aW51ZTtcblxuICAgICAgLy8gV2hpbGUgdGhpcyBlbGVtZW50IGFscmVhZHkgaGFzIGEgc3RhcnRpbmcgdHJhbnNpdGlvbiBkdXJpbmcgdGhpcyBmcmFtZSxcbiAgICAgIC8vIGRlZmVyIHN0YXJ0aW5nIGFuIGludGVycnVwdGluZyB0cmFuc2l0aW9uIHVudGlsIHRoYXQgdHJhbnNpdGlvbiBoYXMgYVxuICAgICAgLy8gY2hhbmNlIHRvIHRpY2sgKGFuZCBwb3NzaWJseSBlbmQpOyBzZWUgZDMvZDMtdHJhbnNpdGlvbiM1NCFcbiAgICAgIGlmIChvLnN0YXRlID09PSBTVEFSVEVEKSByZXR1cm4gdGltZW91dChzdGFydCk7XG5cbiAgICAgIC8vIEludGVycnVwdCB0aGUgYWN0aXZlIHRyYW5zaXRpb24sIGlmIGFueS5cbiAgICAgIGlmIChvLnN0YXRlID09PSBSVU5OSU5HKSB7XG4gICAgICAgIG8uc3RhdGUgPSBFTkRFRDtcbiAgICAgICAgby50aW1lci5zdG9wKCk7XG4gICAgICAgIG8ub24uY2FsbChcImludGVycnVwdFwiLCBub2RlLCBub2RlLl9fZGF0YV9fLCBvLmluZGV4LCBvLmdyb3VwKTtcbiAgICAgICAgZGVsZXRlIHNjaGVkdWxlc1tpXTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2FuY2VsIGFueSBwcmUtZW1wdGVkIHRyYW5zaXRpb25zLlxuICAgICAgZWxzZSBpZiAoK2kgPCBpZCkge1xuICAgICAgICBvLnN0YXRlID0gRU5ERUQ7XG4gICAgICAgIG8udGltZXIuc3RvcCgpO1xuICAgICAgICBvLm9uLmNhbGwoXCJjYW5jZWxcIiwgbm9kZSwgbm9kZS5fX2RhdGFfXywgby5pbmRleCwgby5ncm91cCk7XG4gICAgICAgIGRlbGV0ZSBzY2hlZHVsZXNbaV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRGVmZXIgdGhlIGZpcnN0IHRpY2sgdG8gZW5kIG9mIHRoZSBjdXJyZW50IGZyYW1lOyBzZWUgZDMvZDMjMTU3Ni5cbiAgICAvLyBOb3RlIHRoZSB0cmFuc2l0aW9uIG1heSBiZSBjYW5jZWxlZCBhZnRlciBzdGFydCBhbmQgYmVmb3JlIHRoZSBmaXJzdCB0aWNrIVxuICAgIC8vIE5vdGUgdGhpcyBtdXN0IGJlIHNjaGVkdWxlZCBiZWZvcmUgdGhlIHN0YXJ0IGV2ZW50OyBzZWUgZDMvZDMtdHJhbnNpdGlvbiMxNiFcbiAgICAvLyBBc3N1bWluZyB0aGlzIGlzIHN1Y2Nlc3NmdWwsIHN1YnNlcXVlbnQgY2FsbGJhY2tzIGdvIHN0cmFpZ2h0IHRvIHRpY2suXG4gICAgdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGlmIChzZWxmLnN0YXRlID09PSBTVEFSVEVEKSB7XG4gICAgICAgIHNlbGYuc3RhdGUgPSBSVU5OSU5HO1xuICAgICAgICBzZWxmLnRpbWVyLnJlc3RhcnQodGljaywgc2VsZi5kZWxheSwgc2VsZi50aW1lKTtcbiAgICAgICAgdGljayhlbGFwc2VkKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIERpc3BhdGNoIHRoZSBzdGFydCBldmVudC5cbiAgICAvLyBOb3RlIHRoaXMgbXVzdCBiZSBkb25lIGJlZm9yZSB0aGUgdHdlZW4gYXJlIGluaXRpYWxpemVkLlxuICAgIHNlbGYuc3RhdGUgPSBTVEFSVElORztcbiAgICBzZWxmLm9uLmNhbGwoXCJzdGFydFwiLCBub2RlLCBub2RlLl9fZGF0YV9fLCBzZWxmLmluZGV4LCBzZWxmLmdyb3VwKTtcbiAgICBpZiAoc2VsZi5zdGF0ZSAhPT0gU1RBUlRJTkcpIHJldHVybjsgLy8gaW50ZXJydXB0ZWRcbiAgICBzZWxmLnN0YXRlID0gU1RBUlRFRDtcblxuICAgIC8vIEluaXRpYWxpemUgdGhlIHR3ZWVuLCBkZWxldGluZyBudWxsIHR3ZWVuLlxuICAgIHR3ZWVuID0gbmV3IEFycmF5KG4gPSBzZWxmLnR3ZWVuLmxlbmd0aCk7XG4gICAgZm9yIChpID0gMCwgaiA9IC0xOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobyA9IHNlbGYudHdlZW5baV0udmFsdWUuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBzZWxmLmluZGV4LCBzZWxmLmdyb3VwKSkge1xuICAgICAgICB0d2VlblsrK2pdID0gbztcbiAgICAgIH1cbiAgICB9XG4gICAgdHdlZW4ubGVuZ3RoID0gaiArIDE7XG4gIH1cblxuICBmdW5jdGlvbiB0aWNrKGVsYXBzZWQpIHtcbiAgICB2YXIgdCA9IGVsYXBzZWQgPCBzZWxmLmR1cmF0aW9uID8gc2VsZi5lYXNlLmNhbGwobnVsbCwgZWxhcHNlZCAvIHNlbGYuZHVyYXRpb24pIDogKHNlbGYudGltZXIucmVzdGFydChzdG9wKSwgc2VsZi5zdGF0ZSA9IEVORElORywgMSksXG4gICAgICAgIGkgPSAtMSxcbiAgICAgICAgbiA9IHR3ZWVuLmxlbmd0aDtcblxuICAgIHdoaWxlICgrK2kgPCBuKSB7XG4gICAgICB0d2VlbltpXS5jYWxsKG5vZGUsIHQpO1xuICAgIH1cblxuICAgIC8vIERpc3BhdGNoIHRoZSBlbmQgZXZlbnQuXG4gICAgaWYgKHNlbGYuc3RhdGUgPT09IEVORElORykge1xuICAgICAgc2VsZi5vbi5jYWxsKFwiZW5kXCIsIG5vZGUsIG5vZGUuX19kYXRhX18sIHNlbGYuaW5kZXgsIHNlbGYuZ3JvdXApO1xuICAgICAgc3RvcCgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgc2VsZi5zdGF0ZSA9IEVOREVEO1xuICAgIHNlbGYudGltZXIuc3RvcCgpO1xuICAgIGRlbGV0ZSBzY2hlZHVsZXNbaWRdO1xuICAgIGZvciAodmFyIGkgaW4gc2NoZWR1bGVzKSByZXR1cm47IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICBkZWxldGUgbm9kZS5fX3RyYW5zaXRpb247XG4gIH1cbn1cbiIsImltcG9ydCB7U1RBUlRJTkcsIEVORElORywgRU5ERUR9IGZyb20gXCIuL3RyYW5zaXRpb24vc2NoZWR1bGUuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obm9kZSwgbmFtZSkge1xuICB2YXIgc2NoZWR1bGVzID0gbm9kZS5fX3RyYW5zaXRpb24sXG4gICAgICBzY2hlZHVsZSxcbiAgICAgIGFjdGl2ZSxcbiAgICAgIGVtcHR5ID0gdHJ1ZSxcbiAgICAgIGk7XG5cbiAgaWYgKCFzY2hlZHVsZXMpIHJldHVybjtcblxuICBuYW1lID0gbmFtZSA9PSBudWxsID8gbnVsbCA6IG5hbWUgKyBcIlwiO1xuXG4gIGZvciAoaSBpbiBzY2hlZHVsZXMpIHtcbiAgICBpZiAoKHNjaGVkdWxlID0gc2NoZWR1bGVzW2ldKS5uYW1lICE9PSBuYW1lKSB7IGVtcHR5ID0gZmFsc2U7IGNvbnRpbnVlOyB9XG4gICAgYWN0aXZlID0gc2NoZWR1bGUuc3RhdGUgPiBTVEFSVElORyAmJiBzY2hlZHVsZS5zdGF0ZSA8IEVORElORztcbiAgICBzY2hlZHVsZS5zdGF0ZSA9IEVOREVEO1xuICAgIHNjaGVkdWxlLnRpbWVyLnN0b3AoKTtcbiAgICBzY2hlZHVsZS5vbi5jYWxsKGFjdGl2ZSA/IFwiaW50ZXJydXB0XCIgOiBcImNhbmNlbFwiLCBub2RlLCBub2RlLl9fZGF0YV9fLCBzY2hlZHVsZS5pbmRleCwgc2NoZWR1bGUuZ3JvdXApO1xuICAgIGRlbGV0ZSBzY2hlZHVsZXNbaV07XG4gIH1cblxuICBpZiAoZW1wdHkpIGRlbGV0ZSBub2RlLl9fdHJhbnNpdGlvbjtcbn1cbiIsImltcG9ydCBpbnRlcnJ1cHQgZnJvbSBcIi4uL2ludGVycnVwdC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lKSB7XG4gIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgaW50ZXJydXB0KHRoaXMsIG5hbWUpO1xuICB9KTtcbn1cbiIsImltcG9ydCB7Z2V0LCBzZXR9IGZyb20gXCIuL3NjaGVkdWxlLmpzXCI7XG5cbmZ1bmN0aW9uIHR3ZWVuUmVtb3ZlKGlkLCBuYW1lKSB7XG4gIHZhciB0d2VlbjAsIHR3ZWVuMTtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzY2hlZHVsZSA9IHNldCh0aGlzLCBpZCksXG4gICAgICAgIHR3ZWVuID0gc2NoZWR1bGUudHdlZW47XG5cbiAgICAvLyBJZiB0aGlzIG5vZGUgc2hhcmVkIHR3ZWVuIHdpdGggdGhlIHByZXZpb3VzIG5vZGUsXG4gICAgLy8ganVzdCBhc3NpZ24gdGhlIHVwZGF0ZWQgc2hhcmVkIHR3ZWVuIGFuZCB3ZeKAmXJlIGRvbmUhXG4gICAgLy8gT3RoZXJ3aXNlLCBjb3B5LW9uLXdyaXRlLlxuICAgIGlmICh0d2VlbiAhPT0gdHdlZW4wKSB7XG4gICAgICB0d2VlbjEgPSB0d2VlbjAgPSB0d2VlbjtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBuID0gdHdlZW4xLmxlbmd0aDsgaSA8IG47ICsraSkge1xuICAgICAgICBpZiAodHdlZW4xW2ldLm5hbWUgPT09IG5hbWUpIHtcbiAgICAgICAgICB0d2VlbjEgPSB0d2VlbjEuc2xpY2UoKTtcbiAgICAgICAgICB0d2VlbjEuc3BsaWNlKGksIDEpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgc2NoZWR1bGUudHdlZW4gPSB0d2VlbjE7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHR3ZWVuRnVuY3Rpb24oaWQsIG5hbWUsIHZhbHVlKSB7XG4gIHZhciB0d2VlbjAsIHR3ZWVuMTtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgRXJyb3I7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2NoZWR1bGUgPSBzZXQodGhpcywgaWQpLFxuICAgICAgICB0d2VlbiA9IHNjaGVkdWxlLnR3ZWVuO1xuXG4gICAgLy8gSWYgdGhpcyBub2RlIHNoYXJlZCB0d2VlbiB3aXRoIHRoZSBwcmV2aW91cyBub2RlLFxuICAgIC8vIGp1c3QgYXNzaWduIHRoZSB1cGRhdGVkIHNoYXJlZCB0d2VlbiBhbmQgd2XigJlyZSBkb25lIVxuICAgIC8vIE90aGVyd2lzZSwgY29weS1vbi13cml0ZS5cbiAgICBpZiAodHdlZW4gIT09IHR3ZWVuMCkge1xuICAgICAgdHdlZW4xID0gKHR3ZWVuMCA9IHR3ZWVuKS5zbGljZSgpO1xuICAgICAgZm9yICh2YXIgdCA9IHtuYW1lOiBuYW1lLCB2YWx1ZTogdmFsdWV9LCBpID0gMCwgbiA9IHR3ZWVuMS5sZW5ndGg7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgaWYgKHR3ZWVuMVtpXS5uYW1lID09PSBuYW1lKSB7XG4gICAgICAgICAgdHdlZW4xW2ldID0gdDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGkgPT09IG4pIHR3ZWVuMS5wdXNoKHQpO1xuICAgIH1cblxuICAgIHNjaGVkdWxlLnR3ZWVuID0gdHdlZW4xO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICB2YXIgaWQgPSB0aGlzLl9pZDtcblxuICBuYW1lICs9IFwiXCI7XG5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgdmFyIHR3ZWVuID0gZ2V0KHRoaXMubm9kZSgpLCBpZCkudHdlZW47XG4gICAgZm9yICh2YXIgaSA9IDAsIG4gPSB0d2Vlbi5sZW5ndGgsIHQ7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmICgodCA9IHR3ZWVuW2ldKS5uYW1lID09PSBuYW1lKSB7XG4gICAgICAgIHJldHVybiB0LnZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiB0aGlzLmVhY2goKHZhbHVlID09IG51bGwgPyB0d2VlblJlbW92ZSA6IHR3ZWVuRnVuY3Rpb24pKGlkLCBuYW1lLCB2YWx1ZSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdHdlZW5WYWx1ZSh0cmFuc2l0aW9uLCBuYW1lLCB2YWx1ZSkge1xuICB2YXIgaWQgPSB0cmFuc2l0aW9uLl9pZDtcblxuICB0cmFuc2l0aW9uLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNjaGVkdWxlID0gc2V0KHRoaXMsIGlkKTtcbiAgICAoc2NoZWR1bGUudmFsdWUgfHwgKHNjaGVkdWxlLnZhbHVlID0ge30pKVtuYW1lXSA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH0pO1xuXG4gIHJldHVybiBmdW5jdGlvbihub2RlKSB7XG4gICAgcmV0dXJuIGdldChub2RlLCBpZCkudmFsdWVbbmFtZV07XG4gIH07XG59XG4iLCJpbXBvcnQge2NvbG9yfSBmcm9tIFwiZDMtY29sb3JcIjtcbmltcG9ydCB7aW50ZXJwb2xhdGVOdW1iZXIsIGludGVycG9sYXRlUmdiLCBpbnRlcnBvbGF0ZVN0cmluZ30gZnJvbSBcImQzLWludGVycG9sYXRlXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGEsIGIpIHtcbiAgdmFyIGM7XG4gIHJldHVybiAodHlwZW9mIGIgPT09IFwibnVtYmVyXCIgPyBpbnRlcnBvbGF0ZU51bWJlclxuICAgICAgOiBiIGluc3RhbmNlb2YgY29sb3IgPyBpbnRlcnBvbGF0ZVJnYlxuICAgICAgOiAoYyA9IGNvbG9yKGIpKSA/IChiID0gYywgaW50ZXJwb2xhdGVSZ2IpXG4gICAgICA6IGludGVycG9sYXRlU3RyaW5nKShhLCBiKTtcbn1cbiIsImltcG9ydCB7aW50ZXJwb2xhdGVUcmFuc2Zvcm1TdmcgYXMgaW50ZXJwb2xhdGVUcmFuc2Zvcm19IGZyb20gXCJkMy1pbnRlcnBvbGF0ZVwiO1xuaW1wb3J0IHtuYW1lc3BhY2V9IGZyb20gXCJkMy1zZWxlY3Rpb25cIjtcbmltcG9ydCB7dHdlZW5WYWx1ZX0gZnJvbSBcIi4vdHdlZW4uanNcIjtcbmltcG9ydCBpbnRlcnBvbGF0ZSBmcm9tIFwiLi9pbnRlcnBvbGF0ZS5qc1wiO1xuXG5mdW5jdGlvbiBhdHRyUmVtb3ZlKG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyUmVtb3ZlTlMoZnVsbG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckNvbnN0YW50KG5hbWUsIGludGVycG9sYXRlLCB2YWx1ZTEpIHtcbiAgdmFyIHN0cmluZzAwLFxuICAgICAgc3RyaW5nMSA9IHZhbHVlMSArIFwiXCIsXG4gICAgICBpbnRlcnBvbGF0ZTA7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3RyaW5nMCA9IHRoaXMuZ2V0QXR0cmlidXRlKG5hbWUpO1xuICAgIHJldHVybiBzdHJpbmcwID09PSBzdHJpbmcxID8gbnVsbFxuICAgICAgICA6IHN0cmluZzAgPT09IHN0cmluZzAwID8gaW50ZXJwb2xhdGUwXG4gICAgICAgIDogaW50ZXJwb2xhdGUwID0gaW50ZXJwb2xhdGUoc3RyaW5nMDAgPSBzdHJpbmcwLCB2YWx1ZTEpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyQ29uc3RhbnROUyhmdWxsbmFtZSwgaW50ZXJwb2xhdGUsIHZhbHVlMSkge1xuICB2YXIgc3RyaW5nMDAsXG4gICAgICBzdHJpbmcxID0gdmFsdWUxICsgXCJcIixcbiAgICAgIGludGVycG9sYXRlMDtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdHJpbmcwID0gdGhpcy5nZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwpO1xuICAgIHJldHVybiBzdHJpbmcwID09PSBzdHJpbmcxID8gbnVsbFxuICAgICAgICA6IHN0cmluZzAgPT09IHN0cmluZzAwID8gaW50ZXJwb2xhdGUwXG4gICAgICAgIDogaW50ZXJwb2xhdGUwID0gaW50ZXJwb2xhdGUoc3RyaW5nMDAgPSBzdHJpbmcwLCB2YWx1ZTEpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyRnVuY3Rpb24obmFtZSwgaW50ZXJwb2xhdGUsIHZhbHVlKSB7XG4gIHZhciBzdHJpbmcwMCxcbiAgICAgIHN0cmluZzEwLFxuICAgICAgaW50ZXJwb2xhdGUwO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0cmluZzAsIHZhbHVlMSA9IHZhbHVlKHRoaXMpLCBzdHJpbmcxO1xuICAgIGlmICh2YWx1ZTEgPT0gbnVsbCkgcmV0dXJuIHZvaWQgdGhpcy5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgc3RyaW5nMCA9IHRoaXMuZ2V0QXR0cmlidXRlKG5hbWUpO1xuICAgIHN0cmluZzEgPSB2YWx1ZTEgKyBcIlwiO1xuICAgIHJldHVybiBzdHJpbmcwID09PSBzdHJpbmcxID8gbnVsbFxuICAgICAgICA6IHN0cmluZzAgPT09IHN0cmluZzAwICYmIHN0cmluZzEgPT09IHN0cmluZzEwID8gaW50ZXJwb2xhdGUwXG4gICAgICAgIDogKHN0cmluZzEwID0gc3RyaW5nMSwgaW50ZXJwb2xhdGUwID0gaW50ZXJwb2xhdGUoc3RyaW5nMDAgPSBzdHJpbmcwLCB2YWx1ZTEpKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckZ1bmN0aW9uTlMoZnVsbG5hbWUsIGludGVycG9sYXRlLCB2YWx1ZSkge1xuICB2YXIgc3RyaW5nMDAsXG4gICAgICBzdHJpbmcxMCxcbiAgICAgIGludGVycG9sYXRlMDtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdHJpbmcwLCB2YWx1ZTEgPSB2YWx1ZSh0aGlzKSwgc3RyaW5nMTtcbiAgICBpZiAodmFsdWUxID09IG51bGwpIHJldHVybiB2b2lkIHRoaXMucmVtb3ZlQXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsKTtcbiAgICBzdHJpbmcwID0gdGhpcy5nZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwpO1xuICAgIHN0cmluZzEgPSB2YWx1ZTEgKyBcIlwiO1xuICAgIHJldHVybiBzdHJpbmcwID09PSBzdHJpbmcxID8gbnVsbFxuICAgICAgICA6IHN0cmluZzAgPT09IHN0cmluZzAwICYmIHN0cmluZzEgPT09IHN0cmluZzEwID8gaW50ZXJwb2xhdGUwXG4gICAgICAgIDogKHN0cmluZzEwID0gc3RyaW5nMSwgaW50ZXJwb2xhdGUwID0gaW50ZXJwb2xhdGUoc3RyaW5nMDAgPSBzdHJpbmcwLCB2YWx1ZTEpKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgdmFyIGZ1bGxuYW1lID0gbmFtZXNwYWNlKG5hbWUpLCBpID0gZnVsbG5hbWUgPT09IFwidHJhbnNmb3JtXCIgPyBpbnRlcnBvbGF0ZVRyYW5zZm9ybSA6IGludGVycG9sYXRlO1xuICByZXR1cm4gdGhpcy5hdHRyVHdlZW4obmFtZSwgdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gKGZ1bGxuYW1lLmxvY2FsID8gYXR0ckZ1bmN0aW9uTlMgOiBhdHRyRnVuY3Rpb24pKGZ1bGxuYW1lLCBpLCB0d2VlblZhbHVlKHRoaXMsIFwiYXR0ci5cIiArIG5hbWUsIHZhbHVlKSlcbiAgICAgIDogdmFsdWUgPT0gbnVsbCA/IChmdWxsbmFtZS5sb2NhbCA/IGF0dHJSZW1vdmVOUyA6IGF0dHJSZW1vdmUpKGZ1bGxuYW1lKVxuICAgICAgOiAoZnVsbG5hbWUubG9jYWwgPyBhdHRyQ29uc3RhbnROUyA6IGF0dHJDb25zdGFudCkoZnVsbG5hbWUsIGksIHZhbHVlKSk7XG59XG4iLCJpbXBvcnQge25hbWVzcGFjZX0gZnJvbSBcImQzLXNlbGVjdGlvblwiO1xuXG5mdW5jdGlvbiBhdHRySW50ZXJwb2xhdGUobmFtZSwgaSkge1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIHRoaXMuc2V0QXR0cmlidXRlKG5hbWUsIGkuY2FsbCh0aGlzLCB0KSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJJbnRlcnBvbGF0ZU5TKGZ1bGxuYW1lLCBpKSB7XG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwsIGkuY2FsbCh0aGlzLCB0KSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJUd2Vlbk5TKGZ1bGxuYW1lLCB2YWx1ZSkge1xuICB2YXIgdDAsIGkwO1xuICBmdW5jdGlvbiB0d2VlbigpIHtcbiAgICB2YXIgaSA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKGkgIT09IGkwKSB0MCA9IChpMCA9IGkpICYmIGF0dHJJbnRlcnBvbGF0ZU5TKGZ1bGxuYW1lLCBpKTtcbiAgICByZXR1cm4gdDA7XG4gIH1cbiAgdHdlZW4uX3ZhbHVlID0gdmFsdWU7XG4gIHJldHVybiB0d2Vlbjtcbn1cblxuZnVuY3Rpb24gYXR0clR3ZWVuKG5hbWUsIHZhbHVlKSB7XG4gIHZhciB0MCwgaTA7XG4gIGZ1bmN0aW9uIHR3ZWVuKCkge1xuICAgIHZhciBpID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoaSAhPT0gaTApIHQwID0gKGkwID0gaSkgJiYgYXR0ckludGVycG9sYXRlKG5hbWUsIGkpO1xuICAgIHJldHVybiB0MDtcbiAgfVxuICB0d2Vlbi5fdmFsdWUgPSB2YWx1ZTtcbiAgcmV0dXJuIHR3ZWVuO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICB2YXIga2V5ID0gXCJhdHRyLlwiICsgbmFtZTtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSByZXR1cm4gKGtleSA9IHRoaXMudHdlZW4oa2V5KSkgJiYga2V5Ll92YWx1ZTtcbiAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiB0aGlzLnR3ZWVuKGtleSwgbnVsbCk7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IEVycm9yO1xuICB2YXIgZnVsbG5hbWUgPSBuYW1lc3BhY2UobmFtZSk7XG4gIHJldHVybiB0aGlzLnR3ZWVuKGtleSwgKGZ1bGxuYW1lLmxvY2FsID8gYXR0clR3ZWVuTlMgOiBhdHRyVHdlZW4pKGZ1bGxuYW1lLCB2YWx1ZSkpO1xufVxuIiwiaW1wb3J0IHtnZXQsIGluaXR9IGZyb20gXCIuL3NjaGVkdWxlLmpzXCI7XG5cbmZ1bmN0aW9uIGRlbGF5RnVuY3Rpb24oaWQsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICBpbml0KHRoaXMsIGlkKS5kZWxheSA9ICt2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBkZWxheUNvbnN0YW50KGlkLCB2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPSArdmFsdWUsIGZ1bmN0aW9uKCkge1xuICAgIGluaXQodGhpcywgaWQpLmRlbGF5ID0gdmFsdWU7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHZhciBpZCA9IHRoaXMuX2lkO1xuXG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICA/IHRoaXMuZWFjaCgodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICA/IGRlbGF5RnVuY3Rpb25cbiAgICAgICAgICA6IGRlbGF5Q29uc3RhbnQpKGlkLCB2YWx1ZSkpXG4gICAgICA6IGdldCh0aGlzLm5vZGUoKSwgaWQpLmRlbGF5O1xufVxuIiwiaW1wb3J0IHtnZXQsIHNldH0gZnJvbSBcIi4vc2NoZWR1bGUuanNcIjtcblxuZnVuY3Rpb24gZHVyYXRpb25GdW5jdGlvbihpZCwgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHNldCh0aGlzLCBpZCkuZHVyYXRpb24gPSArdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZHVyYXRpb25Db25zdGFudChpZCwgdmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID0gK3ZhbHVlLCBmdW5jdGlvbigpIHtcbiAgICBzZXQodGhpcywgaWQpLmR1cmF0aW9uID0gdmFsdWU7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHZhciBpZCA9IHRoaXMuX2lkO1xuXG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICA/IHRoaXMuZWFjaCgodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICA/IGR1cmF0aW9uRnVuY3Rpb25cbiAgICAgICAgICA6IGR1cmF0aW9uQ29uc3RhbnQpKGlkLCB2YWx1ZSkpXG4gICAgICA6IGdldCh0aGlzLm5vZGUoKSwgaWQpLmR1cmF0aW9uO1xufVxuIiwiaW1wb3J0IHtnZXQsIHNldH0gZnJvbSBcIi4vc2NoZWR1bGUuanNcIjtcblxuZnVuY3Rpb24gZWFzZUNvbnN0YW50KGlkLCB2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBFcnJvcjtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHNldCh0aGlzLCBpZCkuZWFzZSA9IHZhbHVlO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih2YWx1ZSkge1xuICB2YXIgaWQgPSB0aGlzLl9pZDtcblxuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgPyB0aGlzLmVhY2goZWFzZUNvbnN0YW50KGlkLCB2YWx1ZSkpXG4gICAgICA6IGdldCh0aGlzLm5vZGUoKSwgaWQpLmVhc2U7XG59XG4iLCJpbXBvcnQge3NldH0gZnJvbSBcIi4vc2NoZWR1bGUuanNcIjtcblxuZnVuY3Rpb24gZWFzZVZhcnlpbmcoaWQsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHR5cGVvZiB2ICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBFcnJvcjtcbiAgICBzZXQodGhpcywgaWQpLmVhc2UgPSB2O1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBFcnJvcjtcbiAgcmV0dXJuIHRoaXMuZWFjaChlYXNlVmFyeWluZyh0aGlzLl9pZCwgdmFsdWUpKTtcbn1cbiIsImltcG9ydCB7bWF0Y2hlcn0gZnJvbSBcImQzLXNlbGVjdGlvblwiO1xuaW1wb3J0IHtUcmFuc2l0aW9ufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihtYXRjaCkge1xuICBpZiAodHlwZW9mIG1hdGNoICE9PSBcImZ1bmN0aW9uXCIpIG1hdGNoID0gbWF0Y2hlcihtYXRjaCk7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gbmV3IEFycmF5KG0pLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBuID0gZ3JvdXAubGVuZ3RoLCBzdWJncm91cCA9IHN1Ymdyb3Vwc1tqXSA9IFtdLCBub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKChub2RlID0gZ3JvdXBbaV0pICYmIG1hdGNoLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKSB7XG4gICAgICAgIHN1Ymdyb3VwLnB1c2gobm9kZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBUcmFuc2l0aW9uKHN1Ymdyb3VwcywgdGhpcy5fcGFyZW50cywgdGhpcy5fbmFtZSwgdGhpcy5faWQpO1xufVxuIiwiaW1wb3J0IHtUcmFuc2l0aW9ufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih0cmFuc2l0aW9uKSB7XG4gIGlmICh0cmFuc2l0aW9uLl9pZCAhPT0gdGhpcy5faWQpIHRocm93IG5ldyBFcnJvcjtcblxuICBmb3IgKHZhciBncm91cHMwID0gdGhpcy5fZ3JvdXBzLCBncm91cHMxID0gdHJhbnNpdGlvbi5fZ3JvdXBzLCBtMCA9IGdyb3VwczAubGVuZ3RoLCBtMSA9IGdyb3VwczEubGVuZ3RoLCBtID0gTWF0aC5taW4obTAsIG0xKSwgbWVyZ2VzID0gbmV3IEFycmF5KG0wKSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cDAgPSBncm91cHMwW2pdLCBncm91cDEgPSBncm91cHMxW2pdLCBuID0gZ3JvdXAwLmxlbmd0aCwgbWVyZ2UgPSBtZXJnZXNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwMFtpXSB8fCBncm91cDFbaV0pIHtcbiAgICAgICAgbWVyZ2VbaV0gPSBub2RlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZvciAoOyBqIDwgbTA7ICsraikge1xuICAgIG1lcmdlc1tqXSA9IGdyb3VwczBbal07XG4gIH1cblxuICByZXR1cm4gbmV3IFRyYW5zaXRpb24obWVyZ2VzLCB0aGlzLl9wYXJlbnRzLCB0aGlzLl9uYW1lLCB0aGlzLl9pZCk7XG59XG4iLCJpbXBvcnQge2dldCwgc2V0LCBpbml0fSBmcm9tIFwiLi9zY2hlZHVsZS5qc1wiO1xuXG5mdW5jdGlvbiBzdGFydChuYW1lKSB7XG4gIHJldHVybiAobmFtZSArIFwiXCIpLnRyaW0oKS5zcGxpdCgvXnxcXHMrLykuZXZlcnkoZnVuY3Rpb24odCkge1xuICAgIHZhciBpID0gdC5pbmRleE9mKFwiLlwiKTtcbiAgICBpZiAoaSA+PSAwKSB0ID0gdC5zbGljZSgwLCBpKTtcbiAgICByZXR1cm4gIXQgfHwgdCA9PT0gXCJzdGFydFwiO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gb25GdW5jdGlvbihpZCwgbmFtZSwgbGlzdGVuZXIpIHtcbiAgdmFyIG9uMCwgb24xLCBzaXQgPSBzdGFydChuYW1lKSA/IGluaXQgOiBzZXQ7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2NoZWR1bGUgPSBzaXQodGhpcywgaWQpLFxuICAgICAgICBvbiA9IHNjaGVkdWxlLm9uO1xuXG4gICAgLy8gSWYgdGhpcyBub2RlIHNoYXJlZCBhIGRpc3BhdGNoIHdpdGggdGhlIHByZXZpb3VzIG5vZGUsXG4gICAgLy8ganVzdCBhc3NpZ24gdGhlIHVwZGF0ZWQgc2hhcmVkIGRpc3BhdGNoIGFuZCB3ZeKAmXJlIGRvbmUhXG4gICAgLy8gT3RoZXJ3aXNlLCBjb3B5LW9uLXdyaXRlLlxuICAgIGlmIChvbiAhPT0gb24wKSAob24xID0gKG9uMCA9IG9uKS5jb3B5KCkpLm9uKG5hbWUsIGxpc3RlbmVyKTtcblxuICAgIHNjaGVkdWxlLm9uID0gb24xO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCBsaXN0ZW5lcikge1xuICB2YXIgaWQgPSB0aGlzLl9pZDtcblxuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA8IDJcbiAgICAgID8gZ2V0KHRoaXMubm9kZSgpLCBpZCkub24ub24obmFtZSlcbiAgICAgIDogdGhpcy5lYWNoKG9uRnVuY3Rpb24oaWQsIG5hbWUsIGxpc3RlbmVyKSk7XG59XG4iLCJmdW5jdGlvbiByZW1vdmVGdW5jdGlvbihpZCkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTtcbiAgICBmb3IgKHZhciBpIGluIHRoaXMuX190cmFuc2l0aW9uKSBpZiAoK2kgIT09IGlkKSByZXR1cm47XG4gICAgaWYgKHBhcmVudCkgcGFyZW50LnJlbW92ZUNoaWxkKHRoaXMpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMub24oXCJlbmQucmVtb3ZlXCIsIHJlbW92ZUZ1bmN0aW9uKHRoaXMuX2lkKSk7XG59XG4iLCJpbXBvcnQge3NlbGVjdG9yfSBmcm9tIFwiZDMtc2VsZWN0aW9uXCI7XG5pbXBvcnQge1RyYW5zaXRpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5pbXBvcnQgc2NoZWR1bGUsIHtnZXR9IGZyb20gXCIuL3NjaGVkdWxlLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNlbGVjdCkge1xuICB2YXIgbmFtZSA9IHRoaXMuX25hbWUsXG4gICAgICBpZCA9IHRoaXMuX2lkO1xuXG4gIGlmICh0eXBlb2Ygc2VsZWN0ICE9PSBcImZ1bmN0aW9uXCIpIHNlbGVjdCA9IHNlbGVjdG9yKHNlbGVjdCk7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gbmV3IEFycmF5KG0pLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBuID0gZ3JvdXAubGVuZ3RoLCBzdWJncm91cCA9IHN1Ymdyb3Vwc1tqXSA9IG5ldyBBcnJheShuKSwgbm9kZSwgc3Vibm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmICgobm9kZSA9IGdyb3VwW2ldKSAmJiAoc3Vibm9kZSA9IHNlbGVjdC5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGdyb3VwKSkpIHtcbiAgICAgICAgaWYgKFwiX19kYXRhX19cIiBpbiBub2RlKSBzdWJub2RlLl9fZGF0YV9fID0gbm9kZS5fX2RhdGFfXztcbiAgICAgICAgc3ViZ3JvdXBbaV0gPSBzdWJub2RlO1xuICAgICAgICBzY2hlZHVsZShzdWJncm91cFtpXSwgbmFtZSwgaWQsIGksIHN1Ymdyb3VwLCBnZXQobm9kZSwgaWQpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IFRyYW5zaXRpb24oc3ViZ3JvdXBzLCB0aGlzLl9wYXJlbnRzLCBuYW1lLCBpZCk7XG59XG4iLCJpbXBvcnQge3NlbGVjdG9yQWxsfSBmcm9tIFwiZDMtc2VsZWN0aW9uXCI7XG5pbXBvcnQge1RyYW5zaXRpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5pbXBvcnQgc2NoZWR1bGUsIHtnZXR9IGZyb20gXCIuL3NjaGVkdWxlLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNlbGVjdCkge1xuICB2YXIgbmFtZSA9IHRoaXMuX25hbWUsXG4gICAgICBpZCA9IHRoaXMuX2lkO1xuXG4gIGlmICh0eXBlb2Ygc2VsZWN0ICE9PSBcImZ1bmN0aW9uXCIpIHNlbGVjdCA9IHNlbGVjdG9yQWxsKHNlbGVjdCk7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gW10sIHBhcmVudHMgPSBbXSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgZm9yICh2YXIgY2hpbGRyZW4gPSBzZWxlY3QuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCksIGNoaWxkLCBpbmhlcml0ID0gZ2V0KG5vZGUsIGlkKSwgayA9IDAsIGwgPSBjaGlsZHJlbi5sZW5ndGg7IGsgPCBsOyArK2spIHtcbiAgICAgICAgICBpZiAoY2hpbGQgPSBjaGlsZHJlbltrXSkge1xuICAgICAgICAgICAgc2NoZWR1bGUoY2hpbGQsIG5hbWUsIGlkLCBrLCBjaGlsZHJlbiwgaW5oZXJpdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN1Ymdyb3Vwcy5wdXNoKGNoaWxkcmVuKTtcbiAgICAgICAgcGFyZW50cy5wdXNoKG5vZGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgVHJhbnNpdGlvbihzdWJncm91cHMsIHBhcmVudHMsIG5hbWUsIGlkKTtcbn1cbiIsImltcG9ydCB7c2VsZWN0aW9ufSBmcm9tIFwiZDMtc2VsZWN0aW9uXCI7XG5cbnZhciBTZWxlY3Rpb24gPSBzZWxlY3Rpb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBTZWxlY3Rpb24odGhpcy5fZ3JvdXBzLCB0aGlzLl9wYXJlbnRzKTtcbn1cbiIsImltcG9ydCB7aW50ZXJwb2xhdGVUcmFuc2Zvcm1Dc3MgYXMgaW50ZXJwb2xhdGVUcmFuc2Zvcm19IGZyb20gXCJkMy1pbnRlcnBvbGF0ZVwiO1xuaW1wb3J0IHtzdHlsZX0gZnJvbSBcImQzLXNlbGVjdGlvblwiO1xuaW1wb3J0IHtzZXR9IGZyb20gXCIuL3NjaGVkdWxlLmpzXCI7XG5pbXBvcnQge3R3ZWVuVmFsdWV9IGZyb20gXCIuL3R3ZWVuLmpzXCI7XG5pbXBvcnQgaW50ZXJwb2xhdGUgZnJvbSBcIi4vaW50ZXJwb2xhdGUuanNcIjtcblxuZnVuY3Rpb24gc3R5bGVOdWxsKG5hbWUsIGludGVycG9sYXRlKSB7XG4gIHZhciBzdHJpbmcwMCxcbiAgICAgIHN0cmluZzEwLFxuICAgICAgaW50ZXJwb2xhdGUwO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0cmluZzAgPSBzdHlsZSh0aGlzLCBuYW1lKSxcbiAgICAgICAgc3RyaW5nMSA9ICh0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KG5hbWUpLCBzdHlsZSh0aGlzLCBuYW1lKSk7XG4gICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsXG4gICAgICAgIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgJiYgc3RyaW5nMSA9PT0gc3RyaW5nMTAgPyBpbnRlcnBvbGF0ZTBcbiAgICAgICAgOiBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHN0cmluZzEwID0gc3RyaW5nMSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHN0eWxlUmVtb3ZlKG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkobmFtZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHN0eWxlQ29uc3RhbnQobmFtZSwgaW50ZXJwb2xhdGUsIHZhbHVlMSkge1xuICB2YXIgc3RyaW5nMDAsXG4gICAgICBzdHJpbmcxID0gdmFsdWUxICsgXCJcIixcbiAgICAgIGludGVycG9sYXRlMDtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdHJpbmcwID0gc3R5bGUodGhpcywgbmFtZSk7XG4gICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsXG4gICAgICAgIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgPyBpbnRlcnBvbGF0ZTBcbiAgICAgICAgOiBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHZhbHVlMSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHN0eWxlRnVuY3Rpb24obmFtZSwgaW50ZXJwb2xhdGUsIHZhbHVlKSB7XG4gIHZhciBzdHJpbmcwMCxcbiAgICAgIHN0cmluZzEwLFxuICAgICAgaW50ZXJwb2xhdGUwO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0cmluZzAgPSBzdHlsZSh0aGlzLCBuYW1lKSxcbiAgICAgICAgdmFsdWUxID0gdmFsdWUodGhpcyksXG4gICAgICAgIHN0cmluZzEgPSB2YWx1ZTEgKyBcIlwiO1xuICAgIGlmICh2YWx1ZTEgPT0gbnVsbCkgc3RyaW5nMSA9IHZhbHVlMSA9ICh0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KG5hbWUpLCBzdHlsZSh0aGlzLCBuYW1lKSk7XG4gICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsXG4gICAgICAgIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgJiYgc3RyaW5nMSA9PT0gc3RyaW5nMTAgPyBpbnRlcnBvbGF0ZTBcbiAgICAgICAgOiAoc3RyaW5nMTAgPSBzdHJpbmcxLCBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHZhbHVlMSkpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBzdHlsZU1heWJlUmVtb3ZlKGlkLCBuYW1lKSB7XG4gIHZhciBvbjAsIG9uMSwgbGlzdGVuZXIwLCBrZXkgPSBcInN0eWxlLlwiICsgbmFtZSwgZXZlbnQgPSBcImVuZC5cIiArIGtleSwgcmVtb3ZlO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNjaGVkdWxlID0gc2V0KHRoaXMsIGlkKSxcbiAgICAgICAgb24gPSBzY2hlZHVsZS5vbixcbiAgICAgICAgbGlzdGVuZXIgPSBzY2hlZHVsZS52YWx1ZVtrZXldID09IG51bGwgPyByZW1vdmUgfHwgKHJlbW92ZSA9IHN0eWxlUmVtb3ZlKG5hbWUpKSA6IHVuZGVmaW5lZDtcblxuICAgIC8vIElmIHRoaXMgbm9kZSBzaGFyZWQgYSBkaXNwYXRjaCB3aXRoIHRoZSBwcmV2aW91cyBub2RlLFxuICAgIC8vIGp1c3QgYXNzaWduIHRoZSB1cGRhdGVkIHNoYXJlZCBkaXNwYXRjaCBhbmQgd2XigJlyZSBkb25lIVxuICAgIC8vIE90aGVyd2lzZSwgY29weS1vbi13cml0ZS5cbiAgICBpZiAob24gIT09IG9uMCB8fCBsaXN0ZW5lcjAgIT09IGxpc3RlbmVyKSAob24xID0gKG9uMCA9IG9uKS5jb3B5KCkpLm9uKGV2ZW50LCBsaXN0ZW5lcjAgPSBsaXN0ZW5lcik7XG5cbiAgICBzY2hlZHVsZS5vbiA9IG9uMTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7XG4gIHZhciBpID0gKG5hbWUgKz0gXCJcIikgPT09IFwidHJhbnNmb3JtXCIgPyBpbnRlcnBvbGF0ZVRyYW5zZm9ybSA6IGludGVycG9sYXRlO1xuICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/IHRoaXNcbiAgICAgIC5zdHlsZVR3ZWVuKG5hbWUsIHN0eWxlTnVsbChuYW1lLCBpKSlcbiAgICAgIC5vbihcImVuZC5zdHlsZS5cIiArIG5hbWUsIHN0eWxlUmVtb3ZlKG5hbWUpKVxuICAgIDogdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIgPyB0aGlzXG4gICAgICAuc3R5bGVUd2VlbihuYW1lLCBzdHlsZUZ1bmN0aW9uKG5hbWUsIGksIHR3ZWVuVmFsdWUodGhpcywgXCJzdHlsZS5cIiArIG5hbWUsIHZhbHVlKSkpXG4gICAgICAuZWFjaChzdHlsZU1heWJlUmVtb3ZlKHRoaXMuX2lkLCBuYW1lKSlcbiAgICA6IHRoaXNcbiAgICAgIC5zdHlsZVR3ZWVuKG5hbWUsIHN0eWxlQ29uc3RhbnQobmFtZSwgaSwgdmFsdWUpLCBwcmlvcml0eSlcbiAgICAgIC5vbihcImVuZC5zdHlsZS5cIiArIG5hbWUsIG51bGwpO1xufVxuIiwiZnVuY3Rpb24gc3R5bGVJbnRlcnBvbGF0ZShuYW1lLCBpLCBwcmlvcml0eSkge1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIHRoaXMuc3R5bGUuc2V0UHJvcGVydHkobmFtZSwgaS5jYWxsKHRoaXMsIHQpLCBwcmlvcml0eSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHN0eWxlVHdlZW4obmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7XG4gIHZhciB0LCBpMDtcbiAgZnVuY3Rpb24gdHdlZW4oKSB7XG4gICAgdmFyIGkgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmIChpICE9PSBpMCkgdCA9IChpMCA9IGkpICYmIHN0eWxlSW50ZXJwb2xhdGUobmFtZSwgaSwgcHJpb3JpdHkpO1xuICAgIHJldHVybiB0O1xuICB9XG4gIHR3ZWVuLl92YWx1ZSA9IHZhbHVlO1xuICByZXR1cm4gdHdlZW47XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBwcmlvcml0eSkge1xuICB2YXIga2V5ID0gXCJzdHlsZS5cIiArIChuYW1lICs9IFwiXCIpO1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHJldHVybiAoa2V5ID0gdGhpcy50d2VlbihrZXkpKSAmJiBrZXkuX3ZhbHVlO1xuICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIHRoaXMudHdlZW4oa2V5LCBudWxsKTtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgRXJyb3I7XG4gIHJldHVybiB0aGlzLnR3ZWVuKGtleSwgc3R5bGVUd2VlbihuYW1lLCB2YWx1ZSwgcHJpb3JpdHkgPT0gbnVsbCA/IFwiXCIgOiBwcmlvcml0eSkpO1xufVxuIiwiaW1wb3J0IHt0d2VlblZhbHVlfSBmcm9tIFwiLi90d2Vlbi5qc1wiO1xuXG5mdW5jdGlvbiB0ZXh0Q29uc3RhbnQodmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMudGV4dENvbnRlbnQgPSB2YWx1ZTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdGV4dEZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdmFsdWUxID0gdmFsdWUodGhpcyk7XG4gICAgdGhpcy50ZXh0Q29udGVudCA9IHZhbHVlMSA9PSBudWxsID8gXCJcIiA6IHZhbHVlMTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIHRoaXMudHdlZW4oXCJ0ZXh0XCIsIHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IHRleHRGdW5jdGlvbih0d2VlblZhbHVlKHRoaXMsIFwidGV4dFwiLCB2YWx1ZSkpXG4gICAgICA6IHRleHRDb25zdGFudCh2YWx1ZSA9PSBudWxsID8gXCJcIiA6IHZhbHVlICsgXCJcIikpO1xufVxuIiwiZnVuY3Rpb24gdGV4dEludGVycG9sYXRlKGkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICB0aGlzLnRleHRDb250ZW50ID0gaS5jYWxsKHRoaXMsIHQpO1xuICB9O1xufVxuXG5mdW5jdGlvbiB0ZXh0VHdlZW4odmFsdWUpIHtcbiAgdmFyIHQwLCBpMDtcbiAgZnVuY3Rpb24gdHdlZW4oKSB7XG4gICAgdmFyIGkgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmIChpICE9PSBpMCkgdDAgPSAoaTAgPSBpKSAmJiB0ZXh0SW50ZXJwb2xhdGUoaSk7XG4gICAgcmV0dXJuIHQwO1xuICB9XG4gIHR3ZWVuLl92YWx1ZSA9IHZhbHVlO1xuICByZXR1cm4gdHdlZW47XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHZhciBrZXkgPSBcInRleHRcIjtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAxKSByZXR1cm4gKGtleSA9IHRoaXMudHdlZW4oa2V5KSkgJiYga2V5Ll92YWx1ZTtcbiAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiB0aGlzLnR3ZWVuKGtleSwgbnVsbCk7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IEVycm9yO1xuICByZXR1cm4gdGhpcy50d2VlbihrZXksIHRleHRUd2Vlbih2YWx1ZSkpO1xufVxuIiwiaW1wb3J0IHtUcmFuc2l0aW9uLCBuZXdJZH0gZnJvbSBcIi4vaW5kZXguanNcIjtcbmltcG9ydCBzY2hlZHVsZSwge2dldH0gZnJvbSBcIi4vc2NoZWR1bGUuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHZhciBuYW1lID0gdGhpcy5fbmFtZSxcbiAgICAgIGlkMCA9IHRoaXMuX2lkLFxuICAgICAgaWQxID0gbmV3SWQoKTtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBuID0gZ3JvdXAubGVuZ3RoLCBub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgICB2YXIgaW5oZXJpdCA9IGdldChub2RlLCBpZDApO1xuICAgICAgICBzY2hlZHVsZShub2RlLCBuYW1lLCBpZDEsIGksIGdyb3VwLCB7XG4gICAgICAgICAgdGltZTogaW5oZXJpdC50aW1lICsgaW5oZXJpdC5kZWxheSArIGluaGVyaXQuZHVyYXRpb24sXG4gICAgICAgICAgZGVsYXk6IDAsXG4gICAgICAgICAgZHVyYXRpb246IGluaGVyaXQuZHVyYXRpb24sXG4gICAgICAgICAgZWFzZTogaW5oZXJpdC5lYXNlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgVHJhbnNpdGlvbihncm91cHMsIHRoaXMuX3BhcmVudHMsIG5hbWUsIGlkMSk7XG59XG4iLCJpbXBvcnQge3NldH0gZnJvbSBcIi4vc2NoZWR1bGUuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHZhciBvbjAsIG9uMSwgdGhhdCA9IHRoaXMsIGlkID0gdGhhdC5faWQsIHNpemUgPSB0aGF0LnNpemUoKTtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHZhciBjYW5jZWwgPSB7dmFsdWU6IHJlamVjdH0sXG4gICAgICAgIGVuZCA9IHt2YWx1ZTogZnVuY3Rpb24oKSB7IGlmICgtLXNpemUgPT09IDApIHJlc29sdmUoKTsgfX07XG5cbiAgICB0aGF0LmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2NoZWR1bGUgPSBzZXQodGhpcywgaWQpLFxuICAgICAgICAgIG9uID0gc2NoZWR1bGUub247XG5cbiAgICAgIC8vIElmIHRoaXMgbm9kZSBzaGFyZWQgYSBkaXNwYXRjaCB3aXRoIHRoZSBwcmV2aW91cyBub2RlLFxuICAgICAgLy8ganVzdCBhc3NpZ24gdGhlIHVwZGF0ZWQgc2hhcmVkIGRpc3BhdGNoIGFuZCB3ZeKAmXJlIGRvbmUhXG4gICAgICAvLyBPdGhlcndpc2UsIGNvcHktb24td3JpdGUuXG4gICAgICBpZiAob24gIT09IG9uMCkge1xuICAgICAgICBvbjEgPSAob24wID0gb24pLmNvcHkoKTtcbiAgICAgICAgb24xLl8uY2FuY2VsLnB1c2goY2FuY2VsKTtcbiAgICAgICAgb24xLl8uaW50ZXJydXB0LnB1c2goY2FuY2VsKTtcbiAgICAgICAgb24xLl8uZW5kLnB1c2goZW5kKTtcbiAgICAgIH1cblxuICAgICAgc2NoZWR1bGUub24gPSBvbjE7XG4gICAgfSk7XG5cbiAgICAvLyBUaGUgc2VsZWN0aW9uIHdhcyBlbXB0eSwgcmVzb2x2ZSBlbmQgaW1tZWRpYXRlbHlcbiAgICBpZiAoc2l6ZSA9PT0gMCkgcmVzb2x2ZSgpO1xuICB9KTtcbn1cbiIsImltcG9ydCB7c2VsZWN0aW9ufSBmcm9tIFwiZDMtc2VsZWN0aW9uXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9hdHRyIGZyb20gXCIuL2F0dHIuanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX2F0dHJUd2VlbiBmcm9tIFwiLi9hdHRyVHdlZW4uanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX2RlbGF5IGZyb20gXCIuL2RlbGF5LmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9kdXJhdGlvbiBmcm9tIFwiLi9kdXJhdGlvbi5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fZWFzZSBmcm9tIFwiLi9lYXNlLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9lYXNlVmFyeWluZyBmcm9tIFwiLi9lYXNlVmFyeWluZy5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fZmlsdGVyIGZyb20gXCIuL2ZpbHRlci5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fbWVyZ2UgZnJvbSBcIi4vbWVyZ2UuanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX29uIGZyb20gXCIuL29uLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9yZW1vdmUgZnJvbSBcIi4vcmVtb3ZlLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9zZWxlY3QgZnJvbSBcIi4vc2VsZWN0LmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9zZWxlY3RBbGwgZnJvbSBcIi4vc2VsZWN0QWxsLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9zZWxlY3Rpb24gZnJvbSBcIi4vc2VsZWN0aW9uLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9zdHlsZSBmcm9tIFwiLi9zdHlsZS5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fc3R5bGVUd2VlbiBmcm9tIFwiLi9zdHlsZVR3ZWVuLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl90ZXh0IGZyb20gXCIuL3RleHQuanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX3RleHRUd2VlbiBmcm9tIFwiLi90ZXh0VHdlZW4uanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX3RyYW5zaXRpb24gZnJvbSBcIi4vdHJhbnNpdGlvbi5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fdHdlZW4gZnJvbSBcIi4vdHdlZW4uanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX2VuZCBmcm9tIFwiLi9lbmQuanNcIjtcblxudmFyIGlkID0gMDtcblxuZXhwb3J0IGZ1bmN0aW9uIFRyYW5zaXRpb24oZ3JvdXBzLCBwYXJlbnRzLCBuYW1lLCBpZCkge1xuICB0aGlzLl9ncm91cHMgPSBncm91cHM7XG4gIHRoaXMuX3BhcmVudHMgPSBwYXJlbnRzO1xuICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgdGhpcy5faWQgPSBpZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdHJhbnNpdGlvbihuYW1lKSB7XG4gIHJldHVybiBzZWxlY3Rpb24oKS50cmFuc2l0aW9uKG5hbWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbmV3SWQoKSB7XG4gIHJldHVybiArK2lkO1xufVxuXG52YXIgc2VsZWN0aW9uX3Byb3RvdHlwZSA9IHNlbGVjdGlvbi5wcm90b3R5cGU7XG5cblRyYW5zaXRpb24ucHJvdG90eXBlID0gdHJhbnNpdGlvbi5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBUcmFuc2l0aW9uLFxuICBzZWxlY3Q6IHRyYW5zaXRpb25fc2VsZWN0LFxuICBzZWxlY3RBbGw6IHRyYW5zaXRpb25fc2VsZWN0QWxsLFxuICBzZWxlY3RDaGlsZDogc2VsZWN0aW9uX3Byb3RvdHlwZS5zZWxlY3RDaGlsZCxcbiAgc2VsZWN0Q2hpbGRyZW46IHNlbGVjdGlvbl9wcm90b3R5cGUuc2VsZWN0Q2hpbGRyZW4sXG4gIGZpbHRlcjogdHJhbnNpdGlvbl9maWx0ZXIsXG4gIG1lcmdlOiB0cmFuc2l0aW9uX21lcmdlLFxuICBzZWxlY3Rpb246IHRyYW5zaXRpb25fc2VsZWN0aW9uLFxuICB0cmFuc2l0aW9uOiB0cmFuc2l0aW9uX3RyYW5zaXRpb24sXG4gIGNhbGw6IHNlbGVjdGlvbl9wcm90b3R5cGUuY2FsbCxcbiAgbm9kZXM6IHNlbGVjdGlvbl9wcm90b3R5cGUubm9kZXMsXG4gIG5vZGU6IHNlbGVjdGlvbl9wcm90b3R5cGUubm9kZSxcbiAgc2l6ZTogc2VsZWN0aW9uX3Byb3RvdHlwZS5zaXplLFxuICBlbXB0eTogc2VsZWN0aW9uX3Byb3RvdHlwZS5lbXB0eSxcbiAgZWFjaDogc2VsZWN0aW9uX3Byb3RvdHlwZS5lYWNoLFxuICBvbjogdHJhbnNpdGlvbl9vbixcbiAgYXR0cjogdHJhbnNpdGlvbl9hdHRyLFxuICBhdHRyVHdlZW46IHRyYW5zaXRpb25fYXR0clR3ZWVuLFxuICBzdHlsZTogdHJhbnNpdGlvbl9zdHlsZSxcbiAgc3R5bGVUd2VlbjogdHJhbnNpdGlvbl9zdHlsZVR3ZWVuLFxuICB0ZXh0OiB0cmFuc2l0aW9uX3RleHQsXG4gIHRleHRUd2VlbjogdHJhbnNpdGlvbl90ZXh0VHdlZW4sXG4gIHJlbW92ZTogdHJhbnNpdGlvbl9yZW1vdmUsXG4gIHR3ZWVuOiB0cmFuc2l0aW9uX3R3ZWVuLFxuICBkZWxheTogdHJhbnNpdGlvbl9kZWxheSxcbiAgZHVyYXRpb246IHRyYW5zaXRpb25fZHVyYXRpb24sXG4gIGVhc2U6IHRyYW5zaXRpb25fZWFzZSxcbiAgZWFzZVZhcnlpbmc6IHRyYW5zaXRpb25fZWFzZVZhcnlpbmcsXG4gIGVuZDogdHJhbnNpdGlvbl9lbmQsXG4gIFtTeW1ib2wuaXRlcmF0b3JdOiBzZWxlY3Rpb25fcHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl1cbn07XG4iLCJleHBvcnQgZnVuY3Rpb24gY3ViaWNJbih0KSB7XG4gIHJldHVybiB0ICogdCAqIHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjdWJpY091dCh0KSB7XG4gIHJldHVybiAtLXQgKiB0ICogdCArIDE7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjdWJpY0luT3V0KHQpIHtcbiAgcmV0dXJuICgodCAqPSAyKSA8PSAxID8gdCAqIHQgKiB0IDogKHQgLT0gMikgKiB0ICogdCArIDIpIC8gMjtcbn1cbiIsImltcG9ydCB7VHJhbnNpdGlvbiwgbmV3SWR9IGZyb20gXCIuLi90cmFuc2l0aW9uL2luZGV4LmpzXCI7XG5pbXBvcnQgc2NoZWR1bGUgZnJvbSBcIi4uL3RyYW5zaXRpb24vc2NoZWR1bGUuanNcIjtcbmltcG9ydCB7ZWFzZUN1YmljSW5PdXR9IGZyb20gXCJkMy1lYXNlXCI7XG5pbXBvcnQge25vd30gZnJvbSBcImQzLXRpbWVyXCI7XG5cbnZhciBkZWZhdWx0VGltaW5nID0ge1xuICB0aW1lOiBudWxsLCAvLyBTZXQgb24gdXNlLlxuICBkZWxheTogMCxcbiAgZHVyYXRpb246IDI1MCxcbiAgZWFzZTogZWFzZUN1YmljSW5PdXRcbn07XG5cbmZ1bmN0aW9uIGluaGVyaXQobm9kZSwgaWQpIHtcbiAgdmFyIHRpbWluZztcbiAgd2hpbGUgKCEodGltaW5nID0gbm9kZS5fX3RyYW5zaXRpb24pIHx8ICEodGltaW5nID0gdGltaW5nW2lkXSkpIHtcbiAgICBpZiAoIShub2RlID0gbm9kZS5wYXJlbnROb2RlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGB0cmFuc2l0aW9uICR7aWR9IG5vdCBmb3VuZGApO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdGltaW5nO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lKSB7XG4gIHZhciBpZCxcbiAgICAgIHRpbWluZztcblxuICBpZiAobmFtZSBpbnN0YW5jZW9mIFRyYW5zaXRpb24pIHtcbiAgICBpZCA9IG5hbWUuX2lkLCBuYW1lID0gbmFtZS5fbmFtZTtcbiAgfSBlbHNlIHtcbiAgICBpZCA9IG5ld0lkKCksICh0aW1pbmcgPSBkZWZhdWx0VGltaW5nKS50aW1lID0gbm93KCksIG5hbWUgPSBuYW1lID09IG51bGwgPyBudWxsIDogbmFtZSArIFwiXCI7XG4gIH1cblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBuID0gZ3JvdXAubGVuZ3RoLCBub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgICBzY2hlZHVsZShub2RlLCBuYW1lLCBpZCwgaSwgZ3JvdXAsIHRpbWluZyB8fCBpbmhlcml0KG5vZGUsIGlkKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBUcmFuc2l0aW9uKGdyb3VwcywgdGhpcy5fcGFyZW50cywgbmFtZSwgaWQpO1xufVxuIiwiaW1wb3J0IHtzZWxlY3Rpb259IGZyb20gXCJkMy1zZWxlY3Rpb25cIjtcbmltcG9ydCBzZWxlY3Rpb25faW50ZXJydXB0IGZyb20gXCIuL2ludGVycnVwdC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl90cmFuc2l0aW9uIGZyb20gXCIuL3RyYW5zaXRpb24uanNcIjtcblxuc2VsZWN0aW9uLnByb3RvdHlwZS5pbnRlcnJ1cHQgPSBzZWxlY3Rpb25faW50ZXJydXB0O1xuc2VsZWN0aW9uLnByb3RvdHlwZS50cmFuc2l0aW9uID0gc2VsZWN0aW9uX3RyYW5zaXRpb247XG4iLCJleHBvcnQgZnVuY3Rpb24gVHJhbnNmb3JtKGssIHgsIHkpIHtcbiAgdGhpcy5rID0gaztcbiAgdGhpcy54ID0geDtcbiAgdGhpcy55ID0geTtcbn1cblxuVHJhbnNmb3JtLnByb3RvdHlwZSA9IHtcbiAgY29uc3RydWN0b3I6IFRyYW5zZm9ybSxcbiAgc2NhbGU6IGZ1bmN0aW9uKGspIHtcbiAgICByZXR1cm4gayA9PT0gMSA/IHRoaXMgOiBuZXcgVHJhbnNmb3JtKHRoaXMuayAqIGssIHRoaXMueCwgdGhpcy55KTtcbiAgfSxcbiAgdHJhbnNsYXRlOiBmdW5jdGlvbih4LCB5KSB7XG4gICAgcmV0dXJuIHggPT09IDAgJiB5ID09PSAwID8gdGhpcyA6IG5ldyBUcmFuc2Zvcm0odGhpcy5rLCB0aGlzLnggKyB0aGlzLmsgKiB4LCB0aGlzLnkgKyB0aGlzLmsgKiB5KTtcbiAgfSxcbiAgYXBwbHk6IGZ1bmN0aW9uKHBvaW50KSB7XG4gICAgcmV0dXJuIFtwb2ludFswXSAqIHRoaXMuayArIHRoaXMueCwgcG9pbnRbMV0gKiB0aGlzLmsgKyB0aGlzLnldO1xuICB9LFxuICBhcHBseVg6IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4geCAqIHRoaXMuayArIHRoaXMueDtcbiAgfSxcbiAgYXBwbHlZOiBmdW5jdGlvbih5KSB7XG4gICAgcmV0dXJuIHkgKiB0aGlzLmsgKyB0aGlzLnk7XG4gIH0sXG4gIGludmVydDogZnVuY3Rpb24obG9jYXRpb24pIHtcbiAgICByZXR1cm4gWyhsb2NhdGlvblswXSAtIHRoaXMueCkgLyB0aGlzLmssIChsb2NhdGlvblsxXSAtIHRoaXMueSkgLyB0aGlzLmtdO1xuICB9LFxuICBpbnZlcnRYOiBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuICh4IC0gdGhpcy54KSAvIHRoaXMuaztcbiAgfSxcbiAgaW52ZXJ0WTogZnVuY3Rpb24oeSkge1xuICAgIHJldHVybiAoeSAtIHRoaXMueSkgLyB0aGlzLms7XG4gIH0sXG4gIHJlc2NhbGVYOiBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIHguY29weSgpLmRvbWFpbih4LnJhbmdlKCkubWFwKHRoaXMuaW52ZXJ0WCwgdGhpcykubWFwKHguaW52ZXJ0LCB4KSk7XG4gIH0sXG4gIHJlc2NhbGVZOiBmdW5jdGlvbih5KSB7XG4gICAgcmV0dXJuIHkuY29weSgpLmRvbWFpbih5LnJhbmdlKCkubWFwKHRoaXMuaW52ZXJ0WSwgdGhpcykubWFwKHkuaW52ZXJ0LCB5KSk7XG4gIH0sXG4gIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyB0aGlzLnggKyBcIixcIiArIHRoaXMueSArIFwiKSBzY2FsZShcIiArIHRoaXMuayArIFwiKVwiO1xuICB9XG59O1xuXG5leHBvcnQgdmFyIGlkZW50aXR5ID0gbmV3IFRyYW5zZm9ybSgxLCAwLCAwKTtcblxudHJhbnNmb3JtLnByb3RvdHlwZSA9IFRyYW5zZm9ybS5wcm90b3R5cGU7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRyYW5zZm9ybShub2RlKSB7XG4gIHdoaWxlICghbm9kZS5fX3pvb20pIGlmICghKG5vZGUgPSBub2RlLnBhcmVudE5vZGUpKSByZXR1cm4gaWRlbnRpdHk7XG4gIHJldHVybiBub2RlLl9fem9vbTtcbn1cbiIsIlxuLypcbiAgQ1BUTWF0aCBTdGF0aWMgQ2xhc3MgLSBOb3QgaW50ZW5kZWQgZm9yIGluc3RhbnRpYXRpb24hXG5cbiAgTW9kZWwgUGFyYW1ldGVyczpcbiAgICBhID0gYWxwaGEgKGN1cnZhdHVyZSBmb3IgdmFsdWUgZnVuY3Rpb24pXG4gICAgbCA9IGxhbWJkYSAobG9zcyBhdmVyc2lvbiBmb3IgdmFsdWUgZnVuY3Rpb24pXG4gICAgZyA9IGdhbW1hIChzZW5zaXRpdml0eSBmb3IgZGVjaXNpb24gd2VpZ2h0aW5nIGZ1bmN0aW9uKVxuXG4gIFZhcmlhYmxlczpcbiAgICB4ID0gb2JqZWN0aXZlIHZhbHVlXG4gICAgdiA9IHN1YmplY3RpdmUgdmFsdWVcbiAgICBwID0gb2JqZWN0aXZlIHByb2JhYmlsaXR5XG4gICAgdyA9IHN1YmplY3RpdmUgcHJvYmFiaWxpdHkvZGVjaXNpb24gd2VpZ2h0XG4gICAgdSA9IHN1YmplY3RpdmUgdXRpbGl0eVxuXG4gIEVxdWF0aW9uczpcbiAgICB2ID0gaWYgKHggPj0gMCkgeF5hOyBpZiAoeCA8IDApIC1sICogKC14KV5hXG4gICAgYSA9IGlmICh4ID49IDApIGxvZyh2KSAvIGxvZyh4KTsgaWYgKHggPCAwKSAobG9nKC12KSAtIGxvZyhsKSkgLyBsb2coLXgpXG4gICAgbCA9IGlmICh4ID49IDApIDE7IGlmICh4IDwgMCkgLXYgLyAoLXgpXmFcblxuICAgIHcgPSBwXmcgLyAocF5nICsgKDEgLSBwKV5nKV4oMSAvIGcpXG5cbiAgICB1ID0gU3VtX24odl9uICogd19uKVxuKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENQVE1hdGgge1xuICBzdGF0aWMgYSA9IHtcbiAgICBERUZBVUxUOiAwLjUsXG4gICAgTUlOOiAwLjAsXG4gICAgTUFYOiAxLjAsXG4gICAgU1RFUDogMC4wMSxcbiAgICBKVU1QOiAwLjA1LFxuICB9O1xuXG4gIHN0YXRpYyBsID0ge1xuICAgIERFRkFVTFQ6IDIuMCxcbiAgICBNSU46IDAuMCxcbiAgICBNQVg6IDEwLjAsXG4gICAgU1RFUDogMC4wMSxcbiAgICBKVU1QOiAwLjA1LFxuICB9O1xuXG4gIHN0YXRpYyBnID0ge1xuICAgIERFRkFVTFQ6IDAuNSxcbiAgICBNSU46IDAuMCxcbiAgICBNQVg6IDEuMCxcbiAgICBTVEVQOiAwLjAxLFxuICAgIEpVTVA6IDAuMDUsXG4gIH07XG5cbiAgc3RhdGljIHhhbDJ2KHgsIGEsIGwpIHtcbiAgICBpZiAoeCA+PSAwKSB7XG4gICAgICByZXR1cm4geCAqKiBhO1xuICAgIH1cbiAgICAvLyBlbHNlICh4IDwgMClcbiAgICByZXR1cm4gLWwgKiAoKC14KSAqKiBhKTtcbiAgfVxuXG4gIHN0YXRpYyB4bHYyYSh4LCBsLCB2KSB7XG4gICAgaWYgKHggPj0gMCkge1xuICAgICAgcmV0dXJuIE1hdGgubG9nKHYpIC8gTWF0aC5sb2coeCk7XG4gICAgfVxuICAgIC8vIGVsc2UgKHggPCAwKVxuICAgIHJldHVybiAoTWF0aC5sb2coLXYpIC0gTWF0aC5sb2cobCkpIC8gTWF0aC5sb2coLXgpO1xuICB9XG5cbiAgc3RhdGljIHhhdjJsKHgsIGEsIHYpIHtcbiAgICBpZiAoeCA+PSAwKSB7XG4gICAgICByZXR1cm4gTmFOO1xuICAgIH1cbiAgICAvLyBlbHNlICh4IDwgMClcbiAgICByZXR1cm4gLXYgLyAoKC14KSAqKiBhKTtcbiAgfVxuXG4gIHN0YXRpYyBwZzJ3KHAsIGcpIHtcbiAgICByZXR1cm4gKHAgKiogZykgLyAoKChwICoqIGcpICsgKCgxIC0gcCkgKiogZykpICoqICgxIC8gZykpO1xuICB9XG5cbiAgc3RhdGljIHZ3MnUodiwgdykge1xuICAgIC8vIE51bWJlcnNcbiAgICBpZiAodHlwZW9mIHYgPT09ICdudW1iZXInICYmIHR5cGVvZiB3ID09PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuIHYgKiB3O1xuICAgIH1cbiAgICAvLyBBcnJheXNcbiAgICBpZiAodiBpbnN0YW5jZW9mIEFycmF5ICYmIHcgaW5zdGFuY2VvZiBBcnJheSAmJiB2Lmxlbmd0aCA+IDAgJiYgdi5sZW5ndGggPT09IHcubGVuZ3RoKSB7XG4gICAgICBsZXQgdSA9IDA7XG4gICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHYubGVuZ3RoOyBuICs9IDEpIHtcbiAgICAgICAgdSArPSB2W25dICogd1tuXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB1O1xuICAgIH1cbiAgICAvLyBPdGhlcndpc2VcbiAgICByZXR1cm4gTmFOO1xuICB9XG59XG4iLCJcbi8vIEludGVybmFsIGRlcGVuZGVuY2llc1xuaW1wb3J0IENQVE1hdGggZnJvbSAnLi9jcHQtbWF0aCc7XG5cbmV4cG9ydCBkZWZhdWx0IENQVE1hdGg7XG4iLCIvKiBlc2xpbnQgbm8tcmVzdHJpY3RlZC1nbG9iYWxzOiBbXCJvZmZcIiwgXCJzZWxmXCJdICovXG5cbmltcG9ydCAqIGFzIEJheWVzRGlzdHJpYnV0aW9ucyBmcm9tICdiYXllcy5qcy9kaXN0cmlidXRpb25zJztcbmltcG9ydCAqIGFzIEJheWVzTWNtYyBmcm9tICdiYXllcy5qcy9tY21jJztcbmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcbmltcG9ydCBDUFRNYXRoIGZyb20gJ0BkZWNpZGFibGVzL3Byb3NwZWN0YWJsZS1tYXRoJztcblxuc2VsZi5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcbiAgY29uc3QgcGFyYW1zID0ge1xuICAgIGFscGhhOiB7dHlwZTogJ3JlYWwnLCBsb3dlcjogQ1BUTWF0aC5hLk1JTiwgdXBwZXI6IENQVE1hdGguYS5NQVh9LFxuICAgIGxhbWJkYToge3R5cGU6ICdyZWFsJywgbG93ZXI6IENQVE1hdGgubC5NSU4sIHVwcGVyOiBDUFRNYXRoLmwuTUFYfSxcbiAgICBnYW1tYToge3R5cGU6ICdyZWFsJywgbG93ZXI6IENQVE1hdGguZy5NSU4sIHVwcGVyOiBDUFRNYXRoLmcuTUFYfSxcbiAgICBsdWNlOiB7dHlwZTogJ3JlYWwnLCBsb3dlcjogMCwgdXBwZXI6IDEwMH0sXG4gIH07XG5cbiAgY29uc3QgbG9nUG9zdCA9IChzdGF0ZSwgZGF0YSkgPT4ge1xuICAgIGxldCBscCA9IDA7XG5cbiAgICAvLyBQcmlvcnNcbiAgICBjb25zdCBhbHBoYU1lYW4gPSAwLjU7XG4gICAgY29uc3QgYWxwaGFTYW1wbGVTaXplID0gMi41O1xuICAgIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy5iZXRhKFxuICAgICAgc3RhdGUuYWxwaGEsXG4gICAgICBhbHBoYU1lYW4gKiBhbHBoYVNhbXBsZVNpemUsXG4gICAgICAoMSAtIGFscGhhTWVhbikgKiBhbHBoYVNhbXBsZVNpemUsXG4gICAgKTtcbiAgICAvLyBscCArPSBCYXllc0Rpc3RyaWJ1dGlvbnMudW5pZihzdGF0ZS5hbHBoYSwgMCwgMSk7XG5cbiAgICBjb25zdCBsYW1iZGFNZWFuID0gMjtcbiAgICBjb25zdCBsYW1iZGFTaGFwZSA9IDM7XG4gICAgbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLmdhbW1hKFxuICAgICAgc3RhdGUubGFtYmRhLFxuICAgICAgbGFtYmRhU2hhcGUsXG4gICAgICBsYW1iZGFTaGFwZSAvIGxhbWJkYU1lYW4sXG4gICAgKTtcbiAgICAvLyBscCArPSBCYXllc0Rpc3RyaWJ1dGlvbnMudW5pZihzdGF0ZS5sYW1iZGEsIDAsIDEwKTtcblxuICAgIGNvbnN0IGdhbW1hTWVhbiA9IDAuNTtcbiAgICBjb25zdCBnYW1tYVNhbXBsZVNpemUgPSAyLjU7XG4gICAgbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLmJldGEoXG4gICAgICBzdGF0ZS5nYW1tYSxcbiAgICAgIGdhbW1hTWVhbiAqIGdhbW1hU2FtcGxlU2l6ZSxcbiAgICAgICgxIC0gZ2FtbWFNZWFuKSAqIGdhbW1hU2FtcGxlU2l6ZSxcbiAgICApO1xuICAgIC8vIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy51bmlmKHN0YXRlLmdhbW1hLCAwLCAxKTtcblxuICAgIGNvbnN0IGx1Y2VNZWFuID0gMjtcbiAgICBjb25zdCBsdWNlU2hhcGUgPSAzO1xuICAgIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy5nYW1tYShcbiAgICAgIHN0YXRlLmx1Y2UsXG4gICAgICBsdWNlU2hhcGUsXG4gICAgICBsdWNlU2hhcGUgLyBsdWNlTWVhbixcbiAgICApO1xuICAgIC8vIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy51bmlmKHN0YXRlLmx1Y2UsIDAsIDEwMCk7XG5cbiAgICAvLyBMaWtlbGlob29kXG4gICAgZGF0YS5mb3JFYWNoKChjaG9pY2UpID0+IHtcbiAgICAgIC8vIFZhbHVlc1xuICAgICAgY29uc3QgdmwgPSBDUFRNYXRoLnhhbDJ2KGNob2ljZS54bCwgc3RhdGUuYWxwaGEsIHN0YXRlLmxhbWJkYSk7XG4gICAgICBjb25zdCB2dyA9IENQVE1hdGgueGFsMnYoY2hvaWNlLnh3LCBzdGF0ZS5hbHBoYSwgc3RhdGUubGFtYmRhKTtcbiAgICAgIGNvbnN0IHZzID0gQ1BUTWF0aC54YWwydihjaG9pY2UueHMsIHN0YXRlLmFscGhhLCBzdGF0ZS5sYW1iZGEpO1xuXG4gICAgICAvLyBQcm9iYWJpbGl0aWVzXG4gICAgICBjb25zdCB3dyA9IENQVE1hdGgucGcydyhjaG9pY2UucHcsIHN0YXRlLmdhbW1hKTtcbiAgICAgIGNvbnN0IHdsID0gMSAtIHd3O1xuXG4gICAgICAvLyBVdGlsaXRpZXNcbiAgICAgIGNvbnN0IHVnID0gd2wgKiB2bCArIHd3ICogdnc7XG4gICAgICBjb25zdCB1cyA9IHZzO1xuXG4gICAgICAvLyBDaG9pY2Ugb2YgZ2FtYmxlIG9yIHN1cmUgaXMgc2FtcGxlZCBmcm9tIGEgQmVybm91bGxpIGRpc3RyaWJ1dGlvblxuICAgICAgLy8gTHVjZSBjaG9pY2UgcnVsZSBpcyB1c2VkIHRvIGNvbXB1dGUgcHJvYmFiaWxpdHkgb2YgZ2FtYmxpbmchICgwID0gc3VyZSwgMSA9IGdhbWJsZSlcbiAgICAgIGNvbnN0IGJpbnZhbCA9IDEgLyAoMSArIE1hdGguZXhwKHN0YXRlLmx1Y2UgKiAodXMgLSB1ZykpKTtcblxuICAgICAgLy8gQWN0dWFsIHJlc3BvbnNlXG4gICAgICBjb25zdCByZXNwb25zZSA9IChjaG9pY2UucmVzcG9uc2UgPT09ICdzdXJlJykgPyAwIDogMTtcblxuICAgICAgbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLmJlcm4ocmVzcG9uc2UsIGJpbnZhbCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gbHA7XG4gIH07XG5cbiAgLy8gSW5pdGlhbGl6aW5nIHRoZSBzYW1wbGVyXG4gIGNvbnN0IHNhbXBsZXIgPSBuZXcgQmF5ZXNNY21jLkFtd2dTYW1wbGVyKHBhcmFtcywgbG9nUG9zdCwgZXZlbnQuZGF0YSk7XG4gIC8vIEJ1cm5pbmcgc29tZSBzYW1wbGVzIHRvIHRoZSBNQ01DIGdvZHMgYW5kIHNhbXBsaW5nIDUwMDAgZHJhd3NcbiAgc2FtcGxlci5idXJuKDEwMDApO1xuICBjb25zdCBzYW1wbGVzID0gc2FtcGxlci5zYW1wbGUoNTAwMCk7XG5cbiAgLy8gRXh0cmFjdCBzdW1tYXJ5IHN0YXRzXG4gIGNvbnN0IHJlc3VsdHMgPSB7XG4gICAgYWxwaGE6IGQzLm1lZGlhbihzYW1wbGVzLmFscGhhKSxcbiAgICBsYW1iZGE6IGQzLm1lZGlhbihzYW1wbGVzLmxhbWJkYSksXG4gICAgZ2FtbWE6IGQzLm1lZGlhbihzYW1wbGVzLmdhbW1hKSxcbiAgICBsdWNlOiBkMy5tZWRpYW4oc2FtcGxlcy5sdWNlKSxcbiAgfTtcblxuICBzZWxmLnBvc3RNZXNzYWdlKHtyZXN1bHRzOiByZXN1bHRzLCBzYW1wbGVzOiBzYW1wbGVzfSk7XG59O1xuIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwibW9kdWxlIiwiZXhwb3J0cyIsImxkIiwidGhpcyIsImxnYW1tYSIsIngiLCJqIiwiY29mIiwic2VyIiwieHgiLCJ5IiwidG1wIiwibG9nIiwibGZhY3RvcmlhbCIsIm4iLCJOYU4iLCJsY2hvb3NlIiwiayIsImxiZXRhIiwiYSIsImIiLCJNYXRoIiwiZXhwIiwiYWJzIiwicG93Iiwic3FydCIsInBpIiwiUEkiLCJiZXRhIiwic2hhcGUxIiwic2hhcGUyIiwiSW5maW5pdHkiLCJjYXVjaHkiLCJsb2NhdGlvbiIsInNjYWxlIiwibm9ybSIsIm1lYW4iLCJzZCIsImJpdmFybm9ybSIsImNvcnIiLCJ6Iiwibm9ybWFsaXppbmdfZmFjdG9yIiwiYml2YXJfbG9nX2RlbnMiLCJsYXBsYWNlIiwiZGV4cCIsImdhbW1hIiwic2hhcGUiLCJyYXRlIiwiaW52Z2FtbWEiLCJsbm9ybSIsIm1lYW5sb2ciLCJzZGxvZyIsInBhcmV0byIsInQiLCJkZiIsIndlaWJ1bGwiLCJ0bXAxIiwidG1wMiIsImxvZ2lzIiwiZSIsImYiLCJkaXJpY2hsZXQiLCJhbHBoYSIsInN1bV9hbHBoYSIsInN1bV9sZ2FtbWFfYWxwaGEiLCJzdW1fYWxwaGFfc3ViXzFfbG9nX3giLCJsZW5ndGgiLCJpIiwidW5pZiIsIm1pbiIsIm1heCIsImJlcm4iLCJwcm9iIiwiY2F0IiwicHJvYnMiLCJiaW5vbSIsInNpemUiLCJuYmlub20iLCJoeXBlciIsIm0iLCJwb2lzIiwibGFtYmRhIiwibWNtYyIsInJ1bmlmIiwicmFuZG9tIiwicnVuaWZfZGlzY3JldGUiLCJmbG9vciIsInJub3JtIiwidSIsInYiLCJxIiwiZGVlcF9jbG9uZSIsInNyYyIsIm1peGluIiwiZGVzdCIsInNvdXJjZSIsImNvcHlGdW5jIiwibmFtZSIsInMiLCJlbXB0eSIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiY2FsbCIsIm5vZGVUeXBlIiwiY2xvbmVOb2RlIiwiRGF0ZSIsImdldFRpbWUiLCJSZWdFeHAiLCJyIiwibCIsIkFycmF5IiwicHVzaCIsImNvbnN0cnVjdG9yIiwiY2xvbmVfcGFyYW1fZHJhdyIsImlzQXJyYXkiLCJ4X2NvcHkiLCJzbGljZSIsImlzX251bWJlciIsIm9iamVjdCIsIk51bWJlciIsImNyZWF0ZV9hcnJheSIsImRpbSIsImluaXQiLCJhcnIiLCJhcnJheV9kaW0iLCJjb25jYXQiLCJhcnJheV9lcXVhbCIsImExIiwiYTIiLCJuZXN0ZWRfYXJyYXlfYXBwbHkiLCJmdW4iLCJyZXN1bHQiLCJzaHVmZmxlX2FycmF5IiwiYXJyYXkiLCJ0ZW1wIiwibmVzdGVkX2FycmF5X3JhbmRvbV9hcHBseSIsImxlbiIsImFycmF5X2lzIiwiYXJyYXlfaSIsImdldF9vcHRpb24iLCJvcHRpb25fbmFtZSIsIm9wdGlvbnMiLCJkZWZhdWxfdmFsdWUiLCJoYXNPd25Qcm9wZXJ0eSIsInVuZGVmaW5lZCIsImdldF9tdWx0aWRpbV9vcHRpb24iLCJ2YWx1ZSIsInBhcmFtX2luaXRfZml4ZWQiLCJ0eXBlIiwibG93ZXIiLCJ1cHBlciIsInJvdW5kIiwiY29tcGxldGVfcGFyYW1zIiwicGFyYW1zX3RvX2NvbXBsZXRlIiwicGFyYW1faW5pdCIsInBhcmFtcyIsInBhcmFtX25hbWUiLCJwYXJhbSIsIlN0ZXBwZXIiLCJzdGF0ZSIsImxvZ19wb3N0Iiwic3RlcCIsInN0YXJ0X2FkYXB0YXRpb24iLCJzdG9wX2FkYXB0YXRpb24iLCJpbmZvIiwiT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIiLCJnZW5lcmF0ZV9wcm9wb3NhbCIsInBhcmFtX25hbWVzIiwia2V5cyIsInByb3BfbG9nX3NjYWxlIiwiYmF0Y2hfc2l6ZSIsIm1heF9hZGFwdGF0aW9uIiwiaW5pdGlhbF9hZGFwdGF0aW9uIiwidGFyZ2V0X2FjY2VwdF9yYXRlIiwiaXNfYWRhcHRpbmciLCJhY2NlcHRhbmNlX2NvdW50IiwiYmF0Y2hfY291bnQiLCJpdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uIiwiY3JlYXRlIiwicGFyYW1fc3RhdGUiLCJwYXJhbV9wcm9wb3NhbCIsImN1cnJfbG9nX2RlbnMiLCJwcm9wX2xvZ19kZW5zIiwiYWNjZXB0X3Byb2IiLCJsb2dfc2RfYWRqdXN0bWVudCIsIm5vcm1hbF9wcm9wb3NhbCIsIlJlYWxNZXRyb3BvbGlzU3RlcHBlciIsImRpc2NyZXRlX25vcm1hbF9wcm9wb3NhbCIsIkludE1ldHJvcG9saXNTdGVwcGVyIiwiTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciIsIlN1YlN0ZXBwZXIiLCJjcmVhdGVfc3Vic3RlcHBlcnMiLCJzdWJzdGF0ZSIsInN1YnN0ZXBwZXJzIiwic3Vib3B0aW9ucyIsInN1YnBhcmFtIiwic3Vic3RlcHBlciIsIk11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIiwiTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciIsIkJpbmFyeVN0ZXBwZXIiLCJ6ZXJvX2xvZ19kZW5zIiwib25lX2xvZ19kZW5zIiwibWF4X2xvZ19kZW5zIiwiemVyb19wcm9iIiwiQmluYXJ5Q29tcG9uZW50U3RlcHBlciIsInN1YnBhcmFtcyIsIkFtd2dTdGVwcGVyIiwiU2VsZWN0U3RlcHBlciIsInBhcmFtX29iamVjdF93cmFwIiwicGFyYW1fb3B0aW9ucyIsIlNhbXBsZXIiLCJkYXRhIiwicGFyYW1faW5pdF9mdW4iLCJ0aGlubmluZ19pbnRlcnZhbCIsInBhcmFtc190b19tb25pdG9yIiwidGhpbiIsIm1vbml0b3IiLCJzdGVwcGVycyIsImNyZWF0ZV9zdGVwcGVyX2Vuc2FtYmxlIiwic2FtcGxlIiwibl9pdGVyYXRpb25zIiwibW9uaXRvcmVkX3BhcmFtcyIsImN1cnJfc2FtcGxlIiwiYnVybiIsIkFtd2dTYW1wbGVyIiwiYXNjZW5kaW5nIiwibnVtYmVycyIsInZhbHVlcyIsInZhbHVlb2YiLCJjb21wYXJlRGVmaW5lZCIsImNvbXBhcmUiLCJhc2NlbmRpbmdEZWZpbmVkIiwiVHlwZUVycm9yIiwicXVpY2tzZWxlY3QiLCJsZWZ0IiwicmlnaHQiLCJuZXdMZWZ0IiwibmV3UmlnaHQiLCJzd2FwIiwicXVhbnRpbGUiLCJwIiwiRmxvYXQ2NEFycmF5IiwiZnJvbSIsImlzTmFOIiwiaTAiLCJ2YWx1ZTAiLCJzdWJhcnJheSIsInZhbHVlMSIsIm1lZGlhbiIsIm5vb3AiLCJkaXNwYXRjaCIsImFyZ3VtZW50cyIsIl8iLCJ0ZXN0IiwiRXJyb3IiLCJEaXNwYXRjaCIsInBhcnNlVHlwZW5hbWVzIiwidHlwZW5hbWVzIiwidHlwZXMiLCJ0cmltIiwic3BsaXQiLCJtYXAiLCJpbmRleE9mIiwib24iLCJ0eXBlbmFtZSIsImNhbGxiYWNrIiwiVCIsImdldCIsInNldCIsImNvcHkiLCJ0aGF0IiwiYXJncyIsImFwcGx5IiwiYyIsInhodG1sIiwic3ZnIiwieGxpbmsiLCJ4bWwiLCJ4bWxucyIsInByZWZpeCIsIm5hbWVzcGFjZXMiLCJzcGFjZSIsImxvY2FsIiwiY3JlYXRvckluaGVyaXQiLCJkb2N1bWVudCIsIm93bmVyRG9jdW1lbnQiLCJ1cmkiLCJuYW1lc3BhY2VVUkkiLCJkb2N1bWVudEVsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiY3JlYXRvckZpeGVkIiwiZnVsbG5hbWUiLCJuYW1lc3BhY2UiLCJub25lIiwic2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yIiwic2VsZWN0IiwiZ3JvdXBzIiwiX2dyb3VwcyIsInN1Ymdyb3VwcyIsImdyb3VwIiwic3ViZ3JvdXAiLCJub2RlIiwic3Vibm9kZSIsIl9fZGF0YV9fIiwiU2VsZWN0aW9uIiwiX3BhcmVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYXJyYXlBbGwiLCJzZWxlY3RvckFsbCIsInBhcmVudHMiLCJtYXRjaGVzIiwiY2hpbGRNYXRjaGVyIiwiZmluZCIsImNoaWxkRmluZCIsIm1hdGNoIiwiY2hpbGRyZW4iLCJjaGlsZEZpcnN0IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJmaWx0ZXIiLCJjaGlsZHJlbkZpbHRlciIsInNlbGVjdEFsbCIsIm1hdGNoZXIiLCJ1cGRhdGUiLCJfZW50ZXIiLCJzcGFyc2UiLCJFbnRlck5vZGUiLCJwYXJlbnQiLCJkYXR1bSIsIl9uZXh0IiwiX3BhcmVudCIsImFwcGVuZENoaWxkIiwiY2hpbGQiLCJpbnNlcnRCZWZvcmUiLCJuZXh0IiwiYmluZEluZGV4IiwiZW50ZXIiLCJleGl0IiwiZ3JvdXBMZW5ndGgiLCJkYXRhTGVuZ3RoIiwiYmluZEtleSIsImtleSIsIm5vZGVCeUtleVZhbHVlIiwiTWFwIiwia2V5VmFsdWVzIiwia2V5VmFsdWUiLCJoYXMiLCJkZWxldGUiLCJiaW5kIiwiY29uc3RhbnQiLCJhcnJheWxpa2UiLCJlbnRlckdyb3VwIiwidXBkYXRlR3JvdXAiLCJleGl0R3JvdXAiLCJpMSIsInByZXZpb3VzIiwiX2V4aXQiLCJvbmVudGVyIiwib251cGRhdGUiLCJvbmV4aXQiLCJzZWxlY3Rpb24iLCJhcHBlbmQiLCJyZW1vdmUiLCJtZXJnZSIsIm9yZGVyIiwiY29udGV4dCIsImdyb3VwczAiLCJncm91cHMxIiwibTAiLCJtMSIsIm1lcmdlcyIsImdyb3VwMCIsImdyb3VwMSIsImNvbXBhcmVEb2N1bWVudFBvc2l0aW9uIiwicGFyZW50Tm9kZSIsImNvbXBhcmVOb2RlIiwic29ydGdyb3VwcyIsInNvcnRncm91cCIsInNvcnQiLCJhdHRyUmVtb3ZlIiwicmVtb3ZlQXR0cmlidXRlIiwiYXR0clJlbW92ZU5TIiwicmVtb3ZlQXR0cmlidXRlTlMiLCJhdHRyQ29uc3RhbnQiLCJzZXRBdHRyaWJ1dGUiLCJhdHRyQ29uc3RhbnROUyIsInNldEF0dHJpYnV0ZU5TIiwiYXR0ckZ1bmN0aW9uIiwiYXR0ckZ1bmN0aW9uTlMiLCJnZXRBdHRyaWJ1dGVOUyIsImdldEF0dHJpYnV0ZSIsImVhY2giLCJkZWZhdWx0VmlldyIsInN0eWxlUmVtb3ZlIiwic3R5bGUiLCJyZW1vdmVQcm9wZXJ0eSIsInN0eWxlQ29uc3RhbnQiLCJwcmlvcml0eSIsInNldFByb3BlcnR5Iiwic3R5bGVGdW5jdGlvbiIsInN0eWxlVmFsdWUiLCJnZXRQcm9wZXJ0eVZhbHVlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInByb3BlcnR5UmVtb3ZlIiwicHJvcGVydHlDb25zdGFudCIsInByb3BlcnR5RnVuY3Rpb24iLCJjbGFzc0FycmF5Iiwic3RyaW5nIiwiY2xhc3NMaXN0IiwiQ2xhc3NMaXN0IiwiX25vZGUiLCJfbmFtZXMiLCJhZGQiLCJqb2luIiwic3BsaWNlIiwiY29udGFpbnMiLCJjbGFzc2VkQWRkIiwibmFtZXMiLCJsaXN0IiwiY2xhc3NlZFJlbW92ZSIsImNsYXNzZWRUcnVlIiwiY2xhc3NlZEZhbHNlIiwiY2xhc3NlZEZ1bmN0aW9uIiwidGV4dFJlbW92ZSIsInRleHRDb250ZW50IiwidGV4dENvbnN0YW50IiwidGV4dEZ1bmN0aW9uIiwiaHRtbFJlbW92ZSIsImlubmVySFRNTCIsImh0bWxDb25zdGFudCIsImh0bWxGdW5jdGlvbiIsInJhaXNlIiwibmV4dFNpYmxpbmciLCJwcmV2aW91c1NpYmxpbmciLCJmaXJzdENoaWxkIiwiY3JlYXRvciIsImNvbnN0YW50TnVsbCIsImJlZm9yZSIsInJlbW92ZUNoaWxkIiwic2VsZWN0aW9uX2Nsb25lU2hhbGxvdyIsImNsb25lIiwic2VsZWN0aW9uX2Nsb25lRGVlcCIsImRlZXAiLCJwcm9wZXJ0eSIsImNvbnRleHRMaXN0ZW5lciIsImxpc3RlbmVyIiwiZXZlbnQiLCJvblJlbW92ZSIsIl9fb24iLCJvIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm9uQWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRpc3BhdGNoRXZlbnQiLCJ3aW5kb3ciLCJDdXN0b21FdmVudCIsImNyZWF0ZUV2ZW50IiwiaW5pdEV2ZW50IiwiYnViYmxlcyIsImNhbmNlbGFibGUiLCJkZXRhaWwiLCJkaXNwYXRjaENvbnN0YW50IiwiZGlzcGF0Y2hGdW5jdGlvbiIsInNlbGVjdGlvbl9zZWxlY3Rpb24iLCJzZWxlY3Rpb25fc2VsZWN0Iiwic2VsZWN0aW9uX3NlbGVjdEFsbCIsInNlbGVjdENoaWxkIiwic2VsZWN0aW9uX3NlbGVjdENoaWxkIiwic2VsZWN0Q2hpbGRyZW4iLCJzZWxlY3Rpb25fc2VsZWN0Q2hpbGRyZW4iLCJzZWxlY3Rpb25fZmlsdGVyIiwic2VsZWN0aW9uX2RhdGEiLCJzZWxlY3Rpb25fZW50ZXIiLCJzZWxlY3Rpb25fZXhpdCIsInNlbGVjdGlvbl9qb2luIiwic2VsZWN0aW9uX21lcmdlIiwic2VsZWN0aW9uX29yZGVyIiwic2VsZWN0aW9uX3NvcnQiLCJzZWxlY3Rpb25fY2FsbCIsIm5vZGVzIiwic2VsZWN0aW9uX25vZGVzIiwic2VsZWN0aW9uX25vZGUiLCJzZWxlY3Rpb25fc2l6ZSIsInNlbGVjdGlvbl9lbXB0eSIsInNlbGVjdGlvbl9lYWNoIiwiYXR0ciIsInNlbGVjdGlvbl9hdHRyIiwic2VsZWN0aW9uX3N0eWxlIiwic2VsZWN0aW9uX3Byb3BlcnR5IiwiY2xhc3NlZCIsInNlbGVjdGlvbl9jbGFzc2VkIiwidGV4dCIsInNlbGVjdGlvbl90ZXh0IiwiaHRtbCIsInNlbGVjdGlvbl9odG1sIiwic2VsZWN0aW9uX3JhaXNlIiwic2VsZWN0aW9uX2xvd2VyIiwic2VsZWN0aW9uX2FwcGVuZCIsImluc2VydCIsInNlbGVjdGlvbl9pbnNlcnQiLCJzZWxlY3Rpb25fcmVtb3ZlIiwic2VsZWN0aW9uX2Nsb25lIiwic2VsZWN0aW9uX2RhdHVtIiwic2VsZWN0aW9uX29uIiwic2VsZWN0aW9uX2Rpc3BhdGNoIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJzZWxlY3Rpb25faXRlcmF0b3IiLCJleHRlbmQiLCJkZWZpbml0aW9uIiwiQ29sb3IiLCJkYXJrZXIiLCJicmlnaHRlciIsInJlSSIsInJlTiIsInJlUCIsInJlSGV4IiwicmVSZ2JJbnRlZ2VyIiwicmVSZ2JQZXJjZW50IiwicmVSZ2JhSW50ZWdlciIsInJlUmdiYVBlcmNlbnQiLCJyZUhzbFBlcmNlbnQiLCJyZUhzbGFQZXJjZW50IiwibmFtZWQiLCJhbGljZWJsdWUiLCJhbnRpcXVld2hpdGUiLCJhcXVhIiwiYXF1YW1hcmluZSIsImF6dXJlIiwiYmVpZ2UiLCJiaXNxdWUiLCJibGFjayIsImJsYW5jaGVkYWxtb25kIiwiYmx1ZSIsImJsdWV2aW9sZXQiLCJicm93biIsImJ1cmx5d29vZCIsImNhZGV0Ymx1ZSIsImNoYXJ0cmV1c2UiLCJjaG9jb2xhdGUiLCJjb3JhbCIsImNvcm5mbG93ZXJibHVlIiwiY29ybnNpbGsiLCJjcmltc29uIiwiY3lhbiIsImRhcmtibHVlIiwiZGFya2N5YW4iLCJkYXJrZ29sZGVucm9kIiwiZGFya2dyYXkiLCJkYXJrZ3JlZW4iLCJkYXJrZ3JleSIsImRhcmtraGFraSIsImRhcmttYWdlbnRhIiwiZGFya29saXZlZ3JlZW4iLCJkYXJrb3JhbmdlIiwiZGFya29yY2hpZCIsImRhcmtyZWQiLCJkYXJrc2FsbW9uIiwiZGFya3NlYWdyZWVuIiwiZGFya3NsYXRlYmx1ZSIsImRhcmtzbGF0ZWdyYXkiLCJkYXJrc2xhdGVncmV5IiwiZGFya3R1cnF1b2lzZSIsImRhcmt2aW9sZXQiLCJkZWVwcGluayIsImRlZXBza3libHVlIiwiZGltZ3JheSIsImRpbWdyZXkiLCJkb2RnZXJibHVlIiwiZmlyZWJyaWNrIiwiZmxvcmFsd2hpdGUiLCJmb3Jlc3RncmVlbiIsImZ1Y2hzaWEiLCJnYWluc2Jvcm8iLCJnaG9zdHdoaXRlIiwiZ29sZCIsImdvbGRlbnJvZCIsImdyYXkiLCJncmVlbiIsImdyZWVueWVsbG93IiwiZ3JleSIsImhvbmV5ZGV3IiwiaG90cGluayIsImluZGlhbnJlZCIsImluZGlnbyIsIml2b3J5Iiwia2hha2kiLCJsYXZlbmRlciIsImxhdmVuZGVyYmx1c2giLCJsYXduZ3JlZW4iLCJsZW1vbmNoaWZmb24iLCJsaWdodGJsdWUiLCJsaWdodGNvcmFsIiwibGlnaHRjeWFuIiwibGlnaHRnb2xkZW5yb2R5ZWxsb3ciLCJsaWdodGdyYXkiLCJsaWdodGdyZWVuIiwibGlnaHRncmV5IiwibGlnaHRwaW5rIiwibGlnaHRzYWxtb24iLCJsaWdodHNlYWdyZWVuIiwibGlnaHRza3libHVlIiwibGlnaHRzbGF0ZWdyYXkiLCJsaWdodHNsYXRlZ3JleSIsImxpZ2h0c3RlZWxibHVlIiwibGlnaHR5ZWxsb3ciLCJsaW1lIiwibGltZWdyZWVuIiwibGluZW4iLCJtYWdlbnRhIiwibWFyb29uIiwibWVkaXVtYXF1YW1hcmluZSIsIm1lZGl1bWJsdWUiLCJtZWRpdW1vcmNoaWQiLCJtZWRpdW1wdXJwbGUiLCJtZWRpdW1zZWFncmVlbiIsIm1lZGl1bXNsYXRlYmx1ZSIsIm1lZGl1bXNwcmluZ2dyZWVuIiwibWVkaXVtdHVycXVvaXNlIiwibWVkaXVtdmlvbGV0cmVkIiwibWlkbmlnaHRibHVlIiwibWludGNyZWFtIiwibWlzdHlyb3NlIiwibW9jY2FzaW4iLCJuYXZham93aGl0ZSIsIm5hdnkiLCJvbGRsYWNlIiwib2xpdmUiLCJvbGl2ZWRyYWIiLCJvcmFuZ2UiLCJvcmFuZ2VyZWQiLCJvcmNoaWQiLCJwYWxlZ29sZGVucm9kIiwicGFsZWdyZWVuIiwicGFsZXR1cnF1b2lzZSIsInBhbGV2aW9sZXRyZWQiLCJwYXBheWF3aGlwIiwicGVhY2hwdWZmIiwicGVydSIsInBpbmsiLCJwbHVtIiwicG93ZGVyYmx1ZSIsInB1cnBsZSIsInJlYmVjY2FwdXJwbGUiLCJyZWQiLCJyb3N5YnJvd24iLCJyb3lhbGJsdWUiLCJzYWRkbGVicm93biIsInNhbG1vbiIsInNhbmR5YnJvd24iLCJzZWFncmVlbiIsInNlYXNoZWxsIiwic2llbm5hIiwic2lsdmVyIiwic2t5Ymx1ZSIsInNsYXRlYmx1ZSIsInNsYXRlZ3JheSIsInNsYXRlZ3JleSIsInNub3ciLCJzcHJpbmdncmVlbiIsInN0ZWVsYmx1ZSIsInRhbiIsInRlYWwiLCJ0aGlzdGxlIiwidG9tYXRvIiwidHVycXVvaXNlIiwidmlvbGV0Iiwid2hlYXQiLCJ3aGl0ZSIsIndoaXRlc21va2UiLCJ5ZWxsb3ciLCJ5ZWxsb3dncmVlbiIsImRlZmluZSIsImNvbG9yIiwiY2hhbm5lbHMiLCJhc3NpZ24iLCJkaXNwbGF5YWJsZSIsInJnYiIsImhleCIsImNvbG9yX2Zvcm1hdEhleCIsImZvcm1hdEhleCIsImZvcm1hdEhleDgiLCJjb2xvcl9mb3JtYXRIZXg4IiwiZm9ybWF0SHNsIiwiY29sb3JfZm9ybWF0SHNsIiwiZm9ybWF0UmdiIiwiY29sb3JfZm9ybWF0UmdiIiwiaHNsQ29udmVydCIsImZvcm1hdCIsInRvTG93ZXJDYXNlIiwiZXhlYyIsInBhcnNlSW50IiwicmdibiIsIlJnYiIsInJnYmEiLCJoc2xhIiwiZyIsInJnYkNvbnZlcnQiLCJvcGFjaXR5IiwiY2xhbXAiLCJjbGFtcGkiLCJjbGFtcGEiLCJyZ2JfZm9ybWF0SGV4IiwicmdiX2Zvcm1hdEhleDgiLCJyZ2JfZm9ybWF0UmdiIiwiaCIsIkhzbCIsImhzbCIsIm0yIiwiaHNsMnJnYiIsImNsYW1waCIsImNsYW1wdCIsImxpbmVhciIsImQiLCJleHBvbmVudGlhbCIsIm5vZ2FtbWEiLCJyZ2JHYW1tYSIsInN0YXJ0IiwiZW5kIiwiY29sb3JSZ2IiLCJyZUEiLCJyZUIiLCJ6ZXJvIiwib25lIiwiYmkiLCJsYXN0SW5kZXgiLCJhbSIsImJtIiwiYnMiLCJpbmRleCIsIm51bWJlciIsImRlZ3JlZXMiLCJpZGVudGl0eSIsInRyYW5zbGF0ZVgiLCJ0cmFuc2xhdGVZIiwicm90YXRlIiwic2tld1giLCJzY2FsZVgiLCJzY2FsZVkiLCJhdGFuMiIsImF0YW4iLCJzdmdOb2RlIiwicGFyc2VDc3MiLCJET01NYXRyaXgiLCJXZWJLaXRDU1NNYXRyaXgiLCJpc0lkZW50aXR5IiwiZGVjb21wb3NlIiwicGFyc2VTdmciLCJ0cmFuc2Zvcm0iLCJiYXNlVmFsIiwiY29uc29saWRhdGUiLCJtYXRyaXgiLCJpbnRlcnBvbGF0ZVRyYW5zZm9ybSIsInBhcnNlIiwicHhDb21tYSIsInB4UGFyZW4iLCJkZWdQYXJlbiIsInBvcCIsInRyYW5zbGF0ZSIsInhhIiwieWEiLCJ4YiIsInliIiwiaW50ZXJwb2xhdGVUcmFuc2Zvcm1Dc3MiLCJpbnRlcnBvbGF0ZVRyYW5zZm9ybVN2ZyIsImZyYW1lIiwidGltZW91dCIsImludGVydmFsIiwicG9rZURlbGF5IiwidGFza0hlYWQiLCJ0YXNrVGFpbCIsImNsb2NrTGFzdCIsImNsb2NrTm93IiwiY2xvY2tTa2V3IiwiY2xvY2siLCJwZXJmb3JtYW5jZSIsIm5vdyIsInNldEZyYW1lIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwic2V0VGltZW91dCIsImNsZWFyTm93IiwiVGltZXIiLCJfY2FsbCIsIl90aW1lIiwidGltZXIiLCJyZXN0YXJ0IiwiZGVsYXkiLCJ0aW1lIiwic2xlZXAiLCJzdG9wIiwidGltZXJGbHVzaCIsIndha2UiLCJuYXAiLCJwb2tlIiwidDAiLCJ0MSIsInQyIiwiY2xlYXJUaW1lb3V0IiwiY2xlYXJJbnRlcnZhbCIsInNldEludGVydmFsIiwiZWxhcHNlZCIsImVtcHR5T24iLCJlbXB0eVR3ZWVuIiwiQ1JFQVRFRCIsIlNDSEVEVUxFRCIsIlNUQVJUSU5HIiwiU1RBUlRFRCIsIlJVTk5JTkciLCJFTkRJTkciLCJFTkRFRCIsImlkIiwidGltaW5nIiwic2NoZWR1bGVzIiwiX190cmFuc2l0aW9uIiwidHdlZW4iLCJkdXJhdGlvbiIsImVhc2UiLCJzY2hlZHVsZSIsInNlbGYiLCJ0aWNrIiwiYWN0aXZlIiwiaW50ZXJydXB0IiwidHdlZW5SZW1vdmUiLCJ0d2VlbjAiLCJ0d2VlbjEiLCJ0d2VlbkZ1bmN0aW9uIiwiX2lkIiwidHdlZW5WYWx1ZSIsInRyYW5zaXRpb24iLCJpbnRlcnBvbGF0ZU51bWJlciIsImludGVycG9sYXRlUmdiIiwiaW50ZXJwb2xhdGVTdHJpbmciLCJpbnRlcnBvbGF0ZSIsInN0cmluZzAwIiwic3RyaW5nMSIsImludGVycG9sYXRlMCIsInN0cmluZzAiLCJzdHJpbmcxMCIsImF0dHJUd2VlbiIsImF0dHJJbnRlcnBvbGF0ZSIsImF0dHJJbnRlcnBvbGF0ZU5TIiwiYXR0clR3ZWVuTlMiLCJfdmFsdWUiLCJkZWxheUZ1bmN0aW9uIiwiZGVsYXlDb25zdGFudCIsImR1cmF0aW9uRnVuY3Rpb24iLCJkdXJhdGlvbkNvbnN0YW50IiwiZWFzZUNvbnN0YW50IiwiZWFzZVZhcnlpbmciLCJUcmFuc2l0aW9uIiwiX25hbWUiLCJldmVyeSIsIm9uRnVuY3Rpb24iLCJvbjAiLCJvbjEiLCJzaXQiLCJyZW1vdmVGdW5jdGlvbiIsImluaGVyaXQiLCJzdHlsZU51bGwiLCJzdHlsZU1heWJlUmVtb3ZlIiwibGlzdGVuZXIwIiwic3R5bGVUd2VlbiIsInN0eWxlSW50ZXJwb2xhdGUiLCJ0ZXh0SW50ZXJwb2xhdGUiLCJ0ZXh0VHdlZW4iLCJpZDAiLCJpZDEiLCJuZXdJZCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiY2FuY2VsIiwic2VsZWN0aW9uX3Byb3RvdHlwZSIsInRyYW5zaXRpb25fc2VsZWN0IiwidHJhbnNpdGlvbl9zZWxlY3RBbGwiLCJ0cmFuc2l0aW9uX2ZpbHRlciIsInRyYW5zaXRpb25fbWVyZ2UiLCJ0cmFuc2l0aW9uX3NlbGVjdGlvbiIsInRyYW5zaXRpb25fdHJhbnNpdGlvbiIsInRyYW5zaXRpb25fb24iLCJ0cmFuc2l0aW9uX2F0dHIiLCJ0cmFuc2l0aW9uX2F0dHJUd2VlbiIsInRyYW5zaXRpb25fc3R5bGUiLCJ0cmFuc2l0aW9uX3N0eWxlVHdlZW4iLCJ0cmFuc2l0aW9uX3RleHQiLCJ0cmFuc2l0aW9uX3RleHRUd2VlbiIsInRyYW5zaXRpb25fcmVtb3ZlIiwidHJhbnNpdGlvbl90d2VlbiIsInRyYW5zaXRpb25fZGVsYXkiLCJ0cmFuc2l0aW9uX2R1cmF0aW9uIiwidHJhbnNpdGlvbl9lYXNlIiwidHJhbnNpdGlvbl9lYXNlVmFyeWluZyIsInRyYW5zaXRpb25fZW5kIiwiY3ViaWNJbk91dCIsImRlZmF1bHRUaW1pbmciLCJlYXNlQ3ViaWNJbk91dCIsInNlbGVjdGlvbl9pbnRlcnJ1cHQiLCJzZWxlY3Rpb25fdHJhbnNpdGlvbiIsIlRyYW5zZm9ybSIsInBvaW50IiwiYXBwbHlYIiwiYXBwbHlZIiwiaW52ZXJ0IiwiaW52ZXJ0WCIsImludmVydFkiLCJyZXNjYWxlWCIsImRvbWFpbiIsInJhbmdlIiwicmVzY2FsZVkiLCJDUFRNYXRoIiwiREVGQVVMVCIsIk1JTiIsIk1BWCIsIlNURVAiLCJKVU1QIiwieGFsMnYiLCJ4bHYyYSIsInhhdjJsIiwicGcydyIsInZ3MnUiLCJ3Iiwib25tZXNzYWdlIiwibHVjZSIsImxvZ1Bvc3QiLCJscCIsImFscGhhTWVhbiIsImFscGhhU2FtcGxlU2l6ZSIsIkJheWVzRGlzdHJpYnV0aW9ucyIsImxhbWJkYU1lYW4iLCJsYW1iZGFTaGFwZSIsImdhbW1hTWVhbiIsImdhbW1hU2FtcGxlU2l6ZSIsImx1Y2VNZWFuIiwibHVjZVNoYXBlIiwiZm9yRWFjaCIsImNob2ljZSIsInZsIiwieGwiLCJ2dyIsInh3IiwidnMiLCJ4cyIsInd3IiwicHciLCJ3bCIsInVnIiwidXMiLCJiaW52YWwiLCJyZXNwb25zZSIsInNhbXBsZXIiLCJCYXllc01jbWMiLCJzYW1wbGVzIiwicmVzdWx0cyIsImQzIiwicG9zdE1lc3NhZ2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0VBR0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0VBRUE7RUFDQTtFQUNBOztFQUVBO0VB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Q0FtdUIsRUFBQUEsT0FBTyxDQUFDdnRCLElBQUksQ0FBQyxJQUFJLENBQUM7RUFDbEIsRUFBQSxNQUFNeXRCLE9BQU8sR0FBR0YsT0FBTyxDQUFDM3RCLE1BQU0sQ0FBQyxJQUFJLENBQUM7O0VBRXBDO0VBQ0EsRUFBQSxNQUFNOHRCLE9BQU8sR0FBRztNQUNkNTNCLEtBQUssRUFBRTYzQixNQUFTLENBQUNGLE9BQU8sQ0FBQzMzQixLQUFLLENBQUM7TUFDL0JtQixNQUFNLEVBQUUwMkIsTUFBUyxDQUFDRixPQUFPLENBQUN4MkIsTUFBTSxDQUFDO01BQ2pDcEMsS0FBSyxFQUFFODRCLE1BQVMsQ0FBQ0YsT0FBTyxDQUFDNTRCLEtBQUssQ0FBQztFQUMvQisyQixJQUFBQSxJQUFJLEVBQUUrQixNQUFTLENBQUNGLE9BQU8sQ0FBQzdCLElBQUk7S0FDN0I7SUFFRHhHLElBQUksQ0FBQ3dJLFdBQVcsQ0FBQztFQUFDRixJQUFBQSxPQUFPLEVBQUVBLE9BQU87RUFBRUQsSUFBQUEsT0FBTyxFQUFFQTtFQUFPLEdBQUMsQ0FBQztFQUN4RCxDQUFDOzs7Ozs7IiwieF9nb29nbGVfaWdub3JlTGlzdCI6WzAsMSwyLDMsNCw1LDYsNyw4LDksMTAsMTEsMTIsMTMsMTQsMTUsMTYsMTcsMTgsMTksMjAsMjEsMjIsMjMsMjQsMjUsMjYsMjcsMjgsMjksMzAsMzEsMzIsMzMsMzQsMzUsMzYsMzcsMzgsMzksNDAsNDEsNDIsNDMsNDQsNDUsNDYsNDcsNDgsNDksNTAsNTEsNTIsNTMsNTQsNTUsNTYsNTcsNTgsNTksNjAsNjEsNjIsNjMsNjQsNjUsNjYsNjcsNjgsNjksNzAsNzEsNzIsNzMsNzQsNzUsNzYsNzcsNzgsNzksODAsODEsODIsODMsODQsODUsODYsODcsODgsODksOTAsOTEsOTIsOTMsOTQsOTUsOTZdfQ==");class CPTFit extends ProspectableElement{static get properties(){return{}}constructor(){super(),this.a=CPTMath.a.DEFAULT,this.l=CPTMath.l.DEFAULT,this.g=CPTMath.g.DEFAULT,this.choices=[],this.samples=null,this.working=!1,this.queued=!1,this.worker=new WorkerFactory$2,this.worker.onmessage=t=>{this.working=!1,this.samples=t.data.samples,this.a=t.data.results.alpha,this.l=t.data.results.lambda,this.g=t.data.results.gamma,this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-fit-update",{detail:{a:this.a,l:this.l,g:this.g},bubbles:!0})),this.queued&&this.fit()},this.fit()}fit(){this.working?this.queued=!0:(this.worker.postMessage(this.choices),this.working=!0,this.queued=!1)}clear(){this.choices=[],this.fit()}get(t="default"){const s=this.choices.find(s=>s.name===t);return void 0===s?null:s}set(t,s,e,B,i,F="",Q=""){const l=this.choices.find(t=>t.name===F);void 0===l?this.choices.push({xl:t,xw:s,pw:e,xs:B,response:i,name:F,label:Q}):(l.xl=t,l.xw=s,l.pw=e,l.xs=B,l.response=i,l.label=Q),this.fit()}static get styles(){return[super.styles,i$5`
        /* :host {
          display: inline-block;
        } */

        figure {
          margin: 0.625rem;
        }

        figure h2 {
          margin: 0.25rem 0;

          font-size: 1.125rem;
          font-weight: 600;
        }

        .trace,
        .hist {
          display: inline-block;
        }
      `]}render(){return x$3`
      <div>
        <div>After ${this.choices.length} trials:</div>
        <div>Current:
          <var class="math-var a">Î±</var> = ${this.a.toFixed(2)},
          <var class="math-var l">Î»</var> = ${this.l.toFixed(2)},
          <var class="math-var g">Î³</var> = ${this.g.toFixed(2)}
        </div>
        <div class="param">
          <div class="trace alpha"></div>
          <div class="hist alpha"></div>
        </div>
        <div class="param">
          <div class="trace lambda"></div>
          <div class="hist lambda"></div>
        </div>
        <div class="param">
          <div class="trace gamma"></div>
          <div class="hist gamma"></div>
        </div>
        <div class="param">
          <div class="trace luce"></div>
          <div class="hist luce"></div>
        </div>
      </div>
    `}plotParam(t){this.shadowRoot.querySelector(`.hist.${t}`).replaceChildren(plot({title:`Posterior of ${t}`,x:{label:`${t}`},width:320,height:240,style:"font-size: 0.75rem; font-family: var(---font-family-base);",marks:[rectY(this.samples[t],binX({y:"count"},{x:identity$1})),rectY(this.samples[t],pointerX(binX({y:"count"},{x:identity$1,stroke:"black",fill:"white",tip:!0})))]})),this.shadowRoot.querySelector(`.trace.${t}`).replaceChildren(plot({title:`Traceplot of ${t}`,x:{label:"Sample"},y:{label:`${t}`},width:320,height:240,style:"font-size: 0.75rem; font-family: var(---font-family-base);",marks:[lineY(this.samples[t]),dot(this.samples[t],pointer({x:indexOf,y:identity$1,stroke:"black",fill:"white",r:4,tip:!0}))]}))}update(t){super.update(t),null!==this.samples&&(this.plotParam("alpha"),this.plotParam("lambda"),this.plotParam("gamma"),this.plotParam("luce"))}}customElements.define("cpt-fit",CPTFit);class CPTParameters extends ProspectableElement{static get properties(){return{a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0}}}constructor(){super(),this.a=void 0,this.l=void 0,this.g=void 0}setAlpha(t){this.a=+t.target.value,this.dispatchEvent(new CustomEvent("cpt-parameters-a",{detail:{a:this.a},bubbles:!0}))}setLambda(t){this.l=+t.target.value,this.dispatchEvent(new CustomEvent("cpt-parameters-l",{detail:{l:this.l},bubbles:!0}))}setGamma(t){this.g=+t.target.value,this.dispatchEvent(new CustomEvent("cpt-parameters-g",{detail:{g:this.g},bubbles:!0}))}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;
        }

        .holder {
          display: flex;

          flex-direction: row;

          align-items: stretch;
          justify-content: center;
        }

        decidables-slider {
          line-height: 1;
          text-align: center;
        }

        decidables-slider  div {
          margin-bottom: 0.25rem;
        }

        .a {
          --decidables-slider-background-color: var(---color-a-light);
          --decidables-slider-color: var(---color-a);
        }

        .l {
          --decidables-slider-background-color: var(---color-l-light);
          --decidables-slider-color: var(---color-l);
        }

        .g {
          --decidables-slider-background-color: var(---color-g-light);
          --decidables-slider-color: var(---color-g);
        }
      `]}render(){return x$3`
      <div class="holder">
        ${null!=this.a?x$3`<decidables-slider class="a"
            ?disabled=${!this.interactive}
            scale
            min=${CPTMath.a.MIN}
            max=${CPTMath.a.MAX}
            step=${CPTMath.a.STEP}
            .value=${+this.a.toFixed(2)}
            @change=${this.setAlpha.bind(this)}
            @input=${this.setAlpha.bind(this)}
          ><div>Alpha<br><span class="math-var">Î±</span></div></decidables-slider>`:x$3``}
        ${null!=this.l?x$3`<decidables-slider class="l"
            ?disabled=${!this.interactive}
            scale
            min=${CPTMath.l.MIN}
            max=${CPTMath.l.MAX}
            step=${CPTMath.l.STEP}
            .value=${+this.l.toFixed(2)}
            @change=${this.setLambda.bind(this)}
            @input=${this.setLambda.bind(this)}
          ><div>Lambda<br><span class="math-var">Î»</span></div></decidables-slider>`:x$3``}
        ${null!=this.g?x$3`<decidables-slider class="g"
            ?disabled=${!this.interactive}
            scale
            min=${CPTMath.g.MIN}
            max=${CPTMath.g.MAX}
            step=${CPTMath.g.STEP}
            .value=${+this.g.toFixed(2)}
            @change=${this.setGamma.bind(this)}
            @input=${this.setGamma.bind(this)}
          ><div>Gamma<br><span class="math-var">Î³</span></div></decidables-slider>`:x$3``}
      </div>`}}customElements.define("cpt-parameters",CPTParameters);class CPTProbability extends(DecidablesMixinResizeable(ProspectableElement)){static get properties(){return{p:{attribute:"probability",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},label:{attribute:"label",type:String,reflect:!0},w:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.firstUpdate=!0,this.drag=!1,this.g=CPTMath.g.DEFAULT,this.p=null,this.label="",this.function="default",this.functions=[{name:"default",g:this.g}],this.probabilities=[{name:"default",p:this.p,label:this.label,function:this.function}],this.xl=null,this.xw=null,this.pw=null,this.xs=null,this.trialCount=null,this.response=null,this.alignState()}alignState(){this.functions[0].g=this.g,this.probabilities[0].p=this.p,this.probabilities[0].label=this.label,this.probabilities[0].function=this.function,this.probabilities.forEach(t=>{const s=this.functions.find(s=>s.name===t.function);t.w=CPTMath.pg2w(t.p,s.g)}),this.w=this.probabilities[0].w}trial(t,s,e,B,i,F){this.trialCount&&this.removeProbability(`${this.trialCount}`),this.xl=t,this.xw=s,this.pw=e,this.xs=B,this.trialCount=i,this.response=F,this.setProbability(this.pw,`${this.trialCount}`,"","default",!0)}pauseTrial(){const t=select(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]");t.interrupt("new-1"),t.interrupt("new-2"),t.datum(t=>(t.paused=!0,t))}resumeTrial(){select(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]").datum(t=>(t.paused=!1,t)),this.requestUpdate()}clearFunctions(){this.functions.splice(1),this.requestUpdate()}clearProbabilities(){this.probabilities.splice(1),this.requestUpdate()}clear(){this.clearFunctions(),this.clearProbabilities()}removeFunction(t){this.functions=this.functions.filter(s=>s.name!==t),this.requestUpdate()}removeProbability(t){this.probabilities=this.probabilities.filter(s=>s.name!==t),this.requestUpdate()}remove(t){this.removeFunction(t),this.removeProbability(t)}getFunction(t="default"){return this.functions.find(s=>s.name===t)}getProbability(t="default"){return this.probabilities.find(s=>s.name===t)}get(t="default"){return{...this.getFunction(t),...this.getProbability(t)}}setFunction(t,s="default"){"default"===s&&(this.g=t);const e=this.functions.find(t=>t.name===s);void 0===e?this.functions.push({name:s,g:t}):e.g=t,this.requestUpdate()}setProbability(t,s="default",e="",B=s,i=!1){"default"===s&&(this.p=t,this.label=e);const F=this.probabilities.find(t=>t.name===s);void 0===F?this.probabilities.push({name:s,p:t,label:e,function:B,trial:i,new:i}):(F.p=t,F.label=e,F.function=B),this.requestUpdate()}set(t,s,e="default",B="",i=e){this.setFunction(s,i),this.setProbability(t,e,B,i)}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;

          width: 20rem;
          height: 20rem;
        }

        .main {
          width: 100%;
          height: 100%;
        }

        text {
          /* stylelint-disable property-no-vendor-prefix */
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
        }

        .curve.interactive {
          cursor: nwse-resize;

          filter: url("#shadow-2");
          outline: none;
        }

        .curve.interactive:hover {
          filter: url("#shadow-4");

          /* HACK: This gets Safari to correctly apply the filter! */
          /* https://github.com/emilbjorklund/svg-weirdness/issues/27 */
          transform: translateX(0);
        }

        .curve.interactive:active {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          transform: translateY(0);
        }

        :host(.keyboard) .curve.interactive:focus {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          transform: translateZ(0);
        }

        .point.interactive {
          cursor: nesw-resize;

          filter: url("#shadow-2");
          outline: none;

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #000000;
          stroke-opacity: 0;
          stroke-width: 0;
        }

        .point.interactive:hover {
          filter: url("#shadow-4");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #ff0000;
        }

        .point.interactive:active {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #00ff00;
        }

        :host(.keyboard) .point.interactive:focus {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #0000ff;
        }

        .background {
          fill: var(---color-element-background);
          stroke: var(---color-element-border);
          stroke-width: 1;
          shape-rendering: crispEdges;
        }

        .title-x,
        .title-y {
          font-weight: 600;

          fill: currentColor;
        }

        .tick {
          font-size: 0.75rem;
        }

        .scale-x path,
        .scale-x line,
        .scale-y path,
        .scale-y line {
          stroke: var(---color-element-border);
        }

        .diagonal {
          stroke: var(---color-element-border);
          stroke-dasharray: 4;
          stroke-width: 1;
        }

        .curve {
          fill: none;
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .line-p,
        .line-w {
          fill: none;
          stroke-width: 2;
        }

        .line-p {
          stroke: var(---color-p);
        }

        .line-w {
          stroke: var(---color-w);
        }

        .point .circle {
          fill: var(---color-element-emphasis);

          r: 6px;
        }

        .point .label {
          font-size: 0.75rem;

          dominant-baseline: middle;
          text-anchor: middle;

          fill: var(---color-text-inverse);
        }

        /* Make a larger target for touch users */
        .interactive .touch {
          stroke: #000000;
          stroke-opacity: 0;
        }

        @media (pointer: coarse) {
          .interactive .touch {
            stroke-linecap: round;
            stroke-width: 12;
          }
        }
      `]}render(){return x$3``}willUpdate(){this.alignState()}update(t){if(super.update(t),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const s=this.width,e=this.height,B=Math.min(s,e),i=2*this.rem,F=3*this.rem,Q=3*this.rem,l=B-(i+F),U=B-(Q+2*this.rem),a=parseInt(this.getComputedStyleValue("---transition-duration"),10),g=linear().domain([0,1]).range([0,U]).clamp(!0);this.xScale=g;const I=linear().domain([1,0]).range([0,l]);this.yScale=I;const c=drag().subject((t,s)=>({x:t.x,y:this.yScale(CPTMath.pg2w(this.xScale.invert(t.x),s.g)),p:this.xScale.invert(t.x),g:s.g,w:CPTMath.pg2w(this.xScale.invert(t.x),s.g)})).on("start",t=>{select(t.currentTarget).classed("dragging",!0)}).on("drag",(t,s)=>{this.drag=!0;const e=this.xScale.invert(t.x),B=this.yScale.invert(t.y),i=e-t.subject.p,F=B-t.subject.w,Q=(i**2+F**2)**.5,l=t.subject.p>t.subject.w?i>F?t.subject.g-Q:t.subject.g+Q:i>F?t.subject.g+Q:t.subject.g-Q;s.g=l>CPTMath.g.MAX?CPTMath.g.MAX:l<CPTMath.g.MIN?CPTMath.g.MIN:l,"default"===s.name&&(this.g=s.g),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:this.get(s.name),bubbles:!0}))}).on("end",t=>{select(t.currentTarget).classed("dragging",!1)}),n=drag().subject((t,s)=>({x:this.xScale(s.p),y:this.yScale(s.w)})).on("start",t=>{select(t.currentTarget).classed("dragging",!0)}).on("drag",(t,s)=>{this.drag=!0;const e=this.xScale.invert(t.x);s.p=e<0?0:e>1?1:e,"default"===s.name&&(this.p=s.p),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:{name:s.name,p:s.p,w:s.w,label:s.label,g:this.getFunction(s.function).g},bubbles:!0}))}).on("end",t=>{select(t.currentTarget).classed("dragging",!1)}),r=shapeLine().x(t=>g(t.p)).y(t=>I(t.w)),o=select(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),d=o.enter().append("svg").classed("main",!0).each((t,s,e)=>{B$1(ProspectableElement.svgFilters,e[s])}),C=d.merge(o).attr("viewBox",`0 0 ${B} ${B}`),b=d.append("g").classed("plot",!0),u=C.select(".plot").attr("transform",`translate(${Q}, ${i})`);b.append("clipPath").attr("id","clip-cpt-value").append("rect"),u.select("clipPath rect").attr("height",l+1).attr("width",U+1);const h=b.append("g").classed("underlayer",!0),y=u.select(".underlayer");h.append("rect").classed("background",!0),y.select(".background").attr("height",l).attr("width",U),h.append("g").classed("scale-x",!0);y.select(".scale-x").attr("transform",`translate(0, ${l})`).transition().duration(2*a).ease(cubicOut).call(axisBottom(g)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null);const x=h.append("text").classed("title-x",!0).attr("text-anchor","middle");x.append("tspan").classed("name",!0).text("Probability ("),x.append("tspan").classed("math-var p",!0).text("p"),x.append("tspan").classed("name",!0).text(")"),y.select(".title-x").attr("transform",`translate(${U/2}, ${l+2.25*this.rem})`),h.append("g").classed("scale-y",!0);y.select(".scale-y").transition().duration(2*a).ease(cubicOut).call(axisLeft(I)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null);const A=h.append("text").classed("title-y",!0).attr("text-anchor","middle");A.append("tspan").classed("name",!0).text("Decision Weight ("),A.append("tspan").classed("math-var v",!0).text("w"),A.append("tspan").classed("name",!0).text(")"),y.select(".title-y").attr("transform",`translate(${-2*this.rem}, ${l/2})rotate(-90)`),h.append("line").classed("diagonal",!0),y.select(".diagonal").transition().duration(2*a).attr("x1",g(0)).attr("y1",I(0)).attr("x2",g(1)).attr("y2",I(1)),b.append("g").classed("content",!0);const G=u.select(".content"),R=G.selectAll(".lines").data(this.probabilities.filter(t=>null!=t.p),t=>t.name),L=R.enter().append("g").classed("lines",!0);L.each((t,s,e)=>{const B=select(e[s]);B.append("line").classed("line-p above",!0),B.append("line").classed("line-p below",!0),B.append("line").classed("line-w before",!0),B.append("line").classed("line-w after",!0)}),L.filter(t=>t.new).attr("data-animating-ease-time-1",0).attr("data-animating-ease-time-2",0).each((t,s,e)=>{const B=select(e[s]);B.select(".line-p.above").attr("x1",g(t.p)).attr("x2",g(t.p)).attr("y1",I(1)).attr("y2",I(1)),B.select(".line-p.below").attr("x1",g(t.p)).attr("x2",g(t.p)).attr("y1",I(0)).attr("y2",I(0)),B.select(".line-w.before").attr("x1",g(t.p)).attr("x2",g(t.p)).attr("y1",I(t.w)).attr("y2",I(t.w)),B.select(".line-w.after").attr("x1",g(t.p)).attr("x2",g(t.p)).attr("y1",I(t.w)).attr("y2",I(t.w))});const m=L.merge(R),S=m.filter(t=>t.new&&!t.paused);if(!S.empty()){const t=S.attr("data-animating-ease-time-1"),s=S.attr("data-animating-ease-time-2"),e=s=>linear().domain([0,1]).range([t,1])(s),B=s=>linear().range([0,1]).domain([t,1])(s),i=t=>linear().domain([0,1]).range([s,1])(t),F=t=>linear().range([0,1]).domain([s,1])(t),Q=s=>e=>linear().domain([s(t),1]).range([0,1])(s(e)),l=t=>e=>linear().domain([t(s),1]).range([0,1])(t(e));S.transition("new-1").duration(()=>Math.floor(a*(1-t))).ease(e).attr("data-animating-ease-time-1",1).tween("animating",(t,s,e)=>{const i=e[s],F=select(i),l=interpolate$1(void 0!==i.p?i.p:t.p,t.p),U=interpolate$1(void 0!==i.g?i.g:this.getFunction(t.function).g,this.getFunction(t.function).g),a=interpolate$1(I.invert(F.select(".line-p.above").attr("y1")),t.w),c=interpolate$1(I.invert(F.select(".line-p.below").attr("y1")),t.w);return t=>{i.p=l(cubicOut(B(t))),i.g=U(cubicOut(B(t))),i.w=CPTMath.pg2w(i.p,i.g),F.select(".line-p.above").attr("x1",g(i.p)).attr("x2",g(i.p)).attr("y1",I(a(Q(cubicIn)(t)))).attr("y2",I(1)),F.select(".line-p.below").attr("x1",g(i.p)).attr("x2",g(i.p)).attr("y1",I(c(Q(cubicIn)(t)))).attr("y2",I(0))}}).transition("new-2").duration(()=>Math.floor(a*(1-s))).ease(i).attr("data-animating-ease-time-2",1).tween("animating",(t,s,e)=>{const B=e[s],i=select(B),Q=interpolate$1(void 0!==B.p?B.p:t.p,t.p),U=interpolate$1(void 0!==B.g?B.g:this.getFunction(t.function).g,this.getFunction(t.function).g),a=interpolate$1(g.invert(i.select(".line-w.before").attr("x1")),0),c=interpolate$1(g.invert(i.select(".line-w.after").attr("x1")),1);return t=>{B.p=Q(cubicOut(F(t))),B.g=U(cubicOut(F(t))),B.w=CPTMath.pg2w(B.p,B.g),i.select(".line-w.before").attr("x1",g(a(l(cubicOut)(t)))).attr("x2",g(B.p)).attr("y1",I(B.w)).attr("y2",I(B.w)),i.select(".line-w.after").attr("x1",g(c(l(cubicOut)(t)))).attr("x2",g(B.p)).attr("y1",I(B.w)).attr("y2",I(B.w))}}).on("end",(t,s,e)=>{const B=e[s];B.removeAttribute("data-animating-ease-time-1"),B.removeAttribute("data-animating-ease-time-2"),t.new=!1,this.dispatchEvent(new CustomEvent("prospectable-response",{detail:{trial:this.trialCount,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,response:this.response},bubbles:!0}))})}const p=m.filter(t=>t.new&&t.paused);if(!p.empty()){const t=p.attr("data-animating-ease-time-1"),s=p.attr("data-animating-ease-time-2");p.transition().duration(this.drag?0:this.firstUpdate?2*a:a).ease(cubicOut).tween("paused",(e,B,i)=>{const F=i[B],Q=select(F),l=interpolate$1(void 0!==F.p?F.p:e.p,e.p),U=interpolate$1(void 0!==F.g?F.g:this.getFunction(e.function).g,this.getFunction(e.function).g),a=interpolate$1(1,e.w),c=interpolate$1(0,e.w),n=interpolate$1(e.p,0),r=interpolate$1(e.p,1);return e=>{F.p=l(e),F.g=U(e),F.w=CPTMath.pg2w(F.p,F.g),Q.select(".line-p.above").attr("x1",g(F.p)).attr("x2",g(F.p)).attr("y1",I(a(cubicIn(t)))).attr("y2",I(1)),Q.select(".line-p.below").attr("x1",g(F.p)).attr("x2",g(F.p)).attr("y1",I(c(cubicIn(t)))).attr("y2",I(0)),Q.select(".line-w.before").attr("x1",g(n(cubicOut(s)))).attr("x2",g(F.p)).attr("y1",I(F.w)).attr("y2",I(F.w)),Q.select(".line-w.after").attr("x1",g(r(cubicOut(s)))).attr("x2",g(F.p)).attr("y1",I(F.w)).attr("y2",I(F.w))}})}m.filter(t=>!t.new).transition().duration(this.drag?0:this.firstUpdate?2*a:a).ease(cubicOut).tween("non-animating",(t,s,e)=>{const B=e[s],i=select(B),F=interpolate$1(void 0!==B.p?B.p:t.p,t.p),Q=interpolate$1(void 0!==B.g?B.g:this.getFunction(t.function).g,this.getFunction(t.function).g);return t=>{B.p=F(t),B.g=Q(t),B.w=CPTMath.pg2w(B.p,B.g),i.select(".line-p.above").attr("x1",g(B.p)).attr("x2",g(B.p)).attr("y1",I(B.w)).attr("y2",I(1)),i.select(".line-p.below").attr("x1",g(B.p)).attr("x2",g(B.p)).attr("y1",I(B.w)).attr("y2",I(0)),i.select(".line-w.before").attr("x1",g(0)).attr("x2",g(B.p)).attr("y1",I(B.w)).attr("y2",I(B.w)),i.select(".line-w.after").attr("x1",g(1)).attr("x2",g(B.p)).attr("y1",I(B.w)).attr("y2",I(B.w))}}),R.exit().remove();const V=G.selectAll(".curve").data(this.functions,t=>t.name),Z=V.enter().append("g").classed("curve",!0).attr("clip-path","url(#clip-cpt-value)");Z.append("path").classed("path",!0),Z.append("path").classed("path touch",!0);const E=Z.merge(V);(this.firstUpdate||t.has("interactive"))&&(this.interactive?E.attr("tabindex",0).classed("interactive",!0).call(c).on("keydown",(t,s)=>{if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){let e=s.g;switch(t.key){case"ArrowUp":case"ArrowLeft":e+=t.shiftKey?CPTMath.g.STEP:CPTMath.g.JUMP;break;case"ArrowDown":case"ArrowRight":e-=t.shiftKey?CPTMath.g.STEP:CPTMath.g.JUMP}e=e<CPTMath.g.MIN?CPTMath.g.MIN:e>CPTMath.g.MAX?CPTMath.g.MAX:e,e!==s.g&&(s.g=e,"default"===s.name&&(this.g=s.g),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:this.get(s.name),bubbles:!0}))),t.preventDefault()}}):E.attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null)),E.select(".path").transition().duration(this.drag?0:this.firstUpdate?2*a:a).ease(cubicOut).attrTween("d",(t,s,e)=>{const B=e[s],i=interpolate$1(void 0!==B.g?B.g:t.g,t.g);return t=>{B.g=i(t);const s=range$1(g.range()[0],g.range()[1]+1,1).map(t=>({p:g.invert(t),w:CPTMath.pg2w(g.invert(t),B.g)}));return r(s)}}),E.select(".path.touch").transition().duration(this.drag?0:this.firstUpdate?2*a:a).ease(cubicOut).attrTween("d",(t,s,e)=>{const B=e[s],i=interpolate$1(void 0!==B.g?B.g:t.g,t.g);return t=>{B.g=i(t);const s=range$1(g.range()[0],g.range()[1]+1,1).map(t=>({p:g.invert(t),w:CPTMath.pg2w(g.invert(t),B.g)}));return r(s)}}),V.exit().remove();const N=G.selectAll(".point").data(this.probabilities.filter(t=>null!=t.p),t=>t.name),X=N.enter().append("g").classed("point",!0);X.append("circle").classed("circle touch",!0),X.append("text").classed("label",!0);const D=X.merge(N);D.select("text").text(t=>t.label),D.filter(s=>(this.firstUpdate||t.has("interactive"))&&this.interactive&&!s.trial).attr("tabindex",0).classed("interactive",!0).call(n).on("keydown",(t,s)=>{if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){let e=s.p;switch(t.key){case"ArrowUp":case"ArrowRight":e+=t.shiftKey?.01:.05;break;case"ArrowDown":case"ArrowLeft":e-=t.shiftKey?.01:.05}e=e<0?0:e>1?1:e,e!==s.p&&(s.p=e,"default"===s.name&&(this.p=s.p),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-probability-change",{detail:{name:s.name,p:s.p,w:s.w,label:s.label,g:this.getFunction(s.function).g},bubbles:!0}))),t.preventDefault()}}),D.filter(s=>(this.firstUpdate||t.has("interactive"))&&!this.interactive||s.trial).attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null),D.transition().duration(this.drag?0:this.firstUpdate?2*a:a).ease(cubicOut).attrTween("transform",(t,s,e)=>{const B=e[s],i=interpolate$1(void 0!==B.p?B.p:t.p,t.p),F=interpolate$1(void 0!==B.g?B.g:this.getFunction(t.function).g,this.getFunction(t.function).g);return t=>(B.p=i(t),B.g=F(t),`translate(\n            ${g(B.p)},\n            ${I(CPTMath.pg2w(B.p,B.g))}\n          )`)}),N.exit().remove(),this.drag=!1,this.firstUpdate=!1}}function orthographic(t,s){return{x:s.origin.x+s.scale*t.x,y:s.origin.y+s.scale*t.y}}function x(t){return t.x}function y(t){return t.y}function z(t){return t.z}function sort(t,s){const e=t.centroid.z,B=s.centroid.z;return e<B?-1:e>B?1:e>=B?0:NaN}function generator3D(t,s){let e=0,B=0,i=0,F={x:0,y:0},Q={x:0,y:0,z:0},l=1,U=x,a=y,g=z,I=0;function c(s){return t(s,{scale:l,origin:F,project:orthographic,row:I},{x:U,y:a,z:g},{x:e,y:B,z:i,rotateCenter:Q})}return c.origin=function(t){return arguments.length?(F=t,c):F},c.scale=function(t){return arguments.length?(l=t,c):l},c.rotateX=function(t){return arguments.length?(e=t,c):e},c.rotateY=function(t){return arguments.length?(B=t,c):B},c.rotateZ=function(t){return arguments.length?(i=t,c):i},c.rotationCenter=function(t){return arguments.length?(Q=t,c):Q},c.x=function(t){return arguments.length?(U="function"==typeof t?t:+t,c):U},c.y=function(t){return arguments.length?(a="function"==typeof t?t:+t,c):a},c.z=function(t){return arguments.length?(g="function"==typeof t?t:+t,c):g},c.rows=function(t){return arguments.length?(I="function"==typeof t?t:+t,c):I},c.draw=s,c.sort=sort,c}function ccw(t){const s=[...t,t[0]];let e=0;for(let B=0;B<t.length;B++){const t=B+1,i=s[B].rotated,F=s[t].rotated;e+=(F.x-i.x)*(F.y+i.y)}return e>0}function centroid(t){let s=0,e=0,B=0,i=t.length;for(let F=i-1;F>=0;F--){const i=t[F].rotated;s+=i.x,e+=i.y,B+=i.z}return{x:s/i,y:e/i,z:B/i}}function rotateRzRyRx(t,s){const e=s.rotateCenter;t.x-=e.x,t.y-=e.y,t.z-=e.z;const B=rotateX(rotateY(rotateZ(t,s.z),s.y),s.x);return B.x+=e.x,B.y+=e.y,B.z+=e.z,B}function rotateX(t,s){const e=Math.sin(s),B=Math.cos(s);return{x:t.x,y:t.y*B-t.z*e,z:t.y*e+t.z*B}}function rotateY(t,s){const e=Math.sin(s),B=Math.cos(s);return{x:t.z*e+t.x*B,y:t.y,z:t.z*B-t.x*e}}function rotateZ(t,s){const e=Math.sin(s),B=Math.cos(s);return{x:t.x*B-t.y*e,y:t.x*e+t.y*B,z:t.z}}function point(t,s,e,B){for(let i=t.length-1;i>=0;i--){const F=t[i];F.rotated=rotateRzRyRx({x:e.x(F),y:e.y(F),z:e.z(F)},B),F.centroid=F.rotated,F.projected=s.project(F.rotated,s)}return t}function points3D(){return generator3D(point,void 0)}function drawPlane(t){return`M${t[0].projected.x},${t[0].projected.y}L${t[1].projected.x},${t[1].projected.y}L${t[2].projected.x},${t[2].projected.y}L${t[3].projected.x},${t[3].projected.y}Z`}function gridPlane(t,s,e,B){const i=point(t,s,e,B),F=[],Q=s.row;let l=0;for(var U=i.length/Q-1;U>0;U--)for(var a=Q-1;a>0;a--){var g=a+U*Q,I=g-1,c=I-Q+1,n=c-1,r=[i[g],i[c],i[n],i[I]];r.plane="plane-"+l++,r.ccw=ccw(r),r.centroid=centroid(r),F.push(r)}return F}function gridPlanes3D(){return generator3D(gridPlane,drawPlane)}function drawLineStrip(t){const s=t[t.length-1];let e=`M${s.projected.x},${s.projected.y}`;for(var B=t.length-2;B>=0;B--){const s=t[B].projected;e+=`L${s.x},${s.y}`}return e}function lineStrip(t,s,e,B){for(let i=t.length-1;i>=0;i--){const F=t[i],Q=F.length/2,l=parseInt(Q);for(let t=F.length-1;t>=0;t--){const i=F[t];i.rotated=rotateRzRyRx({x:e.x(i),y:e.y(i),z:e.z(i)},B),i.projected=s.project(i.rotated,s)}F.centroid=l===Q?centroid([F[Q-1],F[Q]]):{x:F[l].rotated.x,y:F[l].rotated.y,z:F[l].rotated.z}}return t}function lineStrips3D(){return generator3D(lineStrip,drawLineStrip)}customElements.define("cpt-probability",CPTProbability);class CPTSpace extends(DecidablesMixinResizeable(ProspectableElement)){static get properties(){return{surface:{attribute:"surface",type:Boolean,reflect:!0},point:{attribute:"point",type:Boolean,reflect:!0},updateable:{attribute:"updateable",type:Boolean,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0}}}constructor(){super(),this.firstUpdate=!0,this.surface=!0,this.point=!0,this.updateable=!1,this.a=CPTMath.a.DEFAULT,this.l=CPTMath.l.DEFAULT,this.g=CPTMath.g.DEFAULT,this.xl=0,this.xw=20,this.pw=.5,this.xs=10,this.response=this.DEFAULT,this.range={a:{start:1e-4,stop:1,step:.05},l:{start:0,stop:10,step:.5},g:{start:0,stop:1,step:.05},uDiff:{start:-20,stop:20}},this.boundary=[],this.mapXY=[],this.mapXZ=[],this.mapYZ=[],this.rotationX=0,this.rotationY=0,this.mx=0,this.my=0,this.mouseX=0,this.mouseY=0,this.alignState()}alignState(){this.updateable&&(this.response=CPTMath.xal2v(this.xw,this.a,this.l)*CPTMath.pg2w(this.pw,this.g)+CPTMath.xal2v(this.xl,this.a,this.l)*(1-CPTMath.pg2w(this.pw,this.g))>CPTMath.xal2v(this.xs,this.a,this.l)?"gamble":"sure");const t=(t,s)=>{const e=CPTMath.pg2w(t,s);return Number.isNaN(e)?t:e},s=(s,e,B,i,F,Q,l)=>CPTMath.xal2v(s,F,Q)*t(B,l)+CPTMath.xal2v(e,F,Q)*(1-t(B,l))-CPTMath.xal2v(i,F,Q);this.boundary=range$1(this.range.l.start,this.range.l.stop+.01,this.range.l.step).flatMap(t=>range$1(this.range.g.start,this.range.g.stop+.01,this.range.g.step).map(e=>{let B=this.range.a.start,i=10,F=(B+i)/2;const Q=s(this.xw,this.xl,this.pw,this.xs,B,t,e),l=s(this.xw,this.xl,this.pw,this.xs,i,t,e);let U;return Q>0?F=-1/0:l<0?F=1/0:range$1(0,15,1).forEach(()=>{U=s(this.xw,this.xl,this.pw,this.xs,F,t,e),U<0?B=F:i=F,F=(B+i)/2}),{a:F,l:t,g:e}}));const e=t=>t?.a>=this.range.a.start&&t?.a<=this.range.a.stop;this.boundary=this.boundary.map((t,s,B)=>{if(e(t))return t;const i=range$1(this.range.g.start,this.range.g.stop+.01,this.range.g.step).length,F=range$1(this.range.l.start,this.range.l.stop+.01,this.range.l.step).length,Q=s%i===0?null:B[s-1],l=s%i===i-1?null:B[s+1],U=0===Math.trunc(s/i)?null:B[s-i],a=Math.trunc(s/i)===F-1?null:B[s+i],g=e(Q)?1:0,I=e(l)?1:0,c=e(U)?1:0,n=g+I+c+(e(a)?1:0);if(0===n||2===n&&g+I!==1||3===n||4===n)return t;const r={a:t.a<this.range.a.start?this.range.a.start:this.range.a.stop,g:t.g,l:t.l};let o;if(1===n)o=g?Q:I?l:c?U:a;else{const t=g?Q:l,s=c?U:a;o={a:(t.a+s.a)/2,g:(t.g+s.g)/2,l:(t.l+s.l)/2}}const d=(r.a-o.a)/(t.a-o.a);return r.g=o.g+(t.g-o.g)*d,r.l=o.l+(t.l-o.l)*d,r});const B=this.range.l.stop;this.mapXY=range$1(this.range.a.start,this.range.a.stop+.01,this.range.a.step).flatMap(t=>range$1(this.range.g.start,this.range.g.stop+.01,this.range.g.step).map(e=>{const i=s(this.xw,this.xl,this.pw,this.xs,t,B,e);return{a:t,l:B,g:e,uDiff:i}}));const i=this.range.g.start;this.mapXZ=range$1(this.range.a.start,this.range.a.stop+.01,this.range.a.step).flatMap(t=>range$1(this.range.l.start,this.range.l.stop+.01,this.range.l.step).map(e=>{const B=s(this.xw,this.xl,this.pw,this.xs,t,e,i);return{a:t,l:e,g:i,uDiff:B}}));const F=this.range.a.stop;this.mapYZ=range$1(this.range.g.start,this.range.g.stop+.01,this.range.g.step).flatMap(t=>range$1(this.range.l.start,this.range.l.stop+.01,this.range.l.step).map(e=>{const B=s(this.xw,this.xl,this.pw,this.xs,F,e,t);return{a:F,l:e,g:t,uDiff:B}}))}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;

          width: 28rem;
          height: 20rem;
        }

        .main {
          width: 100%;
          height: 100%;

          cursor: grab;
        }

        text {
          /* stylelint-disable property-no-vendor-prefix */
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;

          fill: var(---color-text);
        }

        .axis {
          stroke: var(---color-element-border);
          stroke-width: 1;
        }

        .title textPath {
          font-weight: 600;

          alignment-baseline: middle;
          text-anchor: middle;
        }

        .title tspan {
          alignment-baseline: middle;
        }

        .title .subscript {
          font-size: 66.667%;

          alignment-baseline: initial;
          baseline-shift: sub;
        }

        .tick {
          stroke: var(---color-element-border);
          stroke-width: 1;
        }

        .label textPath {
          font-size: 0.75rem;

          alignment-baseline: middle;
          text-anchor: end;
        }

        .label-x textPath {
          text-anchor: start;
        }

        .point {
          fill: var(---color-element-background);
          stroke: var(---color-element-emphasis);
          stroke-width: 1px;
          r: 6px;
        }

        .point.sure {
          fill: var(---color-better);
        }

        .point.gamble {
          fill: var(---color-worse);
        }

        .point.nr {
          fill: var(---color-nr);
        }

        .boundary {
          fill-opacity: 0.7;
          stroke-opacity: 1;
          stroke-width: 0.5px;
        }

        .map {
          stroke-width: 1px;
        }

        .legend .title {
          font-weight: 600;

          alignment-baseline: middle;
          text-anchor: middle;
        }

        .legend .tick text {
          font-size: 0.75rem;
          font-weight: 400;

          stroke: none;
        }
      `]}render(){return x$3`
    `}willUpdate(){this.alignState()}update(t){if(super.update(t),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const s=this.width,e=this.height,B=Math.min(s,e),i={top:3*this.rem,bottom:5*this.rem,left:2*this.rem,right:6*this.rem},F=B-(i.top+i.bottom),Q=B-(i.left+i.right),l=linear().domain([this.range.a.start,this.range.a.stop]).range([0,Q]),U=linear().domain([this.range.g.start,this.range.g.stop]).range([0,-F]),a=linear().domain([this.range.l.start,this.range.l.stop]).range([0,-F]),g=Color(this.getComputedStyleValue("---color-element-background")).hex(),I=Color(this.getComputedStyleValue("---color-better-dark")).hex(),c=Color(this.getComputedStyleValue("---color-better")).hex(),n=Color(this.getComputedStyleValue("---color-nr")).hex(),r=Color(this.getComputedStyleValue("---color-worse")).hex(),o=Color(this.getComputedStyleValue("---color-worse-dark")).hex(),d=diverging().domain([this.range.uDiff.start,0,this.range.uDiff.stop]).clamp(!0).interpolator(piecewise([I,c,n,r,o])),C=linear().domain([this.range.uDiff.start,this.range.uDiff.stop]).range([0,-e+4*this.rem]),b={x:i.left,y:B-i.bottom},u={x:l((this.range.a.start+this.range.a.stop)/2),y:U((this.range.g.start+this.range.g.stop)/2),z:a((this.range.l.start+this.range.l.stop)/2)},h=-.85*Math.PI/8,y=3*Math.PI/8,x=lineStrips3D().origin(b).scale(1).rotationCenter(u).rotateX(h+this.rotationX).rotateY(y+this.rotationY).rotateZ(0),A=points3D().origin(b).scale(1).rotationCenter(u).rotateX(h+this.rotationX).rotateY(y+this.rotationY).rotateZ(0),G=gridPlanes3D().origin(b).scale(1).rotationCenter(u).rotateX(h+this.rotationX).rotateY(y+this.rotationY).rotateZ(0),R=drag().on("start",t=>{this.mx=t.x,this.my=t.y}).on("drag",t=>{this.rotationY=(t.x-this.mx+this.mouseX)*(Math.PI/230),this.rotationX=(t.y-this.my+this.mouseY)*(Math.PI/230)*-1,this.requestUpdate()}).on("end",t=>{this.mouseX=t.x-this.mx+this.mouseX,this.mouseY=t.y-this.my+this.mouseY}),L=select(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),m=L.enter().append("svg").classed("main",!0),S=m.merge(L).attr("viewBox",`0 0 ${B} ${B}`).call(R),p=m.append("defs").append("linearGradient").attr("id","gradient-legend").attr("x1",0).attr("x2",0).attr("y1",1).attr("y2",0);p.append("stop").attr("offset","0%").attr("stop-color",I),p.append("stop").attr("offset","25%").attr("stop-color",c),p.append("stop").attr("offset","50%").attr("stop-color",n),p.append("stop").attr("offset","75%").attr("stop-color",r),p.append("stop").attr("offset","100%").attr("stop-color",o);const V=[[{title:'Alpha (<tspan class="math-var">Î±</tspan>)',id:"max",x:l.range()[1]},{id:"min",x:l.range()[0]}]],Z=[[{title:'Gamma (<tspan class="math-var">Î³</tspan>)',id:"max",y:U.range()[1]},{id:"min",y:U.range()[0]}]],E=[[{title:'Lambda (<tspan class="math-var">Î»</tspan>)',id:"max",z:a.range()[1]},{id:"min",z:a.range()[0]}]],N=S.selectAll(".axis-x").data(x.x(t=>t.x).y(()=>U.range()[0]).z(()=>a.range()[0])(V)),X=S.selectAll(".axis-y").data(x.x(()=>l.range()[0]).y(t=>t.y).z(()=>a.range()[1])(Z)),D=S.selectAll(".axis-z").data(x.x(()=>l.range()[0]).y(()=>U.range()[0]).z(t=>t.z)(E)),W=N.enter().append("path").attr("class","d3-3d axis axis-x"),H=X.enter().append("path").attr("class","d3-3d axis axis-y"),v=D.enter().append("path").attr("class","d3-3d axis axis-z"),w=W.merge(N).attr("d",x.draw),Y=H.merge(X).attr("d",x.draw),f=v.merge(D).attr("d",x.draw);w.exit().remove(),Y.exit().remove(),f.exit().remove();const J=S.selectAll(".title-path-x").data(x.x(t=>"min"===t.id?t.x-20*this.rem:t.x+20*this.rem).y(()=>U.range()[0]+1.75*this.rem).z(()=>a.range()[0]+1.75*this.rem)(V)),M=S.selectAll(".title-path-y").data(x.x(()=>l.range()[0]-1.75*this.rem).y(t=>"min"===t.id?t.y+20*this.rem:t.y-20*this.rem).z(()=>a.range()[1]-1.75*this.rem)(Z)),k=S.selectAll(".title-path-z").data(x.x(()=>l.range()[0]-1.75*this.rem).y(()=>U.range()[0]+1.75*this.rem).z(t=>"min"===t.id?t.z-20*this.rem:t.z+20*this.rem)(E)),T=S.selectAll(".title-x").data(V,t=>t[0].title),z=S.selectAll(".title-y").data(Z,t=>t[0].title),K=S.selectAll(".title-z").data(E,t=>t[0].title),O=J.enter().append("path").attr("class","d3-3d title-path title-path-x").attr("id","title-x"),$=M.enter().append("path").attr("class","d3-3d title-path title-path-y").attr("id","title-y"),P=k.enter().append("path").attr("class","d3-3d title-path title-path-z").attr("id","title-z"),j=T.enter().append("text").attr("class","d3-3d title title-x");j.append("textPath").attr("href","#title-x").attr("startOffset","50%");const _=z.enter().append("text").attr("class","d3-3d title title-y");_.append("textPath").attr("href","#title-y").attr("startOffset","50%");const q=K.enter().append("text").attr("class","d3-3d title title-z");q.append("textPath").attr("href","#title-z").attr("startOffset","50%");const tt=O.merge(J).attr("d",x.draw),st=$.merge(M).attr("d",x.draw),et=P.merge(k).attr("d",x.draw),Bt=j.merge(T).select("textPath").html(t=>t[0].title),it=_.merge(z).select("textPath").html(t=>t[0].title),Ft=q.merge(K).select("textPath").html(t=>t[0].title);tt.exit().remove(),st.exit().remove(),et.exit().remove(),Bt.exit().remove(),it.exit().remove(),Ft.exit().remove();const Qt=l.ticks(5).map(t=>[{id:"min",label:l.tickFormat()(t),x:l(t)},{id:"max",x:l(t)}]),lt=U.ticks(5).map(t=>[{id:"min",label:U.tickFormat()(t),y:U(t)},{id:"max",y:U(t)}]),Ut=a.ticks(5).map(t=>[{id:"max",label:a.tickFormat()(t),z:a(t)},{id:"min",z:a(t)}]),at=S.selectAll(".tick-x").data(x.x(t=>t.x).y(t=>"min"===t.id?U.range()[0]:U.range()[0]+.35*this.rem).z(t=>"min"===t.id?a.range()[0]:a.range()[0]+.35*this.rem)(Qt)),gt=S.selectAll(".tick-y").data(x.x(t=>"min"===t.id?l.range()[0]:l.range()[0]-.35*this.rem).y(t=>t.y).z(t=>"min"===t.id?a.range()[1]:a.range()[1]-.35*this.rem)(lt)),It=S.selectAll(".tick-z").data(x.x(t=>"min"===t.id?l.range()[0]:l.range()[0]-.35*this.rem).y(t=>"min"===t.id?U.range()[0]:U.range()[0]+.35*this.rem).z(t=>t.z)(Ut)),ct=at.enter().append("path").attr("class","d3-3d tick tick-x"),nt=gt.enter().append("path").attr("class","d3-3d tick tick-y"),rt=It.enter().append("path").attr("class","d3-3d tick tick-z"),ot=ct.merge(at).attr("d",x.draw),dt=nt.merge(gt).attr("d",x.draw),Ct=rt.merge(It).attr("d",x.draw);ot.exit().remove(),dt.exit().remove(),Ct.exit().remove();const bt=S.selectAll(".label-path-x").data(x.x(t=>t.x).y(t=>"min"===t.id?U.range()[0]+4*this.rem:U.range()[0]+.5*this.rem).z(t=>"min"===t.id?a.range()[0]+4*this.rem:a.range()[0]+.5*this.rem)(Qt),t=>t[0].label),ut=S.selectAll(".label-path-y").data(x.x(t=>"min"===t.id?l.range()[0]-.5*this.rem:l.range()[0]-4*this.rem).y(t=>t.y).z(t=>"min"===t.id?a.range()[1]-.5*this.rem:a.range()[1]-4*this.rem)(lt),t=>t[0].label),ht=S.selectAll(".label-path-z").data(x.x(t=>"min"===t.id?l.range()[0]-4*this.rem:l.range()[0]-.5*this.rem).y(t=>"min"===t.id?U.range()[0]+4*this.rem:U.range()[0]+.5*this.rem).z(t=>t.z)(Ut),t=>t[0].label),yt=S.selectAll(".label-x").data(Qt,t=>t[0].label),xt=S.selectAll(".label-y").data(lt,t=>t[0].label),At=S.selectAll(".label-z").data(Ut,t=>t[0].label),Gt=bt.enter().append("path").attr("class","d3-3d label-path label-path-x").attr("id",(t,s)=>`label-x-${s}`),Rt=ut.enter().append("path").attr("class","d3-3d label-path label-path-y").attr("id",(t,s)=>`label-y-${s}`),Lt=ht.enter().append("path").attr("class","d3-3d label-path label-path-z").attr("id",(t,s)=>`label-z-${s}`),mt=yt.enter().append("text").attr("class","d3-3d label label-x");mt.append("textPath").attr("href",(t,s)=>`#label-x-${s}`).attr("startOffset","0%");const St=xt.enter().append("text").attr("class","d3-3d label label-y");St.append("textPath").attr("href",(t,s)=>`#label-y-${s}`).attr("startOffset","100%");const pt=At.enter().append("text").attr("class","d3-3d label label-z");pt.append("textPath").attr("href",(t,s)=>`#label-z-${s}`).attr("startOffset","100%");const Vt=Gt.merge(bt).attr("d",x.draw),Zt=Rt.merge(ut).attr("d",x.draw),Et=Lt.merge(ht).attr("d",x.draw),Nt=mt.merge(yt).select("textPath").text(t=>t[0].label),Xt=St.merge(xt).select("textPath").text(t=>t[0].label),Dt=pt.merge(At).select("textPath").text(t=>t[0].label);Vt.exit().remove(),Zt.exit().remove(),Et.exit().remove(),Nt.exit().remove(),Xt.exit().remove(),Dt.exit().remove();const Wt=S.selectAll(".point").data(A.x(t=>l(t.a)).y(t=>U(t.g)).z(t=>a(t.l))(this.point?[{a:this.a,g:this.g,l:this.l,response:this.response}]:[]));function Ht(t,s){return{x:s.x-t.x,y:s.y-t.y,z:s.z-t.z}}function vt(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)}function wt(t,s,e){return function(t,s){return{x:t.y*s.z-t.z*s.y,y:t.z*s.x-t.x*s.z,z:t.x*s.y-t.y*s.x}}(Ht(t,s),Ht(t,e))}function Yt(t,s){return function(t,s){return t.x*s.x+t.y*s.y+t.z*s.z}(t,s)/(vt(t)*vt(s))}Wt.enter().append("circle").attr("class","d3-3d point").merge(Wt).attr("class",t=>`d3-3d point ${t.response}`).attr("cx",t=>t.projected.x).attr("cy",t=>t.projected.y),Wt.exit().remove();const ft={x:-.5,y:1,z:-1},Jt=S.selectAll(".boundary").data(this.surface?G.rows(range$1(this.range.g.start,this.range.g.stop+.01,this.range.g.step).length).x(t=>l(t.a)).y(t=>U(t.g)).z(t=>a(t.l))(this.boundary).filter(t=>t[0].a>=this.range.a.start&&t[0].a<=this.range.a.stop&&t[1].a>=this.range.a.start&&t[1].a<=this.range.a.stop&&t[2].a>=this.range.a.start&&t[2].a<=this.range.a.stop&&t[3].a>=this.range.a.start&&t[3].a<=this.range.a.stop):[]);Jt.enter().append("path").attr("class","d3-3d boundary").merge(Jt).attr("d",G.draw).each(t=>{const s=t.ccw?wt(t[0].rotated,t[1].rotated,t[2].rotated):wt(t[2].rotated,t[1].rotated,t[0].rotated);t.ratio=Yt(s,ft)-.5,t.color=color$1(g).brighter(t.ratio)}).attr("fill",t=>t.color).attr("stroke",t=>t.color),Jt.exit().remove();const Mt=S.selectAll(".map-xy").data(G.rows(range$1(this.range.g.start,this.range.g.stop+.01,this.range.g.step).length).x(t=>l(t.a)).y(t=>U(t.g)).z(t=>a(t.l))(this.mapXY)),kt=S.selectAll(".map-xz").data(G.rows(range$1(this.range.l.start,this.range.l.stop+.01,this.range.l.step).length).x(t=>l(t.a)).y(t=>U(t.g)).z(t=>a(t.l))(this.mapXZ)),Tt=S.selectAll(".map-yz").data(G.rows(range$1(this.range.l.start,this.range.l.stop+.01,this.range.l.step).length).x(t=>l(t.a)).y(t=>U(t.g)).z(t=>a(t.l))(this.mapYZ)),zt=Mt.enter().append("path").attr("class","d3-3d map map-xy"),Kt=kt.enter().append("path").attr("class","d3-3d map map-xz"),Ot=Tt.enter().append("path").attr("class","d3-3d map map-yz");zt.merge(Mt).attr("d",G.draw).each(t=>{const s=t.ccw?wt(t[0].rotated,t[1].rotated,t[2].rotated):wt(t[2].rotated,t[1].rotated,t[0].rotated);t.ratio=Yt(s,ft)-.5,t.color=color$1(d(t[0].uDiff)).brighter(t.ratio)}).attr("fill",t=>t.color).attr("stroke",t=>t.color),Kt.merge(kt).attr("d",G.draw).each(t=>{const s=t.ccw?wt(t[0].rotated,t[1].rotated,t[2].rotated):wt(t[2].rotated,t[1].rotated,t[0].rotated);t.ratio=Yt(s,ft)-.5,t.color=color$1(d(t[0].uDiff)).brighter(t.ratio)}).attr("fill",t=>t.color).attr("stroke",t=>t.color),Ot.merge(Tt).attr("d",G.draw).each(t=>{const s=t.ccw?wt(t[0].rotated,t[1].rotated,t[2].rotated):wt(t[2].rotated,t[1].rotated,t[0].rotated);t.ratio=Yt(s,ft)-.5,t.color=color$1(d(t[0].uDiff)).brighter(t.ratio)}).attr("fill",t=>t.color).attr("stroke",t=>t.color),Mt.exit().remove(),kt.exit().remove(),Tt.exit().remove(),select(this.renderRoot).selectAll(".d3-3d").sort(A.sort);const $t=S.selectAll(".legend").data([{x:B+2*this.rem,y:B-2*this.rem,rem:this.rem}]),Pt=$t.enter().append("g").attr("class","legend"),jt=Pt.merge($t).attr("transform",t=>`translate(${t.x} ${t.y})`);$t.exit().remove(),Pt.append("g").attr("class","axis axis-legend"),jt.select(".axis-legend").call(axisLeft(C).ticks(7)).attr("font-size",null).attr("font-family",null),Pt.append("text").attr("class","title title-legend").html('Difference in Utility (<tspan class="math-var">U<tspan class="subscript">gamble</tspan></tspan> â <tspan class="math-var">U<tspan class="subscript">sure</tspan></tspan>)'),jt.select(".title-legend").attr("transform",`translate(${2.5*-this.rem},${(C(this.range.uDiff.start)+C(this.range.uDiff.stop))/2})rotate(-90)`),Pt.append("rect").attr("class","bar bar-legend").attr("fill",'url("#gradient-legend")'),jt.select(".bar-legend").attr("x",0).attr("y",C(this.range.uDiff.stop)).attr("width",this.rem).attr("height",C(this.range.uDiff.start)-C(this.range.uDiff.stop)),this.firstUpdate=!1}}customElements.define("cpt-space",CPTSpace);class CPTValue extends(DecidablesMixinResizeable(ProspectableElement)){static get properties(){return{x:{attribute:"value",type:Number,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},label:{attribute:"label",type:String,reflect:!0},v:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.firstUpdate=!0,this.drag=!1,this.a=CPTMath.a.DEFAULT,this.l=CPTMath.l.DEFAULT,this.x=null,this.label="",this.function="default",this.functions=[{name:"default",a:this.a,l:this.l}],this.values=[{name:"default",x:this.x,label:this.label,function:this.function}],this.xl=null,this.xw=null,this.pw=null,this.xs=null,this.trialCount=null,this.response=null,this.alignState()}alignState(){this.functions[0].a=this.a,this.functions[0].l=this.l,this.values[0].x=this.x,this.values[0].label=this.label,this.values[0].function=this.function,this.values.forEach(t=>{const s=this.functions.find(s=>s.name===t.function);t.v=CPTMath.xal2v(t.x,s.a,s.l)}),this.v=this.values[0].v}trial(t,s,e,B,i,F){this.trialCount&&this.removeValue(`${this.trialCount}-w`),this.trialCount&&this.removeValue(`${this.trialCount}-s`),this.xl=t,this.xw=s,this.pw=e,this.xs=B,this.trialCount=i,this.response=F,this.setValue(this.xw,`${this.trialCount}-w`,"g","default",!0),this.setValue(this.xs,`${this.trialCount}-s`,"s","default",!0)}pauseTrial(){const t=select(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]");t.interrupt("new-1"),t.interrupt("new-2"),t.datum(t=>(t.paused=!0,t))}resumeTrial(){select(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]").datum(t=>(t.paused=!1,t)),this.requestUpdate()}clearFunctions(){this.functions.splice(1),this.requestUpdate()}clearValues(){this.values.splice(1),this.requestUpdate()}clear(){this.clearFunctions(),this.clearValues()}removeFunction(t){this.functions=this.functions.filter(s=>s.name!==t),this.requestUpdate()}removeValue(t){this.values=this.values.filter(s=>s.name!==t),this.requestUpdate()}remove(t){this.removeFunction(t),this.removeValue(t)}getFunction(t="default"){return this.functions.find(s=>s.name===t)}getValue(t="default"){return this.values.find(s=>s.name===t)}get(t="default"){return{...this.getFunction(t),...this.getValue(t)}}setFunction(t,s,e="default"){"default"===e&&(this.a=t,this.l=s);const B=this.functions.find(t=>t.name===e);void 0===B?this.functions.push({name:e,a:t,l:s}):(B.a=t,B.l=s),this.requestUpdate()}setValue(t,s="default",e="",B=s,i=!1){"default"===s&&(this.x=t,this.label=e);const F=this.values.find(t=>t.name===s);void 0===F?this.values.push({name:s,x:t,label:e,function:B,trial:i,new:i}):(F.x=t,F.label=e,F.function=B),this.requestUpdate()}set(t,s,e,B="default",i="",F=B){this.setFunction(s,e,F),this.setValue(t,B,i,F)}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;

          width: 20rem;
          height: 20rem;
        }

        .main {
          width: 100%;
          height: 100%;
        }

        text {
          /* stylelint-disable property-no-vendor-prefix */
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
        }

        .curve-p.interactive,
        .curve-n.interactive {
          cursor: nwse-resize;

          filter: url("#shadow-2");
          outline: none;
        }

        .curve-p.interactive:hover,
        .curve-n.interactive:hover {
          filter: url("#shadow-4");

          /* HACK: This gets Safari to correctly apply the filter! */
          /* https://github.com/emilbjorklund/svg-weirdness/issues/27 */
          transform: translateX(0);
        }

        .curve-p.interactive:active,
        .curve-n.interactive:active {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          transform: translateY(0);
        }

        :host(.keyboard) .curve-p.interactive:focus,
        :host(.keyboard) .curve-n.interactive:focus {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          transform: translateZ(0);
        }

        .point.interactive {
          cursor: nesw-resize;

          filter: url("#shadow-2");
          outline: none;

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #000000;
          stroke-opacity: 0;
          stroke-width: 0;
        }

        .point.interactive:hover {
          filter: url("#shadow-4");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #ff0000;
        }

        .point.interactive:active {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #00ff00;
        }

        :host(.keyboard) .point.interactive:focus {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          stroke: #0000ff;
        }

        .background {
          fill: var(---color-element-background);
          stroke: var(---color-element-border);
          stroke-width: 1;
          shape-rendering: crispEdges;
        }

        .title-x,
        .title-y {
          font-weight: 600;

          fill: currentColor;
        }

        .tick {
          font-size: 0.75rem;
        }

        .scale-x path,
        .scale-x line,
        .scale-y path,
        .scale-y line {
          stroke: var(---color-element-border);
        }

        .axis-x,
        .axis-y {
          stroke: var(---color-element-border);
          shape-rendering: crispEdges;
        }

        .diagonal {
          stroke: var(---color-element-border);
          stroke-dasharray: 4;
          stroke-width: 1;
        }

        .curve-p,
        .curve-n {
          fill: none;
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .line-x,
        .line-v {
          fill: none;
          stroke-width: 2;
        }

        .line-x {
          stroke: var(---color-x);
        }

        .line-v {
          stroke: var(---color-v);
        }

        .point .circle {
          fill: var(---color-element-emphasis);

          r: 6px;
        }

        .point .label {
          font-size: 0.75rem;

          dominant-baseline: middle;
          text-anchor: middle;

          fill: var(---color-text-inverse);
        }

        /* Make larger targets for touch users */
        .interactive .touch {
          stroke: #000000;
          stroke-opacity: 0;
        }

        @media (pointer: coarse) {
          .interactive .touch {
            stroke-linecap: round;
            stroke-width: 12;
          }
        }
      `]}render(){return x$3``}willUpdate(){this.alignState()}update(t){if(super.update(t),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const s=this.width,e=this.height,B=Math.min(s,e),i=2*this.rem,F=3*this.rem,Q=3*this.rem,l=B-(i+F),U=B-(Q+2*this.rem),a=parseInt(this.getComputedStyleValue("---transition-duration"),10),g=20,I=linear().domain([-20,g]).range([0,U]);this.xScale=I;const c=linear().domain([g,-20]).range([0,l]);this.yScale=c;const n=drag().subject((t,s)=>({x:t.x,y:this.yScale(CPTMath.xal2v(this.xScale.invert(t.x),s.a,s.l))})).on("start",t=>{select(t.currentTarget).classed("dragging",!0)}).on("drag",(t,s)=>{this.drag=!0;const e=this.xScale.invert(t.x),B=this.yScale.invert(t.y),i=CPTMath.xlv2a(e,s.l,B);s.a=Number.isNaN(i)||i<CPTMath.a.MIN||i>CPTMath.a.MAX||e<0||B<0?e>B?CPTMath.a.MIN:CPTMath.a.MAX:i,"default"===s.name&&(this.a=s.a),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:this.get(s.name),bubbles:!0}))}).on("end",t=>{select(t.currentTarget).classed("dragging",!1)}),r=drag().subject((t,s)=>({x:t.x,y:this.yScale(CPTMath.xal2v(this.xScale.invert(t.x),s.a,s.l))})).on("start",t=>{select(t.currentTarget).classed("dragging",!0)}).on("drag",(t,s)=>{this.drag=!0;const e=this.xScale.invert(t.x),B=this.yScale.invert(t.y),i=CPTMath.xav2l(e,s.a,B);s.l=Number.isNaN(i)||i<CPTMath.l.MIN||i>CPTMath.l.MAX||e>0||B>0?e>B?CPTMath.l.MAX:CPTMath.l.MIN:i,"default"===s.name&&(this.l=s.l),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:this.get(s.name),bubbles:!0}))}).on("end",t=>{select(t.currentTarget).classed("dragging",!1)}),o=drag().subject((t,s)=>({x:this.xScale(s.x),y:this.yScale(s.v)})).on("start",t=>{select(t.currentTarget).classed("dragging",!0)}).on("drag",(t,s)=>{this.drag=!0;const e=this.xScale.invert(t.x);s.x=e<-20?-20:e>g?g:e,"default"===s.name&&(this.x=s.x),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:{name:s.name,x:s.x,v:s.v,label:s.label,a:this.getFunction(s.function).a,l:this.getFunction(s.function).l},bubbles:!0}))}).on("end",t=>{select(t.currentTarget).classed("dragging",!1)}),d=shapeLine().x(t=>I(t.x)).y(t=>c(t.v)),C=select(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),b=C.enter().append("svg").classed("main",!0).each((t,s,e)=>{B$1(ProspectableElement.svgFilters,e[s])}),u=b.merge(C).attr("viewBox",`0 0 ${B} ${B}`),h=b.append("g").classed("plot",!0),y=u.select(".plot").attr("transform",`translate(${Q}, ${i})`);h.append("clipPath").attr("id","clip-cpt-value").append("rect"),y.select("clipPath rect").attr("height",l+1).attr("width",U+1);const x=h.append("g").classed("underlayer",!0),A=y.select(".underlayer");x.append("rect").classed("background",!0),A.select(".background").attr("height",l).attr("width",U),x.append("g").classed("scale-x",!0);A.select(".scale-x").attr("transform",`translate(0, ${c(-20)})`).transition().duration(2*a).ease(cubicOut).call(axisBottom(I)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null),x.append("line").classed("axis-x",!0),A.select(".axis-x").transition().duration(a).ease(cubicOut).attr("x1",I(-20)).attr("x2",I(g)).attr("y1",c(0)).attr("y2",c(0));const G=x.append("text").classed("title-x",!0).attr("text-anchor","middle");G.append("tspan").classed("name",!0).text("Objective Value ("),G.append("tspan").classed("math-var x",!0).text("x"),G.append("tspan").classed("name",!0).text(")"),A.select(".title-x").attr("transform",`translate(${U/2}, ${l+2.25*this.rem})`),x.append("g").classed("scale-y",!0);A.select(".scale-y").transition().duration(2*a).ease(cubicOut).call(axisLeft(c)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null),x.append("line").classed("axis-y",!0),A.select(".axis-y").transition().duration(a).ease(cubicOut).attr("x1",I(0)).attr("x2",I(0)).attr("y1",c(g)).attr("y2",c(-20));const R=x.append("text").classed("title-y",!0).attr("text-anchor","middle");R.append("tspan").classed("name",!0).text("Subjective Value ("),R.append("tspan").classed("math-var v",!0).text("v"),R.append("tspan").classed("name",!0).text(")"),A.select(".title-y").attr("transform",`translate(${-2*this.rem}, ${l/2})rotate(-90)`),x.append("line").classed("diagonal",!0),A.select(".diagonal").transition().duration(2*a).ease(cubicOut).attr("x1",I(-20)).attr("y1",c(-20)).attr("x2",I(g)).attr("y2",c(g)),h.append("g").classed("content",!0);const L=y.select(".content"),m=L.selectAll(".lines").data(this.values.filter(t=>null!=t.x),t=>t.name),S=m.enter().append("g").classed("lines",!0);S.each((t,s,e)=>{const B=select(e[s]);B.append("line").classed("line-x above",!0),B.append("line").classed("line-x below",!0),B.append("line").classed("line-v before",!0),B.append("line").classed("line-v after",!0)}),S.filter(t=>t.new).attr("data-animating-ease-time-1",0).attr("data-animating-ease-time-2",0).each((t,s,e)=>{const B=select(e[s]);B.select(".line-x.above").attr("x1",I(t.x)).attr("x2",I(t.x)).attr("y1",c(g)).attr("y2",c(g)),B.select(".line-x.below").attr("x1",I(t.x)).attr("x2",I(t.x)).attr("y1",c(-20)).attr("y2",c(-20)),B.select(".line-v.before").attr("x1",I(t.x)).attr("x2",I(t.x)).attr("y1",c(t.v)).attr("y2",c(t.v)),B.select(".line-v.after").attr("x1",I(t.x)).attr("x2",I(t.x)).attr("y1",c(t.v)).attr("y2",c(t.v))});const p=S.merge(m),V=p.filter(t=>t.new&&!t.paused);if(!V.empty()){const t=V.attr("data-animating-ease-time-1"),s=V.attr("data-animating-ease-time-2"),e=s=>linear().domain([0,1]).range([t,1])(s),B=s=>linear().range([0,1]).domain([t,1])(s),i=t=>linear().domain([0,1]).range([s,1])(t),F=t=>linear().range([0,1]).domain([s,1])(t),Q=s=>e=>linear().domain([s(t),1]).range([0,1])(s(e)),l=t=>e=>linear().domain([t(s),1]).range([0,1])(t(e));V.transition("new-1").duration(()=>Math.floor(a*(1-t))).ease(e).attr("data-animating-ease-time-1",1).tween("animating",(t,s,e)=>{const i=e[s],F=select(i),l=interpolate$1(void 0!==i.x?i.x:t.x,t.x),U=interpolate$1(void 0!==i.a?i.a:this.getFunction(t.function).a,this.getFunction(t.function).a),a=interpolate$1(void 0!==i.l?i.l:this.getFunction(t.function).l,this.getFunction(t.function).l),n=interpolate$1(c.invert(F.select(".line-x.above").attr("y1")),t.v),r=interpolate$1(c.invert(F.select(".line-x.below").attr("y1")),t.v);return t=>{i.x=l(cubicOut(B(t))),i.a=U(cubicOut(B(t))),i.l=a(cubicOut(B(t))),i.v=CPTMath.xal2v(i.x,i.a,i.l),F.select(".line-x.above").attr("x1",I(i.x)).attr("x2",I(i.x)).attr("y1",c(n(Q(cubicIn)(t)))).attr("y2",c(g)),F.select(".line-x.below").attr("x1",I(i.x)).attr("x2",I(i.x)).attr("y1",c(r(Q(cubicIn)(t)))).attr("y2",c(-20))}}).transition("new-2").duration(()=>Math.floor(a*(1-s))).ease(i).attr("data-animating-ease-time-2",1).tween("animating",(t,s,e)=>{const B=e[s],i=select(B),Q=interpolate$1(void 0!==B.x?B.x:t.x,t.x),U=interpolate$1(void 0!==B.a?B.a:this.getFunction(t.function).a,this.getFunction(t.function).a),a=interpolate$1(void 0!==B.l?B.l:this.getFunction(t.function).l,this.getFunction(t.function).l),n=interpolate$1(I.invert(i.select(".line-v.before").attr("x1")),-20),r=interpolate$1(I.invert(i.select(".line-v.after").attr("x1")),g);return t=>{B.x=Q(cubicOut(F(t))),B.a=U(cubicOut(F(t))),B.l=a(cubicOut(F(t))),B.v=CPTMath.xal2v(B.x,B.a,B.l),i.select(".line-v.before").attr("x1",I(n(l(cubicOut)(t)))).attr("x2",I(B.x)).attr("y1",c(B.v)).attr("y2",c(B.v)),i.select(".line-v.after").attr("x1",I(r(l(cubicOut)(t)))).attr("x2",I(B.x)).attr("y1",c(B.v)).attr("y2",c(B.v))}}).on("end",(t,s,e)=>{const B=e[s];B.removeAttribute("data-animating-ease-time-1"),B.removeAttribute("data-animating-ease-time-2"),t.new=!1,this.dispatchEvent(new CustomEvent("prospectable-response",{detail:{trial:this.trialCount,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,response:this.response},bubbles:!0}))})}const Z=p.filter(t=>t.new&&t.paused);if(!Z.empty()){const t=Z.attr("data-animating-ease-time-1"),s=Z.attr("data-animating-ease-time-2");Z.transition().duration(this.drag?0:this.firstUpdate?2*a:a).ease(cubicOut).tween("paused",(e,B,i)=>{const F=i[B],Q=select(F),l=interpolate$1(void 0!==F.x?F.x:e.x,e.x),U=interpolate$1(void 0!==F.a?F.a:this.getFunction(e.function).a,this.getFunction(e.function).a),a=interpolate$1(void 0!==F.l?F.l:this.getFunction(e.function).l,this.getFunction(e.function).l),n=interpolate$1(g,e.v),r=interpolate$1(-20,e.v),o=interpolate$1(e.x,-20),d=interpolate$1(e.x,g);return e=>{F.x=l(e),F.a=U(e),F.l=a(e),F.v=CPTMath.xal2v(F.x,F.a,F.l),Q.select(".line-x.above").attr("x1",I(F.x)).attr("x2",I(F.x)).attr("y1",c(n(cubicIn(t)))).attr("y2",c(g)),Q.select(".line-x.below").attr("x1",I(F.x)).attr("x2",I(F.x)).attr("y1",c(r(cubicIn(t)))).attr("y2",c(-20)),Q.select(".line-v.before").attr("x1",I(o(cubicOut(s)))).attr("x2",I(F.x)).attr("y1",c(F.v)).attr("y2",c(F.v)),Q.select(".line-v.after").attr("x1",I(d(cubicOut(s)))).attr("x2",I(F.x)).attr("y1",c(F.v)).attr("y2",c(F.v))}})}p.filter(t=>!t.new).transition().duration(this.drag?0:this.firstUpdate?2*a:a).ease(cubicOut).tween("non-animating",(t,s,e)=>{const B=e[s],i=select(B),F=interpolate$1(void 0!==B.x?B.x:t.x,t.x),Q=interpolate$1(void 0!==B.a?B.a:this.getFunction(t.function).a,this.getFunction(t.function).a),l=interpolate$1(void 0!==B.l?B.l:this.getFunction(t.function).l,this.getFunction(t.function).l);return t=>{B.x=F(t),B.a=Q(t),B.l=l(t),B.v=CPTMath.xal2v(B.x,B.a,B.l),i.select(".line-x.above").attr("x1",I(B.x)).attr("x2",I(B.x)).attr("y1",c(B.v)).attr("y2",c(g)),i.select(".line-x.below").attr("x1",I(B.x)).attr("x2",I(B.x)).attr("y1",c(B.v)).attr("y2",c(-20)),i.select(".line-v.before").attr("x1",I(-20)).attr("x2",I(B.x)).attr("y1",c(B.v)).attr("y2",c(B.v)),i.select(".line-v.after").attr("x1",I(g)).attr("x2",I(B.x)).attr("y1",c(B.v)).attr("y2",c(B.v))}}),m.exit().remove();const E=L.selectAll(".curve-p").data(this.functions,t=>t.name),N=E.enter().append("g").classed("curve-p",!0).attr("clip-path","url(#clip-cpt-value)");N.append("path").classed("path-p",!0),N.append("path").classed("path-p touch",!0);const X=N.merge(E);(this.firstUpdate||t.has("interactive"))&&(this.interactive?X.attr("tabindex",0).classed("interactive",!0).call(n).on("keydown",(t,s)=>{if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){let e=s.a;switch(t.key){case"ArrowUp":case"ArrowLeft":e+=t.shiftKey?CPTMath.a.STEP:CPTMath.a.JUMP;break;case"ArrowDown":case"ArrowRight":e-=t.shiftKey?CPTMath.a.STEP:CPTMath.a.JUMP}e=e<CPTMath.a.MIN?CPTMath.a.MIN:e>CPTMath.a.MAX?CPTMath.a.MAX:e,e!==s.a&&(s.a=e,"default"===s.name&&(this.a=s.a),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:this.get(s.name),bubbles:!0}))),t.preventDefault()}}):X.attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null)),X.select(".path-p").transition().duration(this.drag?0:this.firstUpdate?2*a:a).ease(cubicOut).attrTween("d",(t,s,e)=>{const B=e[s],i=interpolate$1(void 0!==B.a?B.a:t.a,t.a),F=interpolate$1(void 0!==B.l?B.l:t.l,t.l);return t=>{B.a=i(t),B.l=F(t);const s=range$1(I(0),I.range()[1]+1,1).map(t=>({x:I.invert(t),v:CPTMath.xal2v(I.invert(t),B.a,B.l)}));return d(s)}}),X.select(".path-p.touch").transition().duration(this.drag?0:this.firstUpdate?2*a:a).ease(cubicOut).attrTween("d",(t,s,e)=>{const B=e[s],i=interpolate$1(void 0!==B.a?B.a:t.a,t.a),F=interpolate$1(void 0!==B.l?B.l:t.l,t.l);return t=>{B.a=i(t),B.l=F(t);const s=range$1(I(0),I.range()[1]+1,1).map(t=>({x:I.invert(t),v:CPTMath.xal2v(I.invert(t),B.a,B.l)}));return d(s)}}),E.exit().remove();const D=L.selectAll(".curve-n").data(this.functions,t=>t.name),W=D.enter().append("g").classed("curve-n",!0).attr("clip-path","url(#clip-cpt-value)");W.append("path").classed("path-n",!0),W.append("path").classed("path-n touch",!0);const H=W.merge(D);(this.firstUpdate||t.has("interactive"))&&(this.interactive?H.attr("tabindex",0).classed("interactive",!0).call(r).on("keydown",(t,s)=>{if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){let e=s.l;switch(t.key){case"ArrowUp":case"ArrowLeft":e-=t.shiftKey?CPTMath.l.STEP:CPTMath.l.JUMP;break;case"ArrowDown":case"ArrowRight":e+=t.shiftKey?CPTMath.l.STEP:CPTMath.l.JUMP}e=e<CPTMath.l.MIN?CPTMath.l.MIN:e>CPTMath.l.MAX?CPTMath.l.MAX:e,e!==s.l&&(s.l=e,"default"===s.name&&(this.l=s.l),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:this.get(s.name),bubbles:!0}))),t.preventDefault()}}):H.attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null)),H.select(".path-n").transition().duration(this.drag?0:this.firstUpdate?2*a:a).ease(cubicOut).attrTween("d",(t,s,e)=>{const B=e[s],i=interpolate$1(void 0!==B.a?B.a:t.a,t.a),F=interpolate$1(void 0!==B.l?B.l:t.l,t.l);return t=>{B.a=i(t),B.l=F(t);const s=range$1(I.range()[0],I(0)+1,1).map(t=>({x:I.invert(t),v:CPTMath.xal2v(I.invert(t),B.a,B.l)}));return d(s)}}),H.select(".path-n.touch").transition().duration(this.drag?0:this.firstUpdate?2*a:a).ease(cubicOut).attrTween("d",(t,s,e)=>{const B=e[s],i=interpolate$1(void 0!==B.a?B.a:t.a,t.a),F=interpolate$1(void 0!==B.l?B.l:t.l,t.l);return t=>{B.a=i(t),B.l=F(t);const s=range$1(I.range()[0],I(0)+1,1).map(t=>({x:I.invert(t),v:CPTMath.xal2v(I.invert(t),B.a,B.l)}));return d(s)}}),D.exit().remove();const v=L.selectAll(".point").data(this.values.filter(t=>null!=t.x),t=>t.name),w=v.enter().append("g").classed("point",!0);w.append("circle").classed("circle touch",!0),w.append("text").classed("label",!0);const Y=w.merge(v);Y.select("text").text(t=>t.label),Y.filter(s=>(this.firstUpdate||t.has("interactive"))&&this.interactive&&!s.trial).attr("tabindex",0).classed("interactive",!0).call(o).on("keydown",(t,s)=>{if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){let e=s.x;switch(t.key){case"ArrowUp":case"ArrowRight":e+=t.shiftKey?.2:1;break;case"ArrowDown":case"ArrowLeft":e-=t.shiftKey?.2:1}e=e<-20?-20:e>g?g:e,e!==s.x&&(s.x=e,"default"===s.name&&(this.x=s.x),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("cpt-value-change",{detail:{name:s.name,x:s.x,v:s.v,label:s.label,a:this.getFunction(s.function).a,l:this.getFunction(s.function).l},bubbles:!0}))),t.preventDefault()}}),Y.filter(s=>(this.firstUpdate||t.has("interactive"))&&!this.interactive||s.trial).attr("tabindex",null).classed("interactive",!1).on("drag",null).on("keydown",null),Y.transition().duration(this.drag?0:this.firstUpdate?2*a:a).ease(cubicOut).attrTween("transform",(t,s,e)=>{const B=e[s],i=interpolate$1(void 0!==B.x?B.x:t.x,t.x),F=interpolate$1(void 0!==B.a?B.a:this.getFunction(t.function).a,this.getFunction(t.function).a),Q=interpolate$1(void 0!==B.l?B.l:this.getFunction(t.function).l,this.getFunction(t.function).l);return t=>(B.x=i(t),B.a=F(t),B.l=Q(t),`translate(\n            ${I(B.x)},\n            ${c(CPTMath.xal2v(B.x,B.a,B.l))}\n          )`)}),v.exit().remove(),this.drag=!1,this.firstUpdate=!1}}customElements.define("cpt-value",CPTValue);class DecisionSpace extends(DecidablesMixinResizeable(ProspectableElement)){static get properties(){return{surface:{attribute:"surface",type:Boolean,reflect:!0},point:{attribute:"point",type:String,reflect:!0},updateable:{attribute:"updateable",type:Boolean,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0}}}constructor(){super(),this.firstUpdate=!0,this.surface=!0,this.points=["all","first","rest","none"],this.point="first",this.updateable=!1,this.a=CPTMath.a.DEFAULT,this.l=CPTMath.l.DEFAULT,this.g=CPTMath.g.DEFAULT,this.xl=0,this.xw=20,this.pw=.5,this.xs=10,this.response="",this.label="",this.choices=[{name:"default",xw:this.xw,pw:this.pw,xs:this.xs,response:this.response,label:""}],this.range={xs:{start:5,stop:15,step:.5},xw:{start:10,stop:30,step:1},pw:{start:0,stop:1,step:.05},uDiff:{start:-20,stop:20}},this.boundary=[],this.mapXY=[],this.mapXZ=[],this.mapYZ=[],this.rotationX=0,this.rotationY=0,this.mx=0,this.my=0,this.mouseX=0,this.mouseY=0,this.alignState()}alignState(){this.choices[0].name="default",this.choices[0].xw=this.xw,this.choices[0].pw=this.pw,this.choices[0].xs=this.xs,this.choices[0].response=this.response,this.choices[0].label=this.label,this.updateable&&(this.choices.forEach(t=>{t.response=CPTMath.xal2v(t.xw,this.a,this.l)*CPTMath.pg2w(t.pw,this.g)+CPTMath.xal2v(this.xl,this.a,this.l)*(1-CPTMath.pg2w(t.pw,this.g))>CPTMath.xal2v(t.xs,this.a,this.l)?"gamble":"sure"}),this.response=this.choices[0].response);const t=(t,s)=>{const e=CPTMath.pg2w(t,s);return Number.isNaN(e)?t:e},s=(s,e,B,i,F,Q,l)=>CPTMath.xal2v(s,F,Q)*t(B,l)+CPTMath.xal2v(e,F,Q)*(1-t(B,l))-CPTMath.xal2v(i,F,Q);this.boundary=range$1(this.range.xs.start,this.range.xs.stop+.01,this.range.xs.step).flatMap(t=>range$1(this.range.xw.start,this.range.xw.stop+.01,this.range.xw.step).map(e=>{let B=this.range.pw.start,i=10,F=(B+i)/2;const Q=s(e,this.xl,B,t,this.a,this.l,this.g),l=s(e,this.xl,i,t,this.a,this.l,this.g);let U;return Q>0?F=-1/0:l<0?F=1/0:range$1(0,15,1).forEach(()=>{U=s(e,this.xl,F,t,this.a,this.l,this.g),U<0?B=F:i=F,F=(B+i)/2}),{xw:e,xs:t,pw:F}}));const e=t=>t?.pw>=this.range.pw.start&&t?.pw<=this.range.pw.stop;this.boundary=this.boundary.map((t,s,B)=>{if(e(t))return t;const i=range$1(this.range.xw.start,this.range.xw.stop+.01,this.range.xw.step).length,F=range$1(this.range.xs.start,this.range.xs.stop+.01,this.range.xs.step).length,Q=s%i===0?null:B[s-1],l=s%i===i-1?null:B[s+1],U=0===Math.trunc(s/i)?null:B[s-i],a=Math.trunc(s/i)===F-1?null:B[s+i],g=e(Q)?1:0,I=e(l)?1:0,c=e(U)?1:0,n=g+I+c+(e(a)?1:0);if(0===n||2===n&&g+I!==1||3===n||4===n)return t;const r={pw:t.pw<this.range.pw.start?this.range.pw.start:this.range.pw.stop,xw:t.xw,xs:t.xs};let o;if(1===n)o=g?Q:I?l:c?U:a;else{const t=g?Q:l,s=c?U:a;o={xw:(t.xw+s.xw)/2,xs:(t.xs+s.xs)/2,pw:(t.pw+s.pw)/2}}const d=(r.pw-o.pw)/(t.pw-o.pw);return r.xw=o.xw+(t.xw-o.xw)*d,r.xs=o.xs+(t.xs-o.xs)*d,r});const B=this.range.xw.stop;this.mapXY=range$1(this.range.xs.start,this.range.xs.stop+.01,this.range.xs.step).flatMap(t=>range$1(this.range.pw.start,this.range.pw.stop+.01,this.range.pw.step).map(e=>{const i=s(B,this.xl,e,t,this.a,this.l,this.g);return{xw:B,xs:t,pw:e,uDiff:i}}));const i=this.range.pw.start;this.mapXZ=range$1(this.range.xs.start,this.range.xs.stop+.01,this.range.xs.step).flatMap(t=>range$1(this.range.xw.start,this.range.xw.stop+.01,this.range.xw.step).map(e=>{const B=s(e,this.xl,i,t,this.a,this.l,this.g);return{xw:e,xs:t,pw:i,uDiff:B}}));const F=this.range.xs.stop;this.mapYZ=range$1(this.range.pw.start,this.range.pw.stop+.01,this.range.pw.step).flatMap(t=>range$1(this.range.xw.start,this.range.xw.stop+.01,this.range.xw.step).map(e=>{const B=s(e,this.xl,t,F,this.a,this.l,this.g);return{xw:e,xs:F,pw:t,uDiff:B}}))}clear(){this.choices=[{}],this.requestUpdate()}get(t="default"){const s=this.choices.find(s=>s.name===t);return void 0===s?null:s}set(t,s,e,B,i="default",F=""){"default"===i&&(this.xw=t,this.pw=s,this.xs=e,this.response=B,this.label=F);const Q=this.choices.find(t=>t.name===i);void 0===Q?this.choices.push({name:i,xw:t,pw:s,xs:e,response:B,label:F}):(Q.xw=t,Q.pw=s,Q.xs=e,Q.response=B,Q.label=F),this.requestUpdate()}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;

          width: 28rem;
          height: 20rem;
        }

        .main {
          width: 100%;
          height: 100%;

          cursor: grab;
        }

        text {
          /* stylelint-disable property-no-vendor-prefix */
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;

          fill: var(---color-text);
        }

        .axis {
          stroke: var(---color-element-border);
          stroke-width: 1;
        }

        .title textPath {
          font-weight: 600;

          alignment-baseline: middle;
          text-anchor: middle;
        }

        .title tspan {
          alignment-baseline: middle;
        }

        .title .subscript {
          font-size: 66.667%;

          alignment-baseline: initial;
          baseline-shift: sub;
        }

        .tick {
          stroke: var(---color-element-border);
          stroke-width: 1;
        }

        .label textPath {
          font-size: 0.75rem;

          alignment-baseline: middle;
          text-anchor: end;
        }

        .label-x textPath {
          text-anchor: start;
        }

        .point {
          fill: var(---color-element-background);
          stroke: var(---color-element-emphasis);
          stroke-width: 1px;
          r: 6px;
        }

        .point.sure {
          fill: var(---color-better);
        }

        .point.gamble {
          fill: var(---color-worse);
        }

        .point.nr {
          fill: var(---color-nr);
        }

        .boundary {
          fill-opacity: 0.7;
          stroke-opacity: 1;
          stroke-width: 0.5px;
        }

        .map {
          stroke-width: 1px;
        }

        .legend .title {
          font-weight: 600;

          alignment-baseline: middle;
          text-anchor: middle;
        }

        .legend .tick text {
          font-size: 0.75rem;
          font-weight: 400;

          stroke: none;
        }
      `]}render(){return x$3`
    `}willUpdate(){this.alignState()}update(t){if(super.update(t),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const s=this.width,e=this.height,B=Math.min(s,e),i={top:3*this.rem,bottom:5*this.rem,left:2*this.rem,right:6*this.rem},F=B-(i.top+i.bottom),Q=B-(i.left+i.right),l=linear().domain([this.range.xs.start,this.range.xs.stop]).range([0,Q]),U=linear().domain([this.range.pw.start,this.range.pw.stop]).range([0,-F]),a=linear().domain([this.range.xw.start,this.range.xw.stop]).range([0,-F]),g=Color(this.getComputedStyleValue("---color-element-background")).hex(),I=this.getComputedStyleValue("---color-better-dark"),c=this.getComputedStyleValue("---color-better"),n=this.getComputedStyleValue("---color-nr"),r=this.getComputedStyleValue("---color-worse"),o=this.getComputedStyleValue("---color-worse-dark"),d=diverging().domain([this.range.uDiff.start,0,this.range.uDiff.stop]).clamp(!0).interpolator(piecewise([I,c,n,r,o])),C=linear().domain([this.range.uDiff.start,this.range.uDiff.stop]).range([0,-e+4*this.rem]),b={x:i.left,y:B-i.bottom},u={x:l((this.range.xs.start+this.range.xs.stop)/2),y:U((this.range.pw.start+this.range.pw.stop)/2),z:a((this.range.xw.start+this.range.xw.stop)/2)},h=-.85*Math.PI/8,y=3*Math.PI/8,x=lineStrips3D().origin(b).scale(1).rotationCenter(u).rotateX(h+this.rotationX).rotateY(y+this.rotationY).rotateZ(0),A=points3D().origin(b).scale(1).rotationCenter(u).rotateX(h+this.rotationX).rotateY(y+this.rotationY).rotateZ(0),G=gridPlanes3D().origin(b).scale(1).rotationCenter(u).rotateX(h+this.rotationX).rotateY(y+this.rotationY).rotateZ(0),R=drag().on("start",t=>{this.mx=t.x,this.my=t.y}).on("drag",t=>{this.rotationY=(t.x-this.mx+this.mouseX)*(Math.PI/230),this.rotationX=(t.y-this.my+this.mouseY)*(Math.PI/230)*-1,this.requestUpdate()}).on("end",t=>{this.mouseX=t.x-this.mx+this.mouseX,this.mouseY=t.y-this.my+this.mouseY}),L=select(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),m=L.enter().append("svg").classed("main",!0),S=m.merge(L).attr("viewBox",`0 0 ${B} ${B}`).call(R),p=m.append("defs").append("linearGradient").attr("id","gradient-legend").attr("x1",0).attr("x2",0).attr("y1",1).attr("y2",0);p.append("stop").attr("offset","0%").attr("stop-color",I),p.append("stop").attr("offset","25%").attr("stop-color",c),p.append("stop").attr("offset","50%").attr("stop-color",n),p.append("stop").attr("offset","75%").attr("stop-color",r),p.append("stop").attr("offset","100%").attr("stop-color",o);const V=[[{title:'Sure Value (<tspan class="math-var">x<tspan class="subscript">sure</tspan></tspan>)',id:"max",x:l.range()[1]},{id:"min",x:l.range()[0]}]],Z=[[{title:'Win Probability (<tspan class="math-var">p<tspan class="subscript">win</tspan></tspan>)',id:"max",y:U.range()[1]},{id:"min",y:U.range()[0]}]],E=[[{title:'Win Value (<tspan class="math-var">x<tspan class="subscript">win</tspan></tspan>)',id:"max",z:a.range()[1]},{id:"min",z:a.range()[0]}]],N=S.selectAll(".axis-x").data(x.x(t=>t.x).y(()=>U.range()[0]).z(()=>a.range()[0])(V)),X=S.selectAll(".axis-y").data(x.x(()=>l.range()[0]).y(t=>t.y).z(()=>a.range()[1])(Z)),D=S.selectAll(".axis-z").data(x.x(()=>l.range()[0]).y(()=>U.range()[0]).z(t=>t.z)(E)),W=N.enter().append("path").attr("class","d3-3d axis axis-x"),H=X.enter().append("path").attr("class","d3-3d axis axis-y"),v=D.enter().append("path").attr("class","d3-3d axis axis-z"),w=W.merge(N).attr("d",x.draw),Y=H.merge(X).attr("d",x.draw),f=v.merge(D).attr("d",x.draw);w.exit().remove(),Y.exit().remove(),f.exit().remove();const J=S.selectAll(".title-path-x").data(x.x(t=>"min"===t.id?t.x-20*this.rem:t.x+20*this.rem).y(()=>U.range()[0]+1.75*this.rem).z(()=>a.range()[0]+1.75*this.rem)(V)),M=S.selectAll(".title-path-y").data(x.x(()=>l.range()[0]-1.75*this.rem).y(t=>"min"===t.id?t.y+20*this.rem:t.y-20*this.rem).z(()=>a.range()[1]-1.75*this.rem)(Z)),k=S.selectAll(".title-path-z").data(x.x(()=>l.range()[0]-1.75*this.rem).y(()=>U.range()[0]+1.75*this.rem).z(t=>"min"===t.id?t.z-20*this.rem:t.z+20*this.rem)(E)),T=S.selectAll(".title-x").data(V,t=>t[0].title),z=S.selectAll(".title-y").data(Z,t=>t[0].title),K=S.selectAll(".title-z").data(E,t=>t[0].title),O=J.enter().append("path").attr("class","d3-3d title-path title-path-x").attr("id","title-x"),$=M.enter().append("path").attr("class","d3-3d title-path title-path-y").attr("id","title-y"),P=k.enter().append("path").attr("class","d3-3d title-path title-path-z").attr("id","title-z"),j=T.enter().append("text").attr("class","d3-3d title title-x");j.append("textPath").attr("href","#title-x").attr("startOffset","50%");const _=z.enter().append("text").attr("class","d3-3d title title-y");_.append("textPath").attr("href","#title-y").attr("startOffset","50%");const q=K.enter().append("text").attr("class","d3-3d title title-z");q.append("textPath").attr("href","#title-z").attr("startOffset","50%");const tt=O.merge(J).attr("d",x.draw),st=$.merge(M).attr("d",x.draw),et=P.merge(k).attr("d",x.draw),Bt=j.merge(T).select("textPath").html(t=>t[0].title),it=_.merge(z).select("textPath").html(t=>t[0].title),Ft=q.merge(K).select("textPath").html(t=>t[0].title);tt.exit().remove(),st.exit().remove(),et.exit().remove(),Bt.exit().remove(),it.exit().remove(),Ft.exit().remove();const Qt=l.ticks(5).map(t=>[{id:"min",label:l.tickFormat()(t),x:l(t)},{id:"max",x:l(t)}]),lt=U.ticks(5).map(t=>[{id:"min",label:U.tickFormat()(t),y:U(t)},{id:"max",y:U(t)}]),Ut=a.ticks(5).map(t=>[{id:"max",label:a.tickFormat()(t),z:a(t)},{id:"min",z:a(t)}]),at=S.selectAll(".tick-x").data(x.x(t=>t.x).y(t=>"min"===t.id?U.range()[0]:U.range()[0]+.35*this.rem).z(t=>"min"===t.id?a.range()[0]:a.range()[0]+.35*this.rem)(Qt)),gt=S.selectAll(".tick-y").data(x.x(t=>"min"===t.id?l.range()[0]:l.range()[0]-.35*this.rem).y(t=>t.y).z(t=>"min"===t.id?a.range()[1]:a.range()[1]-.35*this.rem)(lt)),It=S.selectAll(".tick-z").data(x.x(t=>"min"===t.id?l.range()[0]:l.range()[0]-.35*this.rem).y(t=>"min"===t.id?U.range()[0]:U.range()[0]+.35*this.rem).z(t=>t.z)(Ut)),ct=at.enter().append("path").attr("class","d3-3d tick tick-x"),nt=gt.enter().append("path").attr("class","d3-3d tick tick-y"),rt=It.enter().append("path").attr("class","d3-3d tick tick-z"),ot=ct.merge(at).attr("d",x.draw),dt=nt.merge(gt).attr("d",x.draw),Ct=rt.merge(It).attr("d",x.draw);ot.exit().remove(),dt.exit().remove(),Ct.exit().remove();const bt=S.selectAll(".label-path-x").data(x.x(t=>t.x).y(t=>"min"===t.id?U.range()[0]+4*this.rem:U.range()[0]+.5*this.rem).z(t=>"min"===t.id?a.range()[0]+4*this.rem:a.range()[0]+.5*this.rem)(Qt),t=>t[0].label),ut=S.selectAll(".label-path-y").data(x.x(t=>"min"===t.id?l.range()[0]-.5*this.rem:l.range()[0]-4*this.rem).y(t=>t.y).z(t=>"min"===t.id?a.range()[1]-.5*this.rem:a.range()[1]-4*this.rem)(lt),t=>t[0].label),ht=S.selectAll(".label-path-z").data(x.x(t=>"min"===t.id?l.range()[0]-4*this.rem:l.range()[0]-.5*this.rem).y(t=>"min"===t.id?U.range()[0]+4*this.rem:U.range()[0]+.5*this.rem).z(t=>t.z)(Ut),t=>t[0].label),yt=S.selectAll(".label-x").data(Qt,t=>t[0].label),xt=S.selectAll(".label-y").data(lt,t=>t[0].label),At=S.selectAll(".label-z").data(Ut,t=>t[0].label),Gt=bt.enter().append("path").attr("class","d3-3d label-path label-path-x").attr("id",(t,s)=>`label-x-${s}`),Rt=ut.enter().append("path").attr("class","d3-3d label-path label-path-y").attr("id",(t,s)=>`label-y-${s}`),Lt=ht.enter().append("path").attr("class","d3-3d label-path label-path-z").attr("id",(t,s)=>`label-z-${s}`),mt=yt.enter().append("text").attr("class","d3-3d label label-x");mt.append("textPath").attr("href",(t,s)=>`#label-x-${s}`).attr("startOffset","0%");const St=xt.enter().append("text").attr("class","d3-3d label label-y");St.append("textPath").attr("href",(t,s)=>`#label-y-${s}`).attr("startOffset","100%");const pt=At.enter().append("text").attr("class","d3-3d label label-z");pt.append("textPath").attr("href",(t,s)=>`#label-z-${s}`).attr("startOffset","100%");const Vt=Gt.merge(bt).attr("d",x.draw),Zt=Rt.merge(ut).attr("d",x.draw),Et=Lt.merge(ht).attr("d",x.draw),Nt=mt.merge(yt).select("textPath").text(t=>t[0].label),Xt=St.merge(xt).select("textPath").text(t=>t[0].label),Dt=pt.merge(At).select("textPath").text(t=>t[0].label);Vt.exit().remove(),Zt.exit().remove(),Et.exit().remove(),Nt.exit().remove(),Xt.exit().remove(),Dt.exit().remove();const Wt=S.selectAll(".point").data(A.x(t=>l(t.xs)).y(t=>U(t.pw)).z(t=>a(t.xw))(this.choices.slice("rest"===this.point?1:0,"first"===this.point?1:void 0)),t=>t.name);function Ht(t,s){return{x:s.x-t.x,y:s.y-t.y,z:s.z-t.z}}function vt(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)}function wt(t,s,e){return function(t,s){return{x:t.y*s.z-t.z*s.y,y:t.z*s.x-t.x*s.z,z:t.x*s.y-t.y*s.x}}(Ht(t,s),Ht(t,e))}function Yt(t,s){return function(t,s){return t.x*s.x+t.y*s.y+t.z*s.z}(t,s)/(vt(t)*vt(s))}Wt.enter().append("circle").attr("class","d3-3d point").merge(Wt).attr("class",t=>`d3-3d point ${t.response}`).attr("cx",t=>t.projected.x).attr("cy",t=>t.projected.y),Wt.exit().remove();const ft={x:-.5,y:1,z:-1},Jt=S.selectAll(".boundary").data(this.surface?G.rows(range$1(this.range.xw.start,this.range.xw.stop+.01,this.range.xw.step).length).x(t=>l(t.xs)).y(t=>U(t.pw)).z(t=>a(t.xw))(this.boundary).filter(t=>t[0].pw>=this.range.pw.start&&t[0].pw<=this.range.pw.stop&&t[1].pw>=this.range.pw.start&&t[1].pw<=this.range.pw.stop&&t[2].pw>=this.range.pw.start&&t[2].pw<=this.range.pw.stop&&t[3].pw>=this.range.pw.start&&t[3].pw<=this.range.pw.stop):[]);Jt.enter().append("path").attr("class","d3-3d boundary").merge(Jt).attr("d",G.draw).each(t=>{const s=t.ccw?wt(t[0].rotated,t[1].rotated,t[2].rotated):wt(t[2].rotated,t[1].rotated,t[0].rotated);t.ratio=Yt(s,ft)-.5,t.color=color$1(g).brighter(t.ratio)}).attr("fill",t=>t.color).attr("stroke",t=>t.color),Jt.exit().remove();const Mt=S.selectAll(".map-xy").data(G.rows(range$1(this.range.pw.start,this.range.pw.stop+.01,this.range.pw.step).length).x(t=>l(t.xs)).y(t=>U(t.pw)).z(t=>a(t.xw))(this.mapXY)),kt=S.selectAll(".map-xz").data(G.rows(range$1(this.range.xw.start,this.range.xw.stop+.01,this.range.xw.step).length).x(t=>l(t.xs)).y(t=>U(t.pw)).z(t=>a(t.xw))(this.mapXZ)),Tt=S.selectAll(".map-yz").data(G.rows(range$1(this.range.xw.start,this.range.xw.stop+.01,this.range.xw.step).length).x(t=>l(t.xs)).y(t=>U(t.pw)).z(t=>a(t.xw))(this.mapYZ)),zt=Mt.enter().append("path").attr("class","d3-3d map map-xy"),Kt=kt.enter().append("path").attr("class","d3-3d map map-xz"),Ot=Tt.enter().append("path").attr("class","d3-3d map map-yz");zt.merge(Mt).attr("d",G.draw).each(t=>{const s=t.ccw?wt(t[0].rotated,t[1].rotated,t[2].rotated):wt(t[2].rotated,t[1].rotated,t[0].rotated);t.ratio=Yt(s,ft)-.5,t.color=color$1(d(t[0].uDiff)).brighter(t.ratio)}).attr("fill",t=>t.color).attr("stroke",t=>t.color),Kt.merge(kt).attr("d",G.draw).each(t=>{const s=t.ccw?wt(t[0].rotated,t[1].rotated,t[2].rotated):wt(t[2].rotated,t[1].rotated,t[0].rotated);t.ratio=Yt(s,ft)-.5,t.color=color$1(d(t[0].uDiff)).brighter(t.ratio)}).attr("fill",t=>t.color).attr("stroke",t=>t.color),Ot.merge(Tt).attr("d",G.draw).each(t=>{const s=t.ccw?wt(t[0].rotated,t[1].rotated,t[2].rotated):wt(t[2].rotated,t[1].rotated,t[0].rotated);t.ratio=Yt(s,ft)-.5,t.color=color$1(d(t[0].uDiff)).brighter(t.ratio)}).attr("fill",t=>t.color).attr("stroke",t=>t.color),Mt.exit().remove(),kt.exit().remove(),Tt.exit().remove(),select(this.renderRoot).selectAll(".d3-3d").sort(A.sort);const $t=S.selectAll(".legend").data([{x:B+2*this.rem,y:B-2*this.rem,rem:this.rem}]),Pt=$t.enter().append("g").attr("class","legend"),jt=Pt.merge($t).attr("transform",t=>`translate(${t.x} ${t.y})`);$t.exit().remove(),Pt.append("g").attr("class","axis axis-legend"),jt.select(".axis-legend").call(axisLeft(C).ticks(7)).attr("font-size",null).attr("font-family",null),Pt.append("text").attr("class","title title-legend").html('Difference in Utility (<tspan class="math-var">U<tspan class="subscript">gamble</tspan></tspan> â <tspan class="math-var">U<tspan class="subscript">sure</tspan></tspan>)'),jt.select(".title-legend").attr("transform",`translate(${2.5*-this.rem},${(C(this.range.uDiff.start)+C(this.range.uDiff.stop))/2})rotate(-90)`),Pt.append("rect").attr("class","bar bar-legend").attr("fill",'url("#gradient-legend")'),jt.select(".bar-legend").attr("x",0).attr("y",C(this.range.uDiff.stop)).attr("width",this.rem).attr("height",C(this.range.uDiff.start)-C(this.range.uDiff.stop)),this.firstUpdate=!1}}customElements.define("decision-space",DecisionSpace);class ProspectableControl extends ProspectableElement{static get properties(){return{trials:{attribute:"trials",type:Number,reflect:!0},duration:{attribute:"duration",type:Number,reflect:!0},run:{attribute:"run",type:Boolean,reflect:!0},pause:{attribute:"pause",type:Boolean,reflect:!0},reset:{attribute:"reset",type:Boolean,reflect:!0},state:{atribute:!1,type:String,reflect:!1}}}constructor(){super(),this.trials=void 0,this.duration=void 0,this.run=!1,this.pause=!1,this.reset=!1,this.states=["resetted","running","paused","ended"],this.state="resetted"}setTrials(t){this.trials=t.target.value,this.dispatchEvent(new CustomEvent("prospectable-control-trials",{detail:{trials:this.trials},bubbles:!0}))}setDuration(t){this.duration=t.target.value,this.dispatchEvent(new CustomEvent("prospectable-control-duration",{detail:{duration:this.duration},bubbles:!0}))}doRun(){this.state="running",this.dispatchEvent(new CustomEvent("prospectable-control-run",{detail:{},bubbles:!0}))}doPause(){this.state="paused",this.dispatchEvent(new CustomEvent("prospectable-control-pause",{detail:{},bubbles:!0}))}doReset(){this.state="resetted",this.dispatchEvent(new CustomEvent("prospectable-control-reset",{detail:{},bubbles:!0}))}complete(){this.state="ended"}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;
        }

        .holder {
          display: flex;

          flex-direction: row;

          align-items: stretch;
          justify-content: center;
        }

        .buttons {
          display: flex;

          flex-direction: column;

          align-items: stretch;
          justify-content: center;
        }
      `]}render(){return x$3`
      <div class="holder">
        ${null!=this.trials?x$3`<decidables-slider min="1" max="100" step="1" .value=${this.trials} @change=${this.setTrials.bind(this)} @input=${this.setTrials.bind(this)}>Trials</decidables-slider>`:x$3``}
        ${null!=this.duration?x$3`<decidables-slider min="10" max="4000" step="10" .value=${this.duration} @change=${this.setDuration.bind(this)} @input=${this.setDuration.bind(this)}>Duration</decidables-slider>`:x$3``}
        ${this.run||this.pause||this.reset?x$3`
            <div class="buttons">
              ${this.run?x$3`<decidables-button name="run" ?disabled=${"running"===this.state||"ended"===this.state} @click=${this.doRun.bind(this)}>Run</decidables-button>`:x$3``}
              ${this.pause?x$3`<decidables-button name="pause" ?disabled=${"running"!==this.state} @click=${this.doPause.bind(this)}>Pause</decidables-button>`:x$3``}
              ${this.reset?x$3`<decidables-button name="reset" ?disabled=${"resetted"===this.state} @click=${this.doReset.bind(this)}>Reset</decidables-button>`:x$3``}
            </div>
            `:x$3``}
      </div>`}}customElements.define("prospectable-control",ProspectableControl);class ProspectableResponse extends ProspectableElement{static get properties(){return{feedback:{attribute:"feedback",type:String,reflect:!0},trial:{attribute:"trial",type:Boolean,reflect:!0},payoff:{attribute:"payoff",type:String,reflect:!0},state:{attribute:!1,type:String,reflect:!1},trialCount:{attribute:!1,type:Number,reflect:!1},trialTotal:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.feedbacks=["none","outcome"],this.feedback="none",this.trial=!1,this.payoffs=["none","selection","both"],this.payoff="none",this.states=["off","waiting","feedback"],this.state="off",this.trialCount=0,this.trialTotal=0,this.xl=0,this.xw=0,this.pw=0,this.xs=0,this.gamblePayoff=0,this.surePayoff=0,this.nrPayoff=0,this.betters=["gamble","sure","even"],this.better=void 0,this.responses=["gamble","sure","nr"],this.response=void 0,this.outcomes=["better","worse","even","nr"],this.outcome=void 0}get trialPayoff(){switch(this.response){case"gamble":return this.gamblePayoff;case"sure":return this.surePayoff;case"nr":return this.nrPayoff;default:return}}start(t,s,e,B,i,F,Q,l){this.state="waiting",this.xl=t,this.xw=s,this.pw=e,this.xs=B,this.gamblePayoff=i,this.surePayoff=F,this.better=Q,this.trialCount=l,this.response=void 0,this.outcome=void 0}stop(){this.state="feedback",void 0===this.response&&(this.outcome="nr")}gamble(){this.responded("gamble")}sure(){this.responded("sure")}responded(t){this.state="feedback",this.response=t,this.outcome="even"===this.better?"even":this.better===this.response?"better":"worse",this.dispatchEvent(new CustomEvent("prospectable-response",{detail:{trial:this.trialCount,better:this.better,gamblePayoff:this.gamblePayoff,surePayoff:this.surePayoff,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,response:this.response,outcome:this.outcome,payoff:this.trialPayoff},bubbles:!0}))}reset(){this.state="off",this.trialCount=0,this.better=void 0,this.gamblePayoff=0,this.surePayoff=0,this.response=void 0,this.outcome=void 0}keydown(t){"waiting"===this.state&&("ArrowLeft"===t.key?(this.responded("gamble"),t.preventDefault()):"ArrowRight"===t.key&&(this.responded("sure"),t.preventDefault()))}connectedCallback(){super.connectedCallback(),window.addEventListener("keydown",this.keydown.bind(this))}disconnectedCallback(){window.removeEventListener("keydown",this.keydown.bind(this)),super.disconnectedCallback()}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;
        }

        /* Overall container */
        .holder {
          display: flex;

          flex-direction: column;
        }

        /* Trial messages */
        .trials {
          display: flex;

          flex-direction: column;

          justify-content: center;
        }

        .trial {
          text-align: center;
        }

        .trial .label {
          font-weight: 600;
        }

        /* Response buttons */
        .responses {
          display: flex;

          flex-direction: row;

          align-items: stretch;
          justify-content: center;
        }

        .response {
          width: 5.25rem;
        }

        .waiting[disabled] {
          --decidables-button-background-color: var(---color-element-enabled);
        }

        .selected[disabled][name="gamble"] {
          --decidables-button-background-color: var(---color-worse);
        }

        .selected[disabled][name="sure"] {
          --decidables-button-background-color: var(---color-better);
        }

        /* Feedback messages */
        .feedbacks {
          display: flex;

          flex-direction: row;

          justify-content: center;
        }

        /* Outcome feedback */
        .feedback {
          display: flex;

          flex-direction: column;

          align-items: center;
          justify-content: center;

          width: 5.25rem;
          height: 3.5rem;
          padding: 0.375rem 0.75rem;
          margin: 0.25rem;

          text-align: center;

          background-color: var(---color-element-background);
          border: 1px solid var(---color-element-border);
        }

        .feedback.better {
          background-color: var(---color-better-light);
        }

        .feedback.worse {
          background-color: var(---color-worse-light);
        }

        .feedback.even {
          background-color: var(---color-even-light);
        }

        .feedback.nr {
          background-color: var(---color-nr-light);
        }

        .feedback .outcome {
          font-weight: 600;
          line-height: 1.15;
        }

        :host([payoff="selection"]) .feedback,
        :host([payoff="both"]) .feedback {
          height: 4rem;
        }

        /* Payoff feedback */
        .payoff {
          text-align: center;
        }

        .payoff .label {
          font-weight: 600;
        }
      `]}render(){return x$3`
      <div class="holder">
        ${this.trial?x$3`
            <div class="trials">
              <div class="trial">
                <span class="label">Trial: </span><span class="count">${this.trialCount}</span><span class="of"> of </span><span class="total">${this.trialTotal}</span>
              </div>
            </div>`:x$3``}
        <div class="responses">
          <decidables-button name="gamble" class="response ${"feedback"===this.state&&"gamble"===this.response?"selected":"waiting"===this.state?"waiting":""}" ?disabled=${"waiting"!==this.state||!0!==this.interactive} @click=${this.gamble.bind(this)}>Gamble</decidables-button>
          <decidables-button name="sure" class="response ${"feedback"===this.state&&"sure"===this.response?"selected":"waiting"===this.state?"waiting":""}" ?disabled=${"waiting"!==this.state||!0!==this.interactive} @click=${this.sure.bind(this)}>Sure</decidables-button>
        </div>
        ${"none"!==this.feedback||"none"!==this.payoff?x$3`
            <div class="feedbacks">
              <div class="feedback gamble
                ${"feedback"===this.state&&"outcome"===this.feedback&&"gamble"===this.response?this.outcome:""}">
                ${"feedback"===this.state&&"outcome"===this.feedback&&"gamble"===this.response?"better"===this.outcome?x$3`<span class="outcome">Better</span>`:"worse"===this.outcome?x$3`<span class="outcome">Worse</span>`:"even"===this.outcome?x$3`<span class="outcome">Even</span>`:x$3`<span class="outcome">No<br>Response</span>`:""}
                ${"both"===this.payoff||"selection"===this.payoff&&"gamble"===this.response?x$3`<span class="payoff">${"gamble"===this.response?"Win:":"Miss:"} $${this.gamblePayoff}</span>`:x$3``}
              </div>
              <div class="feedback sure
                ${"feedback"===this.state&&"outcome"===this.feedback&&"sure"===this.response?this.outcome:""}">
                ${"feedback"===this.state&&"outcome"===this.feedback&&"sure"===this.response?"better"===this.outcome?x$3`<span class="outcome">Better</span>`:"worse"===this.outcome?x$3`<span class="outcome">Worse</span>`:"even"===this.outcome?x$3`<span class="outcome">Even</span>`:x$3`<span class="outcome">No<br>Response</span>`:""}
                ${"both"===this.payoff||"selection"===this.payoff&&"sure"===this.response?x$3`<span class="payoff">${"sure"===this.response?"Win:":"Miss:"} $${this.surePayoff}</span>`:x$3``}
              </div>
            </div>`:x$3``}
      </div>`}}customElements.define("prospectable-response",ProspectableResponse);class RiskyOption extends(DecidablesMixinResizeable(ProspectableElement)){static get styles(){return[super.styles,i$5`
        :host {
          --decidables-spinner-font-size: 1.75rem;
          --decidables-spinner-input-width: 4rem;
          --decidables-spinner-prefix: "$";

          display: inline-block;

          width: 10rem;
          height: 10rem;
        }

        .main {
          width: 100%;
          height: 100%;
          overflow: visible;
        }

        .outline {
          fill: var(---color-element-background);
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .arc {
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .arc.interactive {
          cursor: ns-resize;

          filter: url("#shadow-2");
          outline: none;
        }

        .arc.interactive:hover {
          filter: url("#shadow-4");
        }

        .arc.interactive:active {
          filter: url("#shadow-8");
        }

        :host(.keyboard) .arc.interactive:focus {
          filter: url("#shadow-8");
        }

        .arc.win {
          fill: var(---color-better-light);
        }

        .arc.loss {
          fill: var(---color-worse-light);
        }

        .arc.sure {
          fill: var(---color-even-light);
        }

        .label.static {
          font-size: 1.75rem;

          user-select: none;

          dominant-baseline: middle;
          text-anchor: middle;
        }

        .label.interactive {
          width: var(--decidables-spinner-input-width);
          height: calc(var(--decidables-spinner-font-size) * 1.5);
          overflow: visible;
        }

        /* HACK: Get Safari to work with SVG foreignObject */
        /* https://stackoverflow.com/questions/51313873/svg-foreignobject-not-working-properly-on-safari */
        /* https://bugs.webkit.org/show_bug.cgi?id=23113 */
        .label.interactive decidables-spinner {
          position: fixed;
        }

        .label.interactive.win decidables-spinner {
          background-color: var(---color-better-light);
        }

        .label.interactive.loss decidables-spinner {
          background-color: var(---color-worse-light);
        }

        .label.interactive.sure decidables-spinner {
          background-color: var(---color-even-light);
        }
      `]}render(){return x$3`
      <slot></slot>
    `}connectedCallback(){super.connectedCallback(),this.mutationObserver=new MutationObserver(t=>{t.some(t=>"childList"===t.type||"attributes"===t.type&&t.target!==this)&&this.requestUpdate()}),this.mutationObserver.observe(this,{subtree:!0,childList:!0,attributes:!0})}disconnectedCallback(){this.mutationObserver.disconnect(),super.disconnectedCallback()}update(t){if(super.update(t),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const s=this.width,e=this.height,B=Math.min(s,e),i=B-(0+0),F=B-(0+0),Q=this.querySelectorAll("risky-outcome"),l=Q.length?-Q[0].p:0,U=pie().startAngle(l*Math.PI-Math.PI).endAngle(l*Math.PI+Math.PI).sortValues(null).value(t=>t.p)(Q),a=U.filter(t=>!t.data.interactive),g=U.filter(t=>t.data.interactive);function I(t){const s=(t+2*Math.PI)%(2*Math.PI);return s>Math.PI?s-2*Math.PI:s<-Math.PI?s+2*Math.PI:s}const c=drag().subject((t,s)=>{const e=I((s.endAngle+s.startAngle)/2),B=I(Math.atan2(t.y,t.x)+Math.PI/2);return Q.forEach(t=>{t.startP=t.p}),{arcAngle:e,startAngle:I(B-e)}}).on("start",(t,s)=>{if(!s.data.interactive)return;select(t.currentTarget).classed("dragging",!0)}).on("drag",(t,s)=>{if(!s.data.interactive)return;const e=I(Math.atan2(t.y,t.x)+Math.PI/2),B=I(e-t.subject.arcAngle),i=I(t.subject.startAngle>0?B-t.subject.startAngle:t.subject.startAngle-B)/Math.PI,F=s.data.startP+i,l=F>.99?.99:F<.01?.01:F;Q.forEach(t=>{t.p=t===s.data?l:t.startP/(1-s.data.startP)*(1-l)}),this.dispatchEvent(new CustomEvent("risky-outcome-change",{detail:{x:s.data.x,p:s.data.p,name:s.data.name},bubbles:!0}))}).on("end",(t,s)=>{if(!s.data.interactive)return;select(t.currentTarget).classed("dragging",!1)}),n=select(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),r=n.enter().append("svg").classed("main",!0).each((t,s,e)=>{B$1(ProspectableElement.svgFilters,e[s])}),o=r.merge(n).attr("viewBox",`0 0 ${B} ${B}`),d=r.append("g").classed("pie",!0),C=o.select(".pie").attr("transform",`translate(${F/2}, ${i/2})`);d.append("circle").classed("outline",!0),C.select(".outline").attr("r",Math.min(F,i)/2-1);const b=C.selectAll(".arc").data(U),u=b.enter().append("path").call(c).on("keydown",(t,s)=>{if(["ArrowUp","ArrowDown"].includes(t.key)){const e=s.data.p;let B=s.data.p;switch(t.key){case"ArrowUp":B-=t.shiftKey?.01:.05;break;case"ArrowDown":B+=t.shiftKey?.01:.05}const i=B>.99?.99:B<.01?.01:B;Q.forEach(t=>{t.p=t===s.data?i:t.p/(1-e)*(1-i)}),this.dispatchEvent(new CustomEvent("risky-outcome-change",{detail:{x:s.data.x,p:s.data.p,name:s.data.name},bubbles:!0})),t.preventDefault()}});u.merge(b).attr("tabindex",t=>g.includes(t)&&U.length>1?0:null).attr("class",t=>`arc ${t.data.name}`).classed("interactive",t=>g.includes(t)&&U.length>1).attr("d",arc().innerRadius(0).outerRadius(Math.min(F,i)/2-1)),b.exit().remove();const h=C.selectAll(".label.static").data(a),y=C.selectAll(".label.interactive").data(g),x=h.enter().append("text"),A=y.enter().append("foreignObject");A.append("xhtml:decidables-spinner").on("input",(t,s)=>{s.data.x=parseFloat(t.target.value),this.dispatchEvent(new CustomEvent("risky-outcome-change",{detail:{x:s.data.x,p:s.data.p,name:s.data.name},bubbles:!0}))}),x.merge(h).attr("class",t=>`label static ${t.data.name}`).attr("transform",t=>{if(1===U.length)return"translate(0, 0)";const s=Math.min(F,i)/2*.6;return`translate(${arc().innerRadius(s).outerRadius(s).centroid(t)})`}).text(t=>`$${t.data.x.toFixed(0)}`);const G=A.merge(y).attr("class",t=>`label interactive ${t.data.name}`).attr("transform",t=>{const s=parseFloat(this.getComputedStyleValue("--decidables-spinner-input-width")),e=parseFloat(this.getComputedStyleValue("--decidables-spinner-font-size")),B=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("font-size"),10),Q=s*B/-2,l=e*B*1.5/-2;if(1===U.length)return`translate(${Q}, ${l})`;const a=Math.min(F,i)/2*.6,g=arc().innerRadius(a).outerRadius(a);return`translate(${g.centroid(t)[0]+Q}, ${g.centroid(t)[1]+l})`});G.select("decidables-spinner").attr("value",t=>`${t.data.x.toFixed(0)}`),h.exit().remove(),y.exit().remove()}}customElements.define("risky-option",RiskyOption);class RiskyOutcome extends ProspectableElement{static get properties(){return{x:{attribute:"value",type:Number,reflect:!0},p:{attribute:"probability",type:Number,reflect:!0},name:{attribute:"name",type:String,reflect:!0}}}constructor(){super(),this.x=0,this.p=0,this.name=""}static get styles(){return[i$5`
        :host {
          display: none;
        }
      `]}render(){return x$3``}}customElements.define("risky-outcome",RiskyOutcome);class RiskyChoice extends ProspectableElement{static get properties(){return{state:{attribute:"state",type:String,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0}}}constructor(){super(),this.states=["choice","fixation","blank"],this.state="choice",this.xl=0,this.xw=100,this.pw=.75,this.xs=50}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;
        }

        .holder {
          user-select: none;
        }

        .holder > * {
          vertical-align: middle;
        }

        .query {
          margin: 0 0.5rem;

          font-family: var(--font-family-code);
          font-size: 1.75rem;
        }

        risky-option {
          width: 10rem;
          height: 10rem;
        }
      `]}sendEvent(){this.dispatchEvent(new CustomEvent("risky-choice-change",{detail:{xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs},bubbles:!0}))}winChange(t){this.xw=parseFloat(t.detail.x),this.pw=parseFloat(t.detail.p),this.sendEvent()}sureChange(t){this.xs=parseFloat(t.detail.x),this.sendEvent()}render(){return x$3`
      <div class="holder">
        <risky-option class="gamble" ?interactive=${this.interactive} @risky-outcome-change=${this.winChange.bind(this)}>
          ${"choice"===this.state?x$3`
              <risky-outcome probability="${1-this.pw}" value="${this.xl}" name="loss"></risky-outcome>
              <risky-outcome ?interactive=${this.interactive} probability="${this.pw}" value="${this.xw}" name="win"></risky-outcome>`:""}
        </risky-option><span class="query"
         >${"choice"===this.state?"?":"fixation"===this.state?"+":x$3`â`}</span
        ><risky-option class="sure" ?interactive=${this.interactive} @risky-outcome-change=${this.sureChange.bind(this)}>
          ${"choice"===this.state?x$3`
              <risky-outcome ?interactive=${this.interactive} probability="1" value="${this.xs}" name="sure"></risky-outcome>`:""}
        </risky-option>
      </div>`}}customElements.define("risky-choice",RiskyChoice);class RiskyTask extends ProspectableElement{static get properties(){return{duration:{attribute:"duration",type:Number,reflect:!0},iti:{attribute:"iti",type:Number,reflect:!0},trials:{attribute:"trials",type:Number,reflect:!0},running:{attribute:"running",type:Boolean,reflect:!0},state:{attribute:!1,type:String,reflect:!1}}}constructor(){super(),this.duration=2e3,this.iti=2e3,this.trials=5,this.running=!1,this.states=["resetted","iti","stimulus","ended"],this.state="resetted",this.range={},this.range.xl={start:0,stop:0,step:1},this.range.xw={start:10,stop:30,step:1},this.range.pw={start:.1,stop:.9,step:.1},this.range.xs={start:5,stop:15,step:1},this.range.xl.values=range$1(this.range.xl.start,this.range.xl.stop+.01,this.range.xl.step),this.range.xw.values=range$1(this.range.xw.start,this.range.xw.stop+.01,this.range.xw.step),this.range.pw.values=range$1(this.range.pw.start,this.range.pw.stop+.01,this.range.pw.step),this.range.xs.values=range$1(this.range.xs.start,this.range.xs.stop+.01,this.range.xs.step),this.firstUpdate=!0,this.xl=0,this.xw=0,this.pw=0,this.xs=0,this.trial=0,this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0,this.runner=void 0}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;
        }
      `]}render(){return x$3`
      <div class="holder">
        <risky-choice state="${"stimulus"===this.state?"choice":"iti"===this.state?"fixation":"blank"}" probability="${this.pw}" win="${this.xw}" loss="${this.xl}" sure="${this.xs}"></risky-choice>
      </div>`}update(t){super.update(t),(this.firstUpdate||t.has("running"))&&(this.running?(this.pauseTime&&(this.baseTime+=now()-this.pauseTime,this.pauseTime=0),this.runner=interval(this.run.bind(this),20)):void 0!==this.runner&&(this.runner.stop(),this.pauseTime=now())),this.firstUpdate=!1}reset(){this.runner.stop(),this.running=!1,this.trial=0,this.state="resetted",this.xl=0,this.xw=0,this.pw=0,this.xs=0,this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0}run(){const t=now(),s=this.baseTime?t-this.baseTime:0,e=this.baseTime?s-this.startTime:0;this.lastTime=s,"resetted"===this.state?(this.state="iti",this.baseTime=t,this.startTime=0,this.dispatchEvent(new CustomEvent("risky-block-start",{detail:{trials:this.trials},bubbles:!0}))):"iti"===this.state&&e>=this.iti?(this.trial+=1,this.state="stimulus",this.startTime=s,this.xl=this.range.xl.values[Math.floor(Math.random()*this.range.xl.values.length)],this.xw=this.range.xw.values[Math.floor(Math.random()*this.range.xw.values.length)],this.pw=this.range.pw.values[Math.floor(Math.random()*this.range.pw.values.length)],this.xs=this.range.xs.values[Math.floor(Math.random()*this.range.xs.values.length)],this.vDiff=this.xw*this.pw+this.xl*(1-this.pw)-this.xs,this.gamblePayoff=Math.random()<this.pw?this.xw:this.xl,this.surePayoff=this.xs,this.better=this.vDiff>0?"gamble":this.vDiff<0?"sure":"equal",this.dispatchEvent(new CustomEvent("risky-trial-start",{detail:{trials:this.trials,duration:this.duration,iti:this.iti,trial:this.trial,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,better:this.better,gamblePayoff:this.gamblePayoff,surePayoff:this.surePayoff},bubbles:!0}))):"stimulus"===this.state&&e>=this.duration&&(this.dispatchEvent(new CustomEvent("risky-trial-end",{detail:{trials:this.trials,duration:this.duration,iti:this.iti,trial:this.trial,xl:this.xl,xw:this.xw,pw:this.pw,xs:this.xs,better:this.better,gamblePayoff:this.gamblePayoff,surePayoff:this.surePayoff},bubbles:!0})),this.trial>=this.trials?(this.runner.stop(),this.running=!1,this.state="ended",this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0,this.dispatchEvent(new CustomEvent("risky-block-end",{detail:{trials:this.trial},bubbles:!0}))):(this.state="iti",this.startTime=s))}}customElements.define("risky-task",RiskyTask);class CPTEquationPG2W extends CPTEquation{static get properties(){return{p:{attribute:"probability",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},w:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.p=.75,this.g=CPTMath.g.DEFAULT,this.alignState()}alignState(){this.w=CPTMath.pg2w(this.p,this.g)}sendEvent(){this.dispatchEvent(new CustomEvent("cpt-equation-pg2w-change",{detail:{p:this.p,g:this.g,w:this.w},bubbles:!0}))}pInput(t){this.p=parseFloat(t.target.value),this.alignState(),this.sendEvent()}gInput(t){this.g=parseFloat(t.target.value),this.alignState(),this.sendEvent()}willUpdate(){this.alignState()}render(){let t,s,e;this.numeric?(t=x$3`<decidables-spinner class="p bottom"
          ?disabled=${!this.interactive}
          min="0"
          max="1"
          step="0.01"
          .value=${this.p}
          @input=${this.pInput.bind(this)}
        >
          <var class="math-var">p</var>
        </decidables-spinner>`,s=x$3`<decidables-spinner class="g bottom"
          ?disabled=${!this.interactive}
          min=${CPTMath.g.MIN}
          max=${CPTMath.g.MAX}
          step=${CPTMath.g.STEP}
          .value=${this.g}
          @input=${this.gInput.bind(this)}
        >
          <var class="math-var">Î³</var>
        </decidables-spinner>`,e=x$3`<decidables-spinner class="w bottom"
          disabled
          min="0"
          max="1"
          step=".01"
          .value=${+this.w.toFixed(2)}
        >
          <var class="math-var">w</var>
        </decidables-spinner>`):(t=x$3`<var class="math-var p">p</var>`,s=x$3`<var class="math-var g">Î³</var>`,e=x$3`<var class="math-var w">w</var>`);const B=x$3`
      <tr>
        <td rowspan="2">
          ${e}<span class="equals">=</span>
        </td>
        <td class="underline">
          ${t}<sup class="exp">${s}</sup>
        </td>
      </tr>
      <tr>
        <td>
          <span class="bracket tight">[</span>${t}<sup class="exp">${s}</sup><span class="plus">+</span><span class="paren tight">(</span>1<span class="minus">â</span>${t}<span class="paren tight">)</span><sup class="exp">${s}</sup><span class="bracket tight">]</span><sup class="exp">1/${s}</sup>
        </td>
      </tr>`;return x$3`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${B}
          </tbody>
        </table>
      </div>`}}customElements.define("cpt-equation-pg2w",CPTEquationPG2W);class CPTEquationVW2U extends CPTEquation{static get properties(){return{v:{attribute:"value",converter:DecidablesConverterArray,reflect:!0},w:{attribute:"weight",converter:DecidablesConverterArray,reflect:!0},n:{attribute:"outcomes",type:Number,reflect:!0},u:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.v=[10,0],this.w=[.75,.25],this.n=2,this.nMax=4,this.vMax=new Array(this.nMax).fill(0),this.wMax=new Array(this.nMax).fill(0),this.alignState()}alignState(){this.v=this.v.length<this.n?this.v.concat(this.vMax.slice(this.v.length,this.n)):this.v.length>this.n?this.v.slice(0,this.n):this.v,this.w=this.w.length<this.n?this.w.concat(this.wMax.slice(this.w.length,this.n)):this.w.length>this.n?this.w.slice(0,this.n):this.w,this.v.forEach((t,s)=>{this.vMax[s]=t}),this.w.forEach((t,s)=>{this.wMax[s]=t}),this.u=this.v.reduce((t,s,e)=>t+s*this.w[e],0)}sendEvent(){this.dispatchEvent(new CustomEvent("cpt-equation-vw2u-change",{detail:{v:this.v,w:this.w,n:this.n,u:this.u},bubbles:!0}))}vInput(t,s){this.v[t]=parseFloat(s.target.value),this.alignState(),this.sendEvent()}wInput(t,s){this.w[t]=parseFloat(s.target.value),this.alignState(),this.sendEvent()}nInput(t){this.n=parseFloat(t.target.value),this.alignState(),this.sendEvent()}vTemplate(t="",s="",e=!1){let B;if(e){const e=Number.parseInt(t,10)-1;B=x$3`<decidables-spinner class="v"
          ?disabled=${!this.interactive}
          .value=${this.v[e]}
          @input=${this.vInput.bind(this,e)}
        >
          <var class="math-var">v<sub class="subscript ${s}">${t}</sub></var>
        </decidables-spinner>`}else B=x$3`<var class="math-var v">v<sub class="subscript ${s}">${t}</sub></var>`;return B}wTemplate(t="",s="",e=!1){let B;if(e){const e=Number.parseInt(t,10)-1;B=x$3`<decidables-spinner class="w"
          ?disabled=${!this.interactive}
          min="0"
          max="1"
          step=".001"
          .value=${this.w[e]}
          @input=${this.wInput.bind(this,e)}
        >
          <var class="math-var">w<sub class="subscript ${s}">${t}</sub></var>
        </decidables-spinner>`}else B=x$3`<var class="math-var w">w<sub class="subscript ${s}">${t}</sub></var>`;return B}willUpdate(){this.alignState()}render(){let t,s;this.numeric?(t=x$3`<decidables-spinner class="u"
          disabled
          .value=${+this.u.toFixed(3)}
        >
          <var class="math-var">U</var>
        </decidables-spinner>`,s=x$3`<decidables-spinner class="n"
          ?disabled=${!this.interactive}
          min="1"
          max="4"
          step="1"
          .value=${this.n}
          @input=${this.nInput.bind(this)}
        >
          <var class="math-var">n</var>
        </decidables-spinner>`):(t=x$3`<var class="math-var u">U</var>`,s=x$3`<var class="math-var subscript">n</var>`);const e=x$3`
      <tr>
        <td>
          ${t}<span class="equals">=</span>
        </td>
        <td>
          <div class="summation">
            <span class="tight">${s}</span>
            <span class="tight"><var class="math-greek sigma">Î£</var></span>
            <span class="tight"><var class="math-var subscript tight">i</var><span class="equals subscript">=</span><span class="subscript tight">1</span></span>
          </div>
        </td>
        <td>
          ${this.vTemplate("i","math-var",!1)}&nbsp;${this.wTemplate("i","math-var",!1)}<span class="equals">=</span>
        </td>
        <td>
          ${this.numeric?Array(this.nMax).fill().map((t,s)=>s<this.n?x$3`<span class="addend tight" ${F({in:d,out:d})}>${0!==s?x$3`<span class="plus">+</span>`:x$3``}${this.vTemplate(s+1,"math-num",!0)}&nbsp;${this.wTemplate(s+1,"math-num",!0)}</span>`:null):x$3`${this.vTemplate("1","math-num",!1)}&nbsp;${this.wTemplate("1","math-num",!1)}<span class="plus">+</span><span class="ellipsis">â¦</span><span class="plus">+</span>${this.vTemplate("n","math-var",!1)}&nbsp;${this.wTemplate("n","math-var",!1)}`}
        </td>
      </tr>`;return x$3`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${e}
          </tbody>
        </table>
      </div>`}}customElements.define("cpt-equation-vw2u",CPTEquationVW2U);class CPTEquationXAL2V extends CPTEquation{static get properties(){return{x:{attribute:"value",type:Number,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},v:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.x=10,this.a=CPTMath.a.DEFAULT,this.l=CPTMath.l.DEFAULT,this.alignState()}alignState(){this.v=CPTMath.xal2v(this.x,this.a,this.l)}sendEvent(){this.dispatchEvent(new CustomEvent("cpt-equation-xal2v-change",{detail:{x:this.x,a:this.a,l:this.l,v:this.v},bubbles:!0}))}xInput(t){this.x=parseFloat(t.target.value),this.alignState(),this.sendEvent()}aInput(t){this.a=parseFloat(t.target.value),this.alignState(),this.sendEvent()}lInput(t){this.l=parseFloat(t.target.value),this.alignState(),this.sendEvent()}willUpdate(){this.alignState()}render(){let t,s,e,B;this.numeric?(t=x$3`<decidables-spinner class="x bottom"
          ?disabled=${!this.interactive}
          step="1"
          .value=${this.x}
          @input=${this.xInput.bind(this)}
        >
          <var class="math-var">x</var>
        </decidables-spinner>`,s=x$3`<decidables-spinner class="a bottom"
          ?disabled=${!this.interactive}
          min=${CPTMath.a.MIN}
          max=${CPTMath.a.MAX}
          step=${CPTMath.a.STEP}
          .value=${this.a}
          @input=${this.aInput.bind(this)}
        >
          <var class="math-var">Î±</var>
        </decidables-spinner>`,e=x$3`<decidables-spinner class="l bottom"
          ?disabled=${!this.interactive}
          min=${CPTMath.l.MIN}
          step=${CPTMath.l.STEP}
          .value=${this.l}
          @input=${this.lInput.bind(this)}
        >
          <var class="math-var">Î»</var>
        </decidables-spinner>`,B=x$3`<decidables-spinner class="v bottom" disabled step=".001" .value="${+this.v.toFixed(3)}">
          <var class="math-var">v</var>
        </decidables-spinner>`):(t=x$3`<var class="math-var x">x</var>`,s=x$3`<var class="math-var a">Î±</var>`,e=x$3`<var class="math-var l">Î»</var>`,B=x$3`<var class="math-var v">v</var>`);const i=x$3`
      <tr>
        <td rowspan="2">
          ${B}<span class="equals">=</span><span class="brace tight">{</span>
        </td>
        <td class="left">
          ${t}<sup class="exp">${s}</sup>,&emsp;if ${t}<span class="equals">&ge;</span>0
        </td>
      </tr>
      <tr>
        <td class="left">
          <span class="minus tight">â</span>${e}<span class="paren tight">(</span><span class="minus tight">â</span>${t}<span class="paren tight">)</span><sup class="exp">${s}</sup>,&emsp;if ${t}<span class="equals">&lt;</span>0
        </td>
      </tr>`;return x$3`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${i}
          </tbody>
        </table>
      </div>`}}customElements.define("cpt-equation-xal2v",CPTEquationXAL2V);class CPTExample extends ProspectableElement{static get styles(){return[super.styles,i$5`
        :host {
          ---border: var(--border, 1px solid var(---color-border));
          display: inline-block;

          margin-bottom: 1rem;
        }

        .holder {
          display: flex;
        }

        .body {
          display: flex;

          flex-wrap: wrap;

          align-items: center;
          justify-content: left;

          padding: 0.625rem;

          border: var(---border);
          border-radius: 0.25rem;
        }

        .body ::slotted(*) {
          margin: 0.625rem;
        }

        /* HACK: Sibling selectors not working with ::slotted */
        /* .body > rdk-task + sdt-response,
        ::slotted(rdk-task) + ::slotted(sdt-response) { */
        /* .body ::slotted(sdt-response) {
          margin-left: 0;
        } */

        /* HACK: Sibling selectors not working with ::slotted */
        /* .body > sdt-control + rdk-task,
        ::slotted(sdt-control) + ::slotted(rdk-task) {
          margin-left: 0;
        } */
        /* .body ::slotted(rdk-task) {
          margin-left: 0;
        } */
      `]}render(){return x$3`
      <div class="holder">
        <div class="body">
          <slot>Empty!</slot>
        </div>
      </div>`}}customElements.define("cpt-example",CPTExample);class CPTExampleHuman extends CPTExample{static get properties(){return{trials:{attribute:"trials",type:Number,reflect:!0},duration:{attribute:"duration",type:Number,reflect:!0},a:{attribute:!1,type:Number,reflect:!1},l:{attribute:!1,type:Number,reflect:!1},g:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.trials=10,this.duration=2e3,this.a=CPTMath.a.DEFAULT,this.l=CPTMath.l.DEFAULT,this.g=CPTMath.g.DEFAULT,this.cptFit=null,this.cptParameters=null,this.cptProbability=null,this.cptValue=null,this.decisionSpace=null,this.prospectableControl=null,this.prospectableResponse=null,this.riskyTask=null}connectedCallback(){super.connectedCallback(),this.cptFit=this.querySelector("cpt-fit"),this.cptParameters=this.querySelector("cpt-parameters"),this.cptProbability=this.querySelector("cpt-probability"),this.cptValue=this.querySelector("cpt-value"),this.decisionSpace=this.querySelector("decision-space"),this.prospectableControl=this.querySelector("prospectable-control"),this.prospectableResponse=this.querySelector("prospectable-response"),this.riskyTask=this.querySelector("risky-task"),this.cptFit&&this.cptFit.addEventListener("cpt-fit-update",t=>{this.a=t.detail.a,this.l=t.detail.l,this.g=t.detail.g}),this.prospectableControl&&(this.prospectableControl.addEventListener("prospectable-control-trials",t=>{this.trials=t.detail.trials}),this.prospectableControl.addEventListener("prospectable-control-duration",t=>{this.duration=t.detail.duration}),this.prospectableControl.addEventListener("prospectable-control-run",()=>{this.riskyTask&&(this.riskyTask.running=!0)}),this.prospectableControl.addEventListener("prospectable-control-pause",()=>{this.riskyTask&&(this.riskyTask.running=!1)}),this.prospectableControl.addEventListener("prospectable-control-reset",()=>{this.riskyTask&&this.riskyTask.reset(),this.prospectableResponse&&this.prospectableResponse.reset(),this.decisionSpace&&this.decisionSpace.clear(),this.cptFit&&this.cptFit.clear()})),this.prospectableResponse&&this.prospectableResponse.addEventListener("prospectable-response",t=>{this.decisionSpace&&this.decisionSpace.set(t.detail.xw,t.detail.pw,t.detail.xs,t.detail.response,t.detail.trial.toString(),t.detail.trial.toString()),this.cptFit&&this.cptFit.set(t.detail.xl,t.detail.xw,t.detail.pw,t.detail.xs,t.detail.response,t.detail.trial.toString(),t.detail.trial.toString())}),this.riskyTask&&(this.riskyTask.addEventListener("risky-trial-start",t=>{this.prospectableResponse&&this.prospectableResponse.start(t.detail.xl,t.detail.xw,t.detail.pw,t.detail.xs,t.detail.gamblePayoff,t.detail.surePayoff,t.detail.better,t.detail.trial)}),this.riskyTask.addEventListener("risky-trial-end",()=>{this.prospectableResponse&&this.prospectableResponse.stop()}),this.riskyTask.addEventListener("risky-block-end",()=>{this.prospectableControl&&this.prospectableControl.complete()}))}update(t){super.update(t),this.cptParameters&&(this.cptParameters.a=null!=this.cptParameters.a?this.a:void 0,this.cptParameters.l=null!=this.cptParameters.l?this.l:void 0,this.cptParameters.g=null!=this.cptParameters.g?this.g:void 0),this.cptProbability&&(this.cptProbability.g=this.g),this.cptValue&&(this.cptValue.a=this.a,this.cptValue.l=this.l),this.decisionSpace&&(this.decisionSpace.a=this.a,this.decisionSpace.l=this.l,this.decisionSpace.g=this.g),this.prospectableControl&&(this.prospectableControl.trials=null!=this.prospectableControl.trials?this.trials:void 0,this.prospectableControl.duration=null!=this.prospectableControl.trials?this.duration:void 0),this.prospectableResponse&&(this.prospectableResponse.trialTotal=this.trials),this.riskyTask&&(this.riskyTask.trials=this.trials,this.riskyTask.duration=this.duration,this.riskyTask.iti=this.duration)}}customElements.define("cpt-example-human",CPTExampleHuman);class CPTExampleInteractive extends CPTExample{static get properties(){return{a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0},xl:{attribute:"loss",type:Number,reflect:!0},xw:{attribute:"win",type:Number,reflect:!0},pw:{attribute:"probability",type:Number,reflect:!0},xs:{attribute:"sure",type:Number,reflect:!0}}}constructor(){super(),this.a=CPTMath.a.DEFAULT,this.l=CPTMath.l.DEFAULT,this.g=CPTMath.g.DEFAULT,this.xl=0,this.xw=20,this.pw=.5,this.xs=10,this.cptCalculation=null,this.cptParameters=null,this.cptProbability=null,this.cptSpace=null,this.cptValue=null,this.decisionSpace=null,this.riskyChoice=null}connectedCallback(){super.connectedCallback(),this.cptCalculation=this.querySelector("cpt-calculation"),this.cptParameters=this.querySelector("cpt-parameters"),this.cptProbability=this.querySelector("cpt-probability"),this.cptSpace=this.querySelector("cpt-space"),this.cptValue=this.querySelector("cpt-value"),this.decisionSpace=this.querySelector("decision-space"),this.riskyChoice=this.querySelector("risky-choice"),this.cptCalculation&&this.cptCalculation.addEventListener("cpt-calculation-change",t=>{this.a=t.detail.a,this.l=t.detail.l,this.g=t.detail.g,this.xl=t.detail.xl,this.xw=t.detail.xw,this.pw=t.detail.pw,this.xs=t.detail.xs}),this.cptParameters&&(this.cptParameters.addEventListener("cpt-parameters-a",t=>{this.a=t.detail.a}),this.cptParameters.addEventListener("cpt-parameters-l",t=>{this.l=t.detail.l}),this.cptParameters.addEventListener("cpt-parameters-g",t=>{this.g=t.detail.g})),this.cptProbability&&this.cptProbability.addEventListener("cpt-probability-change",t=>{this.g=t.detail.g,this.pw=t.detail.p}),this.cptValue&&this.cptValue.addEventListener("cpt-value-change",t=>{this.a=t.detail.a,this.l=t.detail.l,"default"===t.detail.name?this.xs=t.detail.x:"gamble"===t.detail.name&&(this.xw=t.detail.x)}),this.riskyChoice&&this.riskyChoice.addEventListener("risky-choice-change",t=>{this.xl=t.detail.xl,this.xw=t.detail.xw,this.pw=t.detail.pw,this.xs=t.detail.xs}),this.requestUpdate()}update(t){super.update(t),this.cptCalculation&&(this.cptCalculation.a=this.a,this.cptCalculation.l=this.l,this.cptCalculation.g=this.g,this.cptCalculation.xl=this.xl,this.cptCalculation.xw=this.xw,this.cptCalculation.pw=this.pw,this.cptCalculation.xs=this.xs),this.cptParameters&&(this.cptParameters.a=null!=this.cptParameters.a?this.a:void 0,this.cptParameters.l=null!=this.cptParameters.l?this.l:void 0,this.cptParameters.g=null!=this.cptParameters.g?this.g:void 0),this.cptProbability&&this.cptProbability.set(this.pw,this.g,"default",""),this.cptSpace&&(this.cptSpace.a=this.a,this.cptSpace.l=this.l,this.cptSpace.g=this.g,this.cptSpace.xl=this.xl,this.cptSpace.xw=this.xw,this.cptSpace.pw=this.pw,this.cptSpace.xs=this.xs),this.cptValue&&(this.cptValue.set(this.xs,this.a,this.l,"default","s"),this.cptValue.set(this.xw,this.a,this.l,"gamble","g","default")),this.decisionSpace&&(this.decisionSpace.a=this.a,this.decisionSpace.l=this.l,this.decisionSpace.g=this.g,this.decisionSpace.xl=this.xl,this.decisionSpace.xw=this.xw,this.decisionSpace.pw=this.pw,this.decisionSpace.xs=this.xs),this.riskyChoice&&(this.riskyChoice.xl=this.xl,this.riskyChoice.xw=this.xw,this.riskyChoice.pw=this.pw,this.riskyChoice.xs=this.xs)}}customElements.define("cpt-example-interactive",CPTExampleInteractive);class CPTExampleModel extends CPTExample{static get properties(){return{trials:{attribute:"trials",type:Number,reflect:!0},duration:{attribute:"duration",type:Number,reflect:!0},a:{attribute:"alpha",type:Number,reflect:!0},l:{attribute:"lambda",type:Number,reflect:!0},g:{attribute:"gamma",type:Number,reflect:!0}}}constructor(){super(),this.trials=10,this.duration=2e3,this.a=CPTMath.a.DEFAULT,this.l=CPTMath.l.DEFAULT,this.g=CPTMath.g.DEFAULT,this.xl=0,this.xw=20,this.pw=.5,this.xs=10,this.cptParameters=null,this.cptProbability=null,this.cptValue=null,this.decisionSpace=null,this.prospectableControl=null,this.prospectableResponse=null,this.riskyTask=null}connectedCallback(){super.connectedCallback(),this.cptParameters=this.querySelector("cpt-parameters"),this.cptProbability=this.querySelector("cpt-probability"),this.cptValue=this.querySelector("cpt-value"),this.decisionSpace=this.querySelector("decision-space"),this.prospectableControl=this.querySelector("prospectable-control"),this.prospectableResponse=this.querySelector("prospectable-response"),this.riskyTask=this.querySelector("risky-task"),this.cptParameters&&(this.cptParameters.addEventListener("cpt-parameters-a",t=>{this.a=t.detail.a}),this.cptParameters.addEventListener("cpt-parameters-l",t=>{this.l=t.detail.l}),this.cptParameters.addEventListener("cpt-parameters-g",t=>{this.g=t.detail.g})),this.cptProbability&&(this.cptProbability.addEventListener("cpt-probability-change",t=>{this.g=t.detail.g}),this.cptProbability.addEventListener("prospectable-response",t=>{this.prospectableResponse&&this.prospectableResponse.responded(t.detail.response),this.decisionSpace&&this.decisionSpace.set(t.detail.xw,t.detail.pw,t.detail.xs,t.detail.response,t.detail.trial.toString(),t.detail.trial.toString())})),this.cptValue&&(this.cptValue.addEventListener("cpt-value-change",t=>{this.a=t.detail.a,this.l=t.detail.l}),this.cptProbability||this.cptValue.addEventListener("prospectable-response",t=>{this.prospectableResponse&&this.prospectableResponse.responded(t.detail.response),this.decisionSpace&&this.decisionSpace.set(t.detail.xw,t.detail.pw,t.detail.xs,t.detail.response,t.detail.trial.toString(),t.detail.trial.toString())})),this.prospectableControl&&(this.prospectableControl.addEventListener("prospectable-control-trials",t=>{this.trials=t.detail.trials}),this.prospectableControl.addEventListener("prospectable-control-duration",t=>{this.duration=t.detail.duration}),this.prospectableControl.addEventListener("prospectable-control-run",()=>{this.cptProbability&&this.cptProbability.resumeTrial(),this.cptValue&&this.cptValue.resumeTrial(),this.riskyTask&&(this.riskyTask.running=!0)}),this.prospectableControl.addEventListener("prospectable-control-pause",()=>{this.cptProbability&&this.cptProbability.pauseTrial(),this.cptValue&&this.cptValue.pauseTrial(),this.riskyTask&&(this.riskyTask.running=!1)}),this.prospectableControl.addEventListener("prospectable-control-reset",()=>{this.cptProbability&&this.cptProbability.clear(),this.cptValue&&this.cptValue.clear(),this.riskyTask&&this.riskyTask.reset(),this.prospectableResponse&&this.prospectableResponse.reset(),this.decisionSpace&&this.decisionSpace.clear()})),this.riskyTask&&(this.riskyTask.addEventListener("risky-trial-start",t=>{this.prospectableResponse&&this.prospectableResponse.start(t.detail.xl,t.detail.xw,t.detail.pw,t.detail.xs,t.detail.gamblePayoff,t.detail.surePayoff,t.detail.better,t.detail.trial),this.vw=CPTMath.xal2v(this.xw,this.a,this.l),this.vl=CPTMath.xal2v(this.xl,this.a,this.l),this.ww=CPTMath.pg2w(this.pw,this.g),this.wl=1-this.ww,this.vs=CPTMath.xal2v(this.xs,this.a,this.l),this.ug=this.vw*this.ww+this.vl*this.wl,this.us=this.vs;const s=CPTMath.xal2v(t.detail.xw,this.a,this.l)*CPTMath.pg2w(t.detail.pw,this.g)+CPTMath.xal2v(t.detail.xl,this.a,this.l)*(1-CPTMath.pg2w(t.detail.pw,this.g))>CPTMath.xal2v(t.detail.xs,this.a,this.l)?"gamble":"sure";this.cptProbability&&this.cptProbability.trial(t.detail.xl,t.detail.xw,t.detail.pw,t.detail.xs,t.detail.trial,s),this.cptValue&&this.cptValue.trial(t.detail.xl,t.detail.xw,t.detail.pw,t.detail.xs,t.detail.trial,s)}),this.riskyTask.addEventListener("risky-trial-end",()=>{this.prospectableResponse&&this.prospectableResponse.stop()}),this.riskyTask.addEventListener("risky-block-end",()=>{this.prospectableControl&&this.prospectableControl.complete()})),this.requestUpdate()}update(t){super.update(t),this.cptParameters&&(this.cptParameters.a=null!=this.cptParameters.a?this.a:void 0,this.cptParameters.l=null!=this.cptParameters.l?this.l:void 0,this.cptParameters.g=null!=this.cptParameters.g?this.g:void 0),this.cptProbability&&(this.cptProbability.g=this.g),this.cptValue&&(this.cptValue.a=this.a,this.cptValue.l=this.l),this.decisionSpace&&(this.decisionSpace.a=this.a,this.decisionSpace.l=this.l,this.decisionSpace.g=this.g),this.prospectableControl&&(this.prospectableControl.trials=null!=this.prospectableControl.trials?this.trials:void 0,this.prospectableControl.duration=null!=this.prospectableControl.trials?this.duration:void 0),this.riskyTask&&(this.riskyTask.trials=this.trials,this.riskyTask.duration=this.duration,this.riskyTask.iti=this.duration)}}customElements.define("cpt-example-model",CPTExampleModel);var data$1={colors:{a:"#e41a1c",d:"#377eb8",k:"#4daf4a",v:"#984ea3",sooner:"#ff7f00",later:"#f781bf",larger:"#4545d0",smaller:"#f032e6",equal:"#10dbc9",nr:"#cccccc"}},colors$1=data$1.colors;class DiscountableElement extends DecidablesElement{static get properties(){return{interactive:{attribute:"interactive",type:Boolean,reflect:!0}}}constructor(){super(),this.interactive=!1}static get colors(){return colors$1}static get lights(){return Object.keys(DiscountableElement.colors).reduce((t,s)=>(t[s]=interpolateRgb(DiscountableElement.colors[s],"#ffffff")(.5),t),{})}static get darks(){return Object.keys(DiscountableElement.colors).reduce((t,s)=>(t[s]=interpolateRgb(DiscountableElement.colors[s],"#000000")(.5),t),{})}static get styles(){return[super.styles,i$5`
        :host {
          ---color-a: var(--color-a, ${r$4(this.colors.a)});
          ---color-d: var(--color-d, ${r$4(this.colors.d)});
          ---color-k: var(--color-k, ${r$4(this.colors.k)});
          ---color-v: var(--color-v, ${r$4(this.colors.v)});
          ---color-sooner: var(--color-sooner, ${r$4(this.colors.sooner)});
          ---color-later: var(--color-later, ${r$4(this.colors.later)});
          ---color-larger: var(--color-larger, ${r$4(this.colors.larger)});
          ---color-smaller: var(--color-smaller, ${r$4(this.colors.smaller)});
          ---color-equal: var(--color-equal, ${r$4(this.colors.equal)});
          ---color-nr: var(--color-nr, ${r$4(this.colors.nr)});

          ---color-a-light: var(--color-a-light, ${r$4(this.lights.a)});
          ---color-d-light: var(--color-d-light, ${r$4(this.lights.d)});
          ---color-k-light: var(--color-k-light, ${r$4(this.lights.k)});
          ---color-v-light: var(--color-v-light, ${r$4(this.lights.v)});
          ---color-sooner-light: var(--color-sooner-light, ${r$4(this.lights.sooner)});
          ---color-later-light: var(--color-later-light, ${r$4(this.lights.later)});
          ---color-larger-light: var(--color-larger-light, ${r$4(this.lights.larger)});
          ---color-smaller-light: var(--color-smaller-light, ${r$4(this.lights.smaller)});
          ---color-equal-light: var(--color-equal-light, ${r$4(this.lights.equal)});
          ---color-nr-light: var(--color-nr-light, ${r$4(this.lights.nr)});

          ---color-a-dark: var(--color-a-dark, ${r$4(this.darks.a)});
          ---color-d-dark: var(--color-d-dark, ${r$4(this.darks.d)});
          ---color-k-dark: var(--color-k-dark, ${r$4(this.darks.k)});
          ---color-v-dark: var(--color-v-dark, ${r$4(this.darks.v)});
          ---color-sooner-dark: var(--color-sooner-dark, ${r$4(this.darks.sooner)});
          ---color-later-dark: var(--color-later-dark, ${r$4(this.darks.later)});
          ---color-larger-dark: var(--color-larger-dark, ${r$4(this.darks.larger)});
          ---color-smaller-dark: var(--color-smaller-dark, ${r$4(this.darks.smaller)});
          ---color-equal-dark: var(--color-equal-dark, ${r$4(this.darks.equal)});
          ---color-nr-dark: var(--color-nr-dark, ${r$4(this.darks.nr)});
        }
      `]}}class DiscountableControl extends DiscountableElement{static get properties(){return{trials:{attribute:"trials",type:Number,reflect:!0},duration:{attribute:"duration",type:Number,reflect:!0},run:{attribute:"run",type:Boolean,reflect:!0},pause:{attribute:"pause",type:Boolean,reflect:!0},reset:{attribute:"reset",type:Boolean,reflect:!0},state:{atribute:!1,type:String,reflect:!1}}}constructor(){super(),this.trials=void 0,this.duration=void 0,this.run=!1,this.pause=!1,this.reset=!1,this.states=["resetted","running","paused","ended"],this.state="resetted"}setTrials(t){this.trials=t.target.value,this.dispatchEvent(new CustomEvent("discountable-control-trials",{detail:{trials:this.trials},bubbles:!0}))}setDuration(t){this.duration=t.target.value,this.dispatchEvent(new CustomEvent("discountable-control-duration",{detail:{duration:this.duration},bubbles:!0}))}doRun(){this.state="running",this.dispatchEvent(new CustomEvent("discountable-control-run",{detail:{},bubbles:!0}))}doPause(){this.state="paused",this.dispatchEvent(new CustomEvent("discountable-control-pause",{detail:{},bubbles:!0}))}doReset(){this.state="resetted",this.dispatchEvent(new CustomEvent("discountable-control-reset",{detail:{},bubbles:!0}))}complete(){this.state="ended"}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;
        }

        .holder {
          display: flex;

          flex-direction: row;

          align-items: stretch;
          justify-content: center;
        }

        .buttons {
          display: flex;

          flex-direction: column;

          align-items: stretch;
          justify-content: center;
        }
      `]}render(){return x$3`
      <div class="holder">
        ${null!=this.trials?x$3`<decidables-slider min="1" max="100" step="1" .value=${this.trials} @change=${this.setTrials.bind(this)} @input=${this.setTrials.bind(this)}>Trials</decidables-slider>`:x$3``}
        ${null!=this.duration?x$3`<decidables-slider min="10" max="4000" step="10" .value=${this.duration} @change=${this.setDuration.bind(this)} @input=${this.setDuration.bind(this)}>Duration</decidables-slider>`:x$3``}
        ${this.run||this.pause||this.reset?x$3`
            <div class="buttons">
              ${this.run?x$3`<decidables-button name="run" ?disabled=${"running"===this.state||"ended"===this.state} @click=${this.doRun.bind(this)}>Run</decidables-button>`:x$3``}
              ${this.pause?x$3`<decidables-button name="pause" ?disabled=${"running"!==this.state} @click=${this.doPause.bind(this)}>Pause</decidables-button>`:x$3``}
              ${this.reset?x$3`<decidables-button name="reset" ?disabled=${"resetted"===this.state} @click=${this.doReset.bind(this)}>Reset</decidables-button>`:x$3``}
            </div>
            `:x$3``}
      </div>`}}customElements.define("discountable-control",DiscountableControl);class DiscountableResponse extends DiscountableElement{static get properties(){return{feedback:{attribute:"feedback",type:Boolean,reflect:!0},trial:{attribute:"trial",type:Boolean,reflect:!0},state:{attribute:!1,type:String,reflect:!1},trialCount:{attribute:!1,type:Number,reflect:!1},trialTotal:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.trial=!1,this.feedback=!1,this.states=["off","waiting","feedback"],this.state="off",this.trialCount=0,this.trialTotal=0,this.as=0,this.ds=0,this.al=0,this.dl=0,this.responses=["first","second","nr"],this.response=void 0}start(t,s,e,B,i){this.state="waiting",this.as=t,this.ds=s,this.al=e,this.dl=B,this.trialCount=i,this.response=void 0}stop(){this.state="feedback",void 0===this.response&&(this.response="nr")}first(){this.responded("first")}second(){this.responded("second")}responded(t){this.state="feedback",this.response=t,this.dispatchEvent(new CustomEvent("discountable-response",{detail:{trial:this.trialCount,as:this.as,ds:this.ds,al:this.al,dl:this.dl,response:this.response},bubbles:!0}))}reset(){this.state="off",this.trialCount=0,this.response=void 0}keydown(t){"waiting"===this.state&&("ArrowLeft"===t.key?(this.responded("first"),t.preventDefault()):"ArrowRight"===t.key&&(this.responded("second"),t.preventDefault()))}connectedCallback(){super.connectedCallback(),window.addEventListener("keydown",this.keydown.bind(this))}disconnectedCallback(){window.removeEventListener("keydown",this.keydown.bind(this)),super.disconnectedCallback()}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;
        }

        /* Overall container */
        .holder {
          display: flex;

          flex-direction: column;
        }

        /* Trial messages */
        .trials {
          display: flex;

          flex-direction: column;

          justify-content: center;
        }

        .trial {
          text-align: center;
        }

        .trial .label {
          font-weight: 600;
        }

        /* Response buttons */
        .responses {
          display: flex;

          flex-direction: row;

          align-items: stretch;
          justify-content: center;
        }

        .response {
          width: 5.25rem;
        }

        .waiting[disabled] {
          --decidables-button-background-color: var(---color-element-enabled);
        }

        .selected[disabled][name="first"] {
          --decidables-button-background-color: var(---color-sooner);
        }

        .selected[disabled][name="second"] {
          --decidables-button-background-color: var(---color-later);
        }

        /* Feedback messages */
        .feedbacks {
          display: flex;

          flex-direction: row;

          justify-content: center;
        }

        /* Outcome feedback */
        .feedback {
          display: flex;

          flex-direction: column;

          align-items: center;
          justify-content: center;

          width: 5.25rem;
          height: 3.5rem;
          padding: 0.375rem 0.75rem;
          margin: 0.25rem;

          text-align: center;

          background-color: var(---color-element-background);
          border: 1px solid var(---color-element-border);
        }

        .feedback.first {
          background-color: var(---color-sooner-light);
        }

        .feedback.second {
          background-color: var(---color-later-light);
        }

        .feedback.nr {
          background-color: var(---color-nr-light);
        }
      `]}render(){return x$3`
      <div class="holder">
        ${this.trial?x$3`
            <div class="trials">
              <div class="trial">
                <span class="label">Trial: </span
                ><span class="count">${this.trialCount}</span
                ><span class="of"> of </span
                ><span class="total">${this.trialTotal}</span>
              </div>
            </div>`:x$3``}
        <div class="responses">
          <decidables-button 
            name="first"
            class="response ${"feedback"===this.state&&"first"===this.response?"selected":"waiting"===this.state?"waiting":""}"
            ?disabled=${"waiting"!==this.state||!0!==this.interactive}
            @click=${this.first.bind(this)}
          >First</decidables-button>
          <decidables-button 
            name="second"
            class="response ${"feedback"===this.state&&"second"===this.response?"selected":"waiting"===this.state?"waiting":""}"
            ?disabled=${"waiting"!==this.state||!0!==this.interactive}
            @click=${this.second.bind(this)}
          >Second</decidables-button>
        </div>
        ${this.feedback?x$3`
            <div class="feedbacks">
              <div class="feedback
                ${"feedback"===this.state&&this.feedback?this.response:""}">
                ${"feedback"===this.state&&this.feedback?"first"===this.response?x$3`<span class="response">First</span>`:"second"===this.response?x$3`<span class="response">Second</span>`:x$3`<span class="response">No<br>Response</span>`:""}
              </div>
            </div>`:x$3``}
      </div>`}}customElements.define("discountable-response",DiscountableResponse);class HTDMath{static k={DEFAULT:.05,MIN:0,MAX:100,STEP:.001,JUMP:.01};static adk2v(t,s,e){return t/(1+e*s)}static adv2k(t,s,e){return(t-e)/(e*s)}}class HTDEquation extends DiscountableElement{static get properties(){return{numeric:{attribute:"numeric",type:Boolean,reflect:!0}}}constructor(){super(),this.numeric=!1}static get styles(){return[super.styles,i$5`
        :host {
          display: block;

          margin: 1rem;
        }

        /* Containing <div> */
        .holder {
          display: flex;

          flex-direction: row;

          justify-content: left;
        }

        /* Overall <table> */
        .equation {
          text-align: center;
          white-space: nowrap;

          border-collapse: collapse;

          border: 0;
        }

        /* Modifies <td> */
        .underline {
          border-bottom: 1px solid var(---color-text);
        }

        /* Basic <span> and <var> w/modifiers */
        span,
        var {
          padding: 0 0.25rem;

          font-style: normal;
        }

        var {
          border-radius: var(---border-radius);
        }

        .tight {
          padding: 0;
        }

        .paren {
          font-size: 150%;
        }

        .bracket {
          font-size: 175%;
        }

        .brace {
          font-size: 200%;
        }

        .addend {
          position: relative;
          display: inline-block;
        }

        .comparison {
          position: relative;
          display: inline-block;

          font-size: 125%;
          font-weight: 600;
        }

        .function {
          display: inline-block;

          border-radius: var(---border-radius);
        }

        :host([numeric]) .function {
          padding: 0.25rem;
        }

        .exp {
          display: inline-block;

          font-size: 0.75rem;
        }

        .subscript {
          display: inline-block;

          font-size: 66.667%;
        }

        .summation {
          display: flex;

          flex-direction: column;

          line-height: 0.8;
        }

        .sigma {
          display: inline-block;

          font-size: 200%;
        }

        /* Input wrapping <label> */
        decidables-spinner {
          --decidables-spinner-input-width: 4rem;

          display: inline-block;

          padding: 0.125rem 0.375rem 0.375rem;

          line-height: 1.5;
          vertical-align: middle;

          border-radius: var(---border-radius);
        }

        .n {
          --decidables-spinner-input-width: 2rem;
        }

        .left {
          text-align: left;
        }

        .right {
          text-align: right;
        }

        .bottom {
          vertical-align: bottom;
        }

        .top {
          vertical-align: top;
        }

        /* Color scheme */
        /* .win {
          background: var(---color-better);
        }

        .loss {
          background: var(---color-worse);
        }

        .sure {
          background: var(---color-even);
        } */

        .a {
          background: var(---color-a-light);
        }

        .d {
          background: var(---color-d-light);
        }

        .k {
          background: var(---color-k-light);
        }

        .v {
          background: var(---color-v-light);
        }
      `]}}class HTDCalculation extends HTDEquation{static get properties(){return{numeric:{attribute:"numeric",type:Boolean,reflect:!0},as:{attribute:"amount-ss",type:Number,reflect:!0},ds:{attribute:"delay-ss",type:Number,reflect:!0},al:{attribute:"amount-ll",type:Number,reflect:!0},dl:{attribute:"delay-ll",type:Number,reflect:!0},k:{attribute:"k",type:Number,reflect:!0}}}constructor(){super(),this.numeric=!1,this.as=20,this.ds=5,this.al=50,this.dl=40,this.k=HTDMath.k.DEFAULT,this.alignState()}alignState(){this.vs=HTDMath.adk2v(this.as,this.ds,this.k),this.vl=HTDMath.adk2v(this.al,this.dl,this.k),this.vDiff=this.vs-this.vl}sendEvent(){this.dispatchEvent(new CustomEvent("htd-calculation-change",{detail:{as:this.as,ds:this.ds,al:this.al,dl:this.dl,k:this.k},bubbles:!0}))}asInput(t){this.as=parseFloat(t.target.value),this.alignState(),this.sendEvent()}dsInput(t){this.ds=parseFloat(t.target.value),this.alignState(),this.sendEvent()}alInput(t){this.al=parseFloat(t.target.value),this.alignState(),this.sendEvent()}dlInput(t){this.dl=parseFloat(t.target.value),this.alignState(),this.sendEvent()}kInput(t){this.k=parseFloat(t.target.value),this.alignState(),this.sendEvent()}static get styles(){return[super.styles,i$5`
        /* :host {
          display: inline-block;
        } */

        var {
          border-radius: var(---border-radius);
        }

        decidables-spinner {
          border-radius: var(---border-radius);
        }
      `]}willUpdate(){this.alignState()}render(){let t,s,e,B,i,Q,l,U;this.numeric?(t=x$3`<decidables-spinner class="a as"
          ?disabled=${!this.interactive}
          step="1"
          .value=${this.as}
          @input=${this.asInput.bind(this)}
        >
          <var class="math-var">A<sub class="subscript">ss</sub></var>
        </decidables-spinner>`,s=x$3`<decidables-spinner class="d ds"
          ?disabled=${!this.interactive}
          min="0"
          step="1"
          .value=${this.ds}
          @input=${this.dsInput.bind(this)}
        >
          <var class="math-var">D<sub class="subscript">ss</sub></var>
        </decidables-spinner>`,e=x$3`<decidables-spinner class="a al"
          ?disabled=${!this.interactive}
          step="1"
          .value=${this.al}
          @input=${this.alInput.bind(this)}
        >
          <var class="math-var">A<sub class="subscript">ll</sub></var>
        </decidables-spinner>`,B=x$3`<decidables-spinner class="d dl"
          ?disabled=${!this.interactive}
          min="0"
          step="1"
          .value=${this.dl}
          @input=${this.dlInput.bind(this)}
        >
          <var class="math-var">D<sub class="subscript">ll</sub></var>
        </decidables-spinner>`,i=x$3`<decidables-spinner class="k"
          ?disabled=${!this.interactive}
          min=${HTDMath.k.MIN}
          max=${HTDMath.k.MAX}
          step=${HTDMath.k.STEP}
          .value=${+this.k.toFixed(3)}
          @input=${this.kInput.bind(this)}
        >
          <var class="math-var">k</var>
        </decidables-spinner>`,Q=x$3`<decidables-spinner class="v vs"
          disabled
          .value=${+this.vs.toFixed(2)}
        >
          <var class="math-var">V<sub class="subscript">ss</sub></var>
        </decidables-spinner>`,l=x$3`<decidables-spinner class="v vl"
          disabled
          .value=${+this.vl.toFixed(2)}
        >
          <var class="math-var">V<sub class="subscript">ll</sub></var>
        </decidables-spinner>`,U=x$3`${this.vDiff>0?x$3`<span class="comparison" ${F({in:v})}>&gt;</span>`:this.vDiff<0?x$3`<span class="comparison" ${F({in:v})}>&lt;</span>`:x$3`<span class="comparison" ${F({in:v})}>=</span>`}`):(t=x$3`<var class="math-var a as">A<sub class="subscript">ss</sub></var>`,s=x$3`<var class="math-var d ds">D<sub class="subscript">ss</sub></var>`,e=x$3`<var class="math-var a al">A<sub class="subscript">ll</sub></var>`,B=x$3`<var class="math-var d dl">D<sub class="subscript">ll</sub></var>`,i=x$3`<var class="math-var k">k</var>`,Q=x$3`<var class="math-var v vs">V<sub class="subscript">ss</sub></var>`,l=x$3`<var class="math-var v vl">V<sub class="subscript">ll</sub></var>`,U=x$3`<span class="comparison">â</span>`);const a=x$3`
      <tr>
        <td class="underline">
          ${t}
        </td>
        <td rowspan="2">
          ${U}
        </td>
        <td class="underline">
          ${e}
        </td>
      </tr>
      <tr>
        <td class="">
          <span class="paren tight">(</span>1<span class="plus">+</span>${i}${s}<span class="paren tight">)</span>
        </td>
        <td class="">
          <span class="paren tight">(</span>1<span class="plus">+</span>${i}${B}<span class="paren tight">)</span>
        </td>
      </tr>
      <tr>
        <td class="right">
          ${Q}
        </td>
        <td>
          ${U}
        </td>
        <td class="left">
          ${l}
        </td>
      </tr>`;return x$3`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${a}
          </tbody>
        </table>
      </div>`}}customElements.define("htd-calculation",HTDCalculation);class HTDCurves extends(DecidablesMixinResizeable(DiscountableElement)){static get properties(){return{a:{attribute:"amount",type:Number,reflect:!0},d:{attribute:"delay",type:Number,reflect:!0},label:{attribute:"label",type:String,reflect:!0},k:{attribute:"k",type:Number,reflect:!0},v:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.firstUpdate=!0,this.drag=!1,this.scale={value:{min:0,max:80,step:1,round:Math.round},time:{min:0,max:100,step:1,round:Math.round}},this.a=null,this.d=null,this.label="",this.k=HTDMath.k.DEFAULT,this.options=[{name:"default",a:this.a,d:this.d,label:this.label}],this.as=null,this.ds=null,this.al=null,this.dl=null,this.trialCount=null,this.response=null,this.alignState()}alignState(){this.options[0].a=this.a,this.options[0].d=this.d,this.options[0].label=this.label,this.options.forEach(t=>{t.v=HTDMath.adk2v(t.a,t.d,this.k)}),this.v=this.options[0].v}trial(t,s,e,B,i,F){this.trialCount&&this.removeOption(`${this.trialCount}-s`),this.trialCount&&this.removeOption(`${this.trialCount}-l`),this.as=t,this.ds=s,this.al=e,this.dl=B,this.trialCount=i,this.response=F,this.setOption(this.as,this.ds,`${this.trialCount}-s`,"s",!0),this.setOption(this.al,this.dl,`${this.trialCount}-l`,"l",!0)}pauseTrial(){const t=select(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]");t.interrupt("new-1"),t.interrupt("new-2"),t.datum(t=>(t.paused=!0,t))}resumeTrial(){select(this.renderRoot).selectAll(".lines[data-animating-ease-time-1]").datum(t=>(t.paused=!1,t)),this.requestUpdate()}clearOptions(){this.options.splice(1),this.requestUpdate()}removeOption(t){this.options=this.options.filter(s=>s.name!==t),this.requestUpdate()}getOption(t="default"){return this.options.find(s=>s.name===t)}setOption(t,s,e="default",B="",i=!1){"default"===e&&(this.a=t,this.d=s,this.label=B);const F=this.options.find(t=>t.name===e);void 0===F?this.options.push({name:e,a:t,d:s,label:B,trial:i,new:i}):(F.a=t,F.d=s,F.label=B),this.requestUpdate()}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;

          width: 27rem;
          height: 15rem;
        }

        .main {
          width: 100%;
          height: 100%;
        }

        text {
          /* stylelint-disable property-no-vendor-prefix */
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
        }

        .background {
          fill: var(---color-element-background);
          stroke: var(---color-element-border);
          stroke-width: 1;
          shape-rendering: crispEdges;
        }

        .title-x,
        .title-y {
          font-weight: 600;

          fill: currentColor;
        }

        .tick {
          font-size: 0.75rem;
        }

        .axis-x path,
        .axis-x line,
        .axis-y path,
        .axis-y line {
          stroke: var(---color-element-border);
          /* shape-rendering: crispEdges; */
        }

        .option .interactive {
          filter: url("#shadow-2");
          outline: none;
        }

        .option .interactive:hover {
          filter: url("#shadow-4");

          /* HACK: This gets Safari to correctly apply the filter! */
          /* https://github.com/emilbjorklund/svg-weirdness/issues/27 */
          transform: translateX(0);
        }

        .option .interactive:active {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          transform: translateY(0);
        }

        :host(.keyboard) .option .interactive:focus-within {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          transform: translateZ(0);
        }

        .option .body.interactive:has(~ .point:hover) {
          filter: url("#shadow-4");

          /* HACK: This gets Safari to correctly apply the filter! */
          transform: translateX(0);
        }

        .option .body.interactive:has(~ .point:active) {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          transform: translateY(0);
        }

        :host(.keyboard) .option .body.interactive:has(~ .point:focus-within) {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          transform: translateZ(0);
        }

        .gradient.sooner stop {
          stop-color: var(---color-sooner);
        }

        .gradient.later stop {
          stop-color: var(---color-later);
        }

        .stop-0,
        .stop-before {
          stop-opacity: 0;
        }

        .stop-after,
        .stop-100 {
          stop-opacity: 1;
        }

        .fill {
          fill: var(---color-element-enabled);
          fill-opacity: 0.5;
          stroke: none;
        }

        .interactive .fill {
          cursor: move;

          outline: none;
        }

        .sooner .fill {
          fill: var(---color-sooner);
        }

        .later .fill {
          fill: var(---color-later);
        }

        .trial.sooner .fill {
          fill: url("#sooner-gradient");
        }

        .trial.later .fill {
          fill: url("#later-gradient");
        }

        .bar {
          fill: none;
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .interactive .bar {
          cursor: ew-resize;

          outline: none;
        }

        .point .mark {
          fill: var(---color-element-emphasis);

          r: 6px;
        }

        .point .label {
          font-size: 0.75rem;

          dominant-baseline: middle;
          text-anchor: middle;

          fill: var(---color-text-inverse);
        }

        .point.interact {
          cursor: ns-resize;

          outline: none;
        }

        .curve {
          fill: none;
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .curve.interactive {
          cursor: nwse-resize;

          outline: none;
        }

        /* Make larger targets for touch users */
        .interactive .touch {
          stroke: #000000;
          stroke-opacity: 0;
        }

        @media (pointer: coarse) {
          .interactive .touch {
            stroke-linecap: round;
            stroke-width: 12;
          }
        }
      `]}render(){return x$3``}willUpdate(){this.alignState()}update(t){if(super.update(t),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const s=this.width,e=this.height;let B,i;s/e>1.8?(i=e,B=1.8*i):(B=s,i=B/1.8);const F=2*this.rem,Q=3*this.rem,l=3*this.rem,U=i-(F+Q),a=B-(l+2*this.rem),g=parseInt(this.getComputedStyleValue("---transition-duration"),10),I=linear().domain([this.scale.time.min,this.scale.time.max]).range([0,a]),c=linear().domain([this.scale.value.min,this.scale.value.max]).range([U,0]),n=shapeLine().x(t=>I(t.d)).y(t=>c(t.v)),r=select(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),o=r.enter().append("svg").classed("main",!0).each((t,s,e)=>{B$1(DiscountableElement.svgFilters,e[s])}),d=o.append("defs").classed("gradients",!0),C=d.append("linearGradient").classed("gradient sooner",!0).attr("id","sooner-gradient");C.append("stop").classed("stop-0",!0).attr("offset","0"),C.append("stop").classed("stop-before animation",!0).attr("offset","1"),C.append("stop").classed("stop-after animation",!0).attr("offset","1"),C.append("stop").classed("stop-100",!0).attr("offset","1");const b=d.append("linearGradient").classed("gradient later",!0).attr("id","later-gradient");b.append("stop").classed("stop-0",!0).attr("offset","0"),b.append("stop").classed("stop-before animation",!0).attr("offset","1"),b.append("stop").classed("stop-after animation",!0).attr("offset","1"),b.append("stop").classed("stop-100",!0).attr("offset","1");const u=o.merge(r).attr("viewBox",`0 0 ${B} ${i}`),h=o.append("g").classed("plot",!0),y=u.select(".plot").attr("transform",`translate(${l}, ${F})`);h.append("clipPath").attr("id","clip-htd-curves").append("rect"),y.select("clipPath rect").attr("height",U+1).attr("width",a+1);const x=h.append("g").classed("underlayer",!0),A=y.select(".underlayer");x.append("rect").classed("background",!0),A.select(".background").attr("height",U).attr("width",a),x.append("g").classed("axis-x",!0);A.select(".axis-x").attr("transform",`translate(0, ${c(0)})`).transition().duration(2*g).ease(cubicOut).call(axisBottom(I)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null);const G=x.append("text").classed("title-x",!0).attr("text-anchor","middle");G.append("tspan").classed("name",!0).text("Delay ("),G.append("tspan").classed("math-var d",!0).text("D"),G.append("tspan").classed("name",!0).text(")"),A.select(".title-x").attr("transform",`translate(${a/2}, ${U+2.25*this.rem})`),x.append("g").classed("axis-y",!0);A.select(".axis-y").transition().duration(2*g).ease(cubicOut).call(axisLeft(c)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null);const R=x.append("text").classed("title-y",!0).attr("text-anchor","middle");R.append("tspan").classed("name",!0).text("Value ("),R.append("tspan").classed("math-var v",!0).text("V"),R.append("tspan").classed("name",!0).text(")"),A.select(".title-y").attr("transform",`translate(${-2*this.rem}, ${U/2})rotate(-90)`),h.append("g").classed("content",!0);const L=y.select(".content").selectAll(".option").data(this.options.filter(t=>null!==t.a&&null!==t.d),t=>t.name),m=L.enter().append("g").attr("class",t=>`option ${"s"===t.label?"sooner":"l"===t.label?"later":""} ${t.trial?"trial":""}`),S=m.append("g").classed("body",!0),p=S.append("g").classed("fill",!0).attr("clip-path","url(#clip-htd-curves)").each(t=>{t.trial&&u.selectAll(".gradient .animation").attr("offset",1)});p.append("path").classed("region",!0).attr("d",t=>{const s=range$1(I(t.d),I(0),-1).map(s=>({d:I.invert(s),v:HTDMath.adk2v(t.a,t.d-I.invert(s),this.k)}));return n([...s,{d:0,v:0},{d:t.d,v:0}])});const V=S.append("g").classed("bar",!0);V.append("line").classed("line",!0),V.append("line").classed("line touch",!0),V.selectAll(".line").attr("x1",t=>I(t.d)).attr("x2",t=>I(t.d)).attr("y1",c(0)).attr("y2",t=>c(t.a)).attr("stroke-dasharray",(t,s,e)=>{if(t.trial){return`0,${e[s].getTotalLength()}`}return"none"});S.append("g").classed("point",!0).append("circle").classed("mark touch",!0);const Z=m.append("g").classed("curve",!0).attr("clip-path","url(#clip-htd-curves)");Z.append("path").classed("path",!0),Z.append("path").classed("path touch",!0),Z.selectAll(".path").attr("d",t=>{const s=range$1(I(t.d),I(0),-1).map(s=>({d:I.invert(s),v:HTDMath.adk2v(t.a,t.d-I.invert(s),this.k)}));return n(s)}).attr("stroke-dasharray",(t,s,e)=>{if(t.trial){return`0,${e[s].getTotalLength()}`}return"none"});const E=m.append("g").classed("point top-point",!0);E.append("circle").classed("mark touch",!0),E.append("text").classed("label",!0),m.selectAll(".point").attr("transform",t=>`translate(${I(t.d)}, ${c(t.a)})`).attr("opacity",t=>t.trial?0:1);const N=m.merge(L),X=N.filter((t,s,e)=>this.interactive&&!t.trial&&!select(e[s]).select(".body").classed("interactive")).select(".body");X.classed("interactive",!0).attr("tabindex",0).on("keydown",(t,s)=>{if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(t.key)){let e=s.a,B=s.d;switch(t.key){case"ArrowUp":e+=t.shiftKey?1:5;break;case"ArrowDown":e-=t.shiftKey?1:5;break;case"ArrowRight":B+=t.shiftKey?1:5;break;case"ArrowLeft":B-=t.shiftKey?1:5}B=B<this.scale.time.min?this.scale.time.min:B>this.scale.time.max?this.scale.time.max:B,e=e<this.scale.value.min?this.scale.value.min:e>this.scale.value.max?this.scale.value.max:e,B===s.d&&e===s.a||(s.d=B,s.a=e,"default"===s.name&&(this.d=s.d,this.a=s.a),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("htd-curves-change",{detail:{name:s.name,a:s.a,d:s.d,k:this.k,label:s.label},bubbles:!0}))),t.preventDefault()}}),X.select(".fill").call(drag().subject((t,s)=>({x:I(s.d),y:c(s.a)})).on("start",t=>{select(t.currentTarget).classed("dragging",!0)}).on("drag",(t,s)=>{this.drag=!0;const e=I.invert(t.x),B=c.invert(t.y);s.d=e<this.scale.time.min?this.scale.time.min:e>this.scale.time.max?this.scale.time.max:this.scale.time.round(e),s.a=B<this.scale.value.min?this.scale.value.min:B>this.scale.value.max?this.scale.value.max:this.scale.value.round(B),"default"===s.name&&(this.d=s.d,this.a=s.a),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("htd-curves-change",{detail:{name:s.name,a:s.a,d:s.d,k:this.k,label:s.label},bubbles:!0}))}).on("end",t=>{select(t.currentTarget).classed("dragging",!1)})),X.select(".bar").call(drag().subject((t,s)=>({x:I(s.d),y:c(s.a)})).on("start",t=>{select(t.currentTarget).classed("dragging",!0)}).on("drag",(t,s)=>{this.drag=!0;const e=I.invert(t.x);s.d=e<this.scale.time.min?this.scale.time.min:e>this.scale.time.max?this.scale.time.max:this.scale.time.round(e),"default"===s.name&&(this.d=s.d),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("htd-curves-change",{detail:{name:s.name,a:s.a,d:s.d,k:this.k,label:s.label},bubbles:!0}))}).on("end",t=>{select(t.currentTarget).classed("dragging",!1)})),N.filter((t,s,e)=>this.interactive&&!t.trial&&!select(e[s]).select(".top-point").classed("interact")).select(".top-point").classed("interact",!0).attr("tabindex",-1).call(drag().subject((t,s)=>({x:I(s.d),y:c(s.a)})).on("start",t=>{select(t.currentTarget).classed("dragging",!0)}).on("drag",(t,s)=>{this.drag=!0;const e=c.invert(t.y);s.a=e<this.scale.value.min?this.scale.value.min:e>this.scale.value.max?this.scale.value.max:this.scale.value.round(e),"default"===s.name&&(this.a=s.a),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("htd-curves-change",{detail:{name:s.name,a:s.a,d:s.d,k:this.k,label:s.label},bubbles:!0}))}).on("end",t=>{select(t.currentTarget).classed("dragging",!1)})).on("keydown",(t,s)=>{if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(t.key)){let e=s.a,B=s.d;switch(t.key){case"ArrowUp":e+=t.shiftKey?1:5;break;case"ArrowDown":e-=t.shiftKey?1:5;break;case"ArrowRight":B+=t.shiftKey?1:5;break;case"ArrowLeft":B-=t.shiftKey?1:5}B=B<this.scale.time.min?this.scale.time.min:B>this.scale.time.max?this.scale.time.max:B,e=e<this.scale.value.min?this.scale.value.min:e>this.scale.value.max?this.scale.value.max:e,B===s.d&&e===s.a||(s.d=B,s.a=e,"default"===s.name&&(this.d=s.d,this.a=s.a),this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("htd-curves-change",{detail:{name:s.name,a:s.a,d:s.d,k:this.k,label:s.label},bubbles:!0}))),t.preventDefault()}}),N.filter((t,s,e)=>this.interactive&&!select(e[s]).select(".curve").classed("interactive")).select(".curve").classed("interactive",!0).attr("tabindex",0).call(drag().subject(t=>({x:t.x,y:t.y})).on("start",t=>{select(t.currentTarget).classed("dragging",!0)}).on("drag",(t,s)=>{this.drag=!0;const e=s.d-I.invert(t.x),B=e<0?0:e>s.d?s.d:e,i=c.invert(t.y),F=i<=0?.001:i>s.a?s.a:i,Q=HTDMath.adv2k(s.a,B,F);this.k=Q<HTDMath.k.MIN?HTDMath.k.MIN:Q>HTDMath.k.MAX?HTDMath.k.MAX:Q,this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("htd-curves-change",{detail:{name:s.name,a:s.a,d:s.d,k:this.k,label:s.label},bubbles:!0}))}).on("end",t=>{select(t.currentTarget).classed("dragging",!1)})).on("keydown",(t,s)=>{if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){let{k:e}=this;switch(t.key){case"ArrowUp":case"ArrowLeft":e*=t.shiftKey?.95:.85;break;case"ArrowDown":case"ArrowRight":e*=t.shiftKey?1/.95:1/.85}e=e<HTDMath.k.MIN?HTDMath.k.MIN:e>HTDMath.k.MAX?HTDMath.k.MAX:e,e!==this.k&&(this.k=e,this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("htd-curves-change",{detail:{name:s.name,a:s.a,d:s.d,k:this.k,label:s.label},bubbles:!0}))),t.preventDefault()}});const D=N.filter((t,s,e)=>(!this.interactive||t.trial)&&select(e[s]).select(".body").classed("interactive"));D.classed("interactive",!1),D.select(".fill").attr("tabindex",null).on("drag",null).on("keydown",null),D.select(".bar").on("drag",null).on("keydown",null),N.filter((t,s,e)=>(!this.interactive||t.trial)&&select(e[s]).select(".top-point").classed("interact")).select(".top-point").classed("interact",!1).on("drag",null).on("keydown",null),N.filter((t,s,e)=>!this.interactive&&select(e[s]).select(".curve").classed("interactive")).select(".curve").classed("interactive",!1).attr("tabindex",null).on("drag",null).on("keydown",null),N.filter(t=>t.new).each(()=>{u.selectAll(".gradient .animation").transition().duration(g).delay(g+g/10).ease(linear$1).attrTween("offset",()=>interpolate$1(1,0))}),N.filter(t=>t.new).selectAll(".bar .line").transition().duration(g).ease(linear$1).attrTween("stroke-dasharray",(t,s,e)=>{const B=e[s].getTotalLength();return interpolate$1(`0,${B}`,`${B},${B}`)}),N.filter(t=>t.new).selectAll(".point").transition().duration(g/10).delay(g).ease(linear$1).attrTween("opacity",()=>interpolate$1(0,1)),N.filter(t=>t.new).selectAll(".curve .path").transition().duration(g).delay(g+g/10).ease(linear$1).attrTween("stroke-dasharray",(t,s,e)=>{const B=e[s].getTotalLength();return interpolate$1(`0,${B}`,`${B},0`)}).on("end",t=>{t.new=!1,this.dispatchEvent(new CustomEvent("discountable-response",{detail:{trial:this.trialCount,as:this.as,ds:this.ds,al:this.al,dl:this.dl,response:this.response},bubbles:!0}))}),N.filter(t=>"s"===t.label).raise(),N.filter(t=>"l"===t.label).lower(),L.select(".fill .region").transition().duration(this.drag?0:this.firstUpdate?2*g:g).ease(cubicOut).attrTween("d",(t,s,e)=>{const B=e[s],i=interpolate$1(void 0!==B.a?B.a:t.a,t.a),F=interpolate$1(void 0!==B.d?B.d:t.d,t.d);return t=>{B.a=i(t),B.d=F(t);const s=range$1(I(B.d),I(0),-1).map(t=>({d:I.invert(t),v:HTDMath.adk2v(B.a,B.d-I.invert(t),this.k)}));return n([...s,{d:0,v:0},{d:B.d,v:0}])}}),L.selectAll(".bar .line").transition().duration(this.drag?0:this.firstUpdate?2*g:g).ease(cubicOut).attrTween("x1",(t,s,e)=>{const B=e[s],i=interpolate$1(void 0!==B.d?B.d:t.d,t.d);return t=>(B.d=i(t),`${I(B.d)}`)}).attrTween("x2",(t,s,e)=>{const B=e[s],i=interpolate$1(void 0!==B.d?B.d:t.d,t.d);return t=>(B.d=i(t),`${I(B.d)}`)}).attr("y1",c(0)).attrTween("y2",(t,s,e)=>{const B=e[s],i=interpolate$1(void 0!==B.a?B.a:t.a,t.a);return t=>(B.a=i(t),`${c(B.a)}`)}),L.selectAll(".point").transition().duration(this.drag?0:this.firstUpdate?2*g:g).ease(cubicOut).attrTween("transform",(t,s,e)=>{const B=e[s],i=interpolate$1(void 0!==B.d?B.d:t.d,t.d),F=interpolate$1(void 0!==B.a?B.a:t.a,t.a);return t=>(B.d=i(t),B.a=F(t),`translate(${I(B.d)}, ${c(B.a)})`)}),N.select(".point .label").text(t=>t.label),L.selectAll(".curve .path").transition().duration(this.drag?0:this.firstUpdate?2*g:g).ease(cubicOut).attrTween("d",(t,s,e)=>{const B=e[s],i=interpolate$1(void 0!==B.a?B.a:t.a,t.a),F=interpolate$1(void 0!==B.d?B.d:t.d,t.d);return t=>{B.a=i(t),B.d=F(t);const s=range$1(I(B.d),I(0),-1).map(t=>({d:I.invert(t),v:HTDMath.adk2v(B.a,B.d-I.invert(t),this.k)}));return n(s)}}),L.exit().remove(),this.drag=!1,this.firstUpdate=!1}}customElements.define("htd-curves",HTDCurves);var WorkerFactory$1=createBase64WorkerFactory("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgdmFyIGRpc3RyaWJ1dGlvbnMkMSA9IHtleHBvcnRzOiB7fX07CgogIHZhciBkaXN0cmlidXRpb25zID0gZGlzdHJpYnV0aW9ucyQxLmV4cG9ydHM7CiAgKGZ1bmN0aW9uIChtb2R1bGUpIHsKCiAgICAvLyBBIG51bWJlciBvZiBsb2cgcHJvYmFiaWxpdHkgZGVuc2l0eSBmdW5jdGlvbnMgKFBERikuIE5hbWluZyBhbmQgcGFyYW1ldGVyaXphdGlvbgogICAgLy8gc2hvdWxkIG1hdGNoIFIncywgZXhjZXB0IGZvciB0aGF0IGFsbCBmdW5jdGlvbnMgcmVzaWRlIGluIGFuIGxkIG9iamVjdCAoCiAgICAvLyBhcyBpbiAibG9nIGRlbnNpdHkiKSwgc28gdG8gZ2V0IGEgbm9ybWFsIGxvZyBkZW5zaXR5IHlvdSB3b3VsZCB3cml0ZQogICAgLy8gbGQubm9ybSguLi4pLgogICAgLy8gTW9zdCBvZiB0aGUgY29kZSBiZWxvdyBpcyBkaXJlY3RseSB0YWtlbiBmcm9tIHRoZSBncmVhdCBKc3RhdCBwcm9qZWN0CiAgICAvLyAoaHR0cHM6Ly9naXRodWIuY29tL2pzdGF0Lykgd2hpY2ggaW5jbHVkZXMgUERGIGZvciBtYW55IGNvbW1vbiBwcm9iYWJpbGl0eQogICAgLy8gZGlzdHJpYnV0aW9ucy4gV2hhdCBJIGhhdmUgZG9uZSBpcyBvbmx5IHRvIGNvbnZlcnQgdGhlc2UgdG8gbG9nIFBERnMuCgogICAgLyoKICAgIE9yaWdpbmFsIHdvcmsgQ29weXJpZ2h0IChjKSAyMDEzIGpTdGF0CiAgICBNb2RpZmllZCB3b3JrIENvcHlyaWdodCAoYykgMjAxNSBSYXNtdXMgQsOlw6V0aCAKICAgIAlQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5CiAgICBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29mdHdhcmUiKSwgdG8gZGVhbAogICAgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cwogICAgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbAogICAgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzCiAgICBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgogICAgCVRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluCiAgICBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KICAgIAlUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUgogICAgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCiAgICBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUKICAgIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIKICAgIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sCiAgICBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOCiAgICBUSEUgU09GVFdBUkUuCiAgICAJKi8KCiAgICAvLyBUaGlzIGJvaWxlciBwbGF0ZSBjb2RlIGhlcmUgaXMgdGFrZW4gZnJvbToKICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWQvYmxvYi9tYXN0ZXIvdGVtcGxhdGVzL3JldHVybkV4cG9ydHMuanMKICAgIC8vIEl0IHNob3VsZCBtYWtlIHNodXJlIHRoYXQgbW9kdWxlIGNhbiBiZSBpbXBvcnRlZCBib3RoIGluIHRoZSBicm93c2VyLAogICAgLy8gTm9kZSwgYW5kIGJ5IHVzaW5nIHRoZSBBc3luY2hyb25vdXMgTW9kdWxlIERlZmluaXRpb24gc3RhbmRhcmQuCiAgICAvLyBJZiB0aGlzIG1vZHVsZSBpcyBsb2FkZWQgaW4gdGhlIGJyb3dzZXIgaXQgd2lsbCBjcmVhdGVkIHRoZSBnbG9iYWwKICAgIC8vIG9iamVjdCBsZCAuCiAgICAoZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHsKICAgICAgaWYgKG1vZHVsZS5leHBvcnRzKSB7CiAgICAgICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0CiAgICAgICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsCiAgICAgICAgLy8gbGlrZSBOb2RlLgogICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpCiAgICAgICAgcm9vdC5sZCA9IGZhY3RvcnkoKTsKICAgICAgfQogICAgfSkoZGlzdHJpYnV0aW9ucywgZnVuY3Rpb24gKCkgewogICAgICAvLyBPYmplY3QgdG8gaG9sZCB0aGUgZnVuY3Rpb25zIHRvIGJlIGV4cG9ydGVkLgogICAgICB2YXIgbGQgPSB7fTsKCiAgICAgIC8vLy8vLy8vLy8gSGVscGVyIGZ1bmN0aW9ucyAvLy8vLy8vLy8vCiAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgICB2YXIgbGdhbW1hID0gZnVuY3Rpb24gKHgpIHsKICAgICAgICB2YXIgaiA9IDA7CiAgICAgICAgdmFyIGNvZiA9IFs3Ni4xODAwOTE3Mjk0NzE0NiwgLTg2LjUwNTMyMDMyOTQxNjc4LCAyNC4wMTQwOTgyNDA4MzA5MSwgLTEuMjMxNzM5NTcyNDUwMTU1LCAwLjEyMDg2NTA5NzM4NjYxNzllLTIsIC01Mzk1MjM5Mzg0OTUzZS0xOF07CiAgICAgICAgdmFyIHNlciA9IDEuMDAwMDAwMDAwMTkwMDE1OwogICAgICAgIHZhciB4eCwgeSwgdG1wOwogICAgICAgIHRtcCA9ICh5ID0geHggPSB4KSArIDUuNTsKICAgICAgICB0bXAgLT0gKHh4ICsgMC41KSAqIGxvZyh0bXApOwogICAgICAgIGZvciAoOyBqIDwgNjsgaisrKSBzZXIgKz0gY29mW2pdIC8gKyt5OwogICAgICAgIHJldHVybiBsb2coMi41MDY2MjgyNzQ2MzEwMDA1ICogc2VyIC8geHgpIC0gdG1wOwogICAgICB9OwogICAgICBsZC5sZ2FtbWEgPSBsZ2FtbWE7CiAgICAgIHZhciBsZmFjdG9yaWFsID0gZnVuY3Rpb24gKG4pIHsKICAgICAgICByZXR1cm4gbiA8IDAgPyBOYU4gOiBsZ2FtbWEobiArIDEpOwogICAgICB9OwogICAgICBsZC5sZmFjdG9yaWFsID0gbGZhY3RvcmlhbDsKICAgICAgdmFyIGxjaG9vc2UgPSBmdW5jdGlvbiAobiwgaykgewogICAgICAgIHJldHVybiBsZmFjdG9yaWFsKG4pIC0gbGZhY3RvcmlhbChrKSAtIGxmYWN0b3JpYWwobiAtIGspOwogICAgICB9OwogICAgICBsZC5sY2hvb3NlID0gbGNob29zZTsKICAgICAgdmFyIGxiZXRhID0gZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICByZXR1cm4gbGdhbW1hKGEpICsgbGdhbW1hKGIpIC0gbGdhbW1hKGEgKyBiKTsKICAgICAgfTsKICAgICAgbGQubGJldGEgPSBsYmV0YTsKICAgICAgdmFyIGxvZyA9IE1hdGgubG9nOwogICAgICB2YXIgZXhwID0gTWF0aC5leHA7CiAgICAgIHZhciBhYnMgPSBNYXRoLmFiczsKICAgICAgdmFyIHBvdyA9IE1hdGgucG93OwogICAgICB2YXIgc3FydCA9IE1hdGguc3FydDsKICAgICAgdmFyIHBpID0gTWF0aC5QSTsKCiAgICAgIC8vLy8vLy8vLy8gQ29udGlub3VzIGRpc3RyaWJ1dGlvbnMgLy8vLy8vLy8vLwogICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAgIGxkLmJldGEgPSBmdW5jdGlvbiAoeCwgc2hhcGUxLCBzaGFwZTIpIHsKICAgICAgICBpZiAoeCA+IDEgfHwgeCA8IDApIHsKICAgICAgICAgIHJldHVybiAtSW5maW5pdHk7CiAgICAgICAgfQogICAgICAgIGlmIChzaGFwZTEgPT09IDEgJiYgc2hhcGUyID09PSAxKSB7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIChzaGFwZTEgLSAxKSAqIGxvZyh4KSArIChzaGFwZTIgLSAxKSAqIGxvZygxIC0geCkgLSBsYmV0YShzaGFwZTEsIHNoYXBlMik7CiAgICAgICAgfQogICAgICB9OwogICAgICBsZC5jYXVjaHkgPSBmdW5jdGlvbiAoeCwgbG9jYXRpb24sIHNjYWxlKSB7CiAgICAgICAgcmV0dXJuIGxvZyhzY2FsZSkgLSBsb2cocG93KHggLSBsb2NhdGlvbiwgMikgKyBwb3coc2NhbGUsIDIpKSAtIGxvZyhwaSk7CiAgICAgIH07CiAgICAgIGxkLm5vcm0gPSBmdW5jdGlvbiAoeCwgbWVhbiwgc2QpIHsKICAgICAgICByZXR1cm4gLTAuNSAqIGxvZygyICogcGkpIC0gbG9nKHNkKSAtIHBvdyh4IC0gbWVhbiwgMikgLyAoMiAqIHNkICogc2QpOwogICAgICB9OwoKICAgICAgLy8gQSBiaXZhcmlhdGUgTm9ybWFsIGRpc3RyaWJ1dGlvbiBwYXJhbWV0ZXJpemVkIGJ5IGFycmF5cyBvZiB0d28gbWVhbnMgYW5kIFNEcywgYW5kIAogICAgICAvLyB0aGUgY29ycmVsYXRpb24uCiAgICAgIGxkLmJpdmFybm9ybSA9IGZ1bmN0aW9uICh4LCBtZWFuLCBzZCwgY29ycikgewogICAgICAgIHZhciB6ID0gcG93KHhbMF0gLSBtZWFuWzBdLCAyKSAvIHBvdyhzZFswXSwgMikgKyBwb3coeFsxXSAtIG1lYW5bMV0sIDIpIC8gcG93KHNkWzFdLCAyKSAtIDIgKiBjb3JyICogKHhbMF0gLSBtZWFuWzBdKSAqICh4WzFdIC0gbWVhblsxXSkgLyAoc2RbMF0gKiBzZFsxXSk7CiAgICAgICAgdmFyIG5vcm1hbGl6aW5nX2ZhY3RvciA9IC0obG9nKDIpICsgbG9nKHBpKSArIGxvZyhzZFswXSkgKyBsb2coc2RbMV0pICsgMC41ICogbG9nKDEgLSBwb3coY29yciwgMikpKTsKICAgICAgICB2YXIgYml2YXJfbG9nX2RlbnMgPSBub3JtYWxpemluZ19mYWN0b3IgLSB6IC8gKDIgKiAoMSAtIHBvdyhjb3JyLCAyKSkpOwogICAgICAgIHJldHVybiBiaXZhcl9sb2dfZGVuczsKICAgICAgfTsKICAgICAgbGQubGFwbGFjZSA9IGZ1bmN0aW9uICh4LCBsb2NhdGlvbiwgc2NhbGUpIHsKICAgICAgICByZXR1cm4gLWFicyh4IC0gbG9jYXRpb24pIC8gc2NhbGUgLSBsb2coMiAqIHNjYWxlKTsKICAgICAgfTsKICAgICAgbGQuZGV4cCA9IGxkLmxhcGxhY2U7CiAgICAgIGxkLmdhbW1hID0gZnVuY3Rpb24gKHgsIHNoYXBlLCByYXRlKSB7CiAgICAgICAgdmFyIHNjYWxlID0gMSAvIHJhdGU7CiAgICAgICAgaWYgKHggPCAwKSB7CiAgICAgICAgICByZXR1cm4gLUluZmluaXR5OwogICAgICAgIH0KICAgICAgICBpZiAoeCA9PT0gMCAmJiBzaGFwZSA9PT0gMSkgewogICAgICAgICAgcmV0dXJuIC1sb2coc2NhbGUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gKHNoYXBlIC0gMSkgKiBsb2coeCkgLSB4IC8gc2NhbGUgLSBsZ2FtbWEoc2hhcGUpIC0gc2hhcGUgKiBsb2coc2NhbGUpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgbGQuaW52Z2FtbWEgPSBmdW5jdGlvbiAoeCwgc2hhcGUsIHNjYWxlKSB7CiAgICAgICAgaWYgKHggPD0gMCkgewogICAgICAgICAgcmV0dXJuIC1JbmZpbml0eTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIC0oc2hhcGUgKyAxKSAqIGxvZyh4KSAtIHNjYWxlIC8geCAtIGxnYW1tYShzaGFwZSkgKyBzaGFwZSAqIGxvZyhzY2FsZSk7CiAgICAgIH07CiAgICAgIGxkLmxub3JtID0gZnVuY3Rpb24gKHgsIG1lYW5sb2csIHNkbG9nKSB7CiAgICAgICAgaWYgKHggPD0gMCkgewogICAgICAgICAgcmV0dXJuIC1JbmZpbml0eTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIC1sb2coeCkgLSAwLjUgKiBsb2coMiAqIHBpKSAtIGxvZyhzZGxvZykgLSBwb3cobG9nKHgpIC0gbWVhbmxvZywgMikgLyAoMiAqIHNkbG9nICogc2Rsb2cpOwogICAgICB9OwogICAgICBsZC5wYXJldG8gPSBmdW5jdGlvbiAoeCwgc2NhbGUsIHNoYXBlKSB7CiAgICAgICAgaWYgKHggPCBzY2FsZSkgewogICAgICAgICAgcmV0dXJuIC1JbmZpbml0eTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGxvZyhzaGFwZSkgKyBzaGFwZSAqIGxvZyhzY2FsZSkgLSAoc2hhcGUgKyAxKSAqIGxvZyh4KTsKICAgICAgfTsKICAgICAgbGQudCA9IGZ1bmN0aW9uICh4LCBsb2NhdGlvbiwgc2NhbGUsIGRmKSB7CiAgICAgICAgZGYgPSBkZiA+IDFlMTAwID8gMWUxMDAgOiBkZjsKICAgICAgICByZXR1cm4gbGdhbW1hKChkZiArIDEpIC8gMikgLSBsZ2FtbWEoZGYgLyAyKSAtIGxvZyhzcXJ0KHBpICogZGYpICogc2NhbGUpICsgbG9nKHBvdygxICsgMSAvIGRmICogcG93KCh4IC0gbG9jYXRpb24pIC8gc2NhbGUsIDIpLCAtKGRmICsgMSkgLyAyKSk7CiAgICAgIH07CgogICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGphdmFzY3JpcHQgdHJhbnNsYXRpb24gb2YgdGhlIFIgY29kZSB1c2VkIHRvIGV2YWx1YXRlCiAgICAgIC8vIHRoZSBsb2cgZGVuc2l0eSBvZiBhIHdlaWJ1bGwgZGlzdHJpYnV0aW9uOiAKICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3djaC9yLXNvdXJjZS9ibG9iL2IxNTZlM2E3MTE5NjdmNTgxMzFlMjNjMWIxZGMxZWE5MGUyZjBjNDMvc3JjL25tYXRoL2R3ZWlidWxsLmMKICAgICAgbGQud2VpYnVsbCA9IGZ1bmN0aW9uICh4LCBzaGFwZSwgc2NhbGUpIHsKICAgICAgICBpZiAoeCA8IDApIHJldHVybiAtSW5maW5pdHk7CiAgICAgICAgaWYgKHggPT09IDAgJiYgc2hhcGUgPCAxKSByZXR1cm4gSW5maW5pdHk7CiAgICAgICAgdmFyIHRtcDEgPSBwb3coeCAvIHNjYWxlLCBzaGFwZSAtIDEpOwogICAgICAgIHZhciB0bXAyID0gdG1wMSAqICh4IC8gc2NhbGUpOwogICAgICAgIHJldHVybiAtdG1wMiArIGxvZyhzaGFwZSAqIHRtcDEgLyBzY2FsZSk7CiAgICAgIH07CgogICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGphdmFzY3JpcHQgdHJhbnNsYXRpb24gb2YgdGhlIFIgY29kZSB1c2VkIHRvIGV2YWx1YXRlCiAgICAgIC8vIHRoZSBsb2cgZGVuc2l0eSBvZiBhIGxvZ2lzdGljIGRpc3RyaWJ1dGlvbjogCiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS93Y2gvci1zb3VyY2UvYmxvYi9iMTU2ZTNhNzExOTY3ZjU4MTMxZTIzYzFiMWRjMWVhOTBlMmYwYzQzL3NyYy9ubWF0aC9kbG9naXMuYwogICAgICBsZC5sb2dpcyA9IGZ1bmN0aW9uICh4LCBsb2NhdGlvbiwgc2NhbGUpIHsKICAgICAgICB4ID0gYWJzKCh4IC0gbG9jYXRpb24pIC8gc2NhbGUpOwogICAgICAgIHZhciBlID0gZXhwKC14KTsKICAgICAgICB2YXIgZiA9IDEuMCArIGU7CiAgICAgICAgcmV0dXJuIC0oeCArIGxvZyhzY2FsZSAqIGYgKiBmKSk7CiAgICAgIH07CiAgICAgIGxkLmRpcmljaGxldCA9IGZ1bmN0aW9uICh4LCBhbHBoYSkgewogICAgICAgIHZhciBzdW1fYWxwaGEgPSAwOwogICAgICAgIHZhciBzdW1fbGdhbW1hX2FscGhhID0gMDsKICAgICAgICB2YXIgc3VtX2FscGhhX3N1Yl8xX2xvZ194ID0gMDsKICAgICAgICB2YXIgbiA9IGFscGhhLmxlbmd0aDsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgICAgc3VtX2FscGhhICs9IGFscGhhW2ldOwogICAgICAgICAgc3VtX2xnYW1tYV9hbHBoYSArPSBsZ2FtbWEoYWxwaGFbaV0pOwogICAgICAgICAgc3VtX2FscGhhX3N1Yl8xX2xvZ194ICs9IChhbHBoYVtpXSAtIDEpICogbG9nKHhbaV0pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbGdhbW1hKHN1bV9hbHBoYSkgLSBzdW1fbGdhbW1hX2FscGhhICsgc3VtX2FscGhhX3N1Yl8xX2xvZ194OwogICAgICB9OwogICAgICBsZC5leHAgPSBmdW5jdGlvbiAoeCwgcmF0ZSkgewogICAgICAgIHJldHVybiB4IDwgMCA/IC1JbmZpbml0eSA6IGxvZyhyYXRlKSAtIHJhdGUgKiB4OwogICAgICB9OwogICAgICBsZC51bmlmID0gZnVuY3Rpb24gKHgsIG1pbiwgbWF4KSB7CiAgICAgICAgcmV0dXJuIHggPCBtaW4gfHwgeCA+IG1heCA/IC1JbmZpbml0eSA6IGxvZygxIC8gKG1heCAtIG1pbikpOwogICAgICB9OwoKICAgICAgLy8vLy8vLy8vLyBEaXNjcmV0ZSBkaXN0cmlidXRpb25zIC8vLy8vLy8vLy8KICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAgIGxkLmJlcm4gPSBmdW5jdGlvbiAoeCwgcHJvYikgewogICAgICAgIHJldHVybiAhKHggPT09IDAgfHwgeCA9PT0gMSkgPyAtSW5maW5pdHkgOiBsb2coeCAqIHByb2IgKyAoMSAtIHgpICogKDEgLSBwcm9iKSk7CiAgICAgIH07CiAgICAgIGxkLmNhdCA9IGZ1bmN0aW9uICh4LCBwcm9icykgewogICAgICAgIGlmICh4IDwgMSB8fCB4ID4gcHJvYnMubGVuZ3RoKSB7CiAgICAgICAgICByZXR1cm4gLUluZmluaXR5OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gbG9nKHByb2JzW3ggLSAxXSk7CiAgICAgICAgfQogICAgICB9OwogICAgICBsZC5iaW5vbSA9IGZ1bmN0aW9uICh4LCBzaXplLCBwcm9iKSB7CiAgICAgICAgaWYgKHggPiBzaXplIHx8IHggPCAwKSB7CiAgICAgICAgICByZXR1cm4gLUluZmluaXR5OwogICAgICAgIH0KICAgICAgICBpZiAocHJvYiA9PT0gMCB8fCBwcm9iID09PSAxKSB7CiAgICAgICAgICByZXR1cm4gc2l6ZSAqIHByb2IgPT09IHggPyAwIDogLUluZmluaXR5OwogICAgICAgIH0KICAgICAgICByZXR1cm4gbGNob29zZShzaXplLCB4KSArIHggKiBsb2cocHJvYikgKyAoc2l6ZSAtIHgpICogbG9nKDEgLSBwcm9iKTsKICAgICAgfTsKICAgICAgbGQubmJpbm9tID0gZnVuY3Rpb24gKHgsIHNpemUsIHByb2IpIHsKICAgICAgICBpZiAoeCA8IDApIHsKICAgICAgICAgIHJldHVybiAtSW5maW5pdHk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBsY2hvb3NlKHggKyBzaXplIC0gMSwgc2l6ZSAtIDEpICsgeCAqIGxvZygxIC0gcHJvYikgKyBzaXplICogbG9nKHByb2IpOwogICAgICB9OwogICAgICBsZC5oeXBlciA9IGZ1bmN0aW9uICh4LCBtLCBuLCBrKSB7CiAgICAgICAgaWYgKHggPCAwIHx8IHggPiBrKSB7CiAgICAgICAgICByZXR1cm4gLUluZmluaXR5OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gbGNob29zZShtLCB4KSArIGxjaG9vc2UobiwgayAtIHgpIC0gbGNob29zZShtICsgbiwgayk7CiAgICAgICAgfQogICAgICB9OwogICAgICBsZC5wb2lzID0gZnVuY3Rpb24gKHgsIGxhbWJkYSkgewogICAgICAgIHJldHVybiB4IDwgMCA/IC1JbmZpbml0eSA6IGxvZyhsYW1iZGEpICogeCAtIGxhbWJkYSAtIGxmYWN0b3JpYWwoeCk7CiAgICAgIH07CiAgICAgIHJldHVybiBsZDsKICAgIH0pOwogIH0pKGRpc3RyaWJ1dGlvbnMkMSk7CiAgdmFyIGRpc3RyaWJ1dGlvbnNFeHBvcnRzID0gZGlzdHJpYnV0aW9ucyQxLmV4cG9ydHM7CgogIHZhciBtY21jJDEgPSB7ZXhwb3J0czoge319OwoKICB2YXIgbWNtYyA9IG1jbWMkMS5leHBvcnRzOwogIChmdW5jdGlvbiAobW9kdWxlKSB7CgogICAgLy8gVGhpcyBib2lsZXIgcGxhdGUgY29kZSBoZXJlIGlzIHRha2VuIGZyb206CiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdW1kanMvdW1kL2Jsb2IvbWFzdGVyL3RlbXBsYXRlcy9yZXR1cm5FeHBvcnRzLmpzCiAgICAvLyBJdCBzaG91bGQgbWFrZSBzaHVyZSB0aGF0IG1vZHVsZSBjYW4gYmUgaW1wb3J0ZWQgYm90aCBpbiB0aGUgYnJvd3NlciwKICAgIC8vIE5vZGUsIGFuZCBieSB1c2luZyB0aGUgQXN5bmNocm9ub3VzIE1vZHVsZSBEZWZpbml0aW9uIHN0YW5kYXJkLgogICAgLy8gSWYgdGhpcyBtb2R1bGUgaXMgbG9hZGVkIGluIHRoZSBicm93c2VyIGl0IHdpbGwgY3JlYXRlZCB0aGUgZ2xvYmFsCiAgICAvLyBvYmplY3QgbWNtYyAuCiAgICAoZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHsKICAgICAgaWYgKG1vZHVsZS5leHBvcnRzKSB7CiAgICAgICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0CiAgICAgICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsCiAgICAgICAgLy8gbGlrZSBOb2RlLgogICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpCiAgICAgICAgcm9vdC5tY21jID0gZmFjdG9yeSgpOwogICAgICB9CiAgICB9KShtY21jLCBmdW5jdGlvbiAoKSB7CiAgICAgIC8vLyBUaGUgYWN0dWFsIG1vZHVsZSBjb2RlIHN0YXJ0cyBoZXJlIC8vLwogICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gIAoKICAgICAgLy8vLy8vLy8vLyBIZWxwZXIgRnVuY3Rpb25zIC8vLy8vLy8vLy8KICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAgIC8qKiBSZXR1cm5zIGEgcmFuZG9tIHJlYWwgbnVtYmVyIGJldHdlZW4gbWluIGFuZCBtYXggKi8KICAgICAgdmFyIHJ1bmlmID0gZnVuY3Rpb24gKG1pbiwgbWF4KSB7CiAgICAgICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSArIG1pbjsKICAgICAgfTsKCiAgICAgIC8qKiBSZXR1cm5zIGEgcmFuZG9tIGludGVnZXIgYmV0d2VlbiBtaW4gYW5kIG1heCAqLwogICAgICB2YXIgcnVuaWZfZGlzY3JldGUgPSBmdW5jdGlvbiAobWluLCBtYXgpIHsKICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjsKICAgICAgfTsKCiAgICAgIC8qKiBSZXR1cm5zIGEgcmFuZG9tIHJlYWwgbnVtYmVyIGZyb20gYSBub3JtYWwgZGlzdHJpYmJ1dGlvbiBkZWZpbmVkCiAgICAgICAqICBieSBtZWFuIGFuZCBzZC4gCiAgICAgICAqICBBZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2pzdGF0L2pzdGF0L2Jsb2IvbWFzdGVyL3NyYy9zcGVjaWFsLmpzICovCiAgICAgIHZhciBybm9ybSA9IGZ1bmN0aW9uIChtZWFuLCBzZCkgewogICAgICAgIHZhciB1LCB2LCB4LCB5LCBxOwogICAgICAgIGRvIHsKICAgICAgICAgIHUgPSBNYXRoLnJhbmRvbSgpOwogICAgICAgICAgdiA9IDEuNzE1NiAqIChNYXRoLnJhbmRvbSgpIC0gMC41KTsKICAgICAgICAgIHggPSB1IC0gMC40NDk4NzE7CiAgICAgICAgICB5ID0gTWF0aC5hYnModikgKyAwLjM4NjU5NTsKICAgICAgICAgIHEgPSB4ICogeCArIHkgKiAoMC4xOTYwMCAqIHkgLSAwLjI1NDcyICogeCk7CiAgICAgICAgfSB3aGlsZSAocSA+IDAuMjc1OTcgJiYgKHEgPiAwLjI3ODQ2IHx8IHYgKiB2ID4gLTQgKiBNYXRoLmxvZyh1KSAqIHUgKiB1KSk7CiAgICAgICAgcmV0dXJuIHYgLyB1ICogc2QgKyBtZWFuOwogICAgICB9OwoKICAgICAgLyoqIFJldHVybnMgYSBkZWVwIGNsb25lIG9mIHNyYywgc29ydCBvZi4uLiBJdCBvbmx5IGNvcGllcyBhIGxpbWl0ZWQKICAgICAgICogbnVtYmVyIG9mIHR5cGVzIGFuZCwgZm9yIGV4YW1wbGUsIGZ1bmN0aW9uIGFyZSBub3QgY29waWVkLiAKICAgICAgICogRnJvbSBodHRwOi8vZGF2aWR3YWxzaC5uYW1lL2phdmFzY3JpcHQtY2xvbmUKICAgICAgICovCiAgICAgIHZhciBkZWVwX2Nsb25lID0gZnVuY3Rpb24gKHNyYykgewogICAgICAgIGZ1bmN0aW9uIG1peGluKGRlc3QsIHNvdXJjZSwgY29weUZ1bmMpIHsKICAgICAgICAgIHZhciBuYW1lLAogICAgICAgICAgICBzLAogICAgICAgICAgICBlbXB0eSA9IHt9OwogICAgICAgICAgZm9yIChuYW1lIGluIHNvdXJjZSkgewogICAgICAgICAgICAvLyB0aGUgKCEobmFtZSBpbiBlbXB0eSkgfHwgZW1wdHlbbmFtZV0gIT09IHMpIGNvbmRpdGlvbiBhdm9pZHMgY29weWluZyBwcm9wZXJ0aWVzIGluICJzb3VyY2UiCiAgICAgICAgICAgIC8vIGluaGVyaXRlZCBmcm9tIE9iamVjdC5wcm90b3R5cGUuCSBGb3IgZXhhbXBsZSwgaWYgZGVzdCBoYXMgYSBjdXN0b20gdG9TdHJpbmcoKSBtZXRob2QsCiAgICAgICAgICAgIC8vIGRvbid0IG92ZXJ3cml0ZSBpdCB3aXRoIHRoZSB0b1N0cmluZygpIG1ldGhvZCB0aGF0IHNvdXJjZSBpbmhlcml0ZWQgZnJvbSBPYmplY3QucHJvdG90eXBlCiAgICAgICAgICAgIHMgPSBzb3VyY2VbbmFtZV07CiAgICAgICAgICAgIGlmICghKG5hbWUgaW4gZGVzdCkgfHwgZGVzdFtuYW1lXSAhPT0gcyAmJiAoIShuYW1lIGluIGVtcHR5KSB8fCBlbXB0eVtuYW1lXSAhPT0gcykpIHsKICAgICAgICAgICAgICBkZXN0W25hbWVdID0gY29weUZ1bmMgPyBjb3B5RnVuYyhzKSA6IHM7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBkZXN0OwogICAgICAgIH0KICAgICAgICBpZiAoIXNyYyB8fCB0eXBlb2Ygc3JjICE9ICJvYmplY3QiIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChzcmMpID09PSAiW29iamVjdCBGdW5jdGlvbl0iKSB7CiAgICAgICAgICAvLyBudWxsLCB1bmRlZmluZWQsIGFueSBub24tb2JqZWN0LCBvciBmdW5jdGlvbgogICAgICAgICAgcmV0dXJuIHNyYzsgLy8gYW55dGhpbmcKICAgICAgICB9CiAgICAgICAgaWYgKHNyYy5ub2RlVHlwZSAmJiAiY2xvbmVOb2RlIiBpbiBzcmMpIHsKICAgICAgICAgIC8vIERPTSBOb2RlCiAgICAgICAgICByZXR1cm4gc3JjLmNsb25lTm9kZSh0cnVlKTsgLy8gTm9kZQogICAgICAgIH0KICAgICAgICBpZiAoc3JjIGluc3RhbmNlb2YgRGF0ZSkgewogICAgICAgICAgLy8gRGF0ZQogICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHNyYy5nZXRUaW1lKCkpOyAvLyBEYXRlCiAgICAgICAgfQogICAgICAgIGlmIChzcmMgaW5zdGFuY2VvZiBSZWdFeHApIHsKICAgICAgICAgIC8vIFJlZ0V4cAogICAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoc3JjKTsgLy8gUmVnRXhwCiAgICAgICAgfQogICAgICAgIHZhciByLCBpLCBsOwogICAgICAgIGlmIChzcmMgaW5zdGFuY2VvZiBBcnJheSkgewogICAgICAgICAgLy8gYXJyYXkKICAgICAgICAgIHIgPSBbXTsKICAgICAgICAgIGZvciAoaSA9IDAsIGwgPSBzcmMubGVuZ3RoOyBpIDwgbDsgKytpKSB7CiAgICAgICAgICAgIGlmIChpIGluIHNyYykgewogICAgICAgICAgICAgIHIucHVzaChkZWVwX2Nsb25lKHNyY1tpXSkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIGdlbmVyaWMgb2JqZWN0cwogICAgICAgICAgciA9IHNyYy5jb25zdHJ1Y3RvciA/IG5ldyBzcmMuY29uc3RydWN0b3IoKSA6IHt9OwogICAgICAgIH0KICAgICAgICByZXR1cm4gbWl4aW4ociwgc3JjLCBkZWVwX2Nsb25lKTsKICAgICAgfTsKCiAgICAgIC8qKiBTcGVjaWFsaXplZCBjbG9uZSBmdW5jdGlvbiB0aGF0IG9ubHkgY2xvbmVzIHNjYWxhcnMgYW5kIG5lc3RlZCBhcnJheXMgd2hlcmUKICAgICAgICogZWFjaCBhcnJheSBlaXRoZXIgY29uc2lzdHMgb2YgYWxsIGFycmF5cyBvciBhbGwgbnVtYmVycy4gVGhpcyBmdW5jdGlvbgogICAgICAgKiBpcyBtZWFudCBhcyBhIGZhc3Qgd2F5IG9mIGNsb25pbmcgcGFyYW1ldGVyIGRyYXdzIHdpdGhpbiB0aGUgbWNtYyBzYW1wbGluZwogICAgICAgKiBsb29wLgogICAgICAgKi8KICAgICAgdmFyIGNsb25lX3BhcmFtX2RyYXcgPSBmdW5jdGlvbiAoeCkgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KHgpKSB7CiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh4WzBdKSkgewogICAgICAgICAgICAvLyB4IGlzIGFuIGFycmF5IG9mIGFycmF5cyBzbyB3ZSBuZWVkIHRvIGNsb25lIGl0IHJlY3Vyc2l2ZWx5CiAgICAgICAgICAgIHZhciB4X2NvcHkgPSBbXTsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHgubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICB4X2NvcHkucHVzaChjbG9uZV9wYXJhbV9kcmF3KHhbaV0pKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4geF9jb3B5OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gV2UnbGwgYXNzdW1lIHggaXMgYSBhcnJheXMgb2Ygc2NhbGFycwogICAgICAgICAgICByZXR1cm4geC5zbGljZSgwKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gV2UnbGwgYXNzdW1lIHggaXMgYSBzY2FsYXIKICAgICAgICAgIHJldHVybiB4OwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgb2JqZWN0IGlzIGEgbnVtYmVyLgogICAgICAgKi8KICAgICAgdmFyIGlzX251bWJlciA9IGZ1bmN0aW9uIChvYmplY3QpIHsKICAgICAgICByZXR1cm4gdHlwZW9mIG9iamVjdCA9PSAibnVtYmVyIiB8fCB0eXBlb2Ygb2JqZWN0ID09ICJvYmplY3QiICYmIG9iamVjdC5jb25zdHJ1Y3RvciA9PT0gTnVtYmVyOwogICAgICB9OwoKICAgICAgLyoqCiAgICAgICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGEgKHBvc3NpYmx5IG11bHRpZGltZW5zaW9uYWwvbmVzdGVkKSBhcnJheS4KICAgICAgICogQHBhcmFtIGRpbSAtIEFuIGFycmF5IGdpdmluZyB0aGUgZGltZW5zaW9uIG9mIHRoZSBhcnJheS4gRm9yIGV4YW1wbGUsCiAgICAgICAqICAgWzVdIHdvdWxkIHlpZWxkIGEgNSBlbGVtZW50IGFycmF5LCBhbmQgWzMsM10gd291bGQgeWllbGQgYSAzIGJ5IDMgbWF0cml4LgogICAgICAgKiBAcGFyYW0gaW5pdCAtIEEgdmFsdWUgb3IgYSBmdW5jdGlvbiB1c2VkIHRvIGZpbGwgaW4gdGhlIGVhY2ggZWxlbWVudCBpbgogICAgICAgKiAgIHRoZSBhcnJheS4gSWYgaXQgaXMgYSBmdW5jdGlvbiBpdCBzaG91bGQgdGFrZSBubyBhcmd1bWVudHMsIGl0IHdpbGwgYmUgCiAgICAgICAqICAgZXZhbHVhdGVkIG9uY2UgZm9yIGVhY2ggZWxlbWVudCwgYW5kIGl0J3MgcmV0dXJuIHZhbHVlIHdpbGwgYmUgdXNlZCB0bwogICAgICAgKiAgIGZpbGwgaW4gZWFjaCBlbGVtZW50LgogICAgICAgKiBAZXhhbXBsZSAKICAgICAgICogLy8gVGhlIGZvbGxvd2luZyB3b3VsZCByZXR1cm4gW1sxLDFdLFsxLDFdLFsxLDFdXQogICAgICAgKiBjcmVhdGVfYXJyYXkoWzIsM10sIDEpCiAgICAgICAqLwogICAgICB2YXIgY3JlYXRlX2FycmF5ID0gZnVuY3Rpb24gKGRpbSwgaW5pdCkgewogICAgICAgIHZhciBhcnIgPSBuZXcgQXJyYXkoZGltWzBdKTsKICAgICAgICB2YXIgaTsKICAgICAgICBpZiAoZGltLmxlbmd0aCA9PSAxKSB7CiAgICAgICAgICAvLyBGaWxsIGl0IHVwIHdpdGggaW5pdAogICAgICAgICAgaWYgKHR5cGVvZiBpbml0ID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykgewogICAgICAgICAgICAgIGFycltpXSA9IGluaXQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7CiAgICAgICAgICAgICAgYXJyW2ldID0gaW5pdDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoZGltLmxlbmd0aCA+IDEpIHsKICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykgewogICAgICAgICAgICBhcnJbaV0gPSBjcmVhdGVfYXJyYXkoZGltLnNsaWNlKDEpLCBpbml0KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgImNyZWF0ZV9hcnJheSBjYW4ndCBjcmVhdGUgYSBkaW1lbnNpb25sZXNzIGFycmF5IjsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGFycjsKICAgICAgfTsKCiAgICAgIC8qKgogICAgICAgKiBSZXR1cm4gdGhlIGRpbWVuc2lvbnMgb2YgYSBwb3NzaWJseSBuZXN0ZWQgYXJyYXkgYXMgYW4gYXJyYXkuIEZvciAKICAgICAgICogZXhhbXBsZSwgYXJyYXlfZGltKCBbWzEsIDJdLCBbMSwgMl1dICkgc2hvdWxkIHJldHVybiBbMiwgMl0KICAgICAgICogQXNzdW1lcyB0aGF0IGFsbCBhcnJheXMgaW5zaWRlIGFub3RoZXIgYXJyYXkgYXJlIG9mIHRoZSBzYW1lIGxlbmd0aC4KICAgICAgICogQGV4YW1wbGUKICAgICAgICogLy8gU2hvdWxkIHJldHVybiBbNCwgMiwgMV0KICAgICAgICogYXJyYXlfZGltKGNyZWF0ZV9hcnJheShbNCwgMiwgMV0sIDApKQogICAgICAgKi8KICAgICAgdmFyIGFycmF5X2RpbSA9IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYVswXSkpIHsKICAgICAgICAgIHJldHVybiBbYS5sZW5ndGhdLmNvbmNhdChhcnJheV9kaW0oYVswXSkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gW2EubGVuZ3RoXTsKICAgICAgICB9CiAgICAgIH07CgogICAgICAvKioKICAgICAgICogQ2hlY2tzIGlmIHR3byBhcnJheXMgYXJlIGVxdWFsIGluIHRoZSBzZW5zZSB0aGF0IHRoZXkgY29udGFpbiB0aGUgc2FtZSBlbGVtZW50cwogICAgICAgKiBhcyBqdWRnZWQgYnkgdGhlICI9PSIgb3BlcmF0b3IuIFJldHVybnMgdHJ1ZSBvciBmYWxzZS4KICAgICAgICogQWRhcHRlZCBmcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE0ODUzOTc0LzEwMDE4NDgKICAgICAgICovCiAgICAgIHZhciBhcnJheV9lcXVhbCA9IGZ1bmN0aW9uIChhMSwgYTIpIHsKICAgICAgICBpZiAoYTEubGVuZ3RoICE9IGEyLmxlbmd0aCkgcmV0dXJuIGZhbHNlOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYTEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgbmVzdGVkIGFycmF5cwogICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYTFbaV0pICYmIEFycmF5LmlzQXJyYXkoYTJbaV0pKSB7CiAgICAgICAgICAgIC8vIHJlY3Vyc2UgaW50byB0aGUgbmVzdGVkIGFycmF5cwogICAgICAgICAgICBpZiAoIWFycmF5X2VxdWFsKGExW2ldLCBhMltpXSkpIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0gZWxzZSBpZiAoYTFbaV0gIT0gYTJbaV0pIHsKICAgICAgICAgICAgLy8gV2FybmluZyAtIHR3byBkaWZmZXJlbnQgb2JqZWN0IGluc3RhbmNlcyB3aWxsIG5ldmVyIGJlIGVxdWFsOiB7eDoyMH0gIT0ge3g6MjB9CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH07CgogICAgICAvKioKICAgICAgICogVHJhdmVyc2VzIGEgcG9zc2libHkgbmVzdGVkIGFycmF5IGEgYW5kIGFwcGxpZXMgZnVuIHRvIGFsbCAibGVhZiBub2RlcyIsIAogICAgICAgKiB0aGF0IGlzLCB2YWx1ZXMgdGhhdCBhcmUgbm90IGFycmF5cy4gUmV0dXJucyBhbiBhcnJheSBvZiB0aGUgc2FtZSBzaXplIGFzCiAgICAgICAqIGEuCiAgICAgICAqLwogICAgICB2YXIgbmVzdGVkX2FycmF5X2FwcGx5ID0gZnVuY3Rpb24gKGEsIGZ1bikgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGEpKSB7CiAgICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEFycmF5KGEubGVuZ3RoKTsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICByZXN1bHRbaV0gPSBuZXN0ZWRfYXJyYXlfYXBwbHkoYVtpXSwgZnVuKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmdW4oYSk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgLyoqIFJhbmRvbWl6aW5nIHRoZSBhcnJheSBlbGVtZW50IG9yZGVyIGluLXBsYWNlLiBVc2luZyBEdXJzdGVuZmVsZAogICAgICAgKiBzaHVmZmxlIGFsZ29yaXRobS4gQWRhcHRlZCBmcm9tIGhlcmU6IAogICAgICAgKiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMjY0Njg2NC8xMDAxODQ4CiAgICAgICAqLwogICAgICBmdW5jdGlvbiBzaHVmZmxlX2FycmF5KGFycmF5KSB7CiAgICAgICAgZm9yICh2YXIgaSA9IGFycmF5Lmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHsKICAgICAgICAgIHZhciBqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7CiAgICAgICAgICB2YXIgdGVtcCA9IGFycmF5W2ldOwogICAgICAgICAgYXJyYXlbaV0gPSBhcnJheVtqXTsKICAgICAgICAgIGFycmF5W2pdID0gdGVtcDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGFycmF5OwogICAgICB9CgogICAgICAvKioKICAgICAgICogRG9lcyB0aGUgc2FtZSB0aGluZyBhcyBuZXN0ZWRfYXJyYXlfYXBwbHksIHRoYXQgaXMsIHRyYXZlcnNlcyBhIHBvc3NpYmx5CiAgICAgICAqIG5lc3RlZCBhcnJheSBhIGFuZCBhcHBsaWVzIGZ1biB0byBhbGwgImxlYWYgbm9kZXMiIGFuZCByZXR1cm5zIGFuIGFycmF5IAogICAgICAgKiBvZiB0aGUgc2FtZSBzaXplIGFzIGEuIFRoZSBkaWZmZXJlbmNlIGlzIHRoYXQgbmVzdGVkX2FycmF5X3JhbmRvbV9hcHBseQogICAgICAgKiBicmFuY2hlcyByYW5kb21seS4KICAgICAgICovCiAgICAgIHZhciBuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5ID0gZnVuY3Rpb24gKGEsIGZ1bikgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGEpKSB7CiAgICAgICAgICB2YXIgbGVuID0gYS5sZW5ndGg7CiAgICAgICAgICB2YXIgaTsKICAgICAgICAgIHZhciBhcnJheV9pcyA9IFtdOwogICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgIGFycmF5X2lzW2ldID0gaTsKICAgICAgICAgIH0KICAgICAgICAgIHNodWZmbGVfYXJyYXkoYXJyYXlfaXMpOwogICAgICAgICAgdmFyIHJlc3VsdCA9IFtdOwogICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgIHZhciBhcnJheV9pID0gYXJyYXlfaXNbaV07CiAgICAgICAgICAgIHJlc3VsdFthcnJheV9pXSA9IG5lc3RlZF9hcnJheV9hcHBseShhW2FycmF5X2ldLCBmdW4pOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZ1bihhKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICAvKioKICAgICAgICogQWxsb3dzIGEgcHJldHR5IHdheSBvZiBzZXR0aW5nIGRlZmF1bHQgb3B0aW9ucyB3aGVyZSB0aGUgZGVmdWx0cyBjYW4gYmUKICAgICAgICogb3ZlcnJpZGRlbiBieSBhbiBvcHRpb25zIG9iamVjdC4KICAgICAgICogIEBwYXJhbSBvcHRpb25fbmFtZSAtIHRoZSBuYW1lIG9mIHRoZSBvcHRpb24gYXMgYSBzdHJpbmcKICAgICAgICogIEBwYXJhbSBteV9vcHRpb25zIC0gYW4gb3B0aW9uIG9iamVjdCB0aGF0IGNvdWxkIGhhdmUgb3B0aW9uX25hbWUgCiAgICAgICAqICAgIGFzIGEgbWVtYmVyLgogICAgICAgKiBAcGFyYW0gZGVmYXVsX3ZhbHVlIC0gZGVmdWx0IHZhbHVlIHRoYXQgaXMgcmV0dXJuZWQgaWYgb3B0aW9uX25hbWUgCiAgICAgICAqICAgaXMgbm90IGRlZmluZWQgaW4gbXlfb3B0aW9ucy4KICAgICAgICogQGV4YW1wbGUKICAgICAgICogdmFyIG15X29wdGlvbnMgPSB7cGk6IDMuMTQxNTl9CiAgICAgICAqIHZhciBwaSA9IGdldF9vcHRpb24oInBpIiwgbXlfb3B0aW9ucywgMy4xNCkKICAgICAgICovCiAgICAgIC8vIFByZXR0eSB3YXkgb2Ygc2V0dGluZyBkZWZhdWx0IG9wdGlvbnMgd2hlcmUgdGhlIGRlZmF1bHRzIGNhbiBiZSBvdmVycmlkZGVuCiAgICAgIC8vIGJ5IGFuIG9wdGlvbnMgb2JqZWN0LiBGb3IgZXhhbXBsZToKICAgICAgLy8gdmFyIHBpID0gZ2V0X29wdGlvbigicGkiLCBteV9vcHRpb25zLCAzLjE0KQogICAgICB2YXIgZ2V0X29wdGlvbiA9IGZ1bmN0aW9uIChvcHRpb25fbmFtZSwgb3B0aW9ucywgZGVmYXVsX3ZhbHVlKSB7CiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgICAgICAgcmV0dXJuIG9wdGlvbnMuaGFzT3duUHJvcGVydHkob3B0aW9uX25hbWUpICYmIG9wdGlvbnNbb3B0aW9uX25hbWVdICE9PSB1bmRlZmluZWQgJiYgb3B0aW9uc1tvcHRpb25fbmFtZV0gIT09IG51bGwgPyBvcHRpb25zW29wdGlvbl9uYW1lXSA6IGRlZmF1bF92YWx1ZTsKICAgICAgfTsKCiAgICAgIC8qKiBWZXJzaW9uIG9mIGdldF9vcHRpb24gd2hlcmUgdGhlIG9wdGlvbiBzaG91bGQgYmUgYSBvbmUgb3IgbXVsdGktZGltZW5zaW9uYWwKICAgICAgICogYXJyYXkgYW5kIHdoZXJlIHRoZSBkZWZhdWx0IGNhbiBiZSBvdmVycmlkZGVuIGVpdGhlciBieSBhIHNjYWxhciBvciBieSBhbiBhcnJheS4KICAgICAgICogSWYgaXQncyBhIHNjYWxhciB0aGUgdGhhdCBzY2FsYXIgaXMgdXNlZCB0byBpbml0aWFsaXplIGFuIGFycmF5IHdpdGggCiAgICAgICAqIGRpbSBkaW1lbnNpb25zLgogICAgICAgKiAKICAgICAgICovCiAgICAgIHZhciBnZXRfbXVsdGlkaW1fb3B0aW9uID0gZnVuY3Rpb24gKG9wdGlvbl9uYW1lLCBvcHRpb25zLCBkaW0sIGRlZmF1bF92YWx1ZSkgewogICAgICAgIHZhciB2YWx1ZSA9IGdldF9vcHRpb24ob3B0aW9uX25hbWUsIG9wdGlvbnMsIGRlZmF1bF92YWx1ZSk7CiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkgewogICAgICAgICAgdmFsdWUgPSBjcmVhdGVfYXJyYXkoZGltLCB2YWx1ZSk7CiAgICAgICAgfQogICAgICAgIGlmICghYXJyYXlfZXF1YWwoYXJyYXlfZGltKHZhbHVlKSwgZGltKSkgewogICAgICAgICAgdGhyb3cgIlRoZSBvcHRpb24gIiArIG9wdGlvbl9uYW1lICsgIiBpcyBvZiBkaW1lbnNpb24gWyIgKyBhcnJheV9kaW0odmFsdWUpICsgIl0gYnV0IHNob3VsZCBiZSBbIiArIGRpbSArICJdLiI7CiAgICAgICAgfQogICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgfTsKCiAgICAgIC8vLy8vLy8vLy8gRnVuY3Rpb25zIGZvciBoYW5kbGluZyBwYXJhbWV0ZXIgb2JqZWN0cyAvLy8vLy8vLy8vCiAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgICAvKioKICAgICAgICogUmV0dXJucyBhIGZpeGVkIChzYW1lIGV2ZXJ5IHRpbWUpIG51bWJlciB0aGF0IGNvdWxkIGJlIHVzZWQgdG8gaW5pdGlhbGl6ZQogICAgICAgKiBhIHBhcmFtZXRlciBvZiBhIGNlcnRhaW4gdHlwZSwgcG9zc2libHkgd2l0aCBsb3dlciBhbmQgdXBwZXIgYm91bmRzLgogICAgICAgKiBUaGUgcG9zc2lsZSB0eXBlcyBhcmUgInJlYWwiLCAiaW50IiwgYW5kICJiaW5hcnkiLgogICAgICAgKi8KICAgICAgdmFyIHBhcmFtX2luaXRfZml4ZWQgPSBmdW5jdGlvbiAodHlwZSwgbG93ZXIsIHVwcGVyKSB7CiAgICAgICAgaWYgKGxvd2VyID4gdXBwZXIpIHsKICAgICAgICAgIHRocm93ICJDYW4gbm90IGluaXRpYWxpemUgcGFyYW1ldGVyIHdoZXJlIGxvd2VyIGJvdW5kID4gdXBwZXIgYm91bmQiOwogICAgICAgIH0KICAgICAgICBpZiAodHlwZSA9PT0gInJlYWwiKSB7CiAgICAgICAgICBpZiAobG93ZXIgPT09IC1JbmZpbml0eSAmJiB1cHBlciA9PT0gSW5maW5pdHkpIHsKICAgICAgICAgICAgcmV0dXJuIDAuNTsKICAgICAgICAgIH0gZWxzZSBpZiAobG93ZXIgPT09IC1JbmZpbml0eSkgewogICAgICAgICAgICByZXR1cm4gdXBwZXIgLSAwLjU7CiAgICAgICAgICB9IGVsc2UgaWYgKHVwcGVyID09PSBJbmZpbml0eSkgewogICAgICAgICAgICByZXR1cm4gbG93ZXIgKyAwLjU7CiAgICAgICAgICB9IGVsc2UgaWYgKGxvd2VyIDw9IHVwcGVyKSB7CiAgICAgICAgICAgIHJldHVybiAobG93ZXIgKyB1cHBlcikgLyAyOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gImludCIpIHsKICAgICAgICAgIGlmIChsb3dlciA9PT0gLUluZmluaXR5ICYmIHVwcGVyID09PSBJbmZpbml0eSkgewogICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICAgIH0gZWxzZSBpZiAobG93ZXIgPT09IC1JbmZpbml0eSkgewogICAgICAgICAgICByZXR1cm4gdXBwZXIgLSAxOwogICAgICAgICAgfSBlbHNlIGlmICh1cHBlciA9PT0gSW5maW5pdHkpIHsKICAgICAgICAgICAgcmV0dXJuIGxvd2VyICsgMTsKICAgICAgICAgIH0gZWxzZSBpZiAobG93ZXIgPD0gdXBwZXIpIHsKICAgICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoKGxvd2VyICsgdXBwZXIpIC8gMik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAiYmluYXJ5IikgewogICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgfQogICAgICAgIHRocm93ICJDb3VsZCBub3QgaW5pdGlhbGl6ZSBwYXJhbWV0ZXIgb2YgdHlwZSAiICsgdHlwZSArICJbIiArIGxvd2VyICsgIiwgIiArIHVwcGVyICsgIl0iOwogICAgICB9OwoKICAgICAgLyoqCiAgICAgICAqIENvbXBsZXRlcyBwYXJhbXNfdG9fY29tcGxldGUsIGFuIG9iamVjdCBjb250YWluaW5nIHBhcmFtZXRlciBkZXNjcmlwdGlvbnMsIAogICAgICAgKiBhbmQgaW5pdGlhbGl6ZXMgbm9uLWluaXRpYWxpemVkIHBhcmFtZXRlcnMuIFRoaXMgbW9kaWZpZWQgdmVyc2lvbiBvZgogICAgICAgKiBwYXJhbXNfdG9fY29tcGxldGUgaXMgcmV0dXJuZWQgYXMgYSBkZWVwIGNvcHkgYW5kIG5vdCBtb2RpZmllZCBpbiBwbGFjZS4KICAgICAgICogSW5pdGlhbGl6YXRpb24gaXMgZG9uZSBieSBzdXBwbHlpbmcgYSBwYXJhbV9pbml0IGZ1bmN0aW9uIHdpdGggc2lnbmF0dXJlCiAgICAgICAqIGZ1bmN0aW9uKHR5cGUsIGxvd2VyLCB1cHBlcikgdGhhdCBzaG91bGQgcmV0dXJuIGEgc2luZ2xlIG51bWJlciAKICAgICAgICogKGxpa2UgcGFyYW1faW5pdF9maXhlZCwgZm9yIGV4YW1wbGUpLgogICAgICAgKiBAZXhhbXBsZQogICAgICAgKiB2YXIgcGFyYW1zID0geyAibXUiOiB7InR5cGUiOiAicmVhbCJ9IH0KICAgICAgICogcGFyYW1zID0gY29tcGxldGVfcGFyYW1zKHBhcmFtcyk7CiAgICAgICAqIC8vIHBhcmFtcyBzaG91bGQgbm93IGJlOgogICAgICAgKiAvLyAgeyJtdSI6IHsgInR5cGUiOiAicmVhbCIsICJkaW0iOiBbMV0sICJ1cHBlciI6IEluZmluaXR5LAogICAgICAgKiAvLyAgICAgICAgICAgImxvd2VyIjogLUluZmluaXR5LCAiaW5pdCI6IDAuNSB9fQogICAgICAgKi8KICAgICAgdmFyIGNvbXBsZXRlX3BhcmFtcyA9IGZ1bmN0aW9uIChwYXJhbXNfdG9fY29tcGxldGUsIHBhcmFtX2luaXQpIHsKICAgICAgICB2YXIgcGFyYW1zID0gZGVlcF9jbG9uZShwYXJhbXNfdG9fY29tcGxldGUpOwogICAgICAgIGZvciAodmFyIHBhcmFtX25hbWUgaW4gcGFyYW1zKSB7CiAgICAgICAgICBpZiAoIXBhcmFtcy5oYXNPd25Qcm9wZXJ0eShwYXJhbV9uYW1lKSkgY29udGludWU7CiAgICAgICAgICB2YXIgcGFyYW0gPSBwYXJhbXNbcGFyYW1fbmFtZV07CiAgICAgICAgICBpZiAoIXBhcmFtLmhhc093blByb3BlcnR5KCJ0eXBlIikpIHsKICAgICAgICAgICAgcGFyYW0udHlwZSA9ICJyZWFsIjsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghcGFyYW0uaGFzT3duUHJvcGVydHkoImRpbSIpKSB7CiAgICAgICAgICAgIHBhcmFtLmRpbSA9IFsxXTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChpc19udW1iZXIocGFyYW0uZGltKSkgewogICAgICAgICAgICBwYXJhbS5kaW0gPSBbcGFyYW0uZGltXTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChwYXJhbS50eXBlID09ICJiaW5hcnkiKSB7CiAgICAgICAgICAgIHBhcmFtLnVwcGVyID0gMTsKICAgICAgICAgICAgcGFyYW0ubG93ZXIgPSAwOwogICAgICAgICAgfQogICAgICAgICAgaWYgKCFwYXJhbS5oYXNPd25Qcm9wZXJ0eSgidXBwZXIiKSkgewogICAgICAgICAgICBwYXJhbS51cHBlciA9IEluZmluaXR5OwogICAgICAgICAgfQogICAgICAgICAgaWYgKCFwYXJhbS5oYXNPd25Qcm9wZXJ0eSgibG93ZXIiKSkgewogICAgICAgICAgICBwYXJhbS5sb3dlciA9IC1JbmZpbml0eTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChwYXJhbS5oYXNPd25Qcm9wZXJ0eSgiaW5pdCIpKSB7CiAgICAgICAgICAgIC8vIElmIHRoaXMgaXMganVzdCBhIG51bWJlciBvciBhIG5lc3RlZCBhcnJheSB3ZSBsZWF2ZSBpdCBhbG9uZSwgYnV0IGlmLi4uCiAgICAgICAgICAgIGlmIChhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkgJiYgdHlwZW9mIHBhcmFtLmluaXQgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgICAvLyBwYXJhbS5pbml0IGlzIGEgZnVuY3Rpb24sIHVzZSB0aGF0IHRvIGluaXRpYWxpemUgdGhlIHBhcmFtZXRlci4KICAgICAgICAgICAgICBwYXJhbS5pbml0ID0gcGFyYW0uaW5pdCgpOwogICAgICAgICAgICB9IGVsc2UgaWYgKCFhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkgJiYgIUFycmF5LmlzQXJyYXkocGFyYW0uaW5pdCkpIHsKICAgICAgICAgICAgICAvLyBXZSBoYXZlIGEgbXVsdGlkaW1lbnNpb25hbCBwYXJhbWV0ZXIgd2hlcmUgdGhlIHBhcmFtLmluaXQgZXhpc3QgYnV0CiAgICAgICAgICAgICAgLy8gaXMgbm90IGFuIGFycmF5LiBUaGVuIGFzc3VtZSBpdCBpcyBhIG51bWJlciBvciBhIGZ1bmN0aW9uIGFuZCB1c2UKICAgICAgICAgICAgICAvLyBpdCB0byBpbml0aWFsaXplIHRoZSBwYXJhbWV0ZXIuCiAgICAgICAgICAgICAgcGFyYW0uaW5pdCA9IGNyZWF0ZV9hcnJheShwYXJhbS5kaW0sIHBhcmFtLmluaXQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBXZSB1c2UgdGhlIGRlZmF1bHQgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24uCiAgICAgICAgICAgIGlmIChhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHsKICAgICAgICAgICAgICBwYXJhbS5pbml0ID0gcGFyYW1faW5pdChwYXJhbS50eXBlLCBwYXJhbS5sb3dlciwgcGFyYW0udXBwZXIpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHBhcmFtLmluaXQgPSBjcmVhdGVfYXJyYXkocGFyYW0uZGltLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW1faW5pdChwYXJhbS50eXBlLCBwYXJhbS5sb3dlciwgcGFyYW0udXBwZXIpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBwYXJhbXM7CiAgICAgIH07CgogICAgICAvLy8vLy8vLy8vIFN0ZXBwZXIgRnVuY3Rpb25zIC8vLy8vLy8vLy8vCiAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAgIC8qKgogICAgICAgKiBAaW50ZXJmYWNlCiAgICAgICAqIEEgU3RlcHBlciBpcyBhbiBvYmplY3QgcmVzcG9uc2libGUgZm9yIHB1c2hpbmcgYXJvdW5kIG9uZQogICAgICAgKiBvciBtb3JlIHBhcmFtZXRlciB2YWx1ZXMgaW4gYSBzdGF0ZSBhY2NvcmRpbmcgdG8gdGhlIGRpc3RyaWJ1dGlvbgogICAgICAgKiBkZWZpbmVkIGJ5IHRoZSBsb2cgcG9zdGVyaW9yLiBUaGlzIGRlZmluZXMgdGhlIFN0ZXBwZXIgImludGVyZmFjZSIsCiAgICAgICAqIHdoZXJlICJpbnRlcmZhY2UiIG1lYW5zIHRoYXQgU3RlcHBlciBkZWZpbmVzIGEgY2xhc3MgdGhhdCBpcyBuZXZlcgogICAgICAgKiBtZWFudCB0byBiZSBpbnN0YW50aWF0ZWQsIGJ1dCBqdXN0IHRvIGJlIHN1YmNsYXNzZWQgYnkgc3BlY2lhbGl6ZWQKICAgICAgICogc3RlcHBlciBmdW5jdGlvbnMuCiAgICAgICAqIEBpbnRlcmZhY2UKICAgICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIHBhcmFtZXRlciBkZWZpbml0aW9ucywgZm9yIGV4YW1wbGU6CiAgICAgICAqICAgeyJtdSI6IHsgInR5cGUiOiAicmVhbCIsICJkaW0iOiBbMV0sICJ1cHBlciI6IEluZmluaXR5LCAKICAgICAgICogICAibG93ZXIiOiAtSW5maW5pdHksICJpbml0IjogMC41IH19CiAgICAgICAqICAgVGhlIHBhcmFtZXRlciBkZWZpbml0aW9ucyBhcmUgZXhwZWN0ZWQgdG8gYmUgImNvbXBsZXRlIiwgdGhhdCBpcywKICAgICAgICogICBzcGVjaWZ5aW5nIGFsbCByZWxldmFudCBhdHRyaWJ1dGVzIHN1Y2ggYXMgZGltLCBsb3dlciBhbmQgdXBwZXIuCiAgICAgICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycyBpbiBwYXJhbXMKICAgICAgICogICAoYW5kIHBvc3NpYmx5IG1vcmUpLiBUaGUgcGFyYW1ldGVyIG5hbWVzIGFyZSBnaXZlbiBhcyBrZXlzIGFuZCB0aGUgc3RhdGVzCiAgICAgICAqICAgYXMgc2NhbGFycyBvciwgcG9zc2libHkgbmVzdGVkLCBhcnJheXMuIEZvciBleGFtcGxlOgogICAgICAgKiAgIHttdTogMTAsIHNpZ21hOiA1LCBiZXRhOiBbMSwgMi41XX0KICAgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiAqdGFraW5nIG5vIHBhcmFtZXRlcnMqIHRoYXQgcmV0dXJucyB0aGUKICAgICAgICogICBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiBUaGF0IGlzLCB0aGUgdmFsdWUgb2YgbG9nX3Bvc3QKICAgICAgICogICBzaG91bGQgY2hhbmdlIGlmIHRoZSB0aGUgdmFsdWVzIGluIHN0YXRlIGFyZSBjaGFuZ2VkLgogICAgICAKICAgICAgICovCiAgICAgIHZhciBTdGVwcGVyID0gZnVuY3Rpb24gKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0KSB7CiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7CiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlOwogICAgICAgIHRoaXMubG9nX3Bvc3QgPSBsb2dfcG9zdDsKICAgICAgfTsKCiAgICAgIC8qKgogICAgICAgKiBUYWtlcyBhIHN0ZXAgaW4gdGhlIHBhcmFtZXRlciBzcGFjZS4gU2hvdWxkIHJldHVybiB0aGUgbmV3IHN0YXRlLAogICAgICAgKiBidXQgaXMgbWFpbmx5IGNhbGxlZCBmb3IgaXQncyBzaWRlIGVmZmVjdCBvZiBtYWtpbmcgYSBjaGFuZ2UgaW4gdGhlCiAgICAgICAqIHN0YXRlIG9iamVjdC4KICAgICAgICovCiAgICAgIFN0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhyb3cgIkV2ZXJ5IFN0ZXBwZXIgbmVlZCB0byBpbXBsZW1lbnQgc3RlcCgpIjsKICAgICAgfTsKCiAgICAgIC8qKgogICAgICAgKiBJZiBpbXBsZW1lbnRlZCwgbWFrZXMgdGhlIHN0ZXBwZXIgYWRhcHQgd2hpbGUgc3RlcHBpbmcuCiAgICAgICAqLwogICAgICBTdGVwcGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgIC8vIE9wdGlvbmFsLCBzb21lIHN0ZXBwZXJzIG1pZ2h0IG5vdCBiZSBhZGFwdGl2ZS4gKi8gCiAgICAgIH07CgogICAgICAvKioKICAgICAgICogSWYgaW1wbGVtZW50ZWQsIG1ha2VzIHRoZSBzdGVwcGVyIGNlYXNlIGFkYXB0aW5nIHdoaWxlIHN0ZXBwaW5nLgogICAgICAgKi8KICAgICAgU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgIC8vIE9wdGlvbmFsLCBzb21lIHN0ZXBwZXJzIG1pZ2h0IG5vdCBiZSBhZGFwdGl2ZS4gKi8gCiAgICAgIH07CgogICAgICAvKioKICAgICAgICogUmV0dXJucyBhbiBvYmplY3QgY29udGFpbmcgaW5mbyByZWdhcmRpbmcgdGhlIHN0ZXBwZXIuCiAgICAgICAqLwogICAgICBTdGVwcGVyLnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24gKCkgewogICAgICAgIC8vIFJldHVybnMgYW4gb2JqZWN0IHdpdGggaW5mbyBhYm91dCB0aGUgc3RhdGUgb2YgdGhlIHN0ZXBwZXIuCiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9OwoKICAgICAgLyoqCiAgICAgICAqIEBjbGFzcwogICAgICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn0KICAgICAgICogQ29uc3RydWN0b3IgZm9yIGFuIG9iamVjdCB0aGF0IGltcGxlbWVudHMgdGhlIG1ldHJvcG9saXMgc3RlcCBpbgogICAgICAgKiB0aGUgQWRhcHRpdmUgTWV0cm9wb2xpcy1XaXRoaW4tR2liYnMgYWxnb3JpdGhtIGluICJFeGFtcGxlcyBvZiBBZGFwdGl2ZSBNQ01DIgogICAgICAgKiBieSBSb2JlcnRzIGFuZCBSb3NlbnRoYWwgKDIwMDgpLgogICAgICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBzaW5nbGUgcGFyYW1ldGVyIGRlZmluaXRpb24uCiAgICAgICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy4KICAgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIAogICAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuCiAgICAgICAqIEBwYXJhbSBnZW5lcmF0ZV9wcm9wb3NhbCAtIGEgZnVuY3Rpb24gcmV0dXJuaW5nIGEgcHJvcG9zYWwgKGFzIGEgbnVtYmVyKQogICAgICAgKiB3aXRoIHNpZ25hdHVyZSBmdW5jdGlvbihwYXJhbV9zdGF0ZSwgbG9nX3NjYWxlKSB3aGVyZSBwYXJhbV9zdGF0ZSBpcyBhCiAgICAgICAqIG51bWJlciBhbmQgbG9nX3NjYWxlIGRlZmluZXMgdGhlIHNjYWxlIG9mIHRoZSBwcm9wb3NhbCBzb21laG93LgogICAgICAqLwogICAgICB2YXIgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIGdlbmVyYXRlX3Byb3Bvc2FsKSB7CiAgICAgICAgU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0KTsKICAgICAgICB2YXIgcGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7CiAgICAgICAgaWYgKHBhcmFtX25hbWVzLmxlbmd0aCAhPSAxKSB7CiAgICAgICAgICB0aHJvdyAiT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIgY2FuIG9ubHkgaGFuZGxlIG9uZSBwYXJhbWV0ZXIuIjsKICAgICAgICB9CiAgICAgICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07CiAgICAgICAgdmFyIHBhcmFtID0gdGhpcy5wYXJhbXNbdGhpcy5wYXJhbV9uYW1lXTsKICAgICAgICBpZiAoIWFycmF5X2VxdWFsKHBhcmFtLmRpbSwgWzFdKSkgewogICAgICAgICAgdGhyb3cgIk9uZWRpbU1ldHJvcG9saXNTdGVwcGVyIGNhbiBvbmx5IGhhbmRsZSBvbmUgb25lLWRpbWVuc2lvbmFsIHBhcmFtZXRlci4iOwogICAgICAgIH0KICAgICAgICB0aGlzLmxvd2VyID0gcGFyYW0ubG93ZXI7CiAgICAgICAgdGhpcy51cHBlciA9IHBhcmFtLnVwcGVyOwogICAgICAgIHRoaXMucHJvcF9sb2dfc2NhbGUgPSBnZXRfb3B0aW9uKCJwcm9wX2xvZ19zY2FsZSIsIG9wdGlvbnMsIDApOwogICAgICAgIHRoaXMuYmF0Y2hfc2l6ZSA9IGdldF9vcHRpb24oImJhdGNoX3NpemUiLCBvcHRpb25zLCA1MCk7CiAgICAgICAgdGhpcy5tYXhfYWRhcHRhdGlvbiA9IGdldF9vcHRpb24oIm1heF9hZGFwdGF0aW9uIiwgb3B0aW9ucywgMC4zMyk7CiAgICAgICAgdGhpcy5pbml0aWFsX2FkYXB0YXRpb24gPSBnZXRfb3B0aW9uKCJpbml0aWFsX2FkYXB0YXRpb24iLCBvcHRpb25zLCAxLjApOwogICAgICAgIHRoaXMudGFyZ2V0X2FjY2VwdF9yYXRlID0gZ2V0X29wdGlvbigidGFyZ2V0X2FjY2VwdF9yYXRlIiwgb3B0aW9ucywgMC40NCk7CiAgICAgICAgdGhpcy5pc19hZGFwdGluZyA9IGdldF9vcHRpb24oImlzX2FkYXB0aW5nIiwgb3B0aW9ucywgdHJ1ZSk7CiAgICAgICAgdGhpcy5nZW5lcmF0ZV9wcm9wb3NhbCA9IGdlbmVyYXRlX3Byb3Bvc2FsOwogICAgICAgIHRoaXMuYWNjZXB0YW5jZV9jb3VudCA9IDA7CiAgICAgICAgdGhpcy5iYXRjaF9jb3VudCA9IDA7CiAgICAgICAgdGhpcy5pdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uID0gMDsKICAgICAgfTsKICAgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7CiAgICAgIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyOwogICAgICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgcGFyYW1fc3RhdGUgPSB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV07CiAgICAgICAgdmFyIHBhcmFtX3Byb3Bvc2FsID0gdGhpcy5nZW5lcmF0ZV9wcm9wb3NhbChwYXJhbV9zdGF0ZSwgdGhpcy5wcm9wX2xvZ19zY2FsZSk7CiAgICAgICAgaWYgKHBhcmFtX3Byb3Bvc2FsIDwgdGhpcy5sb3dlciB8fCBwYXJhbV9wcm9wb3NhbCA+IHRoaXMudXBwZXIpIDsgZWxzZSB7CiAgICAgICAgICAvLyBtYWtlIGEgTWV0cm9wb2xpcyBzdGVwCiAgICAgICAgICB2YXIgY3Vycl9sb2dfZGVucyA9IHRoaXMubG9nX3Bvc3QoKTsKICAgICAgICAgIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSA9IHBhcmFtX3Byb3Bvc2FsOwogICAgICAgICAgdmFyIHByb3BfbG9nX2RlbnMgPSB0aGlzLmxvZ19wb3N0KCk7CiAgICAgICAgICB2YXIgYWNjZXB0X3Byb2IgPSBNYXRoLmV4cChwcm9wX2xvZ19kZW5zIC0gY3Vycl9sb2dfZGVucyk7CiAgICAgICAgICBpZiAoYWNjZXB0X3Byb2IgPiBNYXRoLnJhbmRvbSgpKSB7CiAgICAgICAgICAgIC8vIFdlIGRvIG5vdGhpbmcgYXMgdGhlIHN0YXRlIG9mIHBhcmFtIGhhcyBhbHJlYWR5IGJlZW4gY2hhbmdlZCB0byB0aGUgcHJvcG9zYWwKICAgICAgICAgICAgaWYgKHRoaXMuaXNfYWRhcHRpbmcpIHRoaXMuYWNjZXB0YW5jZV9jb3VudCsrOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gcmV2ZXJ0IHN0YXRlIGJhY2sgdG8gdGhlIG9sZCBzdGF0ZSBvZiBwYXJhbQogICAgICAgICAgICB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0gPSBwYXJhbV9zdGF0ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuaXNfYWRhcHRpbmcpIHsKICAgICAgICAgIHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbisrOwogICAgICAgICAgaWYgKHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbiA+PSB0aGlzLmJhdGNoX3NpemUpIHsKICAgICAgICAgICAgLy8gdGhlbiBhZGFwdAogICAgICAgICAgICB0aGlzLmJhdGNoX2NvdW50Kys7CiAgICAgICAgICAgIHZhciBsb2dfc2RfYWRqdXN0bWVudCA9IE1hdGgubWluKHRoaXMubWF4X2FkYXB0YXRpb24sIHRoaXMuaW5pdGlhbF9hZGFwdGF0aW9uIC8gTWF0aC5zcXJ0KHRoaXMuYmF0Y2hfY291bnQpKTsKICAgICAgICAgICAgaWYgKHRoaXMuYWNjZXB0YW5jZV9jb3VudCAvIHRoaXMuYmF0Y2hfc2l6ZSA+IHRoaXMudGFyZ2V0X2FjY2VwdF9yYXRlKSB7CiAgICAgICAgICAgICAgdGhpcy5wcm9wX2xvZ19zY2FsZSArPSBsb2dfc2RfYWRqdXN0bWVudDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLnByb3BfbG9nX3NjYWxlIC09IGxvZ19zZF9hZGp1c3RtZW50OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuYWNjZXB0YW5jZV9jb3VudCA9IDA7CiAgICAgICAgICAgIHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbiA9IDA7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV07CiAgICAgIH07CiAgICAgIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuaXNfYWRhcHRpbmcgPSB0cnVlOwogICAgICB9OwogICAgICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuaXNfYWRhcHRpbmcgPSBmYWxzZTsKICAgICAgfTsKICAgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHByb3BfbG9nX3NjYWxlOiB0aGlzLnByb3BfbG9nX3NjYWxlLAogICAgICAgICAgaXNfYWRhcHRpbmc6IHRoaXMuaXNfYWRhcHRpbmcsCiAgICAgICAgICBhY2NlcHRhbmNlX2NvdW50OiB0aGlzLmFjY2VwdGFuY2VfY291bnQsCiAgICAgICAgICBpdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uOiB0aGlzLml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24sCiAgICAgICAgICBiYXRjaF9jb3VudDogdGhpcy5iYXRjaF9jb3VudAogICAgICAgIH07CiAgICAgIH07CgogICAgICAvKioKICAgICAgICogRnVuY3Rpb24gcmV0dXJuaW5nIGEgTm9ybWFsIHByb3Bvc2FsLgogICAgICAgKi8KICAgICAgdmFyIG5vcm1hbF9wcm9wb3NhbCA9IGZ1bmN0aW9uIChwYXJhbV9zdGF0ZSwgcHJvcF9sb2dfc2NhbGUpIHsKICAgICAgICByZXR1cm4gcm5vcm0ocGFyYW1fc3RhdGUsIE1hdGguZXhwKHByb3BfbG9nX3NjYWxlKSk7CiAgICAgIH07CgogICAgICAvKioKICAgICAgICogQGNsYXNzCiAgICAgICAqIEBhdWdtZW50cyB7T25lZGltTWV0cm9wb2xpc1N0ZXBwZXJ9CiAgICAgICAqIEEgInN1YmNsYXNzIiBvZiBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciBtYWtpbmcgY29udGlub3VzIE5vcm1hbCBwcm9wb3NhbHMuCiAgICAgICAqLwogICAgICB2YXIgUmVhbE1ldHJvcG9saXNTdGVwcGVyID0gZnVuY3Rpb24gKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7CiAgICAgICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgbm9ybWFsX3Byb3Bvc2FsKTsKICAgICAgfTsKICAgICAgUmVhbE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlKTsKICAgICAgUmVhbE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFJlYWxNZXRyb3BvbGlzU3RlcHBlcjsKCiAgICAgIC8qKgogICAgICAgKiBGdW5jdGlvbiByZXR1cm5pbmcgYSBkaXNjcmV0aXplZCBOb3JtYWwgcHJvcG9zYWwuCiAgICAgICAqLwogICAgICB2YXIgZGlzY3JldGVfbm9ybWFsX3Byb3Bvc2FsID0gZnVuY3Rpb24gKHBhcmFtX3N0YXRlLCBwcm9wX2xvZ19zY2FsZSkgewogICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHJub3JtKHBhcmFtX3N0YXRlLCBNYXRoLmV4cChwcm9wX2xvZ19zY2FsZSkpKTsKICAgICAgfTsKCiAgICAgIC8qKgogICAgICAqIEBjbGFzcwogICAgICAqIEBhdWdtZW50cyB7T25lZGltTWV0cm9wb2xpc1N0ZXBwZXJ9CiAgICAgICogQSAic3ViY2xhc3MiIG9mIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyIG1ha2luZyBkaXNjcmV0aXplZCBOb3JtYWwgcHJvcG9zYWxzLgogICAgICAqLwogICAgICB2YXIgSW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHsKICAgICAgICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zLCBkaXNjcmV0ZV9ub3JtYWxfcHJvcG9zYWwpOwogICAgICB9OwogICAgICBJbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSk7CiAgICAgIEludE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEludE1ldHJvcG9saXNTdGVwcGVyOwoKICAgICAgLyoqCiAgICAgICAqIEBjbGFzcwogICAgICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn0KICAgICAgICogQ29uc3RydWN0b3IgZm9yIGFuIG9iamVjdCB0aGF0IGltcGxlbWVudHMgdGhlIG1ldHJvcG9saXMgc3RlcCBpbgogICAgICAgKiB0aGUgQWRhcHRpdmUgTWV0cm9wb2xpcy1XaXRoaW4tR2liYnMgYWxnb3JpdGhtIGluICJFeGFtcGxlcyBvZiBBZGFwdGl2ZSBNQ01DIgogICAgICAgKiBieSBSb2JlcnRzIGFuZCBSb3NlbnRoYWwgKDIwMDgpIGZvciBwb3NzaWJseSBtdWx0aWRpbWVuc2lvbmFsIGFycmF5cy4gVGhhdAogICAgICAgKiBpcywgaW5zdGVhZCBvZiBqdXN0IHRha2luZyBhIHN0ZXAgZm9yIGEgb25lLWRpbWVuc2lvbmFsIHBhcmFtZXRlciBsaWtlIAogICAgICAgKiBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciwgdGhpcyBTdGVwcGVyIGlzIHJlc3BvbnNpYmxlIGZvciB0YWtpbmcgc3RlcHMgCiAgICAgICAqIGZvciBhIG11bHRpZGltZW5zaW9uYWwgYXJyYXkuIEl0J3Mgc3RpbGwgcHJldHR5IGR1bWIgYW5kIGp1c3QgdGFrZXMKICAgICAgICogb25lLWRpbWVuc2lvbmFsIHN0ZXBzIGZvciBlYWNoIHBhcmFtZXRlciBjb21wb25lbnQsIHRob3VnaC4KICAgICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgc2luZ2xlIHBhcmFtZXRlciBkZWZpbml0aW9uIGZvciBhIAogICAgICAgKiAgIG11bHRpZGltZW5zaW9uYWwgcGFyYW1ldGVyLgogICAgICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuCiAgICAgICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiAKICAgICAgICogQHBhcmFtIG9wdGlvbnMgLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIHRoZSBzdGVwcGVyLgogICAgICAgKiBAcGFyYW0gU3ViU3RlcHBlciAtIGEgY29uc3RydWN0b3IgZm9yIHRoZSB0eXBlIG9mIG9uZSBkaW1lbnNpb25hbCBTdGVwcGVyIHRvIGFwcGx5IG9uCiAgICAgICAqICAgYWxsIHRoZSBjb21wb25lbnRzIG9mIHRoZSBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlci4KICAgICAgKi8KICAgICAgdmFyIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIFN1YlN0ZXBwZXIpIHsKICAgICAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpOwogICAgICAgIHZhciBwYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTsKICAgICAgICBpZiAocGFyYW1fbmFtZXMubGVuZ3RoICE9IDEpIHsKICAgICAgICAgIHRocm93ICJNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIGNhbid0IGhhbmRsZSBtb3JlIHRoYW4gb25lIHBhcmFtZXRlci4iOwogICAgICAgIH0KICAgICAgICB0aGlzLnBhcmFtX25hbWUgPSBwYXJhbV9uYW1lc1swXTsKICAgICAgICB2YXIgcGFyYW0gPSB0aGlzLnBhcmFtc1t0aGlzLnBhcmFtX25hbWVdOwogICAgICAgIHRoaXMubG93ZXIgPSBwYXJhbS5sb3dlcjsKICAgICAgICB0aGlzLnVwcGVyID0gcGFyYW0udXBwZXI7CiAgICAgICAgdGhpcy5kaW0gPSBwYXJhbS5kaW07CiAgICAgICAgdGhpcy5wcm9wX2xvZ19zY2FsZSA9IGdldF9tdWx0aWRpbV9vcHRpb24oInByb3BfbG9nX3NjYWxlIiwgb3B0aW9ucywgdGhpcy5kaW0sIDApOwogICAgICAgIHRoaXMuYmF0Y2hfc2l6ZSA9IGdldF9tdWx0aWRpbV9vcHRpb24oImJhdGNoX3NpemUiLCBvcHRpb25zLCB0aGlzLmRpbSwgNTApOwogICAgICAgIHRoaXMubWF4X2FkYXB0YXRpb24gPSBnZXRfbXVsdGlkaW1fb3B0aW9uKCJtYXhfYWRhcHRhdGlvbiIsIG9wdGlvbnMsIHRoaXMuZGltLCAwLjMzKTsKICAgICAgICB0aGlzLmluaXRpYWxfYWRhcHRhdGlvbiA9IGdldF9tdWx0aWRpbV9vcHRpb24oImluaXRpYWxfYWRhcHRhdGlvbiIsIG9wdGlvbnMsIHRoaXMuZGltLCAxLjApOwogICAgICAgIHRoaXMudGFyZ2V0X2FjY2VwdF9yYXRlID0gZ2V0X211bHRpZGltX29wdGlvbigidGFyZ2V0X2FjY2VwdF9yYXRlIiwgb3B0aW9ucywgdGhpcy5kaW0sIDAuNDQpOwogICAgICAgIHRoaXMuaXNfYWRhcHRpbmcgPSBnZXRfbXVsdGlkaW1fb3B0aW9uKCJpc19hZGFwdGluZyIsIG9wdGlvbnMsIHRoaXMuZGltLCB0cnVlKTsKCiAgICAgICAgLy8gVGhpcyBoYWNrIGJlbG93IGlzIGEgcmVjdXJzaXZlIGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBhbiBhcnJheSBvZiAKICAgICAgICAvLyBvbmUgZGltZW5zaW9uYWwgc3RlcHBlcnMgYWNjb3JkaW5nIHRvIGRpbS4KICAgICAgICB2YXIgY3JlYXRlX3N1YnN0ZXBwZXJzID0gZnVuY3Rpb24gKGRpbSwgc3Vic3RhdGUsIGxvZ19wb3N0LCBwcm9wX2xvZ19zY2FsZSwgYmF0Y2hfc2l6ZSwgbWF4X2FkYXB0YXRpb24sIGluaXRpYWxfYWRhcHRhdGlvbiwgdGFyZ2V0X2FjY2VwdF9yYXRlLCBpc19hZGFwdGluZykgewogICAgICAgICAgdmFyIHN1YnN0ZXBwZXJzID0gW107CiAgICAgICAgICBpZiAoZGltLmxlbmd0aCA9PT0gMSkgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7CiAgICAgICAgICAgICAgdmFyIHN1Ym9wdGlvbnMgPSB7CiAgICAgICAgICAgICAgICBwcm9wX2xvZ19zY2FsZTogcHJvcF9sb2dfc2NhbGVbaV0sCiAgICAgICAgICAgICAgICBiYXRjaF9zaXplOiBiYXRjaF9zaXplW2ldLAogICAgICAgICAgICAgICAgbWF4X2FkYXB0YXRpb246IG1heF9hZGFwdGF0aW9uW2ldLAogICAgICAgICAgICAgICAgaW5pdGlhbF9hZGFwdGF0aW9uOiBpbml0aWFsX2FkYXB0YXRpb25baV0sCiAgICAgICAgICAgICAgICB0YXJnZXRfYWNjZXB0X3JhdGU6IHRhcmdldF9hY2NlcHRfcmF0ZVtpXSwKICAgICAgICAgICAgICAgIGlzX2FkYXB0aW5nOiBpc19hZGFwdGluZ1tpXQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgdmFyIHN1YnBhcmFtID0ge307CiAgICAgICAgICAgICAgc3VicGFyYW1baV0gPSBkZWVwX2Nsb25lKHBhcmFtKTsKICAgICAgICAgICAgICBzdWJwYXJhbVtpXS5kaW0gPSBbMV07IC8vIEFzIHRoaXMgc2hvdWxkIG5vdyBiZSBhIG9uZS1kaW0gcGFyYW1ldGVyCiAgICAgICAgICAgICAgZGVsZXRlIHN1YnBhcmFtW2ldLmluaXQ7IC8vIEFzIGl0IHNvdWxkIG5vdCBiZSBuZWVkZWQKICAgICAgICAgICAgICBzdWJzdGVwcGVyc1tpXSA9IG5ldyBTdWJTdGVwcGVyKHN1YnBhcmFtLCBzdWJzdGF0ZSwgbG9nX3Bvc3QsIHN1Ym9wdGlvbnMpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7CiAgICAgICAgICAgICAgc3Vic3RlcHBlcnNbaV0gPSBjcmVhdGVfc3Vic3RlcHBlcnMoZGltLnNsaWNlKDEpLCBzdWJzdGF0ZVtpXSwgbG9nX3Bvc3QsIHByb3BfbG9nX3NjYWxlW2ldLCBiYXRjaF9zaXplW2ldLCBtYXhfYWRhcHRhdGlvbltpXSwgaW5pdGlhbF9hZGFwdGF0aW9uW2ldLCB0YXJnZXRfYWNjZXB0X3JhdGVbaV0sIGlzX2FkYXB0aW5nW2ldKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHN1YnN0ZXBwZXJzOwogICAgICAgIH07CiAgICAgICAgdGhpcy5zdWJzdGVwcGVycyA9IGNyZWF0ZV9zdWJzdGVwcGVycyh0aGlzLmRpbSwgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdLCB0aGlzLmxvZ19wb3N0LCB0aGlzLnByb3BfbG9nX3NjYWxlLCB0aGlzLmJhdGNoX3NpemUsIHRoaXMubWF4X2FkYXB0YXRpb24sIHRoaXMuaW5pdGlhbF9hZGFwdGF0aW9uLCB0aGlzLnRhcmdldF9hY2NlcHRfcmF0ZSwgdGhpcy5pc19hZGFwdGluZyk7CiAgICAgIH07CiAgICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7CiAgICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjsKICAgICAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyBHbyB0aHJvdWdoIHRoZSBzdWJzdGVwcGVycyBpbiBhIHJhbmRvbSBvcmRlciBhbmQgY2FsbCBzdGVwKCkgb24gdGhlbS4KICAgICAgICByZXR1cm4gbmVzdGVkX2FycmF5X3JhbmRvbV9hcHBseSh0aGlzLnN1YnN0ZXBwZXJzLCBmdW5jdGlvbiAoc3Vic3RlcHBlcikgewogICAgICAgICAgcmV0dXJuIHN1YnN0ZXBwZXIuc3RlcCgpOwogICAgICAgIH0pOwogICAgICB9OwogICAgICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgIG5lc3RlZF9hcnJheV9hcHBseSh0aGlzLnN1YnN0ZXBwZXJzLCBmdW5jdGlvbiAoc3Vic3RlcHBlcikgewogICAgICAgICAgc3Vic3RlcHBlci5zdGFydF9hZGFwdGF0aW9uKCk7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLnN0b3BfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBuZXN0ZWRfYXJyYXlfYXBwbHkodGhpcy5zdWJzdGVwcGVycywgZnVuY3Rpb24gKHN1YnN0ZXBwZXIpIHsKICAgICAgICAgIHN1YnN0ZXBwZXIuc3RvcF9hZGFwdGF0aW9uKCk7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIG5lc3RlZF9hcnJheV9hcHBseSh0aGlzLnN1YnN0ZXBwZXJzLCBmdW5jdGlvbiAoc3Vic3RlcHBlcikgewogICAgICAgICAgcmV0dXJuIHN1YnN0ZXBwZXIuaW5mbygpOwogICAgICAgIH0pOwogICAgICB9OwoKICAgICAgLyoqCiAgICAgICAqIEBjbGFzcwogICAgICAgKiBAYXVnbWVudHMge011bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXJ9CiAgICAgICAqIEEgInN1YmNsYXNzIiBvZiBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIG1ha2luZyBjb250aW5vdXMgTm9ybWFsIHByb3Bvc2Fscy4KICAgICAgICovCiAgICAgIHZhciBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciA9IGZ1bmN0aW9uIChwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykgewogICAgICAgIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgUmVhbE1ldHJvcG9saXNTdGVwcGVyKTsKICAgICAgfTsKICAgICAgTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSk7CiAgICAgIE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyOwoKICAgICAgLyoqCiAgICAgICAqIEBjbGFzcwogICAgICAgKiBAYXVnbWVudHMge011bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXJ9CiAgICAgICAqIEEgInN1YmNsYXNzIiBvZiBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIG1ha2luZyBkaXNjcmV0aXplZCBOb3JtYWwgcHJvcG9zYWxzLgogICAgICAgKi8KICAgICAgdmFyIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHsKICAgICAgICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIEludE1ldHJvcG9saXNTdGVwcGVyKTsKICAgICAgfTsKICAgICAgTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlKTsKICAgICAgTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyOwoKICAgICAgLyoqCiAgICAgICAqIEBjbGFzcwogICAgICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn0KICAgICAgICogQ29uc3RydWN0b3IgZm9yIGFuIG9iamVjdCB0aGF0IGltcGxlbWVudHMgYSBzdGVwIGZvciBhIGJpbmFyeSBwYXJhbWV0ZXIuCiAgICAgICAqIFRoaXMgaXMgZG9uZSBieSBldmFsdWF0aW5nIHRoZSBsb2cgcG9zdGVyaW9yIGZvciBib3RoIHN0YXRlcyBvZiB0aGUKICAgICAgICogcGFyYW1ldGVyIGFuZCB0aGVuIHNlbGVjdGluZyBhIHN0YXRlIHJhbmRvbWx5IHdpdGggcHJvYmFiaWxpdHkgcmVsYXRpdmUgCiAgICAgICAqIHRvIHRoZSBwb3N0ZXJpb3Igb2YgZWFjaCBzdGF0ZS4KICAgICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgc2luZ2xlIHBhcmFtZXRlciBkZWZpbml0aW9uLgogICAgICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuCiAgICAgICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiAKICAgICAgICogQHBhcmFtIG9wdGlvbnMgLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIHRoZSBzdGVwcGVyLgogICAgICAqLwogICAgICB2YXIgQmluYXJ5U3RlcHBlciA9IGZ1bmN0aW9uIChwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykgewogICAgICAgIFN0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCk7CiAgICAgICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpOwogICAgICAgIGlmIChwYXJhbV9uYW1lcy5sZW5ndGggPT0gMSkgewogICAgICAgICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRocm93ICJCaW5hcnlTdGVwcGVyIGNhbid0IGhhbmRsZSBtb3JlIHRoYW4gb25lIHBhcmFtZXRlci4iOwogICAgICAgIH0KICAgICAgfTsKICAgICAgQmluYXJ5U3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN0ZXBwZXIucHJvdG90eXBlKTsKICAgICAgQmluYXJ5U3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCaW5hcnlTdGVwcGVyOwogICAgICBCaW5hcnlTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSA9IDA7CiAgICAgICAgdmFyIHplcm9fbG9nX2RlbnMgPSB0aGlzLmxvZ19wb3N0KCk7CiAgICAgICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gMTsKICAgICAgICB2YXIgb25lX2xvZ19kZW5zID0gdGhpcy5sb2dfcG9zdCgpOwogICAgICAgIHZhciBtYXhfbG9nX2RlbnMgPSBNYXRoLm1heCh6ZXJvX2xvZ19kZW5zLCBvbmVfbG9nX2RlbnMpOwogICAgICAgIHplcm9fbG9nX2RlbnMgLT0gbWF4X2xvZ19kZW5zOwogICAgICAgIG9uZV9sb2dfZGVucyAtPSBtYXhfbG9nX2RlbnM7CiAgICAgICAgdmFyIHplcm9fcHJvYiA9IE1hdGguZXhwKHplcm9fbG9nX2RlbnMgLSBNYXRoLmxvZyhNYXRoLmV4cCh6ZXJvX2xvZ19kZW5zKSArIE1hdGguZXhwKG9uZV9sb2dfZGVucykpKTsKICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IHplcm9fcHJvYikgewogICAgICAgICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gMDsKICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0gLy8gZWxzZSBrZWVwIHRoZSBwYXJhbSBhdCAxIC4KICAgICAgICByZXR1cm4gMTsKICAgICAgfTsKCiAgICAgIC8qKgogICAgICAqIEBjbGFzcwogICAgICAqIEBpbXBsZW1lbnRzIHtTdGVwcGVyfQogICAgICAqIEp1c3QgbGlrZSBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIHRoaXMgU3RlcHBlciB0YWtlcyBhIHN0ZXBzIGZvcgogICAgICAqIGEgbXVsdGlkaW1lbnNpb25hbCBwYXJhbWV0ZXIgYnkgdXBkYXRpbmcgZWFjaCBjb21wb25lbnQgaW4gdHVybi4gVGhlIGRpZmZlcmVuY2UKICAgICAgKiBpcyB0aGF0IHRoaXMgc3RlcHBlciB3b3JrcyBvbiBiaW5hcnkgcGFyYW1ldGVycy4KICAgICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggYSBzaW5nbGUgcGFyYW1ldGVyIGRlZmluaXRpb24gZm9yIGEgCiAgICAgICogICBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlci4KICAgICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuCiAgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIAogICAgICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci4KICAgICAgKi8KICAgICAgdmFyIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIgPSBmdW5jdGlvbiAocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpIHsKICAgICAgICBTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QpOwogICAgICAgIHZhciBwYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTsKICAgICAgICBpZiAocGFyYW1fbmFtZXMubGVuZ3RoID09IDEpIHsKICAgICAgICAgIHRoaXMucGFyYW1fbmFtZSA9IHBhcmFtX25hbWVzWzBdOwogICAgICAgICAgdmFyIHBhcmFtID0gdGhpcy5wYXJhbXNbdGhpcy5wYXJhbV9uYW1lXTsKICAgICAgICAgIHRoaXMuZGltID0gcGFyYW0uZGltOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aHJvdyAiQmluYXJ5Q29tcG9uZW50U3RlcHBlciBjYW4ndCBoYW5kbGUgbW9yZSB0aGFuIG9uZSBwYXJhbWV0ZXIuIjsKICAgICAgICB9CiAgICAgICAgdmFyIGNyZWF0ZV9zdWJzdGVwcGVycyA9IGZ1bmN0aW9uIChkaW0sIHN1YnN0YXRlLCBsb2dfcG9zdCkgewogICAgICAgICAgdmFyIHN1YnN0ZXBwZXJzID0gW107CiAgICAgICAgICB2YXIgaTsKICAgICAgICAgIGlmIChkaW0ubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykgewogICAgICAgICAgICAgIHZhciBzdWJwYXJhbXMgPSB7fTsKICAgICAgICAgICAgICBzdWJwYXJhbXNbaV0gPSBwYXJhbTsKICAgICAgICAgICAgICBzdWJzdGVwcGVyc1tpXSA9IG5ldyBCaW5hcnlTdGVwcGVyKHN1YnBhcmFtcywgc3Vic3RhdGUsIGxvZ19wb3N0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7CiAgICAgICAgICAgICAgc3Vic3RlcHBlcnNbaV0gPSBjcmVhdGVfc3Vic3RlcHBlcnMoZGltLnNsaWNlKDEpLCBzdWJzdGF0ZVtpXSwgbG9nX3Bvc3QpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gc3Vic3RlcHBlcnM7CiAgICAgICAgfTsKICAgICAgICB0aGlzLnN1YnN0ZXBwZXJzID0gY3JlYXRlX3N1YnN0ZXBwZXJzKHRoaXMuZGltLCB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0sIHRoaXMubG9nX3Bvc3QpOwogICAgICB9OwogICAgICBCaW5hcnlDb21wb25lbnRTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOwogICAgICBCaW5hcnlDb21wb25lbnRTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEJpbmFyeUNvbXBvbmVudFN0ZXBwZXI7CiAgICAgIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8gR28gdGhyb3VnaCB0aGUgc3Vic3RlcHBlcnMgaW4gYSByYW5kb20gb3JkZXIgYW5kIGNhbGwgc3RlcCgpIG9uIHRoZW0uCiAgICAgICAgcmV0dXJuIG5lc3RlZF9hcnJheV9yYW5kb21fYXBwbHkodGhpcy5zdWJzdGVwcGVycywgZnVuY3Rpb24gKHN1YnN0ZXBwZXIpIHsKICAgICAgICAgIHJldHVybiBzdWJzdGVwcGVyLnN0ZXAoKTsKICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgIC8qKgogICAgICAgKiBAY2xhc3MKICAgICAgICogQGltcGxlbWVudHMge1N0ZXBwZXJ9CiAgICAgICAqIFRoaXMgc3RlcHBlciBjYW4gYmUgcmVzcG9uc2libGUgZm9yIHRha2luZyBhIHN0ZXAgZm9yIG9uZSBvciBtb3JlIHBhcmFtZXRlcnMuCiAgICAgICAqIEZvciByZWFsIGFuZCBpbnQgcGFyYW1ldGVycyBpdCB0YWtlcyBNZXRyb3BvbGlzIHdpdGhpbiBHaWJicyBzdGVwcywgYW5kIGZvciAKICAgICAgICogYmluYXJ5IHBhcmFtZXRlcnMgaXQgZG9lcyBldmFsdWF0ZXMgdGhlIHBvc3RlcmlvciBmb3IgYm90aCBwYXJhbXRlciB2YWx1ZXMgYW5kCiAgICAgICAqIHJhbmRvbWx5IGNoYW5nZXMgdG8gYSBjZXJ0YWluIHZhbHVlIHByb3BvcnRpb25hbGx5IHRvIHRoYXQgdmFsdWUncyBwb3N0ZXJpb3IKICAgICAgICogKHRoaXMgaXMgYWxzbyBkb25lIGZvciBlYWNoIHBhcmFtZXRlciwgc28gYWxzbyBhICogd2l0aGluIEdpYmJzIGFwcHJvYWNoKS4KICAgICAgICogVGhpcyBzdGVwcGVyIGlzIGFsc28gYWRhcHRpdmUgYW5kIGNhbiBiZSBlZmZpY2llbnQgd2hlbiB0aGUgbnVtYmVyIG9mIHBhcmFtZXRlcnMKICAgICAgICogYXJlIG5vdCB0b28gaGlnaCBhbmQgdGhlIGNvcnJlbGF0aW9ucyBiZXR3ZWVuIHBhcmFtZXRlcnMgYXJlIGxvdy4KICAgICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgb25lIG9yIG1vcmUgcGFyYW1ldGVyIGRlZmluaXRpb25zCiAgICAgICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy4KICAgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIAogICAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuCiAgICAgICovCiAgICAgIHZhciBBbXdnU3RlcHBlciA9IGZ1bmN0aW9uIChwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykgewogICAgICAgIFN0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCk7CiAgICAgICAgdGhpcy5wYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTsKICAgICAgICB0aGlzLnN1YnN0ZXBwZXJzID0gW107CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBhcmFtX25hbWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB2YXIgcGFyYW0gPSBwYXJhbXNbdGhpcy5wYXJhbV9uYW1lc1tpXV07CiAgICAgICAgICB2YXIgU2VsZWN0U3RlcHBlcjsKICAgICAgICAgIHN3aXRjaCAocGFyYW0udHlwZSkgewogICAgICAgICAgICBjYXNlICJyZWFsIjoKICAgICAgICAgICAgICBpZiAoYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pKSB7CiAgICAgICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gUmVhbE1ldHJvcG9saXNTdGVwcGVyOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICJpbnQiOgogICAgICAgICAgICAgIGlmIChhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHsKICAgICAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBJbnRNZXRyb3BvbGlzU3RlcHBlcjsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgU2VsZWN0U3RlcHBlciA9IE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICJiaW5hcnkiOgogICAgICAgICAgICAgIGlmIChhcnJheV9lcXVhbChwYXJhbS5kaW0sIFsxXSkpIHsKICAgICAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBCaW5hcnlTdGVwcGVyOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gQmluYXJ5Q29tcG9uZW50U3RlcHBlcjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgdGhyb3cgIkFtd2dTdGVwcGVyIGNhbid0IGhhbmRsZSBwYXJhbWV0ZXIgIiArIHRoaXMucGFyYW1fbmFtZXNbaV0gKyAiIHdpdGggdHlwZSAiICsgcGFyYW0udHlwZTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBwYXJhbV9vYmplY3Rfd3JhcCA9IHt9OwogICAgICAgICAgcGFyYW1fb2JqZWN0X3dyYXBbdGhpcy5wYXJhbV9uYW1lc1tpXV0gPSBwYXJhbTsKICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgICAgICAgdmFyIHBhcmFtX29wdGlvbnMgPSBvcHRpb25zLnBhcmFtcyAmJiBvcHRpb25zLnBhcmFtc1t0aGlzLnBhcmFtX25hbWVzW2ldXSB8fCB7fTsKICAgICAgICAgIHBhcmFtX29wdGlvbnMucHJvcF9sb2dfc2NhbGUgPSBwYXJhbV9vcHRpb25zLnByb3BfbG9nX3NjYWxlIHx8IG9wdGlvbnMucHJvcF9sb2dfc2NhbGU7CiAgICAgICAgICBwYXJhbV9vcHRpb25zLmJhdGNoX3NpemUgPSBwYXJhbV9vcHRpb25zLmJhdGNoX3NpemUgfHwgb3B0aW9ucy5iYXRjaF9zaXplOwogICAgICAgICAgcGFyYW1fb3B0aW9ucy5tYXhfYWRhcHRhdGlvbiA9IHBhcmFtX29wdGlvbnMubWF4X2FkYXB0YXRpb24gfHwgb3B0aW9ucy5tYXhfYWRhcHRhdGlvbjsKICAgICAgICAgIHBhcmFtX29wdGlvbnMuaW5pdGlhbF9hZGFwdGF0aW9uID0gcGFyYW1fb3B0aW9ucy5pbml0aWFsX2FkYXB0YXRpb24gfHwgb3B0aW9ucy5pbml0aWFsX2FkYXB0YXRpb247CiAgICAgICAgICBwYXJhbV9vcHRpb25zLnRhcmdldF9hY2NlcHRfcmF0ZSA9IHBhcmFtX29wdGlvbnMudGFyZ2V0X2FjY2VwdF9yYXRlIHx8IG9wdGlvbnMudGFyZ2V0X2FjY2VwdF9yYXRlOwogICAgICAgICAgcGFyYW1fb3B0aW9ucy5pc19hZGFwdGluZyA9IHBhcmFtX29wdGlvbnMuaXNfYWRhcHRpbmcgfHwgb3B0aW9ucy5pc19hZGFwdGluZzsKICAgICAgICAgIHRoaXMuc3Vic3RlcHBlcnNbaV0gPSBuZXcgU2VsZWN0U3RlcHBlcihwYXJhbV9vYmplY3Rfd3JhcCwgc3RhdGUsIGxvZ19wb3N0LCBwYXJhbV9vcHRpb25zKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIEFtd2dTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOwogICAgICBBbXdnU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBBbXdnU3RlcHBlcjsKICAgICAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgc2h1ZmZsZV9hcnJheSh0aGlzLnN1YnN0ZXBwZXJzKTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vic3RlcHBlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHRoaXMuc3Vic3RlcHBlcnNbaV0uc3RlcCgpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZTsKICAgICAgfTsKICAgICAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLnN0YXJ0X2FkYXB0YXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLnN1YnN0ZXBwZXJzW2ldLnN0YXJ0X2FkYXB0YXRpb24oKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIEFtd2dTdGVwcGVyLnByb3RvdHlwZS5zdG9wX2FkYXB0YXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLnN1YnN0ZXBwZXJzW2ldLnN0b3BfYWRhcHRhdGlvbigpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGluZm8gPSB7fTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vic3RlcHBlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGluZm9bdGhpcy5wYXJhbV9uYW1lc1tpXV0gPSB0aGlzLnN1YnN0ZXBwZXJzW2ldLmluZm8oKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGluZm87CiAgICAgIH07CgogICAgICAvLy8vLy8vLy8vLyBTYW1wbGVyIEZ1bmN0aW9ucyAvLy8vLy8vLy8vCiAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAgIC8qKgogICAgICAqIEBpbnRlcmZhY2UKICAgICAgKiBXaGlsZSB5b3UgY291bGQgZml0IGEgbW9kZWwgYnkgcGFzdGluZyB0b2dldGhlciBTdGVwcGVycywgYQogICAgICAvLyBTYW1wbGVyIGlzIGhlcmUgaXMgYSBjb252ZW5pZW5jZSBjbGFzcyB3aGVyZSBhbiBpbnN0YW5jZSBvZiBTYW1wbGVyCiAgICAgIC8vIHNldHMgdXAgdGhlIFN0ZXBwZXJzLCBjaGVja3MgdGhlIHBhcmFtZXRlciBkZWZpbml0aW9uLAogICAgICAvLyBhbmQgbWFuYWdlcyB0aGUgc2FtcGxpbmcuIFRoaXMgaGVyZSBkZWZpbmVzIHRoZSBTYW1wbGVyICJpbnRlcmZhY2UiLgogICAgICAqIEBpbnRlcmZhY2UKICAgICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggcGFyYW1ldGVyIGRlZmluaXRpb25zLCBmb3IgZXhhbXBsZToKICAgICAgKiAgIHsibXUiOiB7InR5cGUiOiAicmVhbCJ9LCAic2lnbWEiOiB7InR5cGUiOiAicmVhbCIsICJsb3dlciIgPSAwfX0KICAgICAgKiAgIFRoZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbnMgZG9lc24ndCBoYXZlIHRvIGJlICJjb21wbGV0ZSIgYW5kIHByb3BlcnRpZXMKICAgICAgKiAgIGxlZnQgb3V0IChsaWtlIGxvd2VyIGFuZCB1cHBlcikgd2lsbCBiZSBmaWxsZWQgaW4gYnkgZGVmYXVsdHMuCiAgICAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB3aXRoIHNpZ25hdHVyZSBmdW5jdGlvbihzdGF0ZSwgZGF0YSkuIEhlcmUKICAgICAgKiAgIHN0YXRlIHdpbGwgYmUgYW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3RhdGUgd2l0aCBlYWNoIHBhcmFtZXRlciBhcyBhIAogICAgICAqICAga2V5IGFuZCB0aGUgcGFyYW1ldGVyIHZhbHVlcyBhcyBudW1iZXJzIG9yIGFycmF5cy4gRm9yIGV4YW1wbGU6CiAgICAgICogICB7Im11IjogMywgInNpZ21hIjogMS41fS4gVGhlIGRhdGEgYXJndW1lbnQgd2lsbCBiZSB0aGUgc2FtZSBvYmplY3QgYXMgCiAgICAgICogICB0aGUgZGF0YSBhcmd1bWVudCBnaXZlbiBiZWxvdy4KICAgICAgKiBAcGFyYW0gZGF0YSAtIGFuIG9iamVjdCB0aGF0IHdpbGwgYmUgcGFzc2VkIG9uIHRvIHRoZSBsb2dfcG9zdCBmdW5jdGlvbgogICAgICAqICAgd2hlbiBzYW1wbGluZy4KICAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHNhbXBsZXIuCiAgICAgICovCiAgICAgIHZhciBTYW1wbGVyID0gZnVuY3Rpb24gKHBhcmFtcywgbG9nX3Bvc3QsIGRhdGEsIG9wdGlvbnMpIHsKICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtczsKICAgICAgICB0aGlzLmRhdGEgPSBkYXRhOwogICAgICAgIHRoaXMucGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7CgogICAgICAgIC8vIFNldHRpbmcgZGVmYXVsdCBvcHRpb25zIGlmIG5vdCBwYXNzZWQgdGhyb3VnaCB0aGUgb3B0aW9ucyBvYmplY3QKICAgICAgICB0aGlzLnBhcmFtX2luaXRfZnVuID0gZ2V0X29wdGlvbigicGFyYW1faW5pdF9mdW4iLCBvcHRpb25zLCBwYXJhbV9pbml0X2ZpeGVkKTsKICAgICAgICB2YXIgdGhpbm5pbmdfaW50ZXJ2YWwgPSBnZXRfb3B0aW9uKCJ0aGluIiwgb3B0aW9ucywgMSk7CiAgICAgICAgdmFyIHBhcmFtc190b19tb25pdG9yID0gZ2V0X29wdGlvbigibW9uaXRvciIsIG9wdGlvbnMsIG51bGwpOwogICAgICAgIHRoaXMudGhpbih0aGlubmluZ19pbnRlcnZhbCk7CiAgICAgICAgdGhpcy5tb25pdG9yKHBhcmFtc190b19tb25pdG9yKTsKICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOwogICAgICAgIC8vIENvbXBsZXRpbmcgdGhlIHBhcmFtcyBhbmQgaW5pdGlhbGl6aW5nIHRoZSBzdGF0ZS4KICAgICAgICB0aGlzLnBhcmFtcyA9IGNvbXBsZXRlX3BhcmFtcyh0aGlzLnBhcmFtcywgdGhpcy5wYXJhbV9pbml0X2Z1bik7CiAgICAgICAgdmFyIHN0YXRlID0ge307CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBhcmFtX25hbWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBzdGF0ZVt0aGlzLnBhcmFtX25hbWVzW2ldXSA9IHRoaXMucGFyYW1zW3RoaXMucGFyYW1fbmFtZXNbaV1dLmluaXQ7CiAgICAgICAgfQogICAgICAgIHRoaXMubG9nX3Bvc3QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gbG9nX3Bvc3Qoc3RhdGUsIGRhdGEpOwogICAgICAgIH07CiAgICAgICAgLy8gUnVubmluZyB0aGUgbG9nX3Bvc3QgZnVuY3Rpb24gb25jZSBpbiBjYXNlIGl0IGZ1cnRoZXIgbW9kaWZpZXMgdGhlIHN0YXRlCiAgICAgICAgLy8gZm9yIGV4YW1wbGUgYWRkaW5nIGRlcml2ZWQgcXVhbnRpdGllcy4KICAgICAgICB0aGlzLmxvZ19wb3N0KCk7CiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlOwogICAgICAgIHRoaXMuc3RlcHBlcnMgPSB0aGlzLmNyZWF0ZV9zdGVwcGVyX2Vuc2FtYmxlKHRoaXMucGFyYW1zLCB0aGlzLnN0YXRlLCB0aGlzLmxvZ19wb3N0LCB0aGlzLm9wdGlvbnMpOwogICAgICB9OwoKICAgICAgLyoqIFNob3VsZCByZXR1cm4gYSB2ZWN0b3Igb2Ygc3RlcHBlcnMgdGhhdCB3aGVuIGNhbGxlZCAKICAgICAgICogc2hvdWxkIHRha2UgYSBzdGVwIGluIHRoZSBwYXJhbWV0ZXIgc3BhY2UuCiAgICAgICAqLwogICAgICBTYW1wbGVyLnByb3RvdHlwZS5jcmVhdGVfc3RlcHBlcl9lbnNhbWJsZSA9IGZ1bmN0aW9uIChzdGF0ZSwgbG9nX3Bvc3QpIHsKICAgICAgICB0aHJvdyAiRXZlcnkgU2FtcGxlciBuZWVkcyB0byBpbXBsZW1lbnQgY3JlYXRlX3N0ZXBwZXJfZW5zYW1ibGUoKSI7CiAgICAgIH07CgogICAgICAvKiogUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBpbmZvIGFib3V0IHRoZSBzdGF0ZSBvZiB0aGUgU2FtcGxlci4KICAgICAgICovCiAgICAgIFNhbXBsZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLAogICAgICAgICAgdGhpbjogdGhpcy50aGluLAogICAgICAgICAgbW9uaXRvcjogdGhpcy5tb25pdG9yLAogICAgICAgICAgc3RlcHBlcnM6IHRoaXMuc3RlcHBlcnMKICAgICAgICB9OwogICAgICB9OwoKICAgICAgLyoqIFRha2VzIGEgc3RlcCBpbiB0aGUgcGFyYW1ldGVyIHNwYWNlLiBSZXR1cm5zIHRoZSBuZXcgc3BhY2UKICAgICAgICogYnV0IGFsc28gbW9kaWZpZXMgdGhlIHN0YXRlIGluIHBsYWNlLgogICAgICAgKi8KICAgICAgU2FtcGxlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBzaHVmZmxlX2FycmF5KHRoaXMuc3RlcHBlcnMpOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdGVwcGVycy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdGhpcy5zdGVwcGVyc1tpXS5zdGVwKCk7CiAgICAgICAgfQogICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLnN0YXRlKS5sZW5ndGggPiBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcykubGVuZ3RoKSB7CiAgICAgICAgICAvLyBUaGUgc3RhdGUgY29udGFpbnMgZGV2aXZlZCBxdWFudGl0aWVzIChub3Qgb25seSBwYXJhbWV0ZXJzKSBhbmQgd2UKICAgICAgICAgIC8vIG5lZWQgdG8gcnVuIHRoZSBsb2dfcG9zdCBvbmNlIG1vcmUgaW4gb3JkZXIgdG8gc2V0IHRoZSBkZXJpdmVkIHF1YW50aXRpZXMKICAgICAgICAgIC8vIGZvciB0aGUgZmluYWwgcGFyYW1ldGVyIHN0YXRlCiAgICAgICAgICB0aGlzLmxvZ19wb3N0KCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzLnN0YXRlOwogICAgICB9OwoKICAgICAgLyoqCiAgICAgICAqIFRha2VzIG5faXRlcmF0aW9ucyBzdGVwcyBpbiB0aGUgcGFyYW1ldGVyIHNwYWNlIGFuZCByZXR1cm5zIHRoZW0KICAgICAgICogYXMgYW4gb2JqZWN0IG9mIGFycmF5cyB3aXRoIG9uZSBhcnJheSBwZXIgcGFyYW1ldGVyLiBGb3IgZXhhbXBsZToKICAgICAgICoge211OiBbMSwgLTEsIDIsIDMsIC4uLl0sIHNpZ21hOiBbMSwgMiwgMiwgMSwgLi4uXX0uCiAgICAgICAqIElmIHRoaW4gaXMgPiAxIHRoZW4gbl9pdGVyYXRpb25zIC8gdGhpbiBzYW1wbGVzIGFyZSByZXR1cm5lZC4KICAgICAgICovCiAgICAgIFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZSA9IGZ1bmN0aW9uIChuX2l0ZXJhdGlvbnMpIHsKICAgICAgICAvLyBJbml0aWFsaXppbmcgY3Vycl9zYW1wbGUgd2hlcmUgdGhlIHNhbXBsZSBpcyBnb2luZyB0byBiZSBzYXZlZAogICAgICAgIC8vIGFzIGFuIG9iamVjdCBjb250YWluaW5nIG9uZSBhcnJheSBwZXIgcGFyYW1ldGVyIHRvIGJlIG1vbml0b3JlZC4KICAgICAgICB2YXIgaSwgaiwgbW9uaXRvcmVkX3BhcmFtczsKICAgICAgICBpZiAodGhpcy5tb25pdG9yZWRfcGFyYW1zID09PSBudWxsKSB7CiAgICAgICAgICBtb25pdG9yZWRfcGFyYW1zID0gT2JqZWN0LmtleXModGhpcy5zdGF0ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG1vbml0b3JlZF9wYXJhbXMgPSB0aGlzLm1vbml0b3JlZF9wYXJhbXM7CiAgICAgICAgfQogICAgICAgIHZhciBjdXJyX3NhbXBsZSA9IHt9OwogICAgICAgIGZvciAoaiA9IDA7IGogPCBtb25pdG9yZWRfcGFyYW1zLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBjdXJyX3NhbXBsZVttb25pdG9yZWRfcGFyYW1zW2pdXSA9IFtdOwogICAgICAgIH0KICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbl9pdGVyYXRpb25zOyBpKyspIHsKICAgICAgICAgIGlmIChpICUgdGhpcy50aGlubmluZ19pbnRlcnZhbCA9PT0gMCkgewogICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgbW9uaXRvcmVkX3BhcmFtcy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgIHZhciBwYXJhbSA9IG1vbml0b3JlZF9wYXJhbXNbal07CiAgICAgICAgICAgICAgY3Vycl9zYW1wbGVbcGFyYW1dLnB1c2goY2xvbmVfcGFyYW1fZHJhdyh0aGlzLnN0YXRlW3BhcmFtXSkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnN0ZXAoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGN1cnJfc2FtcGxlOwogICAgICB9OwoKICAgICAgLyoqCiAgICAgICAqIFRha2VzIG5faXRlcmF0aW9uIHN0ZXBzIGluIHBhcmFtZXRlciBzcGFjZSBidXQgcmV0dXJucyBub3RoaW5nLgogICAgICAgKi8KICAgICAgU2FtcGxlci5wcm90b3R5cGUuYnVybiA9IGZ1bmN0aW9uIChuX2l0ZXJhdGlvbnMpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5faXRlcmF0aW9uczsgaSsrKSB7CiAgICAgICAgICB0aGlzLnN0ZXAoKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICAvKioKICAgICAgICogU2V0cyB3aGF0IHBhcmFtZXRlcnMgc2hvdWxkIGJlIG1vbml0b3JlZCBhbmQgcmV0dXJuZWQgd2hlbiBjYWxsaW5nCiAgICAgICAqIHNhbXBsZS4KICAgICAgICovCiAgICAgIFNhbXBsZXIucHJvdG90eXBlLm1vbml0b3IgPSBmdW5jdGlvbiAocGFyYW1zX3RvX21vbml0b3IpIHsKICAgICAgICB0aGlzLm1vbml0b3JlZF9wYXJhbXMgPSBwYXJhbXNfdG9fbW9uaXRvcjsKICAgICAgfTsKCiAgICAgIC8qKgogICAgICAgKiBTZXRzIHRoZSB0aGlubmluZy4gRm9yIGV4YW1wbGUgdGhpbiA9PSAxMCBtZWFucyB0aGF0IGV2ZXJ5IDEwdGggcG9zdGVyaW9yCiAgICAgICAqIGRyYXcgd2lsbCBiZSBrZXB0LgogICAgICAgKi8KICAgICAgU2FtcGxlci5wcm90b3R5cGUudGhpbiA9IGZ1bmN0aW9uICh0aGlubmluZ19pbnRlcnZhbCkgewogICAgICAgIHRoaXMudGhpbm5pbmdfaW50ZXJ2YWwgPSB0aGlubmluZ19pbnRlcnZhbDsKICAgICAgfTsKCiAgICAgIC8qKgogICAgICAgKiBTZXRzIGFkYXB0YXRpb24gb24sIGlmIGFwcGxpY2FibGUsIGluIGFsbCBzdGVwcGVycy4KICAgICAgICovCiAgICAgIFNhbXBsZXIucHJvdG90eXBlLnN0YXJ0X2FkYXB0YXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB0aGlzLnN0ZXBwZXJzW2ldLnN0YXJ0X2FkYXB0YXRpb24oKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICAvKioKICAgICAgKiBTZXRzIGFkYXB0YXRpb24gb2ZmLCBpZiBhcHBsaWNhYmxlLCBpbiBhbGwgc3RlcHBlcnMuCiAgICAgICovCiAgICAgIFNhbXBsZXIucHJvdG90eXBlLnN0b3BfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3RlcHBlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHRoaXMuc3RlcHBlcnNbaV0uc3RvcF9hZGFwdGF0aW9uKCk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgLyoqCiAgICAgICogQGNsYXNzCiAgICAgICogQGltcGxlbWVudHMge1NhbXBsZXJ9CiAgICAgICogVGhpcyBzYW1wbGVyIHVzZXMgdGhlIEFtd2dTdGVwcGVyIGFzIHRoZSBzdGVwcGVyIGZ1bmN0aW9uIHdoaWNoIGltcGxlbWVudHMgdGhlIAogICAgICAqIEFkYXB0aXZlIE1ldHJvcG9saXMtV2l0aGluLUdpYmJzIGFsZ29yaXRobSBpbiAiRXhhbXBsZXMgb2YgQWRhcHRpdmUgTUNNQyIKICAgICAgKiBieSBSb2JlcnRzIGFuZCBSb3NlbnRoYWwgKDIwMDgpLiBBbiBhZGl0aW9uIGlzIHRoYXQgaXQgaGFuZGxlcyBpbnQgcGFyYW1ldGVycwogICAgICAqIGJ5IG1ha2luZyBkaXNjcmV0ZSBOb3JtYWwgcHJvcG9zYWxzIGFuZCBiaW5hcnkgcGFyYW1ldGVycyBieSB0YWtpbmcgb24gYSBuZXcgCiAgICAgICogdmFsdWUgcHJvcG9ydGlvbmFsIHRvIHRoZSBwb3N0ZXJpb3Igb2YgdGhlIHR3byBwb3NzaWJsZSBzdGF0ZXMgb2YgdGhlCiAgICAgICogcGFyYW1ldGVyLiBUaGlzIHNhbXBsZXIgY2FuIGJlIGVmZmljaWVudCB3aGVuIHRoZSBudW1iZXIgb2YgcGFyYW1ldGVycwogICAgICAqIGFyZSBub3QgdG9vIGhpZ2ggYW5kIHRoZSBjb3JyZWxhdGlvbnMgYmV0d2VlbiBwYXJhbWV0ZXJzIGFyZSBsb3cuCiAgICAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgb25lIG9yIG1vcmUgcGFyYW1ldGVyIGRlZmluaXRpb25zCiAgICAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLgogICAgICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiAKICAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuCiAgICAgICovCiAgICAgIHZhciBBbXdnU2FtcGxlciA9IGZ1bmN0aW9uIChwYXJhbXMsIGxvZ19wb3N0LCBkYXRhLCBvcHRpb25zKSB7CiAgICAgICAgU2FtcGxlci5jYWxsKHRoaXMsIHBhcmFtcywgbG9nX3Bvc3QsIGRhdGEsIG9wdGlvbnMpOwogICAgICB9OwogICAgICBBbXdnU2FtcGxlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNhbXBsZXIucHJvdG90eXBlKTsKICAgICAgQW13Z1NhbXBsZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQW13Z1NhbXBsZXI7CiAgICAgIEFtd2dTYW1wbGVyLnByb3RvdHlwZS5jcmVhdGVfc3RlcHBlcl9lbnNhbWJsZSA9IGZ1bmN0aW9uIChwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykgewogICAgICAgIHJldHVybiBbbmV3IEFtd2dTdGVwcGVyKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKV07CiAgICAgIH07CgogICAgICAvLyBSZXR1cm5pbmcgdGhlIGZ1bmN0aW9ucyB0aGF0IHNob3VsZCBiZSBwdWJsaWNseSBleHBvc2VkIGJ5IHRoaXMgbW9kdWxlCiAgICAgIHJldHVybiB7CiAgICAgICAgcnVuaWY6IHJ1bmlmLAogICAgICAgIHJ1bmlmX2Rpc2NyZXRlOiBydW5pZl9kaXNjcmV0ZSwKICAgICAgICBybm9ybTogcm5vcm0sCiAgICAgICAgcGFyYW1faW5pdF9maXhlZDogcGFyYW1faW5pdF9maXhlZCwKICAgICAgICBjb21wbGV0ZV9wYXJhbXM6IGNvbXBsZXRlX3BhcmFtcywKICAgICAgICBSZWFsTWV0cm9wb2xpc1N0ZXBwZXI6IFJlYWxNZXRyb3BvbGlzU3RlcHBlciwKICAgICAgICBJbnRNZXRyb3BvbGlzU3RlcHBlcjogSW50TWV0cm9wb2xpc1N0ZXBwZXIsCiAgICAgICAgTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI6IE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLAogICAgICAgIE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI6IE11bHRpSW50Q29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIsCiAgICAgICAgQmluYXJ5U3RlcHBlcjogQmluYXJ5U3RlcHBlciwKICAgICAgICBCaW5hcnlDb21wb25lbnRTdGVwcGVyOiBCaW5hcnlDb21wb25lbnRTdGVwcGVyLAogICAgICAgIEFtd2dTdGVwcGVyOiBBbXdnU3RlcHBlciwKICAgICAgICBBbXdnU2FtcGxlcjogQW13Z1NhbXBsZXIKICAgICAgfTsKICAgIH0pOwogIH0pKG1jbWMkMSk7CiAgdmFyIG1jbWNFeHBvcnRzID0gbWNtYyQxLmV4cG9ydHM7CgogIGZ1bmN0aW9uIGFzY2VuZGluZyQxKGEsIGIpIHsKICAgIHJldHVybiBhID09IG51bGwgfHwgYiA9PSBudWxsID8gTmFOIDogYSA8IGIgPyAtMSA6IGEgPiBiID8gMSA6IGEgPj0gYiA/IDAgOiBOYU47CiAgfQoKICBmdW5jdGlvbiogbnVtYmVycyh2YWx1ZXMsIHZhbHVlb2YpIHsKICAgIHsKICAgICAgZm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzKSB7CiAgICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgKHZhbHVlID0gK3ZhbHVlKSA+PSB2YWx1ZSkgewogICAgICAgICAgeWllbGQgdmFsdWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBjb21wYXJlRGVmaW5lZChjb21wYXJlID0gYXNjZW5kaW5nJDEpIHsKICAgIGlmIChjb21wYXJlID09PSBhc2NlbmRpbmckMSkgcmV0dXJuIGFzY2VuZGluZ0RlZmluZWQ7CiAgICBpZiAodHlwZW9mIGNvbXBhcmUgIT09ICJmdW5jdGlvbiIpIHRocm93IG5ldyBUeXBlRXJyb3IoImNvbXBhcmUgaXMgbm90IGEgZnVuY3Rpb24iKTsKICAgIHJldHVybiAoYSwgYikgPT4gewogICAgICBjb25zdCB4ID0gY29tcGFyZShhLCBiKTsKICAgICAgaWYgKHggfHwgeCA9PT0gMCkgcmV0dXJuIHg7CiAgICAgIHJldHVybiAoY29tcGFyZShiLCBiKSA9PT0gMCkgLSAoY29tcGFyZShhLCBhKSA9PT0gMCk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBhc2NlbmRpbmdEZWZpbmVkKGEsIGIpIHsKICAgIHJldHVybiAoYSA9PSBudWxsIHx8ICEoYSA+PSBhKSkgLSAoYiA9PSBudWxsIHx8ICEoYiA+PSBiKSkgfHwgKGEgPCBiID8gLTEgOiBhID4gYiA/IDEgOiAwKTsKICB9CgogIGZ1bmN0aW9uIG1heCh2YWx1ZXMsIHZhbHVlb2YpIHsKICAgIGxldCBtYXg7CiAgICB7CiAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7CiAgICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgKG1heCA8IHZhbHVlIHx8IG1heCA9PT0gdW5kZWZpbmVkICYmIHZhbHVlID49IHZhbHVlKSkgewogICAgICAgICAgbWF4ID0gdmFsdWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gbWF4OwogIH0KCiAgZnVuY3Rpb24gbWluKHZhbHVlcywgdmFsdWVvZikgewogICAgbGV0IG1pbjsKICAgIHsKICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiB2YWx1ZXMpIHsKICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCAmJiAobWluID4gdmFsdWUgfHwgbWluID09PSB1bmRlZmluZWQgJiYgdmFsdWUgPj0gdmFsdWUpKSB7CiAgICAgICAgICBtaW4gPSB2YWx1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBtaW47CiAgfQoKICAvLyBCYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vbW91cm5lci9xdWlja3NlbGVjdAogIC8vIElTQyBsaWNlbnNlLCBDb3B5cmlnaHQgMjAxOCBWbGFkaW1pciBBZ2Fmb25raW4uCiAgZnVuY3Rpb24gcXVpY2tzZWxlY3QoYXJyYXksIGssIGxlZnQgPSAwLCByaWdodCA9IEluZmluaXR5LCBjb21wYXJlKSB7CiAgICBrID0gTWF0aC5mbG9vcihrKTsKICAgIGxlZnQgPSBNYXRoLmZsb29yKE1hdGgubWF4KDAsIGxlZnQpKTsKICAgIHJpZ2h0ID0gTWF0aC5mbG9vcihNYXRoLm1pbihhcnJheS5sZW5ndGggLSAxLCByaWdodCkpOwogICAgaWYgKCEobGVmdCA8PSBrICYmIGsgPD0gcmlnaHQpKSByZXR1cm4gYXJyYXk7CiAgICBjb21wYXJlID0gY29tcGFyZSA9PT0gdW5kZWZpbmVkID8gYXNjZW5kaW5nRGVmaW5lZCA6IGNvbXBhcmVEZWZpbmVkKGNvbXBhcmUpOwogICAgd2hpbGUgKHJpZ2h0ID4gbGVmdCkgewogICAgICBpZiAocmlnaHQgLSBsZWZ0ID4gNjAwKSB7CiAgICAgICAgY29uc3QgbiA9IHJpZ2h0IC0gbGVmdCArIDE7CiAgICAgICAgY29uc3QgbSA9IGsgLSBsZWZ0ICsgMTsKICAgICAgICBjb25zdCB6ID0gTWF0aC5sb2cobik7CiAgICAgICAgY29uc3QgcyA9IDAuNSAqIE1hdGguZXhwKDIgKiB6IC8gMyk7CiAgICAgICAgY29uc3Qgc2QgPSAwLjUgKiBNYXRoLnNxcnQoeiAqIHMgKiAobiAtIHMpIC8gbikgKiAobSAtIG4gLyAyIDwgMCA/IC0xIDogMSk7CiAgICAgICAgY29uc3QgbmV3TGVmdCA9IE1hdGgubWF4KGxlZnQsIE1hdGguZmxvb3IoayAtIG0gKiBzIC8gbiArIHNkKSk7CiAgICAgICAgY29uc3QgbmV3UmlnaHQgPSBNYXRoLm1pbihyaWdodCwgTWF0aC5mbG9vcihrICsgKG4gLSBtKSAqIHMgLyBuICsgc2QpKTsKICAgICAgICBxdWlja3NlbGVjdChhcnJheSwgaywgbmV3TGVmdCwgbmV3UmlnaHQsIGNvbXBhcmUpOwogICAgICB9CiAgICAgIGNvbnN0IHQgPSBhcnJheVtrXTsKICAgICAgbGV0IGkgPSBsZWZ0OwogICAgICBsZXQgaiA9IHJpZ2h0OwogICAgICBzd2FwKGFycmF5LCBsZWZ0LCBrKTsKICAgICAgaWYgKGNvbXBhcmUoYXJyYXlbcmlnaHRdLCB0KSA+IDApIHN3YXAoYXJyYXksIGxlZnQsIHJpZ2h0KTsKICAgICAgd2hpbGUgKGkgPCBqKSB7CiAgICAgICAgc3dhcChhcnJheSwgaSwgaiksICsraSwgLS1qOwogICAgICAgIHdoaWxlIChjb21wYXJlKGFycmF5W2ldLCB0KSA8IDApICsraTsKICAgICAgICB3aGlsZSAoY29tcGFyZShhcnJheVtqXSwgdCkgPiAwKSAtLWo7CiAgICAgIH0KICAgICAgaWYgKGNvbXBhcmUoYXJyYXlbbGVmdF0sIHQpID09PSAwKSBzd2FwKGFycmF5LCBsZWZ0LCBqKTtlbHNlICsraiwgc3dhcChhcnJheSwgaiwgcmlnaHQpOwogICAgICBpZiAoaiA8PSBrKSBsZWZ0ID0gaiArIDE7CiAgICAgIGlmIChrIDw9IGopIHJpZ2h0ID0gaiAtIDE7CiAgICB9CiAgICByZXR1cm4gYXJyYXk7CiAgfQogIGZ1bmN0aW9uIHN3YXAoYXJyYXksIGksIGopIHsKICAgIGNvbnN0IHQgPSBhcnJheVtpXTsKICAgIGFycmF5W2ldID0gYXJyYXlbal07CiAgICBhcnJheVtqXSA9IHQ7CiAgfQoKICBmdW5jdGlvbiBxdWFudGlsZSh2YWx1ZXMsIHAsIHZhbHVlb2YpIHsKICAgIHZhbHVlcyA9IEZsb2F0NjRBcnJheS5mcm9tKG51bWJlcnModmFsdWVzKSk7CiAgICBpZiAoIShuID0gdmFsdWVzLmxlbmd0aCkgfHwgaXNOYU4ocCA9ICtwKSkgcmV0dXJuOwogICAgaWYgKHAgPD0gMCB8fCBuIDwgMikgcmV0dXJuIG1pbih2YWx1ZXMpOwogICAgaWYgKHAgPj0gMSkgcmV0dXJuIG1heCh2YWx1ZXMpOwogICAgdmFyIG4sCiAgICAgIGkgPSAobiAtIDEpICogcCwKICAgICAgaTAgPSBNYXRoLmZsb29yKGkpLAogICAgICB2YWx1ZTAgPSBtYXgocXVpY2tzZWxlY3QodmFsdWVzLCBpMCkuc3ViYXJyYXkoMCwgaTAgKyAxKSksCiAgICAgIHZhbHVlMSA9IG1pbih2YWx1ZXMuc3ViYXJyYXkoaTAgKyAxKSk7CiAgICByZXR1cm4gdmFsdWUwICsgKHZhbHVlMSAtIHZhbHVlMCkgKiAoaSAtIGkwKTsKICB9CgogIGZ1bmN0aW9uIG1lZGlhbih2YWx1ZXMsIHZhbHVlb2YpIHsKICAgIHJldHVybiBxdWFudGlsZSh2YWx1ZXMsIDAuNSk7CiAgfQoKICB2YXIgbm9vcCA9IHsKICAgIHZhbHVlOiAoKSA9PiB7fQogIH07CiAgZnVuY3Rpb24gZGlzcGF0Y2goKSB7CiAgICBmb3IgKHZhciBpID0gMCwgbiA9IGFyZ3VtZW50cy5sZW5ndGgsIF8gPSB7fSwgdDsgaSA8IG47ICsraSkgewogICAgICBpZiAoISh0ID0gYXJndW1lbnRzW2ldICsgIiIpIHx8IHQgaW4gXyB8fCAvW1xzLl0vLnRlc3QodCkpIHRocm93IG5ldyBFcnJvcigiaWxsZWdhbCB0eXBlOiAiICsgdCk7CiAgICAgIF9bdF0gPSBbXTsKICAgIH0KICAgIHJldHVybiBuZXcgRGlzcGF0Y2goXyk7CiAgfQogIGZ1bmN0aW9uIERpc3BhdGNoKF8pIHsKICAgIHRoaXMuXyA9IF87CiAgfQogIGZ1bmN0aW9uIHBhcnNlVHlwZW5hbWVzJDEodHlwZW5hbWVzLCB0eXBlcykgewogICAgcmV0dXJuIHR5cGVuYW1lcy50cmltKCkuc3BsaXQoL158XHMrLykubWFwKGZ1bmN0aW9uICh0KSB7CiAgICAgIHZhciBuYW1lID0gIiIsCiAgICAgICAgaSA9IHQuaW5kZXhPZigiLiIpOwogICAgICBpZiAoaSA+PSAwKSBuYW1lID0gdC5zbGljZShpICsgMSksIHQgPSB0LnNsaWNlKDAsIGkpOwogICAgICBpZiAodCAmJiAhdHlwZXMuaGFzT3duUHJvcGVydHkodCkpIHRocm93IG5ldyBFcnJvcigidW5rbm93biB0eXBlOiAiICsgdCk7CiAgICAgIHJldHVybiB7CiAgICAgICAgdHlwZTogdCwKICAgICAgICBuYW1lOiBuYW1lCiAgICAgIH07CiAgICB9KTsKICB9CiAgRGlzcGF0Y2gucHJvdG90eXBlID0gZGlzcGF0Y2gucHJvdG90eXBlID0gewogICAgY29uc3RydWN0b3I6IERpc3BhdGNoLAogICAgb246IGZ1bmN0aW9uICh0eXBlbmFtZSwgY2FsbGJhY2spIHsKICAgICAgdmFyIF8gPSB0aGlzLl8sCiAgICAgICAgVCA9IHBhcnNlVHlwZW5hbWVzJDEodHlwZW5hbWUgKyAiIiwgXyksCiAgICAgICAgdCwKICAgICAgICBpID0gLTEsCiAgICAgICAgbiA9IFQubGVuZ3RoOwoKICAgICAgLy8gSWYgbm8gY2FsbGJhY2sgd2FzIHNwZWNpZmllZCwgcmV0dXJuIHRoZSBjYWxsYmFjayBvZiB0aGUgZ2l2ZW4gdHlwZSBhbmQgbmFtZS4KICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7CiAgICAgICAgd2hpbGUgKCsraSA8IG4pIGlmICgodCA9ICh0eXBlbmFtZSA9IFRbaV0pLnR5cGUpICYmICh0ID0gZ2V0JDEoX1t0XSwgdHlwZW5hbWUubmFtZSkpKSByZXR1cm4gdDsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIC8vIElmIGEgdHlwZSB3YXMgc3BlY2lmaWVkLCBzZXQgdGhlIGNhbGxiYWNrIGZvciB0aGUgZ2l2ZW4gdHlwZSBhbmQgbmFtZS4KICAgICAgLy8gT3RoZXJ3aXNlLCBpZiBhIG51bGwgY2FsbGJhY2sgd2FzIHNwZWNpZmllZCwgcmVtb3ZlIGNhbGxiYWNrcyBvZiB0aGUgZ2l2ZW4gbmFtZS4KICAgICAgaWYgKGNhbGxiYWNrICE9IG51bGwgJiYgdHlwZW9mIGNhbGxiYWNrICE9PSAiZnVuY3Rpb24iKSB0aHJvdyBuZXcgRXJyb3IoImludmFsaWQgY2FsbGJhY2s6ICIgKyBjYWxsYmFjayk7CiAgICAgIHdoaWxlICgrK2kgPCBuKSB7CiAgICAgICAgaWYgKHQgPSAodHlwZW5hbWUgPSBUW2ldKS50eXBlKSBfW3RdID0gc2V0JDEoX1t0XSwgdHlwZW5hbWUubmFtZSwgY2FsbGJhY2spO2Vsc2UgaWYgKGNhbGxiYWNrID09IG51bGwpIGZvciAodCBpbiBfKSBfW3RdID0gc2V0JDEoX1t0XSwgdHlwZW5hbWUubmFtZSwgbnVsbCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXM7CiAgICB9LAogICAgY29weTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgY29weSA9IHt9LAogICAgICAgIF8gPSB0aGlzLl87CiAgICAgIGZvciAodmFyIHQgaW4gXykgY29weVt0XSA9IF9bdF0uc2xpY2UoKTsKICAgICAgcmV0dXJuIG5ldyBEaXNwYXRjaChjb3B5KTsKICAgIH0sCiAgICBjYWxsOiBmdW5jdGlvbiAodHlwZSwgdGhhdCkgewogICAgICBpZiAoKG4gPSBhcmd1bWVudHMubGVuZ3RoIC0gMikgPiAwKSBmb3IgKHZhciBhcmdzID0gbmV3IEFycmF5KG4pLCBpID0gMCwgbiwgdDsgaSA8IG47ICsraSkgYXJnc1tpXSA9IGFyZ3VtZW50c1tpICsgMl07CiAgICAgIGlmICghdGhpcy5fLmhhc093blByb3BlcnR5KHR5cGUpKSB0aHJvdyBuZXcgRXJyb3IoInVua25vd24gdHlwZTogIiArIHR5cGUpOwogICAgICBmb3IgKHQgPSB0aGlzLl9bdHlwZV0sIGkgPSAwLCBuID0gdC5sZW5ndGg7IGkgPCBuOyArK2kpIHRbaV0udmFsdWUuYXBwbHkodGhhdCwgYXJncyk7CiAgICB9LAogICAgYXBwbHk6IGZ1bmN0aW9uICh0eXBlLCB0aGF0LCBhcmdzKSB7CiAgICAgIGlmICghdGhpcy5fLmhhc093blByb3BlcnR5KHR5cGUpKSB0aHJvdyBuZXcgRXJyb3IoInVua25vd24gdHlwZTogIiArIHR5cGUpOwogICAgICBmb3IgKHZhciB0ID0gdGhpcy5fW3R5cGVdLCBpID0gMCwgbiA9IHQubGVuZ3RoOyBpIDwgbjsgKytpKSB0W2ldLnZhbHVlLmFwcGx5KHRoYXQsIGFyZ3MpOwogICAgfQogIH07CiAgZnVuY3Rpb24gZ2V0JDEodHlwZSwgbmFtZSkgewogICAgZm9yICh2YXIgaSA9IDAsIG4gPSB0eXBlLmxlbmd0aCwgYzsgaSA8IG47ICsraSkgewogICAgICBpZiAoKGMgPSB0eXBlW2ldKS5uYW1lID09PSBuYW1lKSB7CiAgICAgICAgcmV0dXJuIGMudmFsdWU7CiAgICAgIH0KICAgIH0KICB9CiAgZnVuY3Rpb24gc2V0JDEodHlwZSwgbmFtZSwgY2FsbGJhY2spIHsKICAgIGZvciAodmFyIGkgPSAwLCBuID0gdHlwZS5sZW5ndGg7IGkgPCBuOyArK2kpIHsKICAgICAgaWYgKHR5cGVbaV0ubmFtZSA9PT0gbmFtZSkgewogICAgICAgIHR5cGVbaV0gPSBub29wLCB0eXBlID0gdHlwZS5zbGljZSgwLCBpKS5jb25jYXQodHlwZS5zbGljZShpICsgMSkpOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgICBpZiAoY2FsbGJhY2sgIT0gbnVsbCkgdHlwZS5wdXNoKHsKICAgICAgbmFtZTogbmFtZSwKICAgICAgdmFsdWU6IGNhbGxiYWNrCiAgICB9KTsKICAgIHJldHVybiB0eXBlOwogIH0KCiAgdmFyIHhodG1sID0gImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiOwogIHZhciBuYW1lc3BhY2VzID0gewogICAgc3ZnOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLAogICAgeGh0bWw6IHhodG1sLAogICAgeGxpbms6ICJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiwKICAgIHhtbDogImh0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZSIsCiAgICB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAveG1sbnMvIgogIH07CgogIGZ1bmN0aW9uIG5hbWVzcGFjZSAobmFtZSkgewogICAgdmFyIHByZWZpeCA9IG5hbWUgKz0gIiIsCiAgICAgIGkgPSBwcmVmaXguaW5kZXhPZigiOiIpOwogICAgaWYgKGkgPj0gMCAmJiAocHJlZml4ID0gbmFtZS5zbGljZSgwLCBpKSkgIT09ICJ4bWxucyIpIG5hbWUgPSBuYW1lLnNsaWNlKGkgKyAxKTsKICAgIHJldHVybiBuYW1lc3BhY2VzLmhhc093blByb3BlcnR5KHByZWZpeCkgPyB7CiAgICAgIHNwYWNlOiBuYW1lc3BhY2VzW3ByZWZpeF0sCiAgICAgIGxvY2FsOiBuYW1lCiAgICB9IDogbmFtZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnMKICB9CgogIGZ1bmN0aW9uIGNyZWF0b3JJbmhlcml0KG5hbWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBkb2N1bWVudCA9IHRoaXMub3duZXJEb2N1bWVudCwKICAgICAgICB1cmkgPSB0aGlzLm5hbWVzcGFjZVVSSTsKICAgICAgcmV0dXJuIHVyaSA9PT0geGh0bWwgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm5hbWVzcGFjZVVSSSA9PT0geGh0bWwgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5hbWUpIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHVyaSwgbmFtZSk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBjcmVhdG9yRml4ZWQoZnVsbG5hbWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0aGlzLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBjcmVhdG9yIChuYW1lKSB7CiAgICB2YXIgZnVsbG5hbWUgPSBuYW1lc3BhY2UobmFtZSk7CiAgICByZXR1cm4gKGZ1bGxuYW1lLmxvY2FsID8gY3JlYXRvckZpeGVkIDogY3JlYXRvckluaGVyaXQpKGZ1bGxuYW1lKTsKICB9CgogIGZ1bmN0aW9uIG5vbmUoKSB7fQogIGZ1bmN0aW9uIHNlbGVjdG9yIChzZWxlY3RvcikgewogICAgcmV0dXJuIHNlbGVjdG9yID09IG51bGwgPyBub25lIDogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBzZWxlY3Rpb25fc2VsZWN0IChzZWxlY3QpIHsKICAgIGlmICh0eXBlb2Ygc2VsZWN0ICE9PSAiZnVuY3Rpb24iKSBzZWxlY3QgPSBzZWxlY3RvcihzZWxlY3QpOwogICAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gbmV3IEFycmF5KG0pLCBqID0gMDsgaiA8IG07ICsraikgewogICAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgc3ViZ3JvdXAgPSBzdWJncm91cHNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIHN1Ym5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7CiAgICAgICAgaWYgKChub2RlID0gZ3JvdXBbaV0pICYmIChzdWJub2RlID0gc2VsZWN0LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKSkgewogICAgICAgICAgaWYgKCJfX2RhdGFfXyIgaW4gbm9kZSkgc3Vibm9kZS5fX2RhdGFfXyA9IG5vZGUuX19kYXRhX187CiAgICAgICAgICBzdWJncm91cFtpXSA9IHN1Ym5vZGU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gbmV3IFNlbGVjdGlvbiQxKHN1Ymdyb3VwcywgdGhpcy5fcGFyZW50cyk7CiAgfQoKICAvLyBHaXZlbiBzb21ldGhpbmcgYXJyYXkgbGlrZSAob3IgbnVsbCksIHJldHVybnMgc29tZXRoaW5nIHRoYXQgaXMgc3RyaWN0bHkgYW4KICAvLyBhcnJheS4gVGhpcyBpcyB1c2VkIHRvIGVuc3VyZSB0aGF0IGFycmF5LWxpa2Ugb2JqZWN0cyBwYXNzZWQgdG8gZDMuc2VsZWN0QWxsCiAgLy8gb3Igc2VsZWN0aW9uLnNlbGVjdEFsbCBhcmUgY29udmVydGVkIGludG8gcHJvcGVyIGFycmF5cyB3aGVuIGNyZWF0aW5nIGEKICAvLyBzZWxlY3Rpb247IHdlIGRvbuKAmXQgZXZlciB3YW50IHRvIGNyZWF0ZSBhIHNlbGVjdGlvbiBiYWNrZWQgYnkgYSBsaXZlCiAgLy8gSFRNTENvbGxlY3Rpb24gb3IgTm9kZUxpc3QuIEhvd2V2ZXIsIG5vdGUgdGhhdCBzZWxlY3Rpb24uc2VsZWN0QWxsIHdpbGwgdXNlIGEKICAvLyBzdGF0aWMgTm9kZUxpc3QgYXMgYSBncm91cCwgc2luY2UgaXQgc2FmZWx5IGRlcml2ZWQgZnJvbSBxdWVyeVNlbGVjdG9yQWxsLgogIGZ1bmN0aW9uIGFycmF5KHgpIHsKICAgIHJldHVybiB4ID09IG51bGwgPyBbXSA6IEFycmF5LmlzQXJyYXkoeCkgPyB4IDogQXJyYXkuZnJvbSh4KTsKICB9CgogIGZ1bmN0aW9uIGVtcHR5KCkgewogICAgcmV0dXJuIFtdOwogIH0KICBmdW5jdGlvbiBzZWxlY3RvckFsbCAoc2VsZWN0b3IpIHsKICAgIHJldHVybiBzZWxlY3RvciA9PSBudWxsID8gZW1wdHkgOiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIGFycmF5QWxsKHNlbGVjdCkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGFycmF5KHNlbGVjdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbl9zZWxlY3RBbGwgKHNlbGVjdCkgewogICAgaWYgKHR5cGVvZiBzZWxlY3QgPT09ICJmdW5jdGlvbiIpIHNlbGVjdCA9IGFycmF5QWxsKHNlbGVjdCk7ZWxzZSBzZWxlY3QgPSBzZWxlY3RvckFsbChzZWxlY3QpOwogICAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gW10sIHBhcmVudHMgPSBbXSwgaiA9IDA7IGogPCBtOyArK2opIHsKICAgICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7CiAgICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkgewogICAgICAgICAgc3ViZ3JvdXBzLnB1c2goc2VsZWN0LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKTsKICAgICAgICAgIHBhcmVudHMucHVzaChub2RlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBuZXcgU2VsZWN0aW9uJDEoc3ViZ3JvdXBzLCBwYXJlbnRzKTsKICB9CgogIGZ1bmN0aW9uIG1hdGNoZXIgKHNlbGVjdG9yKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdGhpcy5tYXRjaGVzKHNlbGVjdG9yKTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIGNoaWxkTWF0Y2hlcihzZWxlY3RvcikgewogICAgcmV0dXJuIGZ1bmN0aW9uIChub2RlKSB7CiAgICAgIHJldHVybiBub2RlLm1hdGNoZXMoc2VsZWN0b3IpOwogICAgfTsKICB9CgogIHZhciBmaW5kID0gQXJyYXkucHJvdG90eXBlLmZpbmQ7CiAgZnVuY3Rpb24gY2hpbGRGaW5kKG1hdGNoKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gZmluZC5jYWxsKHRoaXMuY2hpbGRyZW4sIG1hdGNoKTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIGNoaWxkRmlyc3QoKSB7CiAgICByZXR1cm4gdGhpcy5maXJzdEVsZW1lbnRDaGlsZDsKICB9CiAgZnVuY3Rpb24gc2VsZWN0aW9uX3NlbGVjdENoaWxkIChtYXRjaCkgewogICAgcmV0dXJuIHRoaXMuc2VsZWN0KG1hdGNoID09IG51bGwgPyBjaGlsZEZpcnN0IDogY2hpbGRGaW5kKHR5cGVvZiBtYXRjaCA9PT0gImZ1bmN0aW9uIiA/IG1hdGNoIDogY2hpbGRNYXRjaGVyKG1hdGNoKSkpOwogIH0KCiAgdmFyIGZpbHRlciA9IEFycmF5LnByb3RvdHlwZS5maWx0ZXI7CiAgZnVuY3Rpb24gY2hpbGRyZW4oKSB7CiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmNoaWxkcmVuKTsKICB9CiAgZnVuY3Rpb24gY2hpbGRyZW5GaWx0ZXIobWF0Y2gpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBmaWx0ZXIuY2FsbCh0aGlzLmNoaWxkcmVuLCBtYXRjaCk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBzZWxlY3Rpb25fc2VsZWN0Q2hpbGRyZW4gKG1hdGNoKSB7CiAgICByZXR1cm4gdGhpcy5zZWxlY3RBbGwobWF0Y2ggPT0gbnVsbCA/IGNoaWxkcmVuIDogY2hpbGRyZW5GaWx0ZXIodHlwZW9mIG1hdGNoID09PSAiZnVuY3Rpb24iID8gbWF0Y2ggOiBjaGlsZE1hdGNoZXIobWF0Y2gpKSk7CiAgfQoKICBmdW5jdGlvbiBzZWxlY3Rpb25fZmlsdGVyIChtYXRjaCkgewogICAgaWYgKHR5cGVvZiBtYXRjaCAhPT0gImZ1bmN0aW9uIikgbWF0Y2ggPSBtYXRjaGVyKG1hdGNoKTsKICAgIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIHN1Ymdyb3VwcyA9IG5ldyBBcnJheShtKSwgaiA9IDA7IGogPCBtOyArK2opIHsKICAgICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIHN1Ymdyb3VwID0gc3ViZ3JvdXBzW2pdID0gW10sIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7CiAgICAgICAgaWYgKChub2RlID0gZ3JvdXBbaV0pICYmIG1hdGNoLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKSB7CiAgICAgICAgICBzdWJncm91cC5wdXNoKG5vZGUpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIG5ldyBTZWxlY3Rpb24kMShzdWJncm91cHMsIHRoaXMuX3BhcmVudHMpOwogIH0KCiAgZnVuY3Rpb24gc3BhcnNlICh1cGRhdGUpIHsKICAgIHJldHVybiBuZXcgQXJyYXkodXBkYXRlLmxlbmd0aCk7CiAgfQoKICBmdW5jdGlvbiBzZWxlY3Rpb25fZW50ZXIgKCkgewogICAgcmV0dXJuIG5ldyBTZWxlY3Rpb24kMSh0aGlzLl9lbnRlciB8fCB0aGlzLl9ncm91cHMubWFwKHNwYXJzZSksIHRoaXMuX3BhcmVudHMpOwogIH0KICBmdW5jdGlvbiBFbnRlck5vZGUocGFyZW50LCBkYXR1bSkgewogICAgdGhpcy5vd25lckRvY3VtZW50ID0gcGFyZW50Lm93bmVyRG9jdW1lbnQ7CiAgICB0aGlzLm5hbWVzcGFjZVVSSSA9IHBhcmVudC5uYW1lc3BhY2VVUkk7CiAgICB0aGlzLl9uZXh0ID0gbnVsbDsKICAgIHRoaXMuX3BhcmVudCA9IHBhcmVudDsKICAgIHRoaXMuX19kYXRhX18gPSBkYXR1bTsKICB9CiAgRW50ZXJOb2RlLnByb3RvdHlwZSA9IHsKICAgIGNvbnN0cnVjdG9yOiBFbnRlck5vZGUsCiAgICBhcHBlbmRDaGlsZDogZnVuY3Rpb24gKGNoaWxkKSB7CiAgICAgIHJldHVybiB0aGlzLl9wYXJlbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLCB0aGlzLl9uZXh0KTsKICAgIH0sCiAgICBpbnNlcnRCZWZvcmU6IGZ1bmN0aW9uIChjaGlsZCwgbmV4dCkgewogICAgICByZXR1cm4gdGhpcy5fcGFyZW50Lmluc2VydEJlZm9yZShjaGlsZCwgbmV4dCk7CiAgICB9LAogICAgcXVlcnlTZWxlY3RvcjogZnVuY3Rpb24gKHNlbGVjdG9yKSB7CiAgICAgIHJldHVybiB0aGlzLl9wYXJlbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7CiAgICB9LAogICAgcXVlcnlTZWxlY3RvckFsbDogZnVuY3Rpb24gKHNlbGVjdG9yKSB7CiAgICAgIHJldHVybiB0aGlzLl9wYXJlbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7CiAgICB9CiAgfTsKCiAgZnVuY3Rpb24gY29uc3RhbnQkMSAoeCkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHg7CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gYmluZEluZGV4KHBhcmVudCwgZ3JvdXAsIGVudGVyLCB1cGRhdGUsIGV4aXQsIGRhdGEpIHsKICAgIHZhciBpID0gMCwKICAgICAgbm9kZSwKICAgICAgZ3JvdXBMZW5ndGggPSBncm91cC5sZW5ndGgsCiAgICAgIGRhdGFMZW5ndGggPSBkYXRhLmxlbmd0aDsKCiAgICAvLyBQdXQgYW55IG5vbi1udWxsIG5vZGVzIHRoYXQgZml0IGludG8gdXBkYXRlLgogICAgLy8gUHV0IGFueSBudWxsIG5vZGVzIGludG8gZW50ZXIuCiAgICAvLyBQdXQgYW55IHJlbWFpbmluZyBkYXRhIGludG8gZW50ZXIuCiAgICBmb3IgKDsgaSA8IGRhdGFMZW5ndGg7ICsraSkgewogICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7CiAgICAgICAgbm9kZS5fX2RhdGFfXyA9IGRhdGFbaV07CiAgICAgICAgdXBkYXRlW2ldID0gbm9kZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBlbnRlcltpXSA9IG5ldyBFbnRlck5vZGUocGFyZW50LCBkYXRhW2ldKTsKICAgICAgfQogICAgfQoKICAgIC8vIFB1dCBhbnkgbm9uLW51bGwgbm9kZXMgdGhhdCBkb27igJl0IGZpdCBpbnRvIGV4aXQuCiAgICBmb3IgKDsgaSA8IGdyb3VwTGVuZ3RoOyArK2kpIHsKICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkgewogICAgICAgIGV4aXRbaV0gPSBub2RlOwogICAgICB9CiAgICB9CiAgfQogIGZ1bmN0aW9uIGJpbmRLZXkocGFyZW50LCBncm91cCwgZW50ZXIsIHVwZGF0ZSwgZXhpdCwgZGF0YSwga2V5KSB7CiAgICB2YXIgaSwKICAgICAgbm9kZSwKICAgICAgbm9kZUJ5S2V5VmFsdWUgPSBuZXcgTWFwKCksCiAgICAgIGdyb3VwTGVuZ3RoID0gZ3JvdXAubGVuZ3RoLAogICAgICBkYXRhTGVuZ3RoID0gZGF0YS5sZW5ndGgsCiAgICAgIGtleVZhbHVlcyA9IG5ldyBBcnJheShncm91cExlbmd0aCksCiAgICAgIGtleVZhbHVlOwoKICAgIC8vIENvbXB1dGUgdGhlIGtleSBmb3IgZWFjaCBub2RlLgogICAgLy8gSWYgbXVsdGlwbGUgbm9kZXMgaGF2ZSB0aGUgc2FtZSBrZXksIHRoZSBkdXBsaWNhdGVzIGFyZSBhZGRlZCB0byBleGl0LgogICAgZm9yIChpID0gMDsgaSA8IGdyb3VwTGVuZ3RoOyArK2kpIHsKICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkgewogICAgICAgIGtleVZhbHVlc1tpXSA9IGtleVZhbHVlID0ga2V5LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApICsgIiI7CiAgICAgICAgaWYgKG5vZGVCeUtleVZhbHVlLmhhcyhrZXlWYWx1ZSkpIHsKICAgICAgICAgIGV4aXRbaV0gPSBub2RlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBub2RlQnlLZXlWYWx1ZS5zZXQoa2V5VmFsdWUsIG5vZGUpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIC8vIENvbXB1dGUgdGhlIGtleSBmb3IgZWFjaCBkYXR1bS4KICAgIC8vIElmIHRoZXJlIGEgbm9kZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBrZXksIGpvaW4gYW5kIGFkZCBpdCB0byB1cGRhdGUuCiAgICAvLyBJZiB0aGVyZSBpcyBub3QgKG9yIHRoZSBrZXkgaXMgYSBkdXBsaWNhdGUpLCBhZGQgaXQgdG8gZW50ZXIuCiAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YUxlbmd0aDsgKytpKSB7CiAgICAgIGtleVZhbHVlID0ga2V5LmNhbGwocGFyZW50LCBkYXRhW2ldLCBpLCBkYXRhKSArICIiOwogICAgICBpZiAobm9kZSA9IG5vZGVCeUtleVZhbHVlLmdldChrZXlWYWx1ZSkpIHsKICAgICAgICB1cGRhdGVbaV0gPSBub2RlOwogICAgICAgIG5vZGUuX19kYXRhX18gPSBkYXRhW2ldOwogICAgICAgIG5vZGVCeUtleVZhbHVlLmRlbGV0ZShrZXlWYWx1ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZW50ZXJbaV0gPSBuZXcgRW50ZXJOb2RlKHBhcmVudCwgZGF0YVtpXSk7CiAgICAgIH0KICAgIH0KCiAgICAvLyBBZGQgYW55IHJlbWFpbmluZyBub2RlcyB0aGF0IHdlcmUgbm90IGJvdW5kIHRvIGRhdGEgdG8gZXhpdC4KICAgIGZvciAoaSA9IDA7IGkgPCBncm91cExlbmd0aDsgKytpKSB7CiAgICAgIGlmICgobm9kZSA9IGdyb3VwW2ldKSAmJiBub2RlQnlLZXlWYWx1ZS5nZXQoa2V5VmFsdWVzW2ldKSA9PT0gbm9kZSkgewogICAgICAgIGV4aXRbaV0gPSBub2RlOwogICAgICB9CiAgICB9CiAgfQogIGZ1bmN0aW9uIGRhdHVtKG5vZGUpIHsKICAgIHJldHVybiBub2RlLl9fZGF0YV9fOwogIH0KICBmdW5jdGlvbiBzZWxlY3Rpb25fZGF0YSAodmFsdWUsIGtleSkgewogICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLCBkYXR1bSk7CiAgICB2YXIgYmluZCA9IGtleSA/IGJpbmRLZXkgOiBiaW5kSW5kZXgsCiAgICAgIHBhcmVudHMgPSB0aGlzLl9wYXJlbnRzLAogICAgICBncm91cHMgPSB0aGlzLl9ncm91cHM7CiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAiZnVuY3Rpb24iKSB2YWx1ZSA9IGNvbnN0YW50JDEodmFsdWUpOwogICAgZm9yICh2YXIgbSA9IGdyb3Vwcy5sZW5ndGgsIHVwZGF0ZSA9IG5ldyBBcnJheShtKSwgZW50ZXIgPSBuZXcgQXJyYXkobSksIGV4aXQgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7CiAgICAgIHZhciBwYXJlbnQgPSBwYXJlbnRzW2pdLAogICAgICAgIGdyb3VwID0gZ3JvdXBzW2pdLAogICAgICAgIGdyb3VwTGVuZ3RoID0gZ3JvdXAubGVuZ3RoLAogICAgICAgIGRhdGEgPSBhcnJheWxpa2UodmFsdWUuY2FsbChwYXJlbnQsIHBhcmVudCAmJiBwYXJlbnQuX19kYXRhX18sIGosIHBhcmVudHMpKSwKICAgICAgICBkYXRhTGVuZ3RoID0gZGF0YS5sZW5ndGgsCiAgICAgICAgZW50ZXJHcm91cCA9IGVudGVyW2pdID0gbmV3IEFycmF5KGRhdGFMZW5ndGgpLAogICAgICAgIHVwZGF0ZUdyb3VwID0gdXBkYXRlW2pdID0gbmV3IEFycmF5KGRhdGFMZW5ndGgpLAogICAgICAgIGV4aXRHcm91cCA9IGV4aXRbal0gPSBuZXcgQXJyYXkoZ3JvdXBMZW5ndGgpOwogICAgICBiaW5kKHBhcmVudCwgZ3JvdXAsIGVudGVyR3JvdXAsIHVwZGF0ZUdyb3VwLCBleGl0R3JvdXAsIGRhdGEsIGtleSk7CgogICAgICAvLyBOb3cgY29ubmVjdCB0aGUgZW50ZXIgbm9kZXMgdG8gdGhlaXIgZm9sbG93aW5nIHVwZGF0ZSBub2RlLCBzdWNoIHRoYXQKICAgICAgLy8gYXBwZW5kQ2hpbGQgY2FuIGluc2VydCB0aGUgbWF0ZXJpYWxpemVkIGVudGVyIG5vZGUgYmVmb3JlIHRoaXMgbm9kZSwKICAgICAgLy8gcmF0aGVyIHRoYW4gYXQgdGhlIGVuZCBvZiB0aGUgcGFyZW50IG5vZGUuCiAgICAgIGZvciAodmFyIGkwID0gMCwgaTEgPSAwLCBwcmV2aW91cywgbmV4dDsgaTAgPCBkYXRhTGVuZ3RoOyArK2kwKSB7CiAgICAgICAgaWYgKHByZXZpb3VzID0gZW50ZXJHcm91cFtpMF0pIHsKICAgICAgICAgIGlmIChpMCA+PSBpMSkgaTEgPSBpMCArIDE7CiAgICAgICAgICB3aGlsZSAoIShuZXh0ID0gdXBkYXRlR3JvdXBbaTFdKSAmJiArK2kxIDwgZGF0YUxlbmd0aCk7CiAgICAgICAgICBwcmV2aW91cy5fbmV4dCA9IG5leHQgfHwgbnVsbDsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHVwZGF0ZSA9IG5ldyBTZWxlY3Rpb24kMSh1cGRhdGUsIHBhcmVudHMpOwogICAgdXBkYXRlLl9lbnRlciA9IGVudGVyOwogICAgdXBkYXRlLl9leGl0ID0gZXhpdDsKICAgIHJldHVybiB1cGRhdGU7CiAgfQoKICAvLyBHaXZlbiBzb21lIGRhdGEsIHRoaXMgcmV0dXJucyBhbiBhcnJheS1saWtlIHZpZXcgb2YgaXQ6IGFuIG9iamVjdCB0aGF0CiAgLy8gZXhwb3NlcyBhIGxlbmd0aCBwcm9wZXJ0eSBhbmQgYWxsb3dzIG51bWVyaWMgaW5kZXhpbmcuIE5vdGUgdGhhdCB1bmxpa2UKICAvLyBzZWxlY3RBbGwsIHRoaXMgaXNu4oCZdCB3b3JyaWVkIGFib3V0IOKAnGxpdmXigJ0gY29sbGVjdGlvbnMgYmVjYXVzZSB0aGUgcmVzdWx0aW5nCiAgLy8gYXJyYXkgd2lsbCBvbmx5IGJlIHVzZWQgYnJpZWZseSB3aGlsZSBkYXRhIGlzIGJlaW5nIGJvdW5kLiAoSXQgaXMgcG9zc2libGUgdG8KICAvLyBjYXVzZSB0aGUgZGF0YSB0byBjaGFuZ2Ugd2hpbGUgaXRlcmF0aW5nIGJ5IHVzaW5nIGEga2V5IGZ1bmN0aW9uLCBidXQgcGxlYXNlCiAgLy8gZG9u4oCZdDsgd2XigJlkIHJhdGhlciBhdm9pZCBhIGdyYXR1aXRvdXMgY29weS4pCiAgZnVuY3Rpb24gYXJyYXlsaWtlKGRhdGEpIHsKICAgIHJldHVybiB0eXBlb2YgZGF0YSA9PT0gIm9iamVjdCIgJiYgImxlbmd0aCIgaW4gZGF0YSA/IGRhdGEgLy8gQXJyYXksIFR5cGVkQXJyYXksIE5vZGVMaXN0LCBhcnJheS1saWtlCiAgICA6IEFycmF5LmZyb20oZGF0YSk7IC8vIE1hcCwgU2V0LCBpdGVyYWJsZSwgc3RyaW5nLCBvciBhbnl0aGluZyBlbHNlCiAgfQoKICBmdW5jdGlvbiBzZWxlY3Rpb25fZXhpdCAoKSB7CiAgICByZXR1cm4gbmV3IFNlbGVjdGlvbiQxKHRoaXMuX2V4aXQgfHwgdGhpcy5fZ3JvdXBzLm1hcChzcGFyc2UpLCB0aGlzLl9wYXJlbnRzKTsKICB9CgogIGZ1bmN0aW9uIHNlbGVjdGlvbl9qb2luIChvbmVudGVyLCBvbnVwZGF0ZSwgb25leGl0KSB7CiAgICB2YXIgZW50ZXIgPSB0aGlzLmVudGVyKCksCiAgICAgIHVwZGF0ZSA9IHRoaXMsCiAgICAgIGV4aXQgPSB0aGlzLmV4aXQoKTsKICAgIGlmICh0eXBlb2Ygb25lbnRlciA9PT0gImZ1bmN0aW9uIikgewogICAgICBlbnRlciA9IG9uZW50ZXIoZW50ZXIpOwogICAgICBpZiAoZW50ZXIpIGVudGVyID0gZW50ZXIuc2VsZWN0aW9uKCk7CiAgICB9IGVsc2UgewogICAgICBlbnRlciA9IGVudGVyLmFwcGVuZChvbmVudGVyICsgIiIpOwogICAgfQogICAgaWYgKG9udXBkYXRlICE9IG51bGwpIHsKICAgICAgdXBkYXRlID0gb251cGRhdGUodXBkYXRlKTsKICAgICAgaWYgKHVwZGF0ZSkgdXBkYXRlID0gdXBkYXRlLnNlbGVjdGlvbigpOwogICAgfQogICAgaWYgKG9uZXhpdCA9PSBudWxsKSBleGl0LnJlbW92ZSgpO2Vsc2Ugb25leGl0KGV4aXQpOwogICAgcmV0dXJuIGVudGVyICYmIHVwZGF0ZSA/IGVudGVyLm1lcmdlKHVwZGF0ZSkub3JkZXIoKSA6IHVwZGF0ZTsKICB9CgogIGZ1bmN0aW9uIHNlbGVjdGlvbl9tZXJnZSAoY29udGV4dCkgewogICAgdmFyIHNlbGVjdGlvbiA9IGNvbnRleHQuc2VsZWN0aW9uID8gY29udGV4dC5zZWxlY3Rpb24oKSA6IGNvbnRleHQ7CiAgICBmb3IgKHZhciBncm91cHMwID0gdGhpcy5fZ3JvdXBzLCBncm91cHMxID0gc2VsZWN0aW9uLl9ncm91cHMsIG0wID0gZ3JvdXBzMC5sZW5ndGgsIG0xID0gZ3JvdXBzMS5sZW5ndGgsIG0gPSBNYXRoLm1pbihtMCwgbTEpLCBtZXJnZXMgPSBuZXcgQXJyYXkobTApLCBqID0gMDsgaiA8IG07ICsraikgewogICAgICBmb3IgKHZhciBncm91cDAgPSBncm91cHMwW2pdLCBncm91cDEgPSBncm91cHMxW2pdLCBuID0gZ3JvdXAwLmxlbmd0aCwgbWVyZ2UgPSBtZXJnZXNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7CiAgICAgICAgaWYgKG5vZGUgPSBncm91cDBbaV0gfHwgZ3JvdXAxW2ldKSB7CiAgICAgICAgICBtZXJnZVtpXSA9IG5vZGU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBmb3IgKDsgaiA8IG0wOyArK2opIHsKICAgICAgbWVyZ2VzW2pdID0gZ3JvdXBzMFtqXTsKICAgIH0KICAgIHJldHVybiBuZXcgU2VsZWN0aW9uJDEobWVyZ2VzLCB0aGlzLl9wYXJlbnRzKTsKICB9CgogIGZ1bmN0aW9uIHNlbGVjdGlvbl9vcmRlciAoKSB7CiAgICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIGogPSAtMSwgbSA9IGdyb3Vwcy5sZW5ndGg7ICsraiA8IG07KSB7CiAgICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBpID0gZ3JvdXAubGVuZ3RoIC0gMSwgbmV4dCA9IGdyb3VwW2ldLCBub2RlOyAtLWkgPj0gMDspIHsKICAgICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7CiAgICAgICAgICBpZiAobmV4dCAmJiBub2RlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKG5leHQpIF4gNCkgbmV4dC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBuZXh0KTsKICAgICAgICAgIG5leHQgPSBub2RlOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHRoaXM7CiAgfQoKICBmdW5jdGlvbiBzZWxlY3Rpb25fc29ydCAoY29tcGFyZSkgewogICAgaWYgKCFjb21wYXJlKSBjb21wYXJlID0gYXNjZW5kaW5nOwogICAgZnVuY3Rpb24gY29tcGFyZU5vZGUoYSwgYikgewogICAgICByZXR1cm4gYSAmJiBiID8gY29tcGFyZShhLl9fZGF0YV9fLCBiLl9fZGF0YV9fKSA6ICFhIC0gIWI7CiAgICB9CiAgICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBzb3J0Z3JvdXBzID0gbmV3IEFycmF5KG0pLCBqID0gMDsgaiA8IG07ICsraikgewogICAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgc29ydGdyb3VwID0gc29ydGdyb3Vwc1tqXSA9IG5ldyBBcnJheShuKSwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHsKICAgICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7CiAgICAgICAgICBzb3J0Z3JvdXBbaV0gPSBub2RlOwogICAgICAgIH0KICAgICAgfQogICAgICBzb3J0Z3JvdXAuc29ydChjb21wYXJlTm9kZSk7CiAgICB9CiAgICByZXR1cm4gbmV3IFNlbGVjdGlvbiQxKHNvcnRncm91cHMsIHRoaXMuX3BhcmVudHMpLm9yZGVyKCk7CiAgfQogIGZ1bmN0aW9uIGFzY2VuZGluZyhhLCBiKSB7CiAgICByZXR1cm4gYSA8IGIgPyAtMSA6IGEgPiBiID8gMSA6IGEgPj0gYiA/IDAgOiBOYU47CiAgfQoKICBmdW5jdGlvbiBzZWxlY3Rpb25fY2FsbCAoKSB7CiAgICB2YXIgY2FsbGJhY2sgPSBhcmd1bWVudHNbMF07CiAgICBhcmd1bWVudHNbMF0gPSB0aGlzOwogICAgY2FsbGJhY2suYXBwbHkobnVsbCwgYXJndW1lbnRzKTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgZnVuY3Rpb24gc2VsZWN0aW9uX25vZGVzICgpIHsKICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMpOwogIH0KCiAgZnVuY3Rpb24gc2VsZWN0aW9uX25vZGUgKCkgewogICAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBqID0gMCwgbSA9IGdyb3Vwcy5sZW5ndGg7IGogPCBtOyArK2opIHsKICAgICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIGkgPSAwLCBuID0gZ3JvdXAubGVuZ3RoOyBpIDwgbjsgKytpKSB7CiAgICAgICAgdmFyIG5vZGUgPSBncm91cFtpXTsKICAgICAgICBpZiAobm9kZSkgcmV0dXJuIG5vZGU7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBudWxsOwogIH0KCiAgZnVuY3Rpb24gc2VsZWN0aW9uX3NpemUgKCkgewogICAgbGV0IHNpemUgPSAwOwogICAgZm9yIChjb25zdCBub2RlIG9mIHRoaXMpICsrc2l6ZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycwogICAgcmV0dXJuIHNpemU7CiAgfQoKICBmdW5jdGlvbiBzZWxlY3Rpb25fZW1wdHkgKCkgewogICAgcmV0dXJuICF0aGlzLm5vZGUoKTsKICB9CgogIGZ1bmN0aW9uIHNlbGVjdGlvbl9lYWNoIChjYWxsYmFjaykgewogICAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBqID0gMCwgbSA9IGdyb3Vwcy5sZW5ndGg7IGogPCBtOyArK2opIHsKICAgICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIGkgPSAwLCBuID0gZ3JvdXAubGVuZ3RoLCBub2RlOyBpIDwgbjsgKytpKSB7CiAgICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkgY2FsbGJhY2suY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0aGlzOwogIH0KCiAgZnVuY3Rpb24gYXR0clJlbW92ZSQxKG5hbWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gYXR0clJlbW92ZU5TJDEoZnVsbG5hbWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsKTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIGF0dHJDb25zdGFudCQxKG5hbWUsIHZhbHVlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBhdHRyQ29uc3RhbnROUyQxKGZ1bGxuYW1lLCB2YWx1ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5zZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwsIHZhbHVlKTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIGF0dHJGdW5jdGlvbiQxKG5hbWUsIHZhbHVlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIGlmICh2ID09IG51bGwpIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpO2Vsc2UgdGhpcy5zZXRBdHRyaWJ1dGUobmFtZSwgdik7CiAgICB9OwogIH0KICBmdW5jdGlvbiBhdHRyRnVuY3Rpb25OUyQxKGZ1bGxuYW1lLCB2YWx1ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICBpZiAodiA9PSBudWxsKSB0aGlzLnJlbW92ZUF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCk7ZWxzZSB0aGlzLnNldEF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCwgdik7CiAgICB9OwogIH0KICBmdW5jdGlvbiBzZWxlY3Rpb25fYXR0ciAobmFtZSwgdmFsdWUpIHsKICAgIHZhciBmdWxsbmFtZSA9IG5hbWVzcGFjZShuYW1lKTsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikgewogICAgICB2YXIgbm9kZSA9IHRoaXMubm9kZSgpOwogICAgICByZXR1cm4gZnVsbG5hbWUubG9jYWwgPyBub2RlLmdldEF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCkgOiBub2RlLmdldEF0dHJpYnV0ZShmdWxsbmFtZSk7CiAgICB9CiAgICByZXR1cm4gdGhpcy5lYWNoKCh2YWx1ZSA9PSBudWxsID8gZnVsbG5hbWUubG9jYWwgPyBhdHRyUmVtb3ZlTlMkMSA6IGF0dHJSZW1vdmUkMSA6IHR5cGVvZiB2YWx1ZSA9PT0gImZ1bmN0aW9uIiA/IGZ1bGxuYW1lLmxvY2FsID8gYXR0ckZ1bmN0aW9uTlMkMSA6IGF0dHJGdW5jdGlvbiQxIDogZnVsbG5hbWUubG9jYWwgPyBhdHRyQ29uc3RhbnROUyQxIDogYXR0ckNvbnN0YW50JDEpKGZ1bGxuYW1lLCB2YWx1ZSkpOwogIH0KCiAgZnVuY3Rpb24gZGVmYXVsdFZpZXcgKG5vZGUpIHsKICAgIHJldHVybiBub2RlLm93bmVyRG9jdW1lbnQgJiYgbm9kZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3IC8vIG5vZGUgaXMgYSBOb2RlCiAgICB8fCBub2RlLmRvY3VtZW50ICYmIG5vZGUgLy8gbm9kZSBpcyBhIFdpbmRvdwogICAgfHwgbm9kZS5kZWZhdWx0VmlldzsgLy8gbm9kZSBpcyBhIERvY3VtZW50CiAgfQoKICBmdW5jdGlvbiBzdHlsZVJlbW92ZSQxKG5hbWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkobmFtZSk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBzdHlsZUNvbnN0YW50JDEobmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB0aGlzLnN0eWxlLnNldFByb3BlcnR5KG5hbWUsIHZhbHVlLCBwcmlvcml0eSk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBzdHlsZUZ1bmN0aW9uJDEobmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIGlmICh2ID09IG51bGwpIHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkobmFtZSk7ZWxzZSB0aGlzLnN0eWxlLnNldFByb3BlcnR5KG5hbWUsIHYsIHByaW9yaXR5KTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbl9zdHlsZSAobmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7CiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyB0aGlzLmVhY2goKHZhbHVlID09IG51bGwgPyBzdHlsZVJlbW92ZSQxIDogdHlwZW9mIHZhbHVlID09PSAiZnVuY3Rpb24iID8gc3R5bGVGdW5jdGlvbiQxIDogc3R5bGVDb25zdGFudCQxKShuYW1lLCB2YWx1ZSwgcHJpb3JpdHkgPT0gbnVsbCA/ICIiIDogcHJpb3JpdHkpKSA6IHN0eWxlVmFsdWUodGhpcy5ub2RlKCksIG5hbWUpOwogIH0KICBmdW5jdGlvbiBzdHlsZVZhbHVlKG5vZGUsIG5hbWUpIHsKICAgIHJldHVybiBub2RlLnN0eWxlLmdldFByb3BlcnR5VmFsdWUobmFtZSkgfHwgZGVmYXVsdFZpZXcobm9kZSkuZ2V0Q29tcHV0ZWRTdHlsZShub2RlLCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKG5hbWUpOwogIH0KCiAgZnVuY3Rpb24gcHJvcGVydHlSZW1vdmUobmFtZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgZGVsZXRlIHRoaXNbbmFtZV07CiAgICB9OwogIH0KICBmdW5jdGlvbiBwcm9wZXJ0eUNvbnN0YW50KG5hbWUsIHZhbHVlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB0aGlzW25hbWVdID0gdmFsdWU7CiAgICB9OwogIH0KICBmdW5jdGlvbiBwcm9wZXJ0eUZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIGlmICh2ID09IG51bGwpIGRlbGV0ZSB0aGlzW25hbWVdO2Vsc2UgdGhpc1tuYW1lXSA9IHY7CiAgICB9OwogIH0KICBmdW5jdGlvbiBzZWxlY3Rpb25fcHJvcGVydHkgKG5hbWUsIHZhbHVlKSB7CiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyB0aGlzLmVhY2goKHZhbHVlID09IG51bGwgPyBwcm9wZXJ0eVJlbW92ZSA6IHR5cGVvZiB2YWx1ZSA9PT0gImZ1bmN0aW9uIiA/IHByb3BlcnR5RnVuY3Rpb24gOiBwcm9wZXJ0eUNvbnN0YW50KShuYW1lLCB2YWx1ZSkpIDogdGhpcy5ub2RlKClbbmFtZV07CiAgfQoKICBmdW5jdGlvbiBjbGFzc0FycmF5KHN0cmluZykgewogICAgcmV0dXJuIHN0cmluZy50cmltKCkuc3BsaXQoL158XHMrLyk7CiAgfQogIGZ1bmN0aW9uIGNsYXNzTGlzdChub2RlKSB7CiAgICByZXR1cm4gbm9kZS5jbGFzc0xpc3QgfHwgbmV3IENsYXNzTGlzdChub2RlKTsKICB9CiAgZnVuY3Rpb24gQ2xhc3NMaXN0KG5vZGUpIHsKICAgIHRoaXMuX25vZGUgPSBub2RlOwogICAgdGhpcy5fbmFtZXMgPSBjbGFzc0FycmF5KG5vZGUuZ2V0QXR0cmlidXRlKCJjbGFzcyIpIHx8ICIiKTsKICB9CiAgQ2xhc3NMaXN0LnByb3RvdHlwZSA9IHsKICAgIGFkZDogZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgdmFyIGkgPSB0aGlzLl9uYW1lcy5pbmRleE9mKG5hbWUpOwogICAgICBpZiAoaSA8IDApIHsKICAgICAgICB0aGlzLl9uYW1lcy5wdXNoKG5hbWUpOwogICAgICAgIHRoaXMuX25vZGUuc2V0QXR0cmlidXRlKCJjbGFzcyIsIHRoaXMuX25hbWVzLmpvaW4oIiAiKSk7CiAgICAgIH0KICAgIH0sCiAgICByZW1vdmU6IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgIHZhciBpID0gdGhpcy5fbmFtZXMuaW5kZXhPZihuYW1lKTsKICAgICAgaWYgKGkgPj0gMCkgewogICAgICAgIHRoaXMuX25hbWVzLnNwbGljZShpLCAxKTsKICAgICAgICB0aGlzLl9ub2RlLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCB0aGlzLl9uYW1lcy5qb2luKCIgIikpOwogICAgICB9CiAgICB9LAogICAgY29udGFpbnM6IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgIHJldHVybiB0aGlzLl9uYW1lcy5pbmRleE9mKG5hbWUpID49IDA7CiAgICB9CiAgfTsKICBmdW5jdGlvbiBjbGFzc2VkQWRkKG5vZGUsIG5hbWVzKSB7CiAgICB2YXIgbGlzdCA9IGNsYXNzTGlzdChub2RlKSwKICAgICAgaSA9IC0xLAogICAgICBuID0gbmFtZXMubGVuZ3RoOwogICAgd2hpbGUgKCsraSA8IG4pIGxpc3QuYWRkKG5hbWVzW2ldKTsKICB9CiAgZnVuY3Rpb24gY2xhc3NlZFJlbW92ZShub2RlLCBuYW1lcykgewogICAgdmFyIGxpc3QgPSBjbGFzc0xpc3Qobm9kZSksCiAgICAgIGkgPSAtMSwKICAgICAgbiA9IG5hbWVzLmxlbmd0aDsKICAgIHdoaWxlICgrK2kgPCBuKSBsaXN0LnJlbW92ZShuYW1lc1tpXSk7CiAgfQogIGZ1bmN0aW9uIGNsYXNzZWRUcnVlKG5hbWVzKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICBjbGFzc2VkQWRkKHRoaXMsIG5hbWVzKTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIGNsYXNzZWRGYWxzZShuYW1lcykgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgY2xhc3NlZFJlbW92ZSh0aGlzLCBuYW1lcyk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBjbGFzc2VkRnVuY3Rpb24obmFtZXMsIHZhbHVlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAodmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKSA/IGNsYXNzZWRBZGQgOiBjbGFzc2VkUmVtb3ZlKSh0aGlzLCBuYW1lcyk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBzZWxlY3Rpb25fY2xhc3NlZCAobmFtZSwgdmFsdWUpIHsKICAgIHZhciBuYW1lcyA9IGNsYXNzQXJyYXkobmFtZSArICIiKTsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikgewogICAgICB2YXIgbGlzdCA9IGNsYXNzTGlzdCh0aGlzLm5vZGUoKSksCiAgICAgICAgaSA9IC0xLAogICAgICAgIG4gPSBuYW1lcy5sZW5ndGg7CiAgICAgIHdoaWxlICgrK2kgPCBuKSBpZiAoIWxpc3QuY29udGFpbnMobmFtZXNbaV0pKSByZXR1cm4gZmFsc2U7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgcmV0dXJuIHRoaXMuZWFjaCgodHlwZW9mIHZhbHVlID09PSAiZnVuY3Rpb24iID8gY2xhc3NlZEZ1bmN0aW9uIDogdmFsdWUgPyBjbGFzc2VkVHJ1ZSA6IGNsYXNzZWRGYWxzZSkobmFtZXMsIHZhbHVlKSk7CiAgfQoKICBmdW5jdGlvbiB0ZXh0UmVtb3ZlKCkgewogICAgdGhpcy50ZXh0Q29udGVudCA9ICIiOwogIH0KICBmdW5jdGlvbiB0ZXh0Q29uc3RhbnQkMSh2YWx1ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy50ZXh0Q29udGVudCA9IHZhbHVlOwogICAgfTsKICB9CiAgZnVuY3Rpb24gdGV4dEZ1bmN0aW9uJDEodmFsdWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB2ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgdGhpcy50ZXh0Q29udGVudCA9IHYgPT0gbnVsbCA/ICIiIDogdjsKICAgIH07CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbl90ZXh0ICh2YWx1ZSkgewogICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyB0aGlzLmVhY2godmFsdWUgPT0gbnVsbCA/IHRleHRSZW1vdmUgOiAodHlwZW9mIHZhbHVlID09PSAiZnVuY3Rpb24iID8gdGV4dEZ1bmN0aW9uJDEgOiB0ZXh0Q29uc3RhbnQkMSkodmFsdWUpKSA6IHRoaXMubm9kZSgpLnRleHRDb250ZW50OwogIH0KCiAgZnVuY3Rpb24gaHRtbFJlbW92ZSgpIHsKICAgIHRoaXMuaW5uZXJIVE1MID0gIiI7CiAgfQogIGZ1bmN0aW9uIGh0bWxDb25zdGFudCh2YWx1ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5pbm5lckhUTUwgPSB2YWx1ZTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIGh0bWxGdW5jdGlvbih2YWx1ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB0aGlzLmlubmVySFRNTCA9IHYgPT0gbnVsbCA/ICIiIDogdjsKICAgIH07CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbl9odG1sICh2YWx1ZSkgewogICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyB0aGlzLmVhY2godmFsdWUgPT0gbnVsbCA/IGh0bWxSZW1vdmUgOiAodHlwZW9mIHZhbHVlID09PSAiZnVuY3Rpb24iID8gaHRtbEZ1bmN0aW9uIDogaHRtbENvbnN0YW50KSh2YWx1ZSkpIDogdGhpcy5ub2RlKCkuaW5uZXJIVE1MOwogIH0KCiAgZnVuY3Rpb24gcmFpc2UoKSB7CiAgICBpZiAodGhpcy5uZXh0U2libGluZykgdGhpcy5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRoaXMpOwogIH0KICBmdW5jdGlvbiBzZWxlY3Rpb25fcmFpc2UgKCkgewogICAgcmV0dXJuIHRoaXMuZWFjaChyYWlzZSk7CiAgfQoKICBmdW5jdGlvbiBsb3dlcigpIHsKICAgIGlmICh0aGlzLnByZXZpb3VzU2libGluZykgdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLCB0aGlzLnBhcmVudE5vZGUuZmlyc3RDaGlsZCk7CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbl9sb3dlciAoKSB7CiAgICByZXR1cm4gdGhpcy5lYWNoKGxvd2VyKTsKICB9CgogIGZ1bmN0aW9uIHNlbGVjdGlvbl9hcHBlbmQgKG5hbWUpIHsKICAgIHZhciBjcmVhdGUgPSB0eXBlb2YgbmFtZSA9PT0gImZ1bmN0aW9uIiA/IG5hbWUgOiBjcmVhdG9yKG5hbWUpOwogICAgcmV0dXJuIHRoaXMuc2VsZWN0KGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHRoaXMuYXBwZW5kQ2hpbGQoY3JlYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpOwogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBjb25zdGFudE51bGwoKSB7CiAgICByZXR1cm4gbnVsbDsKICB9CiAgZnVuY3Rpb24gc2VsZWN0aW9uX2luc2VydCAobmFtZSwgYmVmb3JlKSB7CiAgICB2YXIgY3JlYXRlID0gdHlwZW9mIG5hbWUgPT09ICJmdW5jdGlvbiIgPyBuYW1lIDogY3JlYXRvcihuYW1lKSwKICAgICAgc2VsZWN0ID0gYmVmb3JlID09IG51bGwgPyBjb25zdGFudE51bGwgOiB0eXBlb2YgYmVmb3JlID09PSAiZnVuY3Rpb24iID8gYmVmb3JlIDogc2VsZWN0b3IoYmVmb3JlKTsKICAgIHJldHVybiB0aGlzLnNlbGVjdChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0aGlzLmluc2VydEJlZm9yZShjcmVhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgc2VsZWN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgbnVsbCk7CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIHJlbW92ZSgpIHsKICAgIHZhciBwYXJlbnQgPSB0aGlzLnBhcmVudE5vZGU7CiAgICBpZiAocGFyZW50KSBwYXJlbnQucmVtb3ZlQ2hpbGQodGhpcyk7CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbl9yZW1vdmUgKCkgewogICAgcmV0dXJuIHRoaXMuZWFjaChyZW1vdmUpOwogIH0KCiAgZnVuY3Rpb24gc2VsZWN0aW9uX2Nsb25lU2hhbGxvdygpIHsKICAgIHZhciBjbG9uZSA9IHRoaXMuY2xvbmVOb2RlKGZhbHNlKSwKICAgICAgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlOwogICAgcmV0dXJuIHBhcmVudCA/IHBhcmVudC5pbnNlcnRCZWZvcmUoY2xvbmUsIHRoaXMubmV4dFNpYmxpbmcpIDogY2xvbmU7CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbl9jbG9uZURlZXAoKSB7CiAgICB2YXIgY2xvbmUgPSB0aGlzLmNsb25lTm9kZSh0cnVlKSwKICAgICAgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlOwogICAgcmV0dXJuIHBhcmVudCA/IHBhcmVudC5pbnNlcnRCZWZvcmUoY2xvbmUsIHRoaXMubmV4dFNpYmxpbmcpIDogY2xvbmU7CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbl9jbG9uZSAoZGVlcCkgewogICAgcmV0dXJuIHRoaXMuc2VsZWN0KGRlZXAgPyBzZWxlY3Rpb25fY2xvbmVEZWVwIDogc2VsZWN0aW9uX2Nsb25lU2hhbGxvdyk7CiAgfQoKICBmdW5jdGlvbiBzZWxlY3Rpb25fZGF0dW0gKHZhbHVlKSB7CiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IHRoaXMucHJvcGVydHkoIl9fZGF0YV9fIiwgdmFsdWUpIDogdGhpcy5ub2RlKCkuX19kYXRhX187CiAgfQoKICBmdW5jdGlvbiBjb250ZXh0TGlzdGVuZXIobGlzdGVuZXIpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgbGlzdGVuZXIuY2FsbCh0aGlzLCBldmVudCwgdGhpcy5fX2RhdGFfXyk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBwYXJzZVR5cGVuYW1lcyh0eXBlbmFtZXMpIHsKICAgIHJldHVybiB0eXBlbmFtZXMudHJpbSgpLnNwbGl0KC9efFxzKy8pLm1hcChmdW5jdGlvbiAodCkgewogICAgICB2YXIgbmFtZSA9ICIiLAogICAgICAgIGkgPSB0LmluZGV4T2YoIi4iKTsKICAgICAgaWYgKGkgPj0gMCkgbmFtZSA9IHQuc2xpY2UoaSArIDEpLCB0ID0gdC5zbGljZSgwLCBpKTsKICAgICAgcmV0dXJuIHsKICAgICAgICB0eXBlOiB0LAogICAgICAgIG5hbWU6IG5hbWUKICAgICAgfTsKICAgIH0pOwogIH0KICBmdW5jdGlvbiBvblJlbW92ZSh0eXBlbmFtZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIG9uID0gdGhpcy5fX29uOwogICAgICBpZiAoIW9uKSByZXR1cm47CiAgICAgIGZvciAodmFyIGogPSAwLCBpID0gLTEsIG0gPSBvbi5sZW5ndGgsIG87IGogPCBtOyArK2opIHsKICAgICAgICBpZiAobyA9IG9uW2pdLCAoIXR5cGVuYW1lLnR5cGUgfHwgby50eXBlID09PSB0eXBlbmFtZS50eXBlKSAmJiBvLm5hbWUgPT09IHR5cGVuYW1lLm5hbWUpIHsKICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihvLnR5cGUsIG8ubGlzdGVuZXIsIG8ub3B0aW9ucyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG9uWysraV0gPSBvOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoKytpKSBvbi5sZW5ndGggPSBpO2Vsc2UgZGVsZXRlIHRoaXMuX19vbjsKICAgIH07CiAgfQogIGZ1bmN0aW9uIG9uQWRkKHR5cGVuYW1lLCB2YWx1ZSwgb3B0aW9ucykgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIG9uID0gdGhpcy5fX29uLAogICAgICAgIG8sCiAgICAgICAgbGlzdGVuZXIgPSBjb250ZXh0TGlzdGVuZXIodmFsdWUpOwogICAgICBpZiAob24pIGZvciAodmFyIGogPSAwLCBtID0gb24ubGVuZ3RoOyBqIDwgbTsgKytqKSB7CiAgICAgICAgaWYgKChvID0gb25bal0pLnR5cGUgPT09IHR5cGVuYW1lLnR5cGUgJiYgby5uYW1lID09PSB0eXBlbmFtZS5uYW1lKSB7CiAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoby50eXBlLCBvLmxpc3RlbmVyLCBvLm9wdGlvbnMpOwogICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKG8udHlwZSwgby5saXN0ZW5lciA9IGxpc3RlbmVyLCBvLm9wdGlvbnMgPSBvcHRpb25zKTsKICAgICAgICAgIG8udmFsdWUgPSB2YWx1ZTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKHR5cGVuYW1lLnR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKTsKICAgICAgbyA9IHsKICAgICAgICB0eXBlOiB0eXBlbmFtZS50eXBlLAogICAgICAgIG5hbWU6IHR5cGVuYW1lLm5hbWUsCiAgICAgICAgdmFsdWU6IHZhbHVlLAogICAgICAgIGxpc3RlbmVyOiBsaXN0ZW5lciwKICAgICAgICBvcHRpb25zOiBvcHRpb25zCiAgICAgIH07CiAgICAgIGlmICghb24pIHRoaXMuX19vbiA9IFtvXTtlbHNlIG9uLnB1c2gobyk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBzZWxlY3Rpb25fb24gKHR5cGVuYW1lLCB2YWx1ZSwgb3B0aW9ucykgewogICAgdmFyIHR5cGVuYW1lcyA9IHBhcnNlVHlwZW5hbWVzKHR5cGVuYW1lICsgIiIpLAogICAgICBpLAogICAgICBuID0gdHlwZW5hbWVzLmxlbmd0aCwKICAgICAgdDsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikgewogICAgICB2YXIgb24gPSB0aGlzLm5vZGUoKS5fX29uOwogICAgICBpZiAob24pIGZvciAodmFyIGogPSAwLCBtID0gb24ubGVuZ3RoLCBvOyBqIDwgbTsgKytqKSB7CiAgICAgICAgZm9yIChpID0gMCwgbyA9IG9uW2pdOyBpIDwgbjsgKytpKSB7CiAgICAgICAgICBpZiAoKHQgPSB0eXBlbmFtZXNbaV0pLnR5cGUgPT09IG8udHlwZSAmJiB0Lm5hbWUgPT09IG8ubmFtZSkgewogICAgICAgICAgICByZXR1cm4gby52YWx1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuOwogICAgfQogICAgb24gPSB2YWx1ZSA/IG9uQWRkIDogb25SZW1vdmU7CiAgICBmb3IgKGkgPSAwOyBpIDwgbjsgKytpKSB0aGlzLmVhY2gob24odHlwZW5hbWVzW2ldLCB2YWx1ZSwgb3B0aW9ucykpOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICBmdW5jdGlvbiBkaXNwYXRjaEV2ZW50KG5vZGUsIHR5cGUsIHBhcmFtcykgewogICAgdmFyIHdpbmRvdyA9IGRlZmF1bHRWaWV3KG5vZGUpLAogICAgICBldmVudCA9IHdpbmRvdy5DdXN0b21FdmVudDsKICAgIGlmICh0eXBlb2YgZXZlbnQgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgZXZlbnQgPSBuZXcgZXZlbnQodHlwZSwgcGFyYW1zKTsKICAgIH0gZWxzZSB7CiAgICAgIGV2ZW50ID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpOwogICAgICBpZiAocGFyYW1zKSBldmVudC5pbml0RXZlbnQodHlwZSwgcGFyYW1zLmJ1YmJsZXMsIHBhcmFtcy5jYW5jZWxhYmxlKSwgZXZlbnQuZGV0YWlsID0gcGFyYW1zLmRldGFpbDtlbHNlIGV2ZW50LmluaXRFdmVudCh0eXBlLCBmYWxzZSwgZmFsc2UpOwogICAgfQogICAgbm9kZS5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKICB9CiAgZnVuY3Rpb24gZGlzcGF0Y2hDb25zdGFudCh0eXBlLCBwYXJhbXMpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBkaXNwYXRjaEV2ZW50KHRoaXMsIHR5cGUsIHBhcmFtcyk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBkaXNwYXRjaEZ1bmN0aW9uKHR5cGUsIHBhcmFtcykgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGRpc3BhdGNoRXZlbnQodGhpcywgdHlwZSwgcGFyYW1zLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gc2VsZWN0aW9uX2Rpc3BhdGNoICh0eXBlLCBwYXJhbXMpIHsKICAgIHJldHVybiB0aGlzLmVhY2goKHR5cGVvZiBwYXJhbXMgPT09ICJmdW5jdGlvbiIgPyBkaXNwYXRjaEZ1bmN0aW9uIDogZGlzcGF0Y2hDb25zdGFudCkodHlwZSwgcGFyYW1zKSk7CiAgfQoKICBmdW5jdGlvbiogc2VsZWN0aW9uX2l0ZXJhdG9yICgpIHsKICAgIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgaiA9IDAsIG0gPSBncm91cHMubGVuZ3RoOyBqIDwgbTsgKytqKSB7CiAgICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBpID0gMCwgbiA9IGdyb3VwLmxlbmd0aCwgbm9kZTsgaSA8IG47ICsraSkgewogICAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHlpZWxkIG5vZGU7CiAgICAgIH0KICAgIH0KICB9CgogIHZhciByb290ID0gW251bGxdOwogIGZ1bmN0aW9uIFNlbGVjdGlvbiQxKGdyb3VwcywgcGFyZW50cykgewogICAgdGhpcy5fZ3JvdXBzID0gZ3JvdXBzOwogICAgdGhpcy5fcGFyZW50cyA9IHBhcmVudHM7CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbigpIHsKICAgIHJldHVybiBuZXcgU2VsZWN0aW9uJDEoW1tkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRdXSwgcm9vdCk7CiAgfQogIGZ1bmN0aW9uIHNlbGVjdGlvbl9zZWxlY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpczsKICB9CiAgU2VsZWN0aW9uJDEucHJvdG90eXBlID0gc2VsZWN0aW9uLnByb3RvdHlwZSA9IHsKICAgIGNvbnN0cnVjdG9yOiBTZWxlY3Rpb24kMSwKICAgIHNlbGVjdDogc2VsZWN0aW9uX3NlbGVjdCwKICAgIHNlbGVjdEFsbDogc2VsZWN0aW9uX3NlbGVjdEFsbCwKICAgIHNlbGVjdENoaWxkOiBzZWxlY3Rpb25fc2VsZWN0Q2hpbGQsCiAgICBzZWxlY3RDaGlsZHJlbjogc2VsZWN0aW9uX3NlbGVjdENoaWxkcmVuLAogICAgZmlsdGVyOiBzZWxlY3Rpb25fZmlsdGVyLAogICAgZGF0YTogc2VsZWN0aW9uX2RhdGEsCiAgICBlbnRlcjogc2VsZWN0aW9uX2VudGVyLAogICAgZXhpdDogc2VsZWN0aW9uX2V4aXQsCiAgICBqb2luOiBzZWxlY3Rpb25fam9pbiwKICAgIG1lcmdlOiBzZWxlY3Rpb25fbWVyZ2UsCiAgICBzZWxlY3Rpb246IHNlbGVjdGlvbl9zZWxlY3Rpb24sCiAgICBvcmRlcjogc2VsZWN0aW9uX29yZGVyLAogICAgc29ydDogc2VsZWN0aW9uX3NvcnQsCiAgICBjYWxsOiBzZWxlY3Rpb25fY2FsbCwKICAgIG5vZGVzOiBzZWxlY3Rpb25fbm9kZXMsCiAgICBub2RlOiBzZWxlY3Rpb25fbm9kZSwKICAgIHNpemU6IHNlbGVjdGlvbl9zaXplLAogICAgZW1wdHk6IHNlbGVjdGlvbl9lbXB0eSwKICAgIGVhY2g6IHNlbGVjdGlvbl9lYWNoLAogICAgYXR0cjogc2VsZWN0aW9uX2F0dHIsCiAgICBzdHlsZTogc2VsZWN0aW9uX3N0eWxlLAogICAgcHJvcGVydHk6IHNlbGVjdGlvbl9wcm9wZXJ0eSwKICAgIGNsYXNzZWQ6IHNlbGVjdGlvbl9jbGFzc2VkLAogICAgdGV4dDogc2VsZWN0aW9uX3RleHQsCiAgICBodG1sOiBzZWxlY3Rpb25faHRtbCwKICAgIHJhaXNlOiBzZWxlY3Rpb25fcmFpc2UsCiAgICBsb3dlcjogc2VsZWN0aW9uX2xvd2VyLAogICAgYXBwZW5kOiBzZWxlY3Rpb25fYXBwZW5kLAogICAgaW5zZXJ0OiBzZWxlY3Rpb25faW5zZXJ0LAogICAgcmVtb3ZlOiBzZWxlY3Rpb25fcmVtb3ZlLAogICAgY2xvbmU6IHNlbGVjdGlvbl9jbG9uZSwKICAgIGRhdHVtOiBzZWxlY3Rpb25fZGF0dW0sCiAgICBvbjogc2VsZWN0aW9uX29uLAogICAgZGlzcGF0Y2g6IHNlbGVjdGlvbl9kaXNwYXRjaCwKICAgIFtTeW1ib2wuaXRlcmF0b3JdOiBzZWxlY3Rpb25faXRlcmF0b3IKICB9OwoKICBmdW5jdGlvbiBkZWZpbmUgKGNvbnN0cnVjdG9yLCBmYWN0b3J5LCBwcm90b3R5cGUpIHsKICAgIGNvbnN0cnVjdG9yLnByb3RvdHlwZSA9IGZhY3RvcnkucHJvdG90eXBlID0gcHJvdG90eXBlOwogICAgcHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY29uc3RydWN0b3I7CiAgfQogIGZ1bmN0aW9uIGV4dGVuZChwYXJlbnQsIGRlZmluaXRpb24pIHsKICAgIHZhciBwcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHBhcmVudC5wcm90b3R5cGUpOwogICAgZm9yICh2YXIga2V5IGluIGRlZmluaXRpb24pIHByb3RvdHlwZVtrZXldID0gZGVmaW5pdGlvbltrZXldOwogICAgcmV0dXJuIHByb3RvdHlwZTsKICB9CgogIGZ1bmN0aW9uIENvbG9yKCkge30KICB2YXIgZGFya2VyID0gMC43OwogIHZhciBicmlnaHRlciA9IDEgLyBkYXJrZXI7CiAgdmFyIHJlSSA9ICJcXHMqKFsrLV0/XFxkKylcXHMqIiwKICAgIHJlTiA9ICJcXHMqKFsrLV0/KD86XFxkKlxcLik/XFxkKyg/OltlRV1bKy1dP1xcZCspPylcXHMqIiwKICAgIHJlUCA9ICJcXHMqKFsrLV0/KD86XFxkKlxcLik/XFxkKyg/OltlRV1bKy1dP1xcZCspPyklXFxzKiIsCiAgICByZUhleCA9IC9eIyhbMC05YS1mXXszLDh9KSQvLAogICAgcmVSZ2JJbnRlZ2VyID0gbmV3IFJlZ0V4cChgXnJnYlxcKCR7cmVJfSwke3JlSX0sJHtyZUl9XFwpJGApLAogICAgcmVSZ2JQZXJjZW50ID0gbmV3IFJlZ0V4cChgXnJnYlxcKCR7cmVQfSwke3JlUH0sJHtyZVB9XFwpJGApLAogICAgcmVSZ2JhSW50ZWdlciA9IG5ldyBSZWdFeHAoYF5yZ2JhXFwoJHtyZUl9LCR7cmVJfSwke3JlSX0sJHtyZU59XFwpJGApLAogICAgcmVSZ2JhUGVyY2VudCA9IG5ldyBSZWdFeHAoYF5yZ2JhXFwoJHtyZVB9LCR7cmVQfSwke3JlUH0sJHtyZU59XFwpJGApLAogICAgcmVIc2xQZXJjZW50ID0gbmV3IFJlZ0V4cChgXmhzbFxcKCR7cmVOfSwke3JlUH0sJHtyZVB9XFwpJGApLAogICAgcmVIc2xhUGVyY2VudCA9IG5ldyBSZWdFeHAoYF5oc2xhXFwoJHtyZU59LCR7cmVQfSwke3JlUH0sJHtyZU59XFwpJGApOwogIHZhciBuYW1lZCA9IHsKICAgIGFsaWNlYmx1ZTogMHhmMGY4ZmYsCiAgICBhbnRpcXVld2hpdGU6IDB4ZmFlYmQ3LAogICAgYXF1YTogMHgwMGZmZmYsCiAgICBhcXVhbWFyaW5lOiAweDdmZmZkNCwKICAgIGF6dXJlOiAweGYwZmZmZiwKICAgIGJlaWdlOiAweGY1ZjVkYywKICAgIGJpc3F1ZTogMHhmZmU0YzQsCiAgICBibGFjazogMHgwMDAwMDAsCiAgICBibGFuY2hlZGFsbW9uZDogMHhmZmViY2QsCiAgICBibHVlOiAweDAwMDBmZiwKICAgIGJsdWV2aW9sZXQ6IDB4OGEyYmUyLAogICAgYnJvd246IDB4YTUyYTJhLAogICAgYnVybHl3b29kOiAweGRlYjg4NywKICAgIGNhZGV0Ymx1ZTogMHg1ZjllYTAsCiAgICBjaGFydHJldXNlOiAweDdmZmYwMCwKICAgIGNob2NvbGF0ZTogMHhkMjY5MWUsCiAgICBjb3JhbDogMHhmZjdmNTAsCiAgICBjb3JuZmxvd2VyYmx1ZTogMHg2NDk1ZWQsCiAgICBjb3Juc2lsazogMHhmZmY4ZGMsCiAgICBjcmltc29uOiAweGRjMTQzYywKICAgIGN5YW46IDB4MDBmZmZmLAogICAgZGFya2JsdWU6IDB4MDAwMDhiLAogICAgZGFya2N5YW46IDB4MDA4YjhiLAogICAgZGFya2dvbGRlbnJvZDogMHhiODg2MGIsCiAgICBkYXJrZ3JheTogMHhhOWE5YTksCiAgICBkYXJrZ3JlZW46IDB4MDA2NDAwLAogICAgZGFya2dyZXk6IDB4YTlhOWE5LAogICAgZGFya2toYWtpOiAweGJkYjc2YiwKICAgIGRhcmttYWdlbnRhOiAweDhiMDA4YiwKICAgIGRhcmtvbGl2ZWdyZWVuOiAweDU1NmIyZiwKICAgIGRhcmtvcmFuZ2U6IDB4ZmY4YzAwLAogICAgZGFya29yY2hpZDogMHg5OTMyY2MsCiAgICBkYXJrcmVkOiAweDhiMDAwMCwKICAgIGRhcmtzYWxtb246IDB4ZTk5NjdhLAogICAgZGFya3NlYWdyZWVuOiAweDhmYmM4ZiwKICAgIGRhcmtzbGF0ZWJsdWU6IDB4NDgzZDhiLAogICAgZGFya3NsYXRlZ3JheTogMHgyZjRmNGYsCiAgICBkYXJrc2xhdGVncmV5OiAweDJmNGY0ZiwKICAgIGRhcmt0dXJxdW9pc2U6IDB4MDBjZWQxLAogICAgZGFya3Zpb2xldDogMHg5NDAwZDMsCiAgICBkZWVwcGluazogMHhmZjE0OTMsCiAgICBkZWVwc2t5Ymx1ZTogMHgwMGJmZmYsCiAgICBkaW1ncmF5OiAweDY5Njk2OSwKICAgIGRpbWdyZXk6IDB4Njk2OTY5LAogICAgZG9kZ2VyYmx1ZTogMHgxZTkwZmYsCiAgICBmaXJlYnJpY2s6IDB4YjIyMjIyLAogICAgZmxvcmFsd2hpdGU6IDB4ZmZmYWYwLAogICAgZm9yZXN0Z3JlZW46IDB4MjI4YjIyLAogICAgZnVjaHNpYTogMHhmZjAwZmYsCiAgICBnYWluc2Jvcm86IDB4ZGNkY2RjLAogICAgZ2hvc3R3aGl0ZTogMHhmOGY4ZmYsCiAgICBnb2xkOiAweGZmZDcwMCwKICAgIGdvbGRlbnJvZDogMHhkYWE1MjAsCiAgICBncmF5OiAweDgwODA4MCwKICAgIGdyZWVuOiAweDAwODAwMCwKICAgIGdyZWVueWVsbG93OiAweGFkZmYyZiwKICAgIGdyZXk6IDB4ODA4MDgwLAogICAgaG9uZXlkZXc6IDB4ZjBmZmYwLAogICAgaG90cGluazogMHhmZjY5YjQsCiAgICBpbmRpYW5yZWQ6IDB4Y2Q1YzVjLAogICAgaW5kaWdvOiAweDRiMDA4MiwKICAgIGl2b3J5OiAweGZmZmZmMCwKICAgIGtoYWtpOiAweGYwZTY4YywKICAgIGxhdmVuZGVyOiAweGU2ZTZmYSwKICAgIGxhdmVuZGVyYmx1c2g6IDB4ZmZmMGY1LAogICAgbGF3bmdyZWVuOiAweDdjZmMwMCwKICAgIGxlbW9uY2hpZmZvbjogMHhmZmZhY2QsCiAgICBsaWdodGJsdWU6IDB4YWRkOGU2LAogICAgbGlnaHRjb3JhbDogMHhmMDgwODAsCiAgICBsaWdodGN5YW46IDB4ZTBmZmZmLAogICAgbGlnaHRnb2xkZW5yb2R5ZWxsb3c6IDB4ZmFmYWQyLAogICAgbGlnaHRncmF5OiAweGQzZDNkMywKICAgIGxpZ2h0Z3JlZW46IDB4OTBlZTkwLAogICAgbGlnaHRncmV5OiAweGQzZDNkMywKICAgIGxpZ2h0cGluazogMHhmZmI2YzEsCiAgICBsaWdodHNhbG1vbjogMHhmZmEwN2EsCiAgICBsaWdodHNlYWdyZWVuOiAweDIwYjJhYSwKICAgIGxpZ2h0c2t5Ymx1ZTogMHg4N2NlZmEsCiAgICBsaWdodHNsYXRlZ3JheTogMHg3Nzg4OTksCiAgICBsaWdodHNsYXRlZ3JleTogMHg3Nzg4OTksCiAgICBsaWdodHN0ZWVsYmx1ZTogMHhiMGM0ZGUsCiAgICBsaWdodHllbGxvdzogMHhmZmZmZTAsCiAgICBsaW1lOiAweDAwZmYwMCwKICAgIGxpbWVncmVlbjogMHgzMmNkMzIsCiAgICBsaW5lbjogMHhmYWYwZTYsCiAgICBtYWdlbnRhOiAweGZmMDBmZiwKICAgIG1hcm9vbjogMHg4MDAwMDAsCiAgICBtZWRpdW1hcXVhbWFyaW5lOiAweDY2Y2RhYSwKICAgIG1lZGl1bWJsdWU6IDB4MDAwMGNkLAogICAgbWVkaXVtb3JjaGlkOiAweGJhNTVkMywKICAgIG1lZGl1bXB1cnBsZTogMHg5MzcwZGIsCiAgICBtZWRpdW1zZWFncmVlbjogMHgzY2IzNzEsCiAgICBtZWRpdW1zbGF0ZWJsdWU6IDB4N2I2OGVlLAogICAgbWVkaXVtc3ByaW5nZ3JlZW46IDB4MDBmYTlhLAogICAgbWVkaXVtdHVycXVvaXNlOiAweDQ4ZDFjYywKICAgIG1lZGl1bXZpb2xldHJlZDogMHhjNzE1ODUsCiAgICBtaWRuaWdodGJsdWU6IDB4MTkxOTcwLAogICAgbWludGNyZWFtOiAweGY1ZmZmYSwKICAgIG1pc3R5cm9zZTogMHhmZmU0ZTEsCiAgICBtb2NjYXNpbjogMHhmZmU0YjUsCiAgICBuYXZham93aGl0ZTogMHhmZmRlYWQsCiAgICBuYXZ5OiAweDAwMDA4MCwKICAgIG9sZGxhY2U6IDB4ZmRmNWU2LAogICAgb2xpdmU6IDB4ODA4MDAwLAogICAgb2xpdmVkcmFiOiAweDZiOGUyMywKICAgIG9yYW5nZTogMHhmZmE1MDAsCiAgICBvcmFuZ2VyZWQ6IDB4ZmY0NTAwLAogICAgb3JjaGlkOiAweGRhNzBkNiwKICAgIHBhbGVnb2xkZW5yb2Q6IDB4ZWVlOGFhLAogICAgcGFsZWdyZWVuOiAweDk4ZmI5OCwKICAgIHBhbGV0dXJxdW9pc2U6IDB4YWZlZWVlLAogICAgcGFsZXZpb2xldHJlZDogMHhkYjcwOTMsCiAgICBwYXBheWF3aGlwOiAweGZmZWZkNSwKICAgIHBlYWNocHVmZjogMHhmZmRhYjksCiAgICBwZXJ1OiAweGNkODUzZiwKICAgIHBpbms6IDB4ZmZjMGNiLAogICAgcGx1bTogMHhkZGEwZGQsCiAgICBwb3dkZXJibHVlOiAweGIwZTBlNiwKICAgIHB1cnBsZTogMHg4MDAwODAsCiAgICByZWJlY2NhcHVycGxlOiAweDY2MzM5OSwKICAgIHJlZDogMHhmZjAwMDAsCiAgICByb3N5YnJvd246IDB4YmM4ZjhmLAogICAgcm95YWxibHVlOiAweDQxNjllMSwKICAgIHNhZGRsZWJyb3duOiAweDhiNDUxMywKICAgIHNhbG1vbjogMHhmYTgwNzIsCiAgICBzYW5keWJyb3duOiAweGY0YTQ2MCwKICAgIHNlYWdyZWVuOiAweDJlOGI1NywKICAgIHNlYXNoZWxsOiAweGZmZjVlZSwKICAgIHNpZW5uYTogMHhhMDUyMmQsCiAgICBzaWx2ZXI6IDB4YzBjMGMwLAogICAgc2t5Ymx1ZTogMHg4N2NlZWIsCiAgICBzbGF0ZWJsdWU6IDB4NmE1YWNkLAogICAgc2xhdGVncmF5OiAweDcwODA5MCwKICAgIHNsYXRlZ3JleTogMHg3MDgwOTAsCiAgICBzbm93OiAweGZmZmFmYSwKICAgIHNwcmluZ2dyZWVuOiAweDAwZmY3ZiwKICAgIHN0ZWVsYmx1ZTogMHg0NjgyYjQsCiAgICB0YW46IDB4ZDJiNDhjLAogICAgdGVhbDogMHgwMDgwODAsCiAgICB0aGlzdGxlOiAweGQ4YmZkOCwKICAgIHRvbWF0bzogMHhmZjYzNDcsCiAgICB0dXJxdW9pc2U6IDB4NDBlMGQwLAogICAgdmlvbGV0OiAweGVlODJlZSwKICAgIHdoZWF0OiAweGY1ZGViMywKICAgIHdoaXRlOiAweGZmZmZmZiwKICAgIHdoaXRlc21va2U6IDB4ZjVmNWY1LAogICAgeWVsbG93OiAweGZmZmYwMCwKICAgIHllbGxvd2dyZWVuOiAweDlhY2QzMgogIH07CiAgZGVmaW5lKENvbG9yLCBjb2xvciwgewogICAgY29weShjaGFubmVscykgewogICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihuZXcgdGhpcy5jb25zdHJ1Y3RvcigpLCB0aGlzLCBjaGFubmVscyk7CiAgICB9LAogICAgZGlzcGxheWFibGUoKSB7CiAgICAgIHJldHVybiB0aGlzLnJnYigpLmRpc3BsYXlhYmxlKCk7CiAgICB9LAogICAgaGV4OiBjb2xvcl9mb3JtYXRIZXgsCiAgICAvLyBEZXByZWNhdGVkISBVc2UgY29sb3IuZm9ybWF0SGV4LgogICAgZm9ybWF0SGV4OiBjb2xvcl9mb3JtYXRIZXgsCiAgICBmb3JtYXRIZXg4OiBjb2xvcl9mb3JtYXRIZXg4LAogICAgZm9ybWF0SHNsOiBjb2xvcl9mb3JtYXRIc2wsCiAgICBmb3JtYXRSZ2I6IGNvbG9yX2Zvcm1hdFJnYiwKICAgIHRvU3RyaW5nOiBjb2xvcl9mb3JtYXRSZ2IKICB9KTsKICBmdW5jdGlvbiBjb2xvcl9mb3JtYXRIZXgoKSB7CiAgICByZXR1cm4gdGhpcy5yZ2IoKS5mb3JtYXRIZXgoKTsKICB9CiAgZnVuY3Rpb24gY29sb3JfZm9ybWF0SGV4OCgpIHsKICAgIHJldHVybiB0aGlzLnJnYigpLmZvcm1hdEhleDgoKTsKICB9CiAgZnVuY3Rpb24gY29sb3JfZm9ybWF0SHNsKCkgewogICAgcmV0dXJuIGhzbENvbnZlcnQodGhpcykuZm9ybWF0SHNsKCk7CiAgfQogIGZ1bmN0aW9uIGNvbG9yX2Zvcm1hdFJnYigpIHsKICAgIHJldHVybiB0aGlzLnJnYigpLmZvcm1hdFJnYigpOwogIH0KICBmdW5jdGlvbiBjb2xvcihmb3JtYXQpIHsKICAgIHZhciBtLCBsOwogICAgZm9ybWF0ID0gKGZvcm1hdCArICIiKS50cmltKCkudG9Mb3dlckNhc2UoKTsKICAgIHJldHVybiAobSA9IHJlSGV4LmV4ZWMoZm9ybWF0KSkgPyAobCA9IG1bMV0ubGVuZ3RoLCBtID0gcGFyc2VJbnQobVsxXSwgMTYpLCBsID09PSA2ID8gcmdibihtKSAvLyAjZmYwMDAwCiAgICA6IGwgPT09IDMgPyBuZXcgUmdiKG0gPj4gOCAmIDB4ZiB8IG0gPj4gNCAmIDB4ZjAsIG0gPj4gNCAmIDB4ZiB8IG0gJiAweGYwLCAobSAmIDB4ZikgPDwgNCB8IG0gJiAweGYsIDEpIC8vICNmMDAKICAgIDogbCA9PT0gOCA/IHJnYmEobSA+PiAyNCAmIDB4ZmYsIG0gPj4gMTYgJiAweGZmLCBtID4+IDggJiAweGZmLCAobSAmIDB4ZmYpIC8gMHhmZikgLy8gI2ZmMDAwMDAwCiAgICA6IGwgPT09IDQgPyByZ2JhKG0gPj4gMTIgJiAweGYgfCBtID4+IDggJiAweGYwLCBtID4+IDggJiAweGYgfCBtID4+IDQgJiAweGYwLCBtID4+IDQgJiAweGYgfCBtICYgMHhmMCwgKChtICYgMHhmKSA8PCA0IHwgbSAmIDB4ZikgLyAweGZmKSAvLyAjZjAwMAogICAgOiBudWxsIC8vIGludmFsaWQgaGV4CiAgICApIDogKG0gPSByZVJnYkludGVnZXIuZXhlYyhmb3JtYXQpKSA/IG5ldyBSZ2IobVsxXSwgbVsyXSwgbVszXSwgMSkgLy8gcmdiKDI1NSwgMCwgMCkKICAgIDogKG0gPSByZVJnYlBlcmNlbnQuZXhlYyhmb3JtYXQpKSA/IG5ldyBSZ2IobVsxXSAqIDI1NSAvIDEwMCwgbVsyXSAqIDI1NSAvIDEwMCwgbVszXSAqIDI1NSAvIDEwMCwgMSkgLy8gcmdiKDEwMCUsIDAlLCAwJSkKICAgIDogKG0gPSByZVJnYmFJbnRlZ2VyLmV4ZWMoZm9ybWF0KSkgPyByZ2JhKG1bMV0sIG1bMl0sIG1bM10sIG1bNF0pIC8vIHJnYmEoMjU1LCAwLCAwLCAxKQogICAgOiAobSA9IHJlUmdiYVBlcmNlbnQuZXhlYyhmb3JtYXQpKSA/IHJnYmEobVsxXSAqIDI1NSAvIDEwMCwgbVsyXSAqIDI1NSAvIDEwMCwgbVszXSAqIDI1NSAvIDEwMCwgbVs0XSkgLy8gcmdiKDEwMCUsIDAlLCAwJSwgMSkKICAgIDogKG0gPSByZUhzbFBlcmNlbnQuZXhlYyhmb3JtYXQpKSA/IGhzbGEobVsxXSwgbVsyXSAvIDEwMCwgbVszXSAvIDEwMCwgMSkgLy8gaHNsKDEyMCwgNTAlLCA1MCUpCiAgICA6IChtID0gcmVIc2xhUGVyY2VudC5leGVjKGZvcm1hdCkpID8gaHNsYShtWzFdLCBtWzJdIC8gMTAwLCBtWzNdIC8gMTAwLCBtWzRdKSAvLyBoc2xhKDEyMCwgNTAlLCA1MCUsIDEpCiAgICA6IG5hbWVkLmhhc093blByb3BlcnR5KGZvcm1hdCkgPyByZ2JuKG5hbWVkW2Zvcm1hdF0pIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zCiAgICA6IGZvcm1hdCA9PT0gInRyYW5zcGFyZW50IiA/IG5ldyBSZ2IoTmFOLCBOYU4sIE5hTiwgMCkgOiBudWxsOwogIH0KICBmdW5jdGlvbiByZ2JuKG4pIHsKICAgIHJldHVybiBuZXcgUmdiKG4gPj4gMTYgJiAweGZmLCBuID4+IDggJiAweGZmLCBuICYgMHhmZiwgMSk7CiAgfQogIGZ1bmN0aW9uIHJnYmEociwgZywgYiwgYSkgewogICAgaWYgKGEgPD0gMCkgciA9IGcgPSBiID0gTmFOOwogICAgcmV0dXJuIG5ldyBSZ2IociwgZywgYiwgYSk7CiAgfQogIGZ1bmN0aW9uIHJnYkNvbnZlcnQobykgewogICAgaWYgKCEobyBpbnN0YW5jZW9mIENvbG9yKSkgbyA9IGNvbG9yKG8pOwogICAgaWYgKCFvKSByZXR1cm4gbmV3IFJnYigpOwogICAgbyA9IG8ucmdiKCk7CiAgICByZXR1cm4gbmV3IFJnYihvLnIsIG8uZywgby5iLCBvLm9wYWNpdHkpOwogIH0KICBmdW5jdGlvbiByZ2IociwgZywgYiwgb3BhY2l0eSkgewogICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyByZ2JDb252ZXJ0KHIpIDogbmV3IFJnYihyLCBnLCBiLCBvcGFjaXR5ID09IG51bGwgPyAxIDogb3BhY2l0eSk7CiAgfQogIGZ1bmN0aW9uIFJnYihyLCBnLCBiLCBvcGFjaXR5KSB7CiAgICB0aGlzLnIgPSArcjsKICAgIHRoaXMuZyA9ICtnOwogICAgdGhpcy5iID0gK2I7CiAgICB0aGlzLm9wYWNpdHkgPSArb3BhY2l0eTsKICB9CiAgZGVmaW5lKFJnYiwgcmdiLCBleHRlbmQoQ29sb3IsIHsKICAgIGJyaWdodGVyKGspIHsKICAgICAgayA9IGsgPT0gbnVsbCA/IGJyaWdodGVyIDogTWF0aC5wb3coYnJpZ2h0ZXIsIGspOwogICAgICByZXR1cm4gbmV3IFJnYih0aGlzLnIgKiBrLCB0aGlzLmcgKiBrLCB0aGlzLmIgKiBrLCB0aGlzLm9wYWNpdHkpOwogICAgfSwKICAgIGRhcmtlcihrKSB7CiAgICAgIGsgPSBrID09IG51bGwgPyBkYXJrZXIgOiBNYXRoLnBvdyhkYXJrZXIsIGspOwogICAgICByZXR1cm4gbmV3IFJnYih0aGlzLnIgKiBrLCB0aGlzLmcgKiBrLCB0aGlzLmIgKiBrLCB0aGlzLm9wYWNpdHkpOwogICAgfSwKICAgIHJnYigpIHsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9LAogICAgY2xhbXAoKSB7CiAgICAgIHJldHVybiBuZXcgUmdiKGNsYW1waSh0aGlzLnIpLCBjbGFtcGkodGhpcy5nKSwgY2xhbXBpKHRoaXMuYiksIGNsYW1wYSh0aGlzLm9wYWNpdHkpKTsKICAgIH0sCiAgICBkaXNwbGF5YWJsZSgpIHsKICAgICAgcmV0dXJuIC0wLjUgPD0gdGhpcy5yICYmIHRoaXMuciA8IDI1NS41ICYmIC0wLjUgPD0gdGhpcy5nICYmIHRoaXMuZyA8IDI1NS41ICYmIC0wLjUgPD0gdGhpcy5iICYmIHRoaXMuYiA8IDI1NS41ICYmIDAgPD0gdGhpcy5vcGFjaXR5ICYmIHRoaXMub3BhY2l0eSA8PSAxOwogICAgfSwKICAgIGhleDogcmdiX2Zvcm1hdEhleCwKICAgIC8vIERlcHJlY2F0ZWQhIFVzZSBjb2xvci5mb3JtYXRIZXguCiAgICBmb3JtYXRIZXg6IHJnYl9mb3JtYXRIZXgsCiAgICBmb3JtYXRIZXg4OiByZ2JfZm9ybWF0SGV4OCwKICAgIGZvcm1hdFJnYjogcmdiX2Zvcm1hdFJnYiwKICAgIHRvU3RyaW5nOiByZ2JfZm9ybWF0UmdiCiAgfSkpOwogIGZ1bmN0aW9uIHJnYl9mb3JtYXRIZXgoKSB7CiAgICByZXR1cm4gYCMke2hleCh0aGlzLnIpfSR7aGV4KHRoaXMuZyl9JHtoZXgodGhpcy5iKX1gOwogIH0KICBmdW5jdGlvbiByZ2JfZm9ybWF0SGV4OCgpIHsKICAgIHJldHVybiBgIyR7aGV4KHRoaXMucil9JHtoZXgodGhpcy5nKX0ke2hleCh0aGlzLmIpfSR7aGV4KChpc05hTih0aGlzLm9wYWNpdHkpID8gMSA6IHRoaXMub3BhY2l0eSkgKiAyNTUpfWA7CiAgfQogIGZ1bmN0aW9uIHJnYl9mb3JtYXRSZ2IoKSB7CiAgICBjb25zdCBhID0gY2xhbXBhKHRoaXMub3BhY2l0eSk7CiAgICByZXR1cm4gYCR7YSA9PT0gMSA/ICJyZ2IoIiA6ICJyZ2JhKCJ9JHtjbGFtcGkodGhpcy5yKX0sICR7Y2xhbXBpKHRoaXMuZyl9LCAke2NsYW1waSh0aGlzLmIpfSR7YSA9PT0gMSA/ICIpIiA6IGAsICR7YX0pYH1gOwogIH0KICBmdW5jdGlvbiBjbGFtcGEob3BhY2l0eSkgewogICAgcmV0dXJuIGlzTmFOKG9wYWNpdHkpID8gMSA6IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIG9wYWNpdHkpKTsKICB9CiAgZnVuY3Rpb24gY2xhbXBpKHZhbHVlKSB7CiAgICByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5taW4oMjU1LCBNYXRoLnJvdW5kKHZhbHVlKSB8fCAwKSk7CiAgfQogIGZ1bmN0aW9uIGhleCh2YWx1ZSkgewogICAgdmFsdWUgPSBjbGFtcGkodmFsdWUpOwogICAgcmV0dXJuICh2YWx1ZSA8IDE2ID8gIjAiIDogIiIpICsgdmFsdWUudG9TdHJpbmcoMTYpOwogIH0KICBmdW5jdGlvbiBoc2xhKGgsIHMsIGwsIGEpIHsKICAgIGlmIChhIDw9IDApIGggPSBzID0gbCA9IE5hTjtlbHNlIGlmIChsIDw9IDAgfHwgbCA+PSAxKSBoID0gcyA9IE5hTjtlbHNlIGlmIChzIDw9IDApIGggPSBOYU47CiAgICByZXR1cm4gbmV3IEhzbChoLCBzLCBsLCBhKTsKICB9CiAgZnVuY3Rpb24gaHNsQ29udmVydChvKSB7CiAgICBpZiAobyBpbnN0YW5jZW9mIEhzbCkgcmV0dXJuIG5ldyBIc2woby5oLCBvLnMsIG8ubCwgby5vcGFjaXR5KTsKICAgIGlmICghKG8gaW5zdGFuY2VvZiBDb2xvcikpIG8gPSBjb2xvcihvKTsKICAgIGlmICghbykgcmV0dXJuIG5ldyBIc2woKTsKICAgIGlmIChvIGluc3RhbmNlb2YgSHNsKSByZXR1cm4gbzsKICAgIG8gPSBvLnJnYigpOwogICAgdmFyIHIgPSBvLnIgLyAyNTUsCiAgICAgIGcgPSBvLmcgLyAyNTUsCiAgICAgIGIgPSBvLmIgLyAyNTUsCiAgICAgIG1pbiA9IE1hdGgubWluKHIsIGcsIGIpLAogICAgICBtYXggPSBNYXRoLm1heChyLCBnLCBiKSwKICAgICAgaCA9IE5hTiwKICAgICAgcyA9IG1heCAtIG1pbiwKICAgICAgbCA9IChtYXggKyBtaW4pIC8gMjsKICAgIGlmIChzKSB7CiAgICAgIGlmIChyID09PSBtYXgpIGggPSAoZyAtIGIpIC8gcyArIChnIDwgYikgKiA2O2Vsc2UgaWYgKGcgPT09IG1heCkgaCA9IChiIC0gcikgLyBzICsgMjtlbHNlIGggPSAociAtIGcpIC8gcyArIDQ7CiAgICAgIHMgLz0gbCA8IDAuNSA/IG1heCArIG1pbiA6IDIgLSBtYXggLSBtaW47CiAgICAgIGggKj0gNjA7CiAgICB9IGVsc2UgewogICAgICBzID0gbCA+IDAgJiYgbCA8IDEgPyAwIDogaDsKICAgIH0KICAgIHJldHVybiBuZXcgSHNsKGgsIHMsIGwsIG8ub3BhY2l0eSk7CiAgfQogIGZ1bmN0aW9uIGhzbChoLCBzLCBsLCBvcGFjaXR5KSB7CiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/IGhzbENvbnZlcnQoaCkgOiBuZXcgSHNsKGgsIHMsIGwsIG9wYWNpdHkgPT0gbnVsbCA/IDEgOiBvcGFjaXR5KTsKICB9CiAgZnVuY3Rpb24gSHNsKGgsIHMsIGwsIG9wYWNpdHkpIHsKICAgIHRoaXMuaCA9ICtoOwogICAgdGhpcy5zID0gK3M7CiAgICB0aGlzLmwgPSArbDsKICAgIHRoaXMub3BhY2l0eSA9ICtvcGFjaXR5OwogIH0KICBkZWZpbmUoSHNsLCBoc2wsIGV4dGVuZChDb2xvciwgewogICAgYnJpZ2h0ZXIoaykgewogICAgICBrID0gayA9PSBudWxsID8gYnJpZ2h0ZXIgOiBNYXRoLnBvdyhicmlnaHRlciwgayk7CiAgICAgIHJldHVybiBuZXcgSHNsKHRoaXMuaCwgdGhpcy5zLCB0aGlzLmwgKiBrLCB0aGlzLm9wYWNpdHkpOwogICAgfSwKICAgIGRhcmtlcihrKSB7CiAgICAgIGsgPSBrID09IG51bGwgPyBkYXJrZXIgOiBNYXRoLnBvdyhkYXJrZXIsIGspOwogICAgICByZXR1cm4gbmV3IEhzbCh0aGlzLmgsIHRoaXMucywgdGhpcy5sICogaywgdGhpcy5vcGFjaXR5KTsKICAgIH0sCiAgICByZ2IoKSB7CiAgICAgIHZhciBoID0gdGhpcy5oICUgMzYwICsgKHRoaXMuaCA8IDApICogMzYwLAogICAgICAgIHMgPSBpc05hTihoKSB8fCBpc05hTih0aGlzLnMpID8gMCA6IHRoaXMucywKICAgICAgICBsID0gdGhpcy5sLAogICAgICAgIG0yID0gbCArIChsIDwgMC41ID8gbCA6IDEgLSBsKSAqIHMsCiAgICAgICAgbTEgPSAyICogbCAtIG0yOwogICAgICByZXR1cm4gbmV3IFJnYihoc2wycmdiKGggPj0gMjQwID8gaCAtIDI0MCA6IGggKyAxMjAsIG0xLCBtMiksIGhzbDJyZ2IoaCwgbTEsIG0yKSwgaHNsMnJnYihoIDwgMTIwID8gaCArIDI0MCA6IGggLSAxMjAsIG0xLCBtMiksIHRoaXMub3BhY2l0eSk7CiAgICB9LAogICAgY2xhbXAoKSB7CiAgICAgIHJldHVybiBuZXcgSHNsKGNsYW1waCh0aGlzLmgpLCBjbGFtcHQodGhpcy5zKSwgY2xhbXB0KHRoaXMubCksIGNsYW1wYSh0aGlzLm9wYWNpdHkpKTsKICAgIH0sCiAgICBkaXNwbGF5YWJsZSgpIHsKICAgICAgcmV0dXJuICgwIDw9IHRoaXMucyAmJiB0aGlzLnMgPD0gMSB8fCBpc05hTih0aGlzLnMpKSAmJiAwIDw9IHRoaXMubCAmJiB0aGlzLmwgPD0gMSAmJiAwIDw9IHRoaXMub3BhY2l0eSAmJiB0aGlzLm9wYWNpdHkgPD0gMTsKICAgIH0sCiAgICBmb3JtYXRIc2woKSB7CiAgICAgIGNvbnN0IGEgPSBjbGFtcGEodGhpcy5vcGFjaXR5KTsKICAgICAgcmV0dXJuIGAke2EgPT09IDEgPyAiaHNsKCIgOiAiaHNsYSgifSR7Y2xhbXBoKHRoaXMuaCl9LCAke2NsYW1wdCh0aGlzLnMpICogMTAwfSUsICR7Y2xhbXB0KHRoaXMubCkgKiAxMDB9JSR7YSA9PT0gMSA/ICIpIiA6IGAsICR7YX0pYH1gOwogICAgfQogIH0pKTsKICBmdW5jdGlvbiBjbGFtcGgodmFsdWUpIHsKICAgIHZhbHVlID0gKHZhbHVlIHx8IDApICUgMzYwOwogICAgcmV0dXJuIHZhbHVlIDwgMCA/IHZhbHVlICsgMzYwIDogdmFsdWU7CiAgfQogIGZ1bmN0aW9uIGNsYW1wdCh2YWx1ZSkgewogICAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKDEsIHZhbHVlIHx8IDApKTsKICB9CgogIC8qIEZyb20gRnZEIDEzLjM3LCBDU1MgQ29sb3IgTW9kdWxlIExldmVsIDMgKi8KICBmdW5jdGlvbiBoc2wycmdiKGgsIG0xLCBtMikgewogICAgcmV0dXJuIChoIDwgNjAgPyBtMSArIChtMiAtIG0xKSAqIGggLyA2MCA6IGggPCAxODAgPyBtMiA6IGggPCAyNDAgPyBtMSArIChtMiAtIG0xKSAqICgyNDAgLSBoKSAvIDYwIDogbTEpICogMjU1OwogIH0KCiAgdmFyIGNvbnN0YW50ID0geCA9PiAoKSA9PiB4OwoKICBmdW5jdGlvbiBsaW5lYXIoYSwgZCkgewogICAgcmV0dXJuIGZ1bmN0aW9uICh0KSB7CiAgICAgIHJldHVybiBhICsgdCAqIGQ7CiAgICB9OwogIH0KICBmdW5jdGlvbiBleHBvbmVudGlhbChhLCBiLCB5KSB7CiAgICByZXR1cm4gYSA9IE1hdGgucG93KGEsIHkpLCBiID0gTWF0aC5wb3coYiwgeSkgLSBhLCB5ID0gMSAvIHksIGZ1bmN0aW9uICh0KSB7CiAgICAgIHJldHVybiBNYXRoLnBvdyhhICsgdCAqIGIsIHkpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gZ2FtbWEoeSkgewogICAgcmV0dXJuICh5ID0gK3kpID09PSAxID8gbm9nYW1tYSA6IGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgIHJldHVybiBiIC0gYSA/IGV4cG9uZW50aWFsKGEsIGIsIHkpIDogY29uc3RhbnQoaXNOYU4oYSkgPyBiIDogYSk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBub2dhbW1hKGEsIGIpIHsKICAgIHZhciBkID0gYiAtIGE7CiAgICByZXR1cm4gZCA/IGxpbmVhcihhLCBkKSA6IGNvbnN0YW50KGlzTmFOKGEpID8gYiA6IGEpOwogIH0KCiAgdmFyIGludGVycG9sYXRlUmdiID0gKGZ1bmN0aW9uIHJnYkdhbW1hKHkpIHsKICAgIHZhciBjb2xvciA9IGdhbW1hKHkpOwogICAgZnVuY3Rpb24gcmdiJDEoc3RhcnQsIGVuZCkgewogICAgICB2YXIgciA9IGNvbG9yKChzdGFydCA9IHJnYihzdGFydCkpLnIsIChlbmQgPSByZ2IoZW5kKSkuciksCiAgICAgICAgZyA9IGNvbG9yKHN0YXJ0LmcsIGVuZC5nKSwKICAgICAgICBiID0gY29sb3Ioc3RhcnQuYiwgZW5kLmIpLAogICAgICAgIG9wYWNpdHkgPSBub2dhbW1hKHN0YXJ0Lm9wYWNpdHksIGVuZC5vcGFjaXR5KTsKICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgc3RhcnQuciA9IHIodCk7CiAgICAgICAgc3RhcnQuZyA9IGcodCk7CiAgICAgICAgc3RhcnQuYiA9IGIodCk7CiAgICAgICAgc3RhcnQub3BhY2l0eSA9IG9wYWNpdHkodCk7CiAgICAgICAgcmV0dXJuIHN0YXJ0ICsgIiI7CiAgICAgIH07CiAgICB9CiAgICByZ2IkMS5nYW1tYSA9IHJnYkdhbW1hOwogICAgcmV0dXJuIHJnYiQxOwogIH0pKDEpOwoKICBmdW5jdGlvbiBpbnRlcnBvbGF0ZU51bWJlciAoYSwgYikgewogICAgcmV0dXJuIGEgPSArYSwgYiA9ICtiLCBmdW5jdGlvbiAodCkgewogICAgICByZXR1cm4gYSAqICgxIC0gdCkgKyBiICogdDsKICAgIH07CiAgfQoKICB2YXIgcmVBID0gL1stK10/KD86XGQrXC4/XGQqfFwuP1xkKykoPzpbZUVdWy0rXT9cZCspPy9nLAogICAgcmVCID0gbmV3IFJlZ0V4cChyZUEuc291cmNlLCAiZyIpOwogIGZ1bmN0aW9uIHplcm8oYikgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGI7CiAgICB9OwogIH0KICBmdW5jdGlvbiBvbmUoYikgewogICAgcmV0dXJuIGZ1bmN0aW9uICh0KSB7CiAgICAgIHJldHVybiBiKHQpICsgIiI7CiAgICB9OwogIH0KICBmdW5jdGlvbiBpbnRlcnBvbGF0ZVN0cmluZyAoYSwgYikgewogICAgdmFyIGJpID0gcmVBLmxhc3RJbmRleCA9IHJlQi5sYXN0SW5kZXggPSAwLAogICAgICAvLyBzY2FuIGluZGV4IGZvciBuZXh0IG51bWJlciBpbiBiCiAgICAgIGFtLAogICAgICAvLyBjdXJyZW50IG1hdGNoIGluIGEKICAgICAgYm0sCiAgICAgIC8vIGN1cnJlbnQgbWF0Y2ggaW4gYgogICAgICBicywKICAgICAgLy8gc3RyaW5nIHByZWNlZGluZyBjdXJyZW50IG51bWJlciBpbiBiLCBpZiBhbnkKICAgICAgaSA9IC0xLAogICAgICAvLyBpbmRleCBpbiBzCiAgICAgIHMgPSBbXSwKICAgICAgLy8gc3RyaW5nIGNvbnN0YW50cyBhbmQgcGxhY2Vob2xkZXJzCiAgICAgIHEgPSBbXTsgLy8gbnVtYmVyIGludGVycG9sYXRvcnMKCiAgICAvLyBDb2VyY2UgaW5wdXRzIHRvIHN0cmluZ3MuCiAgICBhID0gYSArICIiLCBiID0gYiArICIiOwoKICAgIC8vIEludGVycG9sYXRlIHBhaXJzIG9mIG51bWJlcnMgaW4gYSAmIGIuCiAgICB3aGlsZSAoKGFtID0gcmVBLmV4ZWMoYSkpICYmIChibSA9IHJlQi5leGVjKGIpKSkgewogICAgICBpZiAoKGJzID0gYm0uaW5kZXgpID4gYmkpIHsKICAgICAgICAvLyBhIHN0cmluZyBwcmVjZWRlcyB0aGUgbmV4dCBudW1iZXIgaW4gYgogICAgICAgIGJzID0gYi5zbGljZShiaSwgYnMpOwogICAgICAgIGlmIChzW2ldKSBzW2ldICs9IGJzOyAvLyBjb2FsZXNjZSB3aXRoIHByZXZpb3VzIHN0cmluZwogICAgICAgIGVsc2Ugc1srK2ldID0gYnM7CiAgICAgIH0KICAgICAgaWYgKChhbSA9IGFtWzBdKSA9PT0gKGJtID0gYm1bMF0pKSB7CiAgICAgICAgLy8gbnVtYmVycyBpbiBhICYgYiBtYXRjaAogICAgICAgIGlmIChzW2ldKSBzW2ldICs9IGJtOyAvLyBjb2FsZXNjZSB3aXRoIHByZXZpb3VzIHN0cmluZwogICAgICAgIGVsc2Ugc1srK2ldID0gYm07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gaW50ZXJwb2xhdGUgbm9uLW1hdGNoaW5nIG51bWJlcnMKICAgICAgICBzWysraV0gPSBudWxsOwogICAgICAgIHEucHVzaCh7CiAgICAgICAgICBpOiBpLAogICAgICAgICAgeDogaW50ZXJwb2xhdGVOdW1iZXIoYW0sIGJtKQogICAgICAgIH0pOwogICAgICB9CiAgICAgIGJpID0gcmVCLmxhc3RJbmRleDsKICAgIH0KCiAgICAvLyBBZGQgcmVtYWlucyBvZiBiLgogICAgaWYgKGJpIDwgYi5sZW5ndGgpIHsKICAgICAgYnMgPSBiLnNsaWNlKGJpKTsKICAgICAgaWYgKHNbaV0pIHNbaV0gKz0gYnM7IC8vIGNvYWxlc2NlIHdpdGggcHJldmlvdXMgc3RyaW5nCiAgICAgIGVsc2Ugc1srK2ldID0gYnM7CiAgICB9CgogICAgLy8gU3BlY2lhbCBvcHRpbWl6YXRpb24gZm9yIG9ubHkgYSBzaW5nbGUgbWF0Y2guCiAgICAvLyBPdGhlcndpc2UsIGludGVycG9sYXRlIGVhY2ggb2YgdGhlIG51bWJlcnMgYW5kIHJlam9pbiB0aGUgc3RyaW5nLgogICAgcmV0dXJuIHMubGVuZ3RoIDwgMiA/IHFbMF0gPyBvbmUocVswXS54KSA6IHplcm8oYikgOiAoYiA9IHEubGVuZ3RoLCBmdW5jdGlvbiAodCkgewogICAgICBmb3IgKHZhciBpID0gMCwgbzsgaSA8IGI7ICsraSkgc1sobyA9IHFbaV0pLmldID0gby54KHQpOwogICAgICByZXR1cm4gcy5qb2luKCIiKTsKICAgIH0pOwogIH0KCiAgdmFyIGRlZ3JlZXMgPSAxODAgLyBNYXRoLlBJOwogIHZhciBpZGVudGl0eSA9IHsKICAgIHRyYW5zbGF0ZVg6IDAsCiAgICB0cmFuc2xhdGVZOiAwLAogICAgcm90YXRlOiAwLAogICAgc2tld1g6IDAsCiAgICBzY2FsZVg6IDEsCiAgICBzY2FsZVk6IDEKICB9OwogIGZ1bmN0aW9uIGRlY29tcG9zZSAoYSwgYiwgYywgZCwgZSwgZikgewogICAgdmFyIHNjYWxlWCwgc2NhbGVZLCBza2V3WDsKICAgIGlmIChzY2FsZVggPSBNYXRoLnNxcnQoYSAqIGEgKyBiICogYikpIGEgLz0gc2NhbGVYLCBiIC89IHNjYWxlWDsKICAgIGlmIChza2V3WCA9IGEgKiBjICsgYiAqIGQpIGMgLT0gYSAqIHNrZXdYLCBkIC09IGIgKiBza2V3WDsKICAgIGlmIChzY2FsZVkgPSBNYXRoLnNxcnQoYyAqIGMgKyBkICogZCkpIGMgLz0gc2NhbGVZLCBkIC89IHNjYWxlWSwgc2tld1ggLz0gc2NhbGVZOwogICAgaWYgKGEgKiBkIDwgYiAqIGMpIGEgPSAtYSwgYiA9IC1iLCBza2V3WCA9IC1za2V3WCwgc2NhbGVYID0gLXNjYWxlWDsKICAgIHJldHVybiB7CiAgICAgIHRyYW5zbGF0ZVg6IGUsCiAgICAgIHRyYW5zbGF0ZVk6IGYsCiAgICAgIHJvdGF0ZTogTWF0aC5hdGFuMihiLCBhKSAqIGRlZ3JlZXMsCiAgICAgIHNrZXdYOiBNYXRoLmF0YW4oc2tld1gpICogZGVncmVlcywKICAgICAgc2NhbGVYOiBzY2FsZVgsCiAgICAgIHNjYWxlWTogc2NhbGVZCiAgICB9OwogIH0KCiAgdmFyIHN2Z05vZGU7CgogIC8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovCiAgZnVuY3Rpb24gcGFyc2VDc3ModmFsdWUpIHsKICAgIGNvbnN0IG0gPSBuZXcgKHR5cGVvZiBET01NYXRyaXggPT09ICJmdW5jdGlvbiIgPyBET01NYXRyaXggOiBXZWJLaXRDU1NNYXRyaXgpKHZhbHVlICsgIiIpOwogICAgcmV0dXJuIG0uaXNJZGVudGl0eSA/IGlkZW50aXR5IDogZGVjb21wb3NlKG0uYSwgbS5iLCBtLmMsIG0uZCwgbS5lLCBtLmYpOwogIH0KICBmdW5jdGlvbiBwYXJzZVN2Zyh2YWx1ZSkgewogICAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiBpZGVudGl0eTsKICAgIGlmICghc3ZnTm9kZSkgc3ZnTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLCAiZyIpOwogICAgc3ZnTm9kZS5zZXRBdHRyaWJ1dGUoInRyYW5zZm9ybSIsIHZhbHVlKTsKICAgIGlmICghKHZhbHVlID0gc3ZnTm9kZS50cmFuc2Zvcm0uYmFzZVZhbC5jb25zb2xpZGF0ZSgpKSkgcmV0dXJuIGlkZW50aXR5OwogICAgdmFsdWUgPSB2YWx1ZS5tYXRyaXg7CiAgICByZXR1cm4gZGVjb21wb3NlKHZhbHVlLmEsIHZhbHVlLmIsIHZhbHVlLmMsIHZhbHVlLmQsIHZhbHVlLmUsIHZhbHVlLmYpOwogIH0KCiAgZnVuY3Rpb24gaW50ZXJwb2xhdGVUcmFuc2Zvcm0ocGFyc2UsIHB4Q29tbWEsIHB4UGFyZW4sIGRlZ1BhcmVuKSB7CiAgICBmdW5jdGlvbiBwb3AocykgewogICAgICByZXR1cm4gcy5sZW5ndGggPyBzLnBvcCgpICsgIiAiIDogIiI7CiAgICB9CiAgICBmdW5jdGlvbiB0cmFuc2xhdGUoeGEsIHlhLCB4YiwgeWIsIHMsIHEpIHsKICAgICAgaWYgKHhhICE9PSB4YiB8fCB5YSAhPT0geWIpIHsKICAgICAgICB2YXIgaSA9IHMucHVzaCgidHJhbnNsYXRlKCIsIG51bGwsIHB4Q29tbWEsIG51bGwsIHB4UGFyZW4pOwogICAgICAgIHEucHVzaCh7CiAgICAgICAgICBpOiBpIC0gNCwKICAgICAgICAgIHg6IGludGVycG9sYXRlTnVtYmVyKHhhLCB4YikKICAgICAgICB9LCB7CiAgICAgICAgICBpOiBpIC0gMiwKICAgICAgICAgIHg6IGludGVycG9sYXRlTnVtYmVyKHlhLCB5YikKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh4YiB8fCB5YikgewogICAgICAgIHMucHVzaCgidHJhbnNsYXRlKCIgKyB4YiArIHB4Q29tbWEgKyB5YiArIHB4UGFyZW4pOwogICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiByb3RhdGUoYSwgYiwgcywgcSkgewogICAgICBpZiAoYSAhPT0gYikgewogICAgICAgIGlmIChhIC0gYiA+IDE4MCkgYiArPSAzNjA7ZWxzZSBpZiAoYiAtIGEgPiAxODApIGEgKz0gMzYwOyAvLyBzaG9ydGVzdCBwYXRoCiAgICAgICAgcS5wdXNoKHsKICAgICAgICAgIGk6IHMucHVzaChwb3AocykgKyAicm90YXRlKCIsIG51bGwsIGRlZ1BhcmVuKSAtIDIsCiAgICAgICAgICB4OiBpbnRlcnBvbGF0ZU51bWJlcihhLCBiKQogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKGIpIHsKICAgICAgICBzLnB1c2gocG9wKHMpICsgInJvdGF0ZSgiICsgYiArIGRlZ1BhcmVuKTsKICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gc2tld1goYSwgYiwgcywgcSkgewogICAgICBpZiAoYSAhPT0gYikgewogICAgICAgIHEucHVzaCh7CiAgICAgICAgICBpOiBzLnB1c2gocG9wKHMpICsgInNrZXdYKCIsIG51bGwsIGRlZ1BhcmVuKSAtIDIsCiAgICAgICAgICB4OiBpbnRlcnBvbGF0ZU51bWJlcihhLCBiKQogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKGIpIHsKICAgICAgICBzLnB1c2gocG9wKHMpICsgInNrZXdYKCIgKyBiICsgZGVnUGFyZW4pOwogICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBzY2FsZSh4YSwgeWEsIHhiLCB5YiwgcywgcSkgewogICAgICBpZiAoeGEgIT09IHhiIHx8IHlhICE9PSB5YikgewogICAgICAgIHZhciBpID0gcy5wdXNoKHBvcChzKSArICJzY2FsZSgiLCBudWxsLCAiLCIsIG51bGwsICIpIik7CiAgICAgICAgcS5wdXNoKHsKICAgICAgICAgIGk6IGkgLSA0LAogICAgICAgICAgeDogaW50ZXJwb2xhdGVOdW1iZXIoeGEsIHhiKQogICAgICAgIH0sIHsKICAgICAgICAgIGk6IGkgLSAyLAogICAgICAgICAgeDogaW50ZXJwb2xhdGVOdW1iZXIoeWEsIHliKQogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHhiICE9PSAxIHx8IHliICE9PSAxKSB7CiAgICAgICAgcy5wdXNoKHBvcChzKSArICJzY2FsZSgiICsgeGIgKyAiLCIgKyB5YiArICIpIik7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBmdW5jdGlvbiAoYSwgYikgewogICAgICB2YXIgcyA9IFtdLAogICAgICAgIC8vIHN0cmluZyBjb25zdGFudHMgYW5kIHBsYWNlaG9sZGVycwogICAgICAgIHEgPSBbXTsgLy8gbnVtYmVyIGludGVycG9sYXRvcnMKICAgICAgYSA9IHBhcnNlKGEpLCBiID0gcGFyc2UoYik7CiAgICAgIHRyYW5zbGF0ZShhLnRyYW5zbGF0ZVgsIGEudHJhbnNsYXRlWSwgYi50cmFuc2xhdGVYLCBiLnRyYW5zbGF0ZVksIHMsIHEpOwogICAgICByb3RhdGUoYS5yb3RhdGUsIGIucm90YXRlLCBzLCBxKTsKICAgICAgc2tld1goYS5za2V3WCwgYi5za2V3WCwgcywgcSk7CiAgICAgIHNjYWxlKGEuc2NhbGVYLCBhLnNjYWxlWSwgYi5zY2FsZVgsIGIuc2NhbGVZLCBzLCBxKTsKICAgICAgYSA9IGIgPSBudWxsOyAvLyBnYwogICAgICByZXR1cm4gZnVuY3Rpb24gKHQpIHsKICAgICAgICB2YXIgaSA9IC0xLAogICAgICAgICAgbiA9IHEubGVuZ3RoLAogICAgICAgICAgbzsKICAgICAgICB3aGlsZSAoKytpIDwgbikgc1sobyA9IHFbaV0pLmldID0gby54KHQpOwogICAgICAgIHJldHVybiBzLmpvaW4oIiIpOwogICAgICB9OwogICAgfTsKICB9CiAgdmFyIGludGVycG9sYXRlVHJhbnNmb3JtQ3NzID0gaW50ZXJwb2xhdGVUcmFuc2Zvcm0ocGFyc2VDc3MsICJweCwgIiwgInB4KSIsICJkZWcpIik7CiAgdmFyIGludGVycG9sYXRlVHJhbnNmb3JtU3ZnID0gaW50ZXJwb2xhdGVUcmFuc2Zvcm0ocGFyc2VTdmcsICIsICIsICIpIiwgIikiKTsKCiAgdmFyIGZyYW1lID0gMCwKICAgIC8vIGlzIGFuIGFuaW1hdGlvbiBmcmFtZSBwZW5kaW5nPwogICAgdGltZW91dCQxID0gMCwKICAgIC8vIGlzIGEgdGltZW91dCBwZW5kaW5nPwogICAgaW50ZXJ2YWwgPSAwLAogICAgLy8gYXJlIGFueSB0aW1lcnMgYWN0aXZlPwogICAgcG9rZURlbGF5ID0gMTAwMCwKICAgIC8vIGhvdyBmcmVxdWVudGx5IHdlIGNoZWNrIGZvciBjbG9jayBza2V3CiAgICB0YXNrSGVhZCwKICAgIHRhc2tUYWlsLAogICAgY2xvY2tMYXN0ID0gMCwKICAgIGNsb2NrTm93ID0gMCwKICAgIGNsb2NrU2tldyA9IDAsCiAgICBjbG9jayA9IHR5cGVvZiBwZXJmb3JtYW5jZSA9PT0gIm9iamVjdCIgJiYgcGVyZm9ybWFuY2Uubm93ID8gcGVyZm9ybWFuY2UgOiBEYXRlLAogICAgc2V0RnJhbWUgPSB0eXBlb2Ygd2luZG93ID09PSAib2JqZWN0IiAmJiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID8gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZS5iaW5kKHdpbmRvdykgOiBmdW5jdGlvbiAoZikgewogICAgICBzZXRUaW1lb3V0KGYsIDE3KTsKICAgIH07CiAgZnVuY3Rpb24gbm93KCkgewogICAgcmV0dXJuIGNsb2NrTm93IHx8IChzZXRGcmFtZShjbGVhck5vdyksIGNsb2NrTm93ID0gY2xvY2subm93KCkgKyBjbG9ja1NrZXcpOwogIH0KICBmdW5jdGlvbiBjbGVhck5vdygpIHsKICAgIGNsb2NrTm93ID0gMDsKICB9CiAgZnVuY3Rpb24gVGltZXIoKSB7CiAgICB0aGlzLl9jYWxsID0gdGhpcy5fdGltZSA9IHRoaXMuX25leHQgPSBudWxsOwogIH0KICBUaW1lci5wcm90b3R5cGUgPSB0aW1lci5wcm90b3R5cGUgPSB7CiAgICBjb25zdHJ1Y3RvcjogVGltZXIsCiAgICByZXN0YXJ0OiBmdW5jdGlvbiAoY2FsbGJhY2ssIGRlbGF5LCB0aW1lKSB7CiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICJmdW5jdGlvbiIpIHRocm93IG5ldyBUeXBlRXJyb3IoImNhbGxiYWNrIGlzIG5vdCBhIGZ1bmN0aW9uIik7CiAgICAgIHRpbWUgPSAodGltZSA9PSBudWxsID8gbm93KCkgOiArdGltZSkgKyAoZGVsYXkgPT0gbnVsbCA/IDAgOiArZGVsYXkpOwogICAgICBpZiAoIXRoaXMuX25leHQgJiYgdGFza1RhaWwgIT09IHRoaXMpIHsKICAgICAgICBpZiAodGFza1RhaWwpIHRhc2tUYWlsLl9uZXh0ID0gdGhpcztlbHNlIHRhc2tIZWFkID0gdGhpczsKICAgICAgICB0YXNrVGFpbCA9IHRoaXM7CiAgICAgIH0KICAgICAgdGhpcy5fY2FsbCA9IGNhbGxiYWNrOwogICAgICB0aGlzLl90aW1lID0gdGltZTsKICAgICAgc2xlZXAoKTsKICAgIH0sCiAgICBzdG9wOiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICh0aGlzLl9jYWxsKSB7CiAgICAgICAgdGhpcy5fY2FsbCA9IG51bGw7CiAgICAgICAgdGhpcy5fdGltZSA9IEluZmluaXR5OwogICAgICAgIHNsZWVwKCk7CiAgICAgIH0KICAgIH0KICB9OwogIGZ1bmN0aW9uIHRpbWVyKGNhbGxiYWNrLCBkZWxheSwgdGltZSkgewogICAgdmFyIHQgPSBuZXcgVGltZXIoKTsKICAgIHQucmVzdGFydChjYWxsYmFjaywgZGVsYXksIHRpbWUpOwogICAgcmV0dXJuIHQ7CiAgfQogIGZ1bmN0aW9uIHRpbWVyRmx1c2goKSB7CiAgICBub3coKTsgLy8gR2V0IHRoZSBjdXJyZW50IHRpbWUsIGlmIG5vdCBhbHJlYWR5IHNldC4KICAgICsrZnJhbWU7IC8vIFByZXRlbmQgd2XigJl2ZSBzZXQgYW4gYWxhcm0sIGlmIHdlIGhhdmVu4oCZdCBhbHJlYWR5LgogICAgdmFyIHQgPSB0YXNrSGVhZCwKICAgICAgZTsKICAgIHdoaWxlICh0KSB7CiAgICAgIGlmICgoZSA9IGNsb2NrTm93IC0gdC5fdGltZSkgPj0gMCkgdC5fY2FsbC5jYWxsKHVuZGVmaW5lZCwgZSk7CiAgICAgIHQgPSB0Ll9uZXh0OwogICAgfQogICAgLS1mcmFtZTsKICB9CiAgZnVuY3Rpb24gd2FrZSgpIHsKICAgIGNsb2NrTm93ID0gKGNsb2NrTGFzdCA9IGNsb2NrLm5vdygpKSArIGNsb2NrU2tldzsKICAgIGZyYW1lID0gdGltZW91dCQxID0gMDsKICAgIHRyeSB7CiAgICAgIHRpbWVyRmx1c2goKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGZyYW1lID0gMDsKICAgICAgbmFwKCk7CiAgICAgIGNsb2NrTm93ID0gMDsKICAgIH0KICB9CiAgZnVuY3Rpb24gcG9rZSgpIHsKICAgIHZhciBub3cgPSBjbG9jay5ub3coKSwKICAgICAgZGVsYXkgPSBub3cgLSBjbG9ja0xhc3Q7CiAgICBpZiAoZGVsYXkgPiBwb2tlRGVsYXkpIGNsb2NrU2tldyAtPSBkZWxheSwgY2xvY2tMYXN0ID0gbm93OwogIH0KICBmdW5jdGlvbiBuYXAoKSB7CiAgICB2YXIgdDAsCiAgICAgIHQxID0gdGFza0hlYWQsCiAgICAgIHQyLAogICAgICB0aW1lID0gSW5maW5pdHk7CiAgICB3aGlsZSAodDEpIHsKICAgICAgaWYgKHQxLl9jYWxsKSB7CiAgICAgICAgaWYgKHRpbWUgPiB0MS5fdGltZSkgdGltZSA9IHQxLl90aW1lOwogICAgICAgIHQwID0gdDEsIHQxID0gdDEuX25leHQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdDIgPSB0MS5fbmV4dCwgdDEuX25leHQgPSBudWxsOwogICAgICAgIHQxID0gdDAgPyB0MC5fbmV4dCA9IHQyIDogdGFza0hlYWQgPSB0MjsKICAgICAgfQogICAgfQogICAgdGFza1RhaWwgPSB0MDsKICAgIHNsZWVwKHRpbWUpOwogIH0KICBmdW5jdGlvbiBzbGVlcCh0aW1lKSB7CiAgICBpZiAoZnJhbWUpIHJldHVybjsgLy8gU29vbmVzdCBhbGFybSBhbHJlYWR5IHNldCwgb3Igd2lsbCBiZS4KICAgIGlmICh0aW1lb3V0JDEpIHRpbWVvdXQkMSA9IGNsZWFyVGltZW91dCh0aW1lb3V0JDEpOwogICAgdmFyIGRlbGF5ID0gdGltZSAtIGNsb2NrTm93OyAvLyBTdHJpY3RseSBsZXNzIHRoYW4gaWYgd2UgcmVjb21wdXRlZCBjbG9ja05vdy4KICAgIGlmIChkZWxheSA+IDI0KSB7CiAgICAgIGlmICh0aW1lIDwgSW5maW5pdHkpIHRpbWVvdXQkMSA9IHNldFRpbWVvdXQod2FrZSwgdGltZSAtIGNsb2NrLm5vdygpIC0gY2xvY2tTa2V3KTsKICAgICAgaWYgKGludGVydmFsKSBpbnRlcnZhbCA9IGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpOwogICAgfSBlbHNlIHsKICAgICAgaWYgKCFpbnRlcnZhbCkgY2xvY2tMYXN0ID0gY2xvY2subm93KCksIGludGVydmFsID0gc2V0SW50ZXJ2YWwocG9rZSwgcG9rZURlbGF5KTsKICAgICAgZnJhbWUgPSAxLCBzZXRGcmFtZSh3YWtlKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHRpbWVvdXQgKGNhbGxiYWNrLCBkZWxheSwgdGltZSkgewogICAgdmFyIHQgPSBuZXcgVGltZXIoKTsKICAgIGRlbGF5ID0gZGVsYXkgPT0gbnVsbCA/IDAgOiArZGVsYXk7CiAgICB0LnJlc3RhcnQoZWxhcHNlZCA9PiB7CiAgICAgIHQuc3RvcCgpOwogICAgICBjYWxsYmFjayhlbGFwc2VkICsgZGVsYXkpOwogICAgfSwgZGVsYXksIHRpbWUpOwogICAgcmV0dXJuIHQ7CiAgfQoKICB2YXIgZW1wdHlPbiA9IGRpc3BhdGNoKCJzdGFydCIsICJlbmQiLCAiY2FuY2VsIiwgImludGVycnVwdCIpOwogIHZhciBlbXB0eVR3ZWVuID0gW107CiAgdmFyIENSRUFURUQgPSAwOwogIHZhciBTQ0hFRFVMRUQgPSAxOwogIHZhciBTVEFSVElORyA9IDI7CiAgdmFyIFNUQVJURUQgPSAzOwogIHZhciBSVU5OSU5HID0gNDsKICB2YXIgRU5ESU5HID0gNTsKICB2YXIgRU5ERUQgPSA2OwogIGZ1bmN0aW9uIHNjaGVkdWxlIChub2RlLCBuYW1lLCBpZCwgaW5kZXgsIGdyb3VwLCB0aW1pbmcpIHsKICAgIHZhciBzY2hlZHVsZXMgPSBub2RlLl9fdHJhbnNpdGlvbjsKICAgIGlmICghc2NoZWR1bGVzKSBub2RlLl9fdHJhbnNpdGlvbiA9IHt9O2Vsc2UgaWYgKGlkIGluIHNjaGVkdWxlcykgcmV0dXJuOwogICAgY3JlYXRlKG5vZGUsIGlkLCB7CiAgICAgIG5hbWU6IG5hbWUsCiAgICAgIGluZGV4OiBpbmRleCwKICAgICAgLy8gRm9yIGNvbnRleHQgZHVyaW5nIGNhbGxiYWNrLgogICAgICBncm91cDogZ3JvdXAsCiAgICAgIC8vIEZvciBjb250ZXh0IGR1cmluZyBjYWxsYmFjay4KICAgICAgb246IGVtcHR5T24sCiAgICAgIHR3ZWVuOiBlbXB0eVR3ZWVuLAogICAgICB0aW1lOiB0aW1pbmcudGltZSwKICAgICAgZGVsYXk6IHRpbWluZy5kZWxheSwKICAgICAgZHVyYXRpb246IHRpbWluZy5kdXJhdGlvbiwKICAgICAgZWFzZTogdGltaW5nLmVhc2UsCiAgICAgIHRpbWVyOiBudWxsLAogICAgICBzdGF0ZTogQ1JFQVRFRAogICAgfSk7CiAgfQogIGZ1bmN0aW9uIGluaXQobm9kZSwgaWQpIHsKICAgIHZhciBzY2hlZHVsZSA9IGdldChub2RlLCBpZCk7CiAgICBpZiAoc2NoZWR1bGUuc3RhdGUgPiBDUkVBVEVEKSB0aHJvdyBuZXcgRXJyb3IoInRvbyBsYXRlOyBhbHJlYWR5IHNjaGVkdWxlZCIpOwogICAgcmV0dXJuIHNjaGVkdWxlOwogIH0KICBmdW5jdGlvbiBzZXQobm9kZSwgaWQpIHsKICAgIHZhciBzY2hlZHVsZSA9IGdldChub2RlLCBpZCk7CiAgICBpZiAoc2NoZWR1bGUuc3RhdGUgPiBTVEFSVEVEKSB0aHJvdyBuZXcgRXJyb3IoInRvbyBsYXRlOyBhbHJlYWR5IHJ1bm5pbmciKTsKICAgIHJldHVybiBzY2hlZHVsZTsKICB9CiAgZnVuY3Rpb24gZ2V0KG5vZGUsIGlkKSB7CiAgICB2YXIgc2NoZWR1bGUgPSBub2RlLl9fdHJhbnNpdGlvbjsKICAgIGlmICghc2NoZWR1bGUgfHwgIShzY2hlZHVsZSA9IHNjaGVkdWxlW2lkXSkpIHRocm93IG5ldyBFcnJvcigidHJhbnNpdGlvbiBub3QgZm91bmQiKTsKICAgIHJldHVybiBzY2hlZHVsZTsKICB9CiAgZnVuY3Rpb24gY3JlYXRlKG5vZGUsIGlkLCBzZWxmKSB7CiAgICB2YXIgc2NoZWR1bGVzID0gbm9kZS5fX3RyYW5zaXRpb24sCiAgICAgIHR3ZWVuOwoKICAgIC8vIEluaXRpYWxpemUgdGhlIHNlbGYgdGltZXIgd2hlbiB0aGUgdHJhbnNpdGlvbiBpcyBjcmVhdGVkLgogICAgLy8gTm90ZSB0aGUgYWN0dWFsIGRlbGF5IGlzIG5vdCBrbm93biB1bnRpbCB0aGUgZmlyc3QgY2FsbGJhY2shCiAgICBzY2hlZHVsZXNbaWRdID0gc2VsZjsKICAgIHNlbGYudGltZXIgPSB0aW1lcihzY2hlZHVsZSwgMCwgc2VsZi50aW1lKTsKICAgIGZ1bmN0aW9uIHNjaGVkdWxlKGVsYXBzZWQpIHsKICAgICAgc2VsZi5zdGF0ZSA9IFNDSEVEVUxFRDsKICAgICAgc2VsZi50aW1lci5yZXN0YXJ0KHN0YXJ0LCBzZWxmLmRlbGF5LCBzZWxmLnRpbWUpOwoKICAgICAgLy8gSWYgdGhlIGVsYXBzZWQgZGVsYXkgaXMgbGVzcyB0aGFuIG91ciBmaXJzdCBzbGVlcCwgc3RhcnQgaW1tZWRpYXRlbHkuCiAgICAgIGlmIChzZWxmLmRlbGF5IDw9IGVsYXBzZWQpIHN0YXJ0KGVsYXBzZWQgLSBzZWxmLmRlbGF5KTsKICAgIH0KICAgIGZ1bmN0aW9uIHN0YXJ0KGVsYXBzZWQpIHsKICAgICAgdmFyIGksIGosIG4sIG87CgogICAgICAvLyBJZiB0aGUgc3RhdGUgaXMgbm90IFNDSEVEVUxFRCwgdGhlbiB3ZSBwcmV2aW91c2x5IGVycm9yZWQgb24gc3RhcnQuCiAgICAgIGlmIChzZWxmLnN0YXRlICE9PSBTQ0hFRFVMRUQpIHJldHVybiBzdG9wKCk7CiAgICAgIGZvciAoaSBpbiBzY2hlZHVsZXMpIHsKICAgICAgICBvID0gc2NoZWR1bGVzW2ldOwogICAgICAgIGlmIChvLm5hbWUgIT09IHNlbGYubmFtZSkgY29udGludWU7CgogICAgICAgIC8vIFdoaWxlIHRoaXMgZWxlbWVudCBhbHJlYWR5IGhhcyBhIHN0YXJ0aW5nIHRyYW5zaXRpb24gZHVyaW5nIHRoaXMgZnJhbWUsCiAgICAgICAgLy8gZGVmZXIgc3RhcnRpbmcgYW4gaW50ZXJydXB0aW5nIHRyYW5zaXRpb24gdW50aWwgdGhhdCB0cmFuc2l0aW9uIGhhcyBhCiAgICAgICAgLy8gY2hhbmNlIHRvIHRpY2sgKGFuZCBwb3NzaWJseSBlbmQpOyBzZWUgZDMvZDMtdHJhbnNpdGlvbiM1NCEKICAgICAgICBpZiAoby5zdGF0ZSA9PT0gU1RBUlRFRCkgcmV0dXJuIHRpbWVvdXQoc3RhcnQpOwoKICAgICAgICAvLyBJbnRlcnJ1cHQgdGhlIGFjdGl2ZSB0cmFuc2l0aW9uLCBpZiBhbnkuCiAgICAgICAgaWYgKG8uc3RhdGUgPT09IFJVTk5JTkcpIHsKICAgICAgICAgIG8uc3RhdGUgPSBFTkRFRDsKICAgICAgICAgIG8udGltZXIuc3RvcCgpOwogICAgICAgICAgby5vbi5jYWxsKCJpbnRlcnJ1cHQiLCBub2RlLCBub2RlLl9fZGF0YV9fLCBvLmluZGV4LCBvLmdyb3VwKTsKICAgICAgICAgIGRlbGV0ZSBzY2hlZHVsZXNbaV07CiAgICAgICAgfQoKICAgICAgICAvLyBDYW5jZWwgYW55IHByZS1lbXB0ZWQgdHJhbnNpdGlvbnMuCiAgICAgICAgZWxzZSBpZiAoK2kgPCBpZCkgewogICAgICAgICAgby5zdGF0ZSA9IEVOREVEOwogICAgICAgICAgby50aW1lci5zdG9wKCk7CiAgICAgICAgICBvLm9uLmNhbGwoImNhbmNlbCIsIG5vZGUsIG5vZGUuX19kYXRhX18sIG8uaW5kZXgsIG8uZ3JvdXApOwogICAgICAgICAgZGVsZXRlIHNjaGVkdWxlc1tpXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIERlZmVyIHRoZSBmaXJzdCB0aWNrIHRvIGVuZCBvZiB0aGUgY3VycmVudCBmcmFtZTsgc2VlIGQzL2QzIzE1NzYuCiAgICAgIC8vIE5vdGUgdGhlIHRyYW5zaXRpb24gbWF5IGJlIGNhbmNlbGVkIGFmdGVyIHN0YXJ0IGFuZCBiZWZvcmUgdGhlIGZpcnN0IHRpY2shCiAgICAgIC8vIE5vdGUgdGhpcyBtdXN0IGJlIHNjaGVkdWxlZCBiZWZvcmUgdGhlIHN0YXJ0IGV2ZW50OyBzZWUgZDMvZDMtdHJhbnNpdGlvbiMxNiEKICAgICAgLy8gQXNzdW1pbmcgdGhpcyBpcyBzdWNjZXNzZnVsLCBzdWJzZXF1ZW50IGNhbGxiYWNrcyBnbyBzdHJhaWdodCB0byB0aWNrLgogICAgICB0aW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoc2VsZi5zdGF0ZSA9PT0gU1RBUlRFRCkgewogICAgICAgICAgc2VsZi5zdGF0ZSA9IFJVTk5JTkc7CiAgICAgICAgICBzZWxmLnRpbWVyLnJlc3RhcnQodGljaywgc2VsZi5kZWxheSwgc2VsZi50aW1lKTsKICAgICAgICAgIHRpY2soZWxhcHNlZCk7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIC8vIERpc3BhdGNoIHRoZSBzdGFydCBldmVudC4KICAgICAgLy8gTm90ZSB0aGlzIG11c3QgYmUgZG9uZSBiZWZvcmUgdGhlIHR3ZWVuIGFyZSBpbml0aWFsaXplZC4KICAgICAgc2VsZi5zdGF0ZSA9IFNUQVJUSU5HOwogICAgICBzZWxmLm9uLmNhbGwoInN0YXJ0Iiwgbm9kZSwgbm9kZS5fX2RhdGFfXywgc2VsZi5pbmRleCwgc2VsZi5ncm91cCk7CiAgICAgIGlmIChzZWxmLnN0YXRlICE9PSBTVEFSVElORykgcmV0dXJuOyAvLyBpbnRlcnJ1cHRlZAogICAgICBzZWxmLnN0YXRlID0gU1RBUlRFRDsKCiAgICAgIC8vIEluaXRpYWxpemUgdGhlIHR3ZWVuLCBkZWxldGluZyBudWxsIHR3ZWVuLgogICAgICB0d2VlbiA9IG5ldyBBcnJheShuID0gc2VsZi50d2Vlbi5sZW5ndGgpOwogICAgICBmb3IgKGkgPSAwLCBqID0gLTE7IGkgPCBuOyArK2kpIHsKICAgICAgICBpZiAobyA9IHNlbGYudHdlZW5baV0udmFsdWUuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBzZWxmLmluZGV4LCBzZWxmLmdyb3VwKSkgewogICAgICAgICAgdHdlZW5bKytqXSA9IG87CiAgICAgICAgfQogICAgICB9CiAgICAgIHR3ZWVuLmxlbmd0aCA9IGogKyAxOwogICAgfQogICAgZnVuY3Rpb24gdGljayhlbGFwc2VkKSB7CiAgICAgIHZhciB0ID0gZWxhcHNlZCA8IHNlbGYuZHVyYXRpb24gPyBzZWxmLmVhc2UuY2FsbChudWxsLCBlbGFwc2VkIC8gc2VsZi5kdXJhdGlvbikgOiAoc2VsZi50aW1lci5yZXN0YXJ0KHN0b3ApLCBzZWxmLnN0YXRlID0gRU5ESU5HLCAxKSwKICAgICAgICBpID0gLTEsCiAgICAgICAgbiA9IHR3ZWVuLmxlbmd0aDsKICAgICAgd2hpbGUgKCsraSA8IG4pIHsKICAgICAgICB0d2VlbltpXS5jYWxsKG5vZGUsIHQpOwogICAgICB9CgogICAgICAvLyBEaXNwYXRjaCB0aGUgZW5kIGV2ZW50LgogICAgICBpZiAoc2VsZi5zdGF0ZSA9PT0gRU5ESU5HKSB7CiAgICAgICAgc2VsZi5vbi5jYWxsKCJlbmQiLCBub2RlLCBub2RlLl9fZGF0YV9fLCBzZWxmLmluZGV4LCBzZWxmLmdyb3VwKTsKICAgICAgICBzdG9wKCk7CiAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIHN0b3AoKSB7CiAgICAgIHNlbGYuc3RhdGUgPSBFTkRFRDsKICAgICAgc2VsZi50aW1lci5zdG9wKCk7CiAgICAgIGRlbGV0ZSBzY2hlZHVsZXNbaWRdOwogICAgICBmb3IgKHZhciBpIGluIHNjaGVkdWxlcykgcmV0dXJuOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCiAgICAgIGRlbGV0ZSBub2RlLl9fdHJhbnNpdGlvbjsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGludGVycnVwdCAobm9kZSwgbmFtZSkgewogICAgdmFyIHNjaGVkdWxlcyA9IG5vZGUuX190cmFuc2l0aW9uLAogICAgICBzY2hlZHVsZSwKICAgICAgYWN0aXZlLAogICAgICBlbXB0eSA9IHRydWUsCiAgICAgIGk7CiAgICBpZiAoIXNjaGVkdWxlcykgcmV0dXJuOwogICAgbmFtZSA9IG5hbWUgPT0gbnVsbCA/IG51bGwgOiBuYW1lICsgIiI7CiAgICBmb3IgKGkgaW4gc2NoZWR1bGVzKSB7CiAgICAgIGlmICgoc2NoZWR1bGUgPSBzY2hlZHVsZXNbaV0pLm5hbWUgIT09IG5hbWUpIHsKICAgICAgICBlbXB0eSA9IGZhbHNlOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGFjdGl2ZSA9IHNjaGVkdWxlLnN0YXRlID4gU1RBUlRJTkcgJiYgc2NoZWR1bGUuc3RhdGUgPCBFTkRJTkc7CiAgICAgIHNjaGVkdWxlLnN0YXRlID0gRU5ERUQ7CiAgICAgIHNjaGVkdWxlLnRpbWVyLnN0b3AoKTsKICAgICAgc2NoZWR1bGUub24uY2FsbChhY3RpdmUgPyAiaW50ZXJydXB0IiA6ICJjYW5jZWwiLCBub2RlLCBub2RlLl9fZGF0YV9fLCBzY2hlZHVsZS5pbmRleCwgc2NoZWR1bGUuZ3JvdXApOwogICAgICBkZWxldGUgc2NoZWR1bGVzW2ldOwogICAgfQogICAgaWYgKGVtcHR5KSBkZWxldGUgbm9kZS5fX3RyYW5zaXRpb247CiAgfQoKICBmdW5jdGlvbiBzZWxlY3Rpb25faW50ZXJydXB0IChuYW1lKSB7CiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgaW50ZXJydXB0KHRoaXMsIG5hbWUpOwogICAgfSk7CiAgfQoKICBmdW5jdGlvbiB0d2VlblJlbW92ZShpZCwgbmFtZSkgewogICAgdmFyIHR3ZWVuMCwgdHdlZW4xOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHNjaGVkdWxlID0gc2V0KHRoaXMsIGlkKSwKICAgICAgICB0d2VlbiA9IHNjaGVkdWxlLnR3ZWVuOwoKICAgICAgLy8gSWYgdGhpcyBub2RlIHNoYXJlZCB0d2VlbiB3aXRoIHRoZSBwcmV2aW91cyBub2RlLAogICAgICAvLyBqdXN0IGFzc2lnbiB0aGUgdXBkYXRlZCBzaGFyZWQgdHdlZW4gYW5kIHdl4oCZcmUgZG9uZSEKICAgICAgLy8gT3RoZXJ3aXNlLCBjb3B5LW9uLXdyaXRlLgogICAgICBpZiAodHdlZW4gIT09IHR3ZWVuMCkgewogICAgICAgIHR3ZWVuMSA9IHR3ZWVuMCA9IHR3ZWVuOwogICAgICAgIGZvciAodmFyIGkgPSAwLCBuID0gdHdlZW4xLmxlbmd0aDsgaSA8IG47ICsraSkgewogICAgICAgICAgaWYgKHR3ZWVuMVtpXS5uYW1lID09PSBuYW1lKSB7CiAgICAgICAgICAgIHR3ZWVuMSA9IHR3ZWVuMS5zbGljZSgpOwogICAgICAgICAgICB0d2VlbjEuc3BsaWNlKGksIDEpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgc2NoZWR1bGUudHdlZW4gPSB0d2VlbjE7CiAgICB9OwogIH0KICBmdW5jdGlvbiB0d2VlbkZ1bmN0aW9uKGlkLCBuYW1lLCB2YWx1ZSkgewogICAgdmFyIHR3ZWVuMCwgdHdlZW4xOwogICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gImZ1bmN0aW9uIikgdGhyb3cgbmV3IEVycm9yKCk7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgc2NoZWR1bGUgPSBzZXQodGhpcywgaWQpLAogICAgICAgIHR3ZWVuID0gc2NoZWR1bGUudHdlZW47CgogICAgICAvLyBJZiB0aGlzIG5vZGUgc2hhcmVkIHR3ZWVuIHdpdGggdGhlIHByZXZpb3VzIG5vZGUsCiAgICAgIC8vIGp1c3QgYXNzaWduIHRoZSB1cGRhdGVkIHNoYXJlZCB0d2VlbiBhbmQgd2XigJlyZSBkb25lIQogICAgICAvLyBPdGhlcndpc2UsIGNvcHktb24td3JpdGUuCiAgICAgIGlmICh0d2VlbiAhPT0gdHdlZW4wKSB7CiAgICAgICAgdHdlZW4xID0gKHR3ZWVuMCA9IHR3ZWVuKS5zbGljZSgpOwogICAgICAgIGZvciAodmFyIHQgPSB7CiAgICAgICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZQogICAgICAgICAgfSwgaSA9IDAsIG4gPSB0d2VlbjEubGVuZ3RoOyBpIDwgbjsgKytpKSB7CiAgICAgICAgICBpZiAodHdlZW4xW2ldLm5hbWUgPT09IG5hbWUpIHsKICAgICAgICAgICAgdHdlZW4xW2ldID0gdDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChpID09PSBuKSB0d2VlbjEucHVzaCh0KTsKICAgICAgfQogICAgICBzY2hlZHVsZS50d2VlbiA9IHR3ZWVuMTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIHRyYW5zaXRpb25fdHdlZW4gKG5hbWUsIHZhbHVlKSB7CiAgICB2YXIgaWQgPSB0aGlzLl9pZDsKICAgIG5hbWUgKz0gIiI7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHsKICAgICAgdmFyIHR3ZWVuID0gZ2V0KHRoaXMubm9kZSgpLCBpZCkudHdlZW47CiAgICAgIGZvciAodmFyIGkgPSAwLCBuID0gdHdlZW4ubGVuZ3RoLCB0OyBpIDwgbjsgKytpKSB7CiAgICAgICAgaWYgKCh0ID0gdHdlZW5baV0pLm5hbWUgPT09IG5hbWUpIHsKICAgICAgICAgIHJldHVybiB0LnZhbHVlOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIHJldHVybiB0aGlzLmVhY2goKHZhbHVlID09IG51bGwgPyB0d2VlblJlbW92ZSA6IHR3ZWVuRnVuY3Rpb24pKGlkLCBuYW1lLCB2YWx1ZSkpOwogIH0KICBmdW5jdGlvbiB0d2VlblZhbHVlKHRyYW5zaXRpb24sIG5hbWUsIHZhbHVlKSB7CiAgICB2YXIgaWQgPSB0cmFuc2l0aW9uLl9pZDsKICAgIHRyYW5zaXRpb24uZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBzY2hlZHVsZSA9IHNldCh0aGlzLCBpZCk7CiAgICAgIChzY2hlZHVsZS52YWx1ZSB8fCAoc2NoZWR1bGUudmFsdWUgPSB7fSkpW25hbWVdID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0pOwogICAgcmV0dXJuIGZ1bmN0aW9uIChub2RlKSB7CiAgICAgIHJldHVybiBnZXQobm9kZSwgaWQpLnZhbHVlW25hbWVdOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIGludGVycG9sYXRlIChhLCBiKSB7CiAgICB2YXIgYzsKICAgIHJldHVybiAodHlwZW9mIGIgPT09ICJudW1iZXIiID8gaW50ZXJwb2xhdGVOdW1iZXIgOiBiIGluc3RhbmNlb2YgY29sb3IgPyBpbnRlcnBvbGF0ZVJnYiA6IChjID0gY29sb3IoYikpID8gKGIgPSBjLCBpbnRlcnBvbGF0ZVJnYikgOiBpbnRlcnBvbGF0ZVN0cmluZykoYSwgYik7CiAgfQoKICBmdW5jdGlvbiBhdHRyUmVtb3ZlKG5hbWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gYXR0clJlbW92ZU5TKGZ1bGxuYW1lKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBhdHRyQ29uc3RhbnQobmFtZSwgaW50ZXJwb2xhdGUsIHZhbHVlMSkgewogICAgdmFyIHN0cmluZzAwLAogICAgICBzdHJpbmcxID0gdmFsdWUxICsgIiIsCiAgICAgIGludGVycG9sYXRlMDsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBzdHJpbmcwID0gdGhpcy5nZXRBdHRyaWJ1dGUobmFtZSk7CiAgICAgIHJldHVybiBzdHJpbmcwID09PSBzdHJpbmcxID8gbnVsbCA6IHN0cmluZzAgPT09IHN0cmluZzAwID8gaW50ZXJwb2xhdGUwIDogaW50ZXJwb2xhdGUwID0gaW50ZXJwb2xhdGUoc3RyaW5nMDAgPSBzdHJpbmcwLCB2YWx1ZTEpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gYXR0ckNvbnN0YW50TlMoZnVsbG5hbWUsIGludGVycG9sYXRlLCB2YWx1ZTEpIHsKICAgIHZhciBzdHJpbmcwMCwKICAgICAgc3RyaW5nMSA9IHZhbHVlMSArICIiLAogICAgICBpbnRlcnBvbGF0ZTA7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgc3RyaW5nMCA9IHRoaXMuZ2V0QXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsKTsKICAgICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgPyBpbnRlcnBvbGF0ZTAgOiBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHZhbHVlMSk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBhdHRyRnVuY3Rpb24obmFtZSwgaW50ZXJwb2xhdGUsIHZhbHVlKSB7CiAgICB2YXIgc3RyaW5nMDAsIHN0cmluZzEwLCBpbnRlcnBvbGF0ZTA7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgc3RyaW5nMCwKICAgICAgICB2YWx1ZTEgPSB2YWx1ZSh0aGlzKSwKICAgICAgICBzdHJpbmcxOwogICAgICBpZiAodmFsdWUxID09IG51bGwpIHJldHVybiB2b2lkIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpOwogICAgICBzdHJpbmcwID0gdGhpcy5nZXRBdHRyaWJ1dGUobmFtZSk7CiAgICAgIHN0cmluZzEgPSB2YWx1ZTEgKyAiIjsKICAgICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgJiYgc3RyaW5nMSA9PT0gc3RyaW5nMTAgPyBpbnRlcnBvbGF0ZTAgOiAoc3RyaW5nMTAgPSBzdHJpbmcxLCBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHZhbHVlMSkpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gYXR0ckZ1bmN0aW9uTlMoZnVsbG5hbWUsIGludGVycG9sYXRlLCB2YWx1ZSkgewogICAgdmFyIHN0cmluZzAwLCBzdHJpbmcxMCwgaW50ZXJwb2xhdGUwOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHN0cmluZzAsCiAgICAgICAgdmFsdWUxID0gdmFsdWUodGhpcyksCiAgICAgICAgc3RyaW5nMTsKICAgICAgaWYgKHZhbHVlMSA9PSBudWxsKSByZXR1cm4gdm9pZCB0aGlzLnJlbW92ZUF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCk7CiAgICAgIHN0cmluZzAgPSB0aGlzLmdldEF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCk7CiAgICAgIHN0cmluZzEgPSB2YWx1ZTEgKyAiIjsKICAgICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgJiYgc3RyaW5nMSA9PT0gc3RyaW5nMTAgPyBpbnRlcnBvbGF0ZTAgOiAoc3RyaW5nMTAgPSBzdHJpbmcxLCBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHZhbHVlMSkpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gdHJhbnNpdGlvbl9hdHRyIChuYW1lLCB2YWx1ZSkgewogICAgdmFyIGZ1bGxuYW1lID0gbmFtZXNwYWNlKG5hbWUpLAogICAgICBpID0gZnVsbG5hbWUgPT09ICJ0cmFuc2Zvcm0iID8gaW50ZXJwb2xhdGVUcmFuc2Zvcm1TdmcgOiBpbnRlcnBvbGF0ZTsKICAgIHJldHVybiB0aGlzLmF0dHJUd2VlbihuYW1lLCB0eXBlb2YgdmFsdWUgPT09ICJmdW5jdGlvbiIgPyAoZnVsbG5hbWUubG9jYWwgPyBhdHRyRnVuY3Rpb25OUyA6IGF0dHJGdW5jdGlvbikoZnVsbG5hbWUsIGksIHR3ZWVuVmFsdWUodGhpcywgImF0dHIuIiArIG5hbWUsIHZhbHVlKSkgOiB2YWx1ZSA9PSBudWxsID8gKGZ1bGxuYW1lLmxvY2FsID8gYXR0clJlbW92ZU5TIDogYXR0clJlbW92ZSkoZnVsbG5hbWUpIDogKGZ1bGxuYW1lLmxvY2FsID8gYXR0ckNvbnN0YW50TlMgOiBhdHRyQ29uc3RhbnQpKGZ1bGxuYW1lLCBpLCB2YWx1ZSkpOwogIH0KCiAgZnVuY3Rpb24gYXR0ckludGVycG9sYXRlKG5hbWUsIGkpIHsKICAgIHJldHVybiBmdW5jdGlvbiAodCkgewogICAgICB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCBpLmNhbGwodGhpcywgdCkpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gYXR0ckludGVycG9sYXRlTlMoZnVsbG5hbWUsIGkpIHsKICAgIHJldHVybiBmdW5jdGlvbiAodCkgewogICAgICB0aGlzLnNldEF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCwgaS5jYWxsKHRoaXMsIHQpKTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIGF0dHJUd2Vlbk5TKGZ1bGxuYW1lLCB2YWx1ZSkgewogICAgdmFyIHQwLCBpMDsKICAgIGZ1bmN0aW9uIHR3ZWVuKCkgewogICAgICB2YXIgaSA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIGlmIChpICE9PSBpMCkgdDAgPSAoaTAgPSBpKSAmJiBhdHRySW50ZXJwb2xhdGVOUyhmdWxsbmFtZSwgaSk7CiAgICAgIHJldHVybiB0MDsKICAgIH0KICAgIHR3ZWVuLl92YWx1ZSA9IHZhbHVlOwogICAgcmV0dXJuIHR3ZWVuOwogIH0KICBmdW5jdGlvbiBhdHRyVHdlZW4obmFtZSwgdmFsdWUpIHsKICAgIHZhciB0MCwgaTA7CiAgICBmdW5jdGlvbiB0d2VlbigpIHsKICAgICAgdmFyIGkgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICBpZiAoaSAhPT0gaTApIHQwID0gKGkwID0gaSkgJiYgYXR0ckludGVycG9sYXRlKG5hbWUsIGkpOwogICAgICByZXR1cm4gdDA7CiAgICB9CiAgICB0d2Vlbi5fdmFsdWUgPSB2YWx1ZTsKICAgIHJldHVybiB0d2VlbjsKICB9CiAgZnVuY3Rpb24gdHJhbnNpdGlvbl9hdHRyVHdlZW4gKG5hbWUsIHZhbHVlKSB7CiAgICB2YXIga2V5ID0gImF0dHIuIiArIG5hbWU7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHJldHVybiAoa2V5ID0gdGhpcy50d2VlbihrZXkpKSAmJiBrZXkuX3ZhbHVlOwogICAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiB0aGlzLnR3ZWVuKGtleSwgbnVsbCk7CiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAiZnVuY3Rpb24iKSB0aHJvdyBuZXcgRXJyb3IoKTsKICAgIHZhciBmdWxsbmFtZSA9IG5hbWVzcGFjZShuYW1lKTsKICAgIHJldHVybiB0aGlzLnR3ZWVuKGtleSwgKGZ1bGxuYW1lLmxvY2FsID8gYXR0clR3ZWVuTlMgOiBhdHRyVHdlZW4pKGZ1bGxuYW1lLCB2YWx1ZSkpOwogIH0KCiAgZnVuY3Rpb24gZGVsYXlGdW5jdGlvbihpZCwgdmFsdWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIGluaXQodGhpcywgaWQpLmRlbGF5ID0gK3ZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBkZWxheUNvbnN0YW50KGlkLCB2YWx1ZSkgewogICAgcmV0dXJuIHZhbHVlID0gK3ZhbHVlLCBmdW5jdGlvbiAoKSB7CiAgICAgIGluaXQodGhpcywgaWQpLmRlbGF5ID0gdmFsdWU7CiAgICB9OwogIH0KICBmdW5jdGlvbiB0cmFuc2l0aW9uX2RlbGF5ICh2YWx1ZSkgewogICAgdmFyIGlkID0gdGhpcy5faWQ7CiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IHRoaXMuZWFjaCgodHlwZW9mIHZhbHVlID09PSAiZnVuY3Rpb24iID8gZGVsYXlGdW5jdGlvbiA6IGRlbGF5Q29uc3RhbnQpKGlkLCB2YWx1ZSkpIDogZ2V0KHRoaXMubm9kZSgpLCBpZCkuZGVsYXk7CiAgfQoKICBmdW5jdGlvbiBkdXJhdGlvbkZ1bmN0aW9uKGlkLCB2YWx1ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgc2V0KHRoaXMsIGlkKS5kdXJhdGlvbiA9ICt2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gZHVyYXRpb25Db25zdGFudChpZCwgdmFsdWUpIHsKICAgIHJldHVybiB2YWx1ZSA9ICt2YWx1ZSwgZnVuY3Rpb24gKCkgewogICAgICBzZXQodGhpcywgaWQpLmR1cmF0aW9uID0gdmFsdWU7CiAgICB9OwogIH0KICBmdW5jdGlvbiB0cmFuc2l0aW9uX2R1cmF0aW9uICh2YWx1ZSkgewogICAgdmFyIGlkID0gdGhpcy5faWQ7CiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IHRoaXMuZWFjaCgodHlwZW9mIHZhbHVlID09PSAiZnVuY3Rpb24iID8gZHVyYXRpb25GdW5jdGlvbiA6IGR1cmF0aW9uQ29uc3RhbnQpKGlkLCB2YWx1ZSkpIDogZ2V0KHRoaXMubm9kZSgpLCBpZCkuZHVyYXRpb247CiAgfQoKICBmdW5jdGlvbiBlYXNlQ29uc3RhbnQoaWQsIHZhbHVlKSB7CiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAiZnVuY3Rpb24iKSB0aHJvdyBuZXcgRXJyb3IoKTsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHNldCh0aGlzLCBpZCkuZWFzZSA9IHZhbHVlOwogICAgfTsKICB9CiAgZnVuY3Rpb24gdHJhbnNpdGlvbl9lYXNlICh2YWx1ZSkgewogICAgdmFyIGlkID0gdGhpcy5faWQ7CiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IHRoaXMuZWFjaChlYXNlQ29uc3RhbnQoaWQsIHZhbHVlKSkgOiBnZXQodGhpcy5ub2RlKCksIGlkKS5lYXNlOwogIH0KCiAgZnVuY3Rpb24gZWFzZVZhcnlpbmcoaWQsIHZhbHVlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIGlmICh0eXBlb2YgdiAhPT0gImZ1bmN0aW9uIikgdGhyb3cgbmV3IEVycm9yKCk7CiAgICAgIHNldCh0aGlzLCBpZCkuZWFzZSA9IHY7CiAgICB9OwogIH0KICBmdW5jdGlvbiB0cmFuc2l0aW9uX2Vhc2VWYXJ5aW5nICh2YWx1ZSkgewogICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gImZ1bmN0aW9uIikgdGhyb3cgbmV3IEVycm9yKCk7CiAgICByZXR1cm4gdGhpcy5lYWNoKGVhc2VWYXJ5aW5nKHRoaXMuX2lkLCB2YWx1ZSkpOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNpdGlvbl9maWx0ZXIgKG1hdGNoKSB7CiAgICBpZiAodHlwZW9mIG1hdGNoICE9PSAiZnVuY3Rpb24iKSBtYXRjaCA9IG1hdGNoZXIobWF0Y2gpOwogICAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gbmV3IEFycmF5KG0pLCBqID0gMDsgaiA8IG07ICsraikgewogICAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgc3ViZ3JvdXAgPSBzdWJncm91cHNbal0gPSBbXSwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHsKICAgICAgICBpZiAoKG5vZGUgPSBncm91cFtpXSkgJiYgbWF0Y2guY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCkpIHsKICAgICAgICAgIHN1Ymdyb3VwLnB1c2gobm9kZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gbmV3IFRyYW5zaXRpb24oc3ViZ3JvdXBzLCB0aGlzLl9wYXJlbnRzLCB0aGlzLl9uYW1lLCB0aGlzLl9pZCk7CiAgfQoKICBmdW5jdGlvbiB0cmFuc2l0aW9uX21lcmdlICh0cmFuc2l0aW9uKSB7CiAgICBpZiAodHJhbnNpdGlvbi5faWQgIT09IHRoaXMuX2lkKSB0aHJvdyBuZXcgRXJyb3IoKTsKICAgIGZvciAodmFyIGdyb3VwczAgPSB0aGlzLl9ncm91cHMsIGdyb3VwczEgPSB0cmFuc2l0aW9uLl9ncm91cHMsIG0wID0gZ3JvdXBzMC5sZW5ndGgsIG0xID0gZ3JvdXBzMS5sZW5ndGgsIG0gPSBNYXRoLm1pbihtMCwgbTEpLCBtZXJnZXMgPSBuZXcgQXJyYXkobTApLCBqID0gMDsgaiA8IG07ICsraikgewogICAgICBmb3IgKHZhciBncm91cDAgPSBncm91cHMwW2pdLCBncm91cDEgPSBncm91cHMxW2pdLCBuID0gZ3JvdXAwLmxlbmd0aCwgbWVyZ2UgPSBtZXJnZXNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7CiAgICAgICAgaWYgKG5vZGUgPSBncm91cDBbaV0gfHwgZ3JvdXAxW2ldKSB7CiAgICAgICAgICBtZXJnZVtpXSA9IG5vZGU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBmb3IgKDsgaiA8IG0wOyArK2opIHsKICAgICAgbWVyZ2VzW2pdID0gZ3JvdXBzMFtqXTsKICAgIH0KICAgIHJldHVybiBuZXcgVHJhbnNpdGlvbihtZXJnZXMsIHRoaXMuX3BhcmVudHMsIHRoaXMuX25hbWUsIHRoaXMuX2lkKTsKICB9CgogIGZ1bmN0aW9uIHN0YXJ0KG5hbWUpIHsKICAgIHJldHVybiAobmFtZSArICIiKS50cmltKCkuc3BsaXQoL158XHMrLykuZXZlcnkoZnVuY3Rpb24gKHQpIHsKICAgICAgdmFyIGkgPSB0LmluZGV4T2YoIi4iKTsKICAgICAgaWYgKGkgPj0gMCkgdCA9IHQuc2xpY2UoMCwgaSk7CiAgICAgIHJldHVybiAhdCB8fCB0ID09PSAic3RhcnQiOwogICAgfSk7CiAgfQogIGZ1bmN0aW9uIG9uRnVuY3Rpb24oaWQsIG5hbWUsIGxpc3RlbmVyKSB7CiAgICB2YXIgb24wLAogICAgICBvbjEsCiAgICAgIHNpdCA9IHN0YXJ0KG5hbWUpID8gaW5pdCA6IHNldDsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBzY2hlZHVsZSA9IHNpdCh0aGlzLCBpZCksCiAgICAgICAgb24gPSBzY2hlZHVsZS5vbjsKCiAgICAgIC8vIElmIHRoaXMgbm9kZSBzaGFyZWQgYSBkaXNwYXRjaCB3aXRoIHRoZSBwcmV2aW91cyBub2RlLAogICAgICAvLyBqdXN0IGFzc2lnbiB0aGUgdXBkYXRlZCBzaGFyZWQgZGlzcGF0Y2ggYW5kIHdl4oCZcmUgZG9uZSEKICAgICAgLy8gT3RoZXJ3aXNlLCBjb3B5LW9uLXdyaXRlLgogICAgICBpZiAob24gIT09IG9uMCkgKG9uMSA9IChvbjAgPSBvbikuY29weSgpKS5vbihuYW1lLCBsaXN0ZW5lcik7CiAgICAgIHNjaGVkdWxlLm9uID0gb24xOwogICAgfTsKICB9CiAgZnVuY3Rpb24gdHJhbnNpdGlvbl9vbiAobmFtZSwgbGlzdGVuZXIpIHsKICAgIHZhciBpZCA9IHRoaXMuX2lkOwogICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPCAyID8gZ2V0KHRoaXMubm9kZSgpLCBpZCkub24ub24obmFtZSkgOiB0aGlzLmVhY2gob25GdW5jdGlvbihpZCwgbmFtZSwgbGlzdGVuZXIpKTsKICB9CgogIGZ1bmN0aW9uIHJlbW92ZUZ1bmN0aW9uKGlkKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlOwogICAgICBmb3IgKHZhciBpIGluIHRoaXMuX190cmFuc2l0aW9uKSBpZiAoK2kgIT09IGlkKSByZXR1cm47CiAgICAgIGlmIChwYXJlbnQpIHBhcmVudC5yZW1vdmVDaGlsZCh0aGlzKTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIHRyYW5zaXRpb25fcmVtb3ZlICgpIHsKICAgIHJldHVybiB0aGlzLm9uKCJlbmQucmVtb3ZlIiwgcmVtb3ZlRnVuY3Rpb24odGhpcy5faWQpKTsKICB9CgogIGZ1bmN0aW9uIHRyYW5zaXRpb25fc2VsZWN0IChzZWxlY3QpIHsKICAgIHZhciBuYW1lID0gdGhpcy5fbmFtZSwKICAgICAgaWQgPSB0aGlzLl9pZDsKICAgIGlmICh0eXBlb2Ygc2VsZWN0ICE9PSAiZnVuY3Rpb24iKSBzZWxlY3QgPSBzZWxlY3RvcihzZWxlY3QpOwogICAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gbmV3IEFycmF5KG0pLCBqID0gMDsgaiA8IG07ICsraikgewogICAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgc3ViZ3JvdXAgPSBzdWJncm91cHNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIHN1Ym5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7CiAgICAgICAgaWYgKChub2RlID0gZ3JvdXBbaV0pICYmIChzdWJub2RlID0gc2VsZWN0LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKSkgewogICAgICAgICAgaWYgKCJfX2RhdGFfXyIgaW4gbm9kZSkgc3Vibm9kZS5fX2RhdGFfXyA9IG5vZGUuX19kYXRhX187CiAgICAgICAgICBzdWJncm91cFtpXSA9IHN1Ym5vZGU7CiAgICAgICAgICBzY2hlZHVsZShzdWJncm91cFtpXSwgbmFtZSwgaWQsIGksIHN1Ymdyb3VwLCBnZXQobm9kZSwgaWQpKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBuZXcgVHJhbnNpdGlvbihzdWJncm91cHMsIHRoaXMuX3BhcmVudHMsIG5hbWUsIGlkKTsKICB9CgogIGZ1bmN0aW9uIHRyYW5zaXRpb25fc2VsZWN0QWxsIChzZWxlY3QpIHsKICAgIHZhciBuYW1lID0gdGhpcy5fbmFtZSwKICAgICAgaWQgPSB0aGlzLl9pZDsKICAgIGlmICh0eXBlb2Ygc2VsZWN0ICE9PSAiZnVuY3Rpb24iKSBzZWxlY3QgPSBzZWxlY3RvckFsbChzZWxlY3QpOwogICAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gW10sIHBhcmVudHMgPSBbXSwgaiA9IDA7IGogPCBtOyArK2opIHsKICAgICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7CiAgICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkgewogICAgICAgICAgZm9yICh2YXIgY2hpbGRyZW4gPSBzZWxlY3QuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCksIGNoaWxkLCBpbmhlcml0ID0gZ2V0KG5vZGUsIGlkKSwgayA9IDAsIGwgPSBjaGlsZHJlbi5sZW5ndGg7IGsgPCBsOyArK2spIHsKICAgICAgICAgICAgaWYgKGNoaWxkID0gY2hpbGRyZW5ba10pIHsKICAgICAgICAgICAgICBzY2hlZHVsZShjaGlsZCwgbmFtZSwgaWQsIGssIGNoaWxkcmVuLCBpbmhlcml0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgc3ViZ3JvdXBzLnB1c2goY2hpbGRyZW4pOwogICAgICAgICAgcGFyZW50cy5wdXNoKG5vZGUpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIG5ldyBUcmFuc2l0aW9uKHN1Ymdyb3VwcywgcGFyZW50cywgbmFtZSwgaWQpOwogIH0KCiAgdmFyIFNlbGVjdGlvbiA9IHNlbGVjdGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3I7CiAgZnVuY3Rpb24gdHJhbnNpdGlvbl9zZWxlY3Rpb24gKCkgewogICAgcmV0dXJuIG5ldyBTZWxlY3Rpb24odGhpcy5fZ3JvdXBzLCB0aGlzLl9wYXJlbnRzKTsKICB9CgogIGZ1bmN0aW9uIHN0eWxlTnVsbChuYW1lLCBpbnRlcnBvbGF0ZSkgewogICAgdmFyIHN0cmluZzAwLCBzdHJpbmcxMCwgaW50ZXJwb2xhdGUwOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHN0cmluZzAgPSBzdHlsZVZhbHVlKHRoaXMsIG5hbWUpLAogICAgICAgIHN0cmluZzEgPSAodGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShuYW1lKSwgc3R5bGVWYWx1ZSh0aGlzLCBuYW1lKSk7CiAgICAgIHJldHVybiBzdHJpbmcwID09PSBzdHJpbmcxID8gbnVsbCA6IHN0cmluZzAgPT09IHN0cmluZzAwICYmIHN0cmluZzEgPT09IHN0cmluZzEwID8gaW50ZXJwb2xhdGUwIDogaW50ZXJwb2xhdGUwID0gaW50ZXJwb2xhdGUoc3RyaW5nMDAgPSBzdHJpbmcwLCBzdHJpbmcxMCA9IHN0cmluZzEpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gc3R5bGVSZW1vdmUobmFtZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShuYW1lKTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIHN0eWxlQ29uc3RhbnQobmFtZSwgaW50ZXJwb2xhdGUsIHZhbHVlMSkgewogICAgdmFyIHN0cmluZzAwLAogICAgICBzdHJpbmcxID0gdmFsdWUxICsgIiIsCiAgICAgIGludGVycG9sYXRlMDsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBzdHJpbmcwID0gc3R5bGVWYWx1ZSh0aGlzLCBuYW1lKTsKICAgICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgPyBpbnRlcnBvbGF0ZTAgOiBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHZhbHVlMSk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBzdHlsZUZ1bmN0aW9uKG5hbWUsIGludGVycG9sYXRlLCB2YWx1ZSkgewogICAgdmFyIHN0cmluZzAwLCBzdHJpbmcxMCwgaW50ZXJwb2xhdGUwOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHN0cmluZzAgPSBzdHlsZVZhbHVlKHRoaXMsIG5hbWUpLAogICAgICAgIHZhbHVlMSA9IHZhbHVlKHRoaXMpLAogICAgICAgIHN0cmluZzEgPSB2YWx1ZTEgKyAiIjsKICAgICAgaWYgKHZhbHVlMSA9PSBudWxsKSBzdHJpbmcxID0gdmFsdWUxID0gKHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkobmFtZSksIHN0eWxlVmFsdWUodGhpcywgbmFtZSkpOwogICAgICByZXR1cm4gc3RyaW5nMCA9PT0gc3RyaW5nMSA/IG51bGwgOiBzdHJpbmcwID09PSBzdHJpbmcwMCAmJiBzdHJpbmcxID09PSBzdHJpbmcxMCA/IGludGVycG9sYXRlMCA6IChzdHJpbmcxMCA9IHN0cmluZzEsIGludGVycG9sYXRlMCA9IGludGVycG9sYXRlKHN0cmluZzAwID0gc3RyaW5nMCwgdmFsdWUxKSk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBzdHlsZU1heWJlUmVtb3ZlKGlkLCBuYW1lKSB7CiAgICB2YXIgb24wLAogICAgICBvbjEsCiAgICAgIGxpc3RlbmVyMCwKICAgICAga2V5ID0gInN0eWxlLiIgKyBuYW1lLAogICAgICBldmVudCA9ICJlbmQuIiArIGtleSwKICAgICAgcmVtb3ZlOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHNjaGVkdWxlID0gc2V0KHRoaXMsIGlkKSwKICAgICAgICBvbiA9IHNjaGVkdWxlLm9uLAogICAgICAgIGxpc3RlbmVyID0gc2NoZWR1bGUudmFsdWVba2V5XSA9PSBudWxsID8gcmVtb3ZlIHx8IChyZW1vdmUgPSBzdHlsZVJlbW92ZShuYW1lKSkgOiB1bmRlZmluZWQ7CgogICAgICAvLyBJZiB0aGlzIG5vZGUgc2hhcmVkIGEgZGlzcGF0Y2ggd2l0aCB0aGUgcHJldmlvdXMgbm9kZSwKICAgICAgLy8ganVzdCBhc3NpZ24gdGhlIHVwZGF0ZWQgc2hhcmVkIGRpc3BhdGNoIGFuZCB3ZeKAmXJlIGRvbmUhCiAgICAgIC8vIE90aGVyd2lzZSwgY29weS1vbi13cml0ZS4KICAgICAgaWYgKG9uICE9PSBvbjAgfHwgbGlzdGVuZXIwICE9PSBsaXN0ZW5lcikgKG9uMSA9IChvbjAgPSBvbikuY29weSgpKS5vbihldmVudCwgbGlzdGVuZXIwID0gbGlzdGVuZXIpOwogICAgICBzY2hlZHVsZS5vbiA9IG9uMTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIHRyYW5zaXRpb25fc3R5bGUgKG5hbWUsIHZhbHVlLCBwcmlvcml0eSkgewogICAgdmFyIGkgPSAobmFtZSArPSAiIikgPT09ICJ0cmFuc2Zvcm0iID8gaW50ZXJwb2xhdGVUcmFuc2Zvcm1Dc3MgOiBpbnRlcnBvbGF0ZTsKICAgIHJldHVybiB2YWx1ZSA9PSBudWxsID8gdGhpcy5zdHlsZVR3ZWVuKG5hbWUsIHN0eWxlTnVsbChuYW1lLCBpKSkub24oImVuZC5zdHlsZS4iICsgbmFtZSwgc3R5bGVSZW1vdmUobmFtZSkpIDogdHlwZW9mIHZhbHVlID09PSAiZnVuY3Rpb24iID8gdGhpcy5zdHlsZVR3ZWVuKG5hbWUsIHN0eWxlRnVuY3Rpb24obmFtZSwgaSwgdHdlZW5WYWx1ZSh0aGlzLCAic3R5bGUuIiArIG5hbWUsIHZhbHVlKSkpLmVhY2goc3R5bGVNYXliZVJlbW92ZSh0aGlzLl9pZCwgbmFtZSkpIDogdGhpcy5zdHlsZVR3ZWVuKG5hbWUsIHN0eWxlQ29uc3RhbnQobmFtZSwgaSwgdmFsdWUpLCBwcmlvcml0eSkub24oImVuZC5zdHlsZS4iICsgbmFtZSwgbnVsbCk7CiAgfQoKICBmdW5jdGlvbiBzdHlsZUludGVycG9sYXRlKG5hbWUsIGksIHByaW9yaXR5KSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKHQpIHsKICAgICAgdGhpcy5zdHlsZS5zZXRQcm9wZXJ0eShuYW1lLCBpLmNhbGwodGhpcywgdCksIHByaW9yaXR5KTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIHN0eWxlVHdlZW4obmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7CiAgICB2YXIgdCwgaTA7CiAgICBmdW5jdGlvbiB0d2VlbigpIHsKICAgICAgdmFyIGkgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICBpZiAoaSAhPT0gaTApIHQgPSAoaTAgPSBpKSAmJiBzdHlsZUludGVycG9sYXRlKG5hbWUsIGksIHByaW9yaXR5KTsKICAgICAgcmV0dXJuIHQ7CiAgICB9CiAgICB0d2Vlbi5fdmFsdWUgPSB2YWx1ZTsKICAgIHJldHVybiB0d2VlbjsKICB9CiAgZnVuY3Rpb24gdHJhbnNpdGlvbl9zdHlsZVR3ZWVuIChuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpIHsKICAgIHZhciBrZXkgPSAic3R5bGUuIiArIChuYW1lICs9ICIiKTsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikgcmV0dXJuIChrZXkgPSB0aGlzLnR3ZWVuKGtleSkpICYmIGtleS5fdmFsdWU7CiAgICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIHRoaXMudHdlZW4oa2V5LCBudWxsKTsKICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICJmdW5jdGlvbiIpIHRocm93IG5ldyBFcnJvcigpOwogICAgcmV0dXJuIHRoaXMudHdlZW4oa2V5LCBzdHlsZVR3ZWVuKG5hbWUsIHZhbHVlLCBwcmlvcml0eSA9PSBudWxsID8gIiIgOiBwcmlvcml0eSkpOwogIH0KCiAgZnVuY3Rpb24gdGV4dENvbnN0YW50KHZhbHVlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB0aGlzLnRleHRDb250ZW50ID0gdmFsdWU7CiAgICB9OwogIH0KICBmdW5jdGlvbiB0ZXh0RnVuY3Rpb24odmFsdWUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB2YWx1ZTEgPSB2YWx1ZSh0aGlzKTsKICAgICAgdGhpcy50ZXh0Q29udGVudCA9IHZhbHVlMSA9PSBudWxsID8gIiIgOiB2YWx1ZTE7CiAgICB9OwogIH0KICBmdW5jdGlvbiB0cmFuc2l0aW9uX3RleHQgKHZhbHVlKSB7CiAgICByZXR1cm4gdGhpcy50d2VlbigidGV4dCIsIHR5cGVvZiB2YWx1ZSA9PT0gImZ1bmN0aW9uIiA/IHRleHRGdW5jdGlvbih0d2VlblZhbHVlKHRoaXMsICJ0ZXh0IiwgdmFsdWUpKSA6IHRleHRDb25zdGFudCh2YWx1ZSA9PSBudWxsID8gIiIgOiB2YWx1ZSArICIiKSk7CiAgfQoKICBmdW5jdGlvbiB0ZXh0SW50ZXJwb2xhdGUoaSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICh0KSB7CiAgICAgIHRoaXMudGV4dENvbnRlbnQgPSBpLmNhbGwodGhpcywgdCk7CiAgICB9OwogIH0KICBmdW5jdGlvbiB0ZXh0VHdlZW4odmFsdWUpIHsKICAgIHZhciB0MCwgaTA7CiAgICBmdW5jdGlvbiB0d2VlbigpIHsKICAgICAgdmFyIGkgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICBpZiAoaSAhPT0gaTApIHQwID0gKGkwID0gaSkgJiYgdGV4dEludGVycG9sYXRlKGkpOwogICAgICByZXR1cm4gdDA7CiAgICB9CiAgICB0d2Vlbi5fdmFsdWUgPSB2YWx1ZTsKICAgIHJldHVybiB0d2VlbjsKICB9CiAgZnVuY3Rpb24gdHJhbnNpdGlvbl90ZXh0VHdlZW4gKHZhbHVlKSB7CiAgICB2YXIga2V5ID0gInRleHQiOwogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAxKSByZXR1cm4gKGtleSA9IHRoaXMudHdlZW4oa2V5KSkgJiYga2V5Ll92YWx1ZTsKICAgIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gdGhpcy50d2VlbihrZXksIG51bGwpOwogICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gImZ1bmN0aW9uIikgdGhyb3cgbmV3IEVycm9yKCk7CiAgICByZXR1cm4gdGhpcy50d2VlbihrZXksIHRleHRUd2Vlbih2YWx1ZSkpOwogIH0KCiAgZnVuY3Rpb24gdHJhbnNpdGlvbl90cmFuc2l0aW9uICgpIHsKICAgIHZhciBuYW1lID0gdGhpcy5fbmFtZSwKICAgICAgaWQwID0gdGhpcy5faWQsCiAgICAgIGlkMSA9IG5ld0lkKCk7CiAgICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBqID0gMDsgaiA8IG07ICsraikgewogICAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHsKICAgICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7CiAgICAgICAgICB2YXIgaW5oZXJpdCA9IGdldChub2RlLCBpZDApOwogICAgICAgICAgc2NoZWR1bGUobm9kZSwgbmFtZSwgaWQxLCBpLCBncm91cCwgewogICAgICAgICAgICB0aW1lOiBpbmhlcml0LnRpbWUgKyBpbmhlcml0LmRlbGF5ICsgaW5oZXJpdC5kdXJhdGlvbiwKICAgICAgICAgICAgZGVsYXk6IDAsCiAgICAgICAgICAgIGR1cmF0aW9uOiBpbmhlcml0LmR1cmF0aW9uLAogICAgICAgICAgICBlYXNlOiBpbmhlcml0LmVhc2UKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIG5ldyBUcmFuc2l0aW9uKGdyb3VwcywgdGhpcy5fcGFyZW50cywgbmFtZSwgaWQxKTsKICB9CgogIGZ1bmN0aW9uIHRyYW5zaXRpb25fZW5kICgpIHsKICAgIHZhciBvbjAsCiAgICAgIG9uMSwKICAgICAgdGhhdCA9IHRoaXMsCiAgICAgIGlkID0gdGhhdC5faWQsCiAgICAgIHNpemUgPSB0aGF0LnNpemUoKTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHZhciBjYW5jZWwgPSB7CiAgICAgICAgICB2YWx1ZTogcmVqZWN0CiAgICAgICAgfSwKICAgICAgICBlbmQgPSB7CiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoLS1zaXplID09PSAwKSByZXNvbHZlKCk7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgdGhhdC5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgc2NoZWR1bGUgPSBzZXQodGhpcywgaWQpLAogICAgICAgICAgb24gPSBzY2hlZHVsZS5vbjsKCiAgICAgICAgLy8gSWYgdGhpcyBub2RlIHNoYXJlZCBhIGRpc3BhdGNoIHdpdGggdGhlIHByZXZpb3VzIG5vZGUsCiAgICAgICAgLy8ganVzdCBhc3NpZ24gdGhlIHVwZGF0ZWQgc2hhcmVkIGRpc3BhdGNoIGFuZCB3ZeKAmXJlIGRvbmUhCiAgICAgICAgLy8gT3RoZXJ3aXNlLCBjb3B5LW9uLXdyaXRlLgogICAgICAgIGlmIChvbiAhPT0gb24wKSB7CiAgICAgICAgICBvbjEgPSAob24wID0gb24pLmNvcHkoKTsKICAgICAgICAgIG9uMS5fLmNhbmNlbC5wdXNoKGNhbmNlbCk7CiAgICAgICAgICBvbjEuXy5pbnRlcnJ1cHQucHVzaChjYW5jZWwpOwogICAgICAgICAgb24xLl8uZW5kLnB1c2goZW5kKTsKICAgICAgICB9CiAgICAgICAgc2NoZWR1bGUub24gPSBvbjE7CiAgICAgIH0pOwoKICAgICAgLy8gVGhlIHNlbGVjdGlvbiB3YXMgZW1wdHksIHJlc29sdmUgZW5kIGltbWVkaWF0ZWx5CiAgICAgIGlmIChzaXplID09PSAwKSByZXNvbHZlKCk7CiAgICB9KTsKICB9CgogIHZhciBpZCA9IDA7CiAgZnVuY3Rpb24gVHJhbnNpdGlvbihncm91cHMsIHBhcmVudHMsIG5hbWUsIGlkKSB7CiAgICB0aGlzLl9ncm91cHMgPSBncm91cHM7CiAgICB0aGlzLl9wYXJlbnRzID0gcGFyZW50czsKICAgIHRoaXMuX25hbWUgPSBuYW1lOwogICAgdGhpcy5faWQgPSBpZDsKICB9CiAgZnVuY3Rpb24gbmV3SWQoKSB7CiAgICByZXR1cm4gKytpZDsKICB9CiAgdmFyIHNlbGVjdGlvbl9wcm90b3R5cGUgPSBzZWxlY3Rpb24ucHJvdG90eXBlOwogIFRyYW5zaXRpb24ucHJvdG90eXBlID0gewogICAgY29uc3RydWN0b3I6IFRyYW5zaXRpb24sCiAgICBzZWxlY3Q6IHRyYW5zaXRpb25fc2VsZWN0LAogICAgc2VsZWN0QWxsOiB0cmFuc2l0aW9uX3NlbGVjdEFsbCwKICAgIHNlbGVjdENoaWxkOiBzZWxlY3Rpb25fcHJvdG90eXBlLnNlbGVjdENoaWxkLAogICAgc2VsZWN0Q2hpbGRyZW46IHNlbGVjdGlvbl9wcm90b3R5cGUuc2VsZWN0Q2hpbGRyZW4sCiAgICBmaWx0ZXI6IHRyYW5zaXRpb25fZmlsdGVyLAogICAgbWVyZ2U6IHRyYW5zaXRpb25fbWVyZ2UsCiAgICBzZWxlY3Rpb246IHRyYW5zaXRpb25fc2VsZWN0aW9uLAogICAgdHJhbnNpdGlvbjogdHJhbnNpdGlvbl90cmFuc2l0aW9uLAogICAgY2FsbDogc2VsZWN0aW9uX3Byb3RvdHlwZS5jYWxsLAogICAgbm9kZXM6IHNlbGVjdGlvbl9wcm90b3R5cGUubm9kZXMsCiAgICBub2RlOiBzZWxlY3Rpb25fcHJvdG90eXBlLm5vZGUsCiAgICBzaXplOiBzZWxlY3Rpb25fcHJvdG90eXBlLnNpemUsCiAgICBlbXB0eTogc2VsZWN0aW9uX3Byb3RvdHlwZS5lbXB0eSwKICAgIGVhY2g6IHNlbGVjdGlvbl9wcm90b3R5cGUuZWFjaCwKICAgIG9uOiB0cmFuc2l0aW9uX29uLAogICAgYXR0cjogdHJhbnNpdGlvbl9hdHRyLAogICAgYXR0clR3ZWVuOiB0cmFuc2l0aW9uX2F0dHJUd2VlbiwKICAgIHN0eWxlOiB0cmFuc2l0aW9uX3N0eWxlLAogICAgc3R5bGVUd2VlbjogdHJhbnNpdGlvbl9zdHlsZVR3ZWVuLAogICAgdGV4dDogdHJhbnNpdGlvbl90ZXh0LAogICAgdGV4dFR3ZWVuOiB0cmFuc2l0aW9uX3RleHRUd2VlbiwKICAgIHJlbW92ZTogdHJhbnNpdGlvbl9yZW1vdmUsCiAgICB0d2VlbjogdHJhbnNpdGlvbl90d2VlbiwKICAgIGRlbGF5OiB0cmFuc2l0aW9uX2RlbGF5LAogICAgZHVyYXRpb246IHRyYW5zaXRpb25fZHVyYXRpb24sCiAgICBlYXNlOiB0cmFuc2l0aW9uX2Vhc2UsCiAgICBlYXNlVmFyeWluZzogdHJhbnNpdGlvbl9lYXNlVmFyeWluZywKICAgIGVuZDogdHJhbnNpdGlvbl9lbmQsCiAgICBbU3ltYm9sLml0ZXJhdG9yXTogc2VsZWN0aW9uX3Byb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdCiAgfTsKCiAgZnVuY3Rpb24gY3ViaWNJbk91dCh0KSB7CiAgICByZXR1cm4gKCh0ICo9IDIpIDw9IDEgPyB0ICogdCAqIHQgOiAodCAtPSAyKSAqIHQgKiB0ICsgMikgLyAyOwogIH0KCiAgdmFyIGRlZmF1bHRUaW1pbmcgPSB7CiAgICB0aW1lOiBudWxsLAogICAgLy8gU2V0IG9uIHVzZS4KICAgIGRlbGF5OiAwLAogICAgZHVyYXRpb246IDI1MCwKICAgIGVhc2U6IGN1YmljSW5PdXQKICB9OwogIGZ1bmN0aW9uIGluaGVyaXQobm9kZSwgaWQpIHsKICAgIHZhciB0aW1pbmc7CiAgICB3aGlsZSAoISh0aW1pbmcgPSBub2RlLl9fdHJhbnNpdGlvbikgfHwgISh0aW1pbmcgPSB0aW1pbmdbaWRdKSkgewogICAgICBpZiAoIShub2RlID0gbm9kZS5wYXJlbnROb2RlKSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgdHJhbnNpdGlvbiAke2lkfSBub3QgZm91bmRgKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHRpbWluZzsKICB9CiAgZnVuY3Rpb24gc2VsZWN0aW9uX3RyYW5zaXRpb24gKG5hbWUpIHsKICAgIHZhciBpZCwgdGltaW5nOwogICAgaWYgKG5hbWUgaW5zdGFuY2VvZiBUcmFuc2l0aW9uKSB7CiAgICAgIGlkID0gbmFtZS5faWQsIG5hbWUgPSBuYW1lLl9uYW1lOwogICAgfSBlbHNlIHsKICAgICAgaWQgPSBuZXdJZCgpLCAodGltaW5nID0gZGVmYXVsdFRpbWluZykudGltZSA9IG5vdygpLCBuYW1lID0gbmFtZSA9PSBudWxsID8gbnVsbCA6IG5hbWUgKyAiIjsKICAgIH0KICAgIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIGogPSAwOyBqIDwgbTsgKytqKSB7CiAgICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBuID0gZ3JvdXAubGVuZ3RoLCBub2RlLCBpID0gMDsgaSA8IG47ICsraSkgewogICAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHsKICAgICAgICAgIHNjaGVkdWxlKG5vZGUsIG5hbWUsIGlkLCBpLCBncm91cCwgdGltaW5nIHx8IGluaGVyaXQobm9kZSwgaWQpKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBuZXcgVHJhbnNpdGlvbihncm91cHMsIHRoaXMuX3BhcmVudHMsIG5hbWUsIGlkKTsKICB9CgogIHNlbGVjdGlvbi5wcm90b3R5cGUuaW50ZXJydXB0ID0gc2VsZWN0aW9uX2ludGVycnVwdDsKICBzZWxlY3Rpb24ucHJvdG90eXBlLnRyYW5zaXRpb24gPSBzZWxlY3Rpb25fdHJhbnNpdGlvbjsKCiAgZnVuY3Rpb24gVHJhbnNmb3JtKGssIHgsIHkpIHsKICAgIHRoaXMuayA9IGs7CiAgICB0aGlzLnggPSB4OwogICAgdGhpcy55ID0geTsKICB9CiAgVHJhbnNmb3JtLnByb3RvdHlwZSA9IHsKICAgIGNvbnN0cnVjdG9yOiBUcmFuc2Zvcm0sCiAgICBzY2FsZTogZnVuY3Rpb24gKGspIHsKICAgICAgcmV0dXJuIGsgPT09IDEgPyB0aGlzIDogbmV3IFRyYW5zZm9ybSh0aGlzLmsgKiBrLCB0aGlzLngsIHRoaXMueSk7CiAgICB9LAogICAgdHJhbnNsYXRlOiBmdW5jdGlvbiAoeCwgeSkgewogICAgICByZXR1cm4geCA9PT0gMCAmIHkgPT09IDAgPyB0aGlzIDogbmV3IFRyYW5zZm9ybSh0aGlzLmssIHRoaXMueCArIHRoaXMuayAqIHgsIHRoaXMueSArIHRoaXMuayAqIHkpOwogICAgfSwKICAgIGFwcGx5OiBmdW5jdGlvbiAocG9pbnQpIHsKICAgICAgcmV0dXJuIFtwb2ludFswXSAqIHRoaXMuayArIHRoaXMueCwgcG9pbnRbMV0gKiB0aGlzLmsgKyB0aGlzLnldOwogICAgfSwKICAgIGFwcGx5WDogZnVuY3Rpb24gKHgpIHsKICAgICAgcmV0dXJuIHggKiB0aGlzLmsgKyB0aGlzLng7CiAgICB9LAogICAgYXBwbHlZOiBmdW5jdGlvbiAoeSkgewogICAgICByZXR1cm4geSAqIHRoaXMuayArIHRoaXMueTsKICAgIH0sCiAgICBpbnZlcnQ6IGZ1bmN0aW9uIChsb2NhdGlvbikgewogICAgICByZXR1cm4gWyhsb2NhdGlvblswXSAtIHRoaXMueCkgLyB0aGlzLmssIChsb2NhdGlvblsxXSAtIHRoaXMueSkgLyB0aGlzLmtdOwogICAgfSwKICAgIGludmVydFg6IGZ1bmN0aW9uICh4KSB7CiAgICAgIHJldHVybiAoeCAtIHRoaXMueCkgLyB0aGlzLms7CiAgICB9LAogICAgaW52ZXJ0WTogZnVuY3Rpb24gKHkpIHsKICAgICAgcmV0dXJuICh5IC0gdGhpcy55KSAvIHRoaXMuazsKICAgIH0sCiAgICByZXNjYWxlWDogZnVuY3Rpb24gKHgpIHsKICAgICAgcmV0dXJuIHguY29weSgpLmRvbWFpbih4LnJhbmdlKCkubWFwKHRoaXMuaW52ZXJ0WCwgdGhpcykubWFwKHguaW52ZXJ0LCB4KSk7CiAgICB9LAogICAgcmVzY2FsZVk6IGZ1bmN0aW9uICh5KSB7CiAgICAgIHJldHVybiB5LmNvcHkoKS5kb21haW4oeS5yYW5nZSgpLm1hcCh0aGlzLmludmVydFksIHRoaXMpLm1hcCh5LmludmVydCwgeSkpOwogICAgfSwKICAgIHRvU3RyaW5nOiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAidHJhbnNsYXRlKCIgKyB0aGlzLnggKyAiLCIgKyB0aGlzLnkgKyAiKSBzY2FsZSgiICsgdGhpcy5rICsgIikiOwogICAgfQogIH07CiAgVHJhbnNmb3JtLnByb3RvdHlwZTsKCiAgLyoKICAgIEhURE1hdGggU3RhdGljIENsYXNzIC0gTm90IGludGVuZGVkIGZvciBpbnN0YW50aWF0aW9uIQoKICAgIE1vZGVsIHBhcmFtZXRlcnM6CiAgICAgIGsgPSBkaXNjb3VudCBmYWN0b3IgKDAsIEluZmluaXR5KQoKICAgIEJlaGF2aW9yYWwgdmFyaWFibGVzOgogICAgICBBID0gYW1vdW50CiAgICAgIEQgPSBkZWxheQogICAgICBWID0gc3ViamVjdGl2ZSB2YWx1ZQoKICAgIEVxdWF0aW9uczoKICAgICAgViA9IEEgLyAoMSArIGtEKQogICAgICBrID0gKEEgLSBWKSAvIChWRCkKICAqLwogIGNsYXNzIEhURE1hdGggewogICAgc3RhdGljIGsgPSB7CiAgICAgIERFRkFVTFQ6IDAuMDUsCiAgICAgIE1JTjogMCwKICAgICAgTUFYOiAxMDAsCiAgICAgIFNURVA6IDAuMDAxLAogICAgICBKVU1QOiAwLjAxCiAgICB9OwogICAgc3RhdGljIGFkazJ2KGEsIGQsIGspIHsKICAgICAgcmV0dXJuIGEgLyAoMSArIGsgKiBkKTsKICAgIH0KICAgIHN0YXRpYyBhZHYyayhhLCBkLCB2KSB7CiAgICAgIHJldHVybiAoYSAtIHYpIC8gKHYgKiBkKTsKICAgIH0KICB9CgogIC8vIEludGVybmFsIGRlcGVuZGVuY2llcwoKICAvKiBlc2xpbnQgbm8tcmVzdHJpY3RlZC1nbG9iYWxzOiBbIm9mZiIsICJzZWxmIl0gKi8KCiAgc2VsZi5vbm1lc3NhZ2UgPSBldmVudCA9PiB7CiAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgIGs6IHsKICAgICAgICB0eXBlOiAncmVhbCcsCiAgICAgICAgbG93ZXI6IEhURE1hdGguay5NSU4sCiAgICAgICAgdXBwZXI6IEhURE1hdGguay5NQVgKICAgICAgfSwKICAgICAgbHVjZTogewogICAgICAgIHR5cGU6ICdyZWFsJywKICAgICAgICBsb3dlcjogMCwKICAgICAgICB1cHBlcjogMTAwCiAgICAgIH0KICAgIH07CiAgICBjb25zdCBsb2dQb3N0ID0gKHN0YXRlLCBkYXRhKSA9PiB7CiAgICAgIGxldCBscCA9IDA7CgogICAgICAvLyBQcmlvcnMKICAgICAgY29uc3Qga01lYW4gPSAyOwogICAgICBjb25zdCBrU2hhcGUgPSAzOwogICAgICBscCArPSBkaXN0cmlidXRpb25zRXhwb3J0cy5nYW1tYShzdGF0ZS5rLCBrU2hhcGUsIGtTaGFwZSAvIGtNZWFuKTsKICAgICAgLy8gbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLnVuaWYoc3RhdGUuaywgMCwgMTAwKTsKCiAgICAgIGNvbnN0IGx1Y2VNZWFuID0gMjsKICAgICAgY29uc3QgbHVjZVNoYXBlID0gMzsKICAgICAgbHAgKz0gZGlzdHJpYnV0aW9uc0V4cG9ydHMuZ2FtbWEoc3RhdGUubHVjZSwgbHVjZVNoYXBlLCBsdWNlU2hhcGUgLyBsdWNlTWVhbik7CiAgICAgIC8vIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy51bmlmKHN0YXRlLmx1Y2UsIDAsIDEwMCk7CgogICAgICAvLyBMaWtlbGlob29kCiAgICAgIGRhdGEuZm9yRWFjaChjaG9pY2UgPT4gewogICAgICAgIC8vIFZhbHVlcwogICAgICAgIGNvbnN0IHZzID0gSFRETWF0aC5hZGsydihjaG9pY2UuYXMsIGNob2ljZS5kcywgc3RhdGUuayk7CiAgICAgICAgY29uc3QgdmwgPSBIVERNYXRoLmFkazJ2KGNob2ljZS5hbCwgY2hvaWNlLmRsLCBzdGF0ZS5rKTsKCiAgICAgICAgLy8gQ2hvaWNlIG9mIHNvb25lciBvciBsYXRlciBpcyBzYW1wbGVkIGZyb20gYSBCZXJub3VsbGkgZGlzdHJpYnV0aW9uCiAgICAgICAgLy8gTHVjZSBjaG9pY2UgcnVsZSBpcyB1c2VkIHRvIGNvbXB1dGUgcHJvYmFiaWxpdHkgb2Ygd2FpdGluZyEgKDAgPSBzb29uZXIsIDEgPSBsYXRlcikKICAgICAgICBjb25zdCBiaW52YWwgPSAxIC8gKDEgKyBNYXRoLmV4cChzdGF0ZS5sdWNlICogKHZzIC0gdmwpKSk7CgogICAgICAgIC8vIEFjdHVhbCByZXNwb25zZQogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gY2hvaWNlLnJlc3BvbnNlID09PSAnZmlyc3QnID8gMCA6IDE7CiAgICAgICAgbHAgKz0gZGlzdHJpYnV0aW9uc0V4cG9ydHMuYmVybihyZXNwb25zZSwgYmludmFsKTsKICAgICAgfSk7CiAgICAgIHJldHVybiBscDsKICAgIH07CgogICAgLy8gSW5pdGlhbGl6aW5nIHRoZSBzYW1wbGVyCiAgICBjb25zdCBzYW1wbGVyID0gbmV3IG1jbWNFeHBvcnRzLkFtd2dTYW1wbGVyKHBhcmFtcywgbG9nUG9zdCwgZXZlbnQuZGF0YSk7CiAgICAvLyBCdXJuaW5nIHNvbWUgc2FtcGxlcyB0byB0aGUgTUNNQyBnb2RzIGFuZCBzYW1wbGluZyA1MDAwIGRyYXdzCiAgICBzYW1wbGVyLmJ1cm4oMTAwMCk7CiAgICBjb25zdCBzYW1wbGVzID0gc2FtcGxlci5zYW1wbGUoNTAwMCk7CgogICAgLy8gRXh0cmFjdCBzdW1tYXJ5IHN0YXRzCiAgICBjb25zdCByZXN1bHRzID0gewogICAgICBrOiBtZWRpYW4oc2FtcGxlcy5rKSwKICAgICAgbHVjZTogbWVkaWFuKHNhbXBsZXMubHVjZSkKICAgIH07CiAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgcmVzdWx0czogcmVzdWx0cywKICAgICAgc2FtcGxlczogc2FtcGxlcwogICAgfSk7CiAgfTsKCn0pKCk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWh0ZC1maXQtd29ya2VyLmpzLm1hcAoK","data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaHRkLWZpdC13b3JrZXIuanMiLCJzb3VyY2VzIjpbIi4uLy4uL25vZGVfbW9kdWxlcy9iYXllcy5qcy9kaXN0cmlidXRpb25zLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2JheWVzLmpzL21jbWMuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL2FzY2VuZGluZy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1hcnJheS9zcmMvbnVtYmVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9zb3J0LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9tYXguanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL21pbi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1hcnJheS9zcmMvcXVpY2tzZWxlY3QuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL3F1YW50aWxlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9tZWRpYW4uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtZGlzcGF0Y2gvc3JjL2Rpc3BhdGNoLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvbmFtZXNwYWNlcy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL25hbWVzcGFjZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL2NyZWF0b3IuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rvci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9zZWxlY3QuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9hcnJheS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdG9yQWxsLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NlbGVjdEFsbC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL21hdGNoZXIuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vc2VsZWN0Q2hpbGQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vc2VsZWN0Q2hpbGRyZW4uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZmlsdGVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NwYXJzZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9lbnRlci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL2NvbnN0YW50LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2RhdGEuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZXhpdC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9qb2luLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL21lcmdlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL29yZGVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NvcnQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vY2FsbC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9ub2Rlcy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9ub2RlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NpemUuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZW1wdHkuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZWFjaC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9hdHRyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvd2luZG93LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3N0eWxlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3Byb3BlcnR5LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2NsYXNzZWQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vdGV4dC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9odG1sLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3JhaXNlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2xvd2VyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2FwcGVuZC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9pbnNlcnQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vcmVtb3ZlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2Nsb25lLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2RhdHVtLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL29uLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2Rpc3BhdGNoLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2l0ZXJhdG9yLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2luZGV4LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWNvbG9yL3NyYy9kZWZpbmUuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtY29sb3Ivc3JjL2NvbG9yLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9jb25zdGFudC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvY29sb3IuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL3JnYi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvbnVtYmVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9zdHJpbmcuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL3RyYW5zZm9ybS9kZWNvbXBvc2UuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL3RyYW5zZm9ybS9wYXJzZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvdHJhbnNmb3JtL2luZGV4LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRpbWVyL3NyYy90aW1lci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10aW1lci9zcmMvdGltZW91dC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3NjaGVkdWxlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL2ludGVycnVwdC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy9zZWxlY3Rpb24vaW50ZXJydXB0LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vdHdlZW4uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9pbnRlcnBvbGF0ZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL2F0dHIuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9hdHRyVHdlZW4uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9kZWxheS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL2R1cmF0aW9uLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vZWFzZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL2Vhc2VWYXJ5aW5nLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vZmlsdGVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vbWVyZ2UuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9vbi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3JlbW92ZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3NlbGVjdC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3NlbGVjdEFsbC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3NlbGVjdGlvbi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3N0eWxlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vc3R5bGVUd2Vlbi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3RleHQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi90ZXh0VHdlZW4uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi90cmFuc2l0aW9uLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vZW5kLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vaW5kZXguanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtZWFzZS9zcmMvY3ViaWMuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvc2VsZWN0aW9uL3RyYW5zaXRpb24uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvc2VsZWN0aW9uL2luZGV4LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXpvb20vc3JjL3RyYW5zZm9ybS5qcyIsIi4uLy4uL2xpYnJhcmllcy9kaXNjb3VudGFibGUtbWF0aC9zcmMvaHRkLW1hdGguanMiLCIuLi8uLi9saWJyYXJpZXMvZGlzY291bnRhYmxlLW1hdGgvc3JjL2luZGV4LmpzIiwiLi4vLi4vbGlicmFyaWVzL2Rpc2NvdW50YWJsZS1lbGVtZW50cy9zcmMvY29tcG9uZW50cy9odGQtZml0LXdvcmtlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuXG4vLyBBIG51bWJlciBvZiBsb2cgcHJvYmFiaWxpdHkgZGVuc2l0eSBmdW5jdGlvbnMgKFBERikuIE5hbWluZyBhbmQgcGFyYW1ldGVyaXphdGlvblxuLy8gc2hvdWxkIG1hdGNoIFIncywgZXhjZXB0IGZvciB0aGF0IGFsbCBmdW5jdGlvbnMgcmVzaWRlIGluIGFuIGxkIG9iamVjdCAoXG4vLyBhcyBpbiBcImxvZyBkZW5zaXR5XCIpLCBzbyB0byBnZXQgYSBub3JtYWwgbG9nIGRlbnNpdHkgeW91IHdvdWxkIHdyaXRlXG4vLyBsZC5ub3JtKC4uLikuXG4vLyBNb3N0IG9mIHRoZSBjb2RlIGJlbG93IGlzIGRpcmVjdGx5IHRha2VuIGZyb20gdGhlIGdyZWF0IEpzdGF0IHByb2plY3Rcbi8vIChodHRwczovL2dpdGh1Yi5jb20vanN0YXQvKSB3aGljaCBpbmNsdWRlcyBQREYgZm9yIG1hbnkgY29tbW9uIHByb2JhYmlsaXR5XG4vLyBkaXN0cmlidXRpb25zLiBXaGF0IEkgaGF2ZSBkb25lIGlzIG9ubHkgdG8gY29udmVydCB0aGVzZSB0byBsb2cgUERGcy5cblxuLypcbk9yaWdpbmFsIHdvcmsgQ29weXJpZ2h0IChjKSAyMDEzIGpTdGF0XG5Nb2RpZmllZCB3b3JrIENvcHlyaWdodCAoYykgMjAxNSBSYXNtdXMgQsOlw6V0aCBcblxuUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxub2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xudG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG5mdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXG5UaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbklNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG5BVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG5MSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuVEhFIFNPRlRXQVJFLlxuXG4qL1xuXG5cbi8vIFRoaXMgYm9pbGVyIHBsYXRlIGNvZGUgaGVyZSBpcyB0YWtlbiBmcm9tOlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3VtZGpzL3VtZC9ibG9iL21hc3Rlci90ZW1wbGF0ZXMvcmV0dXJuRXhwb3J0cy5qc1xuLy8gSXQgc2hvdWxkIG1ha2Ugc2h1cmUgdGhhdCBtb2R1bGUgY2FuIGJlIGltcG9ydGVkIGJvdGggaW4gdGhlIGJyb3dzZXIsXG4vLyBOb2RlLCBhbmQgYnkgdXNpbmcgdGhlIEFzeW5jaHJvbm91cyBNb2R1bGUgRGVmaW5pdGlvbiBzdGFuZGFyZC5cbi8vIElmIHRoaXMgbW9kdWxlIGlzIGxvYWRlZCBpbiB0aGUgYnJvd3NlciBpdCB3aWxsIGNyZWF0ZWQgdGhlIGdsb2JhbFxuLy8gb2JqZWN0IGxkIC5cbihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgICAgICBkZWZpbmUoW10sIGZhY3RvcnkpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0XG4gICAgICAgIC8vIG9ubHkgQ29tbW9uSlMtbGlrZSBlbnZpcm9ubWVudHMgdGhhdCBzdXBwb3J0IG1vZHVsZS5leHBvcnRzLFxuICAgICAgICAvLyBsaWtlIE5vZGUuXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpXG4gICAgICAgIHJvb3QubGQgPSBmYWN0b3J5KCk7XG4gIH1cbn0odGhpcywgZnVuY3Rpb24oKSB7XG4gIC8vIE9iamVjdCB0byBob2xkIHRoZSBmdW5jdGlvbnMgdG8gYmUgZXhwb3J0ZWQuXG4gIHZhciBsZCAgPSB7fTtcbiAgXG4gIC8vLy8vLy8vLy8gSGVscGVyIGZ1bmN0aW9ucyAvLy8vLy8vLy8vXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIFxuICB2YXIgbGdhbW1hID0gZnVuY3Rpb24oeCkge1xuICAgIHZhciBqID0gMDtcbiAgICB2YXIgY29mID0gW1xuICAgICAgNzYuMTgwMDkxNzI5NDcxNDYsIC04Ni41MDUzMjAzMjk0MTY3NywgMjQuMDE0MDk4MjQwODMwOTEsXG4gICAgICAtMS4yMzE3Mzk1NzI0NTAxNTUsIDAuMTIwODY1MDk3Mzg2NjE3OWUtMiwgLTAuNTM5NTIzOTM4NDk1M2UtNVxuICAgIF07XG4gICAgdmFyIHNlciA9IDEuMDAwMDAwMDAwMTkwMDE1O1xuICAgIHZhciB4eCwgeSwgdG1wO1xuICAgIHRtcCA9ICh5ID0geHggPSB4KSArIDUuNTtcbiAgICB0bXAgLT0gKHh4ICsgMC41KSAqIGxvZyh0bXApO1xuICAgIGZvciAoOyBqIDwgNjsgaisrKVxuICAgICAgc2VyICs9IGNvZltqXSAvICsreTtcbiAgICByZXR1cm4gbG9nKDIuNTA2NjI4Mjc0NjMxMDAwNSAqIHNlciAvIHh4KSAtIHRtcDtcbiAgfTtcbiAgbGQubGdhbW1hID0gbGdhbW1hO1xuICBcbiAgdmFyIGxmYWN0b3JpYWwgPSBmdW5jdGlvbihuKSB7XG4gICAgcmV0dXJuIG4gPCAwID8gTmFOIDogbGdhbW1hKG4gKyAxKTtcbiAgfTtcbiAgbGQubGZhY3RvcmlhbCA9IGxmYWN0b3JpYWw7XG4gIFxuICB2YXIgbGNob29zZSA9IGZ1bmN0aW9uKG4sIGspe1xuICAgIHJldHVybiBsZmFjdG9yaWFsKG4pIC0gbGZhY3RvcmlhbChrKSAtIGxmYWN0b3JpYWwobiAtIGspO1xuICB9O1xuICBsZC5sY2hvb3NlID0gbGNob29zZTtcbiAgXG4gIHZhciBsYmV0YSA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gbGdhbW1hKGEpICsgbGdhbW1hKGIpIC0gbGdhbW1hKGEgKyBiKTtcbiAgfTtcbiAgbGQubGJldGEgPSBsYmV0YTtcbiAgXG4gIHZhciBsb2cgID0gTWF0aC5sb2c7XG4gIHZhciBleHAgID0gTWF0aC5leHA7XG4gIHZhciBhYnMgID0gTWF0aC5hYnM7XG4gIHZhciBwb3cgID0gTWF0aC5wb3c7XG4gIHZhciBzcXJ0ID0gTWF0aC5zcXJ0O1xuICB2YXIgcGkgICA9IE1hdGguUEk7XG4gIFxuICAvLy8vLy8vLy8vIENvbnRpbm91cyBkaXN0cmlidXRpb25zIC8vLy8vLy8vLy9cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIFxuICBsZC5iZXRhID0gZnVuY3Rpb24oeCwgc2hhcGUxLCBzaGFwZTIpIHtcbiAgICBpZiAoeCA+IDEgfHwgeCA8IDApIHtcbiAgICAgICAgcmV0dXJuIC1JbmZpbml0eTtcbiAgICB9XG4gICAgaWYoc2hhcGUxID09PSAxICYmIHNoYXBlMiA9PT0gMSkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAoc2hhcGUxIC0gMSkgKiBsb2coeCkgKyAoc2hhcGUyIC0gMSkgKiBsb2coMSAtIHgpIC0gbGJldGEoc2hhcGUxLCBzaGFwZTIpOyAgXG4gICAgfVxuICB9O1xuICBcbiAgbGQuY2F1Y2h5ID0gZnVuY3Rpb24oeCwgbG9jYXRpb24sIHNjYWxlKSB7XG4gICAgcmV0dXJuIGxvZyhzY2FsZSkgLSBsb2cocG93KHggLSBsb2NhdGlvbiwgMikgKyBwb3coc2NhbGUsIDIpKSAgLSBsb2cocGkpO1xuICB9O1xuICBcbiAgbGQubm9ybSA9IGZ1bmN0aW9uKHgsIG1lYW4sIHNkKSB7XG4gICAgICByZXR1cm4gLTAuNSAqIGxvZygyICogcGkpIC1sb2coc2QpIC0gcG93KHggLSBtZWFuLCAyKSAvICgyICogc2QgKiBzZCk7XG4gIH07XG5cbiAgLy8gQSBiaXZhcmlhdGUgTm9ybWFsIGRpc3RyaWJ1dGlvbiBwYXJhbWV0ZXJpemVkIGJ5IGFycmF5cyBvZiB0d28gbWVhbnMgYW5kIFNEcywgYW5kIFxuICAvLyB0aGUgY29ycmVsYXRpb24uXG4gIGxkLmJpdmFybm9ybSA9IGZ1bmN0aW9uKHgsIG1lYW4sIHNkLCBjb3JyKSB7XG4gICAgdmFyIHogPSBwb3coeFswXSAtIG1lYW5bMF0sIDIpIC8gcG93KHNkWzBdLCAyKSArXG4gICAgICAgICAgICBwb3coeFsxXSAtIG1lYW5bMV0sIDIpIC8gcG93KHNkWzFdLCAyKSAtIFxuICAgICAgICAgICAgKDIgKiBjb3JyICogKHhbMF0gLSBtZWFuWzBdKSAqICh4WzFdIC0gbWVhblsxXSkpIC8gKHNkWzBdICogc2RbMV0pO1xuICAgIHZhciBub3JtYWxpemluZ19mYWN0b3IgPSAtKCBsb2coMikgKyBsb2cocGkpICsgbG9nKHNkWzBdKSArIGxvZyhzZFsxXSkgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMC41ICogbG9nKDEgLSBwb3coY29yciwgMikpICk7IFxuICAgIHZhciBiaXZhcl9sb2dfZGVucyA9IG5vcm1hbGl6aW5nX2ZhY3RvciAtIHogLyAoMiAqICgxIC0gcG93KGNvcnIsIDIpICkgKTsgXG4gICAgcmV0dXJuIGJpdmFyX2xvZ19kZW5zO1xuICB9O1xuICBcblxuICBsZC5sYXBsYWNlID0gZnVuY3Rpb24oeCwgbG9jYXRpb24sIHNjYWxlKSB7XG4gICAgcmV0dXJuICgtYWJzKHggLSBsb2NhdGlvbikvc2NhbGUpIC0gbG9nKDIgKiBzY2FsZSk7XG4gIH07XG4gIFxuICBsZC5kZXhwID0gbGQubGFwbGFjZTtcbiAgXG4gIGxkLmdhbW1hID0gZnVuY3Rpb24oeCwgc2hhcGUsIHJhdGUpIHtcbiAgICB2YXIgc2NhbGUgPSAxIC8gcmF0ZTtcbiAgICBpZiAoeCA8IDApIHtcbiAgICAgIHJldHVybiAtSW5maW5pdHk7XG4gICAgfVxuICAgIGlmKCh4ID09PSAwICYmIHNoYXBlID09PSAxKSApIHtcbiAgICAgIHJldHVybiAtbG9nKHNjYWxlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIChzaGFwZSAtIDEpICogbG9nKHgpIC0geCAvIHNjYWxlIC0gbGdhbW1hKHNoYXBlKSAtIHNoYXBlICogbG9nKHNjYWxlKTtcbiAgICB9XG4gIH07XG4gIFxuICBsZC5pbnZnYW1tYSA9IGZ1bmN0aW9uKHgsIHNoYXBlLCBzY2FsZSkge1xuICAgICAgaWYgKHggPD0gMCkge1xuICAgICAgICByZXR1cm4gLUluZmluaXR5O1xuICAgICAgfVxuICAgICAgcmV0dXJuIC0oc2hhcGUgKyAxKSAqIGxvZyh4KSAtIHNjYWxlIC8geCAtIGxnYW1tYShzaGFwZSkgKyBzaGFwZSAqIGxvZyhzY2FsZSk7XG4gICAgfTtcbiAgXG4gIGxkLmxub3JtID0gIGZ1bmN0aW9uKHgsIG1lYW5sb2csIHNkbG9nKSB7XG4gICAgaWYgKHggPD0gMCkge1xuICAgICAgcmV0dXJuIC1JbmZpbml0eTtcbiAgICB9XG4gICAgcmV0dXJuIC1sb2coeCkgLSAwLjUgKiBsb2coMiAqIHBpKSAtIGxvZyhzZGxvZykgLSBcbiAgICAgICAgICAgIHBvdyhsb2coeCkgLSBtZWFubG9nLCAyKSAvICgyICogc2Rsb2cgKiBzZGxvZyk7XG4gIH07XG4gIFxuICBsZC5wYXJldG8gPSBmdW5jdGlvbih4LCBzY2FsZSwgc2hhcGUpIHtcbiAgICBpZiAoeCA8IHNjYWxlKSB7XG4gICAgICByZXR1cm4gLUluZmluaXR5O1xuICAgIH1cbiAgICByZXR1cm4gbG9nKHNoYXBlKSArIHNoYXBlICogbG9nKHNjYWxlKSAtIChzaGFwZSArIDEpICogbG9nKHgpO1xuICB9O1xuICBcbiAgbGQudCAgPSAgZnVuY3Rpb24oeCwgbG9jYXRpb24sIHNjYWxlLCBkZikge1xuICAgIGRmID0gZGYgPiAxZTEwMCA/IDFlMTAwIDogZGY7XG4gICAgcmV0dXJuIGxnYW1tYSgoZGYgKyAxKS8yKSAtIGxnYW1tYShkZi8yKSAtIGxvZyhzcXJ0KHBpICogZGYpICogc2NhbGUpICtcbiAgICAgICAgICAgbG9nKHBvdygxICsgKDEvZGYpICogcG93KCh4IC0gbG9jYXRpb24pL3NjYWxlLCAyKSwgLShkZiArIDEpLzIpKTtcbiAgfTtcbiAgXG4gIC8vIFRoaXMgaXMgYSBkaXJlY3QgamF2YXNjcmlwdCB0cmFuc2xhdGlvbiBvZiB0aGUgUiBjb2RlIHVzZWQgdG8gZXZhbHVhdGVcbiAgLy8gdGhlIGxvZyBkZW5zaXR5IG9mIGEgd2VpYnVsbCBkaXN0cmlidXRpb246IFxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vd2NoL3Itc291cmNlL2Jsb2IvYjE1NmUzYTcxMTk2N2Y1ODEzMWUyM2MxYjFkYzFlYTkwZTJmMGM0My9zcmMvbm1hdGgvZHdlaWJ1bGwuY1xuICBsZC53ZWlidWxsID0gZnVuY3Rpb24oeCwgc2hhcGUsIHNjYWxlKSB7XG4gICAgaWYgKHggPCAwKSByZXR1cm4gLUluZmluaXR5O1xuICAgIGlmKHggPT09IDAgJiYgc2hhcGUgPCAxKSByZXR1cm4gSW5maW5pdHk7XG4gICAgdmFyIHRtcDEgPSBwb3coeCAvIHNjYWxlLCBzaGFwZSAtIDEpO1xuICAgIHZhciB0bXAyID0gdG1wMSAqICh4IC8gc2NhbGUpO1xuXHQgIHJldHVybiAtdG1wMiArIGxvZyhzaGFwZSAqIHRtcDEgLyBzY2FsZSk7XG4gIH07XG4gIFxuICAvLyBUaGlzIGlzIGEgZGlyZWN0IGphdmFzY3JpcHQgdHJhbnNsYXRpb24gb2YgdGhlIFIgY29kZSB1c2VkIHRvIGV2YWx1YXRlXG4gIC8vIHRoZSBsb2cgZGVuc2l0eSBvZiBhIGxvZ2lzdGljIGRpc3RyaWJ1dGlvbjogXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS93Y2gvci1zb3VyY2UvYmxvYi9iMTU2ZTNhNzExOTY3ZjU4MTMxZTIzYzFiMWRjMWVhOTBlMmYwYzQzL3NyYy9ubWF0aC9kbG9naXMuY1xuICBsZC5sb2dpcyA9IGZ1bmN0aW9uKHgsIGxvY2F0aW9uLCBzY2FsZSkge1xuICAgIHggPSBhYnMoKHggLSBsb2NhdGlvbikgLyBzY2FsZSk7XG4gICAgdmFyIGUgPSBleHAoLXgpO1xuICAgIHZhciBmID0gMS4wICsgZTtcbiAgICByZXR1cm4gLSh4ICsgbG9nKHNjYWxlICogZiAqIGYpKTsgICAgXG4gIH07XG5cbiAgbGQuZGlyaWNobGV0ID0gZnVuY3Rpb24oeCwgYWxwaGEpIHtcbiAgICB2YXIgc3VtX2FscGhhID0gMDtcbiAgICB2YXIgc3VtX2xnYW1tYV9hbHBoYSA9IDA7XG4gICAgdmFyIHN1bV9hbHBoYV9zdWJfMV9sb2dfeCA9IDA7XG4gICAgdmFyIG4gPSBhbHBoYS5sZW5ndGg7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgc3VtX2FscGhhICs9IGFscGhhW2ldO1xuICAgICAgc3VtX2xnYW1tYV9hbHBoYSArPSBsZ2FtbWEoYWxwaGFbaV0pO1xuICAgICAgc3VtX2FscGhhX3N1Yl8xX2xvZ194ICs9IChhbHBoYVtpXSAtIDEpICogbG9nKHhbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gbGdhbW1hKHN1bV9hbHBoYSkgLSBzdW1fbGdhbW1hX2FscGhhICsgc3VtX2FscGhhX3N1Yl8xX2xvZ194O1xuICB9O1xuICAgXG4gICAgXG4gIGxkLmV4cCA9IGZ1bmN0aW9uKHgsIHJhdGUpIHtcbiAgICAgIHJldHVybiB4IDwgMCA/IC1JbmZpbml0eSA6IGxvZyhyYXRlKSAtcmF0ZSAqIHg7XG4gIH07XG4gIFxuICBsZC51bmlmID0gZnVuY3Rpb24oeCwgbWluLCBtYXgpIHtcbiAgICAgIHJldHVybiAoeCA8IG1pbiB8fCB4ID4gbWF4KSA/IC1JbmZpbml0eSA6IGxvZygxIC8gKG1heCAtIG1pbikpO1xuICB9O1xuICBcbiAgLy8vLy8vLy8vLyBEaXNjcmV0ZSBkaXN0cmlidXRpb25zIC8vLy8vLy8vLy9cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgXG4gIGxkLmJlcm4gPSBmdW5jdGlvbih4LCBwcm9iKSB7XG4gICAgICByZXR1cm4gISh4ID09PSAwIHx8IHggPT09IDEpID8gLUluZmluaXR5IDogbG9nKHggKiBwcm9iICsgKDEgLSB4KSAqICgxIC0gcHJvYikpO1xuICB9O1xuICBcbiAgbGQuY2F0ID0gZnVuY3Rpb24oeCwgcHJvYnMpIHtcbiAgICBpZih4IDwgMSB8fCB4ID4gcHJvYnMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gLUluZmluaXR5O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbG9nKCBwcm9ic1t4IC0gMV0gKTtcbiAgICB9XG4gIH07XG4gIFxuICBsZC5iaW5vbSA9IGZ1bmN0aW9uKHgsIHNpemUsIHByb2IpIHtcbiAgICBpZih4ID4gc2l6ZSB8fCB4IDwgMCkge1xuICAgICAgcmV0dXJuIC1JbmZpbml0eTtcbiAgICB9XG4gICAgaWYocHJvYiA9PT0gMCB8fCBwcm9iID09PSAxKSB7XG4gICAgICByZXR1cm4gKHNpemUgKiBwcm9iKSA9PT0geCA/IDAgOiAtSW5maW5pdHk7XG4gICAgfVxuICAgIHJldHVybiBsY2hvb3NlKHNpemUsIHgpICsgeCAqIGxvZyhwcm9iKSArIChzaXplIC0geCkgKiBsb2coMSAtIHByb2IpO1xuICB9O1xuICBcbiAgdmFyIG11bHRpbm9tID0gZnVuY3Rpb24oeCwgcHJvYnMpIHtcbiAgICB2YXIgbiA9IHgubGVuZ3RoO1xuICAgIHZhciBzaXplID0gMDtcbiAgICB2YXIgdG1wX3Rlcm0gPSAwO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgIGlmKHByb2JzW2ldID09PSAwKSB7XG4gICAgICAgIGlmKHhbaV0gIT09IDApIHtcbiAgICAgICAgICByZXR1cm4gLUluZmluaXR5OyAgXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNpemUgKz0geFtpXTtcbiAgICAgICAgdG1wX3Rlcm0gKz0geFtpXSAqIGxvZyhwcm9ic1tpXSkgLSBsZ2FtbWEoeFtpXSArIDEpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbGdhbW1hKHNpemUgKyAxKSArIHRtcF90ZXJtIDtcbiAgfTtcbiAgXG4gIGxkLm5iaW5vbSA9IGZ1bmN0aW9uKHgsIHNpemUsIHByb2IpIHtcbiAgICBpZih4IDwgMCkge1xuICAgICAgcmV0dXJuIC1JbmZpbml0eTtcbiAgICB9XG4gICAgcmV0dXJuIGxjaG9vc2UoeCArIHNpemUgLSAxLCBzaXplIC0gMSkgKyB4ICogbG9nKDEgLSBwcm9iKSArIHNpemUgKiBsb2cocHJvYik7XG4gIH07XG4gIFxuICBsZC5oeXBlciA9IGZ1bmN0aW9uKHgsIG0sIG4sIGspIHtcbiAgICBpZih4IDwgMCB8fCB4ID4gaykge1xuICAgICAgcmV0dXJuIC1JbmZpbml0eTtcbiAgICB9IGVsc2Uge1xuICAgIHJldHVybiBsY2hvb3NlKG0sIHgpICsgbGNob29zZShuLCBrLXgpIC0gbGNob29zZShtK24sIGspO1xuICAgIH1cbiAgfTtcbiAgXG4gIGxkLnBvaXMgPSBmdW5jdGlvbih4LCBsYW1iZGEpIHtcbiAgICAgIHJldHVybiB4IDwgMCA/IC1JbmZpbml0eSA6IGxvZyhsYW1iZGEpICogeCAtIGxhbWJkYSAtIGxmYWN0b3JpYWwoeCk7XG4gIH07XG4gIFxuICByZXR1cm4gbGQ7XG59KSk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8vIFRoaXMgYm9pbGVyIHBsYXRlIGNvZGUgaGVyZSBpcyB0YWtlbiBmcm9tOlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3VtZGpzL3VtZC9ibG9iL21hc3Rlci90ZW1wbGF0ZXMvcmV0dXJuRXhwb3J0cy5qc1xuLy8gSXQgc2hvdWxkIG1ha2Ugc2h1cmUgdGhhdCBtb2R1bGUgY2FuIGJlIGltcG9ydGVkIGJvdGggaW4gdGhlIGJyb3dzZXIsXG4vLyBOb2RlLCBhbmQgYnkgdXNpbmcgdGhlIEFzeW5jaHJvbm91cyBNb2R1bGUgRGVmaW5pdGlvbiBzdGFuZGFyZC5cbi8vIElmIHRoaXMgbW9kdWxlIGlzIGxvYWRlZCBpbiB0aGUgYnJvd3NlciBpdCB3aWxsIGNyZWF0ZWQgdGhlIGdsb2JhbFxuLy8gb2JqZWN0IG1jbWMgLlxuKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG4gICAgICAgIGRlZmluZShbXSwgZmFjdG9yeSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgICAgICAvLyBOb2RlLiBEb2VzIG5vdCB3b3JrIHdpdGggc3RyaWN0IENvbW1vbkpTLCBidXRcbiAgICAgICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsXG4gICAgICAgIC8vIGxpa2UgTm9kZS5cbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzIChyb290IGlzIHdpbmRvdylcbiAgICAgICAgcm9vdC5tY21jID0gZmFjdG9yeSgpO1xuICB9XG59KHRoaXMsIGZ1bmN0aW9uKCl7XG5cbi8vLyBUaGUgYWN0dWFsIG1vZHVsZSBjb2RlIHN0YXJ0cyBoZXJlIC8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vICBcbiAgXG4gIC8vLy8vLy8vLy8gSGVscGVyIEZ1bmN0aW9ucyAvLy8vLy8vLy8vXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIFxuICAvKiogUmV0dXJucyBhIHJhbmRvbSByZWFsIG51bWJlciBiZXR3ZWVuIG1pbiBhbmQgbWF4ICovXG4gIHZhciBydW5pZiA9IGZ1bmN0aW9uKG1pbiwgbWF4KSB7XG4gICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSArIG1pbjtcbiAgfTtcbiAgXG4gIC8qKiBSZXR1cm5zIGEgcmFuZG9tIGludGVnZXIgYmV0d2VlbiBtaW4gYW5kIG1heCAqL1xuICB2YXIgcnVuaWZfZGlzY3JldGUgPSBmdW5jdGlvbihtaW4sIG1heCkge1xuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluO1xuICB9O1xuICBcbiAgLyoqIFJldHVybnMgYSByYW5kb20gcmVhbCBudW1iZXIgZnJvbSBhIG5vcm1hbCBkaXN0cmliYnV0aW9uIGRlZmluZWRcbiAgICogIGJ5IG1lYW4gYW5kIHNkLiBcbiAgICogIEFkYXB0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vanN0YXQvanN0YXQvYmxvYi9tYXN0ZXIvc3JjL3NwZWNpYWwuanMgKi9cbiAgdmFyIHJub3JtID0gZnVuY3Rpb24obWVhbiwgc2QpIHtcbiAgICB2YXIgdSwgdiwgeCwgeSwgcTtcbiAgICBkbyB7XG4gICAgICB1ID0gTWF0aC5yYW5kb20oKTtcbiAgICAgIHYgPSAxLjcxNTYgKiAoTWF0aC5yYW5kb20oKSAtIDAuNSk7XG4gICAgICB4ID0gdSAtIDAuNDQ5ODcxO1xuICAgICAgeSA9IE1hdGguYWJzKHYpICsgMC4zODY1OTU7XG4gICAgICBxID0geCAqIHggKyB5ICogKDAuMTk2MDAgKiB5IC0gMC4yNTQ3MiAqIHgpO1xuICAgIH0gd2hpbGUgKHEgPiAwLjI3NTk3ICYmIChxID4gMC4yNzg0NiB8fCB2ICogdiA+IC00ICogTWF0aC5sb2codSkgKiB1ICogdSkpO1xuICAgIFxuICAgIHJldHVybiAodiAvIHUpICogc2QgKyBtZWFuO1xuICB9O1xuICBcbiAgXG4gIC8qKiBSZXR1cm5zIGEgZGVlcCBjbG9uZSBvZiBzcmMsIHNvcnQgb2YuLi4gSXQgb25seSBjb3BpZXMgYSBsaW1pdGVkXG4gICAqIG51bWJlciBvZiB0eXBlcyBhbmQsIGZvciBleGFtcGxlLCBmdW5jdGlvbiBhcmUgbm90IGNvcGllZC4gXG4gICAqIEZyb20gaHR0cDovL2Rhdmlkd2Fsc2gubmFtZS9qYXZhc2NyaXB0LWNsb25lXG4gICAqL1xuICB2YXIgZGVlcF9jbG9uZSA9IGZ1bmN0aW9uKHNyYykge1xuICBcdGZ1bmN0aW9uIG1peGluKGRlc3QsIHNvdXJjZSwgY29weUZ1bmMpIHtcbiAgXHRcdHZhciBuYW1lLCBzLCBpLCBlbXB0eSA9IHt9O1xuICBcdFx0Zm9yKG5hbWUgaW4gc291cmNlKXtcbiAgXHRcdFx0Ly8gdGhlICghKG5hbWUgaW4gZW1wdHkpIHx8IGVtcHR5W25hbWVdICE9PSBzKSBjb25kaXRpb24gYXZvaWRzIGNvcHlpbmcgcHJvcGVydGllcyBpbiBcInNvdXJjZVwiXG4gIFx0XHRcdC8vIGluaGVyaXRlZCBmcm9tIE9iamVjdC5wcm90b3R5cGUuXHQgRm9yIGV4YW1wbGUsIGlmIGRlc3QgaGFzIGEgY3VzdG9tIHRvU3RyaW5nKCkgbWV0aG9kLFxuICBcdFx0XHQvLyBkb24ndCBvdmVyd3JpdGUgaXQgd2l0aCB0aGUgdG9TdHJpbmcoKSBtZXRob2QgdGhhdCBzb3VyY2UgaW5oZXJpdGVkIGZyb20gT2JqZWN0LnByb3RvdHlwZVxuICBcdFx0XHRzID0gc291cmNlW25hbWVdO1xuICBcdFx0XHRpZighKG5hbWUgaW4gZGVzdCkgfHwgKGRlc3RbbmFtZV0gIT09IHMgJiYgKCEobmFtZSBpbiBlbXB0eSkgfHwgZW1wdHlbbmFtZV0gIT09IHMpKSl7XG4gIFx0XHRcdFx0ZGVzdFtuYW1lXSA9IGNvcHlGdW5jID8gY29weUZ1bmMocykgOiBzO1xuICBcdFx0XHR9XG4gIFx0XHR9XG4gIFx0XHRyZXR1cm4gZGVzdDtcbiAgXHR9XG4gIFx0aWYoIXNyYyB8fCB0eXBlb2Ygc3JjICE9IFwib2JqZWN0XCIgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHNyYykgPT09IFwiW29iamVjdCBGdW5jdGlvbl1cIil7XG4gIFx0XHQvLyBudWxsLCB1bmRlZmluZWQsIGFueSBub24tb2JqZWN0LCBvciBmdW5jdGlvblxuICBcdFx0cmV0dXJuIHNyYztcdC8vIGFueXRoaW5nXG4gIFx0fVxuICBcdGlmKHNyYy5ub2RlVHlwZSAmJiBcImNsb25lTm9kZVwiIGluIHNyYyl7XG4gIFx0XHQvLyBET00gTm9kZVxuICBcdFx0cmV0dXJuIHNyYy5jbG9uZU5vZGUodHJ1ZSk7IC8vIE5vZGVcbiAgXHR9XG4gIFx0aWYoc3JjIGluc3RhbmNlb2YgRGF0ZSl7XG4gIFx0XHQvLyBEYXRlXG4gIFx0XHRyZXR1cm4gbmV3IERhdGUoc3JjLmdldFRpbWUoKSk7XHQvLyBEYXRlXG4gIFx0fVxuICBcdGlmKHNyYyBpbnN0YW5jZW9mIFJlZ0V4cCl7XG4gIFx0XHQvLyBSZWdFeHBcbiAgXHRcdHJldHVybiBuZXcgUmVnRXhwKHNyYyk7ICAgLy8gUmVnRXhwXG4gIFx0fVxuICBcdHZhciByLCBpLCBsO1xuICBcdGlmKHNyYyBpbnN0YW5jZW9mIEFycmF5KXtcbiAgXHRcdC8vIGFycmF5XG4gIFx0XHRyID0gW107XG4gIFx0XHRmb3IoaSA9IDAsIGwgPSBzcmMubGVuZ3RoOyBpIDwgbDsgKytpKXtcbiAgXHRcdFx0aWYoaSBpbiBzcmMpe1xuICBcdFx0XHRcdHIucHVzaChkZWVwX2Nsb25lKHNyY1tpXSkpO1xuICBcdFx0XHR9XG4gIFx0XHR9XG4gIFx0fSBlbHNlIHtcbiAgXHRcdC8vIGdlbmVyaWMgb2JqZWN0c1xuICBcdFx0ciA9IHNyYy5jb25zdHJ1Y3RvciA/IG5ldyBzcmMuY29uc3RydWN0b3IoKSA6IHt9O1xuICBcdH1cbiAgXHRyZXR1cm4gbWl4aW4ociwgc3JjLCBkZWVwX2Nsb25lKTtcbiAgfTtcbiAgXG4gIC8qKiBTcGVjaWFsaXplZCBjbG9uZSBmdW5jdGlvbiB0aGF0IG9ubHkgY2xvbmVzIHNjYWxhcnMgYW5kIG5lc3RlZCBhcnJheXMgd2hlcmVcbiAgICogZWFjaCBhcnJheSBlaXRoZXIgY29uc2lzdHMgb2YgYWxsIGFycmF5cyBvciBhbGwgbnVtYmVycy4gVGhpcyBmdW5jdGlvblxuICAgKiBpcyBtZWFudCBhcyBhIGZhc3Qgd2F5IG9mIGNsb25pbmcgcGFyYW1ldGVyIGRyYXdzIHdpdGhpbiB0aGUgbWNtYyBzYW1wbGluZ1xuICAgKiBsb29wLlxuICAgKi9cbiAgdmFyIGNsb25lX3BhcmFtX2RyYXcgPSBmdW5jdGlvbih4KSB7XG4gICAgaWYoQXJyYXkuaXNBcnJheSh4KSkge1xuICAgICAgaWYoQXJyYXkuaXNBcnJheSh4WzBdKSkge1xuICAgICAgICAvLyB4IGlzIGFuIGFycmF5IG9mIGFycmF5cyBzbyB3ZSBuZWVkIHRvIGNsb25lIGl0IHJlY3Vyc2l2ZWx5XG4gICAgICAgIHZhciB4X2NvcHkgPSBbXTtcbiAgICAgICAgZm9yKHZhciBpID0gMCwgbGVuZ3RoID0geC5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgIHhfY29weS5wdXNoKGNsb25lX3BhcmFtX2RyYXcoeFtpXSkpO1xuICAgICAgICB9IFxuICAgICAgICByZXR1cm4geF9jb3B5O1xuICAgICAgfSBlbHNlIHsgLy8gV2UnbGwgYXNzdW1lIHggaXMgYSBhcnJheXMgb2Ygc2NhbGFyc1xuICAgICAgICByZXR1cm4geC5zbGljZSgwKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgeyAvLyBXZSdsbCBhc3N1bWUgeCBpcyBhIHNjYWxhclxuICAgICAgcmV0dXJuIHg7XG4gICAgfVxuICB9O1xuICBcbiAgLyoqIFJldHVybnMgdHJ1ZSBpZiBvYmplY3QgaXMgYSBudW1iZXIuXG4gICAqL1xuICB2YXIgaXNfbnVtYmVyID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICByZXR1cm4gdHlwZW9mIG9iamVjdCA9PSBcIm51bWJlclwiIHx8ICh0eXBlb2Ygb2JqZWN0ID09IFwib2JqZWN0XCIgJiYgb2JqZWN0LmNvbnN0cnVjdG9yID09PSBOdW1iZXIpO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIENyZWF0ZXMgYW5kIGluaXRpYWxpemVzIGEgKHBvc3NpYmx5IG11bHRpZGltZW5zaW9uYWwvbmVzdGVkKSBhcnJheS5cbiAgICogQHBhcmFtIGRpbSAtIEFuIGFycmF5IGdpdmluZyB0aGUgZGltZW5zaW9uIG9mIHRoZSBhcnJheS4gRm9yIGV4YW1wbGUsXG4gICAqICAgWzVdIHdvdWxkIHlpZWxkIGEgNSBlbGVtZW50IGFycmF5LCBhbmQgWzMsM10gd291bGQgeWllbGQgYSAzIGJ5IDMgbWF0cml4LlxuICAgKiBAcGFyYW0gaW5pdCAtIEEgdmFsdWUgb3IgYSBmdW5jdGlvbiB1c2VkIHRvIGZpbGwgaW4gdGhlIGVhY2ggZWxlbWVudCBpblxuICAgKiAgIHRoZSBhcnJheS4gSWYgaXQgaXMgYSBmdW5jdGlvbiBpdCBzaG91bGQgdGFrZSBubyBhcmd1bWVudHMsIGl0IHdpbGwgYmUgXG4gICAqICAgZXZhbHVhdGVkIG9uY2UgZm9yIGVhY2ggZWxlbWVudCwgYW5kIGl0J3MgcmV0dXJuIHZhbHVlIHdpbGwgYmUgdXNlZCB0b1xuICAgKiAgIGZpbGwgaW4gZWFjaCBlbGVtZW50LlxuICAgKiBAZXhhbXBsZSBcbiAgICogLy8gVGhlIGZvbGxvd2luZyB3b3VsZCByZXR1cm4gW1sxLDFdLFsxLDFdLFsxLDFdXVxuICAgKiBjcmVhdGVfYXJyYXkoWzIsM10sIDEpXG4gICAqL1xuICB2YXIgY3JlYXRlX2FycmF5ID0gZnVuY3Rpb24oZGltLCBpbml0KSB7XG4gICAgdmFyIGFyciA9IG5ldyBBcnJheShkaW1bMF0pO1xuICAgIHZhciBpO1xuICAgIGlmKGRpbS5sZW5ndGggPT0gMSkgeyAvLyBGaWxsIGl0IHVwIHdpdGggaW5pdFxuICAgICAgaWYodHlwZW9mIGluaXQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBmb3IoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykge1xuICAgICAgICAgIGFycltpXSA9IGluaXQoKTtcbiAgICAgICAgfSAgXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykge1xuICAgICAgICAgIGFycltpXSA9IGluaXQ7XG4gICAgICAgIH0gXG4gICAgICB9XG4gICAgfSBlbHNlIGlmKGRpbS5sZW5ndGggPiAxKSB7XG4gICAgICBmb3IoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykge1xuICAgICAgICBhcnJbaV0gPSBjcmVhdGVfYXJyYXkoZGltLnNsaWNlKDEpLCBpbml0KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgXCJjcmVhdGVfYXJyYXkgY2FuJ3QgY3JlYXRlIGEgZGltZW5zaW9ubGVzcyBhcnJheVwiO1xuICAgIH1cbiAgICByZXR1cm4gYXJyO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFJldHVybiB0aGUgZGltZW5zaW9ucyBvZiBhIHBvc3NpYmx5IG5lc3RlZCBhcnJheSBhcyBhbiBhcnJheS4gRm9yIFxuICAgKiBleGFtcGxlLCBhcnJheV9kaW0oIFtbMSwgMl0sIFsxLCAyXV0gKSBzaG91bGQgcmV0dXJuIFsyLCAyXVxuICAgKiBBc3N1bWVzIHRoYXQgYWxsIGFycmF5cyBpbnNpZGUgYW5vdGhlciBhcnJheSBhcmUgb2YgdGhlIHNhbWUgbGVuZ3RoLlxuICAgKiBAZXhhbXBsZVxuICAgKiAvLyBTaG91bGQgcmV0dXJuIFs0LCAyLCAxXVxuICAgKiBhcnJheV9kaW0oY3JlYXRlX2FycmF5KFs0LCAyLCAxXSwgMCkpXG4gICAqL1xuICB2YXIgYXJyYXlfZGltID0gZnVuY3Rpb24oYSkge1xuICAgIGlmKEFycmF5LmlzQXJyYXkoYVswXSkpIHtcbiAgICAgIHJldHVybiBbYS5sZW5ndGhdLmNvbmNhdChhcnJheV9kaW0oYVswXSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW2EubGVuZ3RoXTtcbiAgICB9XG4gIH07XG4gIFxuICAvKipcbiAgICogQ2hlY2tzIGlmIHR3byBhcnJheXMgYXJlIGVxdWFsIGluIHRoZSBzZW5zZSB0aGF0IHRoZXkgY29udGFpbiB0aGUgc2FtZSBlbGVtZW50c1xuICAgKiBhcyBqdWRnZWQgYnkgdGhlIFwiPT1cIiBvcGVyYXRvci4gUmV0dXJucyB0cnVlIG9yIGZhbHNlLlxuICAgKiBBZGFwdGVkIGZyb20gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTQ4NTM5NzQvMTAwMTg0OFxuICAgKi8gXG4gIHZhciBhcnJheV9lcXVhbCA9IGZ1bmN0aW9uIChhMSwgYTIpIHtcbiAgICAgIGlmIChhMS5sZW5ndGggIT0gYTIubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGExLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBuZXN0ZWQgYXJyYXlzXG4gICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYTFbaV0pICYmIEFycmF5LmlzQXJyYXkoYTJbaV0pKSB7XG4gICAgICAgICAgICAgIC8vIHJlY3Vyc2UgaW50byB0aGUgbmVzdGVkIGFycmF5c1xuICAgICAgICAgICAgICBpZiAoIWFycmF5X2VxdWFsKGExW2ldLCBhMltpXSkpIHJldHVybiBmYWxzZTsgICAgICAgXG4gICAgICAgICAgfSAgICAgICAgICAgXG4gICAgICAgICAgZWxzZSBpZiAoYTFbaV0gIT0gYTJbaV0pIHsgXG4gICAgICAgICAgICAgIC8vIFdhcm5pbmcgLSB0d28gZGlmZmVyZW50IG9iamVjdCBpbnN0YW5jZXMgd2lsbCBuZXZlciBiZSBlcXVhbDoge3g6MjB9ICE9IHt4OjIwfVxuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7ICAgXG4gICAgICAgICAgfSAgICAgICAgICAgXG4gICAgICB9ICAgICAgIFxuICAgICAgcmV0dXJuIHRydWU7XG4gIH07XG4gIFxuICAvKipcbiAgICogVHJhdmVyc2VzIGEgcG9zc2libHkgbmVzdGVkIGFycmF5IGEgYW5kIGFwcGxpZXMgZnVuIHRvIGFsbCBcImxlYWYgbm9kZXNcIiwgXG4gICAqIHRoYXQgaXMsIHZhbHVlcyB0aGF0IGFyZSBub3QgYXJyYXlzLiBSZXR1cm5zIGFuIGFycmF5IG9mIHRoZSBzYW1lIHNpemUgYXNcbiAgICogYS5cbiAgICovXG4gIHZhciBuZXN0ZWRfYXJyYXlfYXBwbHkgPSBmdW5jdGlvbihhLCBmdW4pIHtcbiAgICBpZihBcnJheS5pc0FycmF5KGEpKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gbmV3IEFycmF5KGEubGVuZ3RoKTtcbiAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHJlc3VsdFtpXSA9IG5lc3RlZF9hcnJheV9hcHBseShhW2ldLCBmdW4pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZ1bihhKTtcbiAgICB9XG4gIH07XG4gIFxuICAvKiogUmFuZG9taXppbmcgdGhlIGFycmF5IGVsZW1lbnQgb3JkZXIgaW4tcGxhY2UuIFVzaW5nIER1cnN0ZW5mZWxkXG4gICAqIHNodWZmbGUgYWxnb3JpdGhtLiBBZGFwdGVkIGZyb20gaGVyZTogXG4gICAqIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzEyNjQ2ODY0LzEwMDE4NDhcbiAgICovXG4gIGZ1bmN0aW9uIHNodWZmbGVfYXJyYXkoYXJyYXkpIHtcbiAgICAgIGZvciAodmFyIGkgPSBhcnJheS5sZW5ndGggLSAxOyBpID4gMDsgaS0tKSB7XG4gICAgICAgICAgdmFyIGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaSArIDEpKTtcbiAgICAgICAgICB2YXIgdGVtcCA9IGFycmF5W2ldO1xuICAgICAgICAgIGFycmF5W2ldID0gYXJyYXlbal07XG4gICAgICAgICAgYXJyYXlbal0gPSB0ZW1wO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFycmF5O1xuICB9XG4gIFxuICAvKipcbiAgICogRG9lcyB0aGUgc2FtZSB0aGluZyBhcyBuZXN0ZWRfYXJyYXlfYXBwbHksIHRoYXQgaXMsIHRyYXZlcnNlcyBhIHBvc3NpYmx5XG4gICAqIG5lc3RlZCBhcnJheSBhIGFuZCBhcHBsaWVzIGZ1biB0byBhbGwgXCJsZWFmIG5vZGVzXCIgYW5kIHJldHVybnMgYW4gYXJyYXkgXG4gICAqIG9mIHRoZSBzYW1lIHNpemUgYXMgYS4gVGhlIGRpZmZlcmVuY2UgaXMgdGhhdCBuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5XG4gICAqIGJyYW5jaGVzIHJhbmRvbWx5LlxuICAgKi9cbiAgdmFyIG5lc3RlZF9hcnJheV9yYW5kb21fYXBwbHkgPSBmdW5jdGlvbihhLCBmdW4pIHtcbiAgICBpZihBcnJheS5pc0FycmF5KGEpKSB7XG4gICAgICB2YXIgbGVuID0gYS5sZW5ndGg7XG4gICAgICB2YXIgaTtcbiAgICAgIHZhciBhcnJheV9pcyA9IFtdO1xuICAgICAgZm9yKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgYXJyYXlfaXNbaV0gPSBpO1xuICAgICAgfVxuICAgICAgc2h1ZmZsZV9hcnJheShhcnJheV9pcyk7XG4gICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICBcbiAgICAgIGZvcihpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHZhciBhcnJheV9pID0gYXJyYXlfaXNbaV07XG4gICAgICAgIHJlc3VsdFthcnJheV9pXSA9IG5lc3RlZF9hcnJheV9hcHBseShhW2FycmF5X2ldLCBmdW4pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZ1bihhKTtcbiAgICB9XG4gIH07XG4gIFxuICAvKipcbiAgICogQWxsb3dzIGEgcHJldHR5IHdheSBvZiBzZXR0aW5nIGRlZmF1bHQgb3B0aW9ucyB3aGVyZSB0aGUgZGVmdWx0cyBjYW4gYmVcbiAgICogb3ZlcnJpZGRlbiBieSBhbiBvcHRpb25zIG9iamVjdC5cbiAgICogIEBwYXJhbSBvcHRpb25fbmFtZSAtIHRoZSBuYW1lIG9mIHRoZSBvcHRpb24gYXMgYSBzdHJpbmdcbiAgICogIEBwYXJhbSBteV9vcHRpb25zIC0gYW4gb3B0aW9uIG9iamVjdCB0aGF0IGNvdWxkIGhhdmUgb3B0aW9uX25hbWUgXG4gICAqICAgIGFzIGEgbWVtYmVyLlxuICAgKiBAcGFyYW0gZGVmYXVsX3ZhbHVlIC0gZGVmdWx0IHZhbHVlIHRoYXQgaXMgcmV0dXJuZWQgaWYgb3B0aW9uX25hbWUgXG4gICAqICAgaXMgbm90IGRlZmluZWQgaW4gbXlfb3B0aW9ucy5cbiAgICogQGV4YW1wbGVcbiAgICogdmFyIG15X29wdGlvbnMgPSB7cGk6IDMuMTQxNTl9XG4gICAqIHZhciBwaSA9IGdldF9vcHRpb24oXCJwaVwiLCBteV9vcHRpb25zLCAzLjE0KVxuICAgKi9cbiAgLy8gUHJldHR5IHdheSBvZiBzZXR0aW5nIGRlZmF1bHQgb3B0aW9ucyB3aGVyZSB0aGUgZGVmYXVsdHMgY2FuIGJlIG92ZXJyaWRkZW5cbiAgLy8gYnkgYW4gb3B0aW9ucyBvYmplY3QuIEZvciBleGFtcGxlOlxuICAvLyB2YXIgcGkgPSBnZXRfb3B0aW9uKFwicGlcIiwgbXlfb3B0aW9ucywgMy4xNClcbiAgdmFyIGdldF9vcHRpb24gPSBmdW5jdGlvbihvcHRpb25fbmFtZSwgb3B0aW9ucywgZGVmYXVsX3ZhbHVlKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgcmV0dXJuIG9wdGlvbnMuaGFzT3duUHJvcGVydHkob3B0aW9uX25hbWUpICYmIFxuICAgICAgICAgICBvcHRpb25zW29wdGlvbl9uYW1lXSAhPT0gdW5kZWZpbmVkICAmJiBcbiAgICAgICAgICAgb3B0aW9uc1tvcHRpb25fbmFtZV0gIT09IG51bGwgPyBvcHRpb25zW29wdGlvbl9uYW1lXSA6IGRlZmF1bF92YWx1ZTtcbiAgfTtcbiAgXG4gIC8qKiBWZXJzaW9uIG9mIGdldF9vcHRpb24gd2hlcmUgdGhlIG9wdGlvbiBzaG91bGQgYmUgYSBvbmUgb3IgbXVsdGktZGltZW5zaW9uYWxcbiAgICogYXJyYXkgYW5kIHdoZXJlIHRoZSBkZWZhdWx0IGNhbiBiZSBvdmVycmlkZGVuIGVpdGhlciBieSBhIHNjYWxhciBvciBieSBhbiBhcnJheS5cbiAgICogSWYgaXQncyBhIHNjYWxhciB0aGUgdGhhdCBzY2FsYXIgaXMgdXNlZCB0byBpbml0aWFsaXplIGFuIGFycmF5IHdpdGggXG4gICAqIGRpbSBkaW1lbnNpb25zLlxuICAgKiBcbiAgICovXG4gIHZhciBnZXRfbXVsdGlkaW1fb3B0aW9uID0gZnVuY3Rpb24ob3B0aW9uX25hbWUsIG9wdGlvbnMsIGRpbSwgZGVmYXVsX3ZhbHVlKSB7XG4gICAgdmFyIHZhbHVlID0gZ2V0X29wdGlvbihvcHRpb25fbmFtZSwgb3B0aW9ucywgZGVmYXVsX3ZhbHVlKTtcbiAgICAgaWYoISBBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgIHZhbHVlID0gY3JlYXRlX2FycmF5KGRpbSwgdmFsdWUpO1xuICAgICB9IFxuICAgICBpZighIGFycmF5X2VxdWFsKCBhcnJheV9kaW0odmFsdWUpLCBkaW0pKSB7XG4gICAgICAgdGhyb3cgXCJUaGUgb3B0aW9uIFwiICsgb3B0aW9uX25hbWUgKyBcIiBpcyBvZiBkaW1lbnNpb24gW1wiICsgXG4gICAgICAgICAgICAgYXJyYXlfZGltKHZhbHVlKSArIFwiXSBidXQgc2hvdWxkIGJlIFtcIiArIGRpbSArIFwiXS5cIjtcbiAgICB9XG4gICAgIHJldHVybiB2YWx1ZTtcbiAgfTtcbiAgXG4gIC8vLy8vLy8vLy8gRnVuY3Rpb25zIGZvciBoYW5kbGluZyBwYXJhbWV0ZXIgb2JqZWN0cyAvLy8vLy8vLy8vXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIFxuICAvKipcbiAgICogUmV0dXJucyBhIGZpeGVkIChzYW1lIGV2ZXJ5IHRpbWUpIG51bWJlciB0aGF0IGNvdWxkIGJlIHVzZWQgdG8gaW5pdGlhbGl6ZVxuICAgKiBhIHBhcmFtZXRlciBvZiBhIGNlcnRhaW4gdHlwZSwgcG9zc2libHkgd2l0aCBsb3dlciBhbmQgdXBwZXIgYm91bmRzLlxuICAgKiBUaGUgcG9zc2lsZSB0eXBlcyBhcmUgXCJyZWFsXCIsIFwiaW50XCIsIGFuZCBcImJpbmFyeVwiLlxuICAgKi9cbiAgdmFyIHBhcmFtX2luaXRfZml4ZWQgPSBmdW5jdGlvbih0eXBlLCBsb3dlciwgdXBwZXIpIHtcbiAgICBpZihsb3dlciA+IHVwcGVyKSB7XG4gICAgICB0aHJvdyBcIkNhbiBub3QgaW5pdGlhbGl6ZSBwYXJhbWV0ZXIgd2hlcmUgbG93ZXIgYm91bmQgPiB1cHBlciBib3VuZFwiO1xuICAgIH1cbiAgICBpZih0eXBlID09PSBcInJlYWxcIikge1xuICAgICAgaWYobG93ZXIgPT09IC1JbmZpbml0eSAmJiB1cHBlciA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgcmV0dXJuIDAuNTtcbiAgICAgIH0gZWxzZSBpZihsb3dlciA9PT0gLUluZmluaXR5KSB7XG4gICAgICAgIHJldHVybiB1cHBlciAtIDAuNTtcbiAgICAgIH0gZWxzZSBpZih1cHBlciA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgcmV0dXJuIGxvd2VyICsgMC41O1xuICAgICAgfSBlbHNlIGlmKGxvd2VyIDw9IHVwcGVyKSB7XG4gICAgICAgIHJldHVybiAobG93ZXIgKyB1cHBlcikgLyAyO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZih0eXBlID09PSBcImludFwiKSB7XG4gICAgICBpZihsb3dlciA9PT0gLUluZmluaXR5ICYmIHVwcGVyID09PSBJbmZpbml0eSkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICAgIH0gZWxzZSBpZihsb3dlciA9PT0gLUluZmluaXR5KSB7XG4gICAgICAgIHJldHVybiB1cHBlciAtIDE7XG4gICAgICB9IGVsc2UgaWYodXBwZXIgPT09IEluZmluaXR5KSB7XG4gICAgICAgIHJldHVybiBsb3dlciArIDE7XG4gICAgICB9IGVsc2UgaWYobG93ZXIgPD0gdXBwZXIpe1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCgobG93ZXIgKyB1cHBlcikgLyAyKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYodHlwZSA9PT0gXCJiaW5hcnlcIikge1xuICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICAgIHRocm93IFwiQ291bGQgbm90IGluaXRpYWxpemUgcGFyYW1ldGVyIG9mIHR5cGUgXCIgKyB0eXBlICsgXCJbXCIgKyBsb3dlciArIFwiLCBcIiArIHVwcGVyICsgXCJdXCI7XG4gIH07XG4gIFxuICAvKipcbiAgICogQ29tcGxldGVzIHBhcmFtc190b19jb21wbGV0ZSwgYW4gb2JqZWN0IGNvbnRhaW5pbmcgcGFyYW1ldGVyIGRlc2NyaXB0aW9ucywgXG4gICAqIGFuZCBpbml0aWFsaXplcyBub24taW5pdGlhbGl6ZWQgcGFyYW1ldGVycy4gVGhpcyBtb2RpZmllZCB2ZXJzaW9uIG9mXG4gICAqIHBhcmFtc190b19jb21wbGV0ZSBpcyByZXR1cm5lZCBhcyBhIGRlZXAgY29weSBhbmQgbm90IG1vZGlmaWVkIGluIHBsYWNlLlxuICAgKiBJbml0aWFsaXphdGlvbiBpcyBkb25lIGJ5IHN1cHBseWluZyBhIHBhcmFtX2luaXQgZnVuY3Rpb24gd2l0aCBzaWduYXR1cmVcbiAgICogZnVuY3Rpb24odHlwZSwgbG93ZXIsIHVwcGVyKSB0aGF0IHNob3VsZCByZXR1cm4gYSBzaW5nbGUgbnVtYmVyIFxuICAgKiAobGlrZSBwYXJhbV9pbml0X2ZpeGVkLCBmb3IgZXhhbXBsZSkuXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciBwYXJhbXMgPSB7IFwibXVcIjoge1widHlwZVwiOiBcInJlYWxcIn0gfVxuICAgKiBwYXJhbXMgPSBjb21wbGV0ZV9wYXJhbXMocGFyYW1zKTtcbiAgICogLy8gcGFyYW1zIHNob3VsZCBub3cgYmU6XG4gICAqIC8vICB7XCJtdVwiOiB7IFwidHlwZVwiOiBcInJlYWxcIiwgXCJkaW1cIjogWzFdLCBcInVwcGVyXCI6IEluZmluaXR5LFxuICAgKiAvLyAgICAgICAgICAgXCJsb3dlclwiOiAtSW5maW5pdHksIFwiaW5pdFwiOiAwLjUgfX1cbiAgICovIFxuICB2YXIgY29tcGxldGVfcGFyYW1zICA9IGZ1bmN0aW9uKHBhcmFtc190b19jb21wbGV0ZSwgcGFyYW1faW5pdCkge1xuICAgIHZhciBwYXJhbXMgPSBkZWVwX2Nsb25lKHBhcmFtc190b19jb21wbGV0ZSk7XG4gICAgZm9yICh2YXIgcGFyYW1fbmFtZSBpbiBwYXJhbXMpIHsgaWYgKCFwYXJhbXMuaGFzT3duUHJvcGVydHkocGFyYW1fbmFtZSkpIGNvbnRpbnVlO1xuICAgICAgdmFyIHBhcmFtID0gcGFyYW1zW3BhcmFtX25hbWVdO1xuICAgICAgaWYoICFwYXJhbS5oYXNPd25Qcm9wZXJ0eShcInR5cGVcIikpIHtcbiAgICAgICAgcGFyYW0udHlwZSA9IFwicmVhbFwiO1xuICAgICAgfVxuICAgICAgaWYoIXBhcmFtLmhhc093blByb3BlcnR5KFwiZGltXCIpKSB7XG4gICAgICAgIHBhcmFtLmRpbSA9IFsxXTtcbiAgICAgIH1cbiAgICAgIGlmKGlzX251bWJlcihwYXJhbS5kaW0pKSB7XG4gICAgICAgIHBhcmFtLmRpbSA9IFtwYXJhbS5kaW1dO1xuICAgICAgfVxuICAgICAgaWYocGFyYW0udHlwZSA9PSBcImJpbmFyeVwiKSB7XG4gICAgICAgIHBhcmFtLnVwcGVyID0gMTtcbiAgICAgICAgcGFyYW0ubG93ZXIgPSAwO1xuICAgICAgfVxuICAgICAgaWYoIXBhcmFtLmhhc093blByb3BlcnR5KFwidXBwZXJcIikpIHtcbiAgICAgICAgcGFyYW0udXBwZXIgPSBJbmZpbml0eTtcbiAgICAgIH1cbiAgICAgIGlmKCFwYXJhbS5oYXNPd25Qcm9wZXJ0eShcImxvd2VyXCIpKSB7XG4gICAgICAgIHBhcmFtLmxvd2VyID0gLUluZmluaXR5O1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZihwYXJhbS5oYXNPd25Qcm9wZXJ0eShcImluaXRcIikpIHtcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBqdXN0IGEgbnVtYmVyIG9yIGEgbmVzdGVkIGFycmF5IHdlIGxlYXZlIGl0IGFsb25lLCBidXQgaWYuLi5cbiAgICAgICAgaWYoYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pICYmIHR5cGVvZiBwYXJhbS5pbml0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAvLyBwYXJhbS5pbml0IGlzIGEgZnVuY3Rpb24sIHVzZSB0aGF0IHRvIGluaXRpYWxpemUgdGhlIHBhcmFtZXRlci5cbiAgICAgICAgICBwYXJhbS5pbml0ID0gcGFyYW0uaW5pdCgpO1xuICAgICAgICB9IGVsc2UgaWYoIWFycmF5X2VxdWFsKHBhcmFtLmRpbSwgWzFdKSAmJiAhQXJyYXkuaXNBcnJheShwYXJhbS5pbml0KSkge1xuICAgICAgICAvLyBXZSBoYXZlIGEgbXVsdGlkaW1lbnNpb25hbCBwYXJhbWV0ZXIgd2hlcmUgdGhlIHBhcmFtLmluaXQgZXhpc3QgYnV0XG4gICAgICAgIC8vIGlzIG5vdCBhbiBhcnJheS4gVGhlbiBhc3N1bWUgaXQgaXMgYSBudW1iZXIgb3IgYSBmdW5jdGlvbiBhbmQgdXNlXG4gICAgICAgIC8vIGl0IHRvIGluaXRpYWxpemUgdGhlIHBhcmFtZXRlci5cbiAgICAgICAgcGFyYW0uaW5pdCA9IGNyZWF0ZV9hcnJheShwYXJhbS5kaW0sIHBhcmFtLmluaXQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgeyAvLyBXZSB1c2UgdGhlIGRlZmF1bHQgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24uXG4gICAgICAgIGlmKGFycmF5X2VxdWFsKHBhcmFtLmRpbSwgWzFdKSkge1xuICAgICAgICAgIHBhcmFtLmluaXQgPSBwYXJhbV9pbml0KHBhcmFtLnR5cGUsIHBhcmFtLmxvd2VyLCBwYXJhbS51cHBlcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGFyYW0uaW5pdCA9IGNyZWF0ZV9hcnJheShwYXJhbS5kaW0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHBhcmFtX2luaXQocGFyYW0udHlwZSwgcGFyYW0ubG93ZXIsIHBhcmFtLnVwcGVyKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcGFyYW1zO1xuICB9O1xuICBcbiAgXG4gIC8vLy8vLy8vLy8gU3RlcHBlciBGdW5jdGlvbnMgLy8vLy8vLy8vLy9cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBcbiAgXG4gIC8qKlxuICAgKiBAaW50ZXJmYWNlXG4gICAqIEEgU3RlcHBlciBpcyBhbiBvYmplY3QgcmVzcG9uc2libGUgZm9yIHB1c2hpbmcgYXJvdW5kIG9uZVxuICAgKiBvciBtb3JlIHBhcmFtZXRlciB2YWx1ZXMgaW4gYSBzdGF0ZSBhY2NvcmRpbmcgdG8gdGhlIGRpc3RyaWJ1dGlvblxuICAgKiBkZWZpbmVkIGJ5IHRoZSBsb2cgcG9zdGVyaW9yLiBUaGlzIGRlZmluZXMgdGhlIFN0ZXBwZXIgXCJpbnRlcmZhY2VcIixcbiAgICogd2hlcmUgXCJpbnRlcmZhY2VcIiBtZWFucyB0aGF0IFN0ZXBwZXIgZGVmaW5lcyBhIGNsYXNzIHRoYXQgaXMgbmV2ZXJcbiAgICogbWVhbnQgdG8gYmUgaW5zdGFudGlhdGVkLCBidXQganVzdCB0byBiZSBzdWJjbGFzc2VkIGJ5IHNwZWNpYWxpemVkXG4gICAqIHN0ZXBwZXIgZnVuY3Rpb25zLlxuICAgKiBAaW50ZXJmYWNlXG4gICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBwYXJhbWV0ZXIgZGVmaW5pdGlvbnMsIGZvciBleGFtcGxlOlxuICAgKiAgIHtcIm11XCI6IHsgXCJ0eXBlXCI6IFwicmVhbFwiLCBcImRpbVwiOiBbMV0sIFwidXBwZXJcIjogSW5maW5pdHksIFxuICAgKiAgIFwibG93ZXJcIjogLUluZmluaXR5LCBcImluaXRcIjogMC41IH19XG4gICAqICAgVGhlIHBhcmFtZXRlciBkZWZpbml0aW9ucyBhcmUgZXhwZWN0ZWQgdG8gYmUgXCJjb21wbGV0ZVwiLCB0aGF0IGlzLFxuICAgKiAgIHNwZWNpZnlpbmcgYWxsIHJlbGV2YW50IGF0dHJpYnV0ZXMgc3VjaCBhcyBkaW0sIGxvd2VyIGFuZCB1cHBlci5cbiAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzIGluIHBhcmFtc1xuICAgKiAgIChhbmQgcG9zc2libHkgbW9yZSkuIFRoZSBwYXJhbWV0ZXIgbmFtZXMgYXJlIGdpdmVuIGFzIGtleXMgYW5kIHRoZSBzdGF0ZXNcbiAgICogICBhcyBzY2FsYXJzIG9yLCBwb3NzaWJseSBuZXN0ZWQsIGFycmF5cy4gRm9yIGV4YW1wbGU6XG4gICAqICAge211OiAxMCwgc2lnbWE6IDUsIGJldGE6IFsxLCAyLjVdfVxuICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uICp0YWtpbmcgbm8gcGFyYW1ldGVycyogdGhhdCByZXR1cm5zIHRoZVxuICAgKiAgIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIFRoYXQgaXMsIHRoZSB2YWx1ZSBvZiBsb2dfcG9zdFxuICAgKiAgIHNob3VsZCBjaGFuZ2UgaWYgdGhlIHRoZSB2YWx1ZXMgaW4gc3RhdGUgYXJlIGNoYW5nZWQuXG4gIFxuICAgKi9cbiAgdmFyIFN0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCkge1xuICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICB0aGlzLmxvZ19wb3N0ID0gbG9nX3Bvc3Q7XG4gIH07XG4gIFxuICAvKipcbiAgICogVGFrZXMgYSBzdGVwIGluIHRoZSBwYXJhbWV0ZXIgc3BhY2UuIFNob3VsZCByZXR1cm4gdGhlIG5ldyBzdGF0ZSxcbiAgICogYnV0IGlzIG1haW5seSBjYWxsZWQgZm9yIGl0J3Mgc2lkZSBlZmZlY3Qgb2YgbWFraW5nIGEgY2hhbmdlIGluIHRoZVxuICAgKiBzdGF0ZSBvYmplY3QuXG4gICAqL1xuICBTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24oKSB7XG4gICAgdGhyb3cgXCJFdmVyeSBTdGVwcGVyIG5lZWQgdG8gaW1wbGVtZW50IHN0ZXAoKVwiO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIElmIGltcGxlbWVudGVkLCBtYWtlcyB0aGUgc3RlcHBlciBhZGFwdCB3aGlsZSBzdGVwcGluZy5cbiAgICovIFxuICBTdGVwcGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gT3B0aW9uYWwsIHNvbWUgc3RlcHBlcnMgbWlnaHQgbm90IGJlIGFkYXB0aXZlLiAqLyBcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBJZiBpbXBsZW1lbnRlZCwgbWFrZXMgdGhlIHN0ZXBwZXIgY2Vhc2UgYWRhcHRpbmcgd2hpbGUgc3RlcHBpbmcuXG4gICAqLyBcbiAgU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gT3B0aW9uYWwsIHNvbWUgc3RlcHBlcnMgbWlnaHQgbm90IGJlIGFkYXB0aXZlLiAqLyBcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIG9iamVjdCBjb250YWluZyBpbmZvIHJlZ2FyZGluZyB0aGUgc3RlcHBlci5cbiAgICovIFxuICBTdGVwcGVyLnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBpbmZvIGFib3V0IHRoZSBzdGF0ZSBvZiB0aGUgc3RlcHBlci5cbiAgICByZXR1cm4ge307XG4gIH07XG4gIFxuICBcbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn1cbiAgICogQ29uc3RydWN0b3IgZm9yIGFuIG9iamVjdCB0aGF0IGltcGxlbWVudHMgdGhlIG1ldHJvcG9saXMgc3RlcCBpblxuICAgKiB0aGUgQWRhcHRpdmUgTWV0cm9wb2xpcy1XaXRoaW4tR2liYnMgYWxnb3JpdGhtIGluIFwiRXhhbXBsZXMgb2YgQWRhcHRpdmUgTUNNQ1wiXG4gICAqIGJ5IFJvYmVydHMgYW5kIFJvc2VudGhhbCAoMjAwOCkuXG4gICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIHNpbmdsZSBwYXJhbWV0ZXIgZGVmaW5pdGlvbi5cbiAgICogQHBhcmFtIHN0YXRlIC0gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YXRlIG9mIGFsbCBwYXJhbWV0ZXJzLlxuICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbG9nIGRlbnNpdHkgdGhhdCBkZXBlbmRzIG9uIHRoZSBzdGF0ZS4gXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucyB0byB0aGUgc3RlcHBlci5cbiAgICogQHBhcmFtIGdlbmVyYXRlX3Byb3Bvc2FsIC0gYSBmdW5jdGlvbiByZXR1cm5pbmcgYSBwcm9wb3NhbCAoYXMgYSBudW1iZXIpXG4gICAqIHdpdGggc2lnbmF0dXJlIGZ1bmN0aW9uKHBhcmFtX3N0YXRlLCBsb2dfc2NhbGUpIHdoZXJlIHBhcmFtX3N0YXRlIGlzIGFcbiAgICogbnVtYmVyIGFuZCBsb2dfc2NhbGUgZGVmaW5lcyB0aGUgc2NhbGUgb2YgdGhlIHByb3Bvc2FsIHNvbWVob3cuXG4gICovXG4gIHZhciBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciA9IGZ1bmN0aW9uKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zLCBnZW5lcmF0ZV9wcm9wb3NhbCkge1xuICAgIFN0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCk7XG4gICAgXG4gICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpO1xuICAgIGlmKHBhcmFtX25hbWVzLmxlbmd0aCAgIT0gMSkge1xuICAgICAgdGhyb3cgXCJPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciBjYW4gb25seSBoYW5kbGUgb25lIHBhcmFtZXRlci5cIjtcbiAgICB9XG4gICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07XG4gICAgdmFyIHBhcmFtID0gdGhpcy5wYXJhbXNbdGhpcy5wYXJhbV9uYW1lXTtcbiAgICBpZighYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pKSB7XG4gICAgICB0aHJvdyBcIk9uZWRpbU1ldHJvcG9saXNTdGVwcGVyIGNhbiBvbmx5IGhhbmRsZSBvbmUgb25lLWRpbWVuc2lvbmFsIHBhcmFtZXRlci5cIjtcbiAgICB9XG4gICAgdGhpcy5sb3dlciA9IHBhcmFtLmxvd2VyO1xuICAgIHRoaXMudXBwZXIgPSBwYXJhbS51cHBlcjtcbiAgICBcbiAgICB0aGlzLnByb3BfbG9nX3NjYWxlICAgICA9IGdldF9vcHRpb24oXCJwcm9wX2xvZ19zY2FsZVwiLCBvcHRpb25zLCAwKTtcbiAgICB0aGlzLmJhdGNoX3NpemUgICAgICAgICA9IGdldF9vcHRpb24oXCJiYXRjaF9zaXplXCIsIG9wdGlvbnMsIDUwKTtcbiAgICB0aGlzLm1heF9hZGFwdGF0aW9uICAgICA9IGdldF9vcHRpb24oXCJtYXhfYWRhcHRhdGlvblwiLCBvcHRpb25zLCAwLjMzKTtcbiAgICB0aGlzLmluaXRpYWxfYWRhcHRhdGlvbiA9IGdldF9vcHRpb24oXCJpbml0aWFsX2FkYXB0YXRpb25cIiwgb3B0aW9ucywgMS4wKTtcbiAgICB0aGlzLnRhcmdldF9hY2NlcHRfcmF0ZSA9IGdldF9vcHRpb24oXCJ0YXJnZXRfYWNjZXB0X3JhdGVcIiwgb3B0aW9ucywgMC40NCk7XG4gICAgdGhpcy5pc19hZGFwdGluZyAgICAgICAgPSBnZXRfb3B0aW9uKFwiaXNfYWRhcHRpbmdcIiwgb3B0aW9ucywgdHJ1ZSk7XG4gICAgXG4gICAgdGhpcy5nZW5lcmF0ZV9wcm9wb3NhbCA9IGdlbmVyYXRlX3Byb3Bvc2FsO1xuICAgIFxuICAgIHRoaXMuYWNjZXB0YW5jZV9jb3VudCA9IDA7XG4gICAgdGhpcy5iYXRjaF9jb3VudCA9IDA7XG4gICAgdGhpcy5pdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uID0gMDsgIFxuICB9O1xuICBcbiAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7IFxuICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlcjtcbiAgXG4gIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGFyYW1fc3RhdGUgPSB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV07XG4gICAgICB2YXIgcGFyYW1fcHJvcG9zYWwgPSB0aGlzLmdlbmVyYXRlX3Byb3Bvc2FsKHBhcmFtX3N0YXRlLCB0aGlzLnByb3BfbG9nX3NjYWxlKTtcbiAgICAgIGlmKHBhcmFtX3Byb3Bvc2FsIDwgdGhpcy5sb3dlciB8fCBwYXJhbV9wcm9wb3NhbCA+IHRoaXMudXBwZXIpIHtcbiAgICAgICAgLy8gT3V0c2lkZSBvZiBsaW1pdHMgb2YgdGhlIHBhcmFtZXRlciwgcmVqZWN0IHRoZSBwcm9wb3NhbCBcbiAgICAgICAgLy8gYW5kIHN0YXkgYXQgdGhlIGN1cnJlbnQgc3RhdGUuXG4gICAgICB9IGVsc2UgeyAvLyBtYWtlIGEgTWV0cm9wb2xpcyBzdGVwXG4gICAgICAgIHZhciBjdXJyX2xvZ19kZW5zID0gdGhpcy5sb2dfcG9zdCgpO1xuICAgICAgICB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0gPSBwYXJhbV9wcm9wb3NhbDtcbiAgICAgICAgdmFyIHByb3BfbG9nX2RlbnMgPSB0aGlzLmxvZ19wb3N0KCk7XG4gICAgICAgIHZhciBhY2NlcHRfcHJvYiA9IE1hdGguZXhwKHByb3BfbG9nX2RlbnMgLSBjdXJyX2xvZ19kZW5zKTtcbiAgICAgICAgaWYoYWNjZXB0X3Byb2IgPiBNYXRoLnJhbmRvbSgpKSB7XG4gICAgICAgICAgLy8gV2UgZG8gbm90aGluZyBhcyB0aGUgc3RhdGUgb2YgcGFyYW0gaGFzIGFscmVhZHkgYmVlbiBjaGFuZ2VkIHRvIHRoZSBwcm9wb3NhbFxuICAgICAgICAgIGlmKHRoaXMuaXNfYWRhcHRpbmcpIHRoaXMuYWNjZXB0YW5jZV9jb3VudCsrIDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyByZXZlcnQgc3RhdGUgYmFjayB0byB0aGUgb2xkIHN0YXRlIG9mIHBhcmFtXG4gICAgICAgICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gcGFyYW1fc3RhdGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmKHRoaXMuaXNfYWRhcHRpbmcpIHtcbiAgICAgICAgdGhpcy5pdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uICsrO1xuICAgICAgICBpZih0aGlzLml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24gPj0gdGhpcy5iYXRjaF9zaXplKSB7IC8vIHRoZW4gYWRhcHRcbiAgICAgICAgICB0aGlzLmJhdGNoX2NvdW50ICsrO1xuICAgICAgICAgIHZhciBsb2dfc2RfYWRqdXN0bWVudCA9IFxuICAgICAgICAgICAgTWF0aC5taW4odGhpcy5tYXhfYWRhcHRhdGlvbiwgXG4gICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxfYWRhcHRhdGlvbiAvIE1hdGguc3FydCh0aGlzLmJhdGNoX2NvdW50KSk7XG4gICAgICAgICAgaWYodGhpcy5hY2NlcHRhbmNlX2NvdW50IC8gdGhpcy5iYXRjaF9zaXplID4gdGhpcy50YXJnZXRfYWNjZXB0X3JhdGUpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcF9sb2dfc2NhbGUgKz0gbG9nX3NkX2FkanVzdG1lbnQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucHJvcF9sb2dfc2NhbGUgLT0gbG9nX3NkX2FkanVzdG1lbnQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuYWNjZXB0YW5jZV9jb3VudCA9IDA7XG4gICAgICAgICAgdGhpcy5pdGVyYXRpb25zX3NpbmNlX2FkYXB0aW9uID0gMDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXTtcbiAgfTtcbiAgXG4gIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5pc19hZGFwdGluZyA9IHRydWU7XG4gIH07XG4gIFxuICBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5pc19hZGFwdGluZyA9IGZhbHNlO1xuICB9O1xuICBcbiAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcHJvcF9sb2dfc2NhbGU6IHRoaXMucHJvcF9sb2dfc2NhbGUsXG4gICAgICBpc19hZGFwdGluZzogdGhpcy5pc19hZGFwdGluZyxcbiAgICAgIGFjY2VwdGFuY2VfY291bnQ6IHRoaXMuYWNjZXB0YW5jZV9jb3VudCxcbiAgICAgIGl0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb246IHRoaXMuaXRlcmF0aW9uc19zaW5jZV9hZGFwdGlvbixcbiAgICAgIGJhdGNoX2NvdW50OiB0aGlzLmJhdGNoX2NvdW50XG4gICAgfTtcbiAgfTtcbiAgXG4gIFxuICAvKipcbiAgICogRnVuY3Rpb24gcmV0dXJuaW5nIGEgTm9ybWFsIHByb3Bvc2FsLlxuICAgKi9cbiAgdmFyIG5vcm1hbF9wcm9wb3NhbCA9IGZ1bmN0aW9uKHBhcmFtX3N0YXRlLCBwcm9wX2xvZ19zY2FsZSkge1xuICAgIHJldHVybiBybm9ybShwYXJhbV9zdGF0ZSAsIE1hdGguZXhwKHByb3BfbG9nX3NjYWxlKSk7XG4gIH07XG4gIFxuICAvKipcbiAgICogQGNsYXNzXG4gICAqIEBhdWdtZW50cyB7T25lZGltTWV0cm9wb2xpc1N0ZXBwZXJ9XG4gICAqIEEgXCJzdWJjbGFzc1wiIG9mIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyIG1ha2luZyBjb250aW5vdXMgTm9ybWFsIHByb3Bvc2Fscy5cbiAgICovXG4gIHZhciBSZWFsTWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykge1xuICAgIE9uZWRpbU1ldHJvcG9saXNTdGVwcGVyLmNhbGwodGhpcywgcGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMsIG5vcm1hbF9wcm9wb3NhbCk7XG4gIH07XG4gIFxuICBSZWFsTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShPbmVkaW1NZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUpOyBcbiAgUmVhbE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFJlYWxNZXRyb3BvbGlzU3RlcHBlcjtcbiAgXG4gIC8qKlxuICAgKiBGdW5jdGlvbiByZXR1cm5pbmcgYSBkaXNjcmV0aXplZCBOb3JtYWwgcHJvcG9zYWwuXG4gICAqL1xuICB2YXIgZGlzY3JldGVfbm9ybWFsX3Byb3Bvc2FsID0gZnVuY3Rpb24ocGFyYW1fc3RhdGUsIHByb3BfbG9nX3NjYWxlKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQocm5vcm0ocGFyYW1fc3RhdGUgLCBNYXRoLmV4cChwcm9wX2xvZ19zY2FsZSkpKTtcbiAgfTtcbiAgXG4gICAgLyoqXG4gICAqIEBjbGFzc1xuICAgKiBAYXVnbWVudHMge09uZWRpbU1ldHJvcG9saXNTdGVwcGVyfVxuICAgKiBBIFwic3ViY2xhc3NcIiBvZiBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciBtYWtpbmcgZGlzY3JldGl6ZWQgTm9ybWFsIHByb3Bvc2Fscy5cbiAgICovXG4gIHZhciBJbnRNZXRyb3BvbGlzU3RlcHBlciA9IGZ1bmN0aW9uKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7XG4gICAgT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgZGlzY3JldGVfbm9ybWFsX3Byb3Bvc2FsKTtcbiAgfTtcbiAgXG4gIEludE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoT25lZGltTWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlKTsgXG4gIEludE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEludE1ldHJvcG9saXNTdGVwcGVyO1xuICBcbiAgXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICogQGltcGxlbWVudHMge1N0ZXBwZXJ9XG4gICAqIENvbnN0cnVjdG9yIGZvciBhbiBvYmplY3QgdGhhdCBpbXBsZW1lbnRzIHRoZSBtZXRyb3BvbGlzIHN0ZXAgaW5cbiAgICogdGhlIEFkYXB0aXZlIE1ldHJvcG9saXMtV2l0aGluLUdpYmJzIGFsZ29yaXRobSBpbiBcIkV4YW1wbGVzIG9mIEFkYXB0aXZlIE1DTUNcIlxuICAgKiBieSBSb2JlcnRzIGFuZCBSb3NlbnRoYWwgKDIwMDgpIGZvciBwb3NzaWJseSBtdWx0aWRpbWVuc2lvbmFsIGFycmF5cy4gVGhhdFxuICAgKiBpcywgaW5zdGVhZCBvZiBqdXN0IHRha2luZyBhIHN0ZXAgZm9yIGEgb25lLWRpbWVuc2lvbmFsIHBhcmFtZXRlciBsaWtlIFxuICAgKiBPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciwgdGhpcyBTdGVwcGVyIGlzIHJlc3BvbnNpYmxlIGZvciB0YWtpbmcgc3RlcHMgXG4gICAqIGZvciBhIG11bHRpZGltZW5zaW9uYWwgYXJyYXkuIEl0J3Mgc3RpbGwgcHJldHR5IGR1bWIgYW5kIGp1c3QgdGFrZXNcbiAgICogb25lLWRpbWVuc2lvbmFsIHN0ZXBzIGZvciBlYWNoIHBhcmFtZXRlciBjb21wb25lbnQsIHRob3VnaC5cbiAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgc2luZ2xlIHBhcmFtZXRlciBkZWZpbml0aW9uIGZvciBhIFxuICAgKiAgIG11bHRpZGltZW5zaW9uYWwgcGFyYW1ldGVyLlxuICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuXG4gICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiBcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIHRoZSBzdGVwcGVyLlxuICAgKiBAcGFyYW0gU3ViU3RlcHBlciAtIGEgY29uc3RydWN0b3IgZm9yIHRoZSB0eXBlIG9mIG9uZSBkaW1lbnNpb25hbCBTdGVwcGVyIHRvIGFwcGx5IG9uXG4gICAqICAgYWxsIHRoZSBjb21wb25lbnRzIG9mIHRoZSBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlci5cbiAgKi9cbiAgdmFyIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucywgU3ViU3RlcHBlcikge1xuICAgIFN0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCk7XG4gICAgXG4gICAgdmFyIHBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpO1xuICAgIGlmKHBhcmFtX25hbWVzLmxlbmd0aCAgIT0gMSkge1xuICAgICAgdGhyb3cgXCJNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIGNhbid0IGhhbmRsZSBtb3JlIHRoYW4gb25lIHBhcmFtZXRlci5cIjtcbiAgICB9XG4gICAgdGhpcy5wYXJhbV9uYW1lID0gcGFyYW1fbmFtZXNbMF07XG4gICAgdmFyIHBhcmFtID0gdGhpcy5wYXJhbXNbdGhpcy5wYXJhbV9uYW1lXTtcbiAgICB0aGlzLmxvd2VyID0gcGFyYW0ubG93ZXI7XG4gICAgdGhpcy51cHBlciA9IHBhcmFtLnVwcGVyO1xuICAgIHRoaXMuZGltID0gcGFyYW0uZGltO1xuICBcbiAgICB0aGlzLnByb3BfbG9nX3NjYWxlICAgICA9IGdldF9tdWx0aWRpbV9vcHRpb24oXCJwcm9wX2xvZ19zY2FsZVwiLCBvcHRpb25zLCB0aGlzLmRpbSwgMCk7XG4gICAgdGhpcy5iYXRjaF9zaXplICAgICAgICAgPSBnZXRfbXVsdGlkaW1fb3B0aW9uKFwiYmF0Y2hfc2l6ZVwiLCBvcHRpb25zLCB0aGlzLmRpbSwgNTApO1xuICAgIHRoaXMubWF4X2FkYXB0YXRpb24gICAgID0gZ2V0X211bHRpZGltX29wdGlvbihcIm1heF9hZGFwdGF0aW9uXCIsIG9wdGlvbnMsIHRoaXMuZGltLCAwLjMzKTtcbiAgICB0aGlzLmluaXRpYWxfYWRhcHRhdGlvbiA9IGdldF9tdWx0aWRpbV9vcHRpb24oXCJpbml0aWFsX2FkYXB0YXRpb25cIiwgb3B0aW9ucywgdGhpcy5kaW0sIDEuMCk7XG4gICAgdGhpcy50YXJnZXRfYWNjZXB0X3JhdGUgPSBnZXRfbXVsdGlkaW1fb3B0aW9uKFwidGFyZ2V0X2FjY2VwdF9yYXRlXCIsIG9wdGlvbnMsIHRoaXMuZGltLCAwLjQ0KTtcbiAgICB0aGlzLmlzX2FkYXB0aW5nICAgICAgICA9IGdldF9tdWx0aWRpbV9vcHRpb24oXCJpc19hZGFwdGluZ1wiLCBvcHRpb25zLCB0aGlzLmRpbSwgdHJ1ZSk7XG4gICAgXG4gICAgLy8gVGhpcyBoYWNrIGJlbG93IGlzIGEgcmVjdXJzaXZlIGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBhbiBhcnJheSBvZiBcbiAgICAvLyBvbmUgZGltZW5zaW9uYWwgc3RlcHBlcnMgYWNjb3JkaW5nIHRvIGRpbS5cbiAgICB2YXIgY3JlYXRlX3N1YnN0ZXBwZXJzID0gXG4gICAgICBmdW5jdGlvbihkaW0sIHN1YnN0YXRlLCBsb2dfcG9zdCwgcHJvcF9sb2dfc2NhbGUsIGJhdGNoX3NpemUsIG1heF9hZGFwdGF0aW9uLCBpbml0aWFsX2FkYXB0YXRpb24sIHRhcmdldF9hY2NlcHRfcmF0ZSwgaXNfYWRhcHRpbmcpIHtcbiAgICAgIHZhciBzdWJzdGVwcGVycyA9IFtdO1xuICAgICAgaWYoZGltLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgZGltWzBdOyBpKyspIHtcbiAgICAgICAgICB2YXIgc3Vib3B0aW9ucyA9IHtwcm9wX2xvZ19zY2FsZTogcHJvcF9sb2dfc2NhbGVbaV0sIGJhdGNoX3NpemU6IGJhdGNoX3NpemVbaV0sXG4gICAgICAgICAgICBtYXhfYWRhcHRhdGlvbjogbWF4X2FkYXB0YXRpb25baV0sIGluaXRpYWxfYWRhcHRhdGlvbjogaW5pdGlhbF9hZGFwdGF0aW9uW2ldLFxuICAgICAgICAgICAgdGFyZ2V0X2FjY2VwdF9yYXRlOiB0YXJnZXRfYWNjZXB0X3JhdGVbaV0sIGlzX2FkYXB0aW5nOiBpc19hZGFwdGluZ1tpXX07XG4gICAgICAgICAgICB2YXIgc3VicGFyYW0gPSB7fTtcbiAgICAgICAgICAgIHN1YnBhcmFtW2ldID0gZGVlcF9jbG9uZShwYXJhbSk7XG4gICAgICAgICAgICBzdWJwYXJhbVtpXS5kaW0gPSBbMV07IC8vIEFzIHRoaXMgc2hvdWxkIG5vdyBiZSBhIG9uZS1kaW0gcGFyYW1ldGVyXG4gICAgICAgICAgICBkZWxldGUgc3VicGFyYW1baV0uaW5pdDsgLy8gQXMgaXQgc291bGQgbm90IGJlIG5lZWRlZFxuICAgICAgICAgIHN1YnN0ZXBwZXJzW2ldID0gbmV3IFN1YlN0ZXBwZXIoc3VicGFyYW0sIHN1YnN0YXRlLCBsb2dfcG9zdCwgc3Vib3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBkaW1bMF07IGkrKykge1xuICAgICAgICAgIHN1YnN0ZXBwZXJzW2ldID0gY3JlYXRlX3N1YnN0ZXBwZXJzKGRpbS5zbGljZSgxKSwgc3Vic3RhdGVbaV0sIGxvZ19wb3N0LCBwcm9wX2xvZ19zY2FsZVtpXSwgXG4gICAgICAgICAgICBiYXRjaF9zaXplW2ldLCBtYXhfYWRhcHRhdGlvbltpXSwgaW5pdGlhbF9hZGFwdGF0aW9uW2ldLCB0YXJnZXRfYWNjZXB0X3JhdGVbaV0sIGlzX2FkYXB0aW5nW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHN1YnN0ZXBwZXJzO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5zdWJzdGVwcGVycyA9IGNyZWF0ZV9zdWJzdGVwcGVycyh0aGlzLmRpbSwgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdLCB0aGlzLmxvZ19wb3N0LFxuICAgICAgdGhpcy5wcm9wX2xvZ19zY2FsZSwgdGhpcy5iYXRjaF9zaXplLCB0aGlzLm1heF9hZGFwdGF0aW9uLCB0aGlzLmluaXRpYWxfYWRhcHRhdGlvbixcbiAgICAgIHRoaXMudGFyZ2V0X2FjY2VwdF9yYXRlLCB0aGlzLmlzX2FkYXB0aW5nKTtcbiAgICBcbiAgfTtcbiAgXG4gIE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7IFxuICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE11bHRpZGltQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI7XG4gIFxuICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gR28gdGhyb3VnaCB0aGUgc3Vic3RlcHBlcnMgaW4gYSByYW5kb20gb3JkZXIgYW5kIGNhbGwgc3RlcCgpIG9uIHRoZW0uXG4gICAgcmV0dXJuIG5lc3RlZF9hcnJheV9yYW5kb21fYXBwbHkodGhpcy5zdWJzdGVwcGVycywgZnVuY3Rpb24oc3Vic3RlcHBlcikge3JldHVybiBzdWJzdGVwcGVyLnN0ZXAoKTsgfSk7XG4gIH07XG4gIFxuICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgbmVzdGVkX2FycmF5X2FwcGx5KHRoaXMuc3Vic3RlcHBlcnMsIGZ1bmN0aW9uKHN1YnN0ZXBwZXIpIHtzdWJzdGVwcGVyLnN0YXJ0X2FkYXB0YXRpb24oKTsgfSk7XG4gIH07XG4gIFxuICBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZS5zdG9wX2FkYXB0YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICBuZXN0ZWRfYXJyYXlfYXBwbHkodGhpcy5zdWJzdGVwcGVycywgZnVuY3Rpb24oc3Vic3RlcHBlcikge3N1YnN0ZXBwZXIuc3RvcF9hZGFwdGF0aW9uKCk7IH0pO1xuICB9O1xuICBcbiAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXN0ZWRfYXJyYXlfYXBwbHkodGhpcy5zdWJzdGVwcGVycywgZnVuY3Rpb24oc3Vic3RlcHBlcikge1xuICAgICAgcmV0dXJuIHN1YnN0ZXBwZXIuaW5mbygpOyBcbiAgICB9KTtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICogQGF1Z21lbnRzIHtNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyfVxuICAgKiBBIFwic3ViY2xhc3NcIiBvZiBNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIG1ha2luZyBjb250aW5vdXMgTm9ybWFsIHByb3Bvc2Fscy5cbiAgICovXG4gIHZhciBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciA9IGZ1bmN0aW9uKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7XG4gICAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zLCBSZWFsTWV0cm9wb2xpc1N0ZXBwZXIpO1xuICB9O1xuICBcbiAgTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSk7IFxuICBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjtcblxuICAvKipcbiAgICogQGNsYXNzXG4gICAqIEBhdWdtZW50cyB7TXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcn1cbiAgICogQSBcInN1YmNsYXNzXCIgb2YgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciBtYWtpbmcgZGlzY3JldGl6ZWQgTm9ybWFsIHByb3Bvc2Fscy5cbiAgICovICAgIFxuICB2YXIgTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciA9IGZ1bmN0aW9uKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7XG4gICAgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zLCBJbnRNZXRyb3BvbGlzU3RlcHBlcik7XG4gIH07XG4gIFxuICBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUpOyBcbiAgTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyO1xuICBcbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKiBAaW1wbGVtZW50cyB7U3RlcHBlcn1cbiAgICogQ29uc3RydWN0b3IgZm9yIGFuIG9iamVjdCB0aGF0IGltcGxlbWVudHMgYSBzdGVwIGZvciBhIGJpbmFyeSBwYXJhbWV0ZXIuXG4gICAqIFRoaXMgaXMgZG9uZSBieSBldmFsdWF0aW5nIHRoZSBsb2cgcG9zdGVyaW9yIGZvciBib3RoIHN0YXRlcyBvZiB0aGVcbiAgICogcGFyYW1ldGVyIGFuZCB0aGVuIHNlbGVjdGluZyBhIHN0YXRlIHJhbmRvbWx5IHdpdGggcHJvYmFiaWxpdHkgcmVsYXRpdmUgXG4gICAqIHRvIHRoZSBwb3N0ZXJpb3Igb2YgZWFjaCBzdGF0ZS5cbiAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgc2luZ2xlIHBhcmFtZXRlciBkZWZpbml0aW9uLlxuICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuXG4gICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiBcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIHRoZSBzdGVwcGVyLlxuICAqL1xuICB2YXIgQmluYXJ5U3RlcHBlciA9IGZ1bmN0aW9uKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7XG4gICAgU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0KTtcbiAgICB2YXIgcGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7XG4gICAgaWYocGFyYW1fbmFtZXMubGVuZ3RoICA9PSAxKSB7XG4gICAgICB0aGlzLnBhcmFtX25hbWUgPSBwYXJhbV9uYW1lc1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgXCJCaW5hcnlTdGVwcGVyIGNhbid0IGhhbmRsZSBtb3JlIHRoYW4gb25lIHBhcmFtZXRlci5cIjtcbiAgICB9XG4gIH07XG4gIFxuICBCaW5hcnlTdGVwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RlcHBlci5wcm90b3R5cGUpOyBcbiAgQmluYXJ5U3RlcHBlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCaW5hcnlTdGVwcGVyO1xuICBcbiAgQmluYXJ5U3RlcHBlci5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc3RhdGVbdGhpcy5wYXJhbV9uYW1lXSA9IDA7XG4gICAgdmFyIHplcm9fbG9nX2RlbnMgPSB0aGlzLmxvZ19wb3N0KCk7XG4gICAgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdID0gMTtcbiAgICB2YXIgb25lX2xvZ19kZW5zID0gdGhpcy5sb2dfcG9zdCgpO1xuICAgIHZhciBtYXhfbG9nX2RlbnMgPSBNYXRoLm1heCh6ZXJvX2xvZ19kZW5zLCBvbmVfbG9nX2RlbnMpO1xuICAgIHplcm9fbG9nX2RlbnMgLT0gbWF4X2xvZ19kZW5zO1xuICAgIG9uZV9sb2dfZGVucyAtPSBtYXhfbG9nX2RlbnM7XG4gICAgdmFyIHplcm9fcHJvYiA9IE1hdGguZXhwKHplcm9fbG9nX2RlbnMgLSBNYXRoLmxvZyggTWF0aC5leHAoemVyb19sb2dfZGVucykgKyBNYXRoLmV4cChvbmVfbG9nX2RlbnMpICkgKTtcbiAgICBpZihNYXRoLnJhbmRvbSgpIDwgemVyb19wcm9iKSB7XG4gICAgICB0aGlzLnN0YXRlW3RoaXMucGFyYW1fbmFtZV0gPSAwO1xuICAgICAgcmV0dXJuIDA7XG4gICAgfSAvLyBlbHNlIGtlZXAgdGhlIHBhcmFtIGF0IDEgLlxuICAgIHJldHVybiAxO1xuICB9O1xuICBcbiAgICAvKipcbiAgICogQGNsYXNzXG4gICAqIEBpbXBsZW1lbnRzIHtTdGVwcGVyfVxuICAgKiBKdXN0IGxpa2UgTXVsdGlkaW1Db21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciB0aGlzIFN0ZXBwZXIgdGFrZXMgYSBzdGVwcyBmb3JcbiAgICogYSBtdWx0aWRpbWVuc2lvbmFsIHBhcmFtZXRlciBieSB1cGRhdGluZyBlYWNoIGNvbXBvbmVudCBpbiB0dXJuLiBUaGUgZGlmZmVyZW5jZVxuICAgKiBpcyB0aGF0IHRoaXMgc3RlcHBlciB3b3JrcyBvbiBiaW5hcnkgcGFyYW1ldGVycy5cbiAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgc2luZ2xlIHBhcmFtZXRlciBkZWZpbml0aW9uIGZvciBhIFxuICAgKiAgIG11bHRpZGltZW5zaW9uYWwgcGFyYW1ldGVyLlxuICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuXG4gICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiBcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIHRoZSBzdGVwcGVyLlxuICAqL1xuICB2YXIgQmluYXJ5Q29tcG9uZW50U3RlcHBlciA9IGZ1bmN0aW9uKHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0LCBvcHRpb25zKSB7XG4gICAgU3RlcHBlci5jYWxsKHRoaXMsIHBhcmFtcywgc3RhdGUsIGxvZ19wb3N0KTtcbiAgICBcbiAgICB2YXIgcGFyYW1fbmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhcmFtcyk7XG4gICAgaWYocGFyYW1fbmFtZXMubGVuZ3RoICA9PSAxKSB7XG4gICAgICB0aGlzLnBhcmFtX25hbWUgPSBwYXJhbV9uYW1lc1swXTtcbiAgICAgIHZhciBwYXJhbSA9IHRoaXMucGFyYW1zW3RoaXMucGFyYW1fbmFtZV07XG4gICAgICB0aGlzLmRpbSA9IHBhcmFtLmRpbTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgXCJCaW5hcnlDb21wb25lbnRTdGVwcGVyIGNhbid0IGhhbmRsZSBtb3JlIHRoYW4gb25lIHBhcmFtZXRlci5cIjtcbiAgICB9XG4gICAgXG4gICAgdmFyIGNyZWF0ZV9zdWJzdGVwcGVycyA9IFxuICAgICAgZnVuY3Rpb24oZGltLCBzdWJzdGF0ZSwgbG9nX3Bvc3QpIHtcbiAgICAgIHZhciBzdWJzdGVwcGVycyA9IFtdO1xuICAgICAgdmFyIGk7XG4gICAgICBpZihkaW0ubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGZvcihpID0gMDsgaSA8IGRpbVswXTsgaSsrKSB7XG4gICAgICAgICAgdmFyIHN1YnBhcmFtcyA9IHt9O1xuICAgICAgICAgIHN1YnBhcmFtc1tpXSA9IHBhcmFtO1xuICAgICAgICAgIHN1YnN0ZXBwZXJzW2ldID0gbmV3IEJpbmFyeVN0ZXBwZXIoc3VicGFyYW1zLCBzdWJzdGF0ZSwgbG9nX3Bvc3QpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IoaSA9IDA7IGkgPCBkaW1bMF07IGkrKykge1xuICAgICAgICAgIHN1YnN0ZXBwZXJzW2ldID0gY3JlYXRlX3N1YnN0ZXBwZXJzKGRpbS5zbGljZSgxKSwgc3Vic3RhdGVbaV0sIGxvZ19wb3N0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHN1YnN0ZXBwZXJzO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5zdWJzdGVwcGVycyA9IGNyZWF0ZV9zdWJzdGVwcGVycyh0aGlzLmRpbSwgdGhpcy5zdGF0ZVt0aGlzLnBhcmFtX25hbWVdLCB0aGlzLmxvZ19wb3N0KTtcbiAgfTtcbiAgXG4gIEJpbmFyeUNvbXBvbmVudFN0ZXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdGVwcGVyLnByb3RvdHlwZSk7IFxuICBCaW5hcnlDb21wb25lbnRTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEJpbmFyeUNvbXBvbmVudFN0ZXBwZXI7XG4gIFxuICBCaW5hcnlDb21wb25lbnRTdGVwcGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gR28gdGhyb3VnaCB0aGUgc3Vic3RlcHBlcnMgaW4gYSByYW5kb20gb3JkZXIgYW5kIGNhbGwgc3RlcCgpIG9uIHRoZW0uXG4gICAgcmV0dXJuIG5lc3RlZF9hcnJheV9yYW5kb21fYXBwbHkodGhpcy5zdWJzdGVwcGVycywgZnVuY3Rpb24oc3Vic3RlcHBlcikge3JldHVybiBzdWJzdGVwcGVyLnN0ZXAoKTsgfSk7XG4gIH07XG4gIFxuICAvKipcbiAgICogQGNsYXNzXG4gICAqIEBpbXBsZW1lbnRzIHtTdGVwcGVyfVxuICAgKiBUaGlzIHN0ZXBwZXIgY2FuIGJlIHJlc3BvbnNpYmxlIGZvciB0YWtpbmcgYSBzdGVwIGZvciBvbmUgb3IgbW9yZSBwYXJhbWV0ZXJzLlxuICAgKiBGb3IgcmVhbCBhbmQgaW50IHBhcmFtZXRlcnMgaXQgdGFrZXMgTWV0cm9wb2xpcyB3aXRoaW4gR2liYnMgc3RlcHMsIGFuZCBmb3IgXG4gICAqIGJpbmFyeSBwYXJhbWV0ZXJzIGl0IGRvZXMgZXZhbHVhdGVzIHRoZSBwb3N0ZXJpb3IgZm9yIGJvdGggcGFyYW10ZXIgdmFsdWVzIGFuZFxuICAgKiByYW5kb21seSBjaGFuZ2VzIHRvIGEgY2VydGFpbiB2YWx1ZSBwcm9wb3J0aW9uYWxseSB0byB0aGF0IHZhbHVlJ3MgcG9zdGVyaW9yXG4gICAqICh0aGlzIGlzIGFsc28gZG9uZSBmb3IgZWFjaCBwYXJhbWV0ZXIsIHNvIGFsc28gYSAqIHdpdGhpbiBHaWJicyBhcHByb2FjaCkuXG4gICAqIFRoaXMgc3RlcHBlciBpcyBhbHNvIGFkYXB0aXZlIGFuZCBjYW4gYmUgZWZmaWNpZW50IHdoZW4gdGhlIG51bWJlciBvZiBwYXJhbWV0ZXJzXG4gICAqIGFyZSBub3QgdG9vIGhpZ2ggYW5kIHRoZSBjb3JyZWxhdGlvbnMgYmV0d2VlbiBwYXJhbWV0ZXJzIGFyZSBsb3cuXG4gICAqIEBwYXJhbSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBhIG9uZSBvciBtb3JlIHBhcmFtZXRlciBkZWZpbml0aW9uc1xuICAgKiBAcGFyYW0gc3RhdGUgLSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgc3RhdGUgb2YgYWxsIHBhcmFtZXRlcnMuXG4gICAqIEBwYXJhbSBsb2dfcG9zdCAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBsb2cgZGVuc2l0eSB0aGF0IGRlcGVuZHMgb24gdGhlIHN0YXRlLiBcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIHRoZSBzdGVwcGVyLlxuICAqL1xuICB2YXIgQW13Z1N0ZXBwZXIgPSBmdW5jdGlvbihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykge1xuICAgIFN0ZXBwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCk7XG4gICAgdGhpcy5wYXJhbV9uYW1lcyA9IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKTtcbiAgICB0aGlzLnN1YnN0ZXBwZXJzID0gW107XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMucGFyYW1fbmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBwYXJhbSA9IHBhcmFtc1t0aGlzLnBhcmFtX25hbWVzW2ldXTtcbiAgICAgIHZhciBTZWxlY3RTdGVwcGVyO1xuICAgICAgc3dpdGNoIChwYXJhbS50eXBlKSB7XG4gICAgICAgIGNhc2UgXCJyZWFsXCI6XG4gICAgICAgICAgaWYoYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pKSB7XG4gICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gUmVhbE1ldHJvcG9saXNTdGVwcGVyO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiaW50XCI6XG4gICAgICAgICAgaWYoYXJyYXlfZXF1YWwocGFyYW0uZGltLCBbMV0pKSB7XG4gICAgICAgICAgICBTZWxlY3RTdGVwcGVyID0gSW50TWV0cm9wb2xpc1N0ZXBwZXI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImJpbmFyeVwiOlxuICAgICAgICAgIGlmKGFycmF5X2VxdWFsKHBhcmFtLmRpbSwgWzFdKSkge1xuICAgICAgICAgICAgU2VsZWN0U3RlcHBlciA9IEJpbmFyeVN0ZXBwZXI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFNlbGVjdFN0ZXBwZXIgPSBCaW5hcnlDb21wb25lbnRTdGVwcGVyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aHJvdyBcIkFtd2dTdGVwcGVyIGNhbid0IGhhbmRsZSBwYXJhbWV0ZXIgXCIgKyB0aGlzLnBhcmFtX25hbWVzW2ldICArXCIgd2l0aCB0eXBlIFwiICsgcGFyYW0udHlwZTsgXG4gICAgICB9XG4gICAgICB2YXIgcGFyYW1fb2JqZWN0X3dyYXAgPSB7fTtcbiAgICAgIHBhcmFtX29iamVjdF93cmFwW3RoaXMucGFyYW1fbmFtZXNbaV1dID0gcGFyYW07XG4gICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgIHZhciBwYXJhbV9vcHRpb25zID0gb3B0aW9ucy5wYXJhbXMgJiYgb3B0aW9ucy5wYXJhbXNbdGhpcy5wYXJhbV9uYW1lc1tpXV0gfHwge307XG4gICAgICBwYXJhbV9vcHRpb25zLnByb3BfbG9nX3NjYWxlICAgICA9IHBhcmFtX29wdGlvbnMucHJvcF9sb2dfc2NhbGUgICAgIHx8IG9wdGlvbnMucHJvcF9sb2dfc2NhbGU7IFxuICAgICAgcGFyYW1fb3B0aW9ucy5iYXRjaF9zaXplICAgICAgICAgPSBwYXJhbV9vcHRpb25zLmJhdGNoX3NpemUgICAgICAgICB8fCBvcHRpb25zLmJhdGNoX3NpemU7IFxuICAgICAgcGFyYW1fb3B0aW9ucy5tYXhfYWRhcHRhdGlvbiAgICAgPSBwYXJhbV9vcHRpb25zLm1heF9hZGFwdGF0aW9uICAgICB8fCBvcHRpb25zLm1heF9hZGFwdGF0aW9uO1xuICAgICAgcGFyYW1fb3B0aW9ucy5pbml0aWFsX2FkYXB0YXRpb24gPSBwYXJhbV9vcHRpb25zLmluaXRpYWxfYWRhcHRhdGlvbiB8fCBvcHRpb25zLmluaXRpYWxfYWRhcHRhdGlvbjtcbiAgICAgIHBhcmFtX29wdGlvbnMudGFyZ2V0X2FjY2VwdF9yYXRlID0gcGFyYW1fb3B0aW9ucy50YXJnZXRfYWNjZXB0X3JhdGUgfHwgb3B0aW9ucy50YXJnZXRfYWNjZXB0X3JhdGU7IFxuICAgICAgcGFyYW1fb3B0aW9ucy5pc19hZGFwdGluZyAgICAgICAgPSBwYXJhbV9vcHRpb25zLmlzX2FkYXB0aW5nICAgICAgICB8fCBvcHRpb25zLmlzX2FkYXB0aW5nOyBcbiAgICAgIHRoaXMuc3Vic3RlcHBlcnNbaV0gPSBuZXcgU2VsZWN0U3RlcHBlcihwYXJhbV9vYmplY3Rfd3JhcCwgc3RhdGUsIGxvZ19wb3N0LCBwYXJhbV9vcHRpb25zKTtcbiAgICB9XG4gIH07XG4gIFxuICBBbXdnU3RlcHBlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN0ZXBwZXIucHJvdG90eXBlKTsgXG4gIEFtd2dTdGVwcGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEFtd2dTdGVwcGVyO1xuICBcbiAgQW13Z1N0ZXBwZXIucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbigpIHtcbiAgICBzaHVmZmxlX2FycmF5KHRoaXMuc3Vic3RlcHBlcnMpO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnN1YnN0ZXBwZXJzW2ldLnN0ZXAoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc3RhdGU7XG4gIH07XG4gIFxuICBBbXdnU3RlcHBlci5wcm90b3R5cGUuc3RhcnRfYWRhcHRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnN0ZXBwZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnN1YnN0ZXBwZXJzW2ldLnN0YXJ0X2FkYXB0YXRpb24oKTtcbiAgICB9XG4gIH07XG4gIFxuICBBbXdnU3RlcHBlci5wcm90b3R5cGUuc3RvcF9hZGFwdGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vic3RlcHBlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuc3Vic3RlcHBlcnNbaV0uc3RvcF9hZGFwdGF0aW9uKCk7XG4gICAgfSBcbiAgfTtcbiAgXG4gIEFtd2dTdGVwcGVyLnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGluZm8gPSB7fTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5zdWJzdGVwcGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgaW5mb1t0aGlzLnBhcmFtX25hbWVzW2ldXSA9IHRoaXMuc3Vic3RlcHBlcnNbaV0uaW5mbygpO1xuICAgIH1cbiAgICByZXR1cm4gaW5mbztcbiAgfTtcbiAgXG4gIFxuICBcbiAgLy8vLy8vLy8vLy8gU2FtcGxlciBGdW5jdGlvbnMgLy8vLy8vLy8vL1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIFxuICBcbiAgIC8qKlxuICAgKiBAaW50ZXJmYWNlXG4gICAqIFdoaWxlIHlvdSBjb3VsZCBmaXQgYSBtb2RlbCBieSBwYXN0aW5nIHRvZ2V0aGVyIFN0ZXBwZXJzLCBhXG4gIC8vIFNhbXBsZXIgaXMgaGVyZSBpcyBhIGNvbnZlbmllbmNlIGNsYXNzIHdoZXJlIGFuIGluc3RhbmNlIG9mIFNhbXBsZXJcbiAgLy8gc2V0cyB1cCB0aGUgU3RlcHBlcnMsIGNoZWNrcyB0aGUgcGFyYW1ldGVyIGRlZmluaXRpb24sXG4gIC8vIGFuZCBtYW5hZ2VzIHRoZSBzYW1wbGluZy4gVGhpcyBoZXJlIGRlZmluZXMgdGhlIFNhbXBsZXIgXCJpbnRlcmZhY2VcIi5cbiAgICogQGludGVyZmFjZVxuICAgKiBAcGFyYW0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggcGFyYW1ldGVyIGRlZmluaXRpb25zLCBmb3IgZXhhbXBsZTpcbiAgICogICB7XCJtdVwiOiB7XCJ0eXBlXCI6IFwicmVhbFwifSwgXCJzaWdtYVwiOiB7XCJ0eXBlXCI6IFwicmVhbFwiLCBcImxvd2VyXCIgPSAwfX1cbiAgICogICBUaGUgcGFyYW1ldGVyIGRlZmluaXRpb25zIGRvZXNuJ3QgaGF2ZSB0byBiZSBcImNvbXBsZXRlXCIgYW5kIHByb3BlcnRpZXNcbiAgICogICBsZWZ0IG91dCAobGlrZSBsb3dlciBhbmQgdXBwZXIpIHdpbGwgYmUgZmlsbGVkIGluIGJ5IGRlZmF1bHRzLlxuICAgKiBAcGFyYW0gbG9nX3Bvc3QgLSBBIGZ1bmN0aW9uIHdpdGggc2lnbmF0dXJlIGZ1bmN0aW9uKHN0YXRlLCBkYXRhKS4gSGVyZVxuICAgKiAgIHN0YXRlIHdpbGwgYmUgYW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3RhdGUgd2l0aCBlYWNoIHBhcmFtZXRlciBhcyBhIFxuICAgKiAgIGtleSBhbmQgdGhlIHBhcmFtZXRlciB2YWx1ZXMgYXMgbnVtYmVycyBvciBhcnJheXMuIEZvciBleGFtcGxlOlxuICAgKiAgIHtcIm11XCI6IDMsIFwic2lnbWFcIjogMS41fS4gVGhlIGRhdGEgYXJndW1lbnQgd2lsbCBiZSB0aGUgc2FtZSBvYmplY3QgYXMgXG4gICAqICAgdGhlIGRhdGEgYXJndW1lbnQgZ2l2ZW4gYmVsb3cuXG4gICAqIEBwYXJhbSBkYXRhIC0gYW4gb2JqZWN0IHRoYXQgd2lsbCBiZSBwYXNzZWQgb24gdG8gdGhlIGxvZ19wb3N0IGZ1bmN0aW9uXG4gICAqICAgd2hlbiBzYW1wbGluZy5cbiAgICogQHBhcmFtIG9wdGlvbnMgLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zIHRvIHRoZSBzYW1wbGVyLlxuICAgKi9cbiAgdmFyIFNhbXBsZXIgPSBmdW5jdGlvbihwYXJhbXMsIGxvZ19wb3N0LCBkYXRhLCBvcHRpb25zKSB7XG4gICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICB0aGlzLnBhcmFtX25hbWVzID0gT2JqZWN0LmtleXModGhpcy5wYXJhbXMpO1xuICAgIFxuICAgIC8vIFNldHRpbmcgZGVmYXVsdCBvcHRpb25zIGlmIG5vdCBwYXNzZWQgdGhyb3VnaCB0aGUgb3B0aW9ucyBvYmplY3RcbiAgICB0aGlzLnBhcmFtX2luaXRfZnVuICAgPSBnZXRfb3B0aW9uKFwicGFyYW1faW5pdF9mdW5cIiwgb3B0aW9ucywgcGFyYW1faW5pdF9maXhlZCk7XG4gICAgdmFyIHRoaW5uaW5nX2ludGVydmFsID0gZ2V0X29wdGlvbihcInRoaW5cIiwgb3B0aW9ucywgMSk7XG4gICAgdmFyIHBhcmFtc190b19tb25pdG9yID0gZ2V0X29wdGlvbihcIm1vbml0b3JcIiwgb3B0aW9ucywgbnVsbCk7XG4gICAgdGhpcy50aGluKHRoaW5uaW5nX2ludGVydmFsKTtcbiAgICB0aGlzLm1vbml0b3IocGFyYW1zX3RvX21vbml0b3IpO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgLy8gQ29tcGxldGluZyB0aGUgcGFyYW1zIGFuZCBpbml0aWFsaXppbmcgdGhlIHN0YXRlLlxuICAgIHRoaXMucGFyYW1zID0gY29tcGxldGVfcGFyYW1zKHRoaXMucGFyYW1zLCB0aGlzLnBhcmFtX2luaXRfZnVuKTtcbiAgICB2YXIgc3RhdGUgPSB7fTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5wYXJhbV9uYW1lcy5sZW5ndGg7IGkrKyApIHtcbiAgICAgIHN0YXRlW3RoaXMucGFyYW1fbmFtZXNbaV1dID0gdGhpcy5wYXJhbXNbdGhpcy5wYXJhbV9uYW1lc1tpXV0uaW5pdDtcbiAgICB9XG4gICAgdGhpcy5sb2dfcG9zdCA9IGZ1bmN0aW9uKCkgeyBcbiAgICAgIHJldHVybiBsb2dfcG9zdChzdGF0ZSwgZGF0YSk7XG4gICAgfTtcbiAgICAvLyBSdW5uaW5nIHRoZSBsb2dfcG9zdCBmdW5jdGlvbiBvbmNlIGluIGNhc2UgaXQgZnVydGhlciBtb2RpZmllcyB0aGUgc3RhdGVcbiAgICAvLyBmb3IgZXhhbXBsZSBhZGRpbmcgZGVyaXZlZCBxdWFudGl0aWVzLlxuICAgIHRoaXMubG9nX3Bvc3QoKTtcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgdGhpcy5zdGVwcGVycyA9IHRoaXMuY3JlYXRlX3N0ZXBwZXJfZW5zYW1ibGUodGhpcy5wYXJhbXMsIHRoaXMuc3RhdGUsIHRoaXMubG9nX3Bvc3QsIHRoaXMub3B0aW9ucyk7XG4gIH07XG4gIFxuICAvKiogU2hvdWxkIHJldHVybiBhIHZlY3RvciBvZiBzdGVwcGVycyB0aGF0IHdoZW4gY2FsbGVkIFxuICAgKiBzaG91bGQgdGFrZSBhIHN0ZXAgaW4gdGhlIHBhcmFtZXRlciBzcGFjZS5cbiAgICovXG4gIFNhbXBsZXIucHJvdG90eXBlLmNyZWF0ZV9zdGVwcGVyX2Vuc2FtYmxlID0gZnVuY3Rpb24oc3RhdGUsIGxvZ19wb3N0KXtcbiAgICB0aHJvdyBcIkV2ZXJ5IFNhbXBsZXIgbmVlZHMgdG8gaW1wbGVtZW50IGNyZWF0ZV9zdGVwcGVyX2Vuc2FtYmxlKClcIjtcbiAgfTtcbiAgXG4gIC8qKiBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGluZm8gYWJvdXQgdGhlIHN0YXRlIG9mIHRoZSBTYW1wbGVyLlxuICAgKi8gXG4gIFNhbXBsZXIucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge3N0YXRlOiB0aGlzLnN0YXRlLCB0aGluOiB0aGlzLnRoaW4sIG1vbml0b3I6IHRoaXMubW9uaXRvcixcbiAgICAgICAgICAgIHN0ZXBwZXJzOiB0aGlzLnN0ZXBwZXJzfTtcbiAgfTtcbiAgXG4gIC8qKiBUYWtlcyBhIHN0ZXAgaW4gdGhlIHBhcmFtZXRlciBzcGFjZS4gUmV0dXJucyB0aGUgbmV3IHNwYWNlXG4gICAqIGJ1dCBhbHNvIG1vZGlmaWVzIHRoZSBzdGF0ZSBpbiBwbGFjZS5cbiAgICovIFxuICBTYW1wbGVyLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24oKSB7XG4gICAgc2h1ZmZsZV9hcnJheSh0aGlzLnN0ZXBwZXJzKTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5zdGVwcGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5zdGVwcGVyc1tpXS5zdGVwKCk7XG4gICAgfVxuICAgIGlmKE9iamVjdC5rZXlzKHRoaXMuc3RhdGUpLmxlbmd0aCA+IE9iamVjdC5rZXlzKHRoaXMucGFyYW1zKS5sZW5ndGgpIHtcbiAgICAgIC8vIFRoZSBzdGF0ZSBjb250YWlucyBkZXZpdmVkIHF1YW50aXRpZXMgKG5vdCBvbmx5IHBhcmFtZXRlcnMpIGFuZCB3ZVxuICAgICAgLy8gbmVlZCB0byBydW4gdGhlIGxvZ19wb3N0IG9uY2UgbW9yZSBpbiBvcmRlciB0byBzZXQgdGhlIGRlcml2ZWQgcXVhbnRpdGllc1xuICAgICAgLy8gZm9yIHRoZSBmaW5hbCBwYXJhbWV0ZXIgc3RhdGVcbiAgICAgIHRoaXMubG9nX3Bvc3QoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc3RhdGU7XG4gIH07XG4gIFxuICAvKipcbiAgICogVGFrZXMgbl9pdGVyYXRpb25zIHN0ZXBzIGluIHRoZSBwYXJhbWV0ZXIgc3BhY2UgYW5kIHJldHVybnMgdGhlbVxuICAgKiBhcyBhbiBvYmplY3Qgb2YgYXJyYXlzIHdpdGggb25lIGFycmF5IHBlciBwYXJhbWV0ZXIuIEZvciBleGFtcGxlOlxuICAgKiB7bXU6IFsxLCAtMSwgMiwgMywgLi4uXSwgc2lnbWE6IFsxLCAyLCAyLCAxLCAuLi5dfS5cbiAgICogSWYgdGhpbiBpcyA+IDEgdGhlbiBuX2l0ZXJhdGlvbnMgLyB0aGluIHNhbXBsZXMgYXJlIHJldHVybmVkLlxuICAgKi8gXG4gIFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZSA9IGZ1bmN0aW9uKG5faXRlcmF0aW9ucykge1xuICAgICAgLy8gSW5pdGlhbGl6aW5nIGN1cnJfc2FtcGxlIHdoZXJlIHRoZSBzYW1wbGUgaXMgZ29pbmcgdG8gYmUgc2F2ZWRcbiAgICAgIC8vIGFzIGFuIG9iamVjdCBjb250YWluaW5nIG9uZSBhcnJheSBwZXIgcGFyYW1ldGVyIHRvIGJlIG1vbml0b3JlZC5cbiAgICAgIHZhciBpLCBqLCBtb25pdG9yZWRfcGFyYW1zO1xuICAgICAgaWYodGhpcy5tb25pdG9yZWRfcGFyYW1zID09PSBudWxsKSB7XG4gICAgICAgIG1vbml0b3JlZF9wYXJhbXMgPSBPYmplY3Qua2V5cyh0aGlzLnN0YXRlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1vbml0b3JlZF9wYXJhbXMgPSB0aGlzLm1vbml0b3JlZF9wYXJhbXM7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHZhciBjdXJyX3NhbXBsZSA9IHt9O1xuICAgICAgZm9yKGogPSAwOyBqIDwgbW9uaXRvcmVkX3BhcmFtcy5sZW5ndGg7IGorKykge1xuICAgICAgICBjdXJyX3NhbXBsZVttb25pdG9yZWRfcGFyYW1zW2pdXSA9IFtdO1xuICAgICAgfVxuICAgICAgXG4gICAgICBmb3IoaSA9IDA7IGkgPCBuX2l0ZXJhdGlvbnM7IGkrKykge1xuICAgICAgICBpZihpICUgdGhpcy50aGlubmluZ19pbnRlcnZhbCA9PT0gMCkge1xuICAgICAgICAgIGZvcihqID0gMDsgaiA8IG1vbml0b3JlZF9wYXJhbXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIHZhciBwYXJhbSA9IG1vbml0b3JlZF9wYXJhbXNbal07XG4gICAgICAgICAgICBjdXJyX3NhbXBsZVtwYXJhbV0ucHVzaCggY2xvbmVfcGFyYW1fZHJhdyh0aGlzLnN0YXRlW3BhcmFtXSkgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGVwKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY3Vycl9zYW1wbGU7XG4gIH07XG4gIFxuICAvKipcbiAgICogVGFrZXMgbl9pdGVyYXRpb24gc3RlcHMgaW4gcGFyYW1ldGVyIHNwYWNlIGJ1dCByZXR1cm5zIG5vdGhpbmcuXG4gICAqLyBcbiAgU2FtcGxlci5wcm90b3R5cGUuYnVybiA9IGZ1bmN0aW9uKG5faXRlcmF0aW9ucykge1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBuX2l0ZXJhdGlvbnM7IGkrKykge1xuICAgICAgdGhpcy5zdGVwKCk7XG4gICAgfVxuICB9O1xuICBcbiAgLyoqXG4gICAqIFNldHMgd2hhdCBwYXJhbWV0ZXJzIHNob3VsZCBiZSBtb25pdG9yZWQgYW5kIHJldHVybmVkIHdoZW4gY2FsbGluZ1xuICAgKiBzYW1wbGUuXG4gICAqLyBcbiAgU2FtcGxlci5wcm90b3R5cGUubW9uaXRvciA9IGZ1bmN0aW9uKHBhcmFtc190b19tb25pdG9yKSB7XG4gICAgICB0aGlzLm1vbml0b3JlZF9wYXJhbXMgPSBwYXJhbXNfdG9fbW9uaXRvcjtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB0aGlubmluZy4gRm9yIGV4YW1wbGUgdGhpbiA9PSAxMCBtZWFucyB0aGF0IGV2ZXJ5IDEwdGggcG9zdGVyaW9yXG4gICAqIGRyYXcgd2lsbCBiZSBrZXB0LlxuICAgKi8gXG4gIFNhbXBsZXIucHJvdG90eXBlLnRoaW4gPSBmdW5jdGlvbih0aGlubmluZ19pbnRlcnZhbCkge1xuICAgIHRoaXMudGhpbm5pbmdfaW50ZXJ2YWwgPSB0aGlubmluZ19pbnRlcnZhbDtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBTZXRzIGFkYXB0YXRpb24gb24sIGlmIGFwcGxpY2FibGUsIGluIGFsbCBzdGVwcGVycy5cbiAgICovIFxuICBTYW1wbGVyLnByb3RvdHlwZS5zdGFydF9hZGFwdGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuc3RlcHBlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuc3RlcHBlcnNbaV0uc3RhcnRfYWRhcHRhdGlvbigpO1xuICAgIH1cbiAgfTtcbiAgXG4gICAgLyoqXG4gICAqIFNldHMgYWRhcHRhdGlvbiBvZmYsIGlmIGFwcGxpY2FibGUsIGluIGFsbCBzdGVwcGVycy5cbiAgICovIFxuICBTYW1wbGVyLnByb3RvdHlwZS5zdG9wX2FkYXB0YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5zdGVwcGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5zdGVwcGVyc1tpXS5zdG9wX2FkYXB0YXRpb24oKTtcbiAgICB9XG4gIH07XG4gIFxuICAgLyoqXG4gICAqIEBjbGFzc1xuICAgKiBAaW1wbGVtZW50cyB7U2FtcGxlcn1cbiAgICogVGhpcyBzYW1wbGVyIHVzZXMgdGhlIEFtd2dTdGVwcGVyIGFzIHRoZSBzdGVwcGVyIGZ1bmN0aW9uIHdoaWNoIGltcGxlbWVudHMgdGhlIFxuICAgKiBBZGFwdGl2ZSBNZXRyb3BvbGlzLVdpdGhpbi1HaWJicyBhbGdvcml0aG0gaW4gXCJFeGFtcGxlcyBvZiBBZGFwdGl2ZSBNQ01DXCJcbiAgICogYnkgUm9iZXJ0cyBhbmQgUm9zZW50aGFsICgyMDA4KS4gQW4gYWRpdGlvbiBpcyB0aGF0IGl0IGhhbmRsZXMgaW50IHBhcmFtZXRlcnNcbiAgICogYnkgbWFraW5nIGRpc2NyZXRlIE5vcm1hbCBwcm9wb3NhbHMgYW5kIGJpbmFyeSBwYXJhbWV0ZXJzIGJ5IHRha2luZyBvbiBhIG5ldyBcbiAgICogdmFsdWUgcHJvcG9ydGlvbmFsIHRvIHRoZSBwb3N0ZXJpb3Igb2YgdGhlIHR3byBwb3NzaWJsZSBzdGF0ZXMgb2YgdGhlXG4gICAqIHBhcmFtZXRlci4gVGhpcyBzYW1wbGVyIGNhbiBiZSBlZmZpY2llbnQgd2hlbiB0aGUgbnVtYmVyIG9mIHBhcmFtZXRlcnNcbiAgICogYXJlIG5vdCB0b28gaGlnaCBhbmQgdGhlIGNvcnJlbGF0aW9ucyBiZXR3ZWVuIHBhcmFtZXRlcnMgYXJlIGxvdy5cbiAgICogQHBhcmFtIHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIGEgb25lIG9yIG1vcmUgcGFyYW1ldGVyIGRlZmluaXRpb25zXG4gICAqIEBwYXJhbSBzdGF0ZSAtIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBzdGF0ZSBvZiBhbGwgcGFyYW1ldGVycy5cbiAgICogQHBhcmFtIGxvZ19wb3N0IC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxvZyBkZW5zaXR5IHRoYXQgZGVwZW5kcyBvbiB0aGUgc3RhdGUuIFxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMgdG8gdGhlIHN0ZXBwZXIuXG4gICovXG4gIHZhciBBbXdnU2FtcGxlciA9IGZ1bmN0aW9uKHBhcmFtcywgbG9nX3Bvc3QsIGRhdGEsIG9wdGlvbnMpIHtcbiAgICBTYW1wbGVyLmNhbGwodGhpcywgcGFyYW1zLCBsb2dfcG9zdCwgZGF0YSwgb3B0aW9ucyk7XG4gIH07XG4gIFxuICBBbXdnU2FtcGxlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNhbXBsZXIucHJvdG90eXBlKTsgXG4gIEFtd2dTYW1wbGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEFtd2dTYW1wbGVyO1xuICBcbiAgQW13Z1NhbXBsZXIucHJvdG90eXBlLmNyZWF0ZV9zdGVwcGVyX2Vuc2FtYmxlID0gZnVuY3Rpb24ocGFyYW1zLCBzdGF0ZSwgbG9nX3Bvc3QsIG9wdGlvbnMpe1xuICAgIHJldHVybiBbIG5ldyBBbXdnU3RlcHBlcihwYXJhbXMsIHN0YXRlLCBsb2dfcG9zdCwgb3B0aW9ucykgXTtcbiAgfTtcbiAgXG4gIFxuICAvLyBSZXR1cm5pbmcgdGhlIGZ1bmN0aW9ucyB0aGF0IHNob3VsZCBiZSBwdWJsaWNseSBleHBvc2VkIGJ5IHRoaXMgbW9kdWxlXG4gIHJldHVybiB7XG4gICAgcnVuaWY6IHJ1bmlmLFxuICAgIHJ1bmlmX2Rpc2NyZXRlOiBydW5pZl9kaXNjcmV0ZSxcbiAgICBybm9ybTogcm5vcm0sXG4gICAgcGFyYW1faW5pdF9maXhlZDogcGFyYW1faW5pdF9maXhlZCwgXG4gICAgY29tcGxldGVfcGFyYW1zOiBjb21wbGV0ZV9wYXJhbXMsIFxuICAgIFJlYWxNZXRyb3BvbGlzU3RlcHBlcjogUmVhbE1ldHJvcG9saXNTdGVwcGVyLCBcbiAgICBJbnRNZXRyb3BvbGlzU3RlcHBlcjogSW50TWV0cm9wb2xpc1N0ZXBwZXIsIFxuICAgIE11bHRpUmVhbENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyOiBNdWx0aVJlYWxDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciwgXG4gICAgTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlcjogTXVsdGlJbnRDb21wb25lbnRNZXRyb3BvbGlzU3RlcHBlciwgXG4gICAgQmluYXJ5U3RlcHBlcjogQmluYXJ5U3RlcHBlciwgXG4gICAgQmluYXJ5Q29tcG9uZW50U3RlcHBlcjogQmluYXJ5Q29tcG9uZW50U3RlcHBlciwgXG4gICAgQW13Z1N0ZXBwZXI6IEFtd2dTdGVwcGVyLCBcbiAgICBBbXdnU2FtcGxlcjogQW13Z1NhbXBsZXJcbiAgfTtcbn0pKTtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGFzY2VuZGluZyhhLCBiKSB7XG4gIHJldHVybiBhID09IG51bGwgfHwgYiA9PSBudWxsID8gTmFOIDogYSA8IGIgPyAtMSA6IGEgPiBiID8gMSA6IGEgPj0gYiA/IDAgOiBOYU47XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBudW1iZXIoeCkge1xuICByZXR1cm4geCA9PT0gbnVsbCA/IE5hTiA6ICt4O1xufVxuXG5leHBvcnQgZnVuY3Rpb24qIG51bWJlcnModmFsdWVzLCB2YWx1ZW9mKSB7XG4gIGlmICh2YWx1ZW9mID09PSB1bmRlZmluZWQpIHtcbiAgICBmb3IgKGxldCB2YWx1ZSBvZiB2YWx1ZXMpIHtcbiAgICAgIGlmICh2YWx1ZSAhPSBudWxsICYmICh2YWx1ZSA9ICt2YWx1ZSkgPj0gdmFsdWUpIHtcbiAgICAgICAgeWllbGQgdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGxldCBpbmRleCA9IC0xO1xuICAgIGZvciAobGV0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgICAgaWYgKCh2YWx1ZSA9IHZhbHVlb2YodmFsdWUsICsraW5kZXgsIHZhbHVlcykpICE9IG51bGwgJiYgKHZhbHVlID0gK3ZhbHVlKSA+PSB2YWx1ZSkge1xuICAgICAgICB5aWVsZCB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCBhc2NlbmRpbmcgZnJvbSBcIi4vYXNjZW5kaW5nLmpzXCI7XG5pbXBvcnQgcGVybXV0ZSBmcm9tIFwiLi9wZXJtdXRlLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNvcnQodmFsdWVzLCAuLi5GKSB7XG4gIGlmICh0eXBlb2YgdmFsdWVzW1N5bWJvbC5pdGVyYXRvcl0gIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcInZhbHVlcyBpcyBub3QgaXRlcmFibGVcIik7XG4gIHZhbHVlcyA9IEFycmF5LmZyb20odmFsdWVzKTtcbiAgbGV0IFtmXSA9IEY7XG4gIGlmICgoZiAmJiBmLmxlbmd0aCAhPT0gMikgfHwgRi5sZW5ndGggPiAxKSB7XG4gICAgY29uc3QgaW5kZXggPSBVaW50MzJBcnJheS5mcm9tKHZhbHVlcywgKGQsIGkpID0+IGkpO1xuICAgIGlmIChGLmxlbmd0aCA+IDEpIHtcbiAgICAgIEYgPSBGLm1hcChmID0+IHZhbHVlcy5tYXAoZikpO1xuICAgICAgaW5kZXguc29ydCgoaSwgaikgPT4ge1xuICAgICAgICBmb3IgKGNvbnN0IGYgb2YgRikge1xuICAgICAgICAgIGNvbnN0IGMgPSBhc2NlbmRpbmdEZWZpbmVkKGZbaV0sIGZbal0pO1xuICAgICAgICAgIGlmIChjKSByZXR1cm4gYztcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGYgPSB2YWx1ZXMubWFwKGYpO1xuICAgICAgaW5kZXguc29ydCgoaSwgaikgPT4gYXNjZW5kaW5nRGVmaW5lZChmW2ldLCBmW2pdKSk7XG4gICAgfVxuICAgIHJldHVybiBwZXJtdXRlKHZhbHVlcywgaW5kZXgpO1xuICB9XG4gIHJldHVybiB2YWx1ZXMuc29ydChjb21wYXJlRGVmaW5lZChmKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb21wYXJlRGVmaW5lZChjb21wYXJlID0gYXNjZW5kaW5nKSB7XG4gIGlmIChjb21wYXJlID09PSBhc2NlbmRpbmcpIHJldHVybiBhc2NlbmRpbmdEZWZpbmVkO1xuICBpZiAodHlwZW9mIGNvbXBhcmUgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcImNvbXBhcmUgaXMgbm90IGEgZnVuY3Rpb25cIik7XG4gIHJldHVybiAoYSwgYikgPT4ge1xuICAgIGNvbnN0IHggPSBjb21wYXJlKGEsIGIpO1xuICAgIGlmICh4IHx8IHggPT09IDApIHJldHVybiB4O1xuICAgIHJldHVybiAoY29tcGFyZShiLCBiKSA9PT0gMCkgLSAoY29tcGFyZShhLCBhKSA9PT0gMCk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhc2NlbmRpbmdEZWZpbmVkKGEsIGIpIHtcbiAgcmV0dXJuIChhID09IG51bGwgfHwgIShhID49IGEpKSAtIChiID09IG51bGwgfHwgIShiID49IGIpKSB8fCAoYSA8IGIgPyAtMSA6IGEgPiBiID8gMSA6IDApO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWF4KHZhbHVlcywgdmFsdWVvZikge1xuICBsZXQgbWF4O1xuICBpZiAodmFsdWVvZiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB2YWx1ZXMpIHtcbiAgICAgIGlmICh2YWx1ZSAhPSBudWxsXG4gICAgICAgICAgJiYgKG1heCA8IHZhbHVlIHx8IChtYXggPT09IHVuZGVmaW5lZCAmJiB2YWx1ZSA+PSB2YWx1ZSkpKSB7XG4gICAgICAgIG1heCA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBsZXQgaW5kZXggPSAtMTtcbiAgICBmb3IgKGxldCB2YWx1ZSBvZiB2YWx1ZXMpIHtcbiAgICAgIGlmICgodmFsdWUgPSB2YWx1ZW9mKHZhbHVlLCArK2luZGV4LCB2YWx1ZXMpKSAhPSBudWxsXG4gICAgICAgICAgJiYgKG1heCA8IHZhbHVlIHx8IChtYXggPT09IHVuZGVmaW5lZCAmJiB2YWx1ZSA+PSB2YWx1ZSkpKSB7XG4gICAgICAgIG1heCA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gbWF4O1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWluKHZhbHVlcywgdmFsdWVvZikge1xuICBsZXQgbWluO1xuICBpZiAodmFsdWVvZiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB2YWx1ZXMpIHtcbiAgICAgIGlmICh2YWx1ZSAhPSBudWxsXG4gICAgICAgICAgJiYgKG1pbiA+IHZhbHVlIHx8IChtaW4gPT09IHVuZGVmaW5lZCAmJiB2YWx1ZSA+PSB2YWx1ZSkpKSB7XG4gICAgICAgIG1pbiA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBsZXQgaW5kZXggPSAtMTtcbiAgICBmb3IgKGxldCB2YWx1ZSBvZiB2YWx1ZXMpIHtcbiAgICAgIGlmICgodmFsdWUgPSB2YWx1ZW9mKHZhbHVlLCArK2luZGV4LCB2YWx1ZXMpKSAhPSBudWxsXG4gICAgICAgICAgJiYgKG1pbiA+IHZhbHVlIHx8IChtaW4gPT09IHVuZGVmaW5lZCAmJiB2YWx1ZSA+PSB2YWx1ZSkpKSB7XG4gICAgICAgIG1pbiA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gbWluO1xufVxuIiwiaW1wb3J0IHthc2NlbmRpbmdEZWZpbmVkLCBjb21wYXJlRGVmaW5lZH0gZnJvbSBcIi4vc29ydC5qc1wiO1xuXG4vLyBCYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vbW91cm5lci9xdWlja3NlbGVjdFxuLy8gSVNDIGxpY2Vuc2UsIENvcHlyaWdodCAyMDE4IFZsYWRpbWlyIEFnYWZvbmtpbi5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHF1aWNrc2VsZWN0KGFycmF5LCBrLCBsZWZ0ID0gMCwgcmlnaHQgPSBJbmZpbml0eSwgY29tcGFyZSkge1xuICBrID0gTWF0aC5mbG9vcihrKTtcbiAgbGVmdCA9IE1hdGguZmxvb3IoTWF0aC5tYXgoMCwgbGVmdCkpO1xuICByaWdodCA9IE1hdGguZmxvb3IoTWF0aC5taW4oYXJyYXkubGVuZ3RoIC0gMSwgcmlnaHQpKTtcblxuICBpZiAoIShsZWZ0IDw9IGsgJiYgayA8PSByaWdodCkpIHJldHVybiBhcnJheTtcblxuICBjb21wYXJlID0gY29tcGFyZSA9PT0gdW5kZWZpbmVkID8gYXNjZW5kaW5nRGVmaW5lZCA6IGNvbXBhcmVEZWZpbmVkKGNvbXBhcmUpO1xuXG4gIHdoaWxlIChyaWdodCA+IGxlZnQpIHtcbiAgICBpZiAocmlnaHQgLSBsZWZ0ID4gNjAwKSB7XG4gICAgICBjb25zdCBuID0gcmlnaHQgLSBsZWZ0ICsgMTtcbiAgICAgIGNvbnN0IG0gPSBrIC0gbGVmdCArIDE7XG4gICAgICBjb25zdCB6ID0gTWF0aC5sb2cobik7XG4gICAgICBjb25zdCBzID0gMC41ICogTWF0aC5leHAoMiAqIHogLyAzKTtcbiAgICAgIGNvbnN0IHNkID0gMC41ICogTWF0aC5zcXJ0KHogKiBzICogKG4gLSBzKSAvIG4pICogKG0gLSBuIC8gMiA8IDAgPyAtMSA6IDEpO1xuICAgICAgY29uc3QgbmV3TGVmdCA9IE1hdGgubWF4KGxlZnQsIE1hdGguZmxvb3IoayAtIG0gKiBzIC8gbiArIHNkKSk7XG4gICAgICBjb25zdCBuZXdSaWdodCA9IE1hdGgubWluKHJpZ2h0LCBNYXRoLmZsb29yKGsgKyAobiAtIG0pICogcyAvIG4gKyBzZCkpO1xuICAgICAgcXVpY2tzZWxlY3QoYXJyYXksIGssIG5ld0xlZnQsIG5ld1JpZ2h0LCBjb21wYXJlKTtcbiAgICB9XG5cbiAgICBjb25zdCB0ID0gYXJyYXlba107XG4gICAgbGV0IGkgPSBsZWZ0O1xuICAgIGxldCBqID0gcmlnaHQ7XG5cbiAgICBzd2FwKGFycmF5LCBsZWZ0LCBrKTtcbiAgICBpZiAoY29tcGFyZShhcnJheVtyaWdodF0sIHQpID4gMCkgc3dhcChhcnJheSwgbGVmdCwgcmlnaHQpO1xuXG4gICAgd2hpbGUgKGkgPCBqKSB7XG4gICAgICBzd2FwKGFycmF5LCBpLCBqKSwgKytpLCAtLWo7XG4gICAgICB3aGlsZSAoY29tcGFyZShhcnJheVtpXSwgdCkgPCAwKSArK2k7XG4gICAgICB3aGlsZSAoY29tcGFyZShhcnJheVtqXSwgdCkgPiAwKSAtLWo7XG4gICAgfVxuXG4gICAgaWYgKGNvbXBhcmUoYXJyYXlbbGVmdF0sIHQpID09PSAwKSBzd2FwKGFycmF5LCBsZWZ0LCBqKTtcbiAgICBlbHNlICsraiwgc3dhcChhcnJheSwgaiwgcmlnaHQpO1xuXG4gICAgaWYgKGogPD0gaykgbGVmdCA9IGogKyAxO1xuICAgIGlmIChrIDw9IGopIHJpZ2h0ID0gaiAtIDE7XG4gIH1cblxuICByZXR1cm4gYXJyYXk7XG59XG5cbmZ1bmN0aW9uIHN3YXAoYXJyYXksIGksIGopIHtcbiAgY29uc3QgdCA9IGFycmF5W2ldO1xuICBhcnJheVtpXSA9IGFycmF5W2pdO1xuICBhcnJheVtqXSA9IHQ7XG59XG4iLCJpbXBvcnQgbWF4IGZyb20gXCIuL21heC5qc1wiO1xuaW1wb3J0IG1heEluZGV4IGZyb20gXCIuL21heEluZGV4LmpzXCI7XG5pbXBvcnQgbWluIGZyb20gXCIuL21pbi5qc1wiO1xuaW1wb3J0IG1pbkluZGV4IGZyb20gXCIuL21pbkluZGV4LmpzXCI7XG5pbXBvcnQgcXVpY2tzZWxlY3QgZnJvbSBcIi4vcXVpY2tzZWxlY3QuanNcIjtcbmltcG9ydCBudW1iZXIsIHtudW1iZXJzfSBmcm9tIFwiLi9udW1iZXIuanNcIjtcbmltcG9ydCB7YXNjZW5kaW5nRGVmaW5lZH0gZnJvbSBcIi4vc29ydC5qc1wiO1xuaW1wb3J0IGdyZWF0ZXN0IGZyb20gXCIuL2dyZWF0ZXN0LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHF1YW50aWxlKHZhbHVlcywgcCwgdmFsdWVvZikge1xuICB2YWx1ZXMgPSBGbG9hdDY0QXJyYXkuZnJvbShudW1iZXJzKHZhbHVlcywgdmFsdWVvZikpO1xuICBpZiAoIShuID0gdmFsdWVzLmxlbmd0aCkgfHwgaXNOYU4ocCA9ICtwKSkgcmV0dXJuO1xuICBpZiAocCA8PSAwIHx8IG4gPCAyKSByZXR1cm4gbWluKHZhbHVlcyk7XG4gIGlmIChwID49IDEpIHJldHVybiBtYXgodmFsdWVzKTtcbiAgdmFyIG4sXG4gICAgICBpID0gKG4gLSAxKSAqIHAsXG4gICAgICBpMCA9IE1hdGguZmxvb3IoaSksXG4gICAgICB2YWx1ZTAgPSBtYXgocXVpY2tzZWxlY3QodmFsdWVzLCBpMCkuc3ViYXJyYXkoMCwgaTAgKyAxKSksXG4gICAgICB2YWx1ZTEgPSBtaW4odmFsdWVzLnN1YmFycmF5KGkwICsgMSkpO1xuICByZXR1cm4gdmFsdWUwICsgKHZhbHVlMSAtIHZhbHVlMCkgKiAoaSAtIGkwKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHF1YW50aWxlU29ydGVkKHZhbHVlcywgcCwgdmFsdWVvZiA9IG51bWJlcikge1xuICBpZiAoIShuID0gdmFsdWVzLmxlbmd0aCkgfHwgaXNOYU4ocCA9ICtwKSkgcmV0dXJuO1xuICBpZiAocCA8PSAwIHx8IG4gPCAyKSByZXR1cm4gK3ZhbHVlb2YodmFsdWVzWzBdLCAwLCB2YWx1ZXMpO1xuICBpZiAocCA+PSAxKSByZXR1cm4gK3ZhbHVlb2YodmFsdWVzW24gLSAxXSwgbiAtIDEsIHZhbHVlcyk7XG4gIHZhciBuLFxuICAgICAgaSA9IChuIC0gMSkgKiBwLFxuICAgICAgaTAgPSBNYXRoLmZsb29yKGkpLFxuICAgICAgdmFsdWUwID0gK3ZhbHVlb2YodmFsdWVzW2kwXSwgaTAsIHZhbHVlcyksXG4gICAgICB2YWx1ZTEgPSArdmFsdWVvZih2YWx1ZXNbaTAgKyAxXSwgaTAgKyAxLCB2YWx1ZXMpO1xuICByZXR1cm4gdmFsdWUwICsgKHZhbHVlMSAtIHZhbHVlMCkgKiAoaSAtIGkwKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHF1YW50aWxlSW5kZXgodmFsdWVzLCBwLCB2YWx1ZW9mID0gbnVtYmVyKSB7XG4gIGlmIChpc05hTihwID0gK3ApKSByZXR1cm47XG4gIG51bWJlcnMgPSBGbG9hdDY0QXJyYXkuZnJvbSh2YWx1ZXMsIChfLCBpKSA9PiBudW1iZXIodmFsdWVvZih2YWx1ZXNbaV0sIGksIHZhbHVlcykpKTtcbiAgaWYgKHAgPD0gMCkgcmV0dXJuIG1pbkluZGV4KG51bWJlcnMpO1xuICBpZiAocCA+PSAxKSByZXR1cm4gbWF4SW5kZXgobnVtYmVycyk7XG4gIHZhciBudW1iZXJzLFxuICAgICAgaW5kZXggPSBVaW50MzJBcnJheS5mcm9tKHZhbHVlcywgKF8sIGkpID0+IGkpLFxuICAgICAgaiA9IG51bWJlcnMubGVuZ3RoIC0gMSxcbiAgICAgIGkgPSBNYXRoLmZsb29yKGogKiBwKTtcbiAgcXVpY2tzZWxlY3QoaW5kZXgsIGksIDAsIGosIChpLCBqKSA9PiBhc2NlbmRpbmdEZWZpbmVkKG51bWJlcnNbaV0sIG51bWJlcnNbal0pKTtcbiAgaSA9IGdyZWF0ZXN0KGluZGV4LnN1YmFycmF5KDAsIGkgKyAxKSwgKGkpID0+IG51bWJlcnNbaV0pO1xuICByZXR1cm4gaSA+PSAwID8gaSA6IC0xO1xufVxuIiwiaW1wb3J0IHF1YW50aWxlLCB7cXVhbnRpbGVJbmRleH0gZnJvbSBcIi4vcXVhbnRpbGUuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWVkaWFuKHZhbHVlcywgdmFsdWVvZikge1xuICByZXR1cm4gcXVhbnRpbGUodmFsdWVzLCAwLjUsIHZhbHVlb2YpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWVkaWFuSW5kZXgodmFsdWVzLCB2YWx1ZW9mKSB7XG4gIHJldHVybiBxdWFudGlsZUluZGV4KHZhbHVlcywgMC41LCB2YWx1ZW9mKTtcbn1cbiIsInZhciBub29wID0ge3ZhbHVlOiAoKSA9PiB7fX07XG5cbmZ1bmN0aW9uIGRpc3BhdGNoKCkge1xuICBmb3IgKHZhciBpID0gMCwgbiA9IGFyZ3VtZW50cy5sZW5ndGgsIF8gPSB7fSwgdDsgaSA8IG47ICsraSkge1xuICAgIGlmICghKHQgPSBhcmd1bWVudHNbaV0gKyBcIlwiKSB8fCAodCBpbiBfKSB8fCAvW1xccy5dLy50ZXN0KHQpKSB0aHJvdyBuZXcgRXJyb3IoXCJpbGxlZ2FsIHR5cGU6IFwiICsgdCk7XG4gICAgX1t0XSA9IFtdO1xuICB9XG4gIHJldHVybiBuZXcgRGlzcGF0Y2goXyk7XG59XG5cbmZ1bmN0aW9uIERpc3BhdGNoKF8pIHtcbiAgdGhpcy5fID0gXztcbn1cblxuZnVuY3Rpb24gcGFyc2VUeXBlbmFtZXModHlwZW5hbWVzLCB0eXBlcykge1xuICByZXR1cm4gdHlwZW5hbWVzLnRyaW0oKS5zcGxpdCgvXnxcXHMrLykubWFwKGZ1bmN0aW9uKHQpIHtcbiAgICB2YXIgbmFtZSA9IFwiXCIsIGkgPSB0LmluZGV4T2YoXCIuXCIpO1xuICAgIGlmIChpID49IDApIG5hbWUgPSB0LnNsaWNlKGkgKyAxKSwgdCA9IHQuc2xpY2UoMCwgaSk7XG4gICAgaWYgKHQgJiYgIXR5cGVzLmhhc093blByb3BlcnR5KHQpKSB0aHJvdyBuZXcgRXJyb3IoXCJ1bmtub3duIHR5cGU6IFwiICsgdCk7XG4gICAgcmV0dXJuIHt0eXBlOiB0LCBuYW1lOiBuYW1lfTtcbiAgfSk7XG59XG5cbkRpc3BhdGNoLnByb3RvdHlwZSA9IGRpc3BhdGNoLnByb3RvdHlwZSA9IHtcbiAgY29uc3RydWN0b3I6IERpc3BhdGNoLFxuICBvbjogZnVuY3Rpb24odHlwZW5hbWUsIGNhbGxiYWNrKSB7XG4gICAgdmFyIF8gPSB0aGlzLl8sXG4gICAgICAgIFQgPSBwYXJzZVR5cGVuYW1lcyh0eXBlbmFtZSArIFwiXCIsIF8pLFxuICAgICAgICB0LFxuICAgICAgICBpID0gLTEsXG4gICAgICAgIG4gPSBULmxlbmd0aDtcblxuICAgIC8vIElmIG5vIGNhbGxiYWNrIHdhcyBzcGVjaWZpZWQsIHJldHVybiB0aGUgY2FsbGJhY2sgb2YgdGhlIGdpdmVuIHR5cGUgYW5kIG5hbWUuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgICB3aGlsZSAoKytpIDwgbikgaWYgKCh0ID0gKHR5cGVuYW1lID0gVFtpXSkudHlwZSkgJiYgKHQgPSBnZXQoX1t0XSwgdHlwZW5hbWUubmFtZSkpKSByZXR1cm4gdDtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJZiBhIHR5cGUgd2FzIHNwZWNpZmllZCwgc2V0IHRoZSBjYWxsYmFjayBmb3IgdGhlIGdpdmVuIHR5cGUgYW5kIG5hbWUuXG4gICAgLy8gT3RoZXJ3aXNlLCBpZiBhIG51bGwgY2FsbGJhY2sgd2FzIHNwZWNpZmllZCwgcmVtb3ZlIGNhbGxiYWNrcyBvZiB0aGUgZ2l2ZW4gbmFtZS5cbiAgICBpZiAoY2FsbGJhY2sgIT0gbnVsbCAmJiB0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBjYWxsYmFjazogXCIgKyBjYWxsYmFjayk7XG4gICAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICAgIGlmICh0ID0gKHR5cGVuYW1lID0gVFtpXSkudHlwZSkgX1t0XSA9IHNldChfW3RdLCB0eXBlbmFtZS5uYW1lLCBjYWxsYmFjayk7XG4gICAgICBlbHNlIGlmIChjYWxsYmFjayA9PSBudWxsKSBmb3IgKHQgaW4gXykgX1t0XSA9IHNldChfW3RdLCB0eXBlbmFtZS5uYW1lLCBudWxsKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfSxcbiAgY29weTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNvcHkgPSB7fSwgXyA9IHRoaXMuXztcbiAgICBmb3IgKHZhciB0IGluIF8pIGNvcHlbdF0gPSBfW3RdLnNsaWNlKCk7XG4gICAgcmV0dXJuIG5ldyBEaXNwYXRjaChjb3B5KTtcbiAgfSxcbiAgY2FsbDogZnVuY3Rpb24odHlwZSwgdGhhdCkge1xuICAgIGlmICgobiA9IGFyZ3VtZW50cy5sZW5ndGggLSAyKSA+IDApIGZvciAodmFyIGFyZ3MgPSBuZXcgQXJyYXkobiksIGkgPSAwLCBuLCB0OyBpIDwgbjsgKytpKSBhcmdzW2ldID0gYXJndW1lbnRzW2kgKyAyXTtcbiAgICBpZiAoIXRoaXMuXy5oYXNPd25Qcm9wZXJ0eSh0eXBlKSkgdGhyb3cgbmV3IEVycm9yKFwidW5rbm93biB0eXBlOiBcIiArIHR5cGUpO1xuICAgIGZvciAodCA9IHRoaXMuX1t0eXBlXSwgaSA9IDAsIG4gPSB0Lmxlbmd0aDsgaSA8IG47ICsraSkgdFtpXS52YWx1ZS5hcHBseSh0aGF0LCBhcmdzKTtcbiAgfSxcbiAgYXBwbHk6IGZ1bmN0aW9uKHR5cGUsIHRoYXQsIGFyZ3MpIHtcbiAgICBpZiAoIXRoaXMuXy5oYXNPd25Qcm9wZXJ0eSh0eXBlKSkgdGhyb3cgbmV3IEVycm9yKFwidW5rbm93biB0eXBlOiBcIiArIHR5cGUpO1xuICAgIGZvciAodmFyIHQgPSB0aGlzLl9bdHlwZV0sIGkgPSAwLCBuID0gdC5sZW5ndGg7IGkgPCBuOyArK2kpIHRbaV0udmFsdWUuYXBwbHkodGhhdCwgYXJncyk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGdldCh0eXBlLCBuYW1lKSB7XG4gIGZvciAodmFyIGkgPSAwLCBuID0gdHlwZS5sZW5ndGgsIGM7IGkgPCBuOyArK2kpIHtcbiAgICBpZiAoKGMgPSB0eXBlW2ldKS5uYW1lID09PSBuYW1lKSB7XG4gICAgICByZXR1cm4gYy52YWx1ZTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gc2V0KHR5cGUsIG5hbWUsIGNhbGxiYWNrKSB7XG4gIGZvciAodmFyIGkgPSAwLCBuID0gdHlwZS5sZW5ndGg7IGkgPCBuOyArK2kpIHtcbiAgICBpZiAodHlwZVtpXS5uYW1lID09PSBuYW1lKSB7XG4gICAgICB0eXBlW2ldID0gbm9vcCwgdHlwZSA9IHR5cGUuc2xpY2UoMCwgaSkuY29uY2F0KHR5cGUuc2xpY2UoaSArIDEpKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBpZiAoY2FsbGJhY2sgIT0gbnVsbCkgdHlwZS5wdXNoKHtuYW1lOiBuYW1lLCB2YWx1ZTogY2FsbGJhY2t9KTtcbiAgcmV0dXJuIHR5cGU7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGRpc3BhdGNoO1xuIiwiZXhwb3J0IHZhciB4aHRtbCA9IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHN2ZzogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFxuICB4aHRtbDogeGh0bWwsXG4gIHhsaW5rOiBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIixcbiAgeG1sOiBcImh0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZVwiLFxuICB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3htbG5zL1wiXG59O1xuIiwiaW1wb3J0IG5hbWVzcGFjZXMgZnJvbSBcIi4vbmFtZXNwYWNlcy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lKSB7XG4gIHZhciBwcmVmaXggPSBuYW1lICs9IFwiXCIsIGkgPSBwcmVmaXguaW5kZXhPZihcIjpcIik7XG4gIGlmIChpID49IDAgJiYgKHByZWZpeCA9IG5hbWUuc2xpY2UoMCwgaSkpICE9PSBcInhtbG5zXCIpIG5hbWUgPSBuYW1lLnNsaWNlKGkgKyAxKTtcbiAgcmV0dXJuIG5hbWVzcGFjZXMuaGFzT3duUHJvcGVydHkocHJlZml4KSA/IHtzcGFjZTogbmFtZXNwYWNlc1twcmVmaXhdLCBsb2NhbDogbmFtZX0gOiBuYW1lOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXByb3RvdHlwZS1idWlsdGluc1xufVxuIiwiaW1wb3J0IG5hbWVzcGFjZSBmcm9tIFwiLi9uYW1lc3BhY2UuanNcIjtcbmltcG9ydCB7eGh0bWx9IGZyb20gXCIuL25hbWVzcGFjZXMuanNcIjtcblxuZnVuY3Rpb24gY3JlYXRvckluaGVyaXQobmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGRvY3VtZW50ID0gdGhpcy5vd25lckRvY3VtZW50LFxuICAgICAgICB1cmkgPSB0aGlzLm5hbWVzcGFjZVVSSTtcbiAgICByZXR1cm4gdXJpID09PSB4aHRtbCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubmFtZXNwYWNlVVJJID09PSB4aHRtbFxuICAgICAgICA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobmFtZSlcbiAgICAgICAgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlModXJpLCBuYW1lKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY3JlYXRvckZpeGVkKGZ1bGxuYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lKSB7XG4gIHZhciBmdWxsbmFtZSA9IG5hbWVzcGFjZShuYW1lKTtcbiAgcmV0dXJuIChmdWxsbmFtZS5sb2NhbFxuICAgICAgPyBjcmVhdG9yRml4ZWRcbiAgICAgIDogY3JlYXRvckluaGVyaXQpKGZ1bGxuYW1lKTtcbn1cbiIsImZ1bmN0aW9uIG5vbmUoKSB7fVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzZWxlY3Rvcikge1xuICByZXR1cm4gc2VsZWN0b3IgPT0gbnVsbCA/IG5vbmUgOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgfTtcbn1cbiIsImltcG9ydCB7U2VsZWN0aW9ufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuaW1wb3J0IHNlbGVjdG9yIGZyb20gXCIuLi9zZWxlY3Rvci5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzZWxlY3QpIHtcbiAgaWYgKHR5cGVvZiBzZWxlY3QgIT09IFwiZnVuY3Rpb25cIikgc2VsZWN0ID0gc2VsZWN0b3Ioc2VsZWN0KTtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBzdWJncm91cHMgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIHN1Ymdyb3VwID0gc3ViZ3JvdXBzW2pdID0gbmV3IEFycmF5KG4pLCBub2RlLCBzdWJub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKChub2RlID0gZ3JvdXBbaV0pICYmIChzdWJub2RlID0gc2VsZWN0LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKSkge1xuICAgICAgICBpZiAoXCJfX2RhdGFfX1wiIGluIG5vZGUpIHN1Ym5vZGUuX19kYXRhX18gPSBub2RlLl9fZGF0YV9fO1xuICAgICAgICBzdWJncm91cFtpXSA9IHN1Ym5vZGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBTZWxlY3Rpb24oc3ViZ3JvdXBzLCB0aGlzLl9wYXJlbnRzKTtcbn1cbiIsIi8vIEdpdmVuIHNvbWV0aGluZyBhcnJheSBsaWtlIChvciBudWxsKSwgcmV0dXJucyBzb21ldGhpbmcgdGhhdCBpcyBzdHJpY3RseSBhblxuLy8gYXJyYXkuIFRoaXMgaXMgdXNlZCB0byBlbnN1cmUgdGhhdCBhcnJheS1saWtlIG9iamVjdHMgcGFzc2VkIHRvIGQzLnNlbGVjdEFsbFxuLy8gb3Igc2VsZWN0aW9uLnNlbGVjdEFsbCBhcmUgY29udmVydGVkIGludG8gcHJvcGVyIGFycmF5cyB3aGVuIGNyZWF0aW5nIGFcbi8vIHNlbGVjdGlvbjsgd2UgZG9u4oCZdCBldmVyIHdhbnQgdG8gY3JlYXRlIGEgc2VsZWN0aW9uIGJhY2tlZCBieSBhIGxpdmVcbi8vIEhUTUxDb2xsZWN0aW9uIG9yIE5vZGVMaXN0LiBIb3dldmVyLCBub3RlIHRoYXQgc2VsZWN0aW9uLnNlbGVjdEFsbCB3aWxsIHVzZSBhXG4vLyBzdGF0aWMgTm9kZUxpc3QgYXMgYSBncm91cCwgc2luY2UgaXQgc2FmZWx5IGRlcml2ZWQgZnJvbSBxdWVyeVNlbGVjdG9yQWxsLlxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYXJyYXkoeCkge1xuICByZXR1cm4geCA9PSBudWxsID8gW10gOiBBcnJheS5pc0FycmF5KHgpID8geCA6IEFycmF5LmZyb20oeCk7XG59XG4iLCJmdW5jdGlvbiBlbXB0eSgpIHtcbiAgcmV0dXJuIFtdO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzZWxlY3Rvcikge1xuICByZXR1cm4gc2VsZWN0b3IgPT0gbnVsbCA/IGVtcHR5IDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gIH07XG59XG4iLCJpbXBvcnQge1NlbGVjdGlvbn0gZnJvbSBcIi4vaW5kZXguanNcIjtcbmltcG9ydCBhcnJheSBmcm9tIFwiLi4vYXJyYXkuanNcIjtcbmltcG9ydCBzZWxlY3RvckFsbCBmcm9tIFwiLi4vc2VsZWN0b3JBbGwuanNcIjtcblxuZnVuY3Rpb24gYXJyYXlBbGwoc2VsZWN0KSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gYXJyYXkoc2VsZWN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzZWxlY3QpIHtcbiAgaWYgKHR5cGVvZiBzZWxlY3QgPT09IFwiZnVuY3Rpb25cIikgc2VsZWN0ID0gYXJyYXlBbGwoc2VsZWN0KTtcbiAgZWxzZSBzZWxlY3QgPSBzZWxlY3RvckFsbChzZWxlY3QpO1xuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIHN1Ymdyb3VwcyA9IFtdLCBwYXJlbnRzID0gW10sIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICAgIHN1Ymdyb3Vwcy5wdXNoKHNlbGVjdC5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGdyb3VwKSk7XG4gICAgICAgIHBhcmVudHMucHVzaChub2RlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IFNlbGVjdGlvbihzdWJncm91cHMsIHBhcmVudHMpO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1hdGNoZXMoc2VsZWN0b3IpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2hpbGRNYXRjaGVyKHNlbGVjdG9yKSB7XG4gIHJldHVybiBmdW5jdGlvbihub2RlKSB7XG4gICAgcmV0dXJuIG5vZGUubWF0Y2hlcyhzZWxlY3Rvcik7XG4gIH07XG59XG5cbiIsImltcG9ydCB7Y2hpbGRNYXRjaGVyfSBmcm9tIFwiLi4vbWF0Y2hlci5qc1wiO1xuXG52YXIgZmluZCA9IEFycmF5LnByb3RvdHlwZS5maW5kO1xuXG5mdW5jdGlvbiBjaGlsZEZpbmQobWF0Y2gpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmaW5kLmNhbGwodGhpcy5jaGlsZHJlbiwgbWF0Y2gpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBjaGlsZEZpcnN0KCkge1xuICByZXR1cm4gdGhpcy5maXJzdEVsZW1lbnRDaGlsZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obWF0Y2gpIHtcbiAgcmV0dXJuIHRoaXMuc2VsZWN0KG1hdGNoID09IG51bGwgPyBjaGlsZEZpcnN0XG4gICAgICA6IGNoaWxkRmluZCh0eXBlb2YgbWF0Y2ggPT09IFwiZnVuY3Rpb25cIiA/IG1hdGNoIDogY2hpbGRNYXRjaGVyKG1hdGNoKSkpO1xufVxuIiwiaW1wb3J0IHtjaGlsZE1hdGNoZXJ9IGZyb20gXCIuLi9tYXRjaGVyLmpzXCI7XG5cbnZhciBmaWx0ZXIgPSBBcnJheS5wcm90b3R5cGUuZmlsdGVyO1xuXG5mdW5jdGlvbiBjaGlsZHJlbigpIHtcbiAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5jaGlsZHJlbik7XG59XG5cbmZ1bmN0aW9uIGNoaWxkcmVuRmlsdGVyKG1hdGNoKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZmlsdGVyLmNhbGwodGhpcy5jaGlsZHJlbiwgbWF0Y2gpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihtYXRjaCkge1xuICByZXR1cm4gdGhpcy5zZWxlY3RBbGwobWF0Y2ggPT0gbnVsbCA/IGNoaWxkcmVuXG4gICAgICA6IGNoaWxkcmVuRmlsdGVyKHR5cGVvZiBtYXRjaCA9PT0gXCJmdW5jdGlvblwiID8gbWF0Y2ggOiBjaGlsZE1hdGNoZXIobWF0Y2gpKSk7XG59XG4iLCJpbXBvcnQge1NlbGVjdGlvbn0gZnJvbSBcIi4vaW5kZXguanNcIjtcbmltcG9ydCBtYXRjaGVyIGZyb20gXCIuLi9tYXRjaGVyLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG1hdGNoKSB7XG4gIGlmICh0eXBlb2YgbWF0Y2ggIT09IFwiZnVuY3Rpb25cIikgbWF0Y2ggPSBtYXRjaGVyKG1hdGNoKTtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBzdWJncm91cHMgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIHN1Ymdyb3VwID0gc3ViZ3JvdXBzW2pdID0gW10sIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAoKG5vZGUgPSBncm91cFtpXSkgJiYgbWF0Y2guY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCkpIHtcbiAgICAgICAgc3ViZ3JvdXAucHVzaChub2RlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IFNlbGVjdGlvbihzdWJncm91cHMsIHRoaXMuX3BhcmVudHMpO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odXBkYXRlKSB7XG4gIHJldHVybiBuZXcgQXJyYXkodXBkYXRlLmxlbmd0aCk7XG59XG4iLCJpbXBvcnQgc3BhcnNlIGZyb20gXCIuL3NwYXJzZS5qc1wiO1xuaW1wb3J0IHtTZWxlY3Rpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFNlbGVjdGlvbih0aGlzLl9lbnRlciB8fCB0aGlzLl9ncm91cHMubWFwKHNwYXJzZSksIHRoaXMuX3BhcmVudHMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gRW50ZXJOb2RlKHBhcmVudCwgZGF0dW0pIHtcbiAgdGhpcy5vd25lckRvY3VtZW50ID0gcGFyZW50Lm93bmVyRG9jdW1lbnQ7XG4gIHRoaXMubmFtZXNwYWNlVVJJID0gcGFyZW50Lm5hbWVzcGFjZVVSSTtcbiAgdGhpcy5fbmV4dCA9IG51bGw7XG4gIHRoaXMuX3BhcmVudCA9IHBhcmVudDtcbiAgdGhpcy5fX2RhdGFfXyA9IGRhdHVtO1xufVxuXG5FbnRlck5vZGUucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogRW50ZXJOb2RlLFxuICBhcHBlbmRDaGlsZDogZnVuY3Rpb24oY2hpbGQpIHsgcmV0dXJuIHRoaXMuX3BhcmVudC5pbnNlcnRCZWZvcmUoY2hpbGQsIHRoaXMuX25leHQpOyB9LFxuICBpbnNlcnRCZWZvcmU6IGZ1bmN0aW9uKGNoaWxkLCBuZXh0KSB7IHJldHVybiB0aGlzLl9wYXJlbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLCBuZXh0KTsgfSxcbiAgcXVlcnlTZWxlY3RvcjogZnVuY3Rpb24oc2VsZWN0b3IpIHsgcmV0dXJuIHRoaXMuX3BhcmVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTsgfSxcbiAgcXVlcnlTZWxlY3RvckFsbDogZnVuY3Rpb24oc2VsZWN0b3IpIHsgcmV0dXJuIHRoaXMuX3BhcmVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTsgfVxufTtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB4O1xuICB9O1xufVxuIiwiaW1wb3J0IHtTZWxlY3Rpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5pbXBvcnQge0VudGVyTm9kZX0gZnJvbSBcIi4vZW50ZXIuanNcIjtcbmltcG9ydCBjb25zdGFudCBmcm9tIFwiLi4vY29uc3RhbnQuanNcIjtcblxuZnVuY3Rpb24gYmluZEluZGV4KHBhcmVudCwgZ3JvdXAsIGVudGVyLCB1cGRhdGUsIGV4aXQsIGRhdGEpIHtcbiAgdmFyIGkgPSAwLFxuICAgICAgbm9kZSxcbiAgICAgIGdyb3VwTGVuZ3RoID0gZ3JvdXAubGVuZ3RoLFxuICAgICAgZGF0YUxlbmd0aCA9IGRhdGEubGVuZ3RoO1xuXG4gIC8vIFB1dCBhbnkgbm9uLW51bGwgbm9kZXMgdGhhdCBmaXQgaW50byB1cGRhdGUuXG4gIC8vIFB1dCBhbnkgbnVsbCBub2RlcyBpbnRvIGVudGVyLlxuICAvLyBQdXQgYW55IHJlbWFpbmluZyBkYXRhIGludG8gZW50ZXIuXG4gIGZvciAoOyBpIDwgZGF0YUxlbmd0aDsgKytpKSB7XG4gICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgbm9kZS5fX2RhdGFfXyA9IGRhdGFbaV07XG4gICAgICB1cGRhdGVbaV0gPSBub2RlO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbnRlcltpXSA9IG5ldyBFbnRlck5vZGUocGFyZW50LCBkYXRhW2ldKTtcbiAgICB9XG4gIH1cblxuICAvLyBQdXQgYW55IG5vbi1udWxsIG5vZGVzIHRoYXQgZG9u4oCZdCBmaXQgaW50byBleGl0LlxuICBmb3IgKDsgaSA8IGdyb3VwTGVuZ3RoOyArK2kpIHtcbiAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICBleGl0W2ldID0gbm9kZTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYmluZEtleShwYXJlbnQsIGdyb3VwLCBlbnRlciwgdXBkYXRlLCBleGl0LCBkYXRhLCBrZXkpIHtcbiAgdmFyIGksXG4gICAgICBub2RlLFxuICAgICAgbm9kZUJ5S2V5VmFsdWUgPSBuZXcgTWFwLFxuICAgICAgZ3JvdXBMZW5ndGggPSBncm91cC5sZW5ndGgsXG4gICAgICBkYXRhTGVuZ3RoID0gZGF0YS5sZW5ndGgsXG4gICAgICBrZXlWYWx1ZXMgPSBuZXcgQXJyYXkoZ3JvdXBMZW5ndGgpLFxuICAgICAga2V5VmFsdWU7XG5cbiAgLy8gQ29tcHV0ZSB0aGUga2V5IGZvciBlYWNoIG5vZGUuXG4gIC8vIElmIG11bHRpcGxlIG5vZGVzIGhhdmUgdGhlIHNhbWUga2V5LCB0aGUgZHVwbGljYXRlcyBhcmUgYWRkZWQgdG8gZXhpdC5cbiAgZm9yIChpID0gMDsgaSA8IGdyb3VwTGVuZ3RoOyArK2kpIHtcbiAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICBrZXlWYWx1ZXNbaV0gPSBrZXlWYWx1ZSA9IGtleS5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGdyb3VwKSArIFwiXCI7XG4gICAgICBpZiAobm9kZUJ5S2V5VmFsdWUuaGFzKGtleVZhbHVlKSkge1xuICAgICAgICBleGl0W2ldID0gbm9kZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vZGVCeUtleVZhbHVlLnNldChrZXlWYWx1ZSwgbm9kZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gQ29tcHV0ZSB0aGUga2V5IGZvciBlYWNoIGRhdHVtLlxuICAvLyBJZiB0aGVyZSBhIG5vZGUgYXNzb2NpYXRlZCB3aXRoIHRoaXMga2V5LCBqb2luIGFuZCBhZGQgaXQgdG8gdXBkYXRlLlxuICAvLyBJZiB0aGVyZSBpcyBub3QgKG9yIHRoZSBrZXkgaXMgYSBkdXBsaWNhdGUpLCBhZGQgaXQgdG8gZW50ZXIuXG4gIGZvciAoaSA9IDA7IGkgPCBkYXRhTGVuZ3RoOyArK2kpIHtcbiAgICBrZXlWYWx1ZSA9IGtleS5jYWxsKHBhcmVudCwgZGF0YVtpXSwgaSwgZGF0YSkgKyBcIlwiO1xuICAgIGlmIChub2RlID0gbm9kZUJ5S2V5VmFsdWUuZ2V0KGtleVZhbHVlKSkge1xuICAgICAgdXBkYXRlW2ldID0gbm9kZTtcbiAgICAgIG5vZGUuX19kYXRhX18gPSBkYXRhW2ldO1xuICAgICAgbm9kZUJ5S2V5VmFsdWUuZGVsZXRlKGtleVZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZW50ZXJbaV0gPSBuZXcgRW50ZXJOb2RlKHBhcmVudCwgZGF0YVtpXSk7XG4gICAgfVxuICB9XG5cbiAgLy8gQWRkIGFueSByZW1haW5pbmcgbm9kZXMgdGhhdCB3ZXJlIG5vdCBib3VuZCB0byBkYXRhIHRvIGV4aXQuXG4gIGZvciAoaSA9IDA7IGkgPCBncm91cExlbmd0aDsgKytpKSB7XG4gICAgaWYgKChub2RlID0gZ3JvdXBbaV0pICYmIChub2RlQnlLZXlWYWx1ZS5nZXQoa2V5VmFsdWVzW2ldKSA9PT0gbm9kZSkpIHtcbiAgICAgIGV4aXRbaV0gPSBub2RlO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBkYXR1bShub2RlKSB7XG4gIHJldHVybiBub2RlLl9fZGF0YV9fO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIEFycmF5LmZyb20odGhpcywgZGF0dW0pO1xuXG4gIHZhciBiaW5kID0ga2V5ID8gYmluZEtleSA6IGJpbmRJbmRleCxcbiAgICAgIHBhcmVudHMgPSB0aGlzLl9wYXJlbnRzLFxuICAgICAgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzO1xuXG4gIGlmICh0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikgdmFsdWUgPSBjb25zdGFudCh2YWx1ZSk7XG5cbiAgZm9yICh2YXIgbSA9IGdyb3Vwcy5sZW5ndGgsIHVwZGF0ZSA9IG5ldyBBcnJheShtKSwgZW50ZXIgPSBuZXcgQXJyYXkobSksIGV4aXQgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgdmFyIHBhcmVudCA9IHBhcmVudHNbal0sXG4gICAgICAgIGdyb3VwID0gZ3JvdXBzW2pdLFxuICAgICAgICBncm91cExlbmd0aCA9IGdyb3VwLmxlbmd0aCxcbiAgICAgICAgZGF0YSA9IGFycmF5bGlrZSh2YWx1ZS5jYWxsKHBhcmVudCwgcGFyZW50ICYmIHBhcmVudC5fX2RhdGFfXywgaiwgcGFyZW50cykpLFxuICAgICAgICBkYXRhTGVuZ3RoID0gZGF0YS5sZW5ndGgsXG4gICAgICAgIGVudGVyR3JvdXAgPSBlbnRlcltqXSA9IG5ldyBBcnJheShkYXRhTGVuZ3RoKSxcbiAgICAgICAgdXBkYXRlR3JvdXAgPSB1cGRhdGVbal0gPSBuZXcgQXJyYXkoZGF0YUxlbmd0aCksXG4gICAgICAgIGV4aXRHcm91cCA9IGV4aXRbal0gPSBuZXcgQXJyYXkoZ3JvdXBMZW5ndGgpO1xuXG4gICAgYmluZChwYXJlbnQsIGdyb3VwLCBlbnRlckdyb3VwLCB1cGRhdGVHcm91cCwgZXhpdEdyb3VwLCBkYXRhLCBrZXkpO1xuXG4gICAgLy8gTm93IGNvbm5lY3QgdGhlIGVudGVyIG5vZGVzIHRvIHRoZWlyIGZvbGxvd2luZyB1cGRhdGUgbm9kZSwgc3VjaCB0aGF0XG4gICAgLy8gYXBwZW5kQ2hpbGQgY2FuIGluc2VydCB0aGUgbWF0ZXJpYWxpemVkIGVudGVyIG5vZGUgYmVmb3JlIHRoaXMgbm9kZSxcbiAgICAvLyByYXRoZXIgdGhhbiBhdCB0aGUgZW5kIG9mIHRoZSBwYXJlbnQgbm9kZS5cbiAgICBmb3IgKHZhciBpMCA9IDAsIGkxID0gMCwgcHJldmlvdXMsIG5leHQ7IGkwIDwgZGF0YUxlbmd0aDsgKytpMCkge1xuICAgICAgaWYgKHByZXZpb3VzID0gZW50ZXJHcm91cFtpMF0pIHtcbiAgICAgICAgaWYgKGkwID49IGkxKSBpMSA9IGkwICsgMTtcbiAgICAgICAgd2hpbGUgKCEobmV4dCA9IHVwZGF0ZUdyb3VwW2kxXSkgJiYgKytpMSA8IGRhdGFMZW5ndGgpO1xuICAgICAgICBwcmV2aW91cy5fbmV4dCA9IG5leHQgfHwgbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB1cGRhdGUgPSBuZXcgU2VsZWN0aW9uKHVwZGF0ZSwgcGFyZW50cyk7XG4gIHVwZGF0ZS5fZW50ZXIgPSBlbnRlcjtcbiAgdXBkYXRlLl9leGl0ID0gZXhpdDtcbiAgcmV0dXJuIHVwZGF0ZTtcbn1cblxuLy8gR2l2ZW4gc29tZSBkYXRhLCB0aGlzIHJldHVybnMgYW4gYXJyYXktbGlrZSB2aWV3IG9mIGl0OiBhbiBvYmplY3QgdGhhdFxuLy8gZXhwb3NlcyBhIGxlbmd0aCBwcm9wZXJ0eSBhbmQgYWxsb3dzIG51bWVyaWMgaW5kZXhpbmcuIE5vdGUgdGhhdCB1bmxpa2Vcbi8vIHNlbGVjdEFsbCwgdGhpcyBpc27igJl0IHdvcnJpZWQgYWJvdXQg4oCcbGl2ZeKAnSBjb2xsZWN0aW9ucyBiZWNhdXNlIHRoZSByZXN1bHRpbmdcbi8vIGFycmF5IHdpbGwgb25seSBiZSB1c2VkIGJyaWVmbHkgd2hpbGUgZGF0YSBpcyBiZWluZyBib3VuZC4gKEl0IGlzIHBvc3NpYmxlIHRvXG4vLyBjYXVzZSB0aGUgZGF0YSB0byBjaGFuZ2Ugd2hpbGUgaXRlcmF0aW5nIGJ5IHVzaW5nIGEga2V5IGZ1bmN0aW9uLCBidXQgcGxlYXNlXG4vLyBkb27igJl0OyB3ZeKAmWQgcmF0aGVyIGF2b2lkIGEgZ3JhdHVpdG91cyBjb3B5LilcbmZ1bmN0aW9uIGFycmF5bGlrZShkYXRhKSB7XG4gIHJldHVybiB0eXBlb2YgZGF0YSA9PT0gXCJvYmplY3RcIiAmJiBcImxlbmd0aFwiIGluIGRhdGFcbiAgICA/IGRhdGEgLy8gQXJyYXksIFR5cGVkQXJyYXksIE5vZGVMaXN0LCBhcnJheS1saWtlXG4gICAgOiBBcnJheS5mcm9tKGRhdGEpOyAvLyBNYXAsIFNldCwgaXRlcmFibGUsIHN0cmluZywgb3IgYW55dGhpbmcgZWxzZVxufVxuIiwiaW1wb3J0IHNwYXJzZSBmcm9tIFwiLi9zcGFyc2UuanNcIjtcbmltcG9ydCB7U2VsZWN0aW9ufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBTZWxlY3Rpb24odGhpcy5fZXhpdCB8fCB0aGlzLl9ncm91cHMubWFwKHNwYXJzZSksIHRoaXMuX3BhcmVudHMpO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24ob25lbnRlciwgb251cGRhdGUsIG9uZXhpdCkge1xuICB2YXIgZW50ZXIgPSB0aGlzLmVudGVyKCksIHVwZGF0ZSA9IHRoaXMsIGV4aXQgPSB0aGlzLmV4aXQoKTtcbiAgaWYgKHR5cGVvZiBvbmVudGVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBlbnRlciA9IG9uZW50ZXIoZW50ZXIpO1xuICAgIGlmIChlbnRlcikgZW50ZXIgPSBlbnRlci5zZWxlY3Rpb24oKTtcbiAgfSBlbHNlIHtcbiAgICBlbnRlciA9IGVudGVyLmFwcGVuZChvbmVudGVyICsgXCJcIik7XG4gIH1cbiAgaWYgKG9udXBkYXRlICE9IG51bGwpIHtcbiAgICB1cGRhdGUgPSBvbnVwZGF0ZSh1cGRhdGUpO1xuICAgIGlmICh1cGRhdGUpIHVwZGF0ZSA9IHVwZGF0ZS5zZWxlY3Rpb24oKTtcbiAgfVxuICBpZiAob25leGl0ID09IG51bGwpIGV4aXQucmVtb3ZlKCk7IGVsc2Ugb25leGl0KGV4aXQpO1xuICByZXR1cm4gZW50ZXIgJiYgdXBkYXRlID8gZW50ZXIubWVyZ2UodXBkYXRlKS5vcmRlcigpIDogdXBkYXRlO1xufVxuIiwiaW1wb3J0IHtTZWxlY3Rpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGNvbnRleHQpIHtcbiAgdmFyIHNlbGVjdGlvbiA9IGNvbnRleHQuc2VsZWN0aW9uID8gY29udGV4dC5zZWxlY3Rpb24oKSA6IGNvbnRleHQ7XG5cbiAgZm9yICh2YXIgZ3JvdXBzMCA9IHRoaXMuX2dyb3VwcywgZ3JvdXBzMSA9IHNlbGVjdGlvbi5fZ3JvdXBzLCBtMCA9IGdyb3VwczAubGVuZ3RoLCBtMSA9IGdyb3VwczEubGVuZ3RoLCBtID0gTWF0aC5taW4obTAsIG0xKSwgbWVyZ2VzID0gbmV3IEFycmF5KG0wKSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cDAgPSBncm91cHMwW2pdLCBncm91cDEgPSBncm91cHMxW2pdLCBuID0gZ3JvdXAwLmxlbmd0aCwgbWVyZ2UgPSBtZXJnZXNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwMFtpXSB8fCBncm91cDFbaV0pIHtcbiAgICAgICAgbWVyZ2VbaV0gPSBub2RlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZvciAoOyBqIDwgbTA7ICsraikge1xuICAgIG1lcmdlc1tqXSA9IGdyb3VwczBbal07XG4gIH1cblxuICByZXR1cm4gbmV3IFNlbGVjdGlvbihtZXJnZXMsIHRoaXMuX3BhcmVudHMpO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBqID0gLTEsIG0gPSBncm91cHMubGVuZ3RoOyArK2ogPCBtOykge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBpID0gZ3JvdXAubGVuZ3RoIC0gMSwgbmV4dCA9IGdyb3VwW2ldLCBub2RlOyAtLWkgPj0gMDspIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgaWYgKG5leHQgJiYgbm9kZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihuZXh0KSBeIDQpIG5leHQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgbmV4dCk7XG4gICAgICAgIG5leHQgPSBub2RlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufVxuIiwiaW1wb3J0IHtTZWxlY3Rpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGNvbXBhcmUpIHtcbiAgaWYgKCFjb21wYXJlKSBjb21wYXJlID0gYXNjZW5kaW5nO1xuXG4gIGZ1bmN0aW9uIGNvbXBhcmVOb2RlKGEsIGIpIHtcbiAgICByZXR1cm4gYSAmJiBiID8gY29tcGFyZShhLl9fZGF0YV9fLCBiLl9fZGF0YV9fKSA6ICFhIC0gIWI7XG4gIH1cblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBzb3J0Z3JvdXBzID0gbmV3IEFycmF5KG0pLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBuID0gZ3JvdXAubGVuZ3RoLCBzb3J0Z3JvdXAgPSBzb3J0Z3JvdXBzW2pdID0gbmV3IEFycmF5KG4pLCBub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgICBzb3J0Z3JvdXBbaV0gPSBub2RlO1xuICAgICAgfVxuICAgIH1cbiAgICBzb3J0Z3JvdXAuc29ydChjb21wYXJlTm9kZSk7XG4gIH1cblxuICByZXR1cm4gbmV3IFNlbGVjdGlvbihzb3J0Z3JvdXBzLCB0aGlzLl9wYXJlbnRzKS5vcmRlcigpO1xufVxuXG5mdW5jdGlvbiBhc2NlbmRpbmcoYSwgYikge1xuICByZXR1cm4gYSA8IGIgPyAtMSA6IGEgPiBiID8gMSA6IGEgPj0gYiA/IDAgOiBOYU47XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgdmFyIGNhbGxiYWNrID0gYXJndW1lbnRzWzBdO1xuICBhcmd1bWVudHNbMF0gPSB0aGlzO1xuICBjYWxsYmFjay5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICByZXR1cm4gdGhpcztcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzKTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgaiA9IDAsIG0gPSBncm91cHMubGVuZ3RoOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIGkgPSAwLCBuID0gZ3JvdXAubGVuZ3RoOyBpIDwgbjsgKytpKSB7XG4gICAgICB2YXIgbm9kZSA9IGdyb3VwW2ldO1xuICAgICAgaWYgKG5vZGUpIHJldHVybiBub2RlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIGxldCBzaXplID0gMDtcbiAgZm9yIChjb25zdCBub2RlIG9mIHRoaXMpICsrc2l6ZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICByZXR1cm4gc2l6ZTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gIXRoaXMubm9kZSgpO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oY2FsbGJhY2spIHtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIGogPSAwLCBtID0gZ3JvdXBzLmxlbmd0aDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBpID0gMCwgbiA9IGdyb3VwLmxlbmd0aCwgbm9kZTsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkgY2FsbGJhY2suY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59XG4iLCJpbXBvcnQgbmFtZXNwYWNlIGZyb20gXCIuLi9uYW1lc3BhY2UuanNcIjtcblxuZnVuY3Rpb24gYXR0clJlbW92ZShuYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0clJlbW92ZU5TKGZ1bGxuYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJDb25zdGFudChuYW1lLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyQ29uc3RhbnROUyhmdWxsbmFtZSwgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc2V0QXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsLCB2YWx1ZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJGdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmICh2ID09IG51bGwpIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgIGVsc2UgdGhpcy5zZXRBdHRyaWJ1dGUobmFtZSwgdik7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJGdW5jdGlvbk5TKGZ1bGxuYW1lLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmICh2ID09IG51bGwpIHRoaXMucmVtb3ZlQXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsKTtcbiAgICBlbHNlIHRoaXMuc2V0QXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsLCB2KTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgdmFyIGZ1bGxuYW1lID0gbmFtZXNwYWNlKG5hbWUpO1xuXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikge1xuICAgIHZhciBub2RlID0gdGhpcy5ub2RlKCk7XG4gICAgcmV0dXJuIGZ1bGxuYW1lLmxvY2FsXG4gICAgICAgID8gbm9kZS5nZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwpXG4gICAgICAgIDogbm9kZS5nZXRBdHRyaWJ1dGUoZnVsbG5hbWUpO1xuICB9XG5cbiAgcmV0dXJuIHRoaXMuZWFjaCgodmFsdWUgPT0gbnVsbFxuICAgICAgPyAoZnVsbG5hbWUubG9jYWwgPyBhdHRyUmVtb3ZlTlMgOiBhdHRyUmVtb3ZlKSA6ICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgPyAoZnVsbG5hbWUubG9jYWwgPyBhdHRyRnVuY3Rpb25OUyA6IGF0dHJGdW5jdGlvbilcbiAgICAgIDogKGZ1bGxuYW1lLmxvY2FsID8gYXR0ckNvbnN0YW50TlMgOiBhdHRyQ29uc3RhbnQpKSkoZnVsbG5hbWUsIHZhbHVlKSk7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbihub2RlKSB7XG4gIHJldHVybiAobm9kZS5vd25lckRvY3VtZW50ICYmIG5vZGUub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldykgLy8gbm9kZSBpcyBhIE5vZGVcbiAgICAgIHx8IChub2RlLmRvY3VtZW50ICYmIG5vZGUpIC8vIG5vZGUgaXMgYSBXaW5kb3dcbiAgICAgIHx8IG5vZGUuZGVmYXVsdFZpZXc7IC8vIG5vZGUgaXMgYSBEb2N1bWVudFxufVxuIiwiaW1wb3J0IGRlZmF1bHRWaWV3IGZyb20gXCIuLi93aW5kb3cuanNcIjtcblxuZnVuY3Rpb24gc3R5bGVSZW1vdmUobmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShuYW1lKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc3R5bGVDb25zdGFudChuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc3R5bGUuc2V0UHJvcGVydHkobmFtZSwgdmFsdWUsIHByaW9yaXR5KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc3R5bGVGdW5jdGlvbihuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAodiA9PSBudWxsKSB0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KG5hbWUpO1xuICAgIGVsc2UgdGhpcy5zdHlsZS5zZXRQcm9wZXJ0eShuYW1lLCB2LCBwcmlvcml0eSk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBwcmlvcml0eSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDFcbiAgICAgID8gdGhpcy5lYWNoKCh2YWx1ZSA9PSBudWxsXG4gICAgICAgICAgICA/IHN0eWxlUmVtb3ZlIDogdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICAgID8gc3R5bGVGdW5jdGlvblxuICAgICAgICAgICAgOiBzdHlsZUNvbnN0YW50KShuYW1lLCB2YWx1ZSwgcHJpb3JpdHkgPT0gbnVsbCA/IFwiXCIgOiBwcmlvcml0eSkpXG4gICAgICA6IHN0eWxlVmFsdWUodGhpcy5ub2RlKCksIG5hbWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3R5bGVWYWx1ZShub2RlLCBuYW1lKSB7XG4gIHJldHVybiBub2RlLnN0eWxlLmdldFByb3BlcnR5VmFsdWUobmFtZSlcbiAgICAgIHx8IGRlZmF1bHRWaWV3KG5vZGUpLmdldENvbXB1dGVkU3R5bGUobm9kZSwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZShuYW1lKTtcbn1cbiIsImZ1bmN0aW9uIHByb3BlcnR5UmVtb3ZlKG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIGRlbGV0ZSB0aGlzW25hbWVdO1xuICB9O1xufVxuXG5mdW5jdGlvbiBwcm9wZXJ0eUNvbnN0YW50KG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzW25hbWVdID0gdmFsdWU7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHByb3BlcnR5RnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAodiA9PSBudWxsKSBkZWxldGUgdGhpc1tuYW1lXTtcbiAgICBlbHNlIHRoaXNbbmFtZV0gPSB2O1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDFcbiAgICAgID8gdGhpcy5lYWNoKCh2YWx1ZSA9PSBudWxsXG4gICAgICAgICAgPyBwcm9wZXJ0eVJlbW92ZSA6IHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgPyBwcm9wZXJ0eUZ1bmN0aW9uXG4gICAgICAgICAgOiBwcm9wZXJ0eUNvbnN0YW50KShuYW1lLCB2YWx1ZSkpXG4gICAgICA6IHRoaXMubm9kZSgpW25hbWVdO1xufVxuIiwiZnVuY3Rpb24gY2xhc3NBcnJheShzdHJpbmcpIHtcbiAgcmV0dXJuIHN0cmluZy50cmltKCkuc3BsaXQoL158XFxzKy8pO1xufVxuXG5mdW5jdGlvbiBjbGFzc0xpc3Qobm9kZSkge1xuICByZXR1cm4gbm9kZS5jbGFzc0xpc3QgfHwgbmV3IENsYXNzTGlzdChub2RlKTtcbn1cblxuZnVuY3Rpb24gQ2xhc3NMaXN0KG5vZGUpIHtcbiAgdGhpcy5fbm9kZSA9IG5vZGU7XG4gIHRoaXMuX25hbWVzID0gY2xhc3NBcnJheShub2RlLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpIHx8IFwiXCIpO1xufVxuXG5DbGFzc0xpc3QucHJvdG90eXBlID0ge1xuICBhZGQ6IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgaSA9IHRoaXMuX25hbWVzLmluZGV4T2YobmFtZSk7XG4gICAgaWYgKGkgPCAwKSB7XG4gICAgICB0aGlzLl9uYW1lcy5wdXNoKG5hbWUpO1xuICAgICAgdGhpcy5fbm9kZS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCB0aGlzLl9uYW1lcy5qb2luKFwiIFwiKSk7XG4gICAgfVxuICB9LFxuICByZW1vdmU6IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgaSA9IHRoaXMuX25hbWVzLmluZGV4T2YobmFtZSk7XG4gICAgaWYgKGkgPj0gMCkge1xuICAgICAgdGhpcy5fbmFtZXMuc3BsaWNlKGksIDEpO1xuICAgICAgdGhpcy5fbm9kZS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCB0aGlzLl9uYW1lcy5qb2luKFwiIFwiKSk7XG4gICAgfVxuICB9LFxuICBjb250YWluczogZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiB0aGlzLl9uYW1lcy5pbmRleE9mKG5hbWUpID49IDA7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGNsYXNzZWRBZGQobm9kZSwgbmFtZXMpIHtcbiAgdmFyIGxpc3QgPSBjbGFzc0xpc3Qobm9kZSksIGkgPSAtMSwgbiA9IG5hbWVzLmxlbmd0aDtcbiAgd2hpbGUgKCsraSA8IG4pIGxpc3QuYWRkKG5hbWVzW2ldKTtcbn1cblxuZnVuY3Rpb24gY2xhc3NlZFJlbW92ZShub2RlLCBuYW1lcykge1xuICB2YXIgbGlzdCA9IGNsYXNzTGlzdChub2RlKSwgaSA9IC0xLCBuID0gbmFtZXMubGVuZ3RoO1xuICB3aGlsZSAoKytpIDwgbikgbGlzdC5yZW1vdmUobmFtZXNbaV0pO1xufVxuXG5mdW5jdGlvbiBjbGFzc2VkVHJ1ZShuYW1lcykge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgY2xhc3NlZEFkZCh0aGlzLCBuYW1lcyk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGNsYXNzZWRGYWxzZShuYW1lcykge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgY2xhc3NlZFJlbW92ZSh0aGlzLCBuYW1lcyk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGNsYXNzZWRGdW5jdGlvbihuYW1lcywgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICh2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpID8gY2xhc3NlZEFkZCA6IGNsYXNzZWRSZW1vdmUpKHRoaXMsIG5hbWVzKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgdmFyIG5hbWVzID0gY2xhc3NBcnJheShuYW1lICsgXCJcIik7XG5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgdmFyIGxpc3QgPSBjbGFzc0xpc3QodGhpcy5ub2RlKCkpLCBpID0gLTEsIG4gPSBuYW1lcy5sZW5ndGg7XG4gICAgd2hpbGUgKCsraSA8IG4pIGlmICghbGlzdC5jb250YWlucyhuYW1lc1tpXSkpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiB0aGlzLmVhY2goKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IGNsYXNzZWRGdW5jdGlvbiA6IHZhbHVlXG4gICAgICA/IGNsYXNzZWRUcnVlXG4gICAgICA6IGNsYXNzZWRGYWxzZSkobmFtZXMsIHZhbHVlKSk7XG59XG4iLCJmdW5jdGlvbiB0ZXh0UmVtb3ZlKCkge1xuICB0aGlzLnRleHRDb250ZW50ID0gXCJcIjtcbn1cblxuZnVuY3Rpb24gdGV4dENvbnN0YW50KHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnRleHRDb250ZW50ID0gdmFsdWU7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHRleHRGdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHRoaXMudGV4dENvbnRlbnQgPSB2ID09IG51bGwgPyBcIlwiIDogdjtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgID8gdGhpcy5lYWNoKHZhbHVlID09IG51bGxcbiAgICAgICAgICA/IHRleHRSZW1vdmUgOiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICA/IHRleHRGdW5jdGlvblxuICAgICAgICAgIDogdGV4dENvbnN0YW50KSh2YWx1ZSkpXG4gICAgICA6IHRoaXMubm9kZSgpLnRleHRDb250ZW50O1xufVxuIiwiZnVuY3Rpb24gaHRtbFJlbW92ZSgpIHtcbiAgdGhpcy5pbm5lckhUTUwgPSBcIlwiO1xufVxuXG5mdW5jdGlvbiBodG1sQ29uc3RhbnQodmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaW5uZXJIVE1MID0gdmFsdWU7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGh0bWxGdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHRoaXMuaW5uZXJIVE1MID0gdiA9PSBudWxsID8gXCJcIiA6IHY7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICA/IHRoaXMuZWFjaCh2YWx1ZSA9PSBudWxsXG4gICAgICAgICAgPyBodG1sUmVtb3ZlIDogKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgPyBodG1sRnVuY3Rpb25cbiAgICAgICAgICA6IGh0bWxDb25zdGFudCkodmFsdWUpKVxuICAgICAgOiB0aGlzLm5vZGUoKS5pbm5lckhUTUw7XG59XG4iLCJmdW5jdGlvbiByYWlzZSgpIHtcbiAgaWYgKHRoaXMubmV4dFNpYmxpbmcpIHRoaXMucGFyZW50Tm9kZS5hcHBlbmRDaGlsZCh0aGlzKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLmVhY2gocmFpc2UpO1xufVxuIiwiZnVuY3Rpb24gbG93ZXIoKSB7XG4gIGlmICh0aGlzLnByZXZpb3VzU2libGluZykgdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLCB0aGlzLnBhcmVudE5vZGUuZmlyc3RDaGlsZCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5lYWNoKGxvd2VyKTtcbn1cbiIsImltcG9ydCBjcmVhdG9yIGZyb20gXCIuLi9jcmVhdG9yLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUpIHtcbiAgdmFyIGNyZWF0ZSA9IHR5cGVvZiBuYW1lID09PSBcImZ1bmN0aW9uXCIgPyBuYW1lIDogY3JlYXRvcihuYW1lKTtcbiAgcmV0dXJuIHRoaXMuc2VsZWN0KGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmFwcGVuZENoaWxkKGNyZWF0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfSk7XG59XG4iLCJpbXBvcnQgY3JlYXRvciBmcm9tIFwiLi4vY3JlYXRvci5qc1wiO1xuaW1wb3J0IHNlbGVjdG9yIGZyb20gXCIuLi9zZWxlY3Rvci5qc1wiO1xuXG5mdW5jdGlvbiBjb25zdGFudE51bGwoKSB7XG4gIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCBiZWZvcmUpIHtcbiAgdmFyIGNyZWF0ZSA9IHR5cGVvZiBuYW1lID09PSBcImZ1bmN0aW9uXCIgPyBuYW1lIDogY3JlYXRvcihuYW1lKSxcbiAgICAgIHNlbGVjdCA9IGJlZm9yZSA9PSBudWxsID8gY29uc3RhbnROdWxsIDogdHlwZW9mIGJlZm9yZSA9PT0gXCJmdW5jdGlvblwiID8gYmVmb3JlIDogc2VsZWN0b3IoYmVmb3JlKTtcbiAgcmV0dXJuIHRoaXMuc2VsZWN0KGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmluc2VydEJlZm9yZShjcmVhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgc2VsZWN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgbnVsbCk7XG4gIH0pO1xufVxuIiwiZnVuY3Rpb24gcmVtb3ZlKCkge1xuICB2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlO1xuICBpZiAocGFyZW50KSBwYXJlbnQucmVtb3ZlQ2hpbGQodGhpcyk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5lYWNoKHJlbW92ZSk7XG59XG4iLCJmdW5jdGlvbiBzZWxlY3Rpb25fY2xvbmVTaGFsbG93KCkge1xuICB2YXIgY2xvbmUgPSB0aGlzLmNsb25lTm9kZShmYWxzZSksIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTtcbiAgcmV0dXJuIHBhcmVudCA/IHBhcmVudC5pbnNlcnRCZWZvcmUoY2xvbmUsIHRoaXMubmV4dFNpYmxpbmcpIDogY2xvbmU7XG59XG5cbmZ1bmN0aW9uIHNlbGVjdGlvbl9jbG9uZURlZXAoKSB7XG4gIHZhciBjbG9uZSA9IHRoaXMuY2xvbmVOb2RlKHRydWUpLCBwYXJlbnQgPSB0aGlzLnBhcmVudE5vZGU7XG4gIHJldHVybiBwYXJlbnQgPyBwYXJlbnQuaW5zZXJ0QmVmb3JlKGNsb25lLCB0aGlzLm5leHRTaWJsaW5nKSA6IGNsb25lO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihkZWVwKSB7XG4gIHJldHVybiB0aGlzLnNlbGVjdChkZWVwID8gc2VsZWN0aW9uX2Nsb25lRGVlcCA6IHNlbGVjdGlvbl9jbG9uZVNoYWxsb3cpO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgID8gdGhpcy5wcm9wZXJ0eShcIl9fZGF0YV9fXCIsIHZhbHVlKVxuICAgICAgOiB0aGlzLm5vZGUoKS5fX2RhdGFfXztcbn1cbiIsImZ1bmN0aW9uIGNvbnRleHRMaXN0ZW5lcihsaXN0ZW5lcikge1xuICByZXR1cm4gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBsaXN0ZW5lci5jYWxsKHRoaXMsIGV2ZW50LCB0aGlzLl9fZGF0YV9fKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gcGFyc2VUeXBlbmFtZXModHlwZW5hbWVzKSB7XG4gIHJldHVybiB0eXBlbmFtZXMudHJpbSgpLnNwbGl0KC9efFxccysvKS5tYXAoZnVuY3Rpb24odCkge1xuICAgIHZhciBuYW1lID0gXCJcIiwgaSA9IHQuaW5kZXhPZihcIi5cIik7XG4gICAgaWYgKGkgPj0gMCkgbmFtZSA9IHQuc2xpY2UoaSArIDEpLCB0ID0gdC5zbGljZSgwLCBpKTtcbiAgICByZXR1cm4ge3R5cGU6IHQsIG5hbWU6IG5hbWV9O1xuICB9KTtcbn1cblxuZnVuY3Rpb24gb25SZW1vdmUodHlwZW5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBvbiA9IHRoaXMuX19vbjtcbiAgICBpZiAoIW9uKSByZXR1cm47XG4gICAgZm9yICh2YXIgaiA9IDAsIGkgPSAtMSwgbSA9IG9uLmxlbmd0aCwgbzsgaiA8IG07ICsraikge1xuICAgICAgaWYgKG8gPSBvbltqXSwgKCF0eXBlbmFtZS50eXBlIHx8IG8udHlwZSA9PT0gdHlwZW5hbWUudHlwZSkgJiYgby5uYW1lID09PSB0eXBlbmFtZS5uYW1lKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihvLnR5cGUsIG8ubGlzdGVuZXIsIG8ub3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvblsrK2ldID0gbztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCsraSkgb24ubGVuZ3RoID0gaTtcbiAgICBlbHNlIGRlbGV0ZSB0aGlzLl9fb247XG4gIH07XG59XG5cbmZ1bmN0aW9uIG9uQWRkKHR5cGVuYW1lLCB2YWx1ZSwgb3B0aW9ucykge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG9uID0gdGhpcy5fX29uLCBvLCBsaXN0ZW5lciA9IGNvbnRleHRMaXN0ZW5lcih2YWx1ZSk7XG4gICAgaWYgKG9uKSBmb3IgKHZhciBqID0gMCwgbSA9IG9uLmxlbmd0aDsgaiA8IG07ICsraikge1xuICAgICAgaWYgKChvID0gb25bal0pLnR5cGUgPT09IHR5cGVuYW1lLnR5cGUgJiYgby5uYW1lID09PSB0eXBlbmFtZS5uYW1lKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihvLnR5cGUsIG8ubGlzdGVuZXIsIG8ub3B0aW9ucyk7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihvLnR5cGUsIG8ubGlzdGVuZXIgPSBsaXN0ZW5lciwgby5vcHRpb25zID0gb3B0aW9ucyk7XG4gICAgICAgIG8udmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIodHlwZW5hbWUudHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpO1xuICAgIG8gPSB7dHlwZTogdHlwZW5hbWUudHlwZSwgbmFtZTogdHlwZW5hbWUubmFtZSwgdmFsdWU6IHZhbHVlLCBsaXN0ZW5lcjogbGlzdGVuZXIsIG9wdGlvbnM6IG9wdGlvbnN9O1xuICAgIGlmICghb24pIHRoaXMuX19vbiA9IFtvXTtcbiAgICBlbHNlIG9uLnB1c2gobyk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHR5cGVuYW1lLCB2YWx1ZSwgb3B0aW9ucykge1xuICB2YXIgdHlwZW5hbWVzID0gcGFyc2VUeXBlbmFtZXModHlwZW5hbWUgKyBcIlwiKSwgaSwgbiA9IHR5cGVuYW1lcy5sZW5ndGgsIHQ7XG5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgdmFyIG9uID0gdGhpcy5ub2RlKCkuX19vbjtcbiAgICBpZiAob24pIGZvciAodmFyIGogPSAwLCBtID0gb24ubGVuZ3RoLCBvOyBqIDwgbTsgKytqKSB7XG4gICAgICBmb3IgKGkgPSAwLCBvID0gb25bal07IGkgPCBuOyArK2kpIHtcbiAgICAgICAgaWYgKCh0ID0gdHlwZW5hbWVzW2ldKS50eXBlID09PSBvLnR5cGUgJiYgdC5uYW1lID09PSBvLm5hbWUpIHtcbiAgICAgICAgICByZXR1cm4gby52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICBvbiA9IHZhbHVlID8gb25BZGQgOiBvblJlbW92ZTtcbiAgZm9yIChpID0gMDsgaSA8IG47ICsraSkgdGhpcy5lYWNoKG9uKHR5cGVuYW1lc1tpXSwgdmFsdWUsIG9wdGlvbnMpKTtcbiAgcmV0dXJuIHRoaXM7XG59XG4iLCJpbXBvcnQgZGVmYXVsdFZpZXcgZnJvbSBcIi4uL3dpbmRvdy5qc1wiO1xuXG5mdW5jdGlvbiBkaXNwYXRjaEV2ZW50KG5vZGUsIHR5cGUsIHBhcmFtcykge1xuICB2YXIgd2luZG93ID0gZGVmYXVsdFZpZXcobm9kZSksXG4gICAgICBldmVudCA9IHdpbmRvdy5DdXN0b21FdmVudDtcblxuICBpZiAodHlwZW9mIGV2ZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBldmVudCA9IG5ldyBldmVudCh0eXBlLCBwYXJhbXMpO1xuICB9IGVsc2Uge1xuICAgIGV2ZW50ID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIik7XG4gICAgaWYgKHBhcmFtcykgZXZlbnQuaW5pdEV2ZW50KHR5cGUsIHBhcmFtcy5idWJibGVzLCBwYXJhbXMuY2FuY2VsYWJsZSksIGV2ZW50LmRldGFpbCA9IHBhcmFtcy5kZXRhaWw7XG4gICAgZWxzZSBldmVudC5pbml0RXZlbnQodHlwZSwgZmFsc2UsIGZhbHNlKTtcbiAgfVxuXG4gIG5vZGUuZGlzcGF0Y2hFdmVudChldmVudCk7XG59XG5cbmZ1bmN0aW9uIGRpc3BhdGNoQ29uc3RhbnQodHlwZSwgcGFyYW1zKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZGlzcGF0Y2hFdmVudCh0aGlzLCB0eXBlLCBwYXJhbXMpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBkaXNwYXRjaEZ1bmN0aW9uKHR5cGUsIHBhcmFtcykge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGRpc3BhdGNoRXZlbnQodGhpcywgdHlwZSwgcGFyYW1zLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih0eXBlLCBwYXJhbXMpIHtcbiAgcmV0dXJuIHRoaXMuZWFjaCgodHlwZW9mIHBhcmFtcyA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IGRpc3BhdGNoRnVuY3Rpb25cbiAgICAgIDogZGlzcGF0Y2hDb25zdGFudCkodHlwZSwgcGFyYW1zKSk7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiooKSB7XG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgaiA9IDAsIG0gPSBncm91cHMubGVuZ3RoOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIGkgPSAwLCBuID0gZ3JvdXAubGVuZ3RoLCBub2RlOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB5aWVsZCBub2RlO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHNlbGVjdGlvbl9zZWxlY3QgZnJvbSBcIi4vc2VsZWN0LmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX3NlbGVjdEFsbCBmcm9tIFwiLi9zZWxlY3RBbGwuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fc2VsZWN0Q2hpbGQgZnJvbSBcIi4vc2VsZWN0Q2hpbGQuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fc2VsZWN0Q2hpbGRyZW4gZnJvbSBcIi4vc2VsZWN0Q2hpbGRyZW4uanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fZmlsdGVyIGZyb20gXCIuL2ZpbHRlci5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9kYXRhIGZyb20gXCIuL2RhdGEuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fZW50ZXIgZnJvbSBcIi4vZW50ZXIuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fZXhpdCBmcm9tIFwiLi9leGl0LmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2pvaW4gZnJvbSBcIi4vam9pbi5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9tZXJnZSBmcm9tIFwiLi9tZXJnZS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9vcmRlciBmcm9tIFwiLi9vcmRlci5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9zb3J0IGZyb20gXCIuL3NvcnQuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fY2FsbCBmcm9tIFwiLi9jYWxsLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX25vZGVzIGZyb20gXCIuL25vZGVzLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX25vZGUgZnJvbSBcIi4vbm9kZS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9zaXplIGZyb20gXCIuL3NpemUuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fZW1wdHkgZnJvbSBcIi4vZW1wdHkuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fZWFjaCBmcm9tIFwiLi9lYWNoLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2F0dHIgZnJvbSBcIi4vYXR0ci5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9zdHlsZSBmcm9tIFwiLi9zdHlsZS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9wcm9wZXJ0eSBmcm9tIFwiLi9wcm9wZXJ0eS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9jbGFzc2VkIGZyb20gXCIuL2NsYXNzZWQuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fdGV4dCBmcm9tIFwiLi90ZXh0LmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2h0bWwgZnJvbSBcIi4vaHRtbC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9yYWlzZSBmcm9tIFwiLi9yYWlzZS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9sb3dlciBmcm9tIFwiLi9sb3dlci5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9hcHBlbmQgZnJvbSBcIi4vYXBwZW5kLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2luc2VydCBmcm9tIFwiLi9pbnNlcnQuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fcmVtb3ZlIGZyb20gXCIuL3JlbW92ZS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9jbG9uZSBmcm9tIFwiLi9jbG9uZS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9kYXR1bSBmcm9tIFwiLi9kYXR1bS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9vbiBmcm9tIFwiLi9vbi5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9kaXNwYXRjaCBmcm9tIFwiLi9kaXNwYXRjaC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9pdGVyYXRvciBmcm9tIFwiLi9pdGVyYXRvci5qc1wiO1xuXG5leHBvcnQgdmFyIHJvb3QgPSBbbnVsbF07XG5cbmV4cG9ydCBmdW5jdGlvbiBTZWxlY3Rpb24oZ3JvdXBzLCBwYXJlbnRzKSB7XG4gIHRoaXMuX2dyb3VwcyA9IGdyb3VwcztcbiAgdGhpcy5fcGFyZW50cyA9IHBhcmVudHM7XG59XG5cbmZ1bmN0aW9uIHNlbGVjdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBTZWxlY3Rpb24oW1tkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRdXSwgcm9vdCk7XG59XG5cbmZ1bmN0aW9uIHNlbGVjdGlvbl9zZWxlY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzO1xufVxuXG5TZWxlY3Rpb24ucHJvdG90eXBlID0gc2VsZWN0aW9uLnByb3RvdHlwZSA9IHtcbiAgY29uc3RydWN0b3I6IFNlbGVjdGlvbixcbiAgc2VsZWN0OiBzZWxlY3Rpb25fc2VsZWN0LFxuICBzZWxlY3RBbGw6IHNlbGVjdGlvbl9zZWxlY3RBbGwsXG4gIHNlbGVjdENoaWxkOiBzZWxlY3Rpb25fc2VsZWN0Q2hpbGQsXG4gIHNlbGVjdENoaWxkcmVuOiBzZWxlY3Rpb25fc2VsZWN0Q2hpbGRyZW4sXG4gIGZpbHRlcjogc2VsZWN0aW9uX2ZpbHRlcixcbiAgZGF0YTogc2VsZWN0aW9uX2RhdGEsXG4gIGVudGVyOiBzZWxlY3Rpb25fZW50ZXIsXG4gIGV4aXQ6IHNlbGVjdGlvbl9leGl0LFxuICBqb2luOiBzZWxlY3Rpb25fam9pbixcbiAgbWVyZ2U6IHNlbGVjdGlvbl9tZXJnZSxcbiAgc2VsZWN0aW9uOiBzZWxlY3Rpb25fc2VsZWN0aW9uLFxuICBvcmRlcjogc2VsZWN0aW9uX29yZGVyLFxuICBzb3J0OiBzZWxlY3Rpb25fc29ydCxcbiAgY2FsbDogc2VsZWN0aW9uX2NhbGwsXG4gIG5vZGVzOiBzZWxlY3Rpb25fbm9kZXMsXG4gIG5vZGU6IHNlbGVjdGlvbl9ub2RlLFxuICBzaXplOiBzZWxlY3Rpb25fc2l6ZSxcbiAgZW1wdHk6IHNlbGVjdGlvbl9lbXB0eSxcbiAgZWFjaDogc2VsZWN0aW9uX2VhY2gsXG4gIGF0dHI6IHNlbGVjdGlvbl9hdHRyLFxuICBzdHlsZTogc2VsZWN0aW9uX3N0eWxlLFxuICBwcm9wZXJ0eTogc2VsZWN0aW9uX3Byb3BlcnR5LFxuICBjbGFzc2VkOiBzZWxlY3Rpb25fY2xhc3NlZCxcbiAgdGV4dDogc2VsZWN0aW9uX3RleHQsXG4gIGh0bWw6IHNlbGVjdGlvbl9odG1sLFxuICByYWlzZTogc2VsZWN0aW9uX3JhaXNlLFxuICBsb3dlcjogc2VsZWN0aW9uX2xvd2VyLFxuICBhcHBlbmQ6IHNlbGVjdGlvbl9hcHBlbmQsXG4gIGluc2VydDogc2VsZWN0aW9uX2luc2VydCxcbiAgcmVtb3ZlOiBzZWxlY3Rpb25fcmVtb3ZlLFxuICBjbG9uZTogc2VsZWN0aW9uX2Nsb25lLFxuICBkYXR1bTogc2VsZWN0aW9uX2RhdHVtLFxuICBvbjogc2VsZWN0aW9uX29uLFxuICBkaXNwYXRjaDogc2VsZWN0aW9uX2Rpc3BhdGNoLFxuICBbU3ltYm9sLml0ZXJhdG9yXTogc2VsZWN0aW9uX2l0ZXJhdG9yXG59O1xuXG5leHBvcnQgZGVmYXVsdCBzZWxlY3Rpb247XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbihjb25zdHJ1Y3RvciwgZmFjdG9yeSwgcHJvdG90eXBlKSB7XG4gIGNvbnN0cnVjdG9yLnByb3RvdHlwZSA9IGZhY3RvcnkucHJvdG90eXBlID0gcHJvdG90eXBlO1xuICBwcm90b3R5cGUuY29uc3RydWN0b3IgPSBjb25zdHJ1Y3Rvcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZChwYXJlbnQsIGRlZmluaXRpb24pIHtcbiAgdmFyIHByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSk7XG4gIGZvciAodmFyIGtleSBpbiBkZWZpbml0aW9uKSBwcm90b3R5cGVba2V5XSA9IGRlZmluaXRpb25ba2V5XTtcbiAgcmV0dXJuIHByb3RvdHlwZTtcbn1cbiIsImltcG9ydCBkZWZpbmUsIHtleHRlbmR9IGZyb20gXCIuL2RlZmluZS5qc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gQ29sb3IoKSB7fVxuXG5leHBvcnQgdmFyIGRhcmtlciA9IDAuNztcbmV4cG9ydCB2YXIgYnJpZ2h0ZXIgPSAxIC8gZGFya2VyO1xuXG52YXIgcmVJID0gXCJcXFxccyooWystXT9cXFxcZCspXFxcXHMqXCIsXG4gICAgcmVOID0gXCJcXFxccyooWystXT8oPzpcXFxcZCpcXFxcLik/XFxcXGQrKD86W2VFXVsrLV0/XFxcXGQrKT8pXFxcXHMqXCIsXG4gICAgcmVQID0gXCJcXFxccyooWystXT8oPzpcXFxcZCpcXFxcLik/XFxcXGQrKD86W2VFXVsrLV0/XFxcXGQrKT8pJVxcXFxzKlwiLFxuICAgIHJlSGV4ID0gL14jKFswLTlhLWZdezMsOH0pJC8sXG4gICAgcmVSZ2JJbnRlZ2VyID0gbmV3IFJlZ0V4cChgXnJnYlxcXFwoJHtyZUl9LCR7cmVJfSwke3JlSX1cXFxcKSRgKSxcbiAgICByZVJnYlBlcmNlbnQgPSBuZXcgUmVnRXhwKGBecmdiXFxcXCgke3JlUH0sJHtyZVB9LCR7cmVQfVxcXFwpJGApLFxuICAgIHJlUmdiYUludGVnZXIgPSBuZXcgUmVnRXhwKGBecmdiYVxcXFwoJHtyZUl9LCR7cmVJfSwke3JlSX0sJHtyZU59XFxcXCkkYCksXG4gICAgcmVSZ2JhUGVyY2VudCA9IG5ldyBSZWdFeHAoYF5yZ2JhXFxcXCgke3JlUH0sJHtyZVB9LCR7cmVQfSwke3JlTn1cXFxcKSRgKSxcbiAgICByZUhzbFBlcmNlbnQgPSBuZXcgUmVnRXhwKGBeaHNsXFxcXCgke3JlTn0sJHtyZVB9LCR7cmVQfVxcXFwpJGApLFxuICAgIHJlSHNsYVBlcmNlbnQgPSBuZXcgUmVnRXhwKGBeaHNsYVxcXFwoJHtyZU59LCR7cmVQfSwke3JlUH0sJHtyZU59XFxcXCkkYCk7XG5cbnZhciBuYW1lZCA9IHtcbiAgYWxpY2VibHVlOiAweGYwZjhmZixcbiAgYW50aXF1ZXdoaXRlOiAweGZhZWJkNyxcbiAgYXF1YTogMHgwMGZmZmYsXG4gIGFxdWFtYXJpbmU6IDB4N2ZmZmQ0LFxuICBhenVyZTogMHhmMGZmZmYsXG4gIGJlaWdlOiAweGY1ZjVkYyxcbiAgYmlzcXVlOiAweGZmZTRjNCxcbiAgYmxhY2s6IDB4MDAwMDAwLFxuICBibGFuY2hlZGFsbW9uZDogMHhmZmViY2QsXG4gIGJsdWU6IDB4MDAwMGZmLFxuICBibHVldmlvbGV0OiAweDhhMmJlMixcbiAgYnJvd246IDB4YTUyYTJhLFxuICBidXJseXdvb2Q6IDB4ZGViODg3LFxuICBjYWRldGJsdWU6IDB4NWY5ZWEwLFxuICBjaGFydHJldXNlOiAweDdmZmYwMCxcbiAgY2hvY29sYXRlOiAweGQyNjkxZSxcbiAgY29yYWw6IDB4ZmY3ZjUwLFxuICBjb3JuZmxvd2VyYmx1ZTogMHg2NDk1ZWQsXG4gIGNvcm5zaWxrOiAweGZmZjhkYyxcbiAgY3JpbXNvbjogMHhkYzE0M2MsXG4gIGN5YW46IDB4MDBmZmZmLFxuICBkYXJrYmx1ZTogMHgwMDAwOGIsXG4gIGRhcmtjeWFuOiAweDAwOGI4YixcbiAgZGFya2dvbGRlbnJvZDogMHhiODg2MGIsXG4gIGRhcmtncmF5OiAweGE5YTlhOSxcbiAgZGFya2dyZWVuOiAweDAwNjQwMCxcbiAgZGFya2dyZXk6IDB4YTlhOWE5LFxuICBkYXJra2hha2k6IDB4YmRiNzZiLFxuICBkYXJrbWFnZW50YTogMHg4YjAwOGIsXG4gIGRhcmtvbGl2ZWdyZWVuOiAweDU1NmIyZixcbiAgZGFya29yYW5nZTogMHhmZjhjMDAsXG4gIGRhcmtvcmNoaWQ6IDB4OTkzMmNjLFxuICBkYXJrcmVkOiAweDhiMDAwMCxcbiAgZGFya3NhbG1vbjogMHhlOTk2N2EsXG4gIGRhcmtzZWFncmVlbjogMHg4ZmJjOGYsXG4gIGRhcmtzbGF0ZWJsdWU6IDB4NDgzZDhiLFxuICBkYXJrc2xhdGVncmF5OiAweDJmNGY0ZixcbiAgZGFya3NsYXRlZ3JleTogMHgyZjRmNGYsXG4gIGRhcmt0dXJxdW9pc2U6IDB4MDBjZWQxLFxuICBkYXJrdmlvbGV0OiAweDk0MDBkMyxcbiAgZGVlcHBpbms6IDB4ZmYxNDkzLFxuICBkZWVwc2t5Ymx1ZTogMHgwMGJmZmYsXG4gIGRpbWdyYXk6IDB4Njk2OTY5LFxuICBkaW1ncmV5OiAweDY5Njk2OSxcbiAgZG9kZ2VyYmx1ZTogMHgxZTkwZmYsXG4gIGZpcmVicmljazogMHhiMjIyMjIsXG4gIGZsb3JhbHdoaXRlOiAweGZmZmFmMCxcbiAgZm9yZXN0Z3JlZW46IDB4MjI4YjIyLFxuICBmdWNoc2lhOiAweGZmMDBmZixcbiAgZ2FpbnNib3JvOiAweGRjZGNkYyxcbiAgZ2hvc3R3aGl0ZTogMHhmOGY4ZmYsXG4gIGdvbGQ6IDB4ZmZkNzAwLFxuICBnb2xkZW5yb2Q6IDB4ZGFhNTIwLFxuICBncmF5OiAweDgwODA4MCxcbiAgZ3JlZW46IDB4MDA4MDAwLFxuICBncmVlbnllbGxvdzogMHhhZGZmMmYsXG4gIGdyZXk6IDB4ODA4MDgwLFxuICBob25leWRldzogMHhmMGZmZjAsXG4gIGhvdHBpbms6IDB4ZmY2OWI0LFxuICBpbmRpYW5yZWQ6IDB4Y2Q1YzVjLFxuICBpbmRpZ286IDB4NGIwMDgyLFxuICBpdm9yeTogMHhmZmZmZjAsXG4gIGtoYWtpOiAweGYwZTY4YyxcbiAgbGF2ZW5kZXI6IDB4ZTZlNmZhLFxuICBsYXZlbmRlcmJsdXNoOiAweGZmZjBmNSxcbiAgbGF3bmdyZWVuOiAweDdjZmMwMCxcbiAgbGVtb25jaGlmZm9uOiAweGZmZmFjZCxcbiAgbGlnaHRibHVlOiAweGFkZDhlNixcbiAgbGlnaHRjb3JhbDogMHhmMDgwODAsXG4gIGxpZ2h0Y3lhbjogMHhlMGZmZmYsXG4gIGxpZ2h0Z29sZGVucm9keWVsbG93OiAweGZhZmFkMixcbiAgbGlnaHRncmF5OiAweGQzZDNkMyxcbiAgbGlnaHRncmVlbjogMHg5MGVlOTAsXG4gIGxpZ2h0Z3JleTogMHhkM2QzZDMsXG4gIGxpZ2h0cGluazogMHhmZmI2YzEsXG4gIGxpZ2h0c2FsbW9uOiAweGZmYTA3YSxcbiAgbGlnaHRzZWFncmVlbjogMHgyMGIyYWEsXG4gIGxpZ2h0c2t5Ymx1ZTogMHg4N2NlZmEsXG4gIGxpZ2h0c2xhdGVncmF5OiAweDc3ODg5OSxcbiAgbGlnaHRzbGF0ZWdyZXk6IDB4Nzc4ODk5LFxuICBsaWdodHN0ZWVsYmx1ZTogMHhiMGM0ZGUsXG4gIGxpZ2h0eWVsbG93OiAweGZmZmZlMCxcbiAgbGltZTogMHgwMGZmMDAsXG4gIGxpbWVncmVlbjogMHgzMmNkMzIsXG4gIGxpbmVuOiAweGZhZjBlNixcbiAgbWFnZW50YTogMHhmZjAwZmYsXG4gIG1hcm9vbjogMHg4MDAwMDAsXG4gIG1lZGl1bWFxdWFtYXJpbmU6IDB4NjZjZGFhLFxuICBtZWRpdW1ibHVlOiAweDAwMDBjZCxcbiAgbWVkaXVtb3JjaGlkOiAweGJhNTVkMyxcbiAgbWVkaXVtcHVycGxlOiAweDkzNzBkYixcbiAgbWVkaXVtc2VhZ3JlZW46IDB4M2NiMzcxLFxuICBtZWRpdW1zbGF0ZWJsdWU6IDB4N2I2OGVlLFxuICBtZWRpdW1zcHJpbmdncmVlbjogMHgwMGZhOWEsXG4gIG1lZGl1bXR1cnF1b2lzZTogMHg0OGQxY2MsXG4gIG1lZGl1bXZpb2xldHJlZDogMHhjNzE1ODUsXG4gIG1pZG5pZ2h0Ymx1ZTogMHgxOTE5NzAsXG4gIG1pbnRjcmVhbTogMHhmNWZmZmEsXG4gIG1pc3R5cm9zZTogMHhmZmU0ZTEsXG4gIG1vY2Nhc2luOiAweGZmZTRiNSxcbiAgbmF2YWpvd2hpdGU6IDB4ZmZkZWFkLFxuICBuYXZ5OiAweDAwMDA4MCxcbiAgb2xkbGFjZTogMHhmZGY1ZTYsXG4gIG9saXZlOiAweDgwODAwMCxcbiAgb2xpdmVkcmFiOiAweDZiOGUyMyxcbiAgb3JhbmdlOiAweGZmYTUwMCxcbiAgb3JhbmdlcmVkOiAweGZmNDUwMCxcbiAgb3JjaGlkOiAweGRhNzBkNixcbiAgcGFsZWdvbGRlbnJvZDogMHhlZWU4YWEsXG4gIHBhbGVncmVlbjogMHg5OGZiOTgsXG4gIHBhbGV0dXJxdW9pc2U6IDB4YWZlZWVlLFxuICBwYWxldmlvbGV0cmVkOiAweGRiNzA5MyxcbiAgcGFwYXlhd2hpcDogMHhmZmVmZDUsXG4gIHBlYWNocHVmZjogMHhmZmRhYjksXG4gIHBlcnU6IDB4Y2Q4NTNmLFxuICBwaW5rOiAweGZmYzBjYixcbiAgcGx1bTogMHhkZGEwZGQsXG4gIHBvd2RlcmJsdWU6IDB4YjBlMGU2LFxuICBwdXJwbGU6IDB4ODAwMDgwLFxuICByZWJlY2NhcHVycGxlOiAweDY2MzM5OSxcbiAgcmVkOiAweGZmMDAwMCxcbiAgcm9zeWJyb3duOiAweGJjOGY4ZixcbiAgcm95YWxibHVlOiAweDQxNjllMSxcbiAgc2FkZGxlYnJvd246IDB4OGI0NTEzLFxuICBzYWxtb246IDB4ZmE4MDcyLFxuICBzYW5keWJyb3duOiAweGY0YTQ2MCxcbiAgc2VhZ3JlZW46IDB4MmU4YjU3LFxuICBzZWFzaGVsbDogMHhmZmY1ZWUsXG4gIHNpZW5uYTogMHhhMDUyMmQsXG4gIHNpbHZlcjogMHhjMGMwYzAsXG4gIHNreWJsdWU6IDB4ODdjZWViLFxuICBzbGF0ZWJsdWU6IDB4NmE1YWNkLFxuICBzbGF0ZWdyYXk6IDB4NzA4MDkwLFxuICBzbGF0ZWdyZXk6IDB4NzA4MDkwLFxuICBzbm93OiAweGZmZmFmYSxcbiAgc3ByaW5nZ3JlZW46IDB4MDBmZjdmLFxuICBzdGVlbGJsdWU6IDB4NDY4MmI0LFxuICB0YW46IDB4ZDJiNDhjLFxuICB0ZWFsOiAweDAwODA4MCxcbiAgdGhpc3RsZTogMHhkOGJmZDgsXG4gIHRvbWF0bzogMHhmZjYzNDcsXG4gIHR1cnF1b2lzZTogMHg0MGUwZDAsXG4gIHZpb2xldDogMHhlZTgyZWUsXG4gIHdoZWF0OiAweGY1ZGViMyxcbiAgd2hpdGU6IDB4ZmZmZmZmLFxuICB3aGl0ZXNtb2tlOiAweGY1ZjVmNSxcbiAgeWVsbG93OiAweGZmZmYwMCxcbiAgeWVsbG93Z3JlZW46IDB4OWFjZDMyXG59O1xuXG5kZWZpbmUoQ29sb3IsIGNvbG9yLCB7XG4gIGNvcHkoY2hhbm5lbHMpIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihuZXcgdGhpcy5jb25zdHJ1Y3RvciwgdGhpcywgY2hhbm5lbHMpO1xuICB9LFxuICBkaXNwbGF5YWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5yZ2IoKS5kaXNwbGF5YWJsZSgpO1xuICB9LFxuICBoZXg6IGNvbG9yX2Zvcm1hdEhleCwgLy8gRGVwcmVjYXRlZCEgVXNlIGNvbG9yLmZvcm1hdEhleC5cbiAgZm9ybWF0SGV4OiBjb2xvcl9mb3JtYXRIZXgsXG4gIGZvcm1hdEhleDg6IGNvbG9yX2Zvcm1hdEhleDgsXG4gIGZvcm1hdEhzbDogY29sb3JfZm9ybWF0SHNsLFxuICBmb3JtYXRSZ2I6IGNvbG9yX2Zvcm1hdFJnYixcbiAgdG9TdHJpbmc6IGNvbG9yX2Zvcm1hdFJnYlxufSk7XG5cbmZ1bmN0aW9uIGNvbG9yX2Zvcm1hdEhleCgpIHtcbiAgcmV0dXJuIHRoaXMucmdiKCkuZm9ybWF0SGV4KCk7XG59XG5cbmZ1bmN0aW9uIGNvbG9yX2Zvcm1hdEhleDgoKSB7XG4gIHJldHVybiB0aGlzLnJnYigpLmZvcm1hdEhleDgoKTtcbn1cblxuZnVuY3Rpb24gY29sb3JfZm9ybWF0SHNsKCkge1xuICByZXR1cm4gaHNsQ29udmVydCh0aGlzKS5mb3JtYXRIc2woKTtcbn1cblxuZnVuY3Rpb24gY29sb3JfZm9ybWF0UmdiKCkge1xuICByZXR1cm4gdGhpcy5yZ2IoKS5mb3JtYXRSZ2IoKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29sb3IoZm9ybWF0KSB7XG4gIHZhciBtLCBsO1xuICBmb3JtYXQgPSAoZm9ybWF0ICsgXCJcIikudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiAobSA9IHJlSGV4LmV4ZWMoZm9ybWF0KSkgPyAobCA9IG1bMV0ubGVuZ3RoLCBtID0gcGFyc2VJbnQobVsxXSwgMTYpLCBsID09PSA2ID8gcmdibihtKSAvLyAjZmYwMDAwXG4gICAgICA6IGwgPT09IDMgPyBuZXcgUmdiKChtID4+IDggJiAweGYpIHwgKG0gPj4gNCAmIDB4ZjApLCAobSA+PiA0ICYgMHhmKSB8IChtICYgMHhmMCksICgobSAmIDB4ZikgPDwgNCkgfCAobSAmIDB4ZiksIDEpIC8vICNmMDBcbiAgICAgIDogbCA9PT0gOCA/IHJnYmEobSA+PiAyNCAmIDB4ZmYsIG0gPj4gMTYgJiAweGZmLCBtID4+IDggJiAweGZmLCAobSAmIDB4ZmYpIC8gMHhmZikgLy8gI2ZmMDAwMDAwXG4gICAgICA6IGwgPT09IDQgPyByZ2JhKChtID4+IDEyICYgMHhmKSB8IChtID4+IDggJiAweGYwKSwgKG0gPj4gOCAmIDB4ZikgfCAobSA+PiA0ICYgMHhmMCksIChtID4+IDQgJiAweGYpIHwgKG0gJiAweGYwKSwgKCgobSAmIDB4ZikgPDwgNCkgfCAobSAmIDB4ZikpIC8gMHhmZikgLy8gI2YwMDBcbiAgICAgIDogbnVsbCkgLy8gaW52YWxpZCBoZXhcbiAgICAgIDogKG0gPSByZVJnYkludGVnZXIuZXhlYyhmb3JtYXQpKSA/IG5ldyBSZ2IobVsxXSwgbVsyXSwgbVszXSwgMSkgLy8gcmdiKDI1NSwgMCwgMClcbiAgICAgIDogKG0gPSByZVJnYlBlcmNlbnQuZXhlYyhmb3JtYXQpKSA/IG5ldyBSZ2IobVsxXSAqIDI1NSAvIDEwMCwgbVsyXSAqIDI1NSAvIDEwMCwgbVszXSAqIDI1NSAvIDEwMCwgMSkgLy8gcmdiKDEwMCUsIDAlLCAwJSlcbiAgICAgIDogKG0gPSByZVJnYmFJbnRlZ2VyLmV4ZWMoZm9ybWF0KSkgPyByZ2JhKG1bMV0sIG1bMl0sIG1bM10sIG1bNF0pIC8vIHJnYmEoMjU1LCAwLCAwLCAxKVxuICAgICAgOiAobSA9IHJlUmdiYVBlcmNlbnQuZXhlYyhmb3JtYXQpKSA/IHJnYmEobVsxXSAqIDI1NSAvIDEwMCwgbVsyXSAqIDI1NSAvIDEwMCwgbVszXSAqIDI1NSAvIDEwMCwgbVs0XSkgLy8gcmdiKDEwMCUsIDAlLCAwJSwgMSlcbiAgICAgIDogKG0gPSByZUhzbFBlcmNlbnQuZXhlYyhmb3JtYXQpKSA/IGhzbGEobVsxXSwgbVsyXSAvIDEwMCwgbVszXSAvIDEwMCwgMSkgLy8gaHNsKDEyMCwgNTAlLCA1MCUpXG4gICAgICA6IChtID0gcmVIc2xhUGVyY2VudC5leGVjKGZvcm1hdCkpID8gaHNsYShtWzFdLCBtWzJdIC8gMTAwLCBtWzNdIC8gMTAwLCBtWzRdKSAvLyBoc2xhKDEyMCwgNTAlLCA1MCUsIDEpXG4gICAgICA6IG5hbWVkLmhhc093blByb3BlcnR5KGZvcm1hdCkgPyByZ2JuKG5hbWVkW2Zvcm1hdF0pIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG4gICAgICA6IGZvcm1hdCA9PT0gXCJ0cmFuc3BhcmVudFwiID8gbmV3IFJnYihOYU4sIE5hTiwgTmFOLCAwKVxuICAgICAgOiBudWxsO1xufVxuXG5mdW5jdGlvbiByZ2JuKG4pIHtcbiAgcmV0dXJuIG5ldyBSZ2IobiA+PiAxNiAmIDB4ZmYsIG4gPj4gOCAmIDB4ZmYsIG4gJiAweGZmLCAxKTtcbn1cblxuZnVuY3Rpb24gcmdiYShyLCBnLCBiLCBhKSB7XG4gIGlmIChhIDw9IDApIHIgPSBnID0gYiA9IE5hTjtcbiAgcmV0dXJuIG5ldyBSZ2IociwgZywgYiwgYSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZ2JDb252ZXJ0KG8pIHtcbiAgaWYgKCEobyBpbnN0YW5jZW9mIENvbG9yKSkgbyA9IGNvbG9yKG8pO1xuICBpZiAoIW8pIHJldHVybiBuZXcgUmdiO1xuICBvID0gby5yZ2IoKTtcbiAgcmV0dXJuIG5ldyBSZ2Ioby5yLCBvLmcsIG8uYiwgby5vcGFjaXR5KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJnYihyLCBnLCBiLCBvcGFjaXR5KSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID09PSAxID8gcmdiQ29udmVydChyKSA6IG5ldyBSZ2IociwgZywgYiwgb3BhY2l0eSA9PSBudWxsID8gMSA6IG9wYWNpdHkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gUmdiKHIsIGcsIGIsIG9wYWNpdHkpIHtcbiAgdGhpcy5yID0gK3I7XG4gIHRoaXMuZyA9ICtnO1xuICB0aGlzLmIgPSArYjtcbiAgdGhpcy5vcGFjaXR5ID0gK29wYWNpdHk7XG59XG5cbmRlZmluZShSZ2IsIHJnYiwgZXh0ZW5kKENvbG9yLCB7XG4gIGJyaWdodGVyKGspIHtcbiAgICBrID0gayA9PSBudWxsID8gYnJpZ2h0ZXIgOiBNYXRoLnBvdyhicmlnaHRlciwgayk7XG4gICAgcmV0dXJuIG5ldyBSZ2IodGhpcy5yICogaywgdGhpcy5nICogaywgdGhpcy5iICogaywgdGhpcy5vcGFjaXR5KTtcbiAgfSxcbiAgZGFya2VyKGspIHtcbiAgICBrID0gayA9PSBudWxsID8gZGFya2VyIDogTWF0aC5wb3coZGFya2VyLCBrKTtcbiAgICByZXR1cm4gbmV3IFJnYih0aGlzLnIgKiBrLCB0aGlzLmcgKiBrLCB0aGlzLmIgKiBrLCB0aGlzLm9wYWNpdHkpO1xuICB9LFxuICByZ2IoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG4gIGNsYW1wKCkge1xuICAgIHJldHVybiBuZXcgUmdiKGNsYW1waSh0aGlzLnIpLCBjbGFtcGkodGhpcy5nKSwgY2xhbXBpKHRoaXMuYiksIGNsYW1wYSh0aGlzLm9wYWNpdHkpKTtcbiAgfSxcbiAgZGlzcGxheWFibGUoKSB7XG4gICAgcmV0dXJuICgtMC41IDw9IHRoaXMuciAmJiB0aGlzLnIgPCAyNTUuNSlcbiAgICAgICAgJiYgKC0wLjUgPD0gdGhpcy5nICYmIHRoaXMuZyA8IDI1NS41KVxuICAgICAgICAmJiAoLTAuNSA8PSB0aGlzLmIgJiYgdGhpcy5iIDwgMjU1LjUpXG4gICAgICAgICYmICgwIDw9IHRoaXMub3BhY2l0eSAmJiB0aGlzLm9wYWNpdHkgPD0gMSk7XG4gIH0sXG4gIGhleDogcmdiX2Zvcm1hdEhleCwgLy8gRGVwcmVjYXRlZCEgVXNlIGNvbG9yLmZvcm1hdEhleC5cbiAgZm9ybWF0SGV4OiByZ2JfZm9ybWF0SGV4LFxuICBmb3JtYXRIZXg4OiByZ2JfZm9ybWF0SGV4OCxcbiAgZm9ybWF0UmdiOiByZ2JfZm9ybWF0UmdiLFxuICB0b1N0cmluZzogcmdiX2Zvcm1hdFJnYlxufSkpO1xuXG5mdW5jdGlvbiByZ2JfZm9ybWF0SGV4KCkge1xuICByZXR1cm4gYCMke2hleCh0aGlzLnIpfSR7aGV4KHRoaXMuZyl9JHtoZXgodGhpcy5iKX1gO1xufVxuXG5mdW5jdGlvbiByZ2JfZm9ybWF0SGV4OCgpIHtcbiAgcmV0dXJuIGAjJHtoZXgodGhpcy5yKX0ke2hleCh0aGlzLmcpfSR7aGV4KHRoaXMuYil9JHtoZXgoKGlzTmFOKHRoaXMub3BhY2l0eSkgPyAxIDogdGhpcy5vcGFjaXR5KSAqIDI1NSl9YDtcbn1cblxuZnVuY3Rpb24gcmdiX2Zvcm1hdFJnYigpIHtcbiAgY29uc3QgYSA9IGNsYW1wYSh0aGlzLm9wYWNpdHkpO1xuICByZXR1cm4gYCR7YSA9PT0gMSA/IFwicmdiKFwiIDogXCJyZ2JhKFwifSR7Y2xhbXBpKHRoaXMucil9LCAke2NsYW1waSh0aGlzLmcpfSwgJHtjbGFtcGkodGhpcy5iKX0ke2EgPT09IDEgPyBcIilcIiA6IGAsICR7YX0pYH1gO1xufVxuXG5mdW5jdGlvbiBjbGFtcGEob3BhY2l0eSkge1xuICByZXR1cm4gaXNOYU4ob3BhY2l0eSkgPyAxIDogTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgb3BhY2l0eSkpO1xufVxuXG5mdW5jdGlvbiBjbGFtcGkodmFsdWUpIHtcbiAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKDI1NSwgTWF0aC5yb3VuZCh2YWx1ZSkgfHwgMCkpO1xufVxuXG5mdW5jdGlvbiBoZXgodmFsdWUpIHtcbiAgdmFsdWUgPSBjbGFtcGkodmFsdWUpO1xuICByZXR1cm4gKHZhbHVlIDwgMTYgPyBcIjBcIiA6IFwiXCIpICsgdmFsdWUudG9TdHJpbmcoMTYpO1xufVxuXG5mdW5jdGlvbiBoc2xhKGgsIHMsIGwsIGEpIHtcbiAgaWYgKGEgPD0gMCkgaCA9IHMgPSBsID0gTmFOO1xuICBlbHNlIGlmIChsIDw9IDAgfHwgbCA+PSAxKSBoID0gcyA9IE5hTjtcbiAgZWxzZSBpZiAocyA8PSAwKSBoID0gTmFOO1xuICByZXR1cm4gbmV3IEhzbChoLCBzLCBsLCBhKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhzbENvbnZlcnQobykge1xuICBpZiAobyBpbnN0YW5jZW9mIEhzbCkgcmV0dXJuIG5ldyBIc2woby5oLCBvLnMsIG8ubCwgby5vcGFjaXR5KTtcbiAgaWYgKCEobyBpbnN0YW5jZW9mIENvbG9yKSkgbyA9IGNvbG9yKG8pO1xuICBpZiAoIW8pIHJldHVybiBuZXcgSHNsO1xuICBpZiAobyBpbnN0YW5jZW9mIEhzbCkgcmV0dXJuIG87XG4gIG8gPSBvLnJnYigpO1xuICB2YXIgciA9IG8uciAvIDI1NSxcbiAgICAgIGcgPSBvLmcgLyAyNTUsXG4gICAgICBiID0gby5iIC8gMjU1LFxuICAgICAgbWluID0gTWF0aC5taW4ociwgZywgYiksXG4gICAgICBtYXggPSBNYXRoLm1heChyLCBnLCBiKSxcbiAgICAgIGggPSBOYU4sXG4gICAgICBzID0gbWF4IC0gbWluLFxuICAgICAgbCA9IChtYXggKyBtaW4pIC8gMjtcbiAgaWYgKHMpIHtcbiAgICBpZiAociA9PT0gbWF4KSBoID0gKGcgLSBiKSAvIHMgKyAoZyA8IGIpICogNjtcbiAgICBlbHNlIGlmIChnID09PSBtYXgpIGggPSAoYiAtIHIpIC8gcyArIDI7XG4gICAgZWxzZSBoID0gKHIgLSBnKSAvIHMgKyA0O1xuICAgIHMgLz0gbCA8IDAuNSA/IG1heCArIG1pbiA6IDIgLSBtYXggLSBtaW47XG4gICAgaCAqPSA2MDtcbiAgfSBlbHNlIHtcbiAgICBzID0gbCA+IDAgJiYgbCA8IDEgPyAwIDogaDtcbiAgfVxuICByZXR1cm4gbmV3IEhzbChoLCBzLCBsLCBvLm9wYWNpdHkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaHNsKGgsIHMsIGwsIG9wYWNpdHkpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyBoc2xDb252ZXJ0KGgpIDogbmV3IEhzbChoLCBzLCBsLCBvcGFjaXR5ID09IG51bGwgPyAxIDogb3BhY2l0eSk7XG59XG5cbmZ1bmN0aW9uIEhzbChoLCBzLCBsLCBvcGFjaXR5KSB7XG4gIHRoaXMuaCA9ICtoO1xuICB0aGlzLnMgPSArcztcbiAgdGhpcy5sID0gK2w7XG4gIHRoaXMub3BhY2l0eSA9ICtvcGFjaXR5O1xufVxuXG5kZWZpbmUoSHNsLCBoc2wsIGV4dGVuZChDb2xvciwge1xuICBicmlnaHRlcihrKSB7XG4gICAgayA9IGsgPT0gbnVsbCA/IGJyaWdodGVyIDogTWF0aC5wb3coYnJpZ2h0ZXIsIGspO1xuICAgIHJldHVybiBuZXcgSHNsKHRoaXMuaCwgdGhpcy5zLCB0aGlzLmwgKiBrLCB0aGlzLm9wYWNpdHkpO1xuICB9LFxuICBkYXJrZXIoaykge1xuICAgIGsgPSBrID09IG51bGwgPyBkYXJrZXIgOiBNYXRoLnBvdyhkYXJrZXIsIGspO1xuICAgIHJldHVybiBuZXcgSHNsKHRoaXMuaCwgdGhpcy5zLCB0aGlzLmwgKiBrLCB0aGlzLm9wYWNpdHkpO1xuICB9LFxuICByZ2IoKSB7XG4gICAgdmFyIGggPSB0aGlzLmggJSAzNjAgKyAodGhpcy5oIDwgMCkgKiAzNjAsXG4gICAgICAgIHMgPSBpc05hTihoKSB8fCBpc05hTih0aGlzLnMpID8gMCA6IHRoaXMucyxcbiAgICAgICAgbCA9IHRoaXMubCxcbiAgICAgICAgbTIgPSBsICsgKGwgPCAwLjUgPyBsIDogMSAtIGwpICogcyxcbiAgICAgICAgbTEgPSAyICogbCAtIG0yO1xuICAgIHJldHVybiBuZXcgUmdiKFxuICAgICAgaHNsMnJnYihoID49IDI0MCA/IGggLSAyNDAgOiBoICsgMTIwLCBtMSwgbTIpLFxuICAgICAgaHNsMnJnYihoLCBtMSwgbTIpLFxuICAgICAgaHNsMnJnYihoIDwgMTIwID8gaCArIDI0MCA6IGggLSAxMjAsIG0xLCBtMiksXG4gICAgICB0aGlzLm9wYWNpdHlcbiAgICApO1xuICB9LFxuICBjbGFtcCgpIHtcbiAgICByZXR1cm4gbmV3IEhzbChjbGFtcGgodGhpcy5oKSwgY2xhbXB0KHRoaXMucyksIGNsYW1wdCh0aGlzLmwpLCBjbGFtcGEodGhpcy5vcGFjaXR5KSk7XG4gIH0sXG4gIGRpc3BsYXlhYmxlKCkge1xuICAgIHJldHVybiAoMCA8PSB0aGlzLnMgJiYgdGhpcy5zIDw9IDEgfHwgaXNOYU4odGhpcy5zKSlcbiAgICAgICAgJiYgKDAgPD0gdGhpcy5sICYmIHRoaXMubCA8PSAxKVxuICAgICAgICAmJiAoMCA8PSB0aGlzLm9wYWNpdHkgJiYgdGhpcy5vcGFjaXR5IDw9IDEpO1xuICB9LFxuICBmb3JtYXRIc2woKSB7XG4gICAgY29uc3QgYSA9IGNsYW1wYSh0aGlzLm9wYWNpdHkpO1xuICAgIHJldHVybiBgJHthID09PSAxID8gXCJoc2woXCIgOiBcImhzbGEoXCJ9JHtjbGFtcGgodGhpcy5oKX0sICR7Y2xhbXB0KHRoaXMucykgKiAxMDB9JSwgJHtjbGFtcHQodGhpcy5sKSAqIDEwMH0lJHthID09PSAxID8gXCIpXCIgOiBgLCAke2F9KWB9YDtcbiAgfVxufSkpO1xuXG5mdW5jdGlvbiBjbGFtcGgodmFsdWUpIHtcbiAgdmFsdWUgPSAodmFsdWUgfHwgMCkgJSAzNjA7XG4gIHJldHVybiB2YWx1ZSA8IDAgPyB2YWx1ZSArIDM2MCA6IHZhbHVlO1xufVxuXG5mdW5jdGlvbiBjbGFtcHQodmFsdWUpIHtcbiAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKDEsIHZhbHVlIHx8IDApKTtcbn1cblxuLyogRnJvbSBGdkQgMTMuMzcsIENTUyBDb2xvciBNb2R1bGUgTGV2ZWwgMyAqL1xuZnVuY3Rpb24gaHNsMnJnYihoLCBtMSwgbTIpIHtcbiAgcmV0dXJuIChoIDwgNjAgPyBtMSArIChtMiAtIG0xKSAqIGggLyA2MFxuICAgICAgOiBoIDwgMTgwID8gbTJcbiAgICAgIDogaCA8IDI0MCA/IG0xICsgKG0yIC0gbTEpICogKDI0MCAtIGgpIC8gNjBcbiAgICAgIDogbTEpICogMjU1O1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgeCA9PiAoKSA9PiB4O1xuIiwiaW1wb3J0IGNvbnN0YW50IGZyb20gXCIuL2NvbnN0YW50LmpzXCI7XG5cbmZ1bmN0aW9uIGxpbmVhcihhLCBkKSB7XG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIGEgKyB0ICogZDtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZXhwb25lbnRpYWwoYSwgYiwgeSkge1xuICByZXR1cm4gYSA9IE1hdGgucG93KGEsIHkpLCBiID0gTWF0aC5wb3coYiwgeSkgLSBhLCB5ID0gMSAvIHksIGZ1bmN0aW9uKHQpIHtcbiAgICByZXR1cm4gTWF0aC5wb3coYSArIHQgKiBiLCB5KTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGh1ZShhLCBiKSB7XG4gIHZhciBkID0gYiAtIGE7XG4gIHJldHVybiBkID8gbGluZWFyKGEsIGQgPiAxODAgfHwgZCA8IC0xODAgPyBkIC0gMzYwICogTWF0aC5yb3VuZChkIC8gMzYwKSA6IGQpIDogY29uc3RhbnQoaXNOYU4oYSkgPyBiIDogYSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnYW1tYSh5KSB7XG4gIHJldHVybiAoeSA9ICt5KSA9PT0gMSA/IG5vZ2FtbWEgOiBmdW5jdGlvbihhLCBiKSB7XG4gICAgcmV0dXJuIGIgLSBhID8gZXhwb25lbnRpYWwoYSwgYiwgeSkgOiBjb25zdGFudChpc05hTihhKSA/IGIgOiBhKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbm9nYW1tYShhLCBiKSB7XG4gIHZhciBkID0gYiAtIGE7XG4gIHJldHVybiBkID8gbGluZWFyKGEsIGQpIDogY29uc3RhbnQoaXNOYU4oYSkgPyBiIDogYSk7XG59XG4iLCJpbXBvcnQge3JnYiBhcyBjb2xvclJnYn0gZnJvbSBcImQzLWNvbG9yXCI7XG5pbXBvcnQgYmFzaXMgZnJvbSBcIi4vYmFzaXMuanNcIjtcbmltcG9ydCBiYXNpc0Nsb3NlZCBmcm9tIFwiLi9iYXNpc0Nsb3NlZC5qc1wiO1xuaW1wb3J0IG5vZ2FtbWEsIHtnYW1tYX0gZnJvbSBcIi4vY29sb3IuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uIHJnYkdhbW1hKHkpIHtcbiAgdmFyIGNvbG9yID0gZ2FtbWEoeSk7XG5cbiAgZnVuY3Rpb24gcmdiKHN0YXJ0LCBlbmQpIHtcbiAgICB2YXIgciA9IGNvbG9yKChzdGFydCA9IGNvbG9yUmdiKHN0YXJ0KSkuciwgKGVuZCA9IGNvbG9yUmdiKGVuZCkpLnIpLFxuICAgICAgICBnID0gY29sb3Ioc3RhcnQuZywgZW5kLmcpLFxuICAgICAgICBiID0gY29sb3Ioc3RhcnQuYiwgZW5kLmIpLFxuICAgICAgICBvcGFjaXR5ID0gbm9nYW1tYShzdGFydC5vcGFjaXR5LCBlbmQub3BhY2l0eSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgIHN0YXJ0LnIgPSByKHQpO1xuICAgICAgc3RhcnQuZyA9IGcodCk7XG4gICAgICBzdGFydC5iID0gYih0KTtcbiAgICAgIHN0YXJ0Lm9wYWNpdHkgPSBvcGFjaXR5KHQpO1xuICAgICAgcmV0dXJuIHN0YXJ0ICsgXCJcIjtcbiAgICB9O1xuICB9XG5cbiAgcmdiLmdhbW1hID0gcmdiR2FtbWE7XG5cbiAgcmV0dXJuIHJnYjtcbn0pKDEpO1xuXG5mdW5jdGlvbiByZ2JTcGxpbmUoc3BsaW5lKSB7XG4gIHJldHVybiBmdW5jdGlvbihjb2xvcnMpIHtcbiAgICB2YXIgbiA9IGNvbG9ycy5sZW5ndGgsXG4gICAgICAgIHIgPSBuZXcgQXJyYXkobiksXG4gICAgICAgIGcgPSBuZXcgQXJyYXkobiksXG4gICAgICAgIGIgPSBuZXcgQXJyYXkobiksXG4gICAgICAgIGksIGNvbG9yO1xuICAgIGZvciAoaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGNvbG9yID0gY29sb3JSZ2IoY29sb3JzW2ldKTtcbiAgICAgIHJbaV0gPSBjb2xvci5yIHx8IDA7XG4gICAgICBnW2ldID0gY29sb3IuZyB8fCAwO1xuICAgICAgYltpXSA9IGNvbG9yLmIgfHwgMDtcbiAgICB9XG4gICAgciA9IHNwbGluZShyKTtcbiAgICBnID0gc3BsaW5lKGcpO1xuICAgIGIgPSBzcGxpbmUoYik7XG4gICAgY29sb3Iub3BhY2l0eSA9IDE7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgIGNvbG9yLnIgPSByKHQpO1xuICAgICAgY29sb3IuZyA9IGcodCk7XG4gICAgICBjb2xvci5iID0gYih0KTtcbiAgICAgIHJldHVybiBjb2xvciArIFwiXCI7XG4gICAgfTtcbiAgfTtcbn1cblxuZXhwb3J0IHZhciByZ2JCYXNpcyA9IHJnYlNwbGluZShiYXNpcyk7XG5leHBvcnQgdmFyIHJnYkJhc2lzQ2xvc2VkID0gcmdiU3BsaW5lKGJhc2lzQ2xvc2VkKTtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGEsIGIpIHtcbiAgcmV0dXJuIGEgPSArYSwgYiA9ICtiLCBmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIGEgKiAoMSAtIHQpICsgYiAqIHQ7XG4gIH07XG59XG4iLCJpbXBvcnQgbnVtYmVyIGZyb20gXCIuL251bWJlci5qc1wiO1xuXG52YXIgcmVBID0gL1stK10/KD86XFxkK1xcLj9cXGQqfFxcLj9cXGQrKSg/OltlRV1bLStdP1xcZCspPy9nLFxuICAgIHJlQiA9IG5ldyBSZWdFeHAocmVBLnNvdXJjZSwgXCJnXCIpO1xuXG5mdW5jdGlvbiB6ZXJvKGIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBiO1xuICB9O1xufVxuXG5mdW5jdGlvbiBvbmUoYikge1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIHJldHVybiBiKHQpICsgXCJcIjtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYikge1xuICB2YXIgYmkgPSByZUEubGFzdEluZGV4ID0gcmVCLmxhc3RJbmRleCA9IDAsIC8vIHNjYW4gaW5kZXggZm9yIG5leHQgbnVtYmVyIGluIGJcbiAgICAgIGFtLCAvLyBjdXJyZW50IG1hdGNoIGluIGFcbiAgICAgIGJtLCAvLyBjdXJyZW50IG1hdGNoIGluIGJcbiAgICAgIGJzLCAvLyBzdHJpbmcgcHJlY2VkaW5nIGN1cnJlbnQgbnVtYmVyIGluIGIsIGlmIGFueVxuICAgICAgaSA9IC0xLCAvLyBpbmRleCBpbiBzXG4gICAgICBzID0gW10sIC8vIHN0cmluZyBjb25zdGFudHMgYW5kIHBsYWNlaG9sZGVyc1xuICAgICAgcSA9IFtdOyAvLyBudW1iZXIgaW50ZXJwb2xhdG9yc1xuXG4gIC8vIENvZXJjZSBpbnB1dHMgdG8gc3RyaW5ncy5cbiAgYSA9IGEgKyBcIlwiLCBiID0gYiArIFwiXCI7XG5cbiAgLy8gSW50ZXJwb2xhdGUgcGFpcnMgb2YgbnVtYmVycyBpbiBhICYgYi5cbiAgd2hpbGUgKChhbSA9IHJlQS5leGVjKGEpKVxuICAgICAgJiYgKGJtID0gcmVCLmV4ZWMoYikpKSB7XG4gICAgaWYgKChicyA9IGJtLmluZGV4KSA+IGJpKSB7IC8vIGEgc3RyaW5nIHByZWNlZGVzIHRoZSBuZXh0IG51bWJlciBpbiBiXG4gICAgICBicyA9IGIuc2xpY2UoYmksIGJzKTtcbiAgICAgIGlmIChzW2ldKSBzW2ldICs9IGJzOyAvLyBjb2FsZXNjZSB3aXRoIHByZXZpb3VzIHN0cmluZ1xuICAgICAgZWxzZSBzWysraV0gPSBicztcbiAgICB9XG4gICAgaWYgKChhbSA9IGFtWzBdKSA9PT0gKGJtID0gYm1bMF0pKSB7IC8vIG51bWJlcnMgaW4gYSAmIGIgbWF0Y2hcbiAgICAgIGlmIChzW2ldKSBzW2ldICs9IGJtOyAvLyBjb2FsZXNjZSB3aXRoIHByZXZpb3VzIHN0cmluZ1xuICAgICAgZWxzZSBzWysraV0gPSBibTtcbiAgICB9IGVsc2UgeyAvLyBpbnRlcnBvbGF0ZSBub24tbWF0Y2hpbmcgbnVtYmVyc1xuICAgICAgc1srK2ldID0gbnVsbDtcbiAgICAgIHEucHVzaCh7aTogaSwgeDogbnVtYmVyKGFtLCBibSl9KTtcbiAgICB9XG4gICAgYmkgPSByZUIubGFzdEluZGV4O1xuICB9XG5cbiAgLy8gQWRkIHJlbWFpbnMgb2YgYi5cbiAgaWYgKGJpIDwgYi5sZW5ndGgpIHtcbiAgICBicyA9IGIuc2xpY2UoYmkpO1xuICAgIGlmIChzW2ldKSBzW2ldICs9IGJzOyAvLyBjb2FsZXNjZSB3aXRoIHByZXZpb3VzIHN0cmluZ1xuICAgIGVsc2Ugc1srK2ldID0gYnM7XG4gIH1cblxuICAvLyBTcGVjaWFsIG9wdGltaXphdGlvbiBmb3Igb25seSBhIHNpbmdsZSBtYXRjaC5cbiAgLy8gT3RoZXJ3aXNlLCBpbnRlcnBvbGF0ZSBlYWNoIG9mIHRoZSBudW1iZXJzIGFuZCByZWpvaW4gdGhlIHN0cmluZy5cbiAgcmV0dXJuIHMubGVuZ3RoIDwgMiA/IChxWzBdXG4gICAgICA/IG9uZShxWzBdLngpXG4gICAgICA6IHplcm8oYikpXG4gICAgICA6IChiID0gcS5sZW5ndGgsIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbzsgaSA8IGI7ICsraSkgc1sobyA9IHFbaV0pLmldID0gby54KHQpO1xuICAgICAgICAgIHJldHVybiBzLmpvaW4oXCJcIik7XG4gICAgICAgIH0pO1xufVxuIiwidmFyIGRlZ3JlZXMgPSAxODAgLyBNYXRoLlBJO1xuXG5leHBvcnQgdmFyIGlkZW50aXR5ID0ge1xuICB0cmFuc2xhdGVYOiAwLFxuICB0cmFuc2xhdGVZOiAwLFxuICByb3RhdGU6IDAsXG4gIHNrZXdYOiAwLFxuICBzY2FsZVg6IDEsXG4gIHNjYWxlWTogMVxufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYiwgYywgZCwgZSwgZikge1xuICB2YXIgc2NhbGVYLCBzY2FsZVksIHNrZXdYO1xuICBpZiAoc2NhbGVYID0gTWF0aC5zcXJ0KGEgKiBhICsgYiAqIGIpKSBhIC89IHNjYWxlWCwgYiAvPSBzY2FsZVg7XG4gIGlmIChza2V3WCA9IGEgKiBjICsgYiAqIGQpIGMgLT0gYSAqIHNrZXdYLCBkIC09IGIgKiBza2V3WDtcbiAgaWYgKHNjYWxlWSA9IE1hdGguc3FydChjICogYyArIGQgKiBkKSkgYyAvPSBzY2FsZVksIGQgLz0gc2NhbGVZLCBza2V3WCAvPSBzY2FsZVk7XG4gIGlmIChhICogZCA8IGIgKiBjKSBhID0gLWEsIGIgPSAtYiwgc2tld1ggPSAtc2tld1gsIHNjYWxlWCA9IC1zY2FsZVg7XG4gIHJldHVybiB7XG4gICAgdHJhbnNsYXRlWDogZSxcbiAgICB0cmFuc2xhdGVZOiBmLFxuICAgIHJvdGF0ZTogTWF0aC5hdGFuMihiLCBhKSAqIGRlZ3JlZXMsXG4gICAgc2tld1g6IE1hdGguYXRhbihza2V3WCkgKiBkZWdyZWVzLFxuICAgIHNjYWxlWDogc2NhbGVYLFxuICAgIHNjYWxlWTogc2NhbGVZXG4gIH07XG59XG4iLCJpbXBvcnQgZGVjb21wb3NlLCB7aWRlbnRpdHl9IGZyb20gXCIuL2RlY29tcG9zZS5qc1wiO1xuXG52YXIgc3ZnTm9kZTtcblxuLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWYgKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNzcyh2YWx1ZSkge1xuICBjb25zdCBtID0gbmV3ICh0eXBlb2YgRE9NTWF0cml4ID09PSBcImZ1bmN0aW9uXCIgPyBET01NYXRyaXggOiBXZWJLaXRDU1NNYXRyaXgpKHZhbHVlICsgXCJcIik7XG4gIHJldHVybiBtLmlzSWRlbnRpdHkgPyBpZGVudGl0eSA6IGRlY29tcG9zZShtLmEsIG0uYiwgbS5jLCBtLmQsIG0uZSwgbS5mKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU3ZnKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gaWRlbnRpdHk7XG4gIGlmICghc3ZnTm9kZSkgc3ZnTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwiZ1wiKTtcbiAgc3ZnTm9kZS5zZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIiwgdmFsdWUpO1xuICBpZiAoISh2YWx1ZSA9IHN2Z05vZGUudHJhbnNmb3JtLmJhc2VWYWwuY29uc29saWRhdGUoKSkpIHJldHVybiBpZGVudGl0eTtcbiAgdmFsdWUgPSB2YWx1ZS5tYXRyaXg7XG4gIHJldHVybiBkZWNvbXBvc2UodmFsdWUuYSwgdmFsdWUuYiwgdmFsdWUuYywgdmFsdWUuZCwgdmFsdWUuZSwgdmFsdWUuZik7XG59XG4iLCJpbXBvcnQgbnVtYmVyIGZyb20gXCIuLi9udW1iZXIuanNcIjtcbmltcG9ydCB7cGFyc2VDc3MsIHBhcnNlU3ZnfSBmcm9tIFwiLi9wYXJzZS5qc1wiO1xuXG5mdW5jdGlvbiBpbnRlcnBvbGF0ZVRyYW5zZm9ybShwYXJzZSwgcHhDb21tYSwgcHhQYXJlbiwgZGVnUGFyZW4pIHtcblxuICBmdW5jdGlvbiBwb3Aocykge1xuICAgIHJldHVybiBzLmxlbmd0aCA/IHMucG9wKCkgKyBcIiBcIiA6IFwiXCI7XG4gIH1cblxuICBmdW5jdGlvbiB0cmFuc2xhdGUoeGEsIHlhLCB4YiwgeWIsIHMsIHEpIHtcbiAgICBpZiAoeGEgIT09IHhiIHx8IHlhICE9PSB5Yikge1xuICAgICAgdmFyIGkgPSBzLnB1c2goXCJ0cmFuc2xhdGUoXCIsIG51bGwsIHB4Q29tbWEsIG51bGwsIHB4UGFyZW4pO1xuICAgICAgcS5wdXNoKHtpOiBpIC0gNCwgeDogbnVtYmVyKHhhLCB4Yil9LCB7aTogaSAtIDIsIHg6IG51bWJlcih5YSwgeWIpfSk7XG4gICAgfSBlbHNlIGlmICh4YiB8fCB5Yikge1xuICAgICAgcy5wdXNoKFwidHJhbnNsYXRlKFwiICsgeGIgKyBweENvbW1hICsgeWIgKyBweFBhcmVuKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByb3RhdGUoYSwgYiwgcywgcSkge1xuICAgIGlmIChhICE9PSBiKSB7XG4gICAgICBpZiAoYSAtIGIgPiAxODApIGIgKz0gMzYwOyBlbHNlIGlmIChiIC0gYSA+IDE4MCkgYSArPSAzNjA7IC8vIHNob3J0ZXN0IHBhdGhcbiAgICAgIHEucHVzaCh7aTogcy5wdXNoKHBvcChzKSArIFwicm90YXRlKFwiLCBudWxsLCBkZWdQYXJlbikgLSAyLCB4OiBudW1iZXIoYSwgYil9KTtcbiAgICB9IGVsc2UgaWYgKGIpIHtcbiAgICAgIHMucHVzaChwb3AocykgKyBcInJvdGF0ZShcIiArIGIgKyBkZWdQYXJlbik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2tld1goYSwgYiwgcywgcSkge1xuICAgIGlmIChhICE9PSBiKSB7XG4gICAgICBxLnB1c2goe2k6IHMucHVzaChwb3AocykgKyBcInNrZXdYKFwiLCBudWxsLCBkZWdQYXJlbikgLSAyLCB4OiBudW1iZXIoYSwgYil9KTtcbiAgICB9IGVsc2UgaWYgKGIpIHtcbiAgICAgIHMucHVzaChwb3AocykgKyBcInNrZXdYKFwiICsgYiArIGRlZ1BhcmVuKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzY2FsZSh4YSwgeWEsIHhiLCB5YiwgcywgcSkge1xuICAgIGlmICh4YSAhPT0geGIgfHwgeWEgIT09IHliKSB7XG4gICAgICB2YXIgaSA9IHMucHVzaChwb3AocykgKyBcInNjYWxlKFwiLCBudWxsLCBcIixcIiwgbnVsbCwgXCIpXCIpO1xuICAgICAgcS5wdXNoKHtpOiBpIC0gNCwgeDogbnVtYmVyKHhhLCB4Yil9LCB7aTogaSAtIDIsIHg6IG51bWJlcih5YSwgeWIpfSk7XG4gICAgfSBlbHNlIGlmICh4YiAhPT0gMSB8fCB5YiAhPT0gMSkge1xuICAgICAgcy5wdXNoKHBvcChzKSArIFwic2NhbGUoXCIgKyB4YiArIFwiLFwiICsgeWIgKyBcIilcIik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKGEsIGIpIHtcbiAgICB2YXIgcyA9IFtdLCAvLyBzdHJpbmcgY29uc3RhbnRzIGFuZCBwbGFjZWhvbGRlcnNcbiAgICAgICAgcSA9IFtdOyAvLyBudW1iZXIgaW50ZXJwb2xhdG9yc1xuICAgIGEgPSBwYXJzZShhKSwgYiA9IHBhcnNlKGIpO1xuICAgIHRyYW5zbGF0ZShhLnRyYW5zbGF0ZVgsIGEudHJhbnNsYXRlWSwgYi50cmFuc2xhdGVYLCBiLnRyYW5zbGF0ZVksIHMsIHEpO1xuICAgIHJvdGF0ZShhLnJvdGF0ZSwgYi5yb3RhdGUsIHMsIHEpO1xuICAgIHNrZXdYKGEuc2tld1gsIGIuc2tld1gsIHMsIHEpO1xuICAgIHNjYWxlKGEuc2NhbGVYLCBhLnNjYWxlWSwgYi5zY2FsZVgsIGIuc2NhbGVZLCBzLCBxKTtcbiAgICBhID0gYiA9IG51bGw7IC8vIGdjXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgIHZhciBpID0gLTEsIG4gPSBxLmxlbmd0aCwgbztcbiAgICAgIHdoaWxlICgrK2kgPCBuKSBzWyhvID0gcVtpXSkuaV0gPSBvLngodCk7XG4gICAgICByZXR1cm4gcy5qb2luKFwiXCIpO1xuICAgIH07XG4gIH07XG59XG5cbmV4cG9ydCB2YXIgaW50ZXJwb2xhdGVUcmFuc2Zvcm1Dc3MgPSBpbnRlcnBvbGF0ZVRyYW5zZm9ybShwYXJzZUNzcywgXCJweCwgXCIsIFwicHgpXCIsIFwiZGVnKVwiKTtcbmV4cG9ydCB2YXIgaW50ZXJwb2xhdGVUcmFuc2Zvcm1TdmcgPSBpbnRlcnBvbGF0ZVRyYW5zZm9ybShwYXJzZVN2ZywgXCIsIFwiLCBcIilcIiwgXCIpXCIpO1xuIiwidmFyIGZyYW1lID0gMCwgLy8gaXMgYW4gYW5pbWF0aW9uIGZyYW1lIHBlbmRpbmc/XG4gICAgdGltZW91dCA9IDAsIC8vIGlzIGEgdGltZW91dCBwZW5kaW5nP1xuICAgIGludGVydmFsID0gMCwgLy8gYXJlIGFueSB0aW1lcnMgYWN0aXZlP1xuICAgIHBva2VEZWxheSA9IDEwMDAsIC8vIGhvdyBmcmVxdWVudGx5IHdlIGNoZWNrIGZvciBjbG9jayBza2V3XG4gICAgdGFza0hlYWQsXG4gICAgdGFza1RhaWwsXG4gICAgY2xvY2tMYXN0ID0gMCxcbiAgICBjbG9ja05vdyA9IDAsXG4gICAgY2xvY2tTa2V3ID0gMCxcbiAgICBjbG9jayA9IHR5cGVvZiBwZXJmb3JtYW5jZSA9PT0gXCJvYmplY3RcIiAmJiBwZXJmb3JtYW5jZS5ub3cgPyBwZXJmb3JtYW5jZSA6IERhdGUsXG4gICAgc2V0RnJhbWUgPSB0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiICYmIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPyB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lLmJpbmQod2luZG93KSA6IGZ1bmN0aW9uKGYpIHsgc2V0VGltZW91dChmLCAxNyk7IH07XG5cbmV4cG9ydCBmdW5jdGlvbiBub3coKSB7XG4gIHJldHVybiBjbG9ja05vdyB8fCAoc2V0RnJhbWUoY2xlYXJOb3cpLCBjbG9ja05vdyA9IGNsb2NrLm5vdygpICsgY2xvY2tTa2V3KTtcbn1cblxuZnVuY3Rpb24gY2xlYXJOb3coKSB7XG4gIGNsb2NrTm93ID0gMDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFRpbWVyKCkge1xuICB0aGlzLl9jYWxsID1cbiAgdGhpcy5fdGltZSA9XG4gIHRoaXMuX25leHQgPSBudWxsO1xufVxuXG5UaW1lci5wcm90b3R5cGUgPSB0aW1lci5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBUaW1lcixcbiAgcmVzdGFydDogZnVuY3Rpb24oY2FsbGJhY2ssIGRlbGF5LCB0aW1lKSB7XG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiY2FsbGJhY2sgaXMgbm90IGEgZnVuY3Rpb25cIik7XG4gICAgdGltZSA9ICh0aW1lID09IG51bGwgPyBub3coKSA6ICt0aW1lKSArIChkZWxheSA9PSBudWxsID8gMCA6ICtkZWxheSk7XG4gICAgaWYgKCF0aGlzLl9uZXh0ICYmIHRhc2tUYWlsICE9PSB0aGlzKSB7XG4gICAgICBpZiAodGFza1RhaWwpIHRhc2tUYWlsLl9uZXh0ID0gdGhpcztcbiAgICAgIGVsc2UgdGFza0hlYWQgPSB0aGlzO1xuICAgICAgdGFza1RhaWwgPSB0aGlzO1xuICAgIH1cbiAgICB0aGlzLl9jYWxsID0gY2FsbGJhY2s7XG4gICAgdGhpcy5fdGltZSA9IHRpbWU7XG4gICAgc2xlZXAoKTtcbiAgfSxcbiAgc3RvcDogZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX2NhbGwpIHtcbiAgICAgIHRoaXMuX2NhbGwgPSBudWxsO1xuICAgICAgdGhpcy5fdGltZSA9IEluZmluaXR5O1xuICAgICAgc2xlZXAoKTtcbiAgICB9XG4gIH1cbn07XG5cbmV4cG9ydCBmdW5jdGlvbiB0aW1lcihjYWxsYmFjaywgZGVsYXksIHRpbWUpIHtcbiAgdmFyIHQgPSBuZXcgVGltZXI7XG4gIHQucmVzdGFydChjYWxsYmFjaywgZGVsYXksIHRpbWUpO1xuICByZXR1cm4gdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRpbWVyRmx1c2goKSB7XG4gIG5vdygpOyAvLyBHZXQgdGhlIGN1cnJlbnQgdGltZSwgaWYgbm90IGFscmVhZHkgc2V0LlxuICArK2ZyYW1lOyAvLyBQcmV0ZW5kIHdl4oCZdmUgc2V0IGFuIGFsYXJtLCBpZiB3ZSBoYXZlbuKAmXQgYWxyZWFkeS5cbiAgdmFyIHQgPSB0YXNrSGVhZCwgZTtcbiAgd2hpbGUgKHQpIHtcbiAgICBpZiAoKGUgPSBjbG9ja05vdyAtIHQuX3RpbWUpID49IDApIHQuX2NhbGwuY2FsbCh1bmRlZmluZWQsIGUpO1xuICAgIHQgPSB0Ll9uZXh0O1xuICB9XG4gIC0tZnJhbWU7XG59XG5cbmZ1bmN0aW9uIHdha2UoKSB7XG4gIGNsb2NrTm93ID0gKGNsb2NrTGFzdCA9IGNsb2NrLm5vdygpKSArIGNsb2NrU2tldztcbiAgZnJhbWUgPSB0aW1lb3V0ID0gMDtcbiAgdHJ5IHtcbiAgICB0aW1lckZsdXNoKCk7XG4gIH0gZmluYWxseSB7XG4gICAgZnJhbWUgPSAwO1xuICAgIG5hcCgpO1xuICAgIGNsb2NrTm93ID0gMDtcbiAgfVxufVxuXG5mdW5jdGlvbiBwb2tlKCkge1xuICB2YXIgbm93ID0gY2xvY2subm93KCksIGRlbGF5ID0gbm93IC0gY2xvY2tMYXN0O1xuICBpZiAoZGVsYXkgPiBwb2tlRGVsYXkpIGNsb2NrU2tldyAtPSBkZWxheSwgY2xvY2tMYXN0ID0gbm93O1xufVxuXG5mdW5jdGlvbiBuYXAoKSB7XG4gIHZhciB0MCwgdDEgPSB0YXNrSGVhZCwgdDIsIHRpbWUgPSBJbmZpbml0eTtcbiAgd2hpbGUgKHQxKSB7XG4gICAgaWYgKHQxLl9jYWxsKSB7XG4gICAgICBpZiAodGltZSA+IHQxLl90aW1lKSB0aW1lID0gdDEuX3RpbWU7XG4gICAgICB0MCA9IHQxLCB0MSA9IHQxLl9uZXh0O1xuICAgIH0gZWxzZSB7XG4gICAgICB0MiA9IHQxLl9uZXh0LCB0MS5fbmV4dCA9IG51bGw7XG4gICAgICB0MSA9IHQwID8gdDAuX25leHQgPSB0MiA6IHRhc2tIZWFkID0gdDI7XG4gICAgfVxuICB9XG4gIHRhc2tUYWlsID0gdDA7XG4gIHNsZWVwKHRpbWUpO1xufVxuXG5mdW5jdGlvbiBzbGVlcCh0aW1lKSB7XG4gIGlmIChmcmFtZSkgcmV0dXJuOyAvLyBTb29uZXN0IGFsYXJtIGFscmVhZHkgc2V0LCBvciB3aWxsIGJlLlxuICBpZiAodGltZW91dCkgdGltZW91dCA9IGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgdmFyIGRlbGF5ID0gdGltZSAtIGNsb2NrTm93OyAvLyBTdHJpY3RseSBsZXNzIHRoYW4gaWYgd2UgcmVjb21wdXRlZCBjbG9ja05vdy5cbiAgaWYgKGRlbGF5ID4gMjQpIHtcbiAgICBpZiAodGltZSA8IEluZmluaXR5KSB0aW1lb3V0ID0gc2V0VGltZW91dCh3YWtlLCB0aW1lIC0gY2xvY2subm93KCkgLSBjbG9ja1NrZXcpO1xuICAgIGlmIChpbnRlcnZhbCkgaW50ZXJ2YWwgPSBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoIWludGVydmFsKSBjbG9ja0xhc3QgPSBjbG9jay5ub3coKSwgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChwb2tlLCBwb2tlRGVsYXkpO1xuICAgIGZyYW1lID0gMSwgc2V0RnJhbWUod2FrZSk7XG4gIH1cbn1cbiIsImltcG9ydCB7VGltZXJ9IGZyb20gXCIuL3RpbWVyLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGNhbGxiYWNrLCBkZWxheSwgdGltZSkge1xuICB2YXIgdCA9IG5ldyBUaW1lcjtcbiAgZGVsYXkgPSBkZWxheSA9PSBudWxsID8gMCA6ICtkZWxheTtcbiAgdC5yZXN0YXJ0KGVsYXBzZWQgPT4ge1xuICAgIHQuc3RvcCgpO1xuICAgIGNhbGxiYWNrKGVsYXBzZWQgKyBkZWxheSk7XG4gIH0sIGRlbGF5LCB0aW1lKTtcbiAgcmV0dXJuIHQ7XG59XG4iLCJpbXBvcnQge2Rpc3BhdGNofSBmcm9tIFwiZDMtZGlzcGF0Y2hcIjtcbmltcG9ydCB7dGltZXIsIHRpbWVvdXR9IGZyb20gXCJkMy10aW1lclwiO1xuXG52YXIgZW1wdHlPbiA9IGRpc3BhdGNoKFwic3RhcnRcIiwgXCJlbmRcIiwgXCJjYW5jZWxcIiwgXCJpbnRlcnJ1cHRcIik7XG52YXIgZW1wdHlUd2VlbiA9IFtdO1xuXG5leHBvcnQgdmFyIENSRUFURUQgPSAwO1xuZXhwb3J0IHZhciBTQ0hFRFVMRUQgPSAxO1xuZXhwb3J0IHZhciBTVEFSVElORyA9IDI7XG5leHBvcnQgdmFyIFNUQVJURUQgPSAzO1xuZXhwb3J0IHZhciBSVU5OSU5HID0gNDtcbmV4cG9ydCB2YXIgRU5ESU5HID0gNTtcbmV4cG9ydCB2YXIgRU5ERUQgPSA2O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihub2RlLCBuYW1lLCBpZCwgaW5kZXgsIGdyb3VwLCB0aW1pbmcpIHtcbiAgdmFyIHNjaGVkdWxlcyA9IG5vZGUuX190cmFuc2l0aW9uO1xuICBpZiAoIXNjaGVkdWxlcykgbm9kZS5fX3RyYW5zaXRpb24gPSB7fTtcbiAgZWxzZSBpZiAoaWQgaW4gc2NoZWR1bGVzKSByZXR1cm47XG4gIGNyZWF0ZShub2RlLCBpZCwge1xuICAgIG5hbWU6IG5hbWUsXG4gICAgaW5kZXg6IGluZGV4LCAvLyBGb3IgY29udGV4dCBkdXJpbmcgY2FsbGJhY2suXG4gICAgZ3JvdXA6IGdyb3VwLCAvLyBGb3IgY29udGV4dCBkdXJpbmcgY2FsbGJhY2suXG4gICAgb246IGVtcHR5T24sXG4gICAgdHdlZW46IGVtcHR5VHdlZW4sXG4gICAgdGltZTogdGltaW5nLnRpbWUsXG4gICAgZGVsYXk6IHRpbWluZy5kZWxheSxcbiAgICBkdXJhdGlvbjogdGltaW5nLmR1cmF0aW9uLFxuICAgIGVhc2U6IHRpbWluZy5lYXNlLFxuICAgIHRpbWVyOiBudWxsLFxuICAgIHN0YXRlOiBDUkVBVEVEXG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5pdChub2RlLCBpZCkge1xuICB2YXIgc2NoZWR1bGUgPSBnZXQobm9kZSwgaWQpO1xuICBpZiAoc2NoZWR1bGUuc3RhdGUgPiBDUkVBVEVEKSB0aHJvdyBuZXcgRXJyb3IoXCJ0b28gbGF0ZTsgYWxyZWFkeSBzY2hlZHVsZWRcIik7XG4gIHJldHVybiBzY2hlZHVsZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldChub2RlLCBpZCkge1xuICB2YXIgc2NoZWR1bGUgPSBnZXQobm9kZSwgaWQpO1xuICBpZiAoc2NoZWR1bGUuc3RhdGUgPiBTVEFSVEVEKSB0aHJvdyBuZXcgRXJyb3IoXCJ0b28gbGF0ZTsgYWxyZWFkeSBydW5uaW5nXCIpO1xuICByZXR1cm4gc2NoZWR1bGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXQobm9kZSwgaWQpIHtcbiAgdmFyIHNjaGVkdWxlID0gbm9kZS5fX3RyYW5zaXRpb247XG4gIGlmICghc2NoZWR1bGUgfHwgIShzY2hlZHVsZSA9IHNjaGVkdWxlW2lkXSkpIHRocm93IG5ldyBFcnJvcihcInRyYW5zaXRpb24gbm90IGZvdW5kXCIpO1xuICByZXR1cm4gc2NoZWR1bGU7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZShub2RlLCBpZCwgc2VsZikge1xuICB2YXIgc2NoZWR1bGVzID0gbm9kZS5fX3RyYW5zaXRpb24sXG4gICAgICB0d2VlbjtcblxuICAvLyBJbml0aWFsaXplIHRoZSBzZWxmIHRpbWVyIHdoZW4gdGhlIHRyYW5zaXRpb24gaXMgY3JlYXRlZC5cbiAgLy8gTm90ZSB0aGUgYWN0dWFsIGRlbGF5IGlzIG5vdCBrbm93biB1bnRpbCB0aGUgZmlyc3QgY2FsbGJhY2shXG4gIHNjaGVkdWxlc1tpZF0gPSBzZWxmO1xuICBzZWxmLnRpbWVyID0gdGltZXIoc2NoZWR1bGUsIDAsIHNlbGYudGltZSk7XG5cbiAgZnVuY3Rpb24gc2NoZWR1bGUoZWxhcHNlZCkge1xuICAgIHNlbGYuc3RhdGUgPSBTQ0hFRFVMRUQ7XG4gICAgc2VsZi50aW1lci5yZXN0YXJ0KHN0YXJ0LCBzZWxmLmRlbGF5LCBzZWxmLnRpbWUpO1xuXG4gICAgLy8gSWYgdGhlIGVsYXBzZWQgZGVsYXkgaXMgbGVzcyB0aGFuIG91ciBmaXJzdCBzbGVlcCwgc3RhcnQgaW1tZWRpYXRlbHkuXG4gICAgaWYgKHNlbGYuZGVsYXkgPD0gZWxhcHNlZCkgc3RhcnQoZWxhcHNlZCAtIHNlbGYuZGVsYXkpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnQoZWxhcHNlZCkge1xuICAgIHZhciBpLCBqLCBuLCBvO1xuXG4gICAgLy8gSWYgdGhlIHN0YXRlIGlzIG5vdCBTQ0hFRFVMRUQsIHRoZW4gd2UgcHJldmlvdXNseSBlcnJvcmVkIG9uIHN0YXJ0LlxuICAgIGlmIChzZWxmLnN0YXRlICE9PSBTQ0hFRFVMRUQpIHJldHVybiBzdG9wKCk7XG5cbiAgICBmb3IgKGkgaW4gc2NoZWR1bGVzKSB7XG4gICAgICBvID0gc2NoZWR1bGVzW2ldO1xuICAgICAgaWYgKG8ubmFtZSAhPT0gc2VsZi5uYW1lKSBjb250aW51ZTtcblxuICAgICAgLy8gV2hpbGUgdGhpcyBlbGVtZW50IGFscmVhZHkgaGFzIGEgc3RhcnRpbmcgdHJhbnNpdGlvbiBkdXJpbmcgdGhpcyBmcmFtZSxcbiAgICAgIC8vIGRlZmVyIHN0YXJ0aW5nIGFuIGludGVycnVwdGluZyB0cmFuc2l0aW9uIHVudGlsIHRoYXQgdHJhbnNpdGlvbiBoYXMgYVxuICAgICAgLy8gY2hhbmNlIHRvIHRpY2sgKGFuZCBwb3NzaWJseSBlbmQpOyBzZWUgZDMvZDMtdHJhbnNpdGlvbiM1NCFcbiAgICAgIGlmIChvLnN0YXRlID09PSBTVEFSVEVEKSByZXR1cm4gdGltZW91dChzdGFydCk7XG5cbiAgICAgIC8vIEludGVycnVwdCB0aGUgYWN0aXZlIHRyYW5zaXRpb24sIGlmIGFueS5cbiAgICAgIGlmIChvLnN0YXRlID09PSBSVU5OSU5HKSB7XG4gICAgICAgIG8uc3RhdGUgPSBFTkRFRDtcbiAgICAgICAgby50aW1lci5zdG9wKCk7XG4gICAgICAgIG8ub24uY2FsbChcImludGVycnVwdFwiLCBub2RlLCBub2RlLl9fZGF0YV9fLCBvLmluZGV4LCBvLmdyb3VwKTtcbiAgICAgICAgZGVsZXRlIHNjaGVkdWxlc1tpXTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2FuY2VsIGFueSBwcmUtZW1wdGVkIHRyYW5zaXRpb25zLlxuICAgICAgZWxzZSBpZiAoK2kgPCBpZCkge1xuICAgICAgICBvLnN0YXRlID0gRU5ERUQ7XG4gICAgICAgIG8udGltZXIuc3RvcCgpO1xuICAgICAgICBvLm9uLmNhbGwoXCJjYW5jZWxcIiwgbm9kZSwgbm9kZS5fX2RhdGFfXywgby5pbmRleCwgby5ncm91cCk7XG4gICAgICAgIGRlbGV0ZSBzY2hlZHVsZXNbaV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRGVmZXIgdGhlIGZpcnN0IHRpY2sgdG8gZW5kIG9mIHRoZSBjdXJyZW50IGZyYW1lOyBzZWUgZDMvZDMjMTU3Ni5cbiAgICAvLyBOb3RlIHRoZSB0cmFuc2l0aW9uIG1heSBiZSBjYW5jZWxlZCBhZnRlciBzdGFydCBhbmQgYmVmb3JlIHRoZSBmaXJzdCB0aWNrIVxuICAgIC8vIE5vdGUgdGhpcyBtdXN0IGJlIHNjaGVkdWxlZCBiZWZvcmUgdGhlIHN0YXJ0IGV2ZW50OyBzZWUgZDMvZDMtdHJhbnNpdGlvbiMxNiFcbiAgICAvLyBBc3N1bWluZyB0aGlzIGlzIHN1Y2Nlc3NmdWwsIHN1YnNlcXVlbnQgY2FsbGJhY2tzIGdvIHN0cmFpZ2h0IHRvIHRpY2suXG4gICAgdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGlmIChzZWxmLnN0YXRlID09PSBTVEFSVEVEKSB7XG4gICAgICAgIHNlbGYuc3RhdGUgPSBSVU5OSU5HO1xuICAgICAgICBzZWxmLnRpbWVyLnJlc3RhcnQodGljaywgc2VsZi5kZWxheSwgc2VsZi50aW1lKTtcbiAgICAgICAgdGljayhlbGFwc2VkKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIERpc3BhdGNoIHRoZSBzdGFydCBldmVudC5cbiAgICAvLyBOb3RlIHRoaXMgbXVzdCBiZSBkb25lIGJlZm9yZSB0aGUgdHdlZW4gYXJlIGluaXRpYWxpemVkLlxuICAgIHNlbGYuc3RhdGUgPSBTVEFSVElORztcbiAgICBzZWxmLm9uLmNhbGwoXCJzdGFydFwiLCBub2RlLCBub2RlLl9fZGF0YV9fLCBzZWxmLmluZGV4LCBzZWxmLmdyb3VwKTtcbiAgICBpZiAoc2VsZi5zdGF0ZSAhPT0gU1RBUlRJTkcpIHJldHVybjsgLy8gaW50ZXJydXB0ZWRcbiAgICBzZWxmLnN0YXRlID0gU1RBUlRFRDtcblxuICAgIC8vIEluaXRpYWxpemUgdGhlIHR3ZWVuLCBkZWxldGluZyBudWxsIHR3ZWVuLlxuICAgIHR3ZWVuID0gbmV3IEFycmF5KG4gPSBzZWxmLnR3ZWVuLmxlbmd0aCk7XG4gICAgZm9yIChpID0gMCwgaiA9IC0xOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobyA9IHNlbGYudHdlZW5baV0udmFsdWUuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBzZWxmLmluZGV4LCBzZWxmLmdyb3VwKSkge1xuICAgICAgICB0d2VlblsrK2pdID0gbztcbiAgICAgIH1cbiAgICB9XG4gICAgdHdlZW4ubGVuZ3RoID0gaiArIDE7XG4gIH1cblxuICBmdW5jdGlvbiB0aWNrKGVsYXBzZWQpIHtcbiAgICB2YXIgdCA9IGVsYXBzZWQgPCBzZWxmLmR1cmF0aW9uID8gc2VsZi5lYXNlLmNhbGwobnVsbCwgZWxhcHNlZCAvIHNlbGYuZHVyYXRpb24pIDogKHNlbGYudGltZXIucmVzdGFydChzdG9wKSwgc2VsZi5zdGF0ZSA9IEVORElORywgMSksXG4gICAgICAgIGkgPSAtMSxcbiAgICAgICAgbiA9IHR3ZWVuLmxlbmd0aDtcblxuICAgIHdoaWxlICgrK2kgPCBuKSB7XG4gICAgICB0d2VlbltpXS5jYWxsKG5vZGUsIHQpO1xuICAgIH1cblxuICAgIC8vIERpc3BhdGNoIHRoZSBlbmQgZXZlbnQuXG4gICAgaWYgKHNlbGYuc3RhdGUgPT09IEVORElORykge1xuICAgICAgc2VsZi5vbi5jYWxsKFwiZW5kXCIsIG5vZGUsIG5vZGUuX19kYXRhX18sIHNlbGYuaW5kZXgsIHNlbGYuZ3JvdXApO1xuICAgICAgc3RvcCgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgc2VsZi5zdGF0ZSA9IEVOREVEO1xuICAgIHNlbGYudGltZXIuc3RvcCgpO1xuICAgIGRlbGV0ZSBzY2hlZHVsZXNbaWRdO1xuICAgIGZvciAodmFyIGkgaW4gc2NoZWR1bGVzKSByZXR1cm47IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICBkZWxldGUgbm9kZS5fX3RyYW5zaXRpb247XG4gIH1cbn1cbiIsImltcG9ydCB7U1RBUlRJTkcsIEVORElORywgRU5ERUR9IGZyb20gXCIuL3RyYW5zaXRpb24vc2NoZWR1bGUuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obm9kZSwgbmFtZSkge1xuICB2YXIgc2NoZWR1bGVzID0gbm9kZS5fX3RyYW5zaXRpb24sXG4gICAgICBzY2hlZHVsZSxcbiAgICAgIGFjdGl2ZSxcbiAgICAgIGVtcHR5ID0gdHJ1ZSxcbiAgICAgIGk7XG5cbiAgaWYgKCFzY2hlZHVsZXMpIHJldHVybjtcblxuICBuYW1lID0gbmFtZSA9PSBudWxsID8gbnVsbCA6IG5hbWUgKyBcIlwiO1xuXG4gIGZvciAoaSBpbiBzY2hlZHVsZXMpIHtcbiAgICBpZiAoKHNjaGVkdWxlID0gc2NoZWR1bGVzW2ldKS5uYW1lICE9PSBuYW1lKSB7IGVtcHR5ID0gZmFsc2U7IGNvbnRpbnVlOyB9XG4gICAgYWN0aXZlID0gc2NoZWR1bGUuc3RhdGUgPiBTVEFSVElORyAmJiBzY2hlZHVsZS5zdGF0ZSA8IEVORElORztcbiAgICBzY2hlZHVsZS5zdGF0ZSA9IEVOREVEO1xuICAgIHNjaGVkdWxlLnRpbWVyLnN0b3AoKTtcbiAgICBzY2hlZHVsZS5vbi5jYWxsKGFjdGl2ZSA/IFwiaW50ZXJydXB0XCIgOiBcImNhbmNlbFwiLCBub2RlLCBub2RlLl9fZGF0YV9fLCBzY2hlZHVsZS5pbmRleCwgc2NoZWR1bGUuZ3JvdXApO1xuICAgIGRlbGV0ZSBzY2hlZHVsZXNbaV07XG4gIH1cblxuICBpZiAoZW1wdHkpIGRlbGV0ZSBub2RlLl9fdHJhbnNpdGlvbjtcbn1cbiIsImltcG9ydCBpbnRlcnJ1cHQgZnJvbSBcIi4uL2ludGVycnVwdC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lKSB7XG4gIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgaW50ZXJydXB0KHRoaXMsIG5hbWUpO1xuICB9KTtcbn1cbiIsImltcG9ydCB7Z2V0LCBzZXR9IGZyb20gXCIuL3NjaGVkdWxlLmpzXCI7XG5cbmZ1bmN0aW9uIHR3ZWVuUmVtb3ZlKGlkLCBuYW1lKSB7XG4gIHZhciB0d2VlbjAsIHR3ZWVuMTtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzY2hlZHVsZSA9IHNldCh0aGlzLCBpZCksXG4gICAgICAgIHR3ZWVuID0gc2NoZWR1bGUudHdlZW47XG5cbiAgICAvLyBJZiB0aGlzIG5vZGUgc2hhcmVkIHR3ZWVuIHdpdGggdGhlIHByZXZpb3VzIG5vZGUsXG4gICAgLy8ganVzdCBhc3NpZ24gdGhlIHVwZGF0ZWQgc2hhcmVkIHR3ZWVuIGFuZCB3ZeKAmXJlIGRvbmUhXG4gICAgLy8gT3RoZXJ3aXNlLCBjb3B5LW9uLXdyaXRlLlxuICAgIGlmICh0d2VlbiAhPT0gdHdlZW4wKSB7XG4gICAgICB0d2VlbjEgPSB0d2VlbjAgPSB0d2VlbjtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBuID0gdHdlZW4xLmxlbmd0aDsgaSA8IG47ICsraSkge1xuICAgICAgICBpZiAodHdlZW4xW2ldLm5hbWUgPT09IG5hbWUpIHtcbiAgICAgICAgICB0d2VlbjEgPSB0d2VlbjEuc2xpY2UoKTtcbiAgICAgICAgICB0d2VlbjEuc3BsaWNlKGksIDEpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgc2NoZWR1bGUudHdlZW4gPSB0d2VlbjE7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHR3ZWVuRnVuY3Rpb24oaWQsIG5hbWUsIHZhbHVlKSB7XG4gIHZhciB0d2VlbjAsIHR3ZWVuMTtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgRXJyb3I7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2NoZWR1bGUgPSBzZXQodGhpcywgaWQpLFxuICAgICAgICB0d2VlbiA9IHNjaGVkdWxlLnR3ZWVuO1xuXG4gICAgLy8gSWYgdGhpcyBub2RlIHNoYXJlZCB0d2VlbiB3aXRoIHRoZSBwcmV2aW91cyBub2RlLFxuICAgIC8vIGp1c3QgYXNzaWduIHRoZSB1cGRhdGVkIHNoYXJlZCB0d2VlbiBhbmQgd2XigJlyZSBkb25lIVxuICAgIC8vIE90aGVyd2lzZSwgY29weS1vbi13cml0ZS5cbiAgICBpZiAodHdlZW4gIT09IHR3ZWVuMCkge1xuICAgICAgdHdlZW4xID0gKHR3ZWVuMCA9IHR3ZWVuKS5zbGljZSgpO1xuICAgICAgZm9yICh2YXIgdCA9IHtuYW1lOiBuYW1lLCB2YWx1ZTogdmFsdWV9LCBpID0gMCwgbiA9IHR3ZWVuMS5sZW5ndGg7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgaWYgKHR3ZWVuMVtpXS5uYW1lID09PSBuYW1lKSB7XG4gICAgICAgICAgdHdlZW4xW2ldID0gdDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGkgPT09IG4pIHR3ZWVuMS5wdXNoKHQpO1xuICAgIH1cblxuICAgIHNjaGVkdWxlLnR3ZWVuID0gdHdlZW4xO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICB2YXIgaWQgPSB0aGlzLl9pZDtcblxuICBuYW1lICs9IFwiXCI7XG5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgdmFyIHR3ZWVuID0gZ2V0KHRoaXMubm9kZSgpLCBpZCkudHdlZW47XG4gICAgZm9yICh2YXIgaSA9IDAsIG4gPSB0d2Vlbi5sZW5ndGgsIHQ7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmICgodCA9IHR3ZWVuW2ldKS5uYW1lID09PSBuYW1lKSB7XG4gICAgICAgIHJldHVybiB0LnZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiB0aGlzLmVhY2goKHZhbHVlID09IG51bGwgPyB0d2VlblJlbW92ZSA6IHR3ZWVuRnVuY3Rpb24pKGlkLCBuYW1lLCB2YWx1ZSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdHdlZW5WYWx1ZSh0cmFuc2l0aW9uLCBuYW1lLCB2YWx1ZSkge1xuICB2YXIgaWQgPSB0cmFuc2l0aW9uLl9pZDtcblxuICB0cmFuc2l0aW9uLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNjaGVkdWxlID0gc2V0KHRoaXMsIGlkKTtcbiAgICAoc2NoZWR1bGUudmFsdWUgfHwgKHNjaGVkdWxlLnZhbHVlID0ge30pKVtuYW1lXSA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH0pO1xuXG4gIHJldHVybiBmdW5jdGlvbihub2RlKSB7XG4gICAgcmV0dXJuIGdldChub2RlLCBpZCkudmFsdWVbbmFtZV07XG4gIH07XG59XG4iLCJpbXBvcnQge2NvbG9yfSBmcm9tIFwiZDMtY29sb3JcIjtcbmltcG9ydCB7aW50ZXJwb2xhdGVOdW1iZXIsIGludGVycG9sYXRlUmdiLCBpbnRlcnBvbGF0ZVN0cmluZ30gZnJvbSBcImQzLWludGVycG9sYXRlXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGEsIGIpIHtcbiAgdmFyIGM7XG4gIHJldHVybiAodHlwZW9mIGIgPT09IFwibnVtYmVyXCIgPyBpbnRlcnBvbGF0ZU51bWJlclxuICAgICAgOiBiIGluc3RhbmNlb2YgY29sb3IgPyBpbnRlcnBvbGF0ZVJnYlxuICAgICAgOiAoYyA9IGNvbG9yKGIpKSA/IChiID0gYywgaW50ZXJwb2xhdGVSZ2IpXG4gICAgICA6IGludGVycG9sYXRlU3RyaW5nKShhLCBiKTtcbn1cbiIsImltcG9ydCB7aW50ZXJwb2xhdGVUcmFuc2Zvcm1TdmcgYXMgaW50ZXJwb2xhdGVUcmFuc2Zvcm19IGZyb20gXCJkMy1pbnRlcnBvbGF0ZVwiO1xuaW1wb3J0IHtuYW1lc3BhY2V9IGZyb20gXCJkMy1zZWxlY3Rpb25cIjtcbmltcG9ydCB7dHdlZW5WYWx1ZX0gZnJvbSBcIi4vdHdlZW4uanNcIjtcbmltcG9ydCBpbnRlcnBvbGF0ZSBmcm9tIFwiLi9pbnRlcnBvbGF0ZS5qc1wiO1xuXG5mdW5jdGlvbiBhdHRyUmVtb3ZlKG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyUmVtb3ZlTlMoZnVsbG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckNvbnN0YW50KG5hbWUsIGludGVycG9sYXRlLCB2YWx1ZTEpIHtcbiAgdmFyIHN0cmluZzAwLFxuICAgICAgc3RyaW5nMSA9IHZhbHVlMSArIFwiXCIsXG4gICAgICBpbnRlcnBvbGF0ZTA7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3RyaW5nMCA9IHRoaXMuZ2V0QXR0cmlidXRlKG5hbWUpO1xuICAgIHJldHVybiBzdHJpbmcwID09PSBzdHJpbmcxID8gbnVsbFxuICAgICAgICA6IHN0cmluZzAgPT09IHN0cmluZzAwID8gaW50ZXJwb2xhdGUwXG4gICAgICAgIDogaW50ZXJwb2xhdGUwID0gaW50ZXJwb2xhdGUoc3RyaW5nMDAgPSBzdHJpbmcwLCB2YWx1ZTEpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyQ29uc3RhbnROUyhmdWxsbmFtZSwgaW50ZXJwb2xhdGUsIHZhbHVlMSkge1xuICB2YXIgc3RyaW5nMDAsXG4gICAgICBzdHJpbmcxID0gdmFsdWUxICsgXCJcIixcbiAgICAgIGludGVycG9sYXRlMDtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdHJpbmcwID0gdGhpcy5nZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwpO1xuICAgIHJldHVybiBzdHJpbmcwID09PSBzdHJpbmcxID8gbnVsbFxuICAgICAgICA6IHN0cmluZzAgPT09IHN0cmluZzAwID8gaW50ZXJwb2xhdGUwXG4gICAgICAgIDogaW50ZXJwb2xhdGUwID0gaW50ZXJwb2xhdGUoc3RyaW5nMDAgPSBzdHJpbmcwLCB2YWx1ZTEpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyRnVuY3Rpb24obmFtZSwgaW50ZXJwb2xhdGUsIHZhbHVlKSB7XG4gIHZhciBzdHJpbmcwMCxcbiAgICAgIHN0cmluZzEwLFxuICAgICAgaW50ZXJwb2xhdGUwO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0cmluZzAsIHZhbHVlMSA9IHZhbHVlKHRoaXMpLCBzdHJpbmcxO1xuICAgIGlmICh2YWx1ZTEgPT0gbnVsbCkgcmV0dXJuIHZvaWQgdGhpcy5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgc3RyaW5nMCA9IHRoaXMuZ2V0QXR0cmlidXRlKG5hbWUpO1xuICAgIHN0cmluZzEgPSB2YWx1ZTEgKyBcIlwiO1xuICAgIHJldHVybiBzdHJpbmcwID09PSBzdHJpbmcxID8gbnVsbFxuICAgICAgICA6IHN0cmluZzAgPT09IHN0cmluZzAwICYmIHN0cmluZzEgPT09IHN0cmluZzEwID8gaW50ZXJwb2xhdGUwXG4gICAgICAgIDogKHN0cmluZzEwID0gc3RyaW5nMSwgaW50ZXJwb2xhdGUwID0gaW50ZXJwb2xhdGUoc3RyaW5nMDAgPSBzdHJpbmcwLCB2YWx1ZTEpKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckZ1bmN0aW9uTlMoZnVsbG5hbWUsIGludGVycG9sYXRlLCB2YWx1ZSkge1xuICB2YXIgc3RyaW5nMDAsXG4gICAgICBzdHJpbmcxMCxcbiAgICAgIGludGVycG9sYXRlMDtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdHJpbmcwLCB2YWx1ZTEgPSB2YWx1ZSh0aGlzKSwgc3RyaW5nMTtcbiAgICBpZiAodmFsdWUxID09IG51bGwpIHJldHVybiB2b2lkIHRoaXMucmVtb3ZlQXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsKTtcbiAgICBzdHJpbmcwID0gdGhpcy5nZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwpO1xuICAgIHN0cmluZzEgPSB2YWx1ZTEgKyBcIlwiO1xuICAgIHJldHVybiBzdHJpbmcwID09PSBzdHJpbmcxID8gbnVsbFxuICAgICAgICA6IHN0cmluZzAgPT09IHN0cmluZzAwICYmIHN0cmluZzEgPT09IHN0cmluZzEwID8gaW50ZXJwb2xhdGUwXG4gICAgICAgIDogKHN0cmluZzEwID0gc3RyaW5nMSwgaW50ZXJwb2xhdGUwID0gaW50ZXJwb2xhdGUoc3RyaW5nMDAgPSBzdHJpbmcwLCB2YWx1ZTEpKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgdmFyIGZ1bGxuYW1lID0gbmFtZXNwYWNlKG5hbWUpLCBpID0gZnVsbG5hbWUgPT09IFwidHJhbnNmb3JtXCIgPyBpbnRlcnBvbGF0ZVRyYW5zZm9ybSA6IGludGVycG9sYXRlO1xuICByZXR1cm4gdGhpcy5hdHRyVHdlZW4obmFtZSwgdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gKGZ1bGxuYW1lLmxvY2FsID8gYXR0ckZ1bmN0aW9uTlMgOiBhdHRyRnVuY3Rpb24pKGZ1bGxuYW1lLCBpLCB0d2VlblZhbHVlKHRoaXMsIFwiYXR0ci5cIiArIG5hbWUsIHZhbHVlKSlcbiAgICAgIDogdmFsdWUgPT0gbnVsbCA/IChmdWxsbmFtZS5sb2NhbCA/IGF0dHJSZW1vdmVOUyA6IGF0dHJSZW1vdmUpKGZ1bGxuYW1lKVxuICAgICAgOiAoZnVsbG5hbWUubG9jYWwgPyBhdHRyQ29uc3RhbnROUyA6IGF0dHJDb25zdGFudCkoZnVsbG5hbWUsIGksIHZhbHVlKSk7XG59XG4iLCJpbXBvcnQge25hbWVzcGFjZX0gZnJvbSBcImQzLXNlbGVjdGlvblwiO1xuXG5mdW5jdGlvbiBhdHRySW50ZXJwb2xhdGUobmFtZSwgaSkge1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIHRoaXMuc2V0QXR0cmlidXRlKG5hbWUsIGkuY2FsbCh0aGlzLCB0KSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJJbnRlcnBvbGF0ZU5TKGZ1bGxuYW1lLCBpKSB7XG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwsIGkuY2FsbCh0aGlzLCB0KSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJUd2Vlbk5TKGZ1bGxuYW1lLCB2YWx1ZSkge1xuICB2YXIgdDAsIGkwO1xuICBmdW5jdGlvbiB0d2VlbigpIHtcbiAgICB2YXIgaSA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKGkgIT09IGkwKSB0MCA9IChpMCA9IGkpICYmIGF0dHJJbnRlcnBvbGF0ZU5TKGZ1bGxuYW1lLCBpKTtcbiAgICByZXR1cm4gdDA7XG4gIH1cbiAgdHdlZW4uX3ZhbHVlID0gdmFsdWU7XG4gIHJldHVybiB0d2Vlbjtcbn1cblxuZnVuY3Rpb24gYXR0clR3ZWVuKG5hbWUsIHZhbHVlKSB7XG4gIHZhciB0MCwgaTA7XG4gIGZ1bmN0aW9uIHR3ZWVuKCkge1xuICAgIHZhciBpID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoaSAhPT0gaTApIHQwID0gKGkwID0gaSkgJiYgYXR0ckludGVycG9sYXRlKG5hbWUsIGkpO1xuICAgIHJldHVybiB0MDtcbiAgfVxuICB0d2Vlbi5fdmFsdWUgPSB2YWx1ZTtcbiAgcmV0dXJuIHR3ZWVuO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICB2YXIga2V5ID0gXCJhdHRyLlwiICsgbmFtZTtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSByZXR1cm4gKGtleSA9IHRoaXMudHdlZW4oa2V5KSkgJiYga2V5Ll92YWx1ZTtcbiAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiB0aGlzLnR3ZWVuKGtleSwgbnVsbCk7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IEVycm9yO1xuICB2YXIgZnVsbG5hbWUgPSBuYW1lc3BhY2UobmFtZSk7XG4gIHJldHVybiB0aGlzLnR3ZWVuKGtleSwgKGZ1bGxuYW1lLmxvY2FsID8gYXR0clR3ZWVuTlMgOiBhdHRyVHdlZW4pKGZ1bGxuYW1lLCB2YWx1ZSkpO1xufVxuIiwiaW1wb3J0IHtnZXQsIGluaXR9IGZyb20gXCIuL3NjaGVkdWxlLmpzXCI7XG5cbmZ1bmN0aW9uIGRlbGF5RnVuY3Rpb24oaWQsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICBpbml0KHRoaXMsIGlkKS5kZWxheSA9ICt2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBkZWxheUNvbnN0YW50KGlkLCB2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPSArdmFsdWUsIGZ1bmN0aW9uKCkge1xuICAgIGluaXQodGhpcywgaWQpLmRlbGF5ID0gdmFsdWU7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHZhciBpZCA9IHRoaXMuX2lkO1xuXG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICA/IHRoaXMuZWFjaCgodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICA/IGRlbGF5RnVuY3Rpb25cbiAgICAgICAgICA6IGRlbGF5Q29uc3RhbnQpKGlkLCB2YWx1ZSkpXG4gICAgICA6IGdldCh0aGlzLm5vZGUoKSwgaWQpLmRlbGF5O1xufVxuIiwiaW1wb3J0IHtnZXQsIHNldH0gZnJvbSBcIi4vc2NoZWR1bGUuanNcIjtcblxuZnVuY3Rpb24gZHVyYXRpb25GdW5jdGlvbihpZCwgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHNldCh0aGlzLCBpZCkuZHVyYXRpb24gPSArdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZHVyYXRpb25Db25zdGFudChpZCwgdmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID0gK3ZhbHVlLCBmdW5jdGlvbigpIHtcbiAgICBzZXQodGhpcywgaWQpLmR1cmF0aW9uID0gdmFsdWU7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHZhciBpZCA9IHRoaXMuX2lkO1xuXG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICA/IHRoaXMuZWFjaCgodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICA/IGR1cmF0aW9uRnVuY3Rpb25cbiAgICAgICAgICA6IGR1cmF0aW9uQ29uc3RhbnQpKGlkLCB2YWx1ZSkpXG4gICAgICA6IGdldCh0aGlzLm5vZGUoKSwgaWQpLmR1cmF0aW9uO1xufVxuIiwiaW1wb3J0IHtnZXQsIHNldH0gZnJvbSBcIi4vc2NoZWR1bGUuanNcIjtcblxuZnVuY3Rpb24gZWFzZUNvbnN0YW50KGlkLCB2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBFcnJvcjtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHNldCh0aGlzLCBpZCkuZWFzZSA9IHZhbHVlO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih2YWx1ZSkge1xuICB2YXIgaWQgPSB0aGlzLl9pZDtcblxuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgPyB0aGlzLmVhY2goZWFzZUNvbnN0YW50KGlkLCB2YWx1ZSkpXG4gICAgICA6IGdldCh0aGlzLm5vZGUoKSwgaWQpLmVhc2U7XG59XG4iLCJpbXBvcnQge3NldH0gZnJvbSBcIi4vc2NoZWR1bGUuanNcIjtcblxuZnVuY3Rpb24gZWFzZVZhcnlpbmcoaWQsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHR5cGVvZiB2ICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBFcnJvcjtcbiAgICBzZXQodGhpcywgaWQpLmVhc2UgPSB2O1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBFcnJvcjtcbiAgcmV0dXJuIHRoaXMuZWFjaChlYXNlVmFyeWluZyh0aGlzLl9pZCwgdmFsdWUpKTtcbn1cbiIsImltcG9ydCB7bWF0Y2hlcn0gZnJvbSBcImQzLXNlbGVjdGlvblwiO1xuaW1wb3J0IHtUcmFuc2l0aW9ufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihtYXRjaCkge1xuICBpZiAodHlwZW9mIG1hdGNoICE9PSBcImZ1bmN0aW9uXCIpIG1hdGNoID0gbWF0Y2hlcihtYXRjaCk7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gbmV3IEFycmF5KG0pLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBuID0gZ3JvdXAubGVuZ3RoLCBzdWJncm91cCA9IHN1Ymdyb3Vwc1tqXSA9IFtdLCBub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKChub2RlID0gZ3JvdXBbaV0pICYmIG1hdGNoLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKSB7XG4gICAgICAgIHN1Ymdyb3VwLnB1c2gobm9kZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBUcmFuc2l0aW9uKHN1Ymdyb3VwcywgdGhpcy5fcGFyZW50cywgdGhpcy5fbmFtZSwgdGhpcy5faWQpO1xufVxuIiwiaW1wb3J0IHtUcmFuc2l0aW9ufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih0cmFuc2l0aW9uKSB7XG4gIGlmICh0cmFuc2l0aW9uLl9pZCAhPT0gdGhpcy5faWQpIHRocm93IG5ldyBFcnJvcjtcblxuICBmb3IgKHZhciBncm91cHMwID0gdGhpcy5fZ3JvdXBzLCBncm91cHMxID0gdHJhbnNpdGlvbi5fZ3JvdXBzLCBtMCA9IGdyb3VwczAubGVuZ3RoLCBtMSA9IGdyb3VwczEubGVuZ3RoLCBtID0gTWF0aC5taW4obTAsIG0xKSwgbWVyZ2VzID0gbmV3IEFycmF5KG0wKSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cDAgPSBncm91cHMwW2pdLCBncm91cDEgPSBncm91cHMxW2pdLCBuID0gZ3JvdXAwLmxlbmd0aCwgbWVyZ2UgPSBtZXJnZXNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwMFtpXSB8fCBncm91cDFbaV0pIHtcbiAgICAgICAgbWVyZ2VbaV0gPSBub2RlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZvciAoOyBqIDwgbTA7ICsraikge1xuICAgIG1lcmdlc1tqXSA9IGdyb3VwczBbal07XG4gIH1cblxuICByZXR1cm4gbmV3IFRyYW5zaXRpb24obWVyZ2VzLCB0aGlzLl9wYXJlbnRzLCB0aGlzLl9uYW1lLCB0aGlzLl9pZCk7XG59XG4iLCJpbXBvcnQge2dldCwgc2V0LCBpbml0fSBmcm9tIFwiLi9zY2hlZHVsZS5qc1wiO1xuXG5mdW5jdGlvbiBzdGFydChuYW1lKSB7XG4gIHJldHVybiAobmFtZSArIFwiXCIpLnRyaW0oKS5zcGxpdCgvXnxcXHMrLykuZXZlcnkoZnVuY3Rpb24odCkge1xuICAgIHZhciBpID0gdC5pbmRleE9mKFwiLlwiKTtcbiAgICBpZiAoaSA+PSAwKSB0ID0gdC5zbGljZSgwLCBpKTtcbiAgICByZXR1cm4gIXQgfHwgdCA9PT0gXCJzdGFydFwiO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gb25GdW5jdGlvbihpZCwgbmFtZSwgbGlzdGVuZXIpIHtcbiAgdmFyIG9uMCwgb24xLCBzaXQgPSBzdGFydChuYW1lKSA/IGluaXQgOiBzZXQ7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2NoZWR1bGUgPSBzaXQodGhpcywgaWQpLFxuICAgICAgICBvbiA9IHNjaGVkdWxlLm9uO1xuXG4gICAgLy8gSWYgdGhpcyBub2RlIHNoYXJlZCBhIGRpc3BhdGNoIHdpdGggdGhlIHByZXZpb3VzIG5vZGUsXG4gICAgLy8ganVzdCBhc3NpZ24gdGhlIHVwZGF0ZWQgc2hhcmVkIGRpc3BhdGNoIGFuZCB3ZeKAmXJlIGRvbmUhXG4gICAgLy8gT3RoZXJ3aXNlLCBjb3B5LW9uLXdyaXRlLlxuICAgIGlmIChvbiAhPT0gb24wKSAob24xID0gKG9uMCA9IG9uKS5jb3B5KCkpLm9uKG5hbWUsIGxpc3RlbmVyKTtcblxuICAgIHNjaGVkdWxlLm9uID0gb24xO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCBsaXN0ZW5lcikge1xuICB2YXIgaWQgPSB0aGlzLl9pZDtcblxuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA8IDJcbiAgICAgID8gZ2V0KHRoaXMubm9kZSgpLCBpZCkub24ub24obmFtZSlcbiAgICAgIDogdGhpcy5lYWNoKG9uRnVuY3Rpb24oaWQsIG5hbWUsIGxpc3RlbmVyKSk7XG59XG4iLCJmdW5jdGlvbiByZW1vdmVGdW5jdGlvbihpZCkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTtcbiAgICBmb3IgKHZhciBpIGluIHRoaXMuX190cmFuc2l0aW9uKSBpZiAoK2kgIT09IGlkKSByZXR1cm47XG4gICAgaWYgKHBhcmVudCkgcGFyZW50LnJlbW92ZUNoaWxkKHRoaXMpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMub24oXCJlbmQucmVtb3ZlXCIsIHJlbW92ZUZ1bmN0aW9uKHRoaXMuX2lkKSk7XG59XG4iLCJpbXBvcnQge3NlbGVjdG9yfSBmcm9tIFwiZDMtc2VsZWN0aW9uXCI7XG5pbXBvcnQge1RyYW5zaXRpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5pbXBvcnQgc2NoZWR1bGUsIHtnZXR9IGZyb20gXCIuL3NjaGVkdWxlLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNlbGVjdCkge1xuICB2YXIgbmFtZSA9IHRoaXMuX25hbWUsXG4gICAgICBpZCA9IHRoaXMuX2lkO1xuXG4gIGlmICh0eXBlb2Ygc2VsZWN0ICE9PSBcImZ1bmN0aW9uXCIpIHNlbGVjdCA9IHNlbGVjdG9yKHNlbGVjdCk7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gbmV3IEFycmF5KG0pLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBuID0gZ3JvdXAubGVuZ3RoLCBzdWJncm91cCA9IHN1Ymdyb3Vwc1tqXSA9IG5ldyBBcnJheShuKSwgbm9kZSwgc3Vibm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmICgobm9kZSA9IGdyb3VwW2ldKSAmJiAoc3Vibm9kZSA9IHNlbGVjdC5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGdyb3VwKSkpIHtcbiAgICAgICAgaWYgKFwiX19kYXRhX19cIiBpbiBub2RlKSBzdWJub2RlLl9fZGF0YV9fID0gbm9kZS5fX2RhdGFfXztcbiAgICAgICAgc3ViZ3JvdXBbaV0gPSBzdWJub2RlO1xuICAgICAgICBzY2hlZHVsZShzdWJncm91cFtpXSwgbmFtZSwgaWQsIGksIHN1Ymdyb3VwLCBnZXQobm9kZSwgaWQpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IFRyYW5zaXRpb24oc3ViZ3JvdXBzLCB0aGlzLl9wYXJlbnRzLCBuYW1lLCBpZCk7XG59XG4iLCJpbXBvcnQge3NlbGVjdG9yQWxsfSBmcm9tIFwiZDMtc2VsZWN0aW9uXCI7XG5pbXBvcnQge1RyYW5zaXRpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5pbXBvcnQgc2NoZWR1bGUsIHtnZXR9IGZyb20gXCIuL3NjaGVkdWxlLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNlbGVjdCkge1xuICB2YXIgbmFtZSA9IHRoaXMuX25hbWUsXG4gICAgICBpZCA9IHRoaXMuX2lkO1xuXG4gIGlmICh0eXBlb2Ygc2VsZWN0ICE9PSBcImZ1bmN0aW9uXCIpIHNlbGVjdCA9IHNlbGVjdG9yQWxsKHNlbGVjdCk7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gW10sIHBhcmVudHMgPSBbXSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgZm9yICh2YXIgY2hpbGRyZW4gPSBzZWxlY3QuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCksIGNoaWxkLCBpbmhlcml0ID0gZ2V0KG5vZGUsIGlkKSwgayA9IDAsIGwgPSBjaGlsZHJlbi5sZW5ndGg7IGsgPCBsOyArK2spIHtcbiAgICAgICAgICBpZiAoY2hpbGQgPSBjaGlsZHJlbltrXSkge1xuICAgICAgICAgICAgc2NoZWR1bGUoY2hpbGQsIG5hbWUsIGlkLCBrLCBjaGlsZHJlbiwgaW5oZXJpdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN1Ymdyb3Vwcy5wdXNoKGNoaWxkcmVuKTtcbiAgICAgICAgcGFyZW50cy5wdXNoKG5vZGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgVHJhbnNpdGlvbihzdWJncm91cHMsIHBhcmVudHMsIG5hbWUsIGlkKTtcbn1cbiIsImltcG9ydCB7c2VsZWN0aW9ufSBmcm9tIFwiZDMtc2VsZWN0aW9uXCI7XG5cbnZhciBTZWxlY3Rpb24gPSBzZWxlY3Rpb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBTZWxlY3Rpb24odGhpcy5fZ3JvdXBzLCB0aGlzLl9wYXJlbnRzKTtcbn1cbiIsImltcG9ydCB7aW50ZXJwb2xhdGVUcmFuc2Zvcm1Dc3MgYXMgaW50ZXJwb2xhdGVUcmFuc2Zvcm19IGZyb20gXCJkMy1pbnRlcnBvbGF0ZVwiO1xuaW1wb3J0IHtzdHlsZX0gZnJvbSBcImQzLXNlbGVjdGlvblwiO1xuaW1wb3J0IHtzZXR9IGZyb20gXCIuL3NjaGVkdWxlLmpzXCI7XG5pbXBvcnQge3R3ZWVuVmFsdWV9IGZyb20gXCIuL3R3ZWVuLmpzXCI7XG5pbXBvcnQgaW50ZXJwb2xhdGUgZnJvbSBcIi4vaW50ZXJwb2xhdGUuanNcIjtcblxuZnVuY3Rpb24gc3R5bGVOdWxsKG5hbWUsIGludGVycG9sYXRlKSB7XG4gIHZhciBzdHJpbmcwMCxcbiAgICAgIHN0cmluZzEwLFxuICAgICAgaW50ZXJwb2xhdGUwO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0cmluZzAgPSBzdHlsZSh0aGlzLCBuYW1lKSxcbiAgICAgICAgc3RyaW5nMSA9ICh0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KG5hbWUpLCBzdHlsZSh0aGlzLCBuYW1lKSk7XG4gICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsXG4gICAgICAgIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgJiYgc3RyaW5nMSA9PT0gc3RyaW5nMTAgPyBpbnRlcnBvbGF0ZTBcbiAgICAgICAgOiBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHN0cmluZzEwID0gc3RyaW5nMSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHN0eWxlUmVtb3ZlKG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkobmFtZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHN0eWxlQ29uc3RhbnQobmFtZSwgaW50ZXJwb2xhdGUsIHZhbHVlMSkge1xuICB2YXIgc3RyaW5nMDAsXG4gICAgICBzdHJpbmcxID0gdmFsdWUxICsgXCJcIixcbiAgICAgIGludGVycG9sYXRlMDtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdHJpbmcwID0gc3R5bGUodGhpcywgbmFtZSk7XG4gICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsXG4gICAgICAgIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgPyBpbnRlcnBvbGF0ZTBcbiAgICAgICAgOiBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHZhbHVlMSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHN0eWxlRnVuY3Rpb24obmFtZSwgaW50ZXJwb2xhdGUsIHZhbHVlKSB7XG4gIHZhciBzdHJpbmcwMCxcbiAgICAgIHN0cmluZzEwLFxuICAgICAgaW50ZXJwb2xhdGUwO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0cmluZzAgPSBzdHlsZSh0aGlzLCBuYW1lKSxcbiAgICAgICAgdmFsdWUxID0gdmFsdWUodGhpcyksXG4gICAgICAgIHN0cmluZzEgPSB2YWx1ZTEgKyBcIlwiO1xuICAgIGlmICh2YWx1ZTEgPT0gbnVsbCkgc3RyaW5nMSA9IHZhbHVlMSA9ICh0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KG5hbWUpLCBzdHlsZSh0aGlzLCBuYW1lKSk7XG4gICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsXG4gICAgICAgIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgJiYgc3RyaW5nMSA9PT0gc3RyaW5nMTAgPyBpbnRlcnBvbGF0ZTBcbiAgICAgICAgOiAoc3RyaW5nMTAgPSBzdHJpbmcxLCBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHZhbHVlMSkpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBzdHlsZU1heWJlUmVtb3ZlKGlkLCBuYW1lKSB7XG4gIHZhciBvbjAsIG9uMSwgbGlzdGVuZXIwLCBrZXkgPSBcInN0eWxlLlwiICsgbmFtZSwgZXZlbnQgPSBcImVuZC5cIiArIGtleSwgcmVtb3ZlO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNjaGVkdWxlID0gc2V0KHRoaXMsIGlkKSxcbiAgICAgICAgb24gPSBzY2hlZHVsZS5vbixcbiAgICAgICAgbGlzdGVuZXIgPSBzY2hlZHVsZS52YWx1ZVtrZXldID09IG51bGwgPyByZW1vdmUgfHwgKHJlbW92ZSA9IHN0eWxlUmVtb3ZlKG5hbWUpKSA6IHVuZGVmaW5lZDtcblxuICAgIC8vIElmIHRoaXMgbm9kZSBzaGFyZWQgYSBkaXNwYXRjaCB3aXRoIHRoZSBwcmV2aW91cyBub2RlLFxuICAgIC8vIGp1c3QgYXNzaWduIHRoZSB1cGRhdGVkIHNoYXJlZCBkaXNwYXRjaCBhbmQgd2XigJlyZSBkb25lIVxuICAgIC8vIE90aGVyd2lzZSwgY29weS1vbi13cml0ZS5cbiAgICBpZiAob24gIT09IG9uMCB8fCBsaXN0ZW5lcjAgIT09IGxpc3RlbmVyKSAob24xID0gKG9uMCA9IG9uKS5jb3B5KCkpLm9uKGV2ZW50LCBsaXN0ZW5lcjAgPSBsaXN0ZW5lcik7XG5cbiAgICBzY2hlZHVsZS5vbiA9IG9uMTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7XG4gIHZhciBpID0gKG5hbWUgKz0gXCJcIikgPT09IFwidHJhbnNmb3JtXCIgPyBpbnRlcnBvbGF0ZVRyYW5zZm9ybSA6IGludGVycG9sYXRlO1xuICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/IHRoaXNcbiAgICAgIC5zdHlsZVR3ZWVuKG5hbWUsIHN0eWxlTnVsbChuYW1lLCBpKSlcbiAgICAgIC5vbihcImVuZC5zdHlsZS5cIiArIG5hbWUsIHN0eWxlUmVtb3ZlKG5hbWUpKVxuICAgIDogdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIgPyB0aGlzXG4gICAgICAuc3R5bGVUd2VlbihuYW1lLCBzdHlsZUZ1bmN0aW9uKG5hbWUsIGksIHR3ZWVuVmFsdWUodGhpcywgXCJzdHlsZS5cIiArIG5hbWUsIHZhbHVlKSkpXG4gICAgICAuZWFjaChzdHlsZU1heWJlUmVtb3ZlKHRoaXMuX2lkLCBuYW1lKSlcbiAgICA6IHRoaXNcbiAgICAgIC5zdHlsZVR3ZWVuKG5hbWUsIHN0eWxlQ29uc3RhbnQobmFtZSwgaSwgdmFsdWUpLCBwcmlvcml0eSlcbiAgICAgIC5vbihcImVuZC5zdHlsZS5cIiArIG5hbWUsIG51bGwpO1xufVxuIiwiZnVuY3Rpb24gc3R5bGVJbnRlcnBvbGF0ZShuYW1lLCBpLCBwcmlvcml0eSkge1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIHRoaXMuc3R5bGUuc2V0UHJvcGVydHkobmFtZSwgaS5jYWxsKHRoaXMsIHQpLCBwcmlvcml0eSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHN0eWxlVHdlZW4obmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7XG4gIHZhciB0LCBpMDtcbiAgZnVuY3Rpb24gdHdlZW4oKSB7XG4gICAgdmFyIGkgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmIChpICE9PSBpMCkgdCA9IChpMCA9IGkpICYmIHN0eWxlSW50ZXJwb2xhdGUobmFtZSwgaSwgcHJpb3JpdHkpO1xuICAgIHJldHVybiB0O1xuICB9XG4gIHR3ZWVuLl92YWx1ZSA9IHZhbHVlO1xuICByZXR1cm4gdHdlZW47XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBwcmlvcml0eSkge1xuICB2YXIga2V5ID0gXCJzdHlsZS5cIiArIChuYW1lICs9IFwiXCIpO1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHJldHVybiAoa2V5ID0gdGhpcy50d2VlbihrZXkpKSAmJiBrZXkuX3ZhbHVlO1xuICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIHRoaXMudHdlZW4oa2V5LCBudWxsKTtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgRXJyb3I7XG4gIHJldHVybiB0aGlzLnR3ZWVuKGtleSwgc3R5bGVUd2VlbihuYW1lLCB2YWx1ZSwgcHJpb3JpdHkgPT0gbnVsbCA/IFwiXCIgOiBwcmlvcml0eSkpO1xufVxuIiwiaW1wb3J0IHt0d2VlblZhbHVlfSBmcm9tIFwiLi90d2Vlbi5qc1wiO1xuXG5mdW5jdGlvbiB0ZXh0Q29uc3RhbnQodmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMudGV4dENvbnRlbnQgPSB2YWx1ZTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdGV4dEZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdmFsdWUxID0gdmFsdWUodGhpcyk7XG4gICAgdGhpcy50ZXh0Q29udGVudCA9IHZhbHVlMSA9PSBudWxsID8gXCJcIiA6IHZhbHVlMTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIHRoaXMudHdlZW4oXCJ0ZXh0XCIsIHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IHRleHRGdW5jdGlvbih0d2VlblZhbHVlKHRoaXMsIFwidGV4dFwiLCB2YWx1ZSkpXG4gICAgICA6IHRleHRDb25zdGFudCh2YWx1ZSA9PSBudWxsID8gXCJcIiA6IHZhbHVlICsgXCJcIikpO1xufVxuIiwiZnVuY3Rpb24gdGV4dEludGVycG9sYXRlKGkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICB0aGlzLnRleHRDb250ZW50ID0gaS5jYWxsKHRoaXMsIHQpO1xuICB9O1xufVxuXG5mdW5jdGlvbiB0ZXh0VHdlZW4odmFsdWUpIHtcbiAgdmFyIHQwLCBpMDtcbiAgZnVuY3Rpb24gdHdlZW4oKSB7XG4gICAgdmFyIGkgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmIChpICE9PSBpMCkgdDAgPSAoaTAgPSBpKSAmJiB0ZXh0SW50ZXJwb2xhdGUoaSk7XG4gICAgcmV0dXJuIHQwO1xuICB9XG4gIHR3ZWVuLl92YWx1ZSA9IHZhbHVlO1xuICByZXR1cm4gdHdlZW47XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHZhciBrZXkgPSBcInRleHRcIjtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAxKSByZXR1cm4gKGtleSA9IHRoaXMudHdlZW4oa2V5KSkgJiYga2V5Ll92YWx1ZTtcbiAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiB0aGlzLnR3ZWVuKGtleSwgbnVsbCk7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IEVycm9yO1xuICByZXR1cm4gdGhpcy50d2VlbihrZXksIHRleHRUd2Vlbih2YWx1ZSkpO1xufVxuIiwiaW1wb3J0IHtUcmFuc2l0aW9uLCBuZXdJZH0gZnJvbSBcIi4vaW5kZXguanNcIjtcbmltcG9ydCBzY2hlZHVsZSwge2dldH0gZnJvbSBcIi4vc2NoZWR1bGUuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHZhciBuYW1lID0gdGhpcy5fbmFtZSxcbiAgICAgIGlkMCA9IHRoaXMuX2lkLFxuICAgICAgaWQxID0gbmV3SWQoKTtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBuID0gZ3JvdXAubGVuZ3RoLCBub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgICB2YXIgaW5oZXJpdCA9IGdldChub2RlLCBpZDApO1xuICAgICAgICBzY2hlZHVsZShub2RlLCBuYW1lLCBpZDEsIGksIGdyb3VwLCB7XG4gICAgICAgICAgdGltZTogaW5oZXJpdC50aW1lICsgaW5oZXJpdC5kZWxheSArIGluaGVyaXQuZHVyYXRpb24sXG4gICAgICAgICAgZGVsYXk6IDAsXG4gICAgICAgICAgZHVyYXRpb246IGluaGVyaXQuZHVyYXRpb24sXG4gICAgICAgICAgZWFzZTogaW5oZXJpdC5lYXNlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgVHJhbnNpdGlvbihncm91cHMsIHRoaXMuX3BhcmVudHMsIG5hbWUsIGlkMSk7XG59XG4iLCJpbXBvcnQge3NldH0gZnJvbSBcIi4vc2NoZWR1bGUuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHZhciBvbjAsIG9uMSwgdGhhdCA9IHRoaXMsIGlkID0gdGhhdC5faWQsIHNpemUgPSB0aGF0LnNpemUoKTtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHZhciBjYW5jZWwgPSB7dmFsdWU6IHJlamVjdH0sXG4gICAgICAgIGVuZCA9IHt2YWx1ZTogZnVuY3Rpb24oKSB7IGlmICgtLXNpemUgPT09IDApIHJlc29sdmUoKTsgfX07XG5cbiAgICB0aGF0LmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2NoZWR1bGUgPSBzZXQodGhpcywgaWQpLFxuICAgICAgICAgIG9uID0gc2NoZWR1bGUub247XG5cbiAgICAgIC8vIElmIHRoaXMgbm9kZSBzaGFyZWQgYSBkaXNwYXRjaCB3aXRoIHRoZSBwcmV2aW91cyBub2RlLFxuICAgICAgLy8ganVzdCBhc3NpZ24gdGhlIHVwZGF0ZWQgc2hhcmVkIGRpc3BhdGNoIGFuZCB3ZeKAmXJlIGRvbmUhXG4gICAgICAvLyBPdGhlcndpc2UsIGNvcHktb24td3JpdGUuXG4gICAgICBpZiAob24gIT09IG9uMCkge1xuICAgICAgICBvbjEgPSAob24wID0gb24pLmNvcHkoKTtcbiAgICAgICAgb24xLl8uY2FuY2VsLnB1c2goY2FuY2VsKTtcbiAgICAgICAgb24xLl8uaW50ZXJydXB0LnB1c2goY2FuY2VsKTtcbiAgICAgICAgb24xLl8uZW5kLnB1c2goZW5kKTtcbiAgICAgIH1cblxuICAgICAgc2NoZWR1bGUub24gPSBvbjE7XG4gICAgfSk7XG5cbiAgICAvLyBUaGUgc2VsZWN0aW9uIHdhcyBlbXB0eSwgcmVzb2x2ZSBlbmQgaW1tZWRpYXRlbHlcbiAgICBpZiAoc2l6ZSA9PT0gMCkgcmVzb2x2ZSgpO1xuICB9KTtcbn1cbiIsImltcG9ydCB7c2VsZWN0aW9ufSBmcm9tIFwiZDMtc2VsZWN0aW9uXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9hdHRyIGZyb20gXCIuL2F0dHIuanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX2F0dHJUd2VlbiBmcm9tIFwiLi9hdHRyVHdlZW4uanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX2RlbGF5IGZyb20gXCIuL2RlbGF5LmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9kdXJhdGlvbiBmcm9tIFwiLi9kdXJhdGlvbi5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fZWFzZSBmcm9tIFwiLi9lYXNlLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9lYXNlVmFyeWluZyBmcm9tIFwiLi9lYXNlVmFyeWluZy5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fZmlsdGVyIGZyb20gXCIuL2ZpbHRlci5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fbWVyZ2UgZnJvbSBcIi4vbWVyZ2UuanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX29uIGZyb20gXCIuL29uLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9yZW1vdmUgZnJvbSBcIi4vcmVtb3ZlLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9zZWxlY3QgZnJvbSBcIi4vc2VsZWN0LmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9zZWxlY3RBbGwgZnJvbSBcIi4vc2VsZWN0QWxsLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9zZWxlY3Rpb24gZnJvbSBcIi4vc2VsZWN0aW9uLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9zdHlsZSBmcm9tIFwiLi9zdHlsZS5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fc3R5bGVUd2VlbiBmcm9tIFwiLi9zdHlsZVR3ZWVuLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl90ZXh0IGZyb20gXCIuL3RleHQuanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX3RleHRUd2VlbiBmcm9tIFwiLi90ZXh0VHdlZW4uanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX3RyYW5zaXRpb24gZnJvbSBcIi4vdHJhbnNpdGlvbi5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fdHdlZW4gZnJvbSBcIi4vdHdlZW4uanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX2VuZCBmcm9tIFwiLi9lbmQuanNcIjtcblxudmFyIGlkID0gMDtcblxuZXhwb3J0IGZ1bmN0aW9uIFRyYW5zaXRpb24oZ3JvdXBzLCBwYXJlbnRzLCBuYW1lLCBpZCkge1xuICB0aGlzLl9ncm91cHMgPSBncm91cHM7XG4gIHRoaXMuX3BhcmVudHMgPSBwYXJlbnRzO1xuICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgdGhpcy5faWQgPSBpZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdHJhbnNpdGlvbihuYW1lKSB7XG4gIHJldHVybiBzZWxlY3Rpb24oKS50cmFuc2l0aW9uKG5hbWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbmV3SWQoKSB7XG4gIHJldHVybiArK2lkO1xufVxuXG52YXIgc2VsZWN0aW9uX3Byb3RvdHlwZSA9IHNlbGVjdGlvbi5wcm90b3R5cGU7XG5cblRyYW5zaXRpb24ucHJvdG90eXBlID0gdHJhbnNpdGlvbi5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBUcmFuc2l0aW9uLFxuICBzZWxlY3Q6IHRyYW5zaXRpb25fc2VsZWN0LFxuICBzZWxlY3RBbGw6IHRyYW5zaXRpb25fc2VsZWN0QWxsLFxuICBzZWxlY3RDaGlsZDogc2VsZWN0aW9uX3Byb3RvdHlwZS5zZWxlY3RDaGlsZCxcbiAgc2VsZWN0Q2hpbGRyZW46IHNlbGVjdGlvbl9wcm90b3R5cGUuc2VsZWN0Q2hpbGRyZW4sXG4gIGZpbHRlcjogdHJhbnNpdGlvbl9maWx0ZXIsXG4gIG1lcmdlOiB0cmFuc2l0aW9uX21lcmdlLFxuICBzZWxlY3Rpb246IHRyYW5zaXRpb25fc2VsZWN0aW9uLFxuICB0cmFuc2l0aW9uOiB0cmFuc2l0aW9uX3RyYW5zaXRpb24sXG4gIGNhbGw6IHNlbGVjdGlvbl9wcm90b3R5cGUuY2FsbCxcbiAgbm9kZXM6IHNlbGVjdGlvbl9wcm90b3R5cGUubm9kZXMsXG4gIG5vZGU6IHNlbGVjdGlvbl9wcm90b3R5cGUubm9kZSxcbiAgc2l6ZTogc2VsZWN0aW9uX3Byb3RvdHlwZS5zaXplLFxuICBlbXB0eTogc2VsZWN0aW9uX3Byb3RvdHlwZS5lbXB0eSxcbiAgZWFjaDogc2VsZWN0aW9uX3Byb3RvdHlwZS5lYWNoLFxuICBvbjogdHJhbnNpdGlvbl9vbixcbiAgYXR0cjogdHJhbnNpdGlvbl9hdHRyLFxuICBhdHRyVHdlZW46IHRyYW5zaXRpb25fYXR0clR3ZWVuLFxuICBzdHlsZTogdHJhbnNpdGlvbl9zdHlsZSxcbiAgc3R5bGVUd2VlbjogdHJhbnNpdGlvbl9zdHlsZVR3ZWVuLFxuICB0ZXh0OiB0cmFuc2l0aW9uX3RleHQsXG4gIHRleHRUd2VlbjogdHJhbnNpdGlvbl90ZXh0VHdlZW4sXG4gIHJlbW92ZTogdHJhbnNpdGlvbl9yZW1vdmUsXG4gIHR3ZWVuOiB0cmFuc2l0aW9uX3R3ZWVuLFxuICBkZWxheTogdHJhbnNpdGlvbl9kZWxheSxcbiAgZHVyYXRpb246IHRyYW5zaXRpb25fZHVyYXRpb24sXG4gIGVhc2U6IHRyYW5zaXRpb25fZWFzZSxcbiAgZWFzZVZhcnlpbmc6IHRyYW5zaXRpb25fZWFzZVZhcnlpbmcsXG4gIGVuZDogdHJhbnNpdGlvbl9lbmQsXG4gIFtTeW1ib2wuaXRlcmF0b3JdOiBzZWxlY3Rpb25fcHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl1cbn07XG4iLCJleHBvcnQgZnVuY3Rpb24gY3ViaWNJbih0KSB7XG4gIHJldHVybiB0ICogdCAqIHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjdWJpY091dCh0KSB7XG4gIHJldHVybiAtLXQgKiB0ICogdCArIDE7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjdWJpY0luT3V0KHQpIHtcbiAgcmV0dXJuICgodCAqPSAyKSA8PSAxID8gdCAqIHQgKiB0IDogKHQgLT0gMikgKiB0ICogdCArIDIpIC8gMjtcbn1cbiIsImltcG9ydCB7VHJhbnNpdGlvbiwgbmV3SWR9IGZyb20gXCIuLi90cmFuc2l0aW9uL2luZGV4LmpzXCI7XG5pbXBvcnQgc2NoZWR1bGUgZnJvbSBcIi4uL3RyYW5zaXRpb24vc2NoZWR1bGUuanNcIjtcbmltcG9ydCB7ZWFzZUN1YmljSW5PdXR9IGZyb20gXCJkMy1lYXNlXCI7XG5pbXBvcnQge25vd30gZnJvbSBcImQzLXRpbWVyXCI7XG5cbnZhciBkZWZhdWx0VGltaW5nID0ge1xuICB0aW1lOiBudWxsLCAvLyBTZXQgb24gdXNlLlxuICBkZWxheTogMCxcbiAgZHVyYXRpb246IDI1MCxcbiAgZWFzZTogZWFzZUN1YmljSW5PdXRcbn07XG5cbmZ1bmN0aW9uIGluaGVyaXQobm9kZSwgaWQpIHtcbiAgdmFyIHRpbWluZztcbiAgd2hpbGUgKCEodGltaW5nID0gbm9kZS5fX3RyYW5zaXRpb24pIHx8ICEodGltaW5nID0gdGltaW5nW2lkXSkpIHtcbiAgICBpZiAoIShub2RlID0gbm9kZS5wYXJlbnROb2RlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGB0cmFuc2l0aW9uICR7aWR9IG5vdCBmb3VuZGApO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdGltaW5nO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lKSB7XG4gIHZhciBpZCxcbiAgICAgIHRpbWluZztcblxuICBpZiAobmFtZSBpbnN0YW5jZW9mIFRyYW5zaXRpb24pIHtcbiAgICBpZCA9IG5hbWUuX2lkLCBuYW1lID0gbmFtZS5fbmFtZTtcbiAgfSBlbHNlIHtcbiAgICBpZCA9IG5ld0lkKCksICh0aW1pbmcgPSBkZWZhdWx0VGltaW5nKS50aW1lID0gbm93KCksIG5hbWUgPSBuYW1lID09IG51bGwgPyBudWxsIDogbmFtZSArIFwiXCI7XG4gIH1cblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBuID0gZ3JvdXAubGVuZ3RoLCBub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgICBzY2hlZHVsZShub2RlLCBuYW1lLCBpZCwgaSwgZ3JvdXAsIHRpbWluZyB8fCBpbmhlcml0KG5vZGUsIGlkKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBUcmFuc2l0aW9uKGdyb3VwcywgdGhpcy5fcGFyZW50cywgbmFtZSwgaWQpO1xufVxuIiwiaW1wb3J0IHtzZWxlY3Rpb259IGZyb20gXCJkMy1zZWxlY3Rpb25cIjtcbmltcG9ydCBzZWxlY3Rpb25faW50ZXJydXB0IGZyb20gXCIuL2ludGVycnVwdC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl90cmFuc2l0aW9uIGZyb20gXCIuL3RyYW5zaXRpb24uanNcIjtcblxuc2VsZWN0aW9uLnByb3RvdHlwZS5pbnRlcnJ1cHQgPSBzZWxlY3Rpb25faW50ZXJydXB0O1xuc2VsZWN0aW9uLnByb3RvdHlwZS50cmFuc2l0aW9uID0gc2VsZWN0aW9uX3RyYW5zaXRpb247XG4iLCJleHBvcnQgZnVuY3Rpb24gVHJhbnNmb3JtKGssIHgsIHkpIHtcbiAgdGhpcy5rID0gaztcbiAgdGhpcy54ID0geDtcbiAgdGhpcy55ID0geTtcbn1cblxuVHJhbnNmb3JtLnByb3RvdHlwZSA9IHtcbiAgY29uc3RydWN0b3I6IFRyYW5zZm9ybSxcbiAgc2NhbGU6IGZ1bmN0aW9uKGspIHtcbiAgICByZXR1cm4gayA9PT0gMSA/IHRoaXMgOiBuZXcgVHJhbnNmb3JtKHRoaXMuayAqIGssIHRoaXMueCwgdGhpcy55KTtcbiAgfSxcbiAgdHJhbnNsYXRlOiBmdW5jdGlvbih4LCB5KSB7XG4gICAgcmV0dXJuIHggPT09IDAgJiB5ID09PSAwID8gdGhpcyA6IG5ldyBUcmFuc2Zvcm0odGhpcy5rLCB0aGlzLnggKyB0aGlzLmsgKiB4LCB0aGlzLnkgKyB0aGlzLmsgKiB5KTtcbiAgfSxcbiAgYXBwbHk6IGZ1bmN0aW9uKHBvaW50KSB7XG4gICAgcmV0dXJuIFtwb2ludFswXSAqIHRoaXMuayArIHRoaXMueCwgcG9pbnRbMV0gKiB0aGlzLmsgKyB0aGlzLnldO1xuICB9LFxuICBhcHBseVg6IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4geCAqIHRoaXMuayArIHRoaXMueDtcbiAgfSxcbiAgYXBwbHlZOiBmdW5jdGlvbih5KSB7XG4gICAgcmV0dXJuIHkgKiB0aGlzLmsgKyB0aGlzLnk7XG4gIH0sXG4gIGludmVydDogZnVuY3Rpb24obG9jYXRpb24pIHtcbiAgICByZXR1cm4gWyhsb2NhdGlvblswXSAtIHRoaXMueCkgLyB0aGlzLmssIChsb2NhdGlvblsxXSAtIHRoaXMueSkgLyB0aGlzLmtdO1xuICB9LFxuICBpbnZlcnRYOiBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuICh4IC0gdGhpcy54KSAvIHRoaXMuaztcbiAgfSxcbiAgaW52ZXJ0WTogZnVuY3Rpb24oeSkge1xuICAgIHJldHVybiAoeSAtIHRoaXMueSkgLyB0aGlzLms7XG4gIH0sXG4gIHJlc2NhbGVYOiBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIHguY29weSgpLmRvbWFpbih4LnJhbmdlKCkubWFwKHRoaXMuaW52ZXJ0WCwgdGhpcykubWFwKHguaW52ZXJ0LCB4KSk7XG4gIH0sXG4gIHJlc2NhbGVZOiBmdW5jdGlvbih5KSB7XG4gICAgcmV0dXJuIHkuY29weSgpLmRvbWFpbih5LnJhbmdlKCkubWFwKHRoaXMuaW52ZXJ0WSwgdGhpcykubWFwKHkuaW52ZXJ0LCB5KSk7XG4gIH0sXG4gIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyB0aGlzLnggKyBcIixcIiArIHRoaXMueSArIFwiKSBzY2FsZShcIiArIHRoaXMuayArIFwiKVwiO1xuICB9XG59O1xuXG5leHBvcnQgdmFyIGlkZW50aXR5ID0gbmV3IFRyYW5zZm9ybSgxLCAwLCAwKTtcblxudHJhbnNmb3JtLnByb3RvdHlwZSA9IFRyYW5zZm9ybS5wcm90b3R5cGU7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRyYW5zZm9ybShub2RlKSB7XG4gIHdoaWxlICghbm9kZS5fX3pvb20pIGlmICghKG5vZGUgPSBub2RlLnBhcmVudE5vZGUpKSByZXR1cm4gaWRlbnRpdHk7XG4gIHJldHVybiBub2RlLl9fem9vbTtcbn1cbiIsIlxuLypcbiAgSFRETWF0aCBTdGF0aWMgQ2xhc3MgLSBOb3QgaW50ZW5kZWQgZm9yIGluc3RhbnRpYXRpb24hXG5cbiAgTW9kZWwgcGFyYW1ldGVyczpcbiAgICBrID0gZGlzY291bnQgZmFjdG9yICgwLCBJbmZpbml0eSlcblxuICBCZWhhdmlvcmFsIHZhcmlhYmxlczpcbiAgICBBID0gYW1vdW50XG4gICAgRCA9IGRlbGF5XG4gICAgViA9IHN1YmplY3RpdmUgdmFsdWVcblxuICBFcXVhdGlvbnM6XG4gICAgViA9IEEgLyAoMSArIGtEKVxuICAgIGsgPSAoQSAtIFYpIC8gKFZEKVxuKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhURE1hdGgge1xuICBzdGF0aWMgayA9IHtcbiAgICBERUZBVUxUOiAwLjA1LFxuICAgIE1JTjogMCxcbiAgICBNQVg6IDEwMCxcbiAgICBTVEVQOiAwLjAwMSxcbiAgICBKVU1QOiAwLjAxLFxuICB9O1xuXG4gIHN0YXRpYyBhZGsydihhLCBkLCBrKSB7XG4gICAgcmV0dXJuIGEgLyAoMSArIGsgKiBkKTtcbiAgfVxuXG4gIHN0YXRpYyBhZHYyayhhLCBkLCB2KSB7XG4gICAgcmV0dXJuIChhIC0gdikgLyAodiAqIGQpO1xuICB9XG59XG4iLCJcbi8vIEludGVybmFsIGRlcGVuZGVuY2llc1xuaW1wb3J0IEhURE1hdGggZnJvbSAnLi9odGQtbWF0aCc7XG5cbmV4cG9ydCBkZWZhdWx0IEhURE1hdGg7XG4iLCIvKiBlc2xpbnQgbm8tcmVzdHJpY3RlZC1nbG9iYWxzOiBbXCJvZmZcIiwgXCJzZWxmXCJdICovXG5cbmltcG9ydCAqIGFzIEJheWVzRGlzdHJpYnV0aW9ucyBmcm9tICdiYXllcy5qcy9kaXN0cmlidXRpb25zJztcbmltcG9ydCAqIGFzIEJheWVzTWNtYyBmcm9tICdiYXllcy5qcy9tY21jJztcbmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcbmltcG9ydCBIVERNYXRoIGZyb20gJ0BkZWNpZGFibGVzL2Rpc2NvdW50YWJsZS1tYXRoJztcblxuc2VsZi5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcbiAgY29uc3QgcGFyYW1zID0ge1xuICAgIGs6IHt0eXBlOiAncmVhbCcsIGxvd2VyOiBIVERNYXRoLmsuTUlOLCB1cHBlcjogSFRETWF0aC5rLk1BWH0sXG4gICAgbHVjZToge3R5cGU6ICdyZWFsJywgbG93ZXI6IDAsIHVwcGVyOiAxMDB9LFxuICB9O1xuXG4gIGNvbnN0IGxvZ1Bvc3QgPSAoc3RhdGUsIGRhdGEpID0+IHtcbiAgICBsZXQgbHAgPSAwO1xuXG4gICAgLy8gUHJpb3JzXG4gICAgY29uc3Qga01lYW4gPSAyO1xuICAgIGNvbnN0IGtTaGFwZSA9IDM7XG4gICAgbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLmdhbW1hKFxuICAgICAgc3RhdGUuayxcbiAgICAgIGtTaGFwZSxcbiAgICAgIGtTaGFwZSAvIGtNZWFuLFxuICAgICk7XG4gICAgLy8gbHAgKz0gQmF5ZXNEaXN0cmlidXRpb25zLnVuaWYoc3RhdGUuaywgMCwgMTAwKTtcblxuICAgIGNvbnN0IGx1Y2VNZWFuID0gMjtcbiAgICBjb25zdCBsdWNlU2hhcGUgPSAzO1xuICAgIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy5nYW1tYShcbiAgICAgIHN0YXRlLmx1Y2UsXG4gICAgICBsdWNlU2hhcGUsXG4gICAgICBsdWNlU2hhcGUgLyBsdWNlTWVhbixcbiAgICApO1xuICAgIC8vIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy51bmlmKHN0YXRlLmx1Y2UsIDAsIDEwMCk7XG5cbiAgICAvLyBMaWtlbGlob29kXG4gICAgZGF0YS5mb3JFYWNoKChjaG9pY2UpID0+IHtcbiAgICAgIC8vIFZhbHVlc1xuICAgICAgY29uc3QgdnMgPSBIVERNYXRoLmFkazJ2KGNob2ljZS5hcywgY2hvaWNlLmRzLCBzdGF0ZS5rKTtcbiAgICAgIGNvbnN0IHZsID0gSFRETWF0aC5hZGsydihjaG9pY2UuYWwsIGNob2ljZS5kbCwgc3RhdGUuayk7XG5cbiAgICAgIC8vIENob2ljZSBvZiBzb29uZXIgb3IgbGF0ZXIgaXMgc2FtcGxlZCBmcm9tIGEgQmVybm91bGxpIGRpc3RyaWJ1dGlvblxuICAgICAgLy8gTHVjZSBjaG9pY2UgcnVsZSBpcyB1c2VkIHRvIGNvbXB1dGUgcHJvYmFiaWxpdHkgb2Ygd2FpdGluZyEgKDAgPSBzb29uZXIsIDEgPSBsYXRlcilcbiAgICAgIGNvbnN0IGJpbnZhbCA9IDEgLyAoMSArIE1hdGguZXhwKHN0YXRlLmx1Y2UgKiAodnMgLSB2bCkpKTtcblxuICAgICAgLy8gQWN0dWFsIHJlc3BvbnNlXG4gICAgICBjb25zdCByZXNwb25zZSA9IChjaG9pY2UucmVzcG9uc2UgPT09ICdmaXJzdCcpID8gMCA6IDE7XG5cbiAgICAgIGxwICs9IEJheWVzRGlzdHJpYnV0aW9ucy5iZXJuKHJlc3BvbnNlLCBiaW52YWwpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGxwO1xuICB9O1xuXG4gIC8vIEluaXRpYWxpemluZyB0aGUgc2FtcGxlclxuICBjb25zdCBzYW1wbGVyID0gbmV3IEJheWVzTWNtYy5BbXdnU2FtcGxlcihwYXJhbXMsIGxvZ1Bvc3QsIGV2ZW50LmRhdGEpO1xuICAvLyBCdXJuaW5nIHNvbWUgc2FtcGxlcyB0byB0aGUgTUNNQyBnb2RzIGFuZCBzYW1wbGluZyA1MDAwIGRyYXdzXG4gIHNhbXBsZXIuYnVybigxMDAwKTtcbiAgY29uc3Qgc2FtcGxlcyA9IHNhbXBsZXIuc2FtcGxlKDUwMDApO1xuXG4gIC8vIEV4dHJhY3Qgc3VtbWFyeSBzdGF0c1xuICBjb25zdCByZXN1bHRzID0ge1xuICAgIGs6IGQzLm1lZGlhbihzYW1wbGVzLmspLFxuICAgIGx1Y2U6IGQzLm1lZGlhbihzYW1wbGVzLmx1Y2UpLFxuICB9O1xuXG4gIHNlbGYucG9zdE1lc3NhZ2Uoe3Jlc3VsdHM6IHJlc3VsdHMsIHNhbXBsZXM6IHNhbXBsZXN9KTtcbn07XG4iXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJtb2R1bGUiLCJleHBvcnRzIiwibGQiLCJ0aGlzIiwibGdhbW1hIiwieCIsImoiLCJjb2YiLCJzZXIiLCJ4eCIsInkiLCJ0bXAiLCJsb2ciLCJsZmFjdG9yaWFsIiwibiIsIk5hTiIsImxjaG9vc2UiLCJrIiwibGJldGEiLCJhIiwiYiIsIk1hdGgiLCJleHAiLCJhYnMiLCJwb3ciLCJzcXJ0IiwicGkiLCJQSSIsImJldGEiLCJzaGFwZTEiLCJzaGFwZTIiLCJJbmZpbml0eSIsImNhdWNoeSIsImxvY2F0aW9uIiwic2NhbGUiLCJub3JtIiwibWVhbiIsInNkIiwiYml2YXJub3JtIiwiY29yciIsInoiLCJub3JtYWxpemluZ19mYWN0b3IiLCJiaXZhcl9sb2dfZGVucyIsImxhcGxhY2UiLCJkZXhwIiwiZ2FtbWEiLCJzaGFwZSIsInJhdGUiLCJpbnZnYW1tYSIsImxub3JtIiwibWVhbmxvZyIsInNkbG9nIiwicGFyZXRvIiwidCIsImRmIiwid2VpYnVsbCIsInRtcDEiLCJ0bXAyIiwibG9naXMiLCJlIiwiZiIsImRpcmljaGxldCIsImFscGhhIiwic3VtX2FscGhhIiwic3VtX2xnYW1tYV9hbHBoYSIsInN1bV9hbHBoYV9zdWJfMV9sb2dfeCIsImxlbmd0aCIsImkiLCJ1bmlmIiwibWluIiwibWF4IiwiYmVybiIsInByb2IiLCJjYXQiLCJwcm9icyIsImJpbm9tIiwic2l6ZSIsIm5iaW5vbSIsImh5cGVyIiwibSIsInBvaXMiLCJsYW1iZGEiLCJtY21jIiwicnVuaWYiLCJyYW5kb20iLCJydW5pZl9kaXNjcmV0ZSIsImZsb29yIiwicm5vcm0iLCJ1IiwidiIsInEiLCJkZWVwX2Nsb25lIiwic3JjIiwibWl4aW4iLCJkZXN0Iiwic291cmNlIiwiY29weUZ1bmMiLCJuYW1lIiwicyIsImVtcHR5IiwiT2JqZWN0IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJjYWxsIiwibm9kZVR5cGUiLCJjbG9uZU5vZGUiLCJEYXRlIiwiZ2V0VGltZSIsIlJlZ0V4cCIsInIiLCJsIiwiQXJyYXkiLCJwdXNoIiwiY29uc3RydWN0b3IiLCJjbG9uZV9wYXJhbV9kcmF3IiwiaXNBcnJheSIsInhfY29weSIsInNsaWNlIiwiaXNfbnVtYmVyIiwib2JqZWN0IiwiTnVtYmVyIiwiY3JlYXRlX2FycmF5IiwiZGltIiwiaW5pdCIsImFyciIsImFycmF5X2RpbSIsImNvbmNhdCIsImFycmF5X2VxdWFsIiwiYTEiLCJhMiIsIm5lc3RlZF9hcnJheV9hcHBseSIsImZ1biIsInJlc3VsdCIsInNodWZmbGVfYXJyYXkiLCJhcnJheSIsInRlbXAiLCJuZXN0ZWRfYXJyYXlfcmFuZG9tX2FwcGx5IiwibGVuIiwiYXJyYXlfaXMiLCJhcnJheV9pIiwiZ2V0X29wdGlvbiIsIm9wdGlvbl9uYW1lIiwib3B0aW9ucyIsImRlZmF1bF92YWx1ZSIsImhhc093blByb3BlcnR5IiwidW5kZWZpbmVkIiwiZ2V0X211bHRpZGltX29wdGlvbiIsInZhbHVlIiwicGFyYW1faW5pdF9maXhlZCIsInR5cGUiLCJsb3dlciIsInVwcGVyIiwicm91bmQiLCJjb21wbGV0ZV9wYXJhbXMiLCJwYXJhbXNfdG9fY29tcGxldGUiLCJwYXJhbV9pbml0IiwicGFyYW1zIiwicGFyYW1fbmFtZSIsInBhcmFtIiwiU3RlcHBlciIsInN0YXRlIiwibG9nX3Bvc3QiLCJzdGVwIiwic3RhcnRfYWRhcHRhdGlvbiIsInN0b3BfYWRhcHRhdGlvbiIsImluZm8iLCJPbmVkaW1NZXRyb3BvbGlzU3RlcHBlciIsImdlbmVyYXRlX3Byb3Bvc2FsIiwicGFyYW1fbmFtZXMiLCJrZXlzIiwicHJvcF9sb2dfc2NhbGUiLCJiYXRjaF9zaXplIiwibWF4X2FkYXB0YXRpb24iLCJpbml0aWFsX2FkYXB0YXRpb24iLCJ0YXJnZXRfYWNjZXB0X3JhdGUiLCJpc19hZGFwdGluZyIsImFjY2VwdGFuY2VfY291bnQiLCJiYXRjaF9jb3VudCIsIml0ZXJhdGlvbnNfc2luY2VfYWRhcHRpb24iLCJjcmVhdGUiLCJwYXJhbV9zdGF0ZSIsInBhcmFtX3Byb3Bvc2FsIiwiY3Vycl9sb2dfZGVucyIsInByb3BfbG9nX2RlbnMiLCJhY2NlcHRfcHJvYiIsImxvZ19zZF9hZGp1c3RtZW50Iiwibm9ybWFsX3Byb3Bvc2FsIiwiUmVhbE1ldHJvcG9saXNTdGVwcGVyIiwiZGlzY3JldGVfbm9ybWFsX3Byb3Bvc2FsIiwiSW50TWV0cm9wb2xpc1N0ZXBwZXIiLCJNdWx0aWRpbUNvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIiwiU3ViU3RlcHBlciIsImNyZWF0ZV9zdWJzdGVwcGVycyIsInN1YnN0YXRlIiwic3Vic3RlcHBlcnMiLCJzdWJvcHRpb25zIiwic3VicGFyYW0iLCJzdWJzdGVwcGVyIiwiTXVsdGlSZWFsQ29tcG9uZW50TWV0cm9wb2xpc1N0ZXBwZXIiLCJNdWx0aUludENvbXBvbmVudE1ldHJvcG9saXNTdGVwcGVyIiwiQmluYXJ5U3RlcHBlciIsInplcm9fbG9nX2RlbnMiLCJvbmVfbG9nX2RlbnMiLCJtYXhfbG9nX2RlbnMiLCJ6ZXJvX3Byb2IiLCJCaW5hcnlDb21wb25lbnRTdGVwcGVyIiwic3VicGFyYW1zIiwiQW13Z1N0ZXBwZXIiLCJTZWxlY3RTdGVwcGVyIiwicGFyYW1fb2JqZWN0X3dyYXAiLCJwYXJhbV9vcHRpb25zIiwiU2FtcGxlciIsImRhdGEiLCJwYXJhbV9pbml0X2Z1biIsInRoaW5uaW5nX2ludGVydmFsIiwicGFyYW1zX3RvX21vbml0b3IiLCJ0aGluIiwibW9uaXRvciIsInN0ZXBwZXJzIiwiY3JlYXRlX3N0ZXBwZXJfZW5zYW1ibGUiLCJzYW1wbGUiLCJuX2l0ZXJhdGlvbnMiLCJtb25pdG9yZWRfcGFyYW1zIiwiY3Vycl9zYW1wbGUiLCJidXJuIiwiQW13Z1NhbXBsZXIiLCJhc2NlbmRpbmciLCJudW1iZXJzIiwidmFsdWVzIiwidmFsdWVvZiIsImNvbXBhcmVEZWZpbmVkIiwiY29tcGFyZSIsImFzY2VuZGluZ0RlZmluZWQiLCJUeXBlRXJyb3IiLCJxdWlja3NlbGVjdCIsImxlZnQiLCJyaWdodCIsIm5ld0xlZnQiLCJuZXdSaWdodCIsInN3YXAiLCJxdWFudGlsZSIsInAiLCJGbG9hdDY0QXJyYXkiLCJmcm9tIiwiaXNOYU4iLCJpMCIsInZhbHVlMCIsInN1YmFycmF5IiwidmFsdWUxIiwibWVkaWFuIiwibm9vcCIsImRpc3BhdGNoIiwiYXJndW1lbnRzIiwiXyIsInRlc3QiLCJFcnJvciIsIkRpc3BhdGNoIiwicGFyc2VUeXBlbmFtZXMiLCJ0eXBlbmFtZXMiLCJ0eXBlcyIsInRyaW0iLCJzcGxpdCIsIm1hcCIsImluZGV4T2YiLCJvbiIsInR5cGVuYW1lIiwiY2FsbGJhY2siLCJUIiwiZ2V0Iiwic2V0IiwiY29weSIsInRoYXQiLCJhcmdzIiwiYXBwbHkiLCJjIiwieGh0bWwiLCJzdmciLCJ4bGluayIsInhtbCIsInhtbG5zIiwicHJlZml4IiwibmFtZXNwYWNlcyIsInNwYWNlIiwibG9jYWwiLCJjcmVhdG9ySW5oZXJpdCIsImRvY3VtZW50Iiwib3duZXJEb2N1bWVudCIsInVyaSIsIm5hbWVzcGFjZVVSSSIsImRvY3VtZW50RWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjcmVhdGVFbGVtZW50TlMiLCJjcmVhdG9yRml4ZWQiLCJmdWxsbmFtZSIsIm5hbWVzcGFjZSIsIm5vbmUiLCJzZWxlY3RvciIsInF1ZXJ5U2VsZWN0b3IiLCJzZWxlY3QiLCJncm91cHMiLCJfZ3JvdXBzIiwic3ViZ3JvdXBzIiwiZ3JvdXAiLCJzdWJncm91cCIsIm5vZGUiLCJzdWJub2RlIiwiX19kYXRhX18iLCJTZWxlY3Rpb24iLCJfcGFyZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJhcnJheUFsbCIsInNlbGVjdG9yQWxsIiwicGFyZW50cyIsIm1hdGNoZXMiLCJjaGlsZE1hdGNoZXIiLCJmaW5kIiwiY2hpbGRGaW5kIiwibWF0Y2giLCJjaGlsZHJlbiIsImNoaWxkRmlyc3QiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImZpbHRlciIsImNoaWxkcmVuRmlsdGVyIiwic2VsZWN0QWxsIiwibWF0Y2hlciIsInVwZGF0ZSIsIl9lbnRlciIsInNwYXJzZSIsIkVudGVyTm9kZSIsInBhcmVudCIsImRhdHVtIiwiX25leHQiLCJfcGFyZW50IiwiYXBwZW5kQ2hpbGQiLCJjaGlsZCIsImluc2VydEJlZm9yZSIsIm5leHQiLCJiaW5kSW5kZXgiLCJlbnRlciIsImV4aXQiLCJncm91cExlbmd0aCIsImRhdGFMZW5ndGgiLCJiaW5kS2V5Iiwia2V5Iiwibm9kZUJ5S2V5VmFsdWUiLCJNYXAiLCJrZXlWYWx1ZXMiLCJrZXlWYWx1ZSIsImhhcyIsImRlbGV0ZSIsImJpbmQiLCJjb25zdGFudCIsImFycmF5bGlrZSIsImVudGVyR3JvdXAiLCJ1cGRhdGVHcm91cCIsImV4aXRHcm91cCIsImkxIiwicHJldmlvdXMiLCJfZXhpdCIsIm9uZW50ZXIiLCJvbnVwZGF0ZSIsIm9uZXhpdCIsInNlbGVjdGlvbiIsImFwcGVuZCIsInJlbW92ZSIsIm1lcmdlIiwib3JkZXIiLCJjb250ZXh0IiwiZ3JvdXBzMCIsImdyb3VwczEiLCJtMCIsIm0xIiwibWVyZ2VzIiwiZ3JvdXAwIiwiZ3JvdXAxIiwiY29tcGFyZURvY3VtZW50UG9zaXRpb24iLCJwYXJlbnROb2RlIiwiY29tcGFyZU5vZGUiLCJzb3J0Z3JvdXBzIiwic29ydGdyb3VwIiwic29ydCIsImF0dHJSZW1vdmUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJhdHRyUmVtb3ZlTlMiLCJyZW1vdmVBdHRyaWJ1dGVOUyIsImF0dHJDb25zdGFudCIsInNldEF0dHJpYnV0ZSIsImF0dHJDb25zdGFudE5TIiwic2V0QXR0cmlidXRlTlMiLCJhdHRyRnVuY3Rpb24iLCJhdHRyRnVuY3Rpb25OUyIsImdldEF0dHJpYnV0ZU5TIiwiZ2V0QXR0cmlidXRlIiwiZWFjaCIsImRlZmF1bHRWaWV3Iiwic3R5bGVSZW1vdmUiLCJzdHlsZSIsInJlbW92ZVByb3BlcnR5Iiwic3R5bGVDb25zdGFudCIsInByaW9yaXR5Iiwic2V0UHJvcGVydHkiLCJzdHlsZUZ1bmN0aW9uIiwic3R5bGVWYWx1ZSIsImdldFByb3BlcnR5VmFsdWUiLCJnZXRDb21wdXRlZFN0eWxlIiwicHJvcGVydHlSZW1vdmUiLCJwcm9wZXJ0eUNvbnN0YW50IiwicHJvcGVydHlGdW5jdGlvbiIsImNsYXNzQXJyYXkiLCJzdHJpbmciLCJjbGFzc0xpc3QiLCJDbGFzc0xpc3QiLCJfbm9kZSIsIl9uYW1lcyIsImFkZCIsImpvaW4iLCJzcGxpY2UiLCJjb250YWlucyIsImNsYXNzZWRBZGQiLCJuYW1lcyIsImxpc3QiLCJjbGFzc2VkUmVtb3ZlIiwiY2xhc3NlZFRydWUiLCJjbGFzc2VkRmFsc2UiLCJjbGFzc2VkRnVuY3Rpb24iLCJ0ZXh0UmVtb3ZlIiwidGV4dENvbnRlbnQiLCJ0ZXh0Q29uc3RhbnQiLCJ0ZXh0RnVuY3Rpb24iLCJodG1sUmVtb3ZlIiwiaW5uZXJIVE1MIiwiaHRtbENvbnN0YW50IiwiaHRtbEZ1bmN0aW9uIiwicmFpc2UiLCJuZXh0U2libGluZyIsInByZXZpb3VzU2libGluZyIsImZpcnN0Q2hpbGQiLCJjcmVhdG9yIiwiY29uc3RhbnROdWxsIiwiYmVmb3JlIiwicmVtb3ZlQ2hpbGQiLCJzZWxlY3Rpb25fY2xvbmVTaGFsbG93IiwiY2xvbmUiLCJzZWxlY3Rpb25fY2xvbmVEZWVwIiwiZGVlcCIsInByb3BlcnR5IiwiY29udGV4dExpc3RlbmVyIiwibGlzdGVuZXIiLCJldmVudCIsIm9uUmVtb3ZlIiwiX19vbiIsIm8iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwib25BZGQiLCJhZGRFdmVudExpc3RlbmVyIiwiZGlzcGF0Y2hFdmVudCIsIndpbmRvdyIsIkN1c3RvbUV2ZW50IiwiY3JlYXRlRXZlbnQiLCJpbml0RXZlbnQiLCJidWJibGVzIiwiY2FuY2VsYWJsZSIsImRldGFpbCIsImRpc3BhdGNoQ29uc3RhbnQiLCJkaXNwYXRjaEZ1bmN0aW9uIiwic2VsZWN0aW9uX3NlbGVjdGlvbiIsInNlbGVjdGlvbl9zZWxlY3QiLCJzZWxlY3Rpb25fc2VsZWN0QWxsIiwic2VsZWN0Q2hpbGQiLCJzZWxlY3Rpb25fc2VsZWN0Q2hpbGQiLCJzZWxlY3RDaGlsZHJlbiIsInNlbGVjdGlvbl9zZWxlY3RDaGlsZHJlbiIsInNlbGVjdGlvbl9maWx0ZXIiLCJzZWxlY3Rpb25fZGF0YSIsInNlbGVjdGlvbl9lbnRlciIsInNlbGVjdGlvbl9leGl0Iiwic2VsZWN0aW9uX2pvaW4iLCJzZWxlY3Rpb25fbWVyZ2UiLCJzZWxlY3Rpb25fb3JkZXIiLCJzZWxlY3Rpb25fc29ydCIsInNlbGVjdGlvbl9jYWxsIiwibm9kZXMiLCJzZWxlY3Rpb25fbm9kZXMiLCJzZWxlY3Rpb25fbm9kZSIsInNlbGVjdGlvbl9zaXplIiwic2VsZWN0aW9uX2VtcHR5Iiwic2VsZWN0aW9uX2VhY2giLCJhdHRyIiwic2VsZWN0aW9uX2F0dHIiLCJzZWxlY3Rpb25fc3R5bGUiLCJzZWxlY3Rpb25fcHJvcGVydHkiLCJjbGFzc2VkIiwic2VsZWN0aW9uX2NsYXNzZWQiLCJ0ZXh0Iiwic2VsZWN0aW9uX3RleHQiLCJodG1sIiwic2VsZWN0aW9uX2h0bWwiLCJzZWxlY3Rpb25fcmFpc2UiLCJzZWxlY3Rpb25fbG93ZXIiLCJzZWxlY3Rpb25fYXBwZW5kIiwiaW5zZXJ0Iiwic2VsZWN0aW9uX2luc2VydCIsInNlbGVjdGlvbl9yZW1vdmUiLCJzZWxlY3Rpb25fY2xvbmUiLCJzZWxlY3Rpb25fZGF0dW0iLCJzZWxlY3Rpb25fb24iLCJzZWxlY3Rpb25fZGlzcGF0Y2giLCJTeW1ib2wiLCJpdGVyYXRvciIsInNlbGVjdGlvbl9pdGVyYXRvciIsImV4dGVuZCIsImRlZmluaXRpb24iLCJDb2xvciIsImRhcmtlciIsImJyaWdodGVyIiwicmVJIiwicmVOIiwicmVQIiwicmVIZXgiLCJyZVJnYkludGVnZXIiLCJyZVJnYlBlcmNlbnQiLCJyZVJnYmFJbnRlZ2VyIiwicmVSZ2JhUGVyY2VudCIsInJlSHNsUGVyY2VudCIsInJlSHNsYVBlcmNlbnQiLCJuYW1lZCIsImFsaWNlYmx1ZSIsImFudGlxdWV3aGl0ZSIsImFxdWEiLCJhcXVhbWFyaW5lIiwiYXp1cmUiLCJiZWlnZSIsImJpc3F1ZSIsImJsYWNrIiwiYmxhbmNoZWRhbG1vbmQiLCJibHVlIiwiYmx1ZXZpb2xldCIsImJyb3duIiwiYnVybHl3b29kIiwiY2FkZXRibHVlIiwiY2hhcnRyZXVzZSIsImNob2NvbGF0ZSIsImNvcmFsIiwiY29ybmZsb3dlcmJsdWUiLCJjb3Juc2lsayIsImNyaW1zb24iLCJjeWFuIiwiZGFya2JsdWUiLCJkYXJrY3lhbiIsImRhcmtnb2xkZW5yb2QiLCJkYXJrZ3JheSIsImRhcmtncmVlbiIsImRhcmtncmV5IiwiZGFya2toYWtpIiwiZGFya21hZ2VudGEiLCJkYXJrb2xpdmVncmVlbiIsImRhcmtvcmFuZ2UiLCJkYXJrb3JjaGlkIiwiZGFya3JlZCIsImRhcmtzYWxtb24iLCJkYXJrc2VhZ3JlZW4iLCJkYXJrc2xhdGVibHVlIiwiZGFya3NsYXRlZ3JheSIsImRhcmtzbGF0ZWdyZXkiLCJkYXJrdHVycXVvaXNlIiwiZGFya3Zpb2xldCIsImRlZXBwaW5rIiwiZGVlcHNreWJsdWUiLCJkaW1ncmF5IiwiZGltZ3JleSIsImRvZGdlcmJsdWUiLCJmaXJlYnJpY2siLCJmbG9yYWx3aGl0ZSIsImZvcmVzdGdyZWVuIiwiZnVjaHNpYSIsImdhaW5zYm9ybyIsImdob3N0d2hpdGUiLCJnb2xkIiwiZ29sZGVucm9kIiwiZ3JheSIsImdyZWVuIiwiZ3JlZW55ZWxsb3ciLCJncmV5IiwiaG9uZXlkZXciLCJob3RwaW5rIiwiaW5kaWFucmVkIiwiaW5kaWdvIiwiaXZvcnkiLCJraGFraSIsImxhdmVuZGVyIiwibGF2ZW5kZXJibHVzaCIsImxhd25ncmVlbiIsImxlbW9uY2hpZmZvbiIsImxpZ2h0Ymx1ZSIsImxpZ2h0Y29yYWwiLCJsaWdodGN5YW4iLCJsaWdodGdvbGRlbnJvZHllbGxvdyIsImxpZ2h0Z3JheSIsImxpZ2h0Z3JlZW4iLCJsaWdodGdyZXkiLCJsaWdodHBpbmsiLCJsaWdodHNhbG1vbiIsImxpZ2h0c2VhZ3JlZW4iLCJsaWdodHNreWJsdWUiLCJsaWdodHNsYXRlZ3JheSIsImxpZ2h0c2xhdGVncmV5IiwibGlnaHRzdGVlbGJsdWUiLCJsaWdodHllbGxvdyIsImxpbWUiLCJsaW1lZ3JlZW4iLCJsaW5lbiIsIm1hZ2VudGEiLCJtYXJvb24iLCJtZWRpdW1hcXVhbWFyaW5lIiwibWVkaXVtYmx1ZSIsIm1lZGl1bW9yY2hpZCIsIm1lZGl1bXB1cnBsZSIsIm1lZGl1bXNlYWdyZWVuIiwibWVkaXVtc2xhdGVibHVlIiwibWVkaXVtc3ByaW5nZ3JlZW4iLCJtZWRpdW10dXJxdW9pc2UiLCJtZWRpdW12aW9sZXRyZWQiLCJtaWRuaWdodGJsdWUiLCJtaW50Y3JlYW0iLCJtaXN0eXJvc2UiLCJtb2NjYXNpbiIsIm5hdmFqb3doaXRlIiwibmF2eSIsIm9sZGxhY2UiLCJvbGl2ZSIsIm9saXZlZHJhYiIsIm9yYW5nZSIsIm9yYW5nZXJlZCIsIm9yY2hpZCIsInBhbGVnb2xkZW5yb2QiLCJwYWxlZ3JlZW4iLCJwYWxldHVycXVvaXNlIiwicGFsZXZpb2xldHJlZCIsInBhcGF5YXdoaXAiLCJwZWFjaHB1ZmYiLCJwZXJ1IiwicGluayIsInBsdW0iLCJwb3dkZXJibHVlIiwicHVycGxlIiwicmViZWNjYXB1cnBsZSIsInJlZCIsInJvc3licm93biIsInJveWFsYmx1ZSIsInNhZGRsZWJyb3duIiwic2FsbW9uIiwic2FuZHlicm93biIsInNlYWdyZWVuIiwic2Vhc2hlbGwiLCJzaWVubmEiLCJzaWx2ZXIiLCJza3libHVlIiwic2xhdGVibHVlIiwic2xhdGVncmF5Iiwic2xhdGVncmV5Iiwic25vdyIsInNwcmluZ2dyZWVuIiwic3RlZWxibHVlIiwidGFuIiwidGVhbCIsInRoaXN0bGUiLCJ0b21hdG8iLCJ0dXJxdW9pc2UiLCJ2aW9sZXQiLCJ3aGVhdCIsIndoaXRlIiwid2hpdGVzbW9rZSIsInllbGxvdyIsInllbGxvd2dyZWVuIiwiZGVmaW5lIiwiY29sb3IiLCJjaGFubmVscyIsImFzc2lnbiIsImRpc3BsYXlhYmxlIiwicmdiIiwiaGV4IiwiY29sb3JfZm9ybWF0SGV4IiwiZm9ybWF0SGV4IiwiZm9ybWF0SGV4OCIsImNvbG9yX2Zvcm1hdEhleDgiLCJmb3JtYXRIc2wiLCJjb2xvcl9mb3JtYXRIc2wiLCJmb3JtYXRSZ2IiLCJjb2xvcl9mb3JtYXRSZ2IiLCJoc2xDb252ZXJ0IiwiZm9ybWF0IiwidG9Mb3dlckNhc2UiLCJleGVjIiwicGFyc2VJbnQiLCJyZ2JuIiwiUmdiIiwicmdiYSIsImhzbGEiLCJnIiwicmdiQ29udmVydCIsIm9wYWNpdHkiLCJjbGFtcCIsImNsYW1waSIsImNsYW1wYSIsInJnYl9mb3JtYXRIZXgiLCJyZ2JfZm9ybWF0SGV4OCIsInJnYl9mb3JtYXRSZ2IiLCJoIiwiSHNsIiwiaHNsIiwibTIiLCJoc2wycmdiIiwiY2xhbXBoIiwiY2xhbXB0IiwibGluZWFyIiwiZCIsImV4cG9uZW50aWFsIiwibm9nYW1tYSIsInJnYkdhbW1hIiwic3RhcnQiLCJlbmQiLCJjb2xvclJnYiIsInJlQSIsInJlQiIsInplcm8iLCJvbmUiLCJiaSIsImxhc3RJbmRleCIsImFtIiwiYm0iLCJicyIsImluZGV4IiwibnVtYmVyIiwiZGVncmVlcyIsImlkZW50aXR5IiwidHJhbnNsYXRlWCIsInRyYW5zbGF0ZVkiLCJyb3RhdGUiLCJza2V3WCIsInNjYWxlWCIsInNjYWxlWSIsImF0YW4yIiwiYXRhbiIsInN2Z05vZGUiLCJwYXJzZUNzcyIsIkRPTU1hdHJpeCIsIldlYktpdENTU01hdHJpeCIsImlzSWRlbnRpdHkiLCJkZWNvbXBvc2UiLCJwYXJzZVN2ZyIsInRyYW5zZm9ybSIsImJhc2VWYWwiLCJjb25zb2xpZGF0ZSIsIm1hdHJpeCIsImludGVycG9sYXRlVHJhbnNmb3JtIiwicGFyc2UiLCJweENvbW1hIiwicHhQYXJlbiIsImRlZ1BhcmVuIiwicG9wIiwidHJhbnNsYXRlIiwieGEiLCJ5YSIsInhiIiwieWIiLCJpbnRlcnBvbGF0ZVRyYW5zZm9ybUNzcyIsImludGVycG9sYXRlVHJhbnNmb3JtU3ZnIiwiZnJhbWUiLCJ0aW1lb3V0IiwiaW50ZXJ2YWwiLCJwb2tlRGVsYXkiLCJ0YXNrSGVhZCIsInRhc2tUYWlsIiwiY2xvY2tMYXN0IiwiY2xvY2tOb3ciLCJjbG9ja1NrZXciLCJjbG9jayIsInBlcmZvcm1hbmNlIiwibm93Iiwic2V0RnJhbWUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJzZXRUaW1lb3V0IiwiY2xlYXJOb3ciLCJUaW1lciIsIl9jYWxsIiwiX3RpbWUiLCJ0aW1lciIsInJlc3RhcnQiLCJkZWxheSIsInRpbWUiLCJzbGVlcCIsInN0b3AiLCJ0aW1lckZsdXNoIiwid2FrZSIsIm5hcCIsInBva2UiLCJ0MCIsInQxIiwidDIiLCJjbGVhclRpbWVvdXQiLCJjbGVhckludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJlbGFwc2VkIiwiZW1wdHlPbiIsImVtcHR5VHdlZW4iLCJDUkVBVEVEIiwiU0NIRURVTEVEIiwiU1RBUlRJTkciLCJTVEFSVEVEIiwiUlVOTklORyIsIkVORElORyIsIkVOREVEIiwiaWQiLCJ0aW1pbmciLCJzY2hlZHVsZXMiLCJfX3RyYW5zaXRpb24iLCJ0d2VlbiIsImR1cmF0aW9uIiwiZWFzZSIsInNjaGVkdWxlIiwic2VsZiIsInRpY2siLCJhY3RpdmUiLCJpbnRlcnJ1cHQiLCJ0d2VlblJlbW92ZSIsInR3ZWVuMCIsInR3ZWVuMSIsInR3ZWVuRnVuY3Rpb24iLCJfaWQiLCJ0d2VlblZhbHVlIiwidHJhbnNpdGlvbiIsImludGVycG9sYXRlTnVtYmVyIiwiaW50ZXJwb2xhdGVSZ2IiLCJpbnRlcnBvbGF0ZVN0cmluZyIsImludGVycG9sYXRlIiwic3RyaW5nMDAiLCJzdHJpbmcxIiwiaW50ZXJwb2xhdGUwIiwic3RyaW5nMCIsInN0cmluZzEwIiwiYXR0clR3ZWVuIiwiYXR0ckludGVycG9sYXRlIiwiYXR0ckludGVycG9sYXRlTlMiLCJhdHRyVHdlZW5OUyIsIl92YWx1ZSIsImRlbGF5RnVuY3Rpb24iLCJkZWxheUNvbnN0YW50IiwiZHVyYXRpb25GdW5jdGlvbiIsImR1cmF0aW9uQ29uc3RhbnQiLCJlYXNlQ29uc3RhbnQiLCJlYXNlVmFyeWluZyIsIlRyYW5zaXRpb24iLCJfbmFtZSIsImV2ZXJ5Iiwib25GdW5jdGlvbiIsIm9uMCIsIm9uMSIsInNpdCIsInJlbW92ZUZ1bmN0aW9uIiwiaW5oZXJpdCIsInN0eWxlTnVsbCIsInN0eWxlTWF5YmVSZW1vdmUiLCJsaXN0ZW5lcjAiLCJzdHlsZVR3ZWVuIiwic3R5bGVJbnRlcnBvbGF0ZSIsInRleHRJbnRlcnBvbGF0ZSIsInRleHRUd2VlbiIsImlkMCIsImlkMSIsIm5ld0lkIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJjYW5jZWwiLCJzZWxlY3Rpb25fcHJvdG90eXBlIiwidHJhbnNpdGlvbl9zZWxlY3QiLCJ0cmFuc2l0aW9uX3NlbGVjdEFsbCIsInRyYW5zaXRpb25fZmlsdGVyIiwidHJhbnNpdGlvbl9tZXJnZSIsInRyYW5zaXRpb25fc2VsZWN0aW9uIiwidHJhbnNpdGlvbl90cmFuc2l0aW9uIiwidHJhbnNpdGlvbl9vbiIsInRyYW5zaXRpb25fYXR0ciIsInRyYW5zaXRpb25fYXR0clR3ZWVuIiwidHJhbnNpdGlvbl9zdHlsZSIsInRyYW5zaXRpb25fc3R5bGVUd2VlbiIsInRyYW5zaXRpb25fdGV4dCIsInRyYW5zaXRpb25fdGV4dFR3ZWVuIiwidHJhbnNpdGlvbl9yZW1vdmUiLCJ0cmFuc2l0aW9uX3R3ZWVuIiwidHJhbnNpdGlvbl9kZWxheSIsInRyYW5zaXRpb25fZHVyYXRpb24iLCJ0cmFuc2l0aW9uX2Vhc2UiLCJ0cmFuc2l0aW9uX2Vhc2VWYXJ5aW5nIiwidHJhbnNpdGlvbl9lbmQiLCJjdWJpY0luT3V0IiwiZGVmYXVsdFRpbWluZyIsImVhc2VDdWJpY0luT3V0Iiwic2VsZWN0aW9uX2ludGVycnVwdCIsInNlbGVjdGlvbl90cmFuc2l0aW9uIiwiVHJhbnNmb3JtIiwicG9pbnQiLCJhcHBseVgiLCJhcHBseVkiLCJpbnZlcnQiLCJpbnZlcnRYIiwiaW52ZXJ0WSIsInJlc2NhbGVYIiwiZG9tYWluIiwicmFuZ2UiLCJyZXNjYWxlWSIsIkhURE1hdGgiLCJERUZBVUxUIiwiTUlOIiwiTUFYIiwiU1RFUCIsIkpVTVAiLCJhZGsydiIsImFkdjJrIiwib25tZXNzYWdlIiwibHVjZSIsImxvZ1Bvc3QiLCJscCIsImtNZWFuIiwia1NoYXBlIiwiQmF5ZXNEaXN0cmlidXRpb25zIiwibHVjZU1lYW4iLCJsdWNlU2hhcGUiLCJmb3JFYWNoIiwiY2hvaWNlIiwidnMiLCJhcyIsImRzIiwidmwiLCJhbCIsImRsIiwiYmludmFsIiwicmVzcG9uc2UiLCJzYW1wbGVyIiwiQmF5ZXNNY21jIiwic2FtcGxlcyIsInJlc3VsdHMiLCJkMyIsInBvc3RNZXNzYWdlIl0sIm1h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QUFNLEVBQUU2dkIsT0FBTyxFQUFFemQsS0FBSyxDQUFDNU8sSUFBSSxDQUFDO0VBQ3RFO0VBQ0FzdEIsRUFBQUEsT0FBTyxDQUFDMXNCLElBQUksQ0FBQyxJQUFJLENBQUM7RUFDbEIsRUFBQSxNQUFNNHNCLE9BQU8sR0FBR0YsT0FBTyxDQUFDOXNCLE1BQU0sQ0FBQyxJQUFJLENBQUM7O0VBRXBDO0VBQ0EsRUFBQSxNQUFNaXRCLE9BQU8sR0FBRztNQUNkNTVCLENBQUMsRUFBRTY1QixNQUFTLENBQUNGLE9BQU8sQ0FBQzM1QixDQUFDLENBQUM7RUFDdkJ1NEIsSUFBQUEsSUFBSSxFQUFFc0IsTUFBUyxDQUFDRixPQUFPLENBQUNwQixJQUFJO0tBQzdCO0lBRURwRyxJQUFJLENBQUMySCxXQUFXLENBQUM7RUFBQ0YsSUFBQUEsT0FBTyxFQUFFQSxPQUFPO0VBQUVELElBQUFBLE9BQU8sRUFBRUE7RUFBTyxHQUFDLENBQUM7RUFDeEQsQ0FBQzs7Ozs7OyIsInhfZ29vZ2xlX2lnbm9yZUxpc3QiOlswLDEsMiwzLDQsNSw2LDcsOCw5LDEwLDExLDEyLDEzLDE0LDE1LDE2LDE3LDE4LDE5LDIwLDIxLDIyLDIzLDI0LDI1LDI2LDI3LDI4LDI5LDMwLDMxLDMyLDMzLDM0LDM1LDM2LDM3LDM4LDM5LDQwLDQxLDQyLDQzLDQ0LDQ1LDQ2LDQ3LDQ4LDQ5LDUwLDUxLDUyLDUzLDU0LDU1LDU2LDU3LDU4LDU5LDYwLDYxLDYyLDYzLDY0LDY1LDY2LDY3LDY4LDY5LDcwLDcxLDcyLDczLDc0LDc1LDc2LDc3LDc4LDc5LDgwLDgxLDgyLDgzLDg0LDg1LDg2LDg3LDg4LDg5LDkwLDkxLDkyLDkzLDk0LDk1LDk2XX0=");class HTDFit extends DiscountableElement{static get properties(){return{}}constructor(){super(),this.k=HTDMath.k.DEFAULT,this.choices=[],this.samples=null,this.working=!1,this.queued=!1,this.worker=new WorkerFactory$1,this.worker.onmessage=t=>{this.working=!1,this.samples=t.data.samples,this.k=t.data.results.k,this.requestUpdate(),this.dispatchEvent(new CustomEvent("htd-fit-update",{detail:{k:this.k},bubbles:!0})),this.queued&&this.fit()},this.fit()}fit(){this.working?this.queued=!0:(this.worker.postMessage(this.choices),this.working=!0,this.queued=!1)}clear(){this.choices=[],this.fit()}get(t="default"){const s=this.choices.find(s=>s.name===t);return void 0===s?null:s}set(t,s,e,B,i,F="",Q=""){const l=this.choices.find(t=>t.name===F);void 0===l?this.choices.push({as:t,ds:s,al:e,dl:B,response:i,name:F,label:Q}):(l.as=t,l.ds=s,l.al=e,l.dl=B,l.response=i,l.label=Q),this.fit()}static get styles(){return[super.styles,i$5`
        /* :host {
          display: inline-block;
        } */

        figure {
          margin: 0.625rem;
        }

        figure h2 {
          margin: 0.25rem 0;

          font-size: 1.125rem;
          font-weight: 600;
        }

        .trace,
        .hist {
          display: inline-block;
        }
      `]}render(){return x$3`
      <div>
        <div>After ${this.choices.length} trials:</div>
        <div>Current:
          <var class="math-var k">k</var> = ${this.k.toFixed(3)}
        </div>
        <div class="param">
          <div class="trace k"></div>
          <div class="hist k"></div>
        </div>
        <div class="param">
          <div class="trace luce"></div>
          <div class="hist luce"></div>
        </div>
      </div>
    `}plotParam(t){this.shadowRoot.querySelector(`.hist.${t}`).replaceChildren(plot({title:`Posterior of ${t}`,x:{label:`${t}`},width:320,height:240,style:"font-size: 0.75rem; font-family: var(---font-family-base);",marks:[rectY(this.samples[t],binX({y:"count"},{x:identity$1})),rectY(this.samples[t],pointerX(binX({y:"count"},{x:identity$1,stroke:"black",fill:"white",tip:!0})))]})),this.shadowRoot.querySelector(`.trace.${t}`).replaceChildren(plot({title:`Traceplot of ${t}`,x:{label:"Sample"},y:{label:`${t}`},width:320,height:240,style:"font-size: 0.75rem; font-family: var(---font-family-base);",marks:[lineY(this.samples[t]),dot(this.samples[t],pointer({x:indexOf,y:identity$1,stroke:"black",fill:"white",r:4,tip:!0}))]}))}update(t){super.update(t),null!==this.samples&&(this.plotParam("k"),this.plotParam("luce"))}}customElements.define("htd-fit",HTDFit);class HTDParameters extends DiscountableElement{static get properties(){return{k:{attribute:"k",type:Number,reflect:!0}}}constructor(){super(),this.k=void 0}updated(t){super.updated(t),void 0!==this.k&&void 0===this.kSlider?(this.kSlider=this.shadowRoot.querySelector("decidables-slider.k"),this.kSlider.nonlinearRange(!0,t=>t**.5/(t**.5+1),t=>(t/(1-t))**2)):void 0===this.k&&void 0!==this.kSlider&&(this.kSlider=void 0)}setK(t){this.k=+t.target.value,this.dispatchEvent(new CustomEvent("htd-parameters-k",{detail:{k:this.k},bubbles:!0}))}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;
        }

        .holder {
          display: flex;

          flex-direction: row;

          align-items: stretch;
          justify-content: center;
        }

        decidables-slider {
          line-height: 1;
          text-align: center;
        }

        decidables-slider  div {
          margin-bottom: 0.25rem;
        }

        .k {
          --decidables-slider-background-color: var(---color-k-light);
          --decidables-slider-color: var(---color-k);
        }
      `]}render(){return x$3`
      <div class="holder">
        ${null!=this.k?x$3`<decidables-slider class="k"
            ?disabled=${!this.interactive}
            scale
            min=${HTDMath.k.MIN}
            max=${HTDMath.k.MAX}
            step=${HTDMath.k.STEP}
            .value=${+this.k.toFixed(3)}
            @change=${this.setK.bind(this)}
            @input=${this.setK.bind(this)}
          ><div>Discounting Factor<br><span class="math-var">k</span></div></decidables-slider>`:x$3``}
      </div>`}}customElements.define("htd-parameters",HTDParameters);class ITCOption extends DiscountableElement{static get properties(){return{state:{attribute:"state",type:String,reflect:!0},a:{attribute:"amount",type:Number,reflect:!0},d:{attribute:"delay",type:Number,reflect:!0}}}constructor(){super(),this.states=["choice","fixation","blank"],this.state="choice",this.a=0,this.d=0}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;
          
          width: 10rem;
          height: 10rem;
        }

        .holder {
          display: flex;
          
          flex-flow: column nowrap;

          align-items: center;
          justify-content: center;

          width: 100%;
          height: 100%;
          overflow: visible;
          

          background: var(---color-element-background);
          border: 2px solid var(---color-element-emphasis);
          border-radius: var(---border-radius);
        }

        .interactive,
        .static {
          font-size: 1.75rem;
        }

        .interactive {
          --decidables-spinner-font-size: 1.75rem;
        }

        .static {
          padding: 0 0.25rem;
          
          border-radius: var(---border-radius);
        }

        .amount {
          --decidables-spinner-prefix: "$";
          background-color: var(---color-a-light);
        }

        .amount.interactive {
          --decidables-spinner-input-width: 4rem;
        }

        .delay {
          background-color: var(---color-d-light);
        }
        
        .delay.interactive {
          --decidables-spinner-input-width: 6.75rem;
          --decidables-spinner-postfix: "days";
          --decidables-spinner-postfix-padding: 3.75rem;
        }
      `]}sendEvent(){this.dispatchEvent(new CustomEvent("itc-option-change",{detail:{a:this.a,d:this.d},bubbles:!0}))}aInput(t){this.a=parseFloat(t.target.value),this.sendEvent()}dInput(t){this.d=parseFloat(t.target.value),this.sendEvent()}render(){return x$3`
      <div class="holder">
        ${"choice"===this.state?this.interactive?x$3`<decidables-spinner
              class="amount interactive"
              ?disabled=${!this.interactive}
              step="1"
              .value="${this.a}"
              @input=${this.aInput.bind(this)}
              ></decidables-spinner>`:x$3`<div
              class="amount static"
              >$${this.a}</div>`:""}
        ${"choice"===this.state?x$3`<div class="in">in</div>`:""}
        ${"choice"===this.state?this.interactive?x$3`<decidables-spinner
              class="delay interactive"
              ?disabled=${!this.interactive}
              min="0" 
              step="1"
              .value="${this.d}"
              @input=${this.dInput.bind(this)}
              ></decidables-spinner>`:x$3`<div
              class="delay static"
              >${this.d} days</div>`:""}
      </div>
    `}}customElements.define("itc-option",ITCOption);class ITCChoice extends DiscountableElement{static get properties(){return{state:{attribute:"state",type:String,reflect:!0},as:{attribute:"amount-ss",type:Number,reflect:!0},ds:{attribute:"delay-ss",type:Number,reflect:!0},al:{attribute:"amount-ll",type:Number,reflect:!0},dl:{attribute:"delay-ll",type:Number,reflect:!0}}}constructor(){super(),this.states=["choice","fixation","blank"],this.state="choice",this.as=10,this.ds=5,this.al=40,this.dl=30}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;
        }

        .holder {
          user-select: none;
        }

        .holder > * {
          vertical-align: middle;
        }

        .query {
          margin: 0 0.5rem;

          font-family: var(--font-family-code);
          font-size: 1.75rem;
        }

        itc-option {
          width: 10rem;
          height: 10rem;
        }
      `]}sendEvent(){this.dispatchEvent(new CustomEvent("itc-choice-change",{detail:{as:this.as,ds:this.ds,al:this.al,dl:this.dl},bubbles:!0}))}ssChange(t){this.as=parseFloat(t.detail.a),this.ds=parseFloat(t.detail.d),this.sendEvent()}llChange(t){this.al=parseFloat(t.detail.a),this.dl=parseFloat(t.detail.d),this.sendEvent()}render(){return x$3`
      <div class="holder">
        <itc-option
          class="ss"
          state=${this.state}
          ?interactive=${this.interactive}
          amount="${this.as}"
          delay="${this.ds}"
          @itc-option-change=${this.ssChange.bind(this)}>
        </itc-option><span class="query"
         >${"choice"===this.state?"?":"fixation"===this.state?"+":x$3`â`}</span
        ><itc-option
          class="ll"
          state=${this.state}
          ?interactive=${this.interactive}
          amount="${this.al}"
          delay="${this.dl}"
          @itc-option-change=${this.llChange.bind(this)}>
        </itc-option>
      </div>`}}customElements.define("itc-choice",ITCChoice);class ITCTask extends DiscountableElement{static get properties(){return{duration:{attribute:"duration",type:Number,reflect:!0},iti:{attribute:"iti",type:Number,reflect:!0},trials:{attribute:"trials",type:Number,reflect:!0},running:{attribute:"running",type:Boolean,reflect:!0},state:{attribute:!1,type:String,reflect:!1}}}constructor(){super(),this.duration=2e3,this.iti=2e3,this.trials=5,this.running=!1,this.states=["resetted","iti","stimulus","ended"],this.state="resetted",this.range={},this.range.as={start:5,stop:20,step:5},this.range.ds={start:5,stop:20,step:5},this.range.al={start:40,stop:80,step:5},this.range.dl={start:40,stop:80,step:5},this.range.as.values=range$1(this.range.as.start,this.range.as.stop+.01,this.range.as.step),this.range.ds.values=range$1(this.range.ds.start,this.range.ds.stop+.01,this.range.ds.step),this.range.al.values=range$1(this.range.al.start,this.range.al.stop+.01,this.range.al.step),this.range.dl.values=range$1(this.range.dl.start,this.range.dl.stop+.01,this.range.dl.step),this.firstUpdate=!0,this.as=0,this.ds=0,this.al=0,this.dl=0,this.trial=0,this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0,this.runner=void 0}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;
        }
      `]}render(){return x$3`
      <div class="holder">
        <itc-choice 
          state="${"stimulus"===this.state?"choice":"iti"===this.state?"fixation":"blank"}"
          amount-ss="${this.as}"
          delay-ss="${this.ds}"
          amount-ll="${this.al}"
          delay-ll="${this.dl}">
        </itc-choice>
      </div>`}update(t){super.update(t),(this.firstUpdate||t.has("running"))&&(this.running?(this.pauseTime&&(this.baseTime+=now()-this.pauseTime,this.pauseTime=0),this.runner=interval(this.run.bind(this),20)):void 0!==this.runner&&(this.runner.stop(),this.pauseTime=now())),this.firstUpdate=!1}reset(){this.runner.stop(),this.running=!1,this.trial=0,this.state="resetted",this.as=0,this.ds=0,this.al=0,this.dl=0,this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0}run(){const t=now(),s=this.baseTime?t-this.baseTime:0,e=this.baseTime?s-this.startTime:0;this.lastTime=s,"resetted"===this.state?(this.state="iti",this.baseTime=t,this.startTime=0,this.dispatchEvent(new CustomEvent("itc-block-start",{detail:{trials:this.trials},bubbles:!0}))):"iti"===this.state&&e>=this.iti?(this.trial+=1,this.state="stimulus",this.startTime=s,this.as=this.range.as.values[Math.floor(Math.random()*this.range.as.values.length)],this.ds=this.range.ds.values[Math.floor(Math.random()*this.range.ds.values.length)],this.al=this.range.al.values[Math.floor(Math.random()*this.range.al.values.length)],this.dl=this.range.dl.values[Math.floor(Math.random()*this.range.dl.values.length)],this.dispatchEvent(new CustomEvent("itc-trial-start",{detail:{trials:this.trials,duration:this.duration,iti:this.iti,trial:this.trial,as:this.as,ds:this.ds,al:this.al,dl:this.dl},bubbles:!0}))):"stimulus"===this.state&&e>=this.duration&&(this.dispatchEvent(new CustomEvent("itc-trial-end",{detail:{trials:this.trials,duration:this.duration,iti:this.iti,trial:this.trial,as:this.as,ds:this.ds,al:this.al,dl:this.dl},bubbles:!0})),this.trial>=this.trials?(this.runner.stop(),this.running=!1,this.state="ended",this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0,this.dispatchEvent(new CustomEvent("itc-block-end",{detail:{trials:this.trial},bubbles:!0}))):(this.state="iti",this.startTime=s))}}customElements.define("itc-task",ITCTask);class HTDEquationADK2V extends HTDEquation{static get properties(){return{a:{attribute:"amount",type:Number,reflect:!0},d:{attribute:"delay",type:Number,reflect:!0},k:{attribute:"k",type:Number,reflect:!0},v:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.a=100,this.d=30,this.k=HTDMath.k.DEFAULT,this.alignState()}alignState(){this.v=HTDMath.adk2v(this.a,this.d,this.k)}sendEvent(){this.dispatchEvent(new CustomEvent("htd-equation-adk2v-change",{detail:{a:this.a,d:this.d,k:this.k,v:this.v},bubbles:!0}))}aInput(t){this.a=parseFloat(t.target.value),this.alignState(),this.sendEvent()}dInput(t){this.d=parseFloat(t.target.value),this.alignState(),this.sendEvent()}kInput(t){this.k=parseFloat(t.target.value),this.alignState(),this.sendEvent()}willUpdate(){this.alignState()}render(){let t,s,e,B;this.numeric?(t=x$3`<decidables-spinner class="a bottom"
          ?disabled=${!this.interactive}
          step="1"
          .value=${this.a}
          @input=${this.aInput.bind(this)}
        >
          <var class="math-var">A</var>
        </decidables-spinner>`,s=x$3`<decidables-spinner class="d bottom"
          ?disabled=${!this.interactive}
          min="0"
          step="1"
          .value=${this.d}
          @input=${this.dInput.bind(this)}
        >
          <var class="math-var">D</var>
        </decidables-spinner>`,e=x$3`<decidables-spinner class="k bottom"
          ?disabled=${!this.interactive}
          min=${HTDMath.k.MIN}
          max=${HTDMath.k.MAX}
          step=${HTDMath.k.STEP}
          .value=${this.k}
          @input=${this.kInput.bind(this)}
        >
          <var class="math-var">k</var>
        </decidables-spinner>`,B=x$3`<decidables-spinner class="v bottom"
          disabled
          step=".001"
          .value=${+this.v.toFixed(3)}
        >
          <var class="math-var">V</var>
        </decidables-spinner>`):(t=x$3`<var class="math-var a">A</var>`,s=x$3`<var class="math-var d">D</var>`,e=x$3`<var class="math-var k">k</var>`,B=x$3`<var class="math-var v">V</var>`);const i=x$3`
      <tr>
        <td rowspan="2">
          ${B}<span class="equals">=</span>
        </td>
        <td class="underline">
          ${t}
        </td>
      </tr>
      <tr>
        <td class="">
          <span class="paren tight">(</span>1<span class="plus">+</span>${e}${s}<span class="paren tight">)</span>
        </td>
      </tr>`;return x$3`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${i}
          </tbody>
        </table>
      </div>`}}customElements.define("htd-equation-adk2v",HTDEquationADK2V);class HTDExample extends DiscountableElement{static get styles(){return[super.styles,i$5`
        :host {
          ---border: var(--border, 1px solid var(---color-border));
          display: inline-block;

          margin-bottom: 1rem;
        }

        .holder {
          display: flex;
        }

        .body {
          display: flex;

          flex-wrap: wrap;

          align-items: center;
          justify-content: left;

          padding: 0.625rem;

          border: var(---border);
          border-radius: 0.25rem;
        }

        .body ::slotted(*) {
          margin: 0.625rem;
        }

        /* HACK: Sibling selectors not working with ::slotted */
        /* .body > rdk-task + sdt-response,
        ::slotted(rdk-task) + ::slotted(sdt-response) { */
        /* .body ::slotted(sdt-response) {
          margin-left: 0;
        } */

        /* HACK: Sibling selectors not working with ::slotted */
        /* .body > sdt-control + rdk-task,
        ::slotted(sdt-control) + ::slotted(rdk-task) {
          margin-left: 0;
        } */
        /* .body ::slotted(rdk-task) {
          margin-left: 0;
        } */
      `]}render(){return x$3`
      <div class="holder">
        <div class="body">
          <slot>Empty!</slot>
        </div>
      </div>`}}customElements.define("htd-example",HTDExample);class HTDExampleHuman extends HTDExample{static get properties(){return{trials:{attribute:"trials",type:Number,reflect:!0},duration:{attribute:"duration",type:Number,reflect:!0},k:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.trials=10,this.duration=2e3,this.k=HTDMath.k.DEFAULT,this.discountableControl=null,this.itcTask=null,this.discountableResponse=null,this.htdFit=null,this.htdParameters=null,this.htdCurves=null}connectedCallback(){super.connectedCallback(),this.discountableControl=this.querySelector("discountable-control"),this.itcTask=this.querySelector("itc-task"),this.discountableResponse=this.querySelector("discountable-response"),this.htdFit=this.querySelector("htd-fit"),this.htdParameters=this.querySelector("htd-parameters"),this.htdCurves=this.querySelector("htd-curves"),this.discountableControl&&(this.discountableControl.addEventListener("discountable-control-trials",t=>{this.trials=t.detail.trials}),this.discountableControl.addEventListener("discountable-control-duration",t=>{this.duration=t.detail.duration}),this.discountableControl.addEventListener("discountable-control-run",()=>{this.itcTask&&(this.itcTask.running=!0)}),this.discountableControl.addEventListener("discountable-control-pause",()=>{this.itcTask&&(this.itcTask.running=!1)}),this.discountableControl.addEventListener("discountable-control-reset",()=>{this.itcTask&&this.itcTask.reset(),this.discountableResponse&&this.discountableResponse.reset(),this.htdFit&&this.htdFit.clear(),this.htdCurves&&this.htdCurves.clearOptions()})),this.itcTask&&(this.itcTask.addEventListener("itc-trial-start",t=>{this.discountableResponse&&this.discountableResponse.start(t.detail.as,t.detail.ds,t.detail.al,t.detail.dl,t.detail.trial),this.htdCurves&&(this.htdCurves.setOption(t.detail.as,t.detail.ds,"smaller-sooner","s"),this.htdCurves.setOption(t.detail.al,t.detail.dl,"larger-later","l"))}),this.itcTask.addEventListener("itc-trial-end",()=>{this.discountableResponse&&this.discountableResponse.stop(),this.htdCurves&&(this.htdCurves.removeOption("smaller-sooner"),this.htdCurves.removeOption("larger-later"))}),this.itcTask.addEventListener("itc-block-end",()=>{this.discountableControl&&this.discountableControl.complete()})),this.discountableResponse&&this.discountableResponse.addEventListener("discountable-response",t=>{this.htdFit&&this.htdFit.set(t.detail.as,t.detail.ds,t.detail.al,t.detail.dl,t.detail.response,t.detail.trial.toString(),t.detail.trial.toString())}),this.htdFit&&this.htdFit.addEventListener("htd-fit-update",t=>{this.k=t.detail.k})}update(t){super.update(t),this.discountableControl&&(this.discountableControl.trials=null!=this.discountableControl.trials?this.trials:void 0,this.discountableControl.duration=null!=this.discountableControl.duration?this.duration:void 0),this.discountableResponse&&(this.discountableResponse.trialTotal=this.trials),this.itcTask&&(this.itcTask.duration=this.duration,this.itcTask.iti=this.duration,this.itcTask.trials=this.trials),this.htdCurves&&(this.htdCurves.k=this.k),this.htdParameters&&(this.htdParameters.k=null!=this.htdParameters.k?this.k:void 0)}}customElements.define("htd-example-human",HTDExampleHuman);class HTDExampleInteractive extends HTDExample{static get properties(){return{as:{attribute:"amount-ss",type:Number,reflect:!0},ds:{attribute:"delay-ss",type:Number,reflect:!0},al:{attribute:"amount-ll",type:Number,reflect:!0},dl:{attribute:"delay-ll",type:Number,reflect:!0},k:{attribute:"k",type:Number,reflect:!0}}}constructor(){super(),this.as=10,this.ds=1,this.al=50,this.dl=40,this.k=HTDMath.k.DEFAULT,this.htdCalculation=null,this.htdCurves=null,this.htdParameters=null,this.itcChoice=null}connectedCallback(){super.connectedCallback(),this.htdCalculation=this.querySelector("htd-calculation"),this.htdCurves=this.querySelector("htd-curves"),this.htdParameters=this.querySelector("htd-parameters"),this.itcChoice=this.querySelector("itc-choice"),this.htdCalculation&&this.htdCalculation.addEventListener("htd-calculation-change",t=>{this.as=t.detail.as,this.ds=t.detail.ds,this.al=t.detail.al,this.dl=t.detail.dl,this.k=t.detail.k}),this.htdCurves&&this.htdCurves.addEventListener("htd-curves-change",t=>{this.k=t.detail.k,"default"===t.detail.name?(this.as=t.detail.a,this.ds=t.detail.d):"larger-later"===t.detail.name&&(this.al=t.detail.a,this.dl=t.detail.d)}),this.htdParameters&&this.htdParameters.addEventListener("htd-parameters-k",t=>{this.k=t.detail.k}),this.itcChoice&&this.itcChoice.addEventListener("itc-choice-change",t=>{this.as=t.detail.as,this.ds=t.detail.ds,this.al=t.detail.al,this.dl=t.detail.dl}),this.requestUpdate()}update(t){super.update(t),this.htdCalculation&&(this.htdCalculation.as=this.as,this.htdCalculation.ds=this.ds,this.htdCalculation.al=this.al,this.htdCalculation.dl=this.dl,this.htdCalculation.k=this.k),this.htdCurves&&(this.htdCurves.setOption(this.as,this.ds,"default","s"),this.htdCurves.setOption(this.al,this.dl,"larger-later","l"),this.htdCurves.k=this.k),this.htdParameters&&(this.htdParameters.k=null!=this.htdParameters.k?this.k:void 0),this.itcChoice&&(this.itcChoice.as=this.as,this.itcChoice.ds=this.ds,this.itcChoice.al=this.al,this.itcChoice.dl=this.dl)}}customElements.define("htd-example-interactive",HTDExampleInteractive);class HTDExampleModel extends HTDExample{static get properties(){return{trials:{attribute:"trials",type:Number,reflect:!0},duration:{attribute:"duration",type:Number,reflect:!0},k:{attribute:"k",type:Number,reflect:!0}}}constructor(){super(),this.trials=10,this.duration=2e3,this.k=HTDMath.k.DEFAULT,this.discountableControl=null,this.discountableResponse=null,this.htdCalculation=null,this.htdCurves=null,this.htdParameters=null,this.itcTask=null}connectedCallback(){super.connectedCallback(),this.discountableControl=this.querySelector("discountable-control"),this.discountableResponse=this.querySelector("discountable-response"),this.htdCalculation=this.querySelector("htd-calculation"),this.htdCurves=this.querySelector("htd-curves"),this.htdParameters=this.querySelector("htd-parameters"),this.itcTask=this.querySelector("itc-task"),this.discountableControl&&(this.discountableControl.addEventListener("discountable-control-trials",t=>{this.trials=t.detail.trials}),this.discountableControl.addEventListener("discountable-control-duration",t=>{this.duration=t.detail.duration}),this.discountableControl.addEventListener("discountable-control-run",()=>{this.htdCurves&&this.htdCurves.resumeTrial(),this.itcTask&&(this.itcTask.running=!0)}),this.discountableControl.addEventListener("discountable-control-pause",()=>{this.htdCurves&&this.htdCurves.pauseTrial(),this.itcTask&&(this.itcTask.running=!1)}),this.discountableControl.addEventListener("discountable-control-reset",()=>{this.discountableResponse&&this.discountableResponse.reset(),this.htdCurves&&this.htdCurves.clearOptions(),this.itcTask&&this.itcTask.reset()})),this.htdCurves&&(this.htdCurves.addEventListener("htd-curves-change",t=>{this.k=t.detail.k}),this.htdCurves.addEventListener("discountable-response",t=>{this.discountableResponse&&this.discountableResponse.responded(t.detail.response)})),this.htdParameters&&this.htdParameters.addEventListener("htd-parameters-k",t=>{this.k=t.detail.k}),this.itcTask&&(this.itcTask.addEventListener("itc-trial-start",t=>{this.discountableResponse&&this.discountableResponse.start(t.detail.as,t.detail.ds,t.detail.al,t.detail.dl,t.detail.trial);const s=HTDMath.adk2v(t.detail.as,t.detail.ds,this.k)>HTDMath.adk2v(t.detail.al,t.detail.dl,this.k)?"first":"second";this.htdCurves&&this.htdCurves.trial(t.detail.as,t.detail.ds,t.detail.al,t.detail.dl,t.detail.trial,s)}),this.itcTask.addEventListener("itc-trial-end",()=>{this.discountableResponse&&this.discountableResponse.stop()}),this.itcTask.addEventListener("itc-block-end",()=>{this.discountableControl&&this.discountableControl.complete()})),this.requestUpdate()}update(t){super.update(t),this.discountableControl&&(this.discountableControl.trials=null!=this.discountableControl.trials?this.trials:void 0,this.discountableControl.duration=null!=this.discountableControl.duration?this.duration:void 0),this.discountableResponse&&(this.discountableResponse.trialTotal=this.trials),this.itcTask&&(this.itcTask.duration=this.duration,this.itcTask.iti=this.duration,this.itcTask.trials=this.trials),this.htdCalculation&&(this.htdCalculation.k=this.k),this.htdCurves&&(this.htdCurves.k=this.k),this.htdParameters&&(this.htdParameters.k=null!=this.htdParameters.k?this.k:void 0)}}customElements.define("htd-example-model",HTDExampleModel);var data={colors:{a:"#e41a1c",z:"#377eb8",v:"#ff7f00",t0:"#f781bf",s:"#999999",left:"#f032e6",right:"#10dbc9",correct:"#4daf4a",error:"#984ea3",nr:"#cccccc"}},colors=data.colors;class AccumulableElement extends DecidablesElement{static get properties(){return{interactive:{attribute:"interactive",type:Boolean,reflect:!0}}}constructor(){super(),this.interactive=!1}static get colors(){return colors}static get lights(){return Object.keys(AccumulableElement.colors).reduce((t,s)=>(t[s]=interpolateRgb(AccumulableElement.colors[s],"#ffffff")(.5),t),{})}static get darks(){return Object.keys(AccumulableElement.colors).reduce((t,s)=>(t[s]=interpolateRgb(AccumulableElement.colors[s],"#000000")(.5),t),{})}static get styles(){return[super.styles,i$5`
        :host {
          /* Declare base colors */
          ${r$4(Object.keys(AccumulableElement.colors).map(t=>`---color-${t}: var(--color-${t}, ${this.colors[t]});`).join("\n"))}

          /* Declare light colors */
          ${r$4(Object.keys(AccumulableElement.colors).map(t=>`---color-${t}-light: var(--color-${t}-light, ${this.lights[t]});`).join("\n"))}

          /* Declare dark colors */
          ${r$4(Object.keys(AccumulableElement.colors).map(t=>`---color-${t}-dark: var(--color-${t}-dark, ${this.darks[t]});`).join("\n"))}
        }
      `]}}class AccumulableControl extends AccumulableElement{static get properties(){return{trials:{attribute:"trials",type:Number,reflect:!0},resample:{attribute:"resample",type:Boolean,reflect:!0},duration:{attribute:"duration",type:Number,reflect:!0},coherence:{attribute:"coherence",type:Number,reflect:!0},color:{attribute:"color",type:String,reflect:!0},run:{attribute:"run",type:Boolean,reflect:!0},pause:{attribute:"pause",type:Boolean,reflect:!0},reset:{attribute:"reset",type:Boolean,reflect:!0},state:{attribute:!1,type:String,reflect:!1}}}constructor(){super(),this.trials=void 0,this.resample=!1,this.duration=void 0,this.coherence=void 0,this.colors=["none","measure","outcome","all"],this.color=void 0,this.run=!1,this.pause=!1,this.reset=!1,this.states=["resetted","running","paused","ended"],this.state="resetted"}setTrials(t){this.trials=t.target.value,this.dispatchEvent(new CustomEvent("accumulable-control-trials",{detail:{trials:this.trials},bubbles:!0}))}doResample(){this.dispatchEvent(new CustomEvent("accumulable-control-resample",{detail:{},bubbles:!0}))}setDuration(t){this.duration=t.target.value,this.dispatchEvent(new CustomEvent("accumulable-control-duration",{detail:{duration:this.duration},bubbles:!0}))}setCoherence(t){this.coherence=t.target.value,this.dispatchEvent(new CustomEvent("accumulable-control-coherence",{detail:{coherence:this.coherence},bubbles:!0}))}chooseColor(t){this.color=t.target.value,this.dispatchEvent(new CustomEvent("accumulable-control-color",{detail:{color:this.color},bubbles:!0}))}doRun(){this.state="running",this.dispatchEvent(new CustomEvent("accumulable-control-run",{detail:{},bubbles:!0}))}doPause(){this.state="paused",this.dispatchEvent(new CustomEvent("accumulable-control-pause",{detail:{},bubbles:!0}))}doReset(){this.state="resetted",this.dispatchEvent(new CustomEvent("accumulable-control-reset",{detail:{},bubbles:!0}))}complete(){this.state="ended"}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;
        }

        .holder {
          display: flex;

          flex-direction: row;

          align-items: stretch;
          justify-content: center;
        }

        .buttons {
          display: flex;

          flex-direction: column;

          align-items: stretch;
          justify-content: center;
        }
      `]}render(){return x$3`
      <div class="holder">
        ${null!=this.trials?x$3`<decidables-slider class="trials" min="1" max="100" step="1" .value=${this.trials} @change=${this.setTrials.bind(this)} @input=${this.setTrials.bind(this)}>Trials</decidables-slider>`:x$3``}
        ${this.resample?x$3`
            <div class="buttons">
              ${this.resample?x$3`<decidables-button name="resample" @click=${this.doResample.bind(this)}>Resample</decidables-button>`:x$3``}
            </div>
          `:x$3``}
        ${null!=this.duration?x$3`<decidables-slider class="duration" min="10" max="2000" step="10" .value=${this.duration} @change=${this.setDuration.bind(this)} @input=${this.setDuration.bind(this)}>Duration</decidables-slider>`:x$3``}
        ${null!=this.coherence?x$3`<decidables-slider class="coherence" min="0" max="1" step=".01" .value=${this.coherence} @change=${this.setCoherence.bind(this)} @input=${this.setCoherence.bind(this)}>Coherence</decidables-slider>`:x$3``}
        ${null!=this.color?x$3`
            <decidables-toggle class="color" @change=${this.chooseColor.bind(this)}>
              <span slot="label">Emphasis</span>
              <decidables-toggle-option name="toggle" value="none" ?checked=${"none"===this.color}>None</decidables-toggle-option>
              <decidables-toggle-option name="toggle" value="measure" ?checked=${"measure"===this.color}>Measure</decidables-toggle-option>
              <decidables-toggle-option name="toggle" value="outcome" ?checked=${"outcome"===this.color}>Outcome</decidables-toggle-option>
              <decidables-toggle-option name="toggle" value="all" ?checked=${"all"===this.color}>All</decidables-toggle-option>
            </decidables-toggle>
          `:x$3``}
        ${this.run||this.pause||this.reset?x$3`
            <div class="buttons">
              ${this.run?x$3`<decidables-button name="run" ?disabled=${"running"===this.state||"ended"===this.state} @click=${this.doRun.bind(this)}>Run</decidables-button>`:x$3``}
              ${this.pause?x$3`<decidables-button name="pause" ?disabled=${"running"!==this.state} @click=${this.doPause.bind(this)}>Pause</decidables-button>`:x$3``}
              ${this.reset?x$3`<decidables-button name="reset" ?disabled=${"resetted"===this.state} @click=${this.doReset.bind(this)}>Reset</decidables-button>`:x$3``}
            </div>
          `:x$3``}
      </div>`}}customElements.define("accumulable-control",AccumulableControl);class DDMMath{static s={DEFAULT:1};static a={DEFAULT:1.2,MIN:.01,MAX:2,STEP:.01,JUMP:.1};static z={DEFAULT:.55,MIN:.01,MAX:.99,STEP:.01,JUMP:.1};static v={DEFAULT:1.5,MIN:.01,MAX:5,STEP:.01,JUMP:.1};static t0={DEFAULT:150,MIN:0,MAX:500,STEP:1,JUMP:10};static trials2stats(t){const s={},e=t.reduce((t,s)=>{switch(s.outcome){case"correct":t.correctCount+=1,t.correctRTSum+=s.rt;break;case"error":t.errorCount+=1,t.errorRTSum+=s.rt;break;case"nr":t.nrCount+=1}return t},{correctCount:0,errorCount:0,nrCount:0,correctRTSum:0,errorRTSum:0});s.correctCount=e.correctCount,s.errorCount=e.errorCount,s.nrCount=e.nrCount,s.accuracy=e.correctCount/(e.correctCount+e.errorCount+e.nrCount),s.correctMeanRT=e.correctRTSum/e.correctCount,s.errorMeanRT=e.errorRTSum/e.errorCount,s.meanRT=(e.correctRTSum+e.errorRTSum)/(e.correctCount+e.errorCount);const B=t.reduce((t,e)=>{switch(e.outcome){case"correct":t.ss+=(e.rt-s.meanRT)**2,t.correctSS+=(e.rt-s.correctMeanRT)**2;break;case"error":t.ss+=(e.rt-s.meanRT)**2,t.errorSS+=(e.rt-s.errorMeanRT)**2}return t},{ss:0,correctSS:0,errorSS:0});return s.correctSDRT=s.correctCount>1?Math.sqrt(B.correctSS/(s.correctCount-1)):NaN,s.errorSDRT=s.errorCount>1?Math.sqrt(B.errorSS/(s.errorCount-1)):NaN,s.sdRT=s.correctCount+s.errorCount>1?Math.sqrt(B.ss/(s.correctCount+s.errorCount-1)):NaN,s}static azv2pE(t,s,e,B=DDMMath.s.DEFAULT){const i=t*s,F=Math.exp(-2*e*t/B**2);return(F-Math.exp(-2*e*i/B**2))/(F-1)}static azv2pC(t,s,e,B=DDMMath.s.DEFAULT){return DDMMath.azv2pE(t,1-s,-e,B)}static azvt02m(t,s,e,B,i=DDMMath.s.DEFAULT){const F=t*s,Q=Math.exp(-2*e*t/i**2)-1;return B+1e3*(-F/e+t/e*((Math.exp(-2*e*F/i**2)-1)/Q))}static azv2sd(t,s,e,B=DDMMath.s.DEFAULT){const i=t*s,F=Math.exp(-2*e*t/B**2)-1,Q=Math.exp(-2*e*i/B**2)-1,l=(-e*t**2*(Q+4)*Q/F**2+((-3*e*t**2+4*e*i*t+B**2*t)*Q+4*e*i*t)/F-B**2*i)/e**3;return 1e3*Math.sqrt(l)}static azvt02mE(t,s,e,B,i=DDMMath.s.DEFAULT){function F(t,s){return Math.exp(2*e*s/i**2)-Math.exp(2*e*t/i**2)}const Q=t*s;return B+1e3*((Q*(F(Q-t,t)+F(0,Q))+2*t*F(Q,0))/(e*F(Q,t)*F(-t,0)))}static azv2sdE(t,s,e,B=DDMMath.s.DEFAULT){function i(t,s){return Math.exp(2*e*s/B**2)-Math.exp(2*e*t/B**2)}const F=t*s,Q=-2*t*i(0,F)*(2*e*t*i(F,2*t)+B**2*i(0,t)*i(F,t))*Math.exp(2*e*t/B**2)/(e**3*i(0,t)**2*i(F,t)**2)+(4*e*F*(2*t-F)*Math.exp(2*e*(F+t)/B**2)+F*B**2*i(2*F,2*t))/(e**3*i(F,t)**2);return 1e3*Math.sqrt(Q)}static azvt02mC(t,s,e,B,i=DDMMath.s.DEFAULT){return DDMMath.azvt02mE(t,1-s,-e,B,i)}static azv2sdC(t,s,e,B=DDMMath.s.DEFAULT){return DDMMath.azv2sdE(t,1-s,-e,B)}static tazv2gE(t,s,e,B,i=DDMMath.s.DEFAULT){if(!t)return 0;const F=s*e,Q=Math.PI*i**2/s**2*Math.exp(-F*B/i**2);let l=0,U=0,a=0;do{l+=1,U=l*Math.sin(Math.PI*F*l/s)*Math.exp(-.5*(B**2/i**2+Math.PI**2*l**2*i**2/s**2)*t),a+=U}while(l<200);return Q*a}static tazv2gC(t,s,e,B,i=DDMMath.s.DEFAULT){return DDMMath.tazv2gE(t,s,1-e,-B,i)}static data2ez({accuracy:t,sdRT:s,meanRT:e,s:B}){function i(t){return Math.log(t/(1-t))}const F=(s/1e3)**2,Q=e/1e3,l=B**2,U=i(t),a=U*(U*t**2-U*t+t-.5)/F,g=function(t){return t>0?1:0===t?0:-1}(t-.5)*B*a**(1/4),I=l*i(t)/g,c=-g*I/l,n=I/(2*g)*(1-Math.exp(c))/(1+Math.exp(c));return{v:g,a:I,t0:1e3*(Q?Q-n:null),s:B}}static data2ez2(){throw new Error("data2ez2 is not implemented!")}}class AccumulableResponse extends AccumulableElement{static get properties(){return{feedback:{attribute:"feedback",type:Boolean,reflect:!0},trial:{attribute:"trial",type:Boolean,reflect:!0},payoff:{attribute:"payoff",type:String,reflect:!0},correctPayoff:{attribute:"correct-payoff",type:Number,reflect:!0},errorPayoff:{attribute:"error-payoff",type:Number,reflect:!0},nrPayoff:{attribute:"no-response-payoff",type:Number,reflect:!0},state:{attribute:!1,type:String,reflect:!1},trialCount:{attribute:!1,type:Number,reflect:!1},trialTotal:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.feedback=!1,this.trial=!1,this.payoffs=["none","trial","total"],this.payoff="none",this.correctPayoff=0,this.errorPayoff=0,this.nrPayoff=0,this.states=["off","waiting","feedback"],this.state="off",this.trialCount=0,this.trialTotal=0,this.signals=["left","right"],this.signal=void 0,this.responses=["left","right"],this.response=void 0,this.outcomes=["correct","error","nr"],this.outcome=void 0,this.startTime=void 0,this.rt=void 0,this.data={},this.trials=[],this.alignState()}get trialPayoff(){switch(this.outcome){case"correct":return this.correctPayoff;case"error":return this.errorPayoff;case"nr":return this.nrPayoff;default:return}}get totalPayoff(){return this.data.correctCount*this.correctPayoff+this.data.errorCount*this.errorPayoff+this.data.nrCount*this.nrPayoff}alignState(){this.data=DDMMath.trials2stats(this.trials)}start(t,s){this.startTime=Date.now(),this.trialCount=s,this.state="waiting",this.signal=t,this.response=void 0,this.outcome=void 0,this.rt=void 0}stop(){this.state="feedback",void 0===this.response&&(this.outcome="nr",this.rt=void 0,this.trials.push({trial:this.trialCount,rt:this.rt,signal:this.signal,response:this.response,outcome:this.outcome,payoff:this.trialPayoff}),this.alignState())}left(){this.responded("left")}right(){this.responded("right")}responded(t){this.rt=Date.now()-this.startTime,this.state="feedback",this.response=t,this.signal===this.response?this.outcome="correct":this.signal!==this.response&&(this.outcome="error"),this.trials.push({trial:this.trialCount,rt:this.rt,signal:this.signal,response:this.response,outcome:this.outcome,payoff:this.trialPayoff}),this.alignState(),this.dispatchEvent(new CustomEvent("accumulable-response",{detail:{trial:this.trialCount,rt:this.rt,signal:this.signal,response:this.response,outcome:this.outcome,payoff:this.trialPayoff,data:this.data,totalPayoff:this.totalPayoff},bubbles:!0}))}reset(){this.state="off",this.trialCount=0,this.rt=void 0,this.signal=void 0,this.response=void 0,this.outcome=void 0,this.trials=[],this.alignState()}keydown(t){"waiting"===this.state&&("ArrowLeft"===t.key?(this.responded("left"),t.preventDefault()):"ArrowRight"===t.key&&(this.responded("right"),t.preventDefault()))}connectedCallback(){super.connectedCallback(),window.addEventListener("keydown",this.keydown.bind(this))}disconnectedCallback(){window.removeEventListener("keydown",this.keydown.bind(this)),super.disconnectedCallback()}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;
        }

        /* Overall container */
        .holder {
          display: flex;

          flex-direction: column;
        }

        /* Response buttons */
        .responses {
          display: flex;

          flex-direction: row;

          align-items: stretch;
          justify-content: center;
        }

        .response {
          flex: 1 0 50%;
        }

        .waiting[disabled] {
          --decidables-button-background-color: var(---color-element-enabled);
        }

        .selected[disabled][name="left"] {
          --decidables-button-background-color: var(---color-left);
        }

        .selected[disabled][name="right"] {
          --decidables-button-background-color: var(---color-right);
        }

        /* Feedback messages */
        .feedbacks {
          display: flex;

          flex-direction: column;

          align-items: center;

          margin: 0.25rem;
        }

        /* Trial feedback */
        .trial {
          text-align: center;
        }

        .trial .label {
          font-weight: 600;
        }

        /* Outcome feedback */
        .feedback {
          display: flex;

          flex-direction: column;

          align-items: center;
          justify-content: center;

          width: 6rem;
          height: 3.5rem;
          padding: 0.375rem 0.75rem;
          margin: 0.25rem;

          text-align: center;

          background-color: var(---color-element-background);
          border: 1px solid var(---color-element-border);
        }

        :host([payoff="trial"]) .feedback,
        :host([payoff="total"]) .feedback {
          height: 5rem;
        }

        .feedback.correct {
          background-color: var(---color-correct-light);
        }

        .feedback.error {
          background-color: var(---color-error-light);
        }

        .feedback.nr {
          background-color: var(---color-nr-light);
        }

        .feedback .outcome {
          font-weight: 600;
          line-height: 1.15;
        }

        /* Payoff feedback */
        .total {
          text-align: center;
        }

        .total .label {
          font-weight: 600;
        }
      `]}render(){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),s=s=>t.formatToParts(s).map(({type:t,value:s})=>"minusSign"===t?"â":s).reduce((t,s)=>t+s);return x$3`
      <div class="holder">
        <div class="responses">
          <decidables-button name="left" class=${"response "+("feedback"===this.state&&"left"===this.response?"selected":"waiting"===this.state?"waiting":"")} ?disabled=${"waiting"!==this.state||!0!==this.interactive} @click=${this.left.bind(this)}>Left</decidables-button>
          <decidables-button name="right" class=${"response "+("feedback"===this.state&&"right"===this.response?"selected":"waiting"===this.state?"waiting":"")} ?disabled=${"waiting"!==this.state||!0!==this.interactive} @click=${this.right.bind(this)}>Right</decidables-button>
        </div>
        ${this.trial||this.feedback||"total"===this.payoff?x$3`
            <div class="feedbacks">
              ${this.trial?x$3`
                  <div class="trial">
                    <span class="label">Trial: </span><span class="count">${this.trialCount}</span><span class="of"> of </span><span class="total">${this.trialTotal}</span>
                  </div>`:x$3``}
              ${this.feedback?x$3`
                  <div class=${`feedback ${"feedback"===this.state&&this.feedback?this.outcome:""}`}>
                    ${"feedback"===this.state&&this.feedback?"correct"===this.outcome?x$3`<span class="outcome">Correct</span>`:"error"===this.outcome?x$3`<span class="outcome">Error</span>`:x$3`<span class="outcome">No<br>Response</span>`:""}
                    ${"feedback"!==this.state||"trial"!==this.payoff&&"total"!==this.payoff?x$3``:x$3`<span class="payoff">${s(this.trialPayoff)}</span>`}
                  </div>`:x$3``}
              ${"total"===this.payoff?x$3`
                  <div class="total">
                    <span class="label">Total: </span><span class="value">${s(this.totalPayoff)}</span>
                  </div>`:x$3``}
            </div>`:x$3``}
      </div>`}}customElements.define("accumulable-response",AccumulableResponse);class AccumulableTable extends AccumulableElement{static get properties(){return{numeric:{attribute:"numeric",type:Boolean,reflect:!0},summary:{attribute:"summary",type:Boolean,reflect:!0},color:{attribute:"color",type:String,reflect:!0},correctCount:{attribute:"correct-count",type:Number,reflect:!0},errorCount:{attribute:"error-count",type:Number,reflect:!0},nrCount:{attribute:"nr-count",type:Number,reflect:!0},accuracy:{attribute:"accuracy",type:Number,reflect:!0},correctMeanRT:{attribute:"correct-mean-rt",type:Number,reflect:!0},errorMeanRT:{attribute:"error-mean-rt",type:Number,reflect:!0},meanRT:{attribute:"mean-rt",type:Number,reflect:!0},correctSDRT:{attribute:"correct-sd-rt",type:Number,reflect:!0},errorSDRT:{attribute:"error-sd-rt",type:Number,reflect:!0},sdRT:{attribute:"sd-rt",type:Number,reflect:!0},payoff:{attribute:"payoff",type:Boolean,reflect:!0},correctPayoff:{attribute:"correct-payoff",type:Number,reflect:!0},errorPayoff:{attribute:"error-payoff",type:Number,reflect:!0},nrPayoff:{attribute:"no-response-payoff",type:Number,reflect:!0}}}constructor(){super(),this.numeric=!1,this.summary=!1,this.colors=["none","measure","outcome","all"],this.color="all",this.payoff=!1,this.correctPayoff=void 0,this.errorPayoff=void 0,this.nrPayoff=void 0,this.correctCount=NaN,this.errorCount=NaN,this.nrCount=NaN,this.accuracy=NaN,this.correctMeanRT=NaN,this.errorMeanRT=NaN,this.meanRT=NaN,this.correctSDRT=NaN,this.errorSDRT=NaN,this.sdRT=NaN}sendEvent(){this.dispatchEvent(new CustomEvent("accumulable-table-change",{detail:{correctCount:this.correctCount,errorCount:this.errorCount,nrCount:this.nrCount,accuracy:this.accuracy,correctMeanRT:this.correctMeanRT,errorMeanRT:this.errorMeanRT,meanRT:this.meanRT,correctSDRT:this.correctSDRT,errorSDRT:this.errorSDRT,sdRT:this.sdRT},bubbles:!0}))}correctCountInput(t){this.correctCount=parseInt(t.target.value,10),this.sendEvent()}errorCountInput(t){this.errorCount=parseInt(t.target.value,10),this.sendEvent()}accuracyInput(t){this.accuracy=parseFloat(t.target.value),this.sendEvent()}correctMeanRTInput(t){this.correctMeanRT=parseFloat(t.target.value),this.sendEvent()}errorMeanRTInput(t){this.errorMeanRT=parseFloat(t.target.value),this.sendEvent()}meanRTInput(t){this.meanRT=parseFloat(t.target.value),this.sendEvent()}correctSDRTInput(t){this.correctSDRT=parseFloat(t.target.value),this.sendEvent()}errorSDRTInput(t){this.errorSDRT=parseFloat(t.target.value),this.sendEvent()}sdRTInput(t){this.sdRT=parseFloat(t.target.value),this.sendEvent()}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;
        }

        /* Overall element */
        table {
          text-align: center;

          border-collapse: collapse;

          border: 0;
        }

        /* Headers */
        .th-main {
          padding: 0;

          font-weight: bold;
        }

        .th-sub {
          padding: 0 0.25rem;

          font-weight: 600;
        }

        .th-left {
          padding-left: 0;

          text-align: right;
        }

        /* Cells */
        .td {
          width: 10rem;

          padding: 0.25rem 0.25rem 0.375rem;

          transition: all var(---transition-duration) ease;
        }

        .numeric .td {
          width: 7rem;
        }

        /* Labels */
        .payoff {
          font-weight: 600;
          line-height: 0.75rem;
        }

        /* User interaction <input> */
        .td-data decidables-spinner {
          --decidables-spinner-input-width: 3.5rem;
        }

        .td-summary decidables-spinner {
          --decidables-spinner-input-width: 4.5rem;
        }

        /* Table emphasis */
        .td-data.correct {
          border-left: 2px solid var(---color-element-emphasis);
        }

        .td-data.error {
          border-right: 2px solid var(---color-element-emphasis);
        }

        .td-data.count {
          border-top: 2px solid var(---color-element-emphasis);
        }

        .td-data.sd-rt {
          border-bottom: 2px solid var(---color-element-emphasis);
        }

        /* Color schemes */

        /* (Default) All color scheme */
        .correct.count {
          background: var(---color-element-background); /* ###### */
        }

        .error.count {
          background: var(---color-element-background); /* ###### */
        }

        .overall.proportion-correct {
          background: var(---color-element-background); /* ###### */
        }

        .correct.mean-rt {
          background: var(---color-element-background); /* ###### */
        }

        .error.mean-rt {
          background: var(---color-element-background); /* ###### */
        }

        .overall.mean-rt {
          background: var(---color-element-background); /* ###### */
        }

        .correct.sd-rt {
          background: var(---color-element-background); /* ###### */
        }

        .error.sd-rt {
          background: var(---color-element-background); /* ###### */
        }

        .overall.sd-rt {
          background: var(---color-element-background); /* ###### */
        }

        /* Outcome color scheme */
        :host([color="outcome"]) .correct {
          background: var(---color-correct-light);
        }

        :host([color="outcome"]) .error {
          background: var(---color-error-light);
        }

        :host([color="outcome"]) .overall {
          background: var(---color-element-background);
        }

        /* Measure color scheme */
        :host([color="measure"]) .count,
        :host([color="measure"]) .proportion-correct {
          background: var(---color-element-background); /* ###### */
        }

        :host([color="measure"]) .mean-rt {
          background: var(---color-element-background); /* ###### */
        }

        :host([color="measure"]) .sd-rt {
          background: var(---color-element-background); /* ###### */
        }

        /* No color scheme */
        :host([color="none"]) .td-data,
        :host([color="none"]) .td-summary {
          background: var(---color-element-background);
        }
      `]}render(){const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),s=s=>t.formatToParts(s).map(({type:t,value:s})=>"minusSign"===t?"â":s).reduce((t,s)=>t+s);let e,B,i,F,Q,l,U,a,g;return this.numeric?(e=x$3`
        <decidables-spinner ?disabled=${!this.interactive} min="0" .value="${+this.correctCount}" @input=${this.correctCountInput.bind(this)}>
          <span>Correct Count</span>
          ${this.payoff?x$3`<span class="payoff">${s(this.correctPayoff)}</span>`:x$3``}
        </decidables-spinner>
      `,B=x$3`
        <decidables-spinner ?disabled=${!this.interactive} min="0" .value="${+this.errorCount}" @input=${this.errorCountInput.bind(this)}>
          <span>Error Count</span>
          ${this.payoff?x$3`<span class="payoff">${s(this.errorPayoff)}</span>`:x$3``}
        </decidables-spinner>
      `,i=x$3`
        <decidables-spinner ?disabled=${!this.interactive} min="0" max="1" step=".01" .value="${+this.accuracy.toFixed(2)}" @input=${this.accuracyInput.bind(this)}>
          <span>Accuracy</span>
        </decidables-spinner>
        `,F=x$3`
        <decidables-spinner ?disabled=${!this.interactive} min="0" .value="${+this.correctMeanRT.toFixed(0)}" @input=${this.correctMeanRTInput.bind(this)}>
          <span>Correct Mean RT</span>
        </decidables-spinner>
      `,Q=x$3`
        <decidables-spinner ?disabled=${!this.interactive} min="0" .value="${+this.errorMeanRT.toFixed(0)}" @input=${this.errorMeanRTInput.bind(this)}>
          <span>Error Mean RT</span>
        </decidables-spinner>
      `,l=x$3`
        <decidables-spinner ?disabled=${!this.interactive} min="0" .value="${+this.meanRT.toFixed(0)}" @input=${this.meanRTInput.bind(this)}>
          <span>Mean RT</span>
        </decidables-spinner>
      `,U=x$3`
        <decidables-spinner ?disabled=${!this.interactive} min="0" .value="${+this.correctSDRT.toFixed(0)}" @input=${this.correctSDRTInput.bind(this)}>
          <span>Correct SD RT</span>
        </decidables-spinner>
      `,a=x$3`
        <decidables-spinner ?disabled=${!this.interactive} min="0" .value="${+this.errorSDRT.toFixed(0)}" @input=${this.errorSDRTInput.bind(this)}>
          <span>Error SD RT</span>
        </decidables-spinner>
      `,g=x$3`
        <decidables-spinner ?disabled=${!this.interactive} min="0" .value="${+this.sdRT.toFixed(0)}" @input=${this.sdRTInput.bind(this)}>
          <span>SD RT</span>
        </decidables-spinner>
      `):(e=x$3`<span>Correct Count</span>
        ${this.payoff?x$3`<span class="payoff">${s(this.correctPayoff)}</span>`:x$3``}`,B=x$3`<span>Error Count</span>
        ${this.payoff?x$3`<span class="payoff">${s(this.errorPayoff)}</span>`:x$3``}`,i=x$3`<span>Accuracy</span>`,F=x$3`<span>Correct Mean RT</span>`,Q=x$3`<span>Error Mean RT</span>`,l=x$3`<span>Mean RT</span>`,U=x$3`<span>Correct SD RT</span>`,a=x$3`<span>Error SD RT</span>`,g=x$3`<span>SD RT</span>`),x$3`
      <table class=${this.numeric?"numeric":""}>
        <thead>
          <tr>
            <th rowspan="2"></th>
            <th class="th th-main" colspan="2" scope="col">
              Outcome
            </th>
          </tr>
          <tr>
            <th class="th th-sub" scope="col">
              Correct
            </th>
            <th class="th th-sub" scope="col">
              Error
            </th>
            ${this.summary?x$3`
                <th class="th th-main" scope="col">
                  Overall
                </th>`:x$3``}
          </tr>
        </thead>
        <tbody>
          <tr>
            <th class="th th-sub th-left" scope="row">
              Count
            </th>
            <td class="td td-data correct count">
              ${e}
            </td>
            <td class="td td-data error count">
              ${B}
            </td>
            ${this.summary?x$3`
                <td class="td td-summary overall proportion-correct">
                  ${i}
                </td>`:x$3``}
          </tr>
          <tr>
            <th class="th th-sub th-left" scope="row">
              Mean RT
            </th>
            <td class="td td-data correct mean-rt">
              ${F}
            </td>
            <td class="td td-data error mean-rt">
              ${Q}
            </td>
            ${this.summary?x$3`
                <td class="td td-summary overall mean-rt">
                  ${l}
                </td>`:x$3``}
          </tr>
          <tr>
            <th class="th th-sub th-left" scope="row">
              SD RT
            </th>
            <td class="td td-data correct sd-rt">
              ${U}
            </td>
            <td class="td td-data error sd-rt">
              ${a}
            </td>
            ${this.summary?x$3`
                <td class="td td-summary overall sd-rt">
                  ${g}
                </td>`:x$3``}
          </tr>
        </tbody>
      </table>`}}customElements.define("accumulable-table",AccumulableTable);var WorkerFactory=createBase64WorkerFactory("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoKICAgIERETU1hdGggU3RhdGljIENsYXNzIC0gTm90IGludGVuZGVkIGZvciBpbnN0YW50aWF0aW9uIQoKICAgIE1vZGVsIHBhcmFtZXRlcnM6CiAgICAgIGEgPSBib3VuZGFyeSBzZXBhcmF0aW9uIFswLCBJbmZpbml0eSkKICAgICAgeiA9IHN0YXJ0aW5nIHBvaW50IGFzIGEgcHJvcG9ydGlvbiBvZiBhICgwLCAxKQogICAgICB2ID0gZHJpZnQgcmF0ZSAocGVyIHNlY29uZCkgKC1JbmZpbml0eSwgSW5maW5pdHkpCiAgICAgIHQwID0gbm9uLWRlY2lzaW9uIHRpbWUgKGluIG1pbGxpc2Vjb25kcykgKDAsIEluZmluaXR5KQogICAgICBzID0gd2l0aGluLXRyaWFsIHZhcmlhYmlsaXR5IGluIGRyaWZ0IHJhdGUgKHNeMiA9IGluZmluaXRlc2ltYWwgdmFyaWFuY2UpIFswLCBJbmZpbml0eSkKCiAgICAgIHpQcmltZSA9IHN0YXJ0aW5nIHBvaW50IG9uIGEgMC10by1hIHNjYWxlICh0eXBpY2FsbHkgdXNlZCBpbiBwdWJsaXNoZWQgZXF1YXRpb25zKSBbMCwgSW5maW5pdHkpCgogICAgQmVoYXZpb3JhbCB2YXJpYWJsZXM6CiAgICAgIHBFID0gcHJvcG9ydGlvbiBvZiBlcnJvciB0cmlhbHMKICAgICAgcEMgPSBwcm9wb3J0aW9uIG9mIGNvcnJlY3QgdHJpYWxzCiAgICAgIG0gPSBtZWFuIG9mIG92ZXJhbGwgUlRzIChpbiBtaWxsaXNlY29uZHMpCiAgICAgIG1FID0gbWVhbiBvZiBlcnJvciBSVHMgKGluIG1pbGxpc2Vjb25kcykKICAgICAgbUMgPSBtZWFuIGNvcnJlY3QgUlRzIChpbiBtaWxsaXNlY29uZHMpCiAgICAgIHNkID0gc3RhbmRhcmQgZGV2aWF0aW9uIG9mIG92ZXJhbGwgUlRzIChpbiBtaWxsaXNlY29uZHMpCiAgICAgIHNkRSA9IHN0YW5kYXJkIGRldmlhdGlvbiBvZiBlcnJvciBSVHMgKGluIG1pbGxpc2Vjb25kcykKICAgICAgc2RDID0gc3RhbmRhcmQgZGV2aWF0aW9uIG9mIGNvcnJlY3QgUlRzIChpbiBtaWxsaXNlY29uZHMpCgogICAgRXF1YXRpb25zOgogICAgICBQcm9iYWJpbGl0eSBvZiBjb3JyZWN0IGFuZCBlcnJvciByZXNwb25zZXMgKEFsZXhhbmRyb3dpY3osIDIwMjApCiAgICAgIE1lYW4gb2Ygb3ZlcmFsbCwgZXJyb3IsIGFuZCBjb3JyZWN0IFJUcyAoR3Jhc21hbiBldCBhbC4sIDIwMDkpCiAgICAgIFN0YW5kYXJkIGRldmlhdGlvbiBvZiBvdmVyYWxsLCBlcnJvciwgYW5kIGNvcnJlY3QgUlRzIChHcmFzbWFuIGV0IGFsLiwgMjAwOSkKICAgICAgRGVuc2l0eSBvZiBlcnJvciBhbmQgY29ycmVjdCBSVCBkaXN0cmlidXRpb25zIChBbGV4YW5kcm93aWN6LCAyMDIwKQogICAgICBFWi1kaWZmdXNpb24gbW9kZWwgKFdhZ2VubWFrZXJzIGV0IGFsLiwgMjAwNykKICAqLwogIGNsYXNzIERETU1hdGggewogICAgc3RhdGljIHMgPSB7CiAgICAgIERFRkFVTFQ6IDEKICAgIH07CiAgICBzdGF0aWMgYSA9IHsKICAgICAgREVGQVVMVDogMS4yLAogICAgICBNSU46IDAuMDEsCiAgICAgIE1BWDogMi4wLAogICAgICBTVEVQOiAwLjAxLAogICAgICBKVU1QOiAwLjEKICAgIH07CiAgICBzdGF0aWMgeiA9IHsKICAgICAgREVGQVVMVDogMC41NSwKICAgICAgTUlOOiAwLjAxLAogICAgICBNQVg6IDAuOTksCiAgICAgIFNURVA6IDAuMDEsCiAgICAgIEpVTVA6IDAuMQogICAgfTsKICAgIHN0YXRpYyB2ID0gewogICAgICBERUZBVUxUOiAxLjUsCiAgICAgIE1JTjogMC4wMSwKICAgICAgTUFYOiA1LjAsCiAgICAgIFNURVA6IDAuMDEsCiAgICAgIEpVTVA6IDAuMQogICAgfTsKICAgIHN0YXRpYyB0MCA9IHsKICAgICAgREVGQVVMVDogMTUwLAogICAgICBNSU46IDAsCiAgICAgIE1BWDogNTAwLAogICAgICBTVEVQOiAxLAogICAgICBKVU1QOiAxMAogICAgfTsKCiAgICAvLyBDYWxjdWxhdGUgYSBidW5jaCBvZiBzdGF0aXN0aWNzIGZvciBhbiBhcnJheSBvZiB0cmlhbHMKICAgIHN0YXRpYyB0cmlhbHMyc3RhdHModHJpYWxzKSB7CiAgICAgIGNvbnN0IHN0YXRzID0ge307CgogICAgICAvLyBGaXJzdC1vcmRlciBzdW1zCiAgICAgIGNvbnN0IHN1bXMgPSB0cmlhbHMucmVkdWNlKChhY2N1bXVsYXRvciwgdHJpYWwpID0+IHsKICAgICAgICBzd2l0Y2ggKHRyaWFsLm91dGNvbWUpIHsKICAgICAgICAgIGNhc2UgJ2NvcnJlY3QnOgogICAgICAgICAgICBhY2N1bXVsYXRvci5jb3JyZWN0Q291bnQgKz0gMTsKICAgICAgICAgICAgYWNjdW11bGF0b3IuY29ycmVjdFJUU3VtICs9IHRyaWFsLnJ0OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJ2Vycm9yJzoKICAgICAgICAgICAgYWNjdW11bGF0b3IuZXJyb3JDb3VudCArPSAxOwogICAgICAgICAgICBhY2N1bXVsYXRvci5lcnJvclJUU3VtICs9IHRyaWFsLnJ0OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJ25yJzoKICAgICAgICAgICAgYWNjdW11bGF0b3IubnJDb3VudCArPSAxOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIC8vIE5vLW9wCiAgICAgICAgfQogICAgICAgIHJldHVybiBhY2N1bXVsYXRvcjsKICAgICAgfSwgewogICAgICAgIGNvcnJlY3RDb3VudDogMCwKICAgICAgICBlcnJvckNvdW50OiAwLAogICAgICAgIG5yQ291bnQ6IDAsCiAgICAgICAgY29ycmVjdFJUU3VtOiAwLAogICAgICAgIGVycm9yUlRTdW06IDAKICAgICAgfSk7CgogICAgICAvLyBGaXJzdC1vcmRlciBzdGF0cwogICAgICBzdGF0cy5jb3JyZWN0Q291bnQgPSBzdW1zLmNvcnJlY3RDb3VudDsKICAgICAgc3RhdHMuZXJyb3JDb3VudCA9IHN1bXMuZXJyb3JDb3VudDsKICAgICAgc3RhdHMubnJDb3VudCA9IHN1bXMubnJDb3VudDsKICAgICAgc3RhdHMuYWNjdXJhY3kgPSBzdW1zLmNvcnJlY3RDb3VudCAvIChzdW1zLmNvcnJlY3RDb3VudCArIHN1bXMuZXJyb3JDb3VudCArIHN1bXMubnJDb3VudCk7CiAgICAgIHN0YXRzLmNvcnJlY3RNZWFuUlQgPSBzdW1zLmNvcnJlY3RSVFN1bSAvIHN1bXMuY29ycmVjdENvdW50OwogICAgICBzdGF0cy5lcnJvck1lYW5SVCA9IHN1bXMuZXJyb3JSVFN1bSAvIHN1bXMuZXJyb3JDb3VudDsKICAgICAgc3RhdHMubWVhblJUID0gKHN1bXMuY29ycmVjdFJUU3VtICsgc3Vtcy5lcnJvclJUU3VtKSAvIChzdW1zLmNvcnJlY3RDb3VudCArIHN1bXMuZXJyb3JDb3VudCk7CgogICAgICAvLyBTZWNvbmQtb3JkZXIgc3VtcwogICAgICBjb25zdCBzdW1zMiA9IHRyaWFscy5yZWR1Y2UoKGFjY3VtdWxhdG9yLCB0cmlhbCkgPT4gewogICAgICAgIHN3aXRjaCAodHJpYWwub3V0Y29tZSkgewogICAgICAgICAgY2FzZSAnY29ycmVjdCc6CiAgICAgICAgICAgIGFjY3VtdWxhdG9yLnNzICs9ICh0cmlhbC5ydCAtIHN0YXRzLm1lYW5SVCkgKiogMjsKICAgICAgICAgICAgYWNjdW11bGF0b3IuY29ycmVjdFNTICs9ICh0cmlhbC5ydCAtIHN0YXRzLmNvcnJlY3RNZWFuUlQpICoqIDI7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAnZXJyb3InOgogICAgICAgICAgICBhY2N1bXVsYXRvci5zcyArPSAodHJpYWwucnQgLSBzdGF0cy5tZWFuUlQpICoqIDI7CiAgICAgICAgICAgIGFjY3VtdWxhdG9yLmVycm9yU1MgKz0gKHRyaWFsLnJ0IC0gc3RhdHMuZXJyb3JNZWFuUlQpICoqIDI7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgLy8gTm8tb3AKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yOwogICAgICB9LCB7CiAgICAgICAgc3M6IDAsCiAgICAgICAgY29ycmVjdFNTOiAwLAogICAgICAgIGVycm9yU1M6IDAKICAgICAgfSk7CgogICAgICAvLyBTZWNvbmQtb3JkZXIgc3RhdHMKICAgICAgc3RhdHMuY29ycmVjdFNEUlQgPSBzdGF0cy5jb3JyZWN0Q291bnQgPiAxID8gTWF0aC5zcXJ0KHN1bXMyLmNvcnJlY3RTUyAvIChzdGF0cy5jb3JyZWN0Q291bnQgLSAxKSkgOiBOYU47CiAgICAgIHN0YXRzLmVycm9yU0RSVCA9IHN0YXRzLmVycm9yQ291bnQgPiAxID8gTWF0aC5zcXJ0KHN1bXMyLmVycm9yU1MgLyAoc3RhdHMuZXJyb3JDb3VudCAtIDEpKSA6IE5hTjsKICAgICAgc3RhdHMuc2RSVCA9IHN0YXRzLmNvcnJlY3RDb3VudCArIHN0YXRzLmVycm9yQ291bnQgPiAxID8gTWF0aC5zcXJ0KHN1bXMyLnNzIC8gKHN0YXRzLmNvcnJlY3RDb3VudCArIHN0YXRzLmVycm9yQ291bnQgLSAxKSkgOiBOYU47CiAgICAgIHJldHVybiBzdGF0czsKICAgIH0KCiAgICAvLyBQcm9iYWJpbGl0eSBvZiBhbiBFcnJvciBSZXNwb25zZQogICAgc3RhdGljIGF6djJwRShhLCB6LCB2LCBzID0gRERNTWF0aC5zLkRFRkFVTFQpIHsKICAgICAgY29uc3QgelByaW1lID0gYSAqIHo7CiAgICAgIGNvbnN0IEEgPSBNYXRoLmV4cCgtMiAqIHYgKiBhIC8gcyAqKiAyKTsKICAgICAgY29uc3QgWiA9IE1hdGguZXhwKC0yICogdiAqIHpQcmltZSAvIHMgKiogMik7CiAgICAgIHJldHVybiAoQSAtIFopIC8gKEEgLSAxKTsKICAgIH0KCiAgICAvLyBQcm9iYWJpbGl0eSBvZiBhIENvcnJlY3QgUmVzcG9uc2UKICAgIHN0YXRpYyBhenYycEMoYSwgeiwgdiwgcyA9IERETU1hdGgucy5ERUZBVUxUKSB7CiAgICAgIHJldHVybiBERE1NYXRoLmF6djJwRShhLCAxIC0geiwgLXYsIHMpOwogICAgfQoKICAgIC8vIE1lYW4gT3ZlcmFsbCBSVAogICAgLy8gRXF1YXRpb24gNSAoR3Jhc21hbiBldCBhbC4sIDIwMDkpCiAgICBzdGF0aWMgYXp2dDAybShhLCB6LCB2LCB0MCwgcyA9IERETU1hdGgucy5ERUZBVUxUKSB7CiAgICAgIGNvbnN0IHpQcmltZSA9IGEgKiB6OwogICAgICBjb25zdCBBID0gTWF0aC5leHAoLTIgKiB2ICogYSAvIHMgKiogMikgLSAxOwogICAgICBjb25zdCBaID0gTWF0aC5leHAoLTIgKiB2ICogelByaW1lIC8gcyAqKiAyKSAtIDE7CiAgICAgIGNvbnN0IG1lYW4gPSAtKHpQcmltZSAvIHYpICsgYSAvIHYgKiAoWiAvIEEpOwogICAgICByZXR1cm4gdDAgKyBtZWFuICogMTAwMDsKICAgIH0KCiAgICAvLyBTRCBPdmVyYWxsIFJUCiAgICAvLyBFcXVhdGlvbiA2IChHcmFzbWFuIGV0IGFsLiwgMjAwOSkKICAgIHN0YXRpYyBhenYyc2QoYSwgeiwgdiwgcyA9IERETU1hdGgucy5ERUZBVUxUKSB7CiAgICAgIGNvbnN0IHpQcmltZSA9IGEgKiB6OwogICAgICBjb25zdCBBID0gTWF0aC5leHAoLTIgKiB2ICogYSAvIHMgKiogMikgLSAxOwogICAgICBjb25zdCBaID0gTWF0aC5leHAoLTIgKiB2ICogelByaW1lIC8gcyAqKiAyKSAtIDE7CiAgICAgIGNvbnN0IHZhcmlhbmNlID0gKC12ICogYSAqKiAyICogKFogKyA0KSAqIFogLyBBICoqIDIgKyAoKC0zICogdiAqIGEgKiogMiArIDQgKiB2ICogelByaW1lICogYSArIHMgKiogMiAqIGEpICogWiArIDQgKiB2ICogelByaW1lICogYSkgLyBBIC0gcyAqKiAyICogelByaW1lKSAvIHYgKiogMzsKICAgICAgcmV0dXJuIE1hdGguc3FydCh2YXJpYW5jZSkgKiAxMDAwOwogICAgfQoKICAgIC8vIE1lYW4gRXJyb3IgUlQKICAgIC8vIEVxdWF0aW9uIDEzIChHcmFzbWFuIGV0IGFsLiwgMjAwOSkKICAgIHN0YXRpYyBhenZ0MDJtRShhLCB6LCB2LCB0MCwgcyA9IERETU1hdGgucy5ERUZBVUxUKSB7CiAgICAgIGZ1bmN0aW9uIHBoaSh4LCB5KSB7CiAgICAgICAgcmV0dXJuIE1hdGguZXhwKDIgKiB2ICogeSAvIHMgKiogMikgLSBNYXRoLmV4cCgyICogdiAqIHggLyBzICoqIDIpOwogICAgICB9CiAgICAgIGNvbnN0IHpQcmltZSA9IGEgKiB6OwogICAgICBjb25zdCBtZWFuID0gKHpQcmltZSAqIChwaGkoelByaW1lIC0gYSwgYSkgKyBwaGkoMCwgelByaW1lKSkgKyAyICogYSAqIHBoaSh6UHJpbWUsIDApKSAvICh2ICogcGhpKHpQcmltZSwgYSkgKiBwaGkoLWEsIDApKTsKICAgICAgcmV0dXJuIHQwICsgbWVhbiAqIDEwMDA7CiAgICB9CgogICAgLy8gU0QgRXJyb3IgUlQKICAgIC8vIEVxdWF0aW9uIDE0IChHcmFzbWFuIGV0IGFsLiwgMjAwOSkKICAgIHN0YXRpYyBhenYyc2RFKGEsIHosIHYsIHMgPSBERE1NYXRoLnMuREVGQVVMVCkgewogICAgICBmdW5jdGlvbiBwaGkoeCwgeSkgewogICAgICAgIHJldHVybiBNYXRoLmV4cCgyICogdiAqIHkgLyBzICoqIDIpIC0gTWF0aC5leHAoMiAqIHYgKiB4IC8gcyAqKiAyKTsKICAgICAgfQogICAgICBjb25zdCB6UHJpbWUgPSBhICogejsKICAgICAgY29uc3QgdmFyaWFuY2UgPSAtMiAqIGEgKiBwaGkoMCwgelByaW1lKSAqICgyICogdiAqIGEgKiBwaGkoelByaW1lLCAyICogYSkgKyBzICoqIDIgKiBwaGkoMCwgYSkgKiBwaGkoelByaW1lLCBhKSkgKiBNYXRoLmV4cCgyICogdiAqIGEgLyBzICoqIDIpIC8gKHYgKiogMyAqIHBoaSgwLCBhKSAqKiAyICogcGhpKHpQcmltZSwgYSkgKiogMikgKyAoNCAqIHYgKiB6UHJpbWUgKiAoMiAqIGEgLSB6UHJpbWUpICogTWF0aC5leHAoMiAqIHYgKiAoelByaW1lICsgYSkgLyBzICoqIDIpICsgelByaW1lICogcyAqKiAyICogcGhpKDIgKiB6UHJpbWUsIDIgKiBhKSkgLyAodiAqKiAzICogcGhpKHpQcmltZSwgYSkgKiogMik7CiAgICAgIHJldHVybiBNYXRoLnNxcnQodmFyaWFuY2UpICogMTAwMDsKICAgIH0KCiAgICAvLyBNZWFuIENvcnJlY3QgUlQKICAgIHN0YXRpYyBhenZ0MDJtQyhhLCB6LCB2LCB0MCwgcyA9IERETU1hdGgucy5ERUZBVUxUKSB7CiAgICAgIHJldHVybiBERE1NYXRoLmF6dnQwMm1FKGEsIDEgLSB6LCAtdiwgdDAsIHMpOwogICAgfQoKICAgIC8vIFNEIENvcnJlY3QgUlQKICAgIHN0YXRpYyBhenYyc2RDKGEsIHosIHYsIHMgPSBERE1NYXRoLnMuREVGQVVMVCkgewogICAgICByZXR1cm4gRERNTWF0aC5henYyc2RFKGEsIDEgLSB6LCAtdiwgcyk7CiAgICB9CgogICAgLy8gRGVuc2l0eSBvZiBFcnJvciBSVAogICAgc3RhdGljIHRhenYyZ0UodCwgYSwgeiwgdiwgcyA9IERETU1hdGgucy5ERUZBVUxUKSB7CiAgICAgIGlmICghdCkgcmV0dXJuIDA7CiAgICAgIGNvbnN0IHpQcmltZSA9IGEgKiB6OwogICAgICBjb25zdCBiYXNlID0gTWF0aC5QSSAqIHMgKiogMiAvIGEgKiogMiAqIE1hdGguZXhwKC16UHJpbWUgKiB2IC8gcyAqKiAyKTsKICAgICAgbGV0IGsgPSAwOwogICAgICBsZXQgdGVybSA9IDA7CiAgICAgIGxldCBzdW0gPSAwOwogICAgICBkbyB7CiAgICAgICAgayArPSAxOwogICAgICAgIHRlcm0gPSBrICogTWF0aC5zaW4oTWF0aC5QSSAqIHpQcmltZSAqIGsgLyBhKSAqIE1hdGguZXhwKC0wLjUgKiAodiAqKiAyIC8gcyAqKiAyICsgTWF0aC5QSSAqKiAyICogayAqKiAyICogcyAqKiAyIC8gYSAqKiAyKSAqIHQpOwogICAgICAgIHN1bSArPSB0ZXJtOwogICAgICB9IHdoaWxlIChrIDwgMjAwKTsgLy8gPz8gSEFDSwoKICAgICAgcmV0dXJuIGJhc2UgKiBzdW07CiAgICB9CgogICAgLy8gRGVuc2l0eSBvZiBDb3JyZWN0IFJUCiAgICBzdGF0aWMgdGF6djJnQyh0LCBhLCB6LCB2LCBzID0gRERNTWF0aC5zLkRFRkFVTFQpIHsKICAgICAgcmV0dXJuIERETU1hdGgudGF6djJnRSh0LCBhLCAxIC0geiwgLXYsIHMpOwogICAgfQoKICAgIC8vIEFkYXB0ZWQgZnJvbSBodHRwczovL3Jhb3VsLnNvY3NjaS51dmEubmwvRVoyL0VaMl9uZXcuaHRtbAogICAgLy8gRVotZnVuY3Rpb24gZm9yIHN0YXJ0aW5nIHZhbHVlcwogICAgLy8gaW5wdXQ6IG9iaiAtIE9iamVjdCB3aXRoIHByb3BlcnRpZXMKICAgIC8vICAgIHBDIC0gUHJvcG9ydGlvbiBjb3JyZWN0CiAgICAvLyAgICBzZCAtIHNhbXBsZSBzdGFuZGFyZCBkZXZpYXRpb24gb2YgdGhlIFJUJ3MgaW4gbXMKICAgIC8vICAgIG0gLSBzYW1wbGUgbWVhbiBvZiB0aGUgUlQncyBpbiBtcwogICAgLy8gICAgcyAtIGRpZmZ1c2lvbiBzdGFuZGFyZCBkZXZpYXRpb24KICAgIC8vIHJldHVybnM6IE9iamVjdCB3aXRoIHByb3BlcnRpZXMgdiwgYSwgYW5kIHQwLCBjb250YWluaW5nIEVaLWVzdGltYXRlcyBvZiB0aGVzZSBwYXJhbWV0ZXJzCiAgICBzdGF0aWMgZGF0YTJleih7CiAgICAgIGFjY3VyYWN5OiBwQywKICAgICAgc2RSVDogc2QsCiAgICAgIG1lYW5SVDogbSwKICAgICAgcwogICAgfSkgewogICAgICBmdW5jdGlvbiBzaWduKHIpIHsKICAgICAgICByZXR1cm4gciA+IDAgPyAxIDogciA9PT0gMCA/IDAgOiAtMTsKICAgICAgfQogICAgICBmdW5jdGlvbiBsb2dpdChwKSB7CiAgICAgICAgcmV0dXJuIE1hdGgubG9nKHAgLyAoMSAtIHApKTsKICAgICAgfQogICAgICBjb25zdCB2cnQgPSAoc2QgLyAxMDAwKSAqKiAyOwogICAgICBjb25zdCBtcnQgPSBtIC8gMTAwMDsKICAgICAgY29uc3QgczIgPSBzICoqIDI7CiAgICAgIGNvbnN0IGwgPSBsb2dpdChwQyk7CiAgICAgIGNvbnN0IHggPSBsICogKGwgKiBwQyAqKiAyIC0gbCAqIHBDICsgcEMgLSAwLjUpIC8gdnJ0OwogICAgICBjb25zdCB2ID0gc2lnbihwQyAtIDAuNSkgKiBzICogeCAqKiAoMSAvIDQpOwogICAgICBjb25zdCBhID0gczIgKiBsb2dpdChwQykgLyB2OwogICAgICBjb25zdCB5ID0gLXYgKiBhIC8gczI7CiAgICAgIGNvbnN0IG1kdCA9IGEgLyAoMiAqIHYpICogKDEgLSBNYXRoLmV4cCh5KSkgLyAoMSArIE1hdGguZXhwKHkpKTsKICAgICAgY29uc3QgdDAgPSBtcnQgPyBtcnQgLSBtZHQgOiBudWxsOyAvLyBjb21wdXRlIFRlciBvbmx5IGlmIE1SVCB3YXMgcHJvdmlkZWQKCiAgICAgIGNvbnN0IHQwUHJpbWUgPSB0MCAqIDEwMDA7CiAgICAgIHJldHVybiB7CiAgICAgICAgdiwKICAgICAgICBhLAogICAgICAgIHQwOiB0MFByaW1lLAogICAgICAgIHMKICAgICAgfTsKICAgIH0KICAgIHN0YXRpYyBkYXRhMmV6MigpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdkYXRhMmV6MiBpcyBub3QgaW1wbGVtZW50ZWQhJyk7CiAgICB9CiAgfQoKICAvLyBJbnRlcm5hbCBkZXBlbmRlbmNpZXMKCiAgLyogZXNsaW50IG5vLXJlc3RyaWN0ZWQtZ2xvYmFsczogWyJvZmYiLCAic2VsZiJdICovCgogIHNlbGYub25tZXNzYWdlID0gZXZlbnQgPT4gewogICAgY29uc3QgcGFyYW1zID0gRERNTWF0aC5kYXRhMmV6KHsKICAgICAgLi4uZXZlbnQuZGF0YSwKICAgICAgczogRERNTWF0aC5zLkRFRkFVTFQKICAgIH0pOwoKICAgIC8vICMjIyMjIEFyYml0cmFyeSBkZWZhdWx0IHZhbHVlcyEhIQogICAgY29uc3QgYSA9ICFpc05hTihwYXJhbXMuYSkgPyBwYXJhbXMuYSA6IDEuNTsKICAgIGNvbnN0IHogPSAhaXNOYU4ocGFyYW1zLnopID8gcGFyYW1zLnogOiAwLjU7CiAgICBjb25zdCB2ID0gIWlzTmFOKHBhcmFtcy52KSA/IHBhcmFtcy52IDogMC4xOwogICAgY29uc3QgdDAgPSAhaXNOYU4ocGFyYW1zLnQwKSA/IHBhcmFtcy50MCA6IDEwMDsKICAgIGNvbnN0IHMgPSAhaXNOYU4ocGFyYW1zLnMpID8gcGFyYW1zLnMgOiBERE1NYXRoLnMuREVGQVVMVDsKICAgIGNvbnN0IHByZWRpY3RlZCA9IHsKICAgICAgYWNjdXJhY3k6IERETU1hdGguYXp2MnBDKGEsIHosIHYpLAogICAgICBjb3JyZWN0TWVhblJUOiBERE1NYXRoLmF6dnQwMm1DKGEsIHosIHYsIHQwKSwKICAgICAgZXJyb3JNZWFuUlQ6IERETU1hdGguYXp2dDAybUUoYSwgeiwgdiwgdDApLAogICAgICBtZWFuUlQ6IERETU1hdGguYXp2dDAybShhLCB6LCB2LCB0MCksCiAgICAgIGNvcnJlY3RTRFJUOiBERE1NYXRoLmF6djJzZEMoYSwgeiwgdiksCiAgICAgIGVycm9yU0RSVDogRERNTWF0aC5henYyc2RFKGEsIHosIHYpLAogICAgICBzZFJUOiBERE1NYXRoLmF6djJzZChhLCB6LCB2KQogICAgfTsKICAgIHNlbGYucG9zdE1lc3NhZ2UoewogICAgICBwYXJhbXM6IHsKICAgICAgICBhLAogICAgICAgIHosCiAgICAgICAgdiwKICAgICAgICB0MCwKICAgICAgICBzCiAgICAgIH0sCiAgICAgIHByZWRpY3RlZAogICAgfSk7CiAgfTsKCn0pKCk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWRkbS1maXQtd29ya2VyLmpzLm1hcAoK","data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGRtLWZpdC13b3JrZXIuanMiLCJzb3VyY2VzIjpbIi4uLy4uL2xpYnJhcmllcy9hY2N1bXVsYWJsZS1tYXRoL3NyYy9kZG0tbWF0aC5qcyIsIi4uLy4uL2xpYnJhcmllcy9hY2N1bXVsYWJsZS1tYXRoL3NyYy9pbmRleC5qcyIsIi4uLy4uL2xpYnJhcmllcy9hY2N1bXVsYWJsZS1lbGVtZW50cy9zcmMvY29tcG9uZW50cy9kZG0tZml0LXdvcmtlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbi8qXG4gIERETU1hdGggU3RhdGljIENsYXNzIC0gTm90IGludGVuZGVkIGZvciBpbnN0YW50aWF0aW9uIVxuXG4gIE1vZGVsIHBhcmFtZXRlcnM6XG4gICAgYSA9IGJvdW5kYXJ5IHNlcGFyYXRpb24gWzAsIEluZmluaXR5KVxuICAgIHogPSBzdGFydGluZyBwb2ludCBhcyBhIHByb3BvcnRpb24gb2YgYSAoMCwgMSlcbiAgICB2ID0gZHJpZnQgcmF0ZSAocGVyIHNlY29uZCkgKC1JbmZpbml0eSwgSW5maW5pdHkpXG4gICAgdDAgPSBub24tZGVjaXNpb24gdGltZSAoaW4gbWlsbGlzZWNvbmRzKSAoMCwgSW5maW5pdHkpXG4gICAgcyA9IHdpdGhpbi10cmlhbCB2YXJpYWJpbGl0eSBpbiBkcmlmdCByYXRlIChzXjIgPSBpbmZpbml0ZXNpbWFsIHZhcmlhbmNlKSBbMCwgSW5maW5pdHkpXG5cbiAgICB6UHJpbWUgPSBzdGFydGluZyBwb2ludCBvbiBhIDAtdG8tYSBzY2FsZSAodHlwaWNhbGx5IHVzZWQgaW4gcHVibGlzaGVkIGVxdWF0aW9ucykgWzAsIEluZmluaXR5KVxuXG4gIEJlaGF2aW9yYWwgdmFyaWFibGVzOlxuICAgIHBFID0gcHJvcG9ydGlvbiBvZiBlcnJvciB0cmlhbHNcbiAgICBwQyA9IHByb3BvcnRpb24gb2YgY29ycmVjdCB0cmlhbHNcbiAgICBtID0gbWVhbiBvZiBvdmVyYWxsIFJUcyAoaW4gbWlsbGlzZWNvbmRzKVxuICAgIG1FID0gbWVhbiBvZiBlcnJvciBSVHMgKGluIG1pbGxpc2Vjb25kcylcbiAgICBtQyA9IG1lYW4gY29ycmVjdCBSVHMgKGluIG1pbGxpc2Vjb25kcylcbiAgICBzZCA9IHN0YW5kYXJkIGRldmlhdGlvbiBvZiBvdmVyYWxsIFJUcyAoaW4gbWlsbGlzZWNvbmRzKVxuICAgIHNkRSA9IHN0YW5kYXJkIGRldmlhdGlvbiBvZiBlcnJvciBSVHMgKGluIG1pbGxpc2Vjb25kcylcbiAgICBzZEMgPSBzdGFuZGFyZCBkZXZpYXRpb24gb2YgY29ycmVjdCBSVHMgKGluIG1pbGxpc2Vjb25kcylcblxuICBFcXVhdGlvbnM6XG4gICAgUHJvYmFiaWxpdHkgb2YgY29ycmVjdCBhbmQgZXJyb3IgcmVzcG9uc2VzIChBbGV4YW5kcm93aWN6LCAyMDIwKVxuICAgIE1lYW4gb2Ygb3ZlcmFsbCwgZXJyb3IsIGFuZCBjb3JyZWN0IFJUcyAoR3Jhc21hbiBldCBhbC4sIDIwMDkpXG4gICAgU3RhbmRhcmQgZGV2aWF0aW9uIG9mIG92ZXJhbGwsIGVycm9yLCBhbmQgY29ycmVjdCBSVHMgKEdyYXNtYW4gZXQgYWwuLCAyMDA5KVxuICAgIERlbnNpdHkgb2YgZXJyb3IgYW5kIGNvcnJlY3QgUlQgZGlzdHJpYnV0aW9ucyAoQWxleGFuZHJvd2ljeiwgMjAyMClcbiAgICBFWi1kaWZmdXNpb24gbW9kZWwgKFdhZ2VubWFrZXJzIGV0IGFsLiwgMjAwNylcbiovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBERE1NYXRoIHtcbiAgc3RhdGljIHMgPSB7XG4gICAgREVGQVVMVDogMSxcbiAgfTtcblxuICBzdGF0aWMgYSA9IHtcbiAgICBERUZBVUxUOiAxLjIsXG4gICAgTUlOOiAwLjAxLFxuICAgIE1BWDogMi4wLFxuICAgIFNURVA6IDAuMDEsXG4gICAgSlVNUDogMC4xLFxuICB9O1xuXG4gIHN0YXRpYyB6ID0ge1xuICAgIERFRkFVTFQ6IDAuNTUsXG4gICAgTUlOOiAwLjAxLFxuICAgIE1BWDogMC45OSxcbiAgICBTVEVQOiAwLjAxLFxuICAgIEpVTVA6IDAuMSxcbiAgfTtcblxuICBzdGF0aWMgdiA9IHtcbiAgICBERUZBVUxUOiAxLjUsXG4gICAgTUlOOiAwLjAxLFxuICAgIE1BWDogNS4wLFxuICAgIFNURVA6IDAuMDEsXG4gICAgSlVNUDogMC4xLFxuICB9O1xuXG4gIHN0YXRpYyB0MCA9IHtcbiAgICBERUZBVUxUOiAxNTAsXG4gICAgTUlOOiAwLFxuICAgIE1BWDogNTAwLFxuICAgIFNURVA6IDEsXG4gICAgSlVNUDogMTAsXG4gIH07XG5cbiAgLy8gQ2FsY3VsYXRlIGEgYnVuY2ggb2Ygc3RhdGlzdGljcyBmb3IgYW4gYXJyYXkgb2YgdHJpYWxzXG4gIHN0YXRpYyB0cmlhbHMyc3RhdHModHJpYWxzKSB7XG4gICAgY29uc3Qgc3RhdHMgPSB7fTtcblxuICAgIC8vIEZpcnN0LW9yZGVyIHN1bXNcbiAgICBjb25zdCBzdW1zID0gdHJpYWxzLnJlZHVjZShcbiAgICAgIChhY2N1bXVsYXRvciwgdHJpYWwpID0+IHtcbiAgICAgICAgc3dpdGNoICh0cmlhbC5vdXRjb21lKSB7XG4gICAgICAgICAgY2FzZSAnY29ycmVjdCc6XG4gICAgICAgICAgICBhY2N1bXVsYXRvci5jb3JyZWN0Q291bnQgKz0gMTtcbiAgICAgICAgICAgIGFjY3VtdWxhdG9yLmNvcnJlY3RSVFN1bSArPSB0cmlhbC5ydDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgICAgICAgIGFjY3VtdWxhdG9yLmVycm9yQ291bnQgKz0gMTtcbiAgICAgICAgICAgIGFjY3VtdWxhdG9yLmVycm9yUlRTdW0gKz0gdHJpYWwucnQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICducic6XG4gICAgICAgICAgICBhY2N1bXVsYXRvci5uckNvdW50ICs9IDE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgLy8gTm8tb3BcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWNjdW11bGF0b3I7XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBjb3JyZWN0Q291bnQ6IDAsXG4gICAgICAgIGVycm9yQ291bnQ6IDAsXG4gICAgICAgIG5yQ291bnQ6IDAsXG5cbiAgICAgICAgY29ycmVjdFJUU3VtOiAwLFxuICAgICAgICBlcnJvclJUU3VtOiAwLFxuICAgICAgfSxcbiAgICApO1xuXG4gICAgLy8gRmlyc3Qtb3JkZXIgc3RhdHNcbiAgICBzdGF0cy5jb3JyZWN0Q291bnQgPSBzdW1zLmNvcnJlY3RDb3VudDtcbiAgICBzdGF0cy5lcnJvckNvdW50ID0gc3Vtcy5lcnJvckNvdW50O1xuICAgIHN0YXRzLm5yQ291bnQgPSBzdW1zLm5yQ291bnQ7XG4gICAgc3RhdHMuYWNjdXJhY3kgPSBzdW1zLmNvcnJlY3RDb3VudCAvIChzdW1zLmNvcnJlY3RDb3VudCArIHN1bXMuZXJyb3JDb3VudCArIHN1bXMubnJDb3VudCk7XG5cbiAgICBzdGF0cy5jb3JyZWN0TWVhblJUID0gc3Vtcy5jb3JyZWN0UlRTdW0gLyBzdW1zLmNvcnJlY3RDb3VudDtcbiAgICBzdGF0cy5lcnJvck1lYW5SVCA9IHN1bXMuZXJyb3JSVFN1bSAvIHN1bXMuZXJyb3JDb3VudDtcbiAgICBzdGF0cy5tZWFuUlQgPSAoc3Vtcy5jb3JyZWN0UlRTdW0gKyBzdW1zLmVycm9yUlRTdW0pIC8gKHN1bXMuY29ycmVjdENvdW50ICsgc3Vtcy5lcnJvckNvdW50KTtcblxuICAgIC8vIFNlY29uZC1vcmRlciBzdW1zXG4gICAgY29uc3Qgc3VtczIgPSB0cmlhbHMucmVkdWNlKFxuICAgICAgKGFjY3VtdWxhdG9yLCB0cmlhbCkgPT4ge1xuICAgICAgICBzd2l0Y2ggKHRyaWFsLm91dGNvbWUpIHtcbiAgICAgICAgICBjYXNlICdjb3JyZWN0JzpcbiAgICAgICAgICAgIGFjY3VtdWxhdG9yLnNzICs9ICh0cmlhbC5ydCAtIHN0YXRzLm1lYW5SVCkgKiogMjtcbiAgICAgICAgICAgIGFjY3VtdWxhdG9yLmNvcnJlY3RTUyArPSAodHJpYWwucnQgLSBzdGF0cy5jb3JyZWN0TWVhblJUKSAqKiAyO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnZXJyb3InOlxuICAgICAgICAgICAgYWNjdW11bGF0b3Iuc3MgKz0gKHRyaWFsLnJ0IC0gc3RhdHMubWVhblJUKSAqKiAyO1xuICAgICAgICAgICAgYWNjdW11bGF0b3IuZXJyb3JTUyArPSAodHJpYWwucnQgLSBzdGF0cy5lcnJvck1lYW5SVCkgKiogMjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAvLyBOby1vcFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2N1bXVsYXRvcjtcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHNzOiAwLFxuICAgICAgICBjb3JyZWN0U1M6IDAsXG4gICAgICAgIGVycm9yU1M6IDAsXG4gICAgICB9LFxuICAgICk7XG5cbiAgICAvLyBTZWNvbmQtb3JkZXIgc3RhdHNcbiAgICBzdGF0cy5jb3JyZWN0U0RSVCA9IChzdGF0cy5jb3JyZWN0Q291bnQgPiAxKVxuICAgICAgPyBNYXRoLnNxcnQoc3VtczIuY29ycmVjdFNTIC8gKHN0YXRzLmNvcnJlY3RDb3VudCAtIDEpKVxuICAgICAgOiBOYU47XG4gICAgc3RhdHMuZXJyb3JTRFJUID0gKHN0YXRzLmVycm9yQ291bnQgPiAxKVxuICAgICAgPyBNYXRoLnNxcnQoc3VtczIuZXJyb3JTUyAvIChzdGF0cy5lcnJvckNvdW50IC0gMSkpXG4gICAgICA6IE5hTjtcbiAgICBzdGF0cy5zZFJUID0gKHN0YXRzLmNvcnJlY3RDb3VudCArIHN0YXRzLmVycm9yQ291bnQgPiAxKVxuICAgICAgPyBNYXRoLnNxcnQoc3VtczIuc3MgLyAoc3RhdHMuY29ycmVjdENvdW50ICsgc3RhdHMuZXJyb3JDb3VudCAtIDEpKVxuICAgICAgOiBOYU47XG5cbiAgICByZXR1cm4gc3RhdHM7XG4gIH1cblxuICAvLyBQcm9iYWJpbGl0eSBvZiBhbiBFcnJvciBSZXNwb25zZVxuICBzdGF0aWMgYXp2MnBFKGEsIHosIHYsIHMgPSBERE1NYXRoLnMuREVGQVVMVCkge1xuICAgIGNvbnN0IHpQcmltZSA9IGEgKiB6O1xuXG4gICAgY29uc3QgQSA9IE1hdGguZXhwKCgtMiAqIHYgKiBhKSAvIHMgKiogMik7XG4gICAgY29uc3QgWiA9IE1hdGguZXhwKCgtMiAqIHYgKiB6UHJpbWUpIC8gcyAqKiAyKTtcblxuICAgIHJldHVybiAoQSAtIFopIC8gKEEgLSAxKTtcbiAgfVxuXG4gIC8vIFByb2JhYmlsaXR5IG9mIGEgQ29ycmVjdCBSZXNwb25zZVxuICBzdGF0aWMgYXp2MnBDKGEsIHosIHYsIHMgPSBERE1NYXRoLnMuREVGQVVMVCkge1xuICAgIHJldHVybiBERE1NYXRoLmF6djJwRShhLCAxIC0geiwgLXYsIHMpO1xuICB9XG5cbiAgLy8gTWVhbiBPdmVyYWxsIFJUXG4gIC8vIEVxdWF0aW9uIDUgKEdyYXNtYW4gZXQgYWwuLCAyMDA5KVxuICBzdGF0aWMgYXp2dDAybShhLCB6LCB2LCB0MCwgcyA9IERETU1hdGgucy5ERUZBVUxUKSB7XG4gICAgY29uc3QgelByaW1lID0gYSAqIHo7XG4gICAgY29uc3QgQSA9IE1hdGguZXhwKCgtMiAqIHYgKiBhKSAvIHMgKiogMikgLSAxO1xuICAgIGNvbnN0IFogPSBNYXRoLmV4cCgoLTIgKiB2ICogelByaW1lKSAvIHMgKiogMikgLSAxO1xuXG4gICAgY29uc3QgbWVhbiA9IC0oelByaW1lIC8gdikgKyAoYSAvIHYpICogKFogLyBBKTtcbiAgICByZXR1cm4gdDAgKyBtZWFuICogMTAwMDtcbiAgfVxuXG4gIC8vIFNEIE92ZXJhbGwgUlRcbiAgLy8gRXF1YXRpb24gNiAoR3Jhc21hbiBldCBhbC4sIDIwMDkpXG4gIHN0YXRpYyBhenYyc2QoYSwgeiwgdiwgcyA9IERETU1hdGgucy5ERUZBVUxUKSB7XG4gICAgY29uc3QgelByaW1lID0gYSAqIHo7XG4gICAgY29uc3QgQSA9IE1hdGguZXhwKCgtMiAqIHYgKiBhKSAvIHMgKiogMikgLSAxO1xuICAgIGNvbnN0IFogPSBNYXRoLmV4cCgoLTIgKiB2ICogelByaW1lKSAvIHMgKiogMikgLSAxO1xuXG4gICAgY29uc3QgdmFyaWFuY2UgPSAoXG4gICAgICAoXG4gICAgICAgICgtdiAqIGEgKiogMiAqIChaICsgNCkgKiBaKSAvIEEgKiogMlxuICAgICAgKSArIChcbiAgICAgICAgKCgtMyAqIHYgKiBhICoqIDIgKyA0ICogdiAqIHpQcmltZSAqIGEgKyBzICoqIDIgKiBhKSAqIFogKyA0ICogdiAqIHpQcmltZSAqIGEpIC8gQVxuICAgICAgKSAtIChcbiAgICAgICAgcyAqKiAyICogelByaW1lXG4gICAgICApXG4gICAgKSAvIHYgKiogMztcblxuICAgIHJldHVybiBNYXRoLnNxcnQodmFyaWFuY2UpICogMTAwMDtcbiAgfVxuXG4gIC8vIE1lYW4gRXJyb3IgUlRcbiAgLy8gRXF1YXRpb24gMTMgKEdyYXNtYW4gZXQgYWwuLCAyMDA5KVxuICBzdGF0aWMgYXp2dDAybUUoYSwgeiwgdiwgdDAsIHMgPSBERE1NYXRoLnMuREVGQVVMVCkge1xuICAgIGZ1bmN0aW9uIHBoaSh4LCB5KSB7XG4gICAgICByZXR1cm4gTWF0aC5leHAoKDIgKiB2ICogeSkgLyAocyAqKiAyKSkgLSBNYXRoLmV4cCgoMiAqIHYgKiB4KSAvIChzICoqIDIpKTtcbiAgICB9XG4gICAgY29uc3QgelByaW1lID0gYSAqIHo7XG5cbiAgICBjb25zdCBtZWFuID0gKHpQcmltZSAqIChwaGkoelByaW1lIC0gYSwgYSkgKyBwaGkoMCwgelByaW1lKSkgKyAyICogYSAqIHBoaSh6UHJpbWUsIDApKVxuICAgICAgLyAodiAqIHBoaSh6UHJpbWUsIGEpICogcGhpKC1hLCAwKSk7XG4gICAgcmV0dXJuIHQwICsgbWVhbiAqIDEwMDA7XG4gIH1cblxuICAvLyBTRCBFcnJvciBSVFxuICAvLyBFcXVhdGlvbiAxNCAoR3Jhc21hbiBldCBhbC4sIDIwMDkpXG4gIHN0YXRpYyBhenYyc2RFKGEsIHosIHYsIHMgPSBERE1NYXRoLnMuREVGQVVMVCkge1xuICAgIGZ1bmN0aW9uIHBoaSh4LCB5KSB7XG4gICAgICByZXR1cm4gTWF0aC5leHAoKDIgKiB2ICogeSkgLyAocyAqKiAyKSkgLSBNYXRoLmV4cCgoMiAqIHYgKiB4KSAvIChzICoqIDIpKTtcbiAgICB9XG4gICAgY29uc3QgelByaW1lID0gYSAqIHo7XG5cbiAgICBjb25zdCB2YXJpYW5jZSA9IChcbiAgICAgIChcbiAgICAgICAgLTIgKiBhICogcGhpKDAsIHpQcmltZSlcbiAgICAgICAgKiAoKDIgKiB2ICogYSAqIHBoaSh6UHJpbWUsIDIgKiBhKSkgKyAocyAqKiAyICogcGhpKDAsIGEpICogcGhpKHpQcmltZSwgYSkpKVxuICAgICAgICAqIE1hdGguZXhwKCgyICogdiAqIGEpIC8gcyAqKiAyKVxuICAgICAgKSAvIChcbiAgICAgICAgdiAqKiAzICogcGhpKDAsIGEpICoqIDIgKiBwaGkoelByaW1lLCBhKSAqKiAyXG4gICAgICApXG4gICAgKSArIChcbiAgICAgIChcbiAgICAgICAgNCAqIHYgKiB6UHJpbWUgKiAoMiAqIGEgLSB6UHJpbWUpICogTWF0aC5leHAoKDIgKiB2ICogKHpQcmltZSArIGEpKSAvIHMgKiogMilcbiAgICAgICAgKyB6UHJpbWUgKiBzICoqIDIgKiBwaGkoMiAqIHpQcmltZSwgMiAqIGEpXG4gICAgICApIC8gKFxuICAgICAgICB2ICoqIDMgKiBwaGkoelByaW1lLCBhKSAqKiAyXG4gICAgICApXG4gICAgKTtcblxuICAgIHJldHVybiBNYXRoLnNxcnQodmFyaWFuY2UpICogMTAwMDtcbiAgfVxuXG4gIC8vIE1lYW4gQ29ycmVjdCBSVFxuICBzdGF0aWMgYXp2dDAybUMoYSwgeiwgdiwgdDAsIHMgPSBERE1NYXRoLnMuREVGQVVMVCkge1xuICAgIHJldHVybiBERE1NYXRoLmF6dnQwMm1FKGEsIDEgLSB6LCAtdiwgdDAsIHMpO1xuICB9XG5cbiAgLy8gU0QgQ29ycmVjdCBSVFxuICBzdGF0aWMgYXp2MnNkQyhhLCB6LCB2LCBzID0gRERNTWF0aC5zLkRFRkFVTFQpIHtcbiAgICByZXR1cm4gRERNTWF0aC5henYyc2RFKGEsIDEgLSB6LCAtdiwgcyk7XG4gIH1cblxuICAvLyBEZW5zaXR5IG9mIEVycm9yIFJUXG4gIHN0YXRpYyB0YXp2MmdFKHQsIGEsIHosIHYsIHMgPSBERE1NYXRoLnMuREVGQVVMVCkge1xuICAgIGlmICghdCkgcmV0dXJuIDA7XG5cbiAgICBjb25zdCB6UHJpbWUgPSBhICogejtcbiAgICBjb25zdCBiYXNlID0gKChNYXRoLlBJICogcyAqKiAyKSAvIGEgKiogMikgKiBNYXRoLmV4cCgoLXpQcmltZSAqIHYpIC8gcyAqKiAyKTtcblxuICAgIGxldCBrID0gMDtcbiAgICBsZXQgdGVybSA9IDA7XG4gICAgbGV0IHN1bSA9IDA7XG4gICAgZG8ge1xuICAgICAgayArPSAxO1xuXG4gICAgICB0ZXJtID0ga1xuICAgICAgICAqIE1hdGguc2luKChNYXRoLlBJICogelByaW1lICogaykgLyBhKVxuICAgICAgICAqIE1hdGguZXhwKC0wLjUgKiAoKHYgKiogMiAvIHMgKiogMikgKyAoKE1hdGguUEkgKiogMiAqIGsgKiogMiAqIHMgKiogMikgLyBhICoqIDIpKSAqIHQpO1xuXG4gICAgICBzdW0gKz0gdGVybTtcbiAgICB9IHdoaWxlIChrIDwgMjAwKTsgLy8gPz8gSEFDS1xuXG4gICAgcmV0dXJuIGJhc2UgKiBzdW07XG4gIH1cblxuICAvLyBEZW5zaXR5IG9mIENvcnJlY3QgUlRcbiAgc3RhdGljIHRhenYyZ0ModCwgYSwgeiwgdiwgcyA9IERETU1hdGgucy5ERUZBVUxUKSB7XG4gICAgcmV0dXJuIERETU1hdGgudGF6djJnRSh0LCBhLCAxIC0geiwgLXYsIHMpO1xuICB9XG5cbiAgLy8gQWRhcHRlZCBmcm9tIGh0dHBzOi8vcmFvdWwuc29jc2NpLnV2YS5ubC9FWjIvRVoyX25ldy5odG1sXG4gIC8vIEVaLWZ1bmN0aW9uIGZvciBzdGFydGluZyB2YWx1ZXNcbiAgLy8gaW5wdXQ6IG9iaiAtIE9iamVjdCB3aXRoIHByb3BlcnRpZXNcbiAgLy8gICAgcEMgLSBQcm9wb3J0aW9uIGNvcnJlY3RcbiAgLy8gICAgc2QgLSBzYW1wbGUgc3RhbmRhcmQgZGV2aWF0aW9uIG9mIHRoZSBSVCdzIGluIG1zXG4gIC8vICAgIG0gLSBzYW1wbGUgbWVhbiBvZiB0aGUgUlQncyBpbiBtc1xuICAvLyAgICBzIC0gZGlmZnVzaW9uIHN0YW5kYXJkIGRldmlhdGlvblxuICAvLyByZXR1cm5zOiBPYmplY3Qgd2l0aCBwcm9wZXJ0aWVzIHYsIGEsIGFuZCB0MCwgY29udGFpbmluZyBFWi1lc3RpbWF0ZXMgb2YgdGhlc2UgcGFyYW1ldGVyc1xuICBzdGF0aWMgZGF0YTJleih7XG4gICAgYWNjdXJhY3k6IHBDLFxuICAgIHNkUlQ6IHNkLFxuICAgIG1lYW5SVDogbSxcbiAgICBzLFxuICB9KSB7XG4gICAgZnVuY3Rpb24gc2lnbihyKSB7XG4gICAgICByZXR1cm4gKChyID4gMCkgPyAxIDogKChyID09PSAwKSA/IDAgOiAtMSkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvZ2l0KHApIHtcbiAgICAgIHJldHVybiBNYXRoLmxvZyhwIC8gKDEgLSBwKSk7XG4gICAgfVxuXG4gICAgY29uc3QgdnJ0ID0gKHNkIC8gMTAwMCkgKiogMjtcbiAgICBjb25zdCBtcnQgPSBtIC8gMTAwMDtcblxuICAgIGNvbnN0IHMyID0gcyAqKiAyO1xuICAgIGNvbnN0IGwgPSBsb2dpdChwQyk7XG4gICAgY29uc3QgeCA9IChsICogKGwgKiBwQyAqKiAyIC0gbCAqIHBDICsgcEMgLSAwLjUpKSAvIHZydDtcbiAgICBjb25zdCB2ID0gc2lnbihwQyAtIDAuNSkgKiBzICogeCAqKiAoMSAvIDQpO1xuICAgIGNvbnN0IGEgPSAoczIgKiBsb2dpdChwQykpIC8gdjtcbiAgICBjb25zdCB5ID0gKC12ICogYSkgLyBzMjtcbiAgICBjb25zdCBtZHQgPSAoKGEgLyAoMiAqIHYpKSAqICgxIC0gTWF0aC5leHAoeSkpKSAvICgxICsgTWF0aC5leHAoeSkpO1xuICAgIGNvbnN0IHQwID0gKG1ydCA/IG1ydCAtIG1kdCA6IG51bGwpOyAvLyBjb21wdXRlIFRlciBvbmx5IGlmIE1SVCB3YXMgcHJvdmlkZWRcblxuICAgIGNvbnN0IHQwUHJpbWUgPSB0MCAqIDEwMDA7XG4gICAgcmV0dXJuIHtcbiAgICAgIHYsXG4gICAgICBhLFxuICAgICAgdDA6IHQwUHJpbWUsXG4gICAgICBzLFxuICAgIH07XG4gIH1cblxuICBzdGF0aWMgZGF0YTJlejIoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdkYXRhMmV6MiBpcyBub3QgaW1wbGVtZW50ZWQhJyk7XG4gIH1cbn1cbiIsIlxuLy8gSW50ZXJuYWwgZGVwZW5kZW5jaWVzXG5pbXBvcnQgRERNTWF0aCBmcm9tICcuL2RkbS1tYXRoJztcblxuZXhwb3J0IGRlZmF1bHQgRERNTWF0aDtcbiIsIi8qIGVzbGludCBuby1yZXN0cmljdGVkLWdsb2JhbHM6IFtcIm9mZlwiLCBcInNlbGZcIl0gKi9cblxuaW1wb3J0IERETU1hdGggZnJvbSAnQGRlY2lkYWJsZXMvYWNjdW11bGFibGUtbWF0aCc7XG5cbnNlbGYub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XG4gIGNvbnN0IHBhcmFtcyA9IERETU1hdGguZGF0YTJleih7Li4uZXZlbnQuZGF0YSwgczogRERNTWF0aC5zLkRFRkFVTFR9KTtcblxuICAvLyAjIyMjIyBBcmJpdHJhcnkgZGVmYXVsdCB2YWx1ZXMhISFcbiAgY29uc3QgYSA9ICFpc05hTihwYXJhbXMuYSkgPyBwYXJhbXMuYSA6IDEuNTtcbiAgY29uc3QgeiA9ICFpc05hTihwYXJhbXMueikgPyBwYXJhbXMueiA6IDAuNTtcbiAgY29uc3QgdiA9ICFpc05hTihwYXJhbXMudikgPyBwYXJhbXMudiA6IDAuMTtcbiAgY29uc3QgdDAgPSAhaXNOYU4ocGFyYW1zLnQwKSA/IHBhcmFtcy50MCA6IDEwMDtcbiAgY29uc3QgcyA9ICFpc05hTihwYXJhbXMucykgPyBwYXJhbXMucyA6IERETU1hdGgucy5ERUZBVUxUO1xuXG4gIGNvbnN0IHByZWRpY3RlZCA9IHtcbiAgICBhY2N1cmFjeTogRERNTWF0aC5henYycEMoYSwgeiwgdiksXG4gICAgY29ycmVjdE1lYW5SVDogRERNTWF0aC5henZ0MDJtQyhhLCB6LCB2LCB0MCksXG4gICAgZXJyb3JNZWFuUlQ6IERETU1hdGguYXp2dDAybUUoYSwgeiwgdiwgdDApLFxuICAgIG1lYW5SVDogRERNTWF0aC5henZ0MDJtKGEsIHosIHYsIHQwKSxcbiAgICBjb3JyZWN0U0RSVDogRERNTWF0aC5henYyc2RDKGEsIHosIHYpLFxuICAgIGVycm9yU0RSVDogRERNTWF0aC5henYyc2RFKGEsIHosIHYpLFxuICAgIHNkUlQ6IERETU1hdGguYXp2MnNkKGEsIHosIHYpLFxuICB9O1xuXG4gIHNlbGYucG9zdE1lc3NhZ2Uoe1xuICAgIHBhcmFtczoge1xuICAgICAgYSwgeiwgdiwgdDAsIHMsXG4gICAgfSxcbiAgICBwcmVkaWN0ZWQsXG4gIH0pO1xufTtcbiJdLCJuYW1lcyI6WyJERE1NYXRoIiwicyIsIkRFRkFVTFQiLCJhIiwiTUlOIiwiTUFYIiwiU1RFUCIsIkpVTVAiLCJ6IiwidiIsInQwIiwidHJpYWxzMnN0YXRzIiwidHJpYWxzIiwic3RhdHMiLCJzdW1zIiwicmVkdWNlIiwiYWNjdW11bGF0b3IiLCJ0cmlhbCIsIm91dGNvbWUiLCJjb3JyZWN0Q291bnQiLCJjb3JyZWN0UlRTdW0iLCJydCIsImVycm9yQ291bnQiLCJlcnJvclJUU3VtIiwibnJDb3VudCIsImFjY3VyYWN5IiwiY29ycmVjdE1lYW5SVCIsImVycm9yTWVhblJUIiwibWVhblJUIiwic3VtczIiLCJzcyIsImNvcnJlY3RTUyIsImVycm9yU1MiLCJjb3JyZWN0U0RSVCIsIk1hdGgiLCJzcXJ0IiwiTmFOIiwiZXJyb3JTRFJUIiwic2RSVCIsImF6djJwRSIsInpQcmltZSIsIkEiLCJleHAiLCJaIiwiYXp2MnBDIiwiYXp2dDAybSIsIm1lYW4iLCJhenYyc2QiLCJ2YXJpYW5jZSIsImF6dnQwMm1FIiwicGhpIiwieCIsInkiLCJhenYyc2RFIiwiYXp2dDAybUMiLCJhenYyc2RDIiwidGF6djJnRSIsInQiLCJiYXNlIiwiUEkiLCJrIiwidGVybSIsInN1bSIsInNpbiIsInRhenYyZ0MiLCJkYXRhMmV6IiwicEMiLCJzZCIsIm0iLCJzaWduIiwiciIsImxvZ2l0IiwicCIsImxvZyIsInZydCIsIm1ydCIsInMyIiwibCIsIm1kdCIsInQwUHJpbWUiLCJkYXRhMmV6MiIsIkVycm9yIiwic2VsZiIsIm9ubWVzc2FnZSIsImV2ZW50IiwicGFyYW1zIiwiZGF0YSIsImlzTmFOIiwicHJlZGljdGVkIiwicG9zdE1lc3NhZ2UiXSwibWFwcGluZ3MiOiI7OztFQUNBO0VBQ0E7O0VBRUE7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztFQUVBOztFQUVBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNlLE1BQU1BLE9BQU8sQ0FBQztFQUMzQixFQUFBLE9BQU9DLENBQUMsR0FBRztFQUNUQyxJQUFBQSxPQUFPLEVBQUU7S0FDVjtFQUVELEVBQUEsT0FBT0MsQ0FBQyxHQUFHO0VBQ1RELElBQUFBLE9BQU8sRUFBRSxHQUFHO0VBQ1pFLElBQUFBLEdBQUcsRUFBRSxJQUFJO0VBQ1RDLElBQUFBLEdBQUcsRUFBRSxHQUFHO0VBQ1JDLElBQUFBLElBQUksRUFBRSxJQUFJO0VBQ1ZDLElBQUFBLElBQUksRUFBRTtLQUNQO0VBRUQsRUFBQSxPQUFPQyxDQUFDLEdBQUc7RUFDVE4sSUFBQUEsT0FBTyxFQUFFLElBQUk7RUFDYkUsSUFBQUEsR0FBRyxFQUFFLElBQUk7RUFDVEMsSUFBQUEsR0FBRyxFQUFFLElBQUk7RUFDVEMsSUFBQUEsSUFBSSxFQUFFLElBQUk7RUFDVkMsSUFBQUEsSUFBSSxFQUFFO0tBQ1A7RUFFRCxFQUFBLE9BQU9FLENBQUMsR0FBRztFQUNUUCxJQUFBQSxPQUFPLEVBQUUsR0FBRztFQUNaRSxJQUFBQSxHQUFHLEVBQUUsSUFBSTtFQUNUQyxJQUFBQSxHQUFHLEVBQUUsR0FBRztFQUNSQyxJQUFBQSxJQUFJLEVBQUUsSUFBSTtFQUNWQyxJQUFBQSxJQUFJLEVBQUU7S0FDUDtFQUVELEVBQUEsT0FBT0csRUFBRSxHQUFHO0VBQ1ZSLElBQUFBLE9BQU8sRUFBRSxHQUFHO0VBQ1pFLElBQUFBLEdBQUcsRUFBRSxDQUFDO0VBQ05DLElBQUFBLEdBQUcsRUFBRSxHQUFHO0VBQ1JDLElBQUFBLElBQUksRUFBRSxDQUFDO0VBQ1BDLElBQUFBLElBQUksRUFBRTtLQUNQOztFQUVEO0lBQ0EsT0FBT0ksWUFBWUEsQ0FBQ0MsTUFBTSxFQUFFO01BQzFCLE1BQU1DLEtBQUssR0FBRyxFQUFFOztFQUVoQjtNQUNBLE1BQU1DLElBQUksR0FBR0YsTUFBTSxDQUFDRyxNQUFNLENBQ3hCLENBQUNDLFdBQVcsRUFBRUMsS0FBSyxLQUFLO1FBQ3RCLFFBQVFBLEtBQUssQ0FBQ0MsT0FBTztFQUNuQixRQUFBLEtBQUssU0FBUztZQUNaRixXQUFXLENBQUNHLFlBQVksSUFBSSxDQUFDO0VBQzdCSCxVQUFBQSxXQUFXLENBQUNJLFlBQVksSUFBSUgsS0FBSyxDQUFDSSxFQUFFO0VBQ3BDLFVBQUE7RUFDRixRQUFBLEtBQUssT0FBTztZQUNWTCxXQUFXLENBQUNNLFVBQVUsSUFBSSxDQUFDO0VBQzNCTixVQUFBQSxXQUFXLENBQUNPLFVBQVUsSUFBSU4sS0FBSyxDQUFDSSxFQUFFO0VBQ2xDLFVBQUE7RUFDRixRQUFBLEtBQUssSUFBSTtZQUNQTCxXQUFXLENBQUNRLE9BQU8sSUFBSSxDQUFDO0VBQ3hCLFVBQUE7RUFFQTtFQUNKO0VBQ0EsTUFBQSxPQUFPUixXQUFXO0VBQ3BCLElBQUEsQ0FBQyxFQUNEO0VBQ0VHLE1BQUFBLFlBQVksRUFBRSxDQUFDO0VBQ2ZHLE1BQUFBLFVBQVUsRUFBRSxDQUFDO0VBQ2JFLE1BQUFBLE9BQU8sRUFBRSxDQUFDO0VBRVZKLE1BQUFBLFlBQVksRUFBRSxDQUFDO0VBQ2ZHLE1BQUFBLFVBQVUsRUFBRTtFQUNkLEtBQ0YsQ0FBQzs7RUFFRDtFQUNBVixJQUFBQSxLQUFLLENBQUNNLFlBQVksR0FBR0wsSUFBSSxDQUFDSyxZQUFZO0VBQ3RDTixJQUFBQSxLQUFLLENBQUNTLFVBQVUsR0FBR1IsSUFBSSxDQUFDUSxVQUFVO0VBQ2xDVCxJQUFBQSxLQUFLLENBQUNXLE9BQU8sR0FBR1YsSUFBSSxDQUFDVSxPQUFPO0VBQzVCWCxJQUFBQSxLQUFLLENBQUNZLFFBQVEsR0FBR1gsSUFBSSxDQUFDSyxZQUFZLElBQUlMLElBQUksQ0FBQ0ssWUFBWSxHQUFHTCxJQUFJLENBQUNRLFVBQVUsR0FBR1IsSUFBSSxDQUFDVSxPQUFPLENBQUM7TUFFekZYLEtBQUssQ0FBQ2EsYUFBYSxHQUFHWixJQUFJLENBQUNNLFlBQVksR0FBR04sSUFBSSxDQUFDSyxZQUFZO01BQzNETixLQUFLLENBQUNjLFdBQVcsR0FBR2IsSUFBSSxDQUFDUyxVQUFVLEdBQUdULElBQUksQ0FBQ1EsVUFBVTtFQUNyRFQsSUFBQUEsS0FBSyxDQUFDZSxNQUFNLEdBQUcsQ0FBQ2QsSUFBSSxDQUFDTSxZQUFZLEdBQUdOLElBQUksQ0FBQ1MsVUFBVSxLQUFLVCxJQUFJLENBQUNLLFlBQVksR0FBR0wsSUFBSSxDQUFDUSxVQUFVLENBQUM7O0VBRTVGO01BQ0EsTUFBTU8sS0FBSyxHQUFHakIsTUFBTSxDQUFDRyxNQUFNLENBQ3pCLENBQUNDLFdBQVcsRUFBRUMsS0FBSyxLQUFLO1FBQ3RCLFFBQVFBLEtBQUssQ0FBQ0MsT0FBTztFQUNuQixRQUFBLEtBQUssU0FBUztFQUNaRixVQUFBQSxXQUFXLENBQUNjLEVBQUUsSUFBSSxDQUFDYixLQUFLLENBQUNJLEVBQUUsR0FBR1IsS0FBSyxDQUFDZSxNQUFNLEtBQUssQ0FBQztFQUNoRFosVUFBQUEsV0FBVyxDQUFDZSxTQUFTLElBQUksQ0FBQ2QsS0FBSyxDQUFDSSxFQUFFLEdBQUdSLEtBQUssQ0FBQ2EsYUFBYSxLQUFLLENBQUM7RUFDOUQsVUFBQTtFQUNGLFFBQUEsS0FBSyxPQUFPO0VBQ1ZWLFVBQUFBLFdBQVcsQ0FBQ2MsRUFBRSxJQUFJLENBQUNiLEtBQUssQ0FBQ0ksRUFBRSxHQUFHUixLQUFLLENBQUNlLE1BQU0sS0FBSyxDQUFDO0VBQ2hEWixVQUFBQSxXQUFXLENBQUNnQixPQUFPLElBQUksQ0FBQ2YsS0FBSyxDQUFDSSxFQUFFLEdBQUdSLEtBQUssQ0FBQ2MsV0FBVyxLQUFLLENBQUM7RUFDMUQsVUFBQTtFQUVBO0VBQ0o7RUFDQSxNQUFBLE9BQU9YLFdBQVc7RUFDcEIsSUFBQSxDQUFDLEVBQ0Q7RUFDRWMsTUFBQUEsRUFBRSxFQUFFLENBQUM7RUFDTEMsTUFBQUEsU0FBUyxFQUFFLENBQUM7RUFDWkMsTUFBQUEsT0FBTyxFQUFFO0VBQ1gsS0FDRixDQUFDOztFQUVEO01BQ0FuQixLQUFLLENBQUNvQixXQUFXLEdBQUlwQixLQUFLLENBQUNNLFlBQVksR0FBRyxDQUFDLEdBQ3ZDZSxJQUFJLENBQUNDLElBQUksQ0FBQ04sS0FBSyxDQUFDRSxTQUFTLElBQUlsQixLQUFLLENBQUNNLFlBQVksR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUNyRGlCLEdBQUc7TUFDUHZCLEtBQUssQ0FBQ3dCLFNBQVMsR0FBSXhCLEtBQUssQ0FBQ1MsVUFBVSxHQUFHLENBQUMsR0FDbkNZLElBQUksQ0FBQ0MsSUFBSSxDQUFDTixLQUFLLENBQUNHLE9BQU8sSUFBSW5CLEtBQUssQ0FBQ1MsVUFBVSxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQ2pEYyxHQUFHO0VBQ1B2QixJQUFBQSxLQUFLLENBQUN5QixJQUFJLEdBQUl6QixLQUFLLENBQUNNLFlBQVksR0FBR04sS0FBSyxDQUFDUyxVQUFVLEdBQUcsQ0FBQyxHQUNuRFksSUFBSSxDQUFDQyxJQUFJLENBQUNOLEtBQUssQ0FBQ0MsRUFBRSxJQUFJakIsS0FBSyxDQUFDTSxZQUFZLEdBQUdOLEtBQUssQ0FBQ1MsVUFBVSxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQ2pFYyxHQUFHO0VBRVAsSUFBQSxPQUFPdkIsS0FBSztFQUNkLEVBQUE7O0VBRUE7RUFDQSxFQUFBLE9BQU8wQixNQUFNQSxDQUFDcEMsQ0FBQyxFQUFFSyxDQUFDLEVBQUVDLENBQUMsRUFBRVIsQ0FBQyxHQUFHRCxPQUFPLENBQUNDLENBQUMsQ0FBQ0MsT0FBTyxFQUFFO0VBQzVDLElBQUEsTUFBTXNDLE1BQU0sR0FBR3JDLENBQUMsR0FBR0ssQ0FBQztFQUVwQixJQUFBLE1BQU1pQyxDQUFDLEdBQUdQLElBQUksQ0FBQ1EsR0FBRyxDQUFFLEVBQUUsR0FBR2pDLENBQUMsR0FBR04sQ0FBQyxHQUFJRixDQUFDLElBQUksQ0FBQyxDQUFDO0VBQ3pDLElBQUEsTUFBTTBDLENBQUMsR0FBR1QsSUFBSSxDQUFDUSxHQUFHLENBQUUsRUFBRSxHQUFHakMsQ0FBQyxHQUFHK0IsTUFBTSxHQUFJdkMsQ0FBQyxJQUFJLENBQUMsQ0FBQztNQUU5QyxPQUFPLENBQUN3QyxDQUFDLEdBQUdFLENBQUMsS0FBS0YsQ0FBQyxHQUFHLENBQUMsQ0FBQztFQUMxQixFQUFBOztFQUVBO0VBQ0EsRUFBQSxPQUFPRyxNQUFNQSxDQUFDekMsQ0FBQyxFQUFFSyxDQUFDLEVBQUVDLENBQUMsRUFBRVIsQ0FBQyxHQUFHRCxPQUFPLENBQUNDLENBQUMsQ0FBQ0MsT0FBTyxFQUFFO0VBQzVDLElBQUEsT0FBT0YsT0FBTyxDQUFDdUMsTUFBTSxDQUFDcEMsQ0FBQyxFQUFFLENBQUMsR0FBR0ssQ0FBQyxFQUFFLENBQUNDLENBQUMsRUFBRVIsQ0FBQyxDQUFDO0VBQ3hDLEVBQUE7O0VBRUE7RUFDQTtFQUNBLEVBQUEsT0FBTzRDLE9BQU9BLENBQUMxQyxDQUFDLEVBQUVLLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxFQUFFLEVBQUVULENBQUMsR0FBR0QsT0FBTyxDQUFDQyxDQUFDLENBQUNDLE9BQU8sRUFBRTtFQUNqRCxJQUFBLE1BQU1zQyxNQUFNLEdBQUdyQyxDQUFDLEdBQUdLLENBQUM7RUFDcEIsSUFBQSxNQUFNaUMsQ0FBQyxHQUFHUCxJQUFJLENBQUNRLEdBQUcsQ0FBRSxFQUFFLEdBQUdqQyxDQUFDLEdBQUdOLENBQUMsR0FBSUYsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUM7RUFDN0MsSUFBQSxNQUFNMEMsQ0FBQyxHQUFHVCxJQUFJLENBQUNRLEdBQUcsQ0FBRSxFQUFFLEdBQUdqQyxDQUFDLEdBQUcrQixNQUFNLEdBQUl2QyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQztFQUVsRCxJQUFBLE1BQU02QyxJQUFJLEdBQUcsRUFBRU4sTUFBTSxHQUFHL0IsQ0FBQyxDQUFDLEdBQUlOLENBQUMsR0FBR00sQ0FBQyxJQUFLa0MsQ0FBQyxHQUFHRixDQUFDLENBQUM7RUFDOUMsSUFBQSxPQUFPL0IsRUFBRSxHQUFHb0MsSUFBSSxHQUFHLElBQUk7RUFDekIsRUFBQTs7RUFFQTtFQUNBO0VBQ0EsRUFBQSxPQUFPQyxNQUFNQSxDQUFDNUMsQ0FBQyxFQUFFSyxDQUFDLEVBQUVDLENBQUMsRUFBRVIsQ0FBQyxHQUFHRCxPQUFPLENBQUNDLENBQUMsQ0FBQ0MsT0FBTyxFQUFFO0VBQzVDLElBQUEsTUFBTXNDLE1BQU0sR0FBR3JDLENBQUMsR0FBR0ssQ0FBQztFQUNwQixJQUFBLE1BQU1pQyxDQUFDLEdBQUdQLElBQUksQ0FBQ1EsR0FBRyxDQUFFLEVBQUUsR0FBR2pDLENBQUMsR0FBR04sQ0FBQyxHQUFJRixDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQztFQUM3QyxJQUFBLE1BQU0wQyxDQUFDLEdBQUdULElBQUksQ0FBQ1EsR0FBRyxDQUFFLEVBQUUsR0FBR2pDLENBQUMsR0FBRytCLE1BQU0sR0FBSXZDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDO0VBRWxELElBQUEsTUFBTStDLFFBQVEsR0FBRyxDQUVaLENBQUN2QyxDQUFDLEdBQUdOLENBQUMsSUFBSSxDQUFDLElBQUl3QyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUdBLENBQUMsR0FBSUYsQ0FBQyxJQUFJLENBQUMsR0FFcEMsQ0FBQyxDQUFDLEVBQUUsR0FBR2hDLENBQUMsR0FBR04sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUdNLENBQUMsR0FBRytCLE1BQU0sR0FBR3JDLENBQUMsR0FBR0YsQ0FBQyxJQUFJLENBQUMsR0FBR0UsQ0FBQyxJQUFJd0MsQ0FBQyxHQUFHLENBQUMsR0FBR2xDLENBQUMsR0FBRytCLE1BQU0sR0FBR3JDLENBQUMsSUFBSXNDLENBQ2xGLEdBQ0N4QyxDQUFDLElBQUksQ0FBQyxHQUFHdUMsTUFDVixJQUNDL0IsQ0FBQyxJQUFJLENBQUM7RUFFVixJQUFBLE9BQU95QixJQUFJLENBQUNDLElBQUksQ0FBQ2EsUUFBUSxDQUFDLEdBQUcsSUFBSTtFQUNuQyxFQUFBOztFQUVBO0VBQ0E7RUFDQSxFQUFBLE9BQU9DLFFBQVFBLENBQUM5QyxDQUFDLEVBQUVLLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxFQUFFLEVBQUVULENBQUMsR0FBR0QsT0FBTyxDQUFDQyxDQUFDLENBQUNDLE9BQU8sRUFBRTtFQUNsRCxJQUFBLFNBQVNnRCxHQUFHQSxDQUFDQyxDQUFDLEVBQUVDLENBQUMsRUFBRTtFQUNqQixNQUFBLE9BQU9sQixJQUFJLENBQUNRLEdBQUcsQ0FBRSxDQUFDLEdBQUdqQyxDQUFDLEdBQUcyQyxDQUFDLEdBQUtuRCxDQUFDLElBQUksQ0FBRSxDQUFDLEdBQUdpQyxJQUFJLENBQUNRLEdBQUcsQ0FBRSxDQUFDLEdBQUdqQyxDQUFDLEdBQUcwQyxDQUFDLEdBQUtsRCxDQUFDLElBQUksQ0FBRSxDQUFDO0VBQzVFLElBQUE7RUFDQSxJQUFBLE1BQU11QyxNQUFNLEdBQUdyQyxDQUFDLEdBQUdLLENBQUM7TUFFcEIsTUFBTXNDLElBQUksR0FBRyxDQUFDTixNQUFNLElBQUlVLEdBQUcsQ0FBQ1YsTUFBTSxHQUFHckMsQ0FBQyxFQUFFQSxDQUFDLENBQUMsR0FBRytDLEdBQUcsQ0FBQyxDQUFDLEVBQUVWLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHckMsQ0FBQyxHQUFHK0MsR0FBRyxDQUFDVixNQUFNLEVBQUUsQ0FBQyxDQUFDLEtBQ2hGL0IsQ0FBQyxHQUFHeUMsR0FBRyxDQUFDVixNQUFNLEVBQUVyQyxDQUFDLENBQUMsR0FBRytDLEdBQUcsQ0FBQyxDQUFDL0MsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0VBQ3JDLElBQUEsT0FBT08sRUFBRSxHQUFHb0MsSUFBSSxHQUFHLElBQUk7RUFDekIsRUFBQTs7RUFFQTtFQUNBO0VBQ0EsRUFBQSxPQUFPTyxPQUFPQSxDQUFDbEQsQ0FBQyxFQUFFSyxDQUFDLEVBQUVDLENBQUMsRUFBRVIsQ0FBQyxHQUFHRCxPQUFPLENBQUNDLENBQUMsQ0FBQ0MsT0FBTyxFQUFFO0VBQzdDLElBQUEsU0FBU2dELEdBQUdBLENBQUNDLENBQUMsRUFBRUMsQ0FBQyxFQUFFO0VBQ2pCLE1BQUEsT0FBT2xCLElBQUksQ0FBQ1EsR0FBRyxDQUFFLENBQUMsR0FBR2pDLENBQUMsR0FBRzJDLENBQUMsR0FBS25ELENBQUMsSUFBSSxDQUFFLENBQUMsR0FBR2lDLElBQUksQ0FBQ1EsR0FBRyxDQUFFLENBQUMsR0FBR2pDLENBQUMsR0FBRzBDLENBQUMsR0FBS2xELENBQUMsSUFBSSxDQUFFLENBQUM7RUFDNUUsSUFBQTtFQUNBLElBQUEsTUFBTXVDLE1BQU0sR0FBR3JDLENBQUMsR0FBR0ssQ0FBQztFQUVwQixJQUFBLE1BQU13QyxRQUFRLEdBRVYsRUFBRSxHQUFHN0MsQ0FBQyxHQUFHK0MsR0FBRyxDQUFDLENBQUMsRUFBRVYsTUFBTSxDQUFDLElBQ25CLENBQUMsR0FBRy9CLENBQUMsR0FBR04sQ0FBQyxHQUFHK0MsR0FBRyxDQUFDVixNQUFNLEVBQUUsQ0FBQyxHQUFHckMsQ0FBQyxDQUFDLEdBQUtGLENBQUMsSUFBSSxDQUFDLEdBQUdpRCxHQUFHLENBQUMsQ0FBQyxFQUFFL0MsQ0FBQyxDQUFDLEdBQUcrQyxHQUFHLENBQUNWLE1BQU0sRUFBRXJDLENBQUMsQ0FBRSxDQUFDLEdBQzFFK0IsSUFBSSxDQUFDUSxHQUFHLENBQUUsQ0FBQyxHQUFHakMsQ0FBQyxHQUFHTixDQUFDLEdBQUlGLENBQUMsSUFBSSxDQUFDLENBQUMsSUFFaENRLENBQUMsSUFBSSxDQUFDLEdBQUd5QyxHQUFHLENBQUMsQ0FBQyxFQUFFL0MsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHK0MsR0FBRyxDQUFDVixNQUFNLEVBQUVyQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQzlDLEdBRUQsQ0FDRSxDQUFDLEdBQUdNLENBQUMsR0FBRytCLE1BQU0sSUFBSSxDQUFDLEdBQUdyQyxDQUFDLEdBQUdxQyxNQUFNLENBQUMsR0FBR04sSUFBSSxDQUFDUSxHQUFHLENBQUUsQ0FBQyxHQUFHakMsQ0FBQyxJQUFJK0IsTUFBTSxHQUFHckMsQ0FBQyxDQUFDLEdBQUlGLENBQUMsSUFBSSxDQUFDLENBQUMsR0FDM0V1QyxNQUFNLEdBQUd2QyxDQUFDLElBQUksQ0FBQyxHQUFHaUQsR0FBRyxDQUFDLENBQUMsR0FBR1YsTUFBTSxFQUFFLENBQUMsR0FBR3JDLENBQUMsQ0FBQyxLQUUxQ00sQ0FBQyxJQUFJLENBQUMsR0FBR3lDLEdBQUcsQ0FBQ1YsTUFBTSxFQUFFckMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUUvQjtFQUVELElBQUEsT0FBTytCLElBQUksQ0FBQ0MsSUFBSSxDQUFDYSxRQUFRLENBQUMsR0FBRyxJQUFJO0VBQ25DLEVBQUE7O0VBRUE7RUFDQSxFQUFBLE9BQU9NLFFBQVFBLENBQUNuRCxDQUFDLEVBQUVLLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxFQUFFLEVBQUVULENBQUMsR0FBR0QsT0FBTyxDQUFDQyxDQUFDLENBQUNDLE9BQU8sRUFBRTtFQUNsRCxJQUFBLE9BQU9GLE9BQU8sQ0FBQ2lELFFBQVEsQ0FBQzlDLENBQUMsRUFBRSxDQUFDLEdBQUdLLENBQUMsRUFBRSxDQUFDQyxDQUFDLEVBQUVDLEVBQUUsRUFBRVQsQ0FBQyxDQUFDO0VBQzlDLEVBQUE7O0VBRUE7RUFDQSxFQUFBLE9BQU9zRCxPQUFPQSxDQUFDcEQsQ0FBQyxFQUFFSyxDQUFDLEVBQUVDLENBQUMsRUFBRVIsQ0FBQyxHQUFHRCxPQUFPLENBQUNDLENBQUMsQ0FBQ0MsT0FBTyxFQUFFO0VBQzdDLElBQUEsT0FBT0YsT0FBTyxDQUFDcUQsT0FBTyxDQUFDbEQsQ0FBQyxFQUFFLENBQUMsR0FBR0ssQ0FBQyxFQUFFLENBQUNDLENBQUMsRUFBRVIsQ0FBQyxDQUFDO0VBQ3pDLEVBQUE7O0VBRUE7RUFDQSxFQUFBLE9BQU91RCxPQUFPQSxDQUFDQyxDQUFDLEVBQUV0RCxDQUFDLEVBQUVLLENBQUMsRUFBRUMsQ0FBQyxFQUFFUixDQUFDLEdBQUdELE9BQU8sQ0FBQ0MsQ0FBQyxDQUFDQyxPQUFPLEVBQUU7RUFDaEQsSUFBQSxJQUFJLENBQUN1RCxDQUFDLEVBQUUsT0FBTyxDQUFDO0VBRWhCLElBQUEsTUFBTWpCLE1BQU0sR0FBR3JDLENBQUMsR0FBR0ssQ0FBQztNQUNwQixNQUFNa0QsSUFBSSxHQUFLeEIsSUFBSSxDQUFDeUIsRUFBRSxHQUFHMUQsQ0FBQyxJQUFJLENBQUMsR0FBSUUsQ0FBQyxJQUFJLENBQUMsR0FBSStCLElBQUksQ0FBQ1EsR0FBRyxDQUFFLENBQUNGLE1BQU0sR0FBRy9CLENBQUMsR0FBSVIsQ0FBQyxJQUFJLENBQUMsQ0FBQztNQUU3RSxJQUFJMkQsQ0FBQyxHQUFHLENBQUM7TUFDVCxJQUFJQyxJQUFJLEdBQUcsQ0FBQztNQUNaLElBQUlDLEdBQUcsR0FBRyxDQUFDO01BQ1gsR0FBRztFQUNERixNQUFBQSxDQUFDLElBQUksQ0FBQztRQUVOQyxJQUFJLEdBQUdELENBQUMsR0FDSjFCLElBQUksQ0FBQzZCLEdBQUcsQ0FBRTdCLElBQUksQ0FBQ3lCLEVBQUUsR0FBR25CLE1BQU0sR0FBR29CLENBQUMsR0FBSXpELENBQUMsQ0FBQyxHQUNwQytCLElBQUksQ0FBQ1EsR0FBRyxDQUFDLElBQUksSUFBS2pDLENBQUMsSUFBSSxDQUFDLEdBQUdSLENBQUMsSUFBSSxDQUFDLEdBQU1pQyxJQUFJLENBQUN5QixFQUFFLElBQUksQ0FBQyxHQUFHQyxDQUFDLElBQUksQ0FBQyxHQUFHM0QsQ0FBQyxJQUFJLENBQUMsR0FBSUUsQ0FBQyxJQUFJLENBQUUsQ0FBQyxHQUFHc0QsQ0FBQyxDQUFDO0VBRTFGSyxNQUFBQSxHQUFHLElBQUlELElBQUk7RUFDYixJQUFBLENBQUMsUUFBUUQsQ0FBQyxHQUFHLEdBQUcsRUFBRTs7TUFFbEIsT0FBT0YsSUFBSSxHQUFHSSxHQUFHO0VBQ25CLEVBQUE7O0VBRUE7RUFDQSxFQUFBLE9BQU9FLE9BQU9BLENBQUNQLENBQUMsRUFBRXRELENBQUMsRUFBRUssQ0FBQyxFQUFFQyxDQUFDLEVBQUVSLENBQUMsR0FBR0QsT0FBTyxDQUFDQyxDQUFDLENBQUNDLE9BQU8sRUFBRTtFQUNoRCxJQUFBLE9BQU9GLE9BQU8sQ0FBQ3dELE9BQU8sQ0FBQ0MsQ0FBQyxFQUFFdEQsQ0FBQyxFQUFFLENBQUMsR0FBR0ssQ0FBQyxFQUFFLENBQUNDLENBQUMsRUFBRVIsQ0FBQyxDQUFDO0VBQzVDLEVBQUE7O0VBRUE7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBLEVBQUEsT0FBT2dFLE9BQU9BLENBQUM7RUFDYnhDLElBQUFBLFFBQVEsRUFBRXlDLEVBQUU7RUFDWjVCLElBQUFBLElBQUksRUFBRTZCLEVBQUU7RUFDUnZDLElBQUFBLE1BQU0sRUFBRXdDLENBQUM7RUFDVG5FLElBQUFBO0VBQ0YsR0FBQyxFQUFFO01BQ0QsU0FBU29FLElBQUlBLENBQUNDLENBQUMsRUFBRTtFQUNmLE1BQUEsT0FBU0EsQ0FBQyxHQUFHLENBQUMsR0FBSSxDQUFDLEdBQUtBLENBQUMsS0FBSyxDQUFDLEdBQUksQ0FBQyxHQUFHLEVBQUc7RUFDNUMsSUFBQTtNQUVBLFNBQVNDLEtBQUtBLENBQUNDLENBQUMsRUFBRTtRQUNoQixPQUFPdEMsSUFBSSxDQUFDdUMsR0FBRyxDQUFDRCxDQUFDLElBQUksQ0FBQyxHQUFHQSxDQUFDLENBQUMsQ0FBQztFQUM5QixJQUFBO0VBRUEsSUFBQSxNQUFNRSxHQUFHLEdBQUcsQ0FBQ1AsRUFBRSxHQUFHLElBQUksS0FBSyxDQUFDO0VBQzVCLElBQUEsTUFBTVEsR0FBRyxHQUFHUCxDQUFDLEdBQUcsSUFBSTtFQUVwQixJQUFBLE1BQU1RLEVBQUUsR0FBRzNFLENBQUMsSUFBSSxDQUFDO0VBQ2pCLElBQUEsTUFBTTRFLENBQUMsR0FBR04sS0FBSyxDQUFDTCxFQUFFLENBQUM7RUFDbkIsSUFBQSxNQUFNZixDQUFDLEdBQUkwQixDQUFDLElBQUlBLENBQUMsR0FBR1gsRUFBRSxJQUFJLENBQUMsR0FBR1csQ0FBQyxHQUFHWCxFQUFFLEdBQUdBLEVBQUUsR0FBRyxHQUFHLENBQUMsR0FBSVEsR0FBRztFQUN2RCxJQUFBLE1BQU1qRSxDQUFDLEdBQUc0RCxJQUFJLENBQUNILEVBQUUsR0FBRyxHQUFHLENBQUMsR0FBR2pFLENBQUMsR0FBR2tELENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO01BQzNDLE1BQU1oRCxDQUFDLEdBQUl5RSxFQUFFLEdBQUdMLEtBQUssQ0FBQ0wsRUFBRSxDQUFDLEdBQUl6RCxDQUFDO0VBQzlCLElBQUEsTUFBTTJDLENBQUMsR0FBSSxDQUFDM0MsQ0FBQyxHQUFHTixDQUFDLEdBQUl5RSxFQUFFO01BQ3ZCLE1BQU1FLEdBQUcsR0FBSzNFLENBQUMsSUFBSSxDQUFDLEdBQUdNLENBQUMsQ0FBQyxJQUFLLENBQUMsR0FBR3lCLElBQUksQ0FBQ1EsR0FBRyxDQUFDVSxDQUFDLENBQUMsQ0FBQyxJQUFLLENBQUMsR0FBR2xCLElBQUksQ0FBQ1EsR0FBRyxDQUFDVSxDQUFDLENBQUMsQ0FBQztNQUNuRSxNQUFNMUMsRUFBRSxHQUFJaUUsR0FBRyxHQUFHQSxHQUFHLEdBQUdHLEdBQUcsR0FBRyxJQUFLLENBQUM7O0VBRXBDLElBQUEsTUFBTUMsT0FBTyxHQUFHckUsRUFBRSxHQUFHLElBQUk7TUFDekIsT0FBTztRQUNMRCxDQUFDO1FBQ0ROLENBQUM7RUFDRE8sTUFBQUEsRUFBRSxFQUFFcUUsT0FBTztFQUNYOUUsTUFBQUE7T0FDRDtFQUNILEVBQUE7SUFFQSxPQUFPK0UsUUFBUUEsR0FBRztFQUNoQixJQUFBLE1BQU0sSUFBSUMsS0FBSyxDQUFDLDhCQUE4QixDQUFDO0VBQ2pELEVBQUE7RUFDRjs7RUMvVEE7O0VDREE7O0VBSUFDLElBQUksQ0FBQ0MsU0FBUyxHQUFJQyxLQUFLLElBQUs7RUFDMUIsRUFBQSxNQUFNQyxNQUFNLEdBQUdyRixPQUFPLENBQUNpRSxPQUFPLENBQUM7TUFBQyxHQUFHbUIsS0FBSyxDQUFDRSxJQUFJO0VBQUVyRixJQUFBQSxDQUFDLEVBQUVELE9BQU8sQ0FBQ0MsQ0FBQyxDQUFDQztFQUFPLEdBQUMsQ0FBQzs7RUFFckU7RUFDQSxFQUFBLE1BQU1DLENBQUMsR0FBRyxDQUFDb0YsS0FBSyxDQUFDRixNQUFNLENBQUNsRixDQUFDLENBQUMsR0FBR2tGLE1BQU0sQ0FBQ2xGLENBQUMsR0FBRyxHQUFHO0VBQzNDLEVBQUEsTUFBTUssQ0FBQyxHQUFHLENBQUMrRSxLQUFLLENBQUNGLE1BQU0sQ0FBQzdFLENBQUMsQ0FBQyxHQUFHNkUsTUFBTSxDQUFDN0UsQ0FBQyxHQUFHLEdBQUc7RUFDM0MsRUFBQSxNQUFNQyxDQUFDLEdBQUcsQ0FBQzhFLEtBQUssQ0FBQ0YsTUFBTSxDQUFDNUUsQ0FBQyxDQUFDLEdBQUc0RSxNQUFNLENBQUM1RSxDQUFDLEdBQUcsR0FBRztFQUMzQyxFQUFBLE1BQU1DLEVBQUUsR0FBRyxDQUFDNkUsS0FBSyxDQUFDRixNQUFNLENBQUMzRSxFQUFFLENBQUMsR0FBRzJFLE1BQU0sQ0FBQzNFLEVBQUUsR0FBRyxHQUFHO0VBQzlDLEVBQUEsTUFBTVQsQ0FBQyxHQUFHLENBQUNzRixLQUFLLENBQUNGLE1BQU0sQ0FBQ3BGLENBQUMsQ0FBQyxHQUFHb0YsTUFBTSxDQUFDcEYsQ0FBQyxHQUFHRCxPQUFPLENBQUNDLENBQUMsQ0FBQ0MsT0FBTztFQUV6RCxFQUFBLE1BQU1zRixTQUFTLEdBQUc7TUFDaEIvRCxRQUFRLEVBQUV6QixPQUFPLENBQUM0QyxNQUFNLENBQUN6QyxDQUFDLEVBQUVLLENBQUMsRUFBRUMsQ0FBQyxDQUFDO0VBQ2pDaUIsSUFBQUEsYUFBYSxFQUFFMUIsT0FBTyxDQUFDc0QsUUFBUSxDQUFDbkQsQ0FBQyxFQUFFSyxDQUFDLEVBQUVDLENBQUMsRUFBRUMsRUFBRSxDQUFDO0VBQzVDaUIsSUFBQUEsV0FBVyxFQUFFM0IsT0FBTyxDQUFDaUQsUUFBUSxDQUFDOUMsQ0FBQyxFQUFFSyxDQUFDLEVBQUVDLENBQUMsRUFBRUMsRUFBRSxDQUFDO0VBQzFDa0IsSUFBQUEsTUFBTSxFQUFFNUIsT0FBTyxDQUFDNkMsT0FBTyxDQUFDMUMsQ0FBQyxFQUFFSyxDQUFDLEVBQUVDLENBQUMsRUFBRUMsRUFBRSxDQUFDO01BQ3BDdUIsV0FBVyxFQUFFakMsT0FBTyxDQUFDdUQsT0FBTyxDQUFDcEQsQ0FBQyxFQUFFSyxDQUFDLEVBQUVDLENBQUMsQ0FBQztNQUNyQzRCLFNBQVMsRUFBRXJDLE9BQU8sQ0FBQ3FELE9BQU8sQ0FBQ2xELENBQUMsRUFBRUssQ0FBQyxFQUFFQyxDQUFDLENBQUM7TUFDbkM2QixJQUFJLEVBQUV0QyxPQUFPLENBQUMrQyxNQUFNLENBQUM1QyxDQUFDLEVBQUVLLENBQUMsRUFBRUMsQ0FBQztLQUM3QjtJQUVEeUUsSUFBSSxDQUFDTyxXQUFXLENBQUM7RUFDZkosSUFBQUEsTUFBTSxFQUFFO1FBQ05sRixDQUFDO1FBQUVLLENBQUM7UUFBRUMsQ0FBQztRQUFFQyxFQUFFO0VBQUVULE1BQUFBO09BQ2Q7RUFDRHVGLElBQUFBO0VBQ0YsR0FBQyxDQUFDO0VBQ0osQ0FBQzs7Ozs7OyJ9");class DDMFit extends AccumulableElement{static get properties(){return{}}constructor(){super(),this.a=DDMMath.a.DEFAULT,this.z=DDMMath.z.DEFAULT,this.v=DDMMath.v.DEFAULT,this.t0=DDMMath.t0.DEFAULT,this.observed={},this.predicted={},this.working=!1,this.queued=!1,this.worker=new WorkerFactory,this.worker.onmessage=t=>{this.working=!1,this.predicted=t.data.predicted,this.a=t.data.params.a,this.z=t.data.params.z,this.v=t.data.params.v,this.t0=t.data.params.t0,this.requestUpdate(),this.dispatchEvent(new CustomEvent("ddm-fit-update",{detail:{a:this.a,z:this.z,v:this.v,t0:this.t0},bubbles:!0})),this.queued&&this.fit()},this.fit()}fit(){this.working?this.queued=!0:(this.worker.postMessage(this.observed),this.working=!0,this.queued=!1)}clear(){this.observed={},this.fit()}set(t){this.observed=structuredClone(t),this.fit()}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;
        }
      `]}render(){return x$3`
      <div>
        <div><b>Observed:</b>
          <br/>Accuracy = ${this.observed.accuracy?.toFixed(2)},
          <br/>Correct Mean RT = ${this.observed.correctMeanRT?.toFixed(0)},
          Error Mean RT = ${this.observed.errorMeanRT?.toFixed(0)},
          Mean RT = ${this.observed.meanRT?.toFixed(0)},
          <br/>Correct SD RT = ${this.observed.correctSDRT?.toFixed(0)},
          Error SD RT = ${this.observed.errorSDRT?.toFixed(0)},
          SD RT = ${this.observed.sdRT?.toFixed(0)},
        </div>
        <div><b>Parameters:</b>
          <br/><var class="math-var a">a</var> = ${this.a.toFixed(2)},
          <var class="math-var z">z</var> = ${this.z.toFixed(2)},
          <var class="math-var v">v</var> = ${this.v.toFixed(2)},
          <var class="math-var t0">t0</var> = ${this.t0.toFixed(0)}
        </div>
        <div><b>Predicted:</b>
          <br/>Accuracy = ${this.predicted.accuracy?.toFixed(2)},
          <br/>Correct Mean RT = ${this.predicted.correctMeanRT?.toFixed(0)},
          Error Mean RT = ${this.predicted.errorMeanRT?.toFixed(0)},
          Mean RT = ${this.predicted.meanRT?.toFixed(0)},
          <br/>Correct SD RT = ${this.predicted.correctSDRT?.toFixed(0)},
          Error SD RT = ${this.predicted.errorSDRT?.toFixed(0)},
          SD RT = ${this.predicted.sdRT?.toFixed(0)},
        </div>
      </div>
    `}}customElements.define("ddm-fit",DDMFit);class DDMParameters extends AccumulableElement{static get properties(){return{a:{attribute:"boundary-separation",type:Number,reflect:!0},z:{attribute:"starting-point",type:Number,reflect:!0},v:{attribute:"drift-rate",type:Number,reflect:!0},t0:{attribute:"nondecision-time",type:Number,reflect:!0}}}constructor(){super(),this.a=void 0,this.z=void 0,this.v=void 0,this.t0=void 0}setBoundarySeparation(t){this.a=+t.target.value,this.dispatchEvent(new CustomEvent("ddm-parameters-a",{detail:{a:this.a},bubbles:!0}))}setStartingPoint(t){this.z=+t.target.value,this.dispatchEvent(new CustomEvent("ddm-parameters-z",{detail:{z:this.z},bubbles:!0}))}setDriftRate(t){this.v=+t.target.value,this.dispatchEvent(new CustomEvent("ddm-parameters-v",{detail:{v:this.v},bubbles:!0}))}setNondecisionTime(t){this.t0=+t.target.value,this.dispatchEvent(new CustomEvent("ddm-parameters-t0",{detail:{t0:this.t0},bubbles:!0}))}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;
        }

        .holder {
          display: flex;

          flex-direction: row;

          align-items: stretch;
          justify-content: center;
        }

        decidables-slider {
          line-height: 1;
          text-align: center;
        }

        decidables-slider  div {
          margin-bottom: 0.25rem;
        }

        .a {
          --decidables-slider-background-color: var(---color-a-light);
          --decidables-slider-color: var(---color-a);
        }

        .z {
          --decidables-slider-background-color: var(---color-z-light);
          --decidables-slider-color: var(---color-z);
        }

        .v {
          --decidables-slider-background-color: var(---color-v-light);
          --decidables-slider-color: var(---color-v);
        }

        .t0 {
          --decidables-slider-background-color: var(---color-t0-light);
          --decidables-slider-color: var(---color-t0);
        }
      `]}render(){return x$3`
      <div class="holder">
        ${null!=this.a?x$3`<decidables-slider class="a"
            ?disabled=${!this.interactive}
            scale
            min=${DDMMath.a.MIN}
            max=${DDMMath.a.MAX}
            step=${DDMMath.a.STEP}
            .value=${+this.a.toFixed(2)}
            @change=${this.setBoundarySeparation.bind(this)}
            @input=${this.setBoundarySeparation.bind(this)}
          ><div>Boundary Separation<br><span class="math-var">a</span></div></decidables-slider>`:x$3``}
        ${null!=this.z?x$3`<decidables-slider class="z"
            ?disabled=${!this.interactive}
            scale
            min=${DDMMath.z.MIN}
            max=${DDMMath.z.MAX}
            step=${DDMMath.z.STEP}
            .value=${+this.z.toFixed(2)}
            @change=${this.setStartingPoint.bind(this)}
            @input=${this.setStartingPoint.bind(this)}
          ><div>Starting Point<br><span class="math-var">z</span></div></decidables-slider>`:x$3``}
        ${null!=this.v?x$3`<decidables-slider class="v"
            ?disabled=${!this.interactive}
            scale
            min=${DDMMath.v.MIN}
            max=${DDMMath.v.MAX}
            step=${DDMMath.v.STEP}
            .value=${+this.v.toFixed(2)}
            @change=${this.setDriftRate.bind(this)}
            @input=${this.setDriftRate.bind(this)}
          ><div>Drift Rate<br><span class="math-var">v</span></div></decidables-slider>`:x$3``}
        ${null!=this.t0?x$3`<decidables-slider class="t0" 
            ?disabled=${!this.interactive}
            scale
            min=${DDMMath.t0.MIN}
            max=${DDMMath.t0.MAX}
            step=${DDMMath.t0.STEP}
            .value=${+this.t0.toFixed(0)}
            @change=${this.setNondecisionTime.bind(this)}
            @input=${this.setNondecisionTime.bind(this)}
          ><div>Nondecision Time<br><span class="math-var">tâ</span></div></decidables-slider>`:x$3``}
      </div>`}}customElements.define("ddm-parameters",DDMParameters);class DDMModel extends(DecidablesMixinResizeable(AccumulableElement)){static get properties(){return{measures:{attribute:"measures",type:Boolean,reflect:!0},means:{attribute:"means",type:Boolean,reflect:!0},sds:{attribute:"sds",type:Boolean,reflect:!0},human:{attribute:"human",type:Boolean,reflect:!0},trials:{attribute:"trials",type:Number,reflect:!0},seed:{attribute:"seed",type:Number,reflect:!0},a:{attribute:"boundary-separation",type:Number,reflect:!0},z:{attribute:"starting-point",type:Number,reflect:!0},v:{attribute:"drift-rate",type:Number,reflect:!0},t0:{attribute:"nondecision-time",type:Number,reflect:!0}}}constructor(){super(),this.firstUpdate=!0,this.drag=!1,this.scale={time:{min:0,max:1e3,step:1,round:Math.round},evidence:{min:-1,max:1,step:.01,round:Math.round},density:{min:0,max:10,step:.01,round:Math.round}},this.measures=!1,this.means=!1,this.sds=!1,this.resample(),this.human=!1,this.trials=10,this.a=DDMMath.a.DEFAULT,this.z=DDMMath.z.DEFAULT,this.v=DDMMath.v.DEFAULT,this.t0=DDMMath.t0.DEFAULT,this.precision=.005,this.random=null,this.bounds=null,this.startingPoint=null,this.data={},this.model={},this.animate=!1,this.paused=!1,this.alignState()}clear(){this.trials=0,this.data.trials=[]}trial(t={}){this.trials+=1,this.human?this.data.trials.push(t):this.animate=!0}pauseTrial(){select(this.renderRoot).select(".path[data-new-trial-ease-time]").interrupt("new").select(".curve").interrupt("new"),this.paused=!0}resumeTrial(){this.paused=!1,this.requestUpdate()}resample(){this.seed=uniform(0,1)()}alignPath(t,s,e,B,i){const F=normal.source(lcg(t))(0,this.precision**.5),Q=-s/2,l=s/2,U=s*e-s/2,a=B*this.precision,g=[];for(g.push({t:i,e:U});g.at(-1).e>Q&&g.at(-1).e<l;)g.push({t:g.at(-1).t+1e3*this.precision,e:g.at(-1).e+a+DDMMath.s.DEFAULT*F()});return g}alignCorrectDistribution(t,s,e,B){const i=DDMMath.azv2pC(t,s,e),F=[{t:0,d:0},{t:this.t0,d:0}];for(let Q=this.scale.time.min;Q<=this.scale.time.max-B;Q+=this.scale.time.step)Q>0&&F.push({t:B+Q,d:DDMMath.tazv2gC(Q/1e3,t,s,e)/i});return F}alignErrorDistribution(t,s,e,B){const i=DDMMath.azv2pE(t,s,e),F=[{t:0,d:0},{t:this.t0,d:0}];for(let Q=this.scale.time.min;Q<=this.scale.time.max-B;Q+=this.scale.time.step)Q>0&&F.push({t:B+Q,d:DDMMath.tazv2gE(Q/1e3,t,s,e)/i});return F}alignState(){this.random=uniform.source(lcg(this.seed))(0,1),this.bounds={lower:-this.a/2,upper:this.a/2},this.startingPoint=this.a*this.z-this.a/2,this.human?this.trials=this.data.trials.length:this.data.trials=Array.from({length:this.trials},(t,s)=>{const e=this.random()/1e3*997,B=this.animate&&s===this.trials-1,i=this.alignPath(e,this.a,this.z,this.v,this.t0),F=i.at(-1).e<=this.bounds.lower?"error":i.at(-1).e>=this.bounds.upper?"correct":"nr",Q="error"===F?i.at(-2).t+(this.bounds.lower-i.at(-2).e)/(i.at(-1).e-i.at(-2).e)*(1e3*this.precision):"correct"===F?i.at(-2).t+(this.bounds.upper-i.at(-2).e)/(i.at(-1).e-i.at(-2).e)*(1e3*this.precision):null;return{index:s,seed:e,path:i,rt:Q,outcome:F,animate:B}});const t=DDMMath.trials2stats(this.data.trials.filter(t=>!t.animate));this.data={...this.data,...t},this.model.accuracy=DDMMath.azv2pC(this.a,this.z,this.v),this.model.correctMeanRT=DDMMath.azvt02mC(this.a,this.z,this.v,this.t0),this.model.errorMeanRT=DDMMath.azvt02mE(this.a,this.z,this.v,this.t0),this.model.correctSDRT=DDMMath.azv2sdC(this.a,this.z,this.v),this.model.errorSDRT=DDMMath.azv2sdE(this.a,this.z,this.v),this.model.correctDist=this.alignCorrectDistribution(this.a,this.z,this.v,this.t0),this.model.errorDist=this.alignErrorDistribution(this.a,this.z,this.v,this.t0),this.dispatchEvent(new CustomEvent("ddm-model-output",{detail:{data:this.data,model:this.model},bubbles:!0}))}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;

          width: 27rem;
          height: 18rem;
        }

        .main {
          width: 100%;
          height: 100%;
        }

        text {
          /* stylelint-disable property-no-vendor-prefix */
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
        }

        /*  
          UNDERLAYER
        */
        .background {
          fill: var(---color-element-background);
          stroke: none;
          stroke-width: 1;
          shape-rendering: crispEdges;
        }

        .title {
          font-weight: 600;

          fill: currentColor;
        }

        .axis path,
        .axis line {
          stroke: var(---color-element-border);
          /* shape-rendering: crispEdges; */
        }

        .tick {
          font-size: 0.75rem;
        }

        /*  
          CONTENT
        */
        .line {
          fill: none;
          stroke: var(---color-element-emphasis);
          stroke-width: 2;
        }

        .curve {
          stroke-width: 2;
        }

        .path .curve {
          opacity: 0.5;

          fill: none;

          transition: opacity 0.5s;
        }

        .path.highlight .curve {
          filter: url("#shadow-2");
          opacity: 1;
        }

        .path.correct .curve {
          /* stroke: var(---color-correct); */
        }

        .path.error .curve {
          /* stroke: var(---color-error); */
        }

        .stop-0 {
          stop-color: var(---color-correct);
        }

        .stop-100 {
          stop-color: var(---color-error);
        }

        .path.animate .curve {
          opacity: 1;

          stroke: url("#path-animate");
        }

        .dist.correct .curve {
          fill: var(---color-correct-light);
          stroke: var(---color-correct);
        }

        .dist.error .curve {
          fill: var(---color-error-light);
          stroke: var(---color-error);
        }

        .rt .mark {
          stroke-width: 1;
        }

        .accuracy.model .bar {
          stroke: none;
        }

        .accuracy.model.correct .bar {
          fill: var(---color-correct);
        }

        .accuracy.model.error .bar {
          fill: var(---color-error);
        }

        .accuracy.data .mark {
          stroke-width: 2;
        }

        .accuracy.data.correct .mark {
          stroke: var(---color-correct-light);
        }

        .accuracy.data.error .mark {
          stroke: var(---color-error-light);
        }

        /*
          OVERLAYER
        */
        .boundary.interactive {
          cursor: ns-resize;
        }

        .t0z.interactive {
          cursor: move;
        }

        .boundary.interactive,
        .t0z.interactive {
          filter: url("#shadow-2");
          outline: none;
        }

        .boundary.interactive:hover,
        .t0z.interactive:hover {
          filter: url("#shadow-4");

          /* HACK: This gets Safari to correctly apply the filter! */
          /* https://github.com/emilbjorklund/svg-weirdness/issues/27 */
          transform: translateX(0);
        }

        .boundary.interactive:active,
        .t0z.interactive:active {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          transform: translateY(0);
        }

        :host(.keyboard) .boundary.interactive:focus,
        :host(.keyboard) .t0z.interactive:focus {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          transform: translateZ(0);
        }

        .t0z .point {
          fill: var(---color-element-emphasis);
          stroke-width: 0;

          r: 6px;
        }

        .drift {
          pointer-events: visible;

          fill: none;
          stroke: var(---color-element-emphasis);
          stroke-dasharray: 8 4;
          stroke-width: 2;
        }

        .drift.interactive {
          cursor: ns-resize;

          filter: url("#shadow-2");
          outline: none;

          /* HACK: This gets Safari to correctly apply the filter! */
          fill: #000000;
          fill-opacity: 0;
        }

        .drift.interactive:hover {
          filter: url("#shadow-4");

          /* HACK: This gets Safari to correctly apply the filter! */
          fill: #ff0000;
        }

        .drift.interactive:active {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          fill: #00ff00;
        }

        :host(.keyboard) .drift.interactive:focus {
          filter: url("#shadow-8");

          /* HACK: This gets Safari to correctly apply the filter! */
          fill: #0000ff;
        }

        .drift .arrow {
          stroke-dasharray: none;
        }

        /* Make larger targets for touch users */
        .interactive .touch {
          stroke: #000000;
          stroke-dasharray: none;
          stroke-opacity: 0;
        }

        @media (pointer: coarse) {
          .interactive .touch {
            stroke-linecap: round;
            stroke-width: 12;
          }
        }

        .measure .line.short {
          stroke-width: 0;
        }

        .measure .markers {
          fill: none;
          stroke-width: 0;
        }

        .measure .label {
          font-size: 0.75rem;

          fill: currentColor;
        }

        .measure.a .line {
          stroke: var(---color-a);
        }

        .measure.a .label {
          dominant-baseline: auto;
          text-anchor: end;
        }

        .measure.z .line {
          stroke: var(---color-z);
        }

        .measure.z .label,
        /* Hack to avoid Safari weirdness */
        .measure.z .label tspan {
          dominant-baseline: hanging;
          text-anchor: start;
        }

        .measure.v .line {
          stroke: var(---color-v);
        }

        .measure.v .label {
          dominant-baseline: auto;
          text-anchor: start;
        }

        .measure.t0 .line {
          stroke: var(---color-t0);
        }

        .measure.t0 .label {
          dominant-baseline: auto;
          text-anchor: middle;
        }

        .measure-arrow {
          fill: context-stroke;
          stroke: context-stroke;
        }

        .measure-arrow .arrow {
          stroke-width: 1;
        }

        .measure-arrow.capped .cap {
          stroke-width: 2;
        }

        /* Hack to avoid lack of context-stroke and context-fill in Safari */
        .measure-arrow.a {
          fill: var(---color-a);
          stroke: var(---color-a);
        }

        /* Hack to avoid lack of context-stroke and context-fill in Safari */
        .measure-arrow.z {
          fill: var(---color-z);
          stroke: var(---color-z);
        }

        /* Hack to avoid lack of context-stroke and context-fill in Safari */
        .measure-arrow.v {
          fill: var(---color-v);
          stroke: var(---color-v);
        }

        /* Hack to avoid lack of context-stroke and context-fill in Safari */
        .measure-arrow.t0 {
          fill: var(---color-t0);
          stroke: var(---color-t0);
        }

        .sd .indicator,
        .mean .indicator {
          stroke-width: 2;
        }

        .sd.model .indicator,
        .mean.model .indicator {
          stroke-dasharray: 2 2;
        }

        .sd.data .indicator,
        .mean.data .indicator {
          stroke-dasharray: 1 1;
        }

        .sd.correct .indicator,
        .mean.correct .indicator {
          stroke: var(---color-correct-dark);
        }

        .sd.error .indicator,
        .mean.error .indicator {
          stroke: var(---color-error-dark);
        }

        /* Hack to avoid lack of context-stroke and context-fill in Safari */
        .cap.correct {
          fill: var(---color-correct-dark);
          stroke: var(---color-correct-dark);
          stroke-dasharray: 100%;
        }

        /* Hack to avoid lack of context-stroke and context-fill in Safari */
        .cap.error {
          fill: var(---color-error-dark);
          stroke: var(---color-error-dark);
          stroke-dasharray: 100%;
        }

        .rt-label rect {
          filter: url("#shadow-2");

          fill: var(--color-background);
          rx: 4;
        }

        .rt-label text {
          font-size: 0.75rem;
          
          text-anchor: middle;
        }

        .rt-label.correct text {
          dominant-baseline: auto;
        }

        .rt-label.error text {
          dominant-baseline: hanging;
        }
      `]}render(){return x$3``}willUpdate(){this.alignState()}update(t){if(super.update(t),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const s=this.width,e=this.height;let B,i;s/e>1.5?(i=e,B=1.5*i):(B=s,i=B/1.5);const F=1*this.rem,Q=3*this.rem,l=3.75*this.rem,U=3.25*this.rem,a=i-(F+Q),g=B-(l+U),I=.75*this.rem,c=.5*a,n=.25*a-I,r=.75*this.rem,o=.9*g,d=.1*g-r,C=parseInt(this.getComputedStyleValue("---transition-duration"),10),b=linear().domain([this.scale.time.min,this.scale.time.max]).range([0,o]),u=linear().domain([this.scale.evidence.min,this.scale.evidence.max]).range([c,0]),h=linear().domain([this.scale.density.min,this.scale.density.max]).range([n,0]),y=linear().domain([this.scale.density.min,this.scale.density.max]).range([0,n]),x=linear().domain([0,1]).range([0,a]),A=drag().subject((t,s)=>({x:b(s.t0),y:u(s.startingPoint)})).on("start",t=>{select(t.currentTarget).classed("dragging",!0)}).on("drag",t=>{this.drag=!0;const s=!!t.sourceEvent.shiftKey&&(Math.abs(t.x-t.subject.x)>Math.abs(t.y-t.subject.y)?"t0":"z");let e=b.invert(t.x),B=(u.invert(t.y)+this.a/2)/this.a;e="z"===s?b.invert(t.subject.x):e<DDMMath.t0.MIN?DDMMath.t0.MIN:e>DDMMath.t0.MAX?DDMMath.t0.MAX:e,B="t0"===s?(u.invert(t.subject.y)+this.a/2)/this.a:B<DDMMath.z.MIN?DDMMath.z.MIN:B>DDMMath.z.MAX?DDMMath.z.MAX:B,this.t0=e,this.z=B,this.alignState(),this.dispatchEvent(new CustomEvent("ddm-model-t0",{detail:{t0:this.t0},bubbles:!0})),this.dispatchEvent(new CustomEvent("ddm-model-z",{detail:{z:this.z},bubbles:!0}))}).on("end",t=>{select(t.currentTarget).classed("dragging",!1),this.drag=!1}),G=drag().on("start",t=>{select(t.currentTarget).classed("dragging",!0)}).on("drag",t=>{this.drag=!0;let s=(u.invert(t.y)-this.startingPoint)/(b.invert(t.x)-this.t0)*1e3;s=s<DDMMath.v.MIN?DDMMath.v.MIN:s>DDMMath.v.MAX?DDMMath.v.MAX:s,this.v=s,this.alignState(),this.dispatchEvent(new CustomEvent("ddm-model-v",{detail:{v:this.v},bubbles:!0}))}).on("end",t=>{select(t.currentTarget).classed("dragging",!1),this.drag=!1}),R=drag().subject((t,s)=>({x:0,y:u(s.value)})).on("start",t=>{select(t.currentTarget).classed("dragging",!0)}).on("drag",t=>{this.drag=!0;const s=u.invert(t.y);let e=Math.abs(2*s);e=e<DDMMath.a.MIN?DDMMath.a.MIN:e>DDMMath.a.MAX?DDMMath.a.MAX:e,this.a=e,this.alignState(),this.dispatchEvent(new CustomEvent("ddm-model-a",{detail:{a:this.a},bubbles:!0}))}).on("end",t=>{select(t.currentTarget).classed("dragging",!1),this.drag=!1}),L=shapeLine().x(t=>b(t.t)).y(t=>u(t.e)),m=shapeLine().x(t=>b(t.t)).y(t=>h(t.d)),S=shapeLine().x(t=>b(t.t)).y(t=>y(t.d)),p=select(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),V=p.enter().append("svg").classed("main",!0).each((t,s,e)=>{B$1(AccumulableElement.svgFilters,e[s])}),Z=V.append("defs").classed("markers",!0),E=t=>{Z.append("marker").attr("id",`measure-arrow-${t}`).attr("class",`measure-arrow ${t}`).attr("orient","auto-start-reverse").attr("markerUnits","userSpaceOnUse").attr("viewBox","-10 -6 12 12").attr("refX","0").attr("refY","0").attr("markerWidth","12").attr("markerHeight","12").append("path").attr("class","arrow").attr("d","M -7 -3 l 6 3 l -6 3 z")},N=t=>{const s=Z.append("marker").attr("id",`measure-capped-arrow-${t}`).attr("class",`measure-arrow capped ${t}`).attr("orient","auto-start-reverse").attr("markerUnits","userSpaceOnUse").attr("viewBox","-10 -6 12 12").attr("refX","0").attr("refY","0").attr("markerWidth","12").attr("markerHeight","12");s.append("path").attr("class","arrow").attr("d","M -7 -3 l 6 3 l -6 3 z"),s.append("path").attr("class","cap").attr("d","M 0 -4 l 0 8")};E("a"),E("z"),N("v"),E("t0"),N("t0");const X=t=>{Z.append("marker").attr("id",`model-sd-cap-${t}`).attr("class",`model-sd cap ${t}`).attr("orient","auto-start-reverse").attr("markerUnits","userSpaceOnUse").attr("viewBox","-5 -5 10 10").attr("refX","0").attr("refY","0").attr("markerWidth","10").attr("markerHeight","10").append("path").attr("stroke","context-stroke").attr("fill","context-stroke").attr("stroke-width","2").attr("d","M 0 -4 l 0 8"),Z.append("marker").attr("id",`data-sd-cap-${t}`).attr("class",`data-sd cap ${t}`).attr("orient","auto-start-reverse").attr("markerUnits","userSpaceOnUse").attr("viewBox","-5 -5 10 10").attr("refX","0").attr("refY","0").attr("markerWidth","10").attr("markerHeight","10").append("path").attr("stroke","context-stroke").attr("fill","context-stroke").attr("stroke-width","2").attr("d","M 0 -3 l 0 6")};X("error"),X("correct");const D=Z.append("linearGradient").attr("id","path-animate").attr("gradientUnits","userSpaceOnUse").attr("color-interpolation","linearRGB").attr("x1","0").attr("x2","0").attr("y1",u(this.bounds.upper)).attr("y2",u(this.bounds.lower));D.append("stop").classed("stop-0",!0).attr("offset","0%"),D.append("stop").classed("stop-100",!0).attr("offset","100%");const W=V.merge(p).attr("viewBox",`0 0 ${B} ${i}`),H=W.selectAll(".plot.density").data([{outcome:"correct",data:{meanRT:this.data.correctMeanRT,sdRT:this.data.correctSDRT},model:{meanRT:this.model.correctMeanRT,sdRT:this.model.correctSDRT,dist:this.model.correctDist},densityScale:h,densityLine:m,alignDistribution:this.alignCorrectDistribution.bind(this)},{outcome:"error",data:{meanRT:this.data.errorMeanRT,sdRT:this.data.errorSDRT},model:{meanRT:this.model.errorMeanRT,sdRT:this.model.errorSDRT,dist:this.model.errorDist},densityScale:y,densityLine:S,alignDistribution:this.alignErrorDistribution.bind(this)}]),v=V.append("g").classed("plot evidence",!0),w=H.enter().append("g").attr("class",t=>`plot density ${t.outcome}`),Y=V.append("g").classed("plot accuracy",!0),f=W.select(".plot.evidence").attr("transform",`translate(${l}, ${F+n+I})`),J=w.merge(H).attr("transform",t=>`translate(${l}, ${"correct"===t.outcome?F:F+n+c+2*I})`),M=W.select(".plot.accuracy").attr("transform",`translate(${l+o+r}, ${F})`);v.append("clipPath").attr("id","clip-evidence").append("rect"),f.select("clipPath rect").attr("y",u(this.bounds.upper)).attr("height",u(this.bounds.lower)-u(this.bounds.upper)+1).attr("width",o+1);const k=v.append("g").classed("underlayer",!0),T=w.append("g").classed("underlayer",!0),z=Y.append("g").classed("underlayer",!0),K=f.select(".underlayer"),O=J.select(".underlayer"),$=M.select(".underlayer");v.append("g").classed("content",!0).append("g").classed("paths",!0);const P=w.append("g").classed("content",!0);Y.append("g").classed("content",!0);const j=f.select(".content"),_=J.select(".content"),q=M.select(".content");v.append("g").classed("overlayer",!0),w.append("g").classed("overlayer",!0),Y.append("g").classed("overlayer",!0);const tt=f.select(".overlayer"),st=J.select(".overlayer");k.append("rect").classed("background",!0),T.append("rect").classed("background",!0),K.select(".background").transition().duration(this.drag?0:C).ease(cubicOut).attr("y",u(this.bounds.upper)).attr("height",u(this.bounds.lower)-u(this.bounds.upper)).attr("width",o),O.select(".background").transition().duration(C).ease(cubicOut).attr("height",n).attr("width",o),T.filter(t=>"error"===t.outcome).append("g").classed("axis time",!0);const et=O.filter(t=>"error"===t.outcome).select(".axis.time").attr("transform",`translate(0, ${n+.25*this.rem})`);et.transition().duration(C).ease(cubicOut).call(axisBottom(b)).attr("font-size",null).attr("font-family",null).selectAll("line, path").attr("stroke",null);const Bt=T.filter(t=>"error"===t.outcome).append("text").classed("title time",!0).attr("text-anchor","middle");Bt.append("tspan").classed("name",!0).text("Time (ms)"),O.filter(t=>"error"===t.outcome).select(".title.time").transition().duration(C).ease(cubicOut).attr("transform",`translate(${o/2}, ${n+2.5*this.rem})`),k.append("g").classed("axis evidence",!0),T.append("g").attr("class",t=>`axis density ${t.outcome}`),z.append("g").classed("axis accuracy",!0);const it=K.select(".axis.evidence").attr("transform",`translate(${-.25*this.rem}, 0)`),Ft=O.select(".axis.density").attr("transform",`translate(${-.25*this.rem}, 0)`),Qt=$.select(".axis.accuracy").attr("transform",`translate(${d+.25*this.rem}, 0)`),lt=it.transition().duration(C).ease(cubicOut).call(axisLeft(u)).attr("font-size",null).attr("font-family",null),Ut=Ft.transition().duration(C).ease(cubicOut).each((t,s,e)=>{axisLeft(t.densityScale).ticks(2)(select(e[s]))}).attr("font-size",null).attr("font-family",null),at=Qt.transition().duration(C).ease(cubicOut).call(axisRight(x)).attr("font-size",null).attr("font-family",null);lt.selectAll("line, path").attr("stroke",null),Ut.selectAll("line, path").attr("stroke",null),at.selectAll("line, path").attr("stroke",null);const gt=k.append("text").classed("title evidence",!0).attr("text-anchor","middle"),It=T.append("text").attr("class",t=>`title density ${t.outcome}`).attr("text-anchor","middle"),ct=z.append("text").classed("title accuracy",!0).attr("text-anchor","middle");gt.append("tspan").classed("name",!0).text("Evidence"),It.append("tspan").classed("name",!0).text("Density"),ct.append("tspan").classed("name",!0).text("Accuracy"),K.select(".title.evidence").transition().duration(C).ease(cubicOut).attr("transform",`translate(${-2.5*this.rem}, ${c/2})rotate(-90)`),O.select(".title.density").transition().duration(C).ease(cubicOut).attr("transform",`translate(${-2.5*this.rem}, ${n/2})rotate(-90)`),$.select(".title.accuracy").transition().duration(C).ease(cubicOut).attr("transform",`translate(${d+2.25*this.rem}, ${a/2})rotate(90)`);const nt=j.select(".paths").selectAll(".path").data(this.data.trials.filter(t=>void 0!==t.path)),rt=local(),ot=nt.enter().append("g").classed("path",!0).attr("data-new-trial-ease-time",0).on("pointerenter",(t,s)=>{if(!this.drag){select(t.currentTarget).classed("highlight",!0).raise();const e=tt.append("g").classed(`rt-label ${s.outcome}`,!0),B=e.append("rect"),i=e.append("text").text(`RT = ${s.rt.toFixed()}`).attr("x",b(s.rt)).attr("y","correct"===s.outcome?u(this.bounds.upper)-.25*this.rem:u(this.bounds.lower)+.125*this.rem).node().getBBox();B.attr("x",i.x-.125*this.rem).attr("y",i.y+.125*this.rem).attr("width",i.width+.25*this.rem).attr("height",i.height-.25*this.rem),rt.set(t.currentTarget,e)}}).on("pointerout",(t,s)=>{this.drag||(select(t.currentTarget).classed("highlight",!1).lower(),t.currentTarget.parentNode.insertBefore(t.currentTarget,t.currentTarget.parentNode.children[s.index]),rt.get(t.currentTarget).remove())});ot.append("path").classed("curve",!0).attr("clip-path","url(#clip-evidence)").attr("pathLength",1).attr("stroke-dashoffset",1);const dt=ot.merge(nt).attr("class",t=>`path ${t.outcome}`);dt.select(".curve").transition().duration(this.drag?0:C).ease(cubicOut).attr("stroke",t=>this.getComputedStyleValue(`---color-${t.outcome}`)).attrTween("d",(t,s,e)=>{const B=e[s],i=interpolate$1(void 0!==B.a?B.a:this.a,this.a),F=interpolate$1(void 0!==B.z?B.z:this.z,this.z),Q=interpolate$1(void 0!==B.v?B.v:this.v,this.v),l=interpolate$1(void 0!==B.t0?B.t0:this.t0,this.t0);return s=>{B.a=i(s),B.z=F(s),B.v=Q(s),B.t0=l(s);const e=this.alignPath(t.seed,B.a,B.z,B.v,B.t0);return L(e)}});const Ct=dt.filter(t=>t.animate&&!this.paused);if(!Ct.empty()){const t=Ct.attr("data-new-trial-ease-time"),s=s=>linear().domain([0,1]).range([t,1])(s),e=s=>e=>linear().domain([s(t),1]).range([0,1])(s(e));Ct.classed("animate",!0).select(".curve").attr("stroke-dasharray",1),Ct.transition("new").duration(s=>Math.floor(1.5*s.rt*(1-t))).ease(s).attr("data-new-trial-ease-time",1).select(".curve").attrTween("stroke-dashoffset",(t,s,B)=>{const i=interpolate$1(B[s].getAttribute("stroke-dashoffset"),0);return t=>i(e(linear$1)(t))}).on("end",(t,s,e)=>{select(e[s].parentElement).classed("animate",!1).attr("data-new-trial-ease-time",null),t.animate=!1,this.animate=!1,this.alignState(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("accumulable-response",{detail:{outcome:t.outcome,data:this.data,model:this.model},bubbles:!0}))})}const bt=dt.filter(t=>t.animate&&this.paused);if(!bt.empty()){const t=bt.attr("data-new-trial-ease-time");bt.classed("animate",!0).select(".curve").attr("stroke-dasharray",1).attr("stroke-dashoffset",()=>interpolate$1(1,0)(linear$1(t)))}dt.filter(t=>!t.animate).attr("data-new-trial-ease-time",null),nt.exit().remove();const ut=P.append("g").attr("class",t=>`dist ${t.outcome}`);ut.append("path").classed("curve",!0),_.select(".dist").select(".curve").transition().duration(this.drag?0:C).ease(cubicOut).attrTween("d",(t,s,e)=>{const B=e[s],i=interpolate$1(void 0!==B.a?B.a:this.a,this.a),F=interpolate$1(void 0!==B.z?B.z:this.z,this.z),Q=interpolate$1(void 0!==B.v?B.v:this.v,this.v),l=interpolate$1(void 0!==B.t0?B.t0:this.t0,this.t0);return s=>{B.a=i(s),B.z=F(s),B.v=Q(s),B.t0=l(s);const e=t.alignDistribution(B.a,B.z,B.v,B.t0);return t.densityLine(e)}});const ht=j.selectAll(".rt").data(this.data.trials),yt=ht.enter().append("g");yt.append("line").classed("mark",!0).attr("x1",t=>b(t.rt)).attr("x2",t=>b(t.rt)).attr("y1",t=>"correct"===t.outcome?u(1)-.125*this.rem:u(-1)+.125*this.rem).attr("y2",t=>"correct"===t.outcome?u(1)-.675*this.rem:u(-1)+.675*this.rem);const xt=yt.merge(ht).attr("class",t=>`rt ${t.outcome}`);xt.filter(t=>!t.animate).select(".mark").transition().duration(this.drag?0:C).ease(cubicOut).attr("stroke",t=>this.getComputedStyleValue(`---color-${t.outcome}`)).attr("x1",t=>b(t.rt)).attr("x2",t=>b(t.rt)).attr("y1",t=>"correct"===t.outcome?u(1)-.125*this.rem:u(-1)+.125*this.rem).attr("y2",t=>"correct"===t.outcome?u(1)-.675*this.rem:u(-1)+.675*this.rem),ht.exit().remove();const At=q.selectAll(".accuracy.model").data([this.model.accuracy,1-this.model.accuracy]),Gt=At.enter().append("g").attr("class",(t,s)=>"accuracy model "+(0===s?"correct":"error"));Gt.append("rect").classed("bar",!0).attr("x",0),Gt.merge(At).select("rect").transition().duration(this.drag?0:C).ease(cubicOut).attr("y",(t,s)=>x(0===s?0:1-t)).attr("width",d).attr("height",t=>x(t)),At.exit().remove();const Rt=q.selectAll(".accuracy.data").data(Number.isNaN(this.data.accuracy)?[]:[this.data.accuracy]),Lt=Rt.enter().append("g").classed("accuracy data",!0);Lt.append("line").classed("mark",!0);const mt=Lt.merge(Rt).attr("class",t=>"accuracy data "+(t<this.model.accuracy.correct?"correct":"error"));mt.select(".mark").transition().duration(this.drag?0:C).ease(cubicOut).attr("x1",0+.25*this.rem).attr("x2",d-.25*this.rem).attr("y1",t=>x(t)-1).attr("y2",t=>x(t)-1),Rt.exit().remove();const St=tt.selectAll(".boundary").data([{bound:"upper",value:this.bounds.upper},{bound:"lower",value:this.bounds.lower}]),pt=St.enter().append("g").attr("class",(t,s)=>"boundary "+(0===s?"correct":"error"));pt.append("line").classed("line",!0),pt.append("line").classed("line touch",!0);const Vt=pt.merge(St).attr("tabindex",this.interactive?0:null).classed("interactive",this.interactive).on("keydown",this.interactive?(t,s)=>{if(["ArrowUp","ArrowDown"].includes(t.key)){let{a:e}=this;switch(t.key){case"ArrowUp":e+="upper"===s.bound?t.shiftKey?DDMMath.a.STEP:DDMMath.a.JUMP:t.shiftKey?-.01:-.1;break;case"ArrowDown":e+="upper"===s.bound?t.shiftKey?-.01:-.1:t.shiftKey?DDMMath.a.STEP:DDMMath.a.JUMP}e=e<DDMMath.a.MIN?DDMMath.a.MIN:e>DDMMath.a.MAX?DDMMath.a.MAX:e,this.a=e,this.alignState(),this.dispatchEvent(new CustomEvent("ddm-model-a",{detail:{a:this.a},bubbles:!0})),t.preventDefault()}}:null);(this.firstUpdate||t.has("interactive"))&&(this.interactive?Vt.call(R):Vt.on(".drag",null)),Vt.select(".line").transition().duration(this.drag?0:C).ease(cubicOut).attr("x1",b(this.scale.time.min)).attr("x2",b(this.scale.time.max)).attr("y1",t=>u(t.value)).attr("y2",t=>u(t.value)),Vt.select(".line.touch").transition().duration(this.drag?0:C).ease(cubicOut).attr("x1",b(this.scale.time.min)).attr("x2",b(this.scale.time.max)).attr("y1",t=>u(t.value)).attr("y2",t=>u(t.value)),St.exit().remove();const Zt=tt.selectAll(".drift").data([{v:this.v,t0:this.t0,startingPoint:this.startingPoint}]),Et=Zt.enter().append("g").classed("drift",!0);Et.append("line").classed("line",!0),Et.append("line").classed("line touch",!0),Et.append("path").classed("arrow",!0),Et.append("path").classed("arrow touch",!0);const Nt=Et.merge(Zt).attr("tabindex",this.interactive?0:null).classed("interactive",this.interactive).on("keydown",this.interactive?t=>{if(["ArrowUp","ArrowDown"].includes(t.key)){let{v:s}=this;switch(t.key){case"ArrowUp":s+=t.shiftKey?DDMMath.v.STEP:DDMMath.v.JUMP;break;case"ArrowDown":s-=t.shiftKey?DDMMath.v.STEP:DDMMath.v.JUMP}s=s<DDMMath.v.MIN?DDMMath.v.MIN:s>DDMMath.v.MAX?DDMMath.v.MAX:s,this.v=s,this.alignState(),this.dispatchEvent(new CustomEvent("ddm-model-v",{detail:{v:this.v},bubbles:!0})),t.preventDefault()}}:null);(this.firstUpdate||t.has("interactive"))&&(this.interactive?Nt.call(G):Nt.on(".drag",null));const Xt=(u(0)-u(1))/(b(1)-b(0));Nt.transition().duration(this.drag?0:C).ease(cubicOut).attr("transform",t=>`translate(${b(t.t0)}, ${u(t.startingPoint)})\n          rotate(${-Math.atan(t.v/1e3*Xt)*(180/Math.PI)})`),Nt.select(".line").attr("x2",b(200)),Nt.select(".line.touch").attr("x2",b(200)),Nt.select(".arrow").attr("d",`\n        M ${b(200)-.5*this.rem},${.5*-this.rem}\n        l ${.5*this.rem},${.5*this.rem}\n        l ${.5*-this.rem},${.5*this.rem}\n      `),Nt.select(".arrow.touch").attr("d",`\n        M ${b(200)-.5*this.rem},${.5*-this.rem}\n        l ${.5*this.rem},${.5*this.rem}\n        l ${.5*-this.rem},${.5*this.rem}\n      `),Zt.exit().remove();const Dt=tt.selectAll(".t0z").data([{t0:this.t0,startingPoint:this.startingPoint}]),Wt=Dt.enter().append("g").classed("t0z",!0);Wt.append("line").classed("line",!0),Wt.append("line").classed("line touch",!0),Wt.append("circle").classed("point touch",!0);const Ht=Wt.merge(Dt).attr("tabindex",this.interactive?0:null).classed("interactive",this.interactive).on("keydown",this.interactive?t=>{if(["ArrowUp","ArrowDown"].includes(t.key)){let{z:s}=this;switch(t.key){case"ArrowUp":s+=t.shiftKey?DDMMath.z.STEP:DDMMath.z.JUMP;break;case"ArrowDown":s-=t.shiftKey?DDMMath.z.STEP:DDMMath.z.JUMP}s=s<DDMMath.z.MIN?DDMMath.z.MIN:s>DDMMath.z.MAX?DDMMath.z.MAX:s,this.z=s,this.alignState(),this.dispatchEvent(new CustomEvent("ddm-model-z",{detail:{z:this.z},bubbles:!0})),t.preventDefault()}if(["ArrowLeft","ArrowRight"].includes(t.key)){let s=this.t0;switch(t.key){case"ArrowRight":s+=t.shiftKey?DDMMath.t0.STEP:DDMMath.t0.JUMP;break;case"ArrowLeft":s-=t.shiftKey?DDMMath.t0.STEP:DDMMath.t0.JUMP}s=s<DDMMath.t0.MIN?DDMMath.t0.MIN:s>DDMMath.t0.MAX?DDMMath.t0.MAX:s,this.t0=s,this.alignState(),this.dispatchEvent(new CustomEvent("ddm-model-t0",{detail:{t0:this.t0},bubbles:!0})),t.preventDefault()}}:null);(this.firstUpdate||t.has("interactive"))&&(this.interactive?Ht.call(A):Ht.on(".drag",null)),Ht.select(".line").transition().duration(this.drag?0:C).ease(cubicOut).attr("x1",b(0)).attr("x2",t=>b(t.t0)).attr("y1",t=>u(t.startingPoint)).attr("y2",t=>u(t.startingPoint)),Ht.select(".line.touch").transition().duration(this.drag?0:C).ease(cubicOut).attr("x1",b(0)).attr("x2",t=>b(t.t0)).attr("y1",t=>u(t.startingPoint)).attr("y2",t=>u(t.startingPoint)),Ht.select(".point").transition().duration(this.drag?0:C).ease(cubicOut).attr("cx",t=>b(t.t0)).attr("cy",t=>u(t.startingPoint)),Dt.exit().remove();const vt=tt.selectAll(".measure.a").data(this.measures?[this.a]:[]),wt=vt.enter().append("g").classed("measure a",!0);wt.append("line").classed("line",!0),wt.append("line").classed("markers",!0).attr("marker-start","url(#measure-arrow-a)").attr("marker-end","url(#measure-arrow-a)");const Yt=wt.append("text").classed("label",!0);Yt.append("tspan").classed("a math-var",!0).text("a"),Yt.append("tspan").classed("equals",!0).text(" = "),Yt.append("tspan").classed("value",!0);const ft=Math.abs(u(this.bounds.upper)-u(this.bounds.lower))<=4,Jt=wt.merge(vt);Jt.select(".line").classed("short",ft).transition().duration(this.drag?0:C).ease(cubicOut).attr("x1",b(this.scale.time.max)-.75*this.rem).attr("y1",u(this.bounds.upper)+2).attr("x2",b(this.scale.time.max)-.75*this.rem).attr("y2",u(this.bounds.lower)-2),Jt.select(".markers").transition().duration(this.drag?0:C).ease(cubicOut).attr("x1",b(this.scale.time.max)-.75*this.rem).attr("y1",u(this.bounds.upper)).attr("x2",b(this.scale.time.max)-.75*this.rem).attr("y2",u(this.bounds.lower));Jt.select(".label").transition().duration(this.drag?0:C).ease(cubicOut).attr("x",b(this.scale.time.max)).attr("y",u(this.bounds.upper)-.25*this.rem).select(".value").text(format$1(".2f")(this.a)),vt.exit().remove();const Mt=tt.selectAll(".measure.z").data(this.measures?[this.z]:[]),kt=Mt.enter().append("g").classed("measure z",!0);kt.append("line").classed("line",!0),kt.append("line").classed("markers",!0).attr("marker-start","url(#measure-arrow-z)").attr("marker-end","url(#measure-arrow-z)");const Tt=kt.append("text").classed("label",!0);Tt.append("tspan").classed("z math-var",!0).text("z"),Tt.append("tspan").classed("equals",!0).text(" = "),Tt.append("tspan").classed("value",!0);const zt=Math.abs(u(this.startingPoint)-u(this.bounds.lower))<=4,Kt=kt.merge(Mt);Kt.select(".line").classed("short",zt).transition().duration(this.drag?0:C).ease(cubicOut).attr("x1",b(this.scale.time.min)+.75*this.rem).attr("y1",u(this.startingPoint)+2).attr("x2",b(this.scale.time.min)+.75*this.rem).attr("y2",u(this.bounds.lower)-2),Kt.select(".markers").transition().duration(this.drag?0:C).ease(cubicOut).attr("x1",b(this.scale.time.min)+.75*this.rem).attr("y1",u(this.startingPoint)).attr("x2",b(this.scale.time.min)+.75*this.rem).attr("y2",u(this.bounds.lower));Kt.select(".label").transition().duration(this.drag?0:C).ease(cubicOut).attr("x",b(this.scale.time.min)).attr("y",u(this.bounds.lower)+.125*this.rem).select(".value").text(format$1(".0%")(this.z)),Mt.exit().remove();const Ot=tt.selectAll(".measure.v").data(this.measures?[this.v]:[]),$t=Ot.enter().append("g").classed("measure v",!0);$t.append("path").classed("line",!0),$t.append("path").classed("markers",!0).attr("marker-start","url(#measure-capped-arrow-v)").attr("marker-end","url(#measure-capped-arrow-v)");const Pt=$t.append("text").classed("label",!0);Pt.append("tspan").classed("v math-var",!0).text("v"),Pt.append("tspan").classed("equals",!0).text(" = "),Pt.append("tspan").classed("value",!0);const jt=b(200)-b(0)+.75*this.rem,_t=Math.atan(this.v/1e3*Xt),qt=Math.cos(_t)*jt,ts=Math.sin(_t)*jt,ss=2/jt,es=Math.atan(this.v/1e3*Xt)-ss,Bs=Math.cos(ss)*jt,is=Math.sin(ss)*jt,Fs=Math.cos(es)*jt,Qs=Math.sin(es)*jt,ls=es*jt<=4,Us=$t.merge(Ot);Us.select(".line").classed("short",ls).transition().duration(this.drag?0:C).ease(cubicOut).attr("d",`\n        M ${b(this.t0)+Bs}, ${u(this.startingPoint)-is}\n        A ${b(200)-b(0)+.75*this.rem} ${b(200)-b(0)+.75*this.rem} 0 0 0 ${b(this.t0)+Fs} ${u(this.startingPoint)-Qs}\n      `),Us.select(".markers").transition().duration(this.drag?0:C).ease(cubicOut).attr("d",`\n        M ${b(this.t0+200)+.75*this.rem}, ${u(this.startingPoint)}\n        A ${b(200)-b(0)+.75*this.rem} ${b(200)-b(0)+.75*this.rem} 0 0 0 ${b(this.t0)+qt} ${u(this.startingPoint)-ts}\n      `);Us.select(".label").transition().duration(this.drag?0:C).ease(cubicOut).attr("x",b(this.t0+200)+.5*this.rem).attr("y",u(this.bounds.upper)-.25*this.rem).select(".value").text(format$1(".2f")(this.v)),Ot.exit().remove();const as=tt.selectAll(".measure.t0").data(this.measures?[this.t0]:[]),gs=as.enter().append("g").classed("measure t0",!0);gs.append("line").classed("line",!0),gs.append("line").classed("markers",!0).attr("marker-start","url(#measure-arrow-t0)").attr("marker-end","url(#measure-capped-arrow-t0)");const Is=gs.append("text").classed("label",!0);Is.append("tspan").classed("t0 math-var",!0).text("tâ"),Is.append("tspan").classed("equals",!0).text(" = "),Is.append("tspan").classed("value",!0);const cs=Math.abs(b(0)-b(this.t0))<=4,ns=gs.merge(as);ns.select(".line").classed("short",cs).transition().duration(this.drag?0:C).ease(cubicOut).attr("x1",b(0)+2).attr("y1",u(this.startingPoint)-.75*this.rem).attr("x2",b(this.t0)-2).attr("y2",u(this.startingPoint)-.75*this.rem),ns.select(".markers").transition().duration(this.drag?0:C).ease(cubicOut).attr("x1",b(0)).attr("y1",u(this.startingPoint)-.75*this.rem).attr("x2",b(this.t0)).attr("y2",u(this.startingPoint)-.75*this.rem);ns.select(".label").transition().duration(this.drag?0:C).ease(cubicOut).attr("x",b(this.t0)+.25*this.rem).attr("y",u(this.bounds.upper)-.25*this.rem).select(".value").text(format$1("d")(this.t0)),as.exit().remove();const rs=st.selectAll(".model.mean").data(t=>this.means?[t]:[]),os=rs.enter().append("g").attr("class",t=>`model mean ${t.outcome}`);os.append("line").classed("indicator",!0);os.merge(rs).select(".indicator").transition().duration(this.drag?0:C).ease(cubicOut).attr("x1",t=>b(t.model.meanRT)).attr("x2",t=>b(t.model.meanRT)).attr("y1",t=>t.densityScale(this.scale.density.min)).attr("y2",t=>t.densityScale(this.scale.density.max)),rs.exit().remove();const ds=st.selectAll(".data.mean").data(t=>this.means&&!Number.isNaN(t.data.meanRT)?[t]:[]),Cs=ds.enter().append("g").attr("class",t=>`data mean ${t.outcome}`);Cs.append("line").classed("indicator",!0).attr("y1",t=>t.densityScale(0)+("correct"===t.outcome?.125:-.125)*this.rem).attr("y2",t=>t.densityScale(0)+("correct"===t.outcome?.675:-.675)*this.rem);Cs.merge(ds).select(".indicator").transition().duration(this.drag?0:C).ease(cubicOut).attr("x1",t=>b(t.data.meanRT)).attr("x2",t=>b(t.data.meanRT)).attr("y1",t=>t.densityScale(0)+("correct"===t.outcome?.125:-.125)*this.rem).attr("y2",t=>t.densityScale(0)+("correct"===t.outcome?.675:-.675)*this.rem),ds.exit().select(".indicator").transition().duration(this.drag?0:C).ease(cubicOut).attr("x1",0).attr("x2",0).on("end",(t,s,e)=>{select(e[s].parentElement).remove()});const bs=st.selectAll(".model.sd").data(t=>this.sds?[t]:[]),us=bs.enter().append("g").attr("class",t=>`model sd ${t.outcome}`);us.append("line").classed("indicator",!0).attr("marker-start",t=>`url(#model-sd-cap-${t.outcome})`).attr("marker-end",t=>`url(#model-sd-cap-${t.outcome})`);us.merge(bs).select(".indicator").transition().duration(this.drag?0:C).ease(cubicOut).attr("x1",t=>b(t.model.meanRT-t.model.sdRT/2)).attr("x2",t=>b(t.model.meanRT+t.model.sdRT/2)).attr("y1",t=>t.densityScale(5)).attr("y2",t=>t.densityScale(5)),bs.exit().remove();const hs=st.selectAll(".data.sd").data(t=>!this.sds||Number.isNaN(t.data.meanRT)||Number.isNaN(t.data.sdRT)?[]:[t]),ys=hs.enter().append("g").attr("class",t=>`data sd ${t.outcome}`);ys.append("line").classed("indicator",!0).attr("marker-start",t=>`url(#data-sd-cap-${t.outcome})`).attr("marker-end",t=>`url(#data-sd-cap-${t.outcome})`).attr("y1",t=>t.densityScale(0)+("correct"===t.outcome?.375:-.375)*this.rem).attr("y2",t=>t.densityScale(0)+("correct"===t.outcome?.375:-.375)*this.rem);ys.merge(hs).select(".indicator").transition().duration(this.drag?0:C).ease(cubicOut).attr("x1",t=>b(t.data.meanRT-t.data.sdRT/2)).attr("x2",t=>b(t.data.meanRT+t.data.sdRT/2)).attr("y1",t=>t.densityScale(0)+("correct"===t.outcome?.375:-.375)*this.rem).attr("y2",t=>t.densityScale(0)+("correct"===t.outcome?.375:-.375)*this.rem),hs.exit().select(".indicator").transition().duration(this.drag?0:C).ease(cubicOut).attr("x1",0).attr("x2",0).on("end",(t,s,e)=>{select(e[s].parentElement).remove()}),this.firstUpdate=!1}}customElements.define("ddm-model",DDMModel);class RDK2AFCTask extends(DecidablesMixinResizeable(AccumulableElement)){static get properties(){return{coherence:{attribute:"coherence",type:Number,reflect:!0},count:{attribute:"count",type:Number,reflect:!0},probability:{attribute:"probability",type:Number,reflect:!0},duration:{attribute:"duration",type:Number,reflect:!0},wait:{attribute:"wait",type:Number,reflect:!0},iti:{attribute:"iti",type:Number,reflect:!0},trials:{attribute:"trials",type:Number,reflect:!0},running:{attribute:"running",type:Boolean,reflect:!0},lifetime:{attribute:!1,type:Number,reflect:!1},speed:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.coherence=.5,this.count=100,this.probability=.5,this.duration=2e3,this.wait=2e3,this.iti=2e3,this.trials=5,this.running=!1,this.lifetime=400,this.speed=50,this.firstUpdate=!0,this.COHERENT=0,this.RANDOM=1,this.dots=[[],[]],this.trial=0,this.states=["resetted","iti","stimulus","wait","ended"],this.state="resetted",this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0,this.LEFT=180,this.RIGHT=0,this.currentDirection=void 0,this.signals=["left","right"],this.signal=void 0,this.runner=void 0,this.xScale=void 0,this.yScale=void 0}static get styles(){return[super.styles,i$5`
        :host {
          display: inline-block;

          width: 10rem;
          height: 10rem;
        }

        .main {
          width: 100%;
          height: 100%;
        }

        .background {
          fill: var(---color-element-disabled);
          stroke: none;
        }

        .outline {
          fill: none;
          stroke: var(---color-element-emphasis);
          stroke-width: 2px;
        }

        .dot {
          r: 2px;
        }

        .dots.coherent {
          fill: var(---color-background);
        }

        .dots.random {
          fill: var(---color-background);
        }

        .fixation {
          stroke: var(---color-text);
          stroke-width: 2px;
        }

        .query {
          font-size: 1.75rem;
          font-weight: 600;
        }
      `]}render(){return x$3``}update(t){if(super.update(t),Number.isNaN(this.width)||Number.isNaN(this.height)||Number.isNaN(this.rem))return;const s=this.width,e=this.height,B=Math.min(s,e),i=.25*this.rem,F=.25*this.rem,Q=.25*this.rem,l=B-(i+F),U=B-(Q+.25*this.rem);this.xScale=linear().domain([-1,1]).range([0,U]),this.yScale=linear().domain([1,-1]).range([0,l]);const a=select(this.renderRoot).selectAll(".main").data([{width:this.width,height:this.height,rem:this.rem}]),g=a.enter().append("svg").classed("main",!0),I=g.merge(a).attr("viewBox",`0 0 ${B} ${B}`);g.append("clipPath").attr("id","clip-rdk-task").append("circle"),I.select("clipPath circle").attr("cx",this.xScale(0)).attr("cy",this.yScale(0)).attr("r",this.xScale(1)-this.xScale(0));const c=g.append("g").classed("plot",!0),n=I.select(".plot").attr("transform",`translate(${Q}, ${i})`),r=c.append("g").classed("underlayer",!0),o=n.select(".underlayer");r.append("circle").classed("background",!0),o.select(".background").attr("cx",this.xScale(0)).attr("cy",this.yScale(0)).attr("r",this.xScale(1)-this.xScale(0)),c.append("g").classed("content",!0).attr("clip-path","url(#clip-rdk-task)");n.select(".content").selectAll(".dots").data([[],[]]).enter().append("g").classed("dots",!0).classed("coherent",(t,s)=>s===this.COHERENT).classed("random",(t,s)=>s===this.RANDOM);const d=c.append("g").classed("overlayer",!0),C=n.select(".overlayer");d.append("circle").classed("outline",!0),C.select(".outline").attr("cx",this.xScale(0)).attr("cy",this.yScale(0)).attr("r",this.xScale(1)-this.yScale(0)),(this.firstUpdate||t.has("running"))&&(this.running?(this.pauseTime&&(this.baseTime+=now()-this.pauseTime,this.pauseTime=0),this.runner=interval(this.run.bind(this),20)):void 0!==this.runner&&(this.runner.stop(),this.pauseTime=now())),this.firstUpdate=!1}reset(){void 0!==this.runner&&this.runner.stop(),this.running=!1,this.trial=0,this.state="resetted",this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0,this.signal=void 0,this.currentDirection=void 0;const t=select(this.renderRoot).select(".content").selectAll(".dots").data([[],[]]).selectAll(".dot").data(t=>t);t.exit().remove();select(this.renderRoot).select(".content").selectAll(".fixation").data([]).exit().remove();select(this.renderRoot).select(".content").selectAll(".query").data([]).exit().remove()}run(){const t=now(),s=this.baseTime?t-this.baseTime:0,e=this.baseTime?s-this.startTime:0,B=this.baseTime?s-this.lastTime:0;this.lastTime=s;let i=!1;if("resetted"===this.state?(this.state="iti",this.baseTime=t,this.startTime=0,this.dispatchEvent(new CustomEvent("rdk-block-start",{detail:{trials:this.trials},bubbles:!0}))):"iti"===this.state&&e>=this.iti?(i=!0,this.trial+=1,this.state="stimulus",this.startTime=s,this.signal=Math.random()<this.probability?"left":"right",this.currentDirection="left"===this.signal?this.LEFT:this.RIGHT,this.dispatchEvent(new CustomEvent("rdk-trial-start",{detail:{trials:this.trials,duration:this.duration,wait:this.wait,iti:this.iti,trial:this.trial,signal:this.signal},bubbles:!0}))):"stimulus"===this.state&&e>=this.duration?(this.state="wait",this.startTime=s,this.dispatchEvent(new CustomEvent("rdk-trial-middle",{detail:{trials:this.trials,duration:this.duration,wait:this.wait,iti:this.iti,trial:this.trial,signal:this.signal},bubbles:!0}))):"wait"===this.state&&e>=this.wait&&(this.dispatchEvent(new CustomEvent("rdk-trial-end",{detail:{trials:this.trials,duration:this.duration,wait:this.wait,iti:this.iti,trial:this.trial,signal:this.signal},bubbles:!0})),this.trial>=this.trials?(this.runner.stop(),this.running=!1,this.state="ended",this.baseTime=0,this.pauseTime=0,this.startTime=0,this.lastTime=0,this.signal=void 0,this.currentDirection=void 0,this.dispatchEvent(new CustomEvent("rdk-block-end",{detail:{trials:this.trial},bubbles:!0}))):(this.state="iti",this.startTime=s)),"stimulus"===this.state){this.dots[this.COHERENT].length=Math.round(this.count*this.coherence),this.dots[this.RANDOM].length=this.count-this.dots[this.COHERENT].length;for(let t=0;t<this.dots.length;t+=1)for(let e=0;e<this.dots[t].length;e+=1){const F=void 0===this.dots[t][e];F&&(this.dots[t][e]={});const Q=this.dots[t][e];if(i||F){Q.direction=t===this.RANDOM?360*Math.random():this.currentDirection,Q.birth=s-Math.floor(Math.random()*this.lifetime);const e=2*Math.random()*Math.PI,B=Math.sqrt(Math.random());Q.x=this.xScale(B*Math.cos(e)),Q.y=this.yScale(B*Math.sin(e))}else if(s>Q.birth+this.lifetime){Q.birth+=this.lifetime,Q.direction=t===this.RANDOM?360*Math.random():this.currentDirection;const s=2*Math.random()*Math.PI,e=Math.sqrt(Math.random());Q.x=this.xScale(e*Math.cos(s)),Q.y=this.yScale(e*Math.sin(s))}else{t===this.COHERENT&&(Q.direction=this.currentDirection);const s=Q.direction*(Math.PI/180);Q.dx=this.speed*(B/1e3)*Math.cos(s),Q.dy=this.speed*(B/1e3)*Math.sin(s),Q.x+=Q.dx,Q.y+=Q.dy;(Q.x-this.xScale(0))**2+(Q.y-this.yScale(0))**2>(this.xScale(1)-this.xScale(0))**2&&(Q.x=-(Q.x-this.xScale(0))+this.xScale(0),Q.y=-(Q.y-this.yScale(0))+this.yScale(0))}}}const F=select(this.renderRoot).select(".content").selectAll(".fixation").data("iti"===this.state?[!0]:[]),Q=F.enter().append("g").classed("fixation",!0);Q.append("line").attr("x1",this.xScale(-.1)).attr("y1",this.xScale(0)).attr("x2",this.xScale(.1)).attr("y2",this.xScale(0)),Q.append("line").attr("x1",this.xScale(0)).attr("y1",this.xScale(-.1)).attr("x2",this.xScale(0)).attr("y2",this.xScale(.1)),F.exit().remove();const l=select(this.renderRoot).select(".content").selectAll(".dots").data("stimulus"===this.state?this.dots:[[],[]]).selectAll(".dot").data(t=>t);l.enter().append("circle").classed("dot",!0).merge(l).attr("cx",t=>t.x).attr("cy",t=>t.y),l.exit().remove();const U=select(this.renderRoot).select(".content").selectAll(".query").data("wait"===this.state?[!0]:[]);U.enter().append("g").classed("query",!0).append("text").attr("x",this.xScale(0)).attr("y",this.xScale(0)).attr("text-anchor","middle").attr("alignment-baseline","middle").text("?"),U.exit().remove()}}customElements.define("rdk-2afc-task",RDK2AFCTask);class DDMEquation extends AccumulableElement{static get properties(){return{numeric:{attribute:"numeric",type:Boolean,reflect:!0}}}constructor(){super(),this.numeric=!1}static get styles(){return[super.styles,i$5`
        :host {
          display: block;

          margin: 1rem;
        }

        /* Containing <div> */
        .holder {
          display: flex;

          flex-direction: row;

          justify-content: left;
        }

        /* Overall <table> */
        .equation {
          text-align: center;
          white-space: nowrap;

          border-collapse: collapse;

          border: 0;
        }

        /* Modifies <td> */
        .underline {
          border-bottom: 1px solid var(---color-text);
        }

        /* Basic <span> and <var> w/modifiers */
        span,
        var {
          padding: 0 0.25rem;

          font-style: normal;
        }

        var {
          border-radius: var(---border-radius);
        }

        .tight {
          padding: 0;
        }

        .paren {
          font-size: 150%;
        }

        .bracket {
          font-size: 175%;
        }

        .brace {
          font-size: 200%;
        }

        .addend {
          position: relative;
          display: inline-block;
        }

        .comparison {
          position: relative;
          display: inline-block;

          font-size: 125%;
          font-weight: 600;
        }

        .function {
          display: inline-block;

          border-radius: var(---border-radius);
        }

        :host([numeric]) .function {
          padding: 0.25rem;
        }

        .exp {
          display: inline-block;

          font-size: 0.75rem;
        }

        .subscript {
          display: inline-block;

          font-size: 66.667%;
        }

        .summation {
          display: flex;

          flex-direction: column;

          line-height: 0.8;
        }

        .sigma {
          display: inline-block;

          font-size: 200%;
        }

        /* Input wrapping <label> */
        decidables-spinner {
          --decidables-spinner-input-width: 4rem;

          display: inline-block;

          padding: 0.125rem 0.375rem 0.375rem;

          line-height: 1.5;
          vertical-align: middle;

          border-radius: var(---border-radius);
        }

        .n {
          --decidables-spinner-input-width: 2rem;
        }

        .left {
          text-align: left;
        }

        .right {
          text-align: right;
        }

        .bottom {
          vertical-align: bottom;
        }

        .top {
          vertical-align: top;
        }

        /* Color scheme */
        .a {
          background: var(---color-a-light);
        }

        .z {
          background: var(---color-z-light);
        }

        .v {
          background: var(---color-v-light);
        }

        .t0 {
          background: var(---color-t0-light);
        }

        .s {
          background: var(---color-s-light);
        }
      `]}}class DDMEquationAZV2PC extends DDMEquation{static get properties(){return{a:{attribute:"boundary-separation",type:Number,reflect:!0},z:{attribute:"starting-point",type:Number,reflect:!0},v:{attribute:"drift-rate",type:Number,reflect:!0},accuracy:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.a=DDMMath.a.DEFAULT,this.z=DDMMath.z.DEFAULT,this.v=DDMMath.v.DEFAULT,this.alignState()}alignState(){this.accuracy=DDMMath.azv2pC(this.a,this.z,this.v)}sendEvent(){this.dispatchEvent(new CustomEvent("ddm-equation-azv2pc-change",{detail:{a:this.a,z:this.z,v:this.v,accuracy:this.accuracy},bubbles:!0}))}aInput(t){this.a=parseFloat(t.target.value),this.alignState(),this.sendEvent()}zInput(t){this.z=parseFloat(t.target.value),this.alignState(),this.sendEvent()}vInput(t){this.v=parseFloat(t.target.value),this.alignState(),this.sendEvent()}willUpdate(){this.alignState()}render(){let t,s,e,B,i;this.numeric?(t=x$3`<decidables-spinner class="a bottom"
          ?disabled=${!this.interactive}
          min=${DDMMath.a.MIN}
          max=${DDMMath.a.MAX}
          step=${DDMMath.a.STEP}
          .value=${this.a}
          @input=${this.aInput.bind(this)}
        >
          <var class="math-var">a</var>
        </decidables-spinner>`,s=x$3`<decidables-spinner class="z bottom"
          ?disabled=${!this.interactive}
          min=${DDMMath.z.MIN}
          max=${DDMMath.z.MAX}
          step=${DDMMath.z.STEP}
          .value=${this.z}
          @input=${this.zInput.bind(this)}
        >
          <var class="math-var">z</var>
        </decidables-spinner>`,e=x$3`<decidables-spinner class="v bottom"
          ?disabled=${!this.interactive}
          min=${DDMMath.v.MIN}
          max=${DDMMath.v.MAX}
          step=${DDMMath.v.STEP}
          .value=${this.v}
          @input=${this.vInput.bind(this)}
        >
          <var class="math-var">v</var>
        </decidables-spinner>`,B=x$3`<decidables-spinner class="s bottom"
          disabled
          .value=${DDMMath.s.DEFAULT}
        >
          <var class="math-var">s</var>
        </decidables-spinner>`,i=x$3`<decidables-spinner class="accuracy bottom"
          disabled
          .value=${+this.accuracy.toFixed(2)}
        >
          <var>Accuracy</var>
        </decidables-spinner>`):(t=x$3`<var class="math-var a">a</var>`,s=x$3`<var class="math-var z">z</var>`,e=x$3`<var class="math-var v">v</var>`,B=x$3`<var class="math-var s">s</var>`,i=x$3`<var class="accuracy">Accuracy</var>`);const F=x$3`
      <tr>
        <td rowspan="2">
          ${i}<span class="equals">=</span>
        </td>
        <td class="underline">
          <var class="math-greek e tight">e</var><sup class="exp"><span class="minus tight">â</span><span class="paren tight">(</span>2${e}${t} / ${B}<sup class="exp">2</sup><span class="paren tight">)</span></sup>
          <span class="minus">â</span>
          <var class="math-greek e tight">e</var><sup class="exp"><span class="minus tight">â</span><span class="paren tight">(</span>2${e}${s} / ${B}<sup class="exp">2</sup><span class="paren tight">)</span></sup>
        </td>
      </tr>
      <tr>
        <td>
          <var class="math-greek e tight">e</var><sup class="exp"><span class="minus tight">â</span><span class="paren tight">(</span>2${e}${t} / ${B}<sup class="exp">2</sup><span class="paren tight">)</span></sup>
            <span class="minus">â</span>
          1
        </td>
      </tr>`;return x$3`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${F}
          </tbody>
        </table>
      </div>`}}customElements.define("ddm-equation-azv2pc",DDMEquationAZV2PC);class DDMEquationAZVT02M extends DDMEquation{static get properties(){return{a:{attribute:"boundary-separation",type:Number,reflect:!0},z:{attribute:"starting-point",type:Number,reflect:!0},v:{attribute:"drift-rate",type:Number,reflect:!0},t0:{attribute:"nondecision-time",type:Number,reflect:!0},meanRT:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.a=DDMMath.a.DEFAULT,this.z=DDMMath.z.DEFAULT,this.v=DDMMath.v.DEFAULT,this.t0=DDMMath.t0.DEFAULT,this.alignState()}alignState(){this.meanRT=DDMMath.azvt02m(this.a,this.z,this.v,this.t0)}sendEvent(){this.dispatchEvent(new CustomEvent("ddm-equation-azvt02m-change",{detail:{a:this.a,z:this.z,v:this.v,t0:this.t0,meanRT:this.meanRT},bubbles:!0}))}aInput(t){this.a=parseFloat(t.target.value),this.alignState(),this.sendEvent()}zInput(t){this.z=parseFloat(t.target.value),this.alignState(),this.sendEvent()}vInput(t){this.v=parseFloat(t.target.value),this.alignState(),this.sendEvent()}t0Input(t){this.t0=parseFloat(t.target.value),this.alignState(),this.sendEvent()}willUpdate(){this.alignState()}render(){let t,s,e,B,i,F;this.numeric?(t=x$3`<decidables-spinner class="a bottom"
          ?disabled=${!this.interactive}
          min=${DDMMath.a.MIN}
          max=${DDMMath.a.MAX}
          step=${DDMMath.a.STEP}
          .value=${this.a}
          @input=${this.aInput.bind(this)}
        >
          <var class="math-var">a</var>
        </decidables-spinner>`,s=x$3`<decidables-spinner class="z bottom"
          ?disabled=${!this.interactive}
          min=${DDMMath.z.MIN}
          max=${DDMMath.z.MAX}
          step=${DDMMath.z.STEP}
          .value=${this.z}
          @input=${this.zInput.bind(this)}
        >
          <var class="math-var">z</var>
        </decidables-spinner>`,e=x$3`<decidables-spinner class="v bottom"
          ?disabled=${!this.interactive}
          min=${DDMMath.v.MIN}
          max=${DDMMath.v.MAX}
          step=${DDMMath.v.STEP}
          .value=${this.v}
          @input=${this.vInput.bind(this)}
        >
          <var class="math-var">v</var>
        </decidables-spinner>`,B=x$3`<decidables-spinner class="t0 bottom"
          ?disabled=${!this.interactive}
          min=${DDMMath.t0.MIN}
          max=${DDMMath.t0.MAX}
          step=${DDMMath.t0.STEP}
          .value=${this.t0}
          @input=${this.t0Input.bind(this)}
        >
          <var class="math-var">t<sub>0</sub></var>
        </decidables-spinner>`,i=x$3`<decidables-spinner class="s bottom"
          disabled
          .value=${DDMMath.s.DEFAULT}
        >
          <var class="math-var">s</var>
        </decidables-spinner>`,F=x$3`<decidables-spinner class="mean-rt bottom"
          disabled
          .value=${+this.meanRT.toFixed(0)}
        >
          <var>Mean RT</var>
        </decidables-spinner>`):(t=x$3`<var class="math-var a">a</var>`,s=x$3`<var class="math-var z">z</var>`,e=x$3`<var class="math-var v">v</var>`,B=x$3`<var class="math-var t0">t<sub>0</sub></var>`,i=x$3`<var class="math-var s">s</var>`,F=x$3`<var class="mean-rt">Mean RT</var>`);const Q=x$3`
      <tr>
        <td rowspan="2">
          ${F}<span class="equals">=</span>
          ${B}
          <span class="minus">â</span>
        </td>
        <td class="underline">
          ${s}
        </td>
        <td rowspan="2">
          <span class="plus">+</span>
        </td>
        <td class="underline">
          ${t}
        </td>
        <td rowspan="2">&nbsp;</td>
        <td class="underline">
          <var class="math-greek e tight">e</var><sup class="exp"><span class="minus tight">â</span><span class="paren tight">(</span>2${e}${s} / ${i}<sup class="exp">2</sup><span class="paren tight">)</span></sup>
          <span class="minus">â</span>
          1
        </td>
      </tr>
      <tr>
        <td>
          ${e}
        </td>
        <td>
          ${e}
        </td>
        <td>
          <var class="math-greek e tight">e</var><sup class="exp"><span class="minus tight">â</span><span class="paren tight">(</span>2${e}${t} / ${i}<sup class="exp">2</sup><span class="paren tight">)</span></sup>
            <span class="minus">â</span>
          1
        </td>
      </tr>`;return x$3`
      <div class="holder">
        <table class="equation">
          <tbody>
            ${Q}
          </tbody>
        </table>
      </div>`}}customElements.define("ddm-equation-azvt02m",DDMEquationAZVT02M);class DDMExample extends AccumulableElement{static get styles(){return[super.styles,i$5`
        :host {
          ---border: var(--border, 1px solid var(---color-border));
          display: inline-block;

          margin-bottom: 1rem;
        }

        .holder {
          display: flex;
        }

        .body {
          display: flex;

          flex-wrap: wrap;

          align-items: center;
          justify-content: left;

          padding: 0.625rem;

          border: var(---border);
          border-radius: 0.25rem;
        }

        .body ::slotted(*) {
          margin: 0.625rem;
        }

        /* HACK: Sibling selectors not working with ::slotted */
        /* .body > rdk-task + sdt-response,
        ::slotted(rdk-task) + ::slotted(sdt-response) { */
        /* .body ::slotted(sdt-response) {
          margin-left: 0;
        } */

        /* HACK: Sibling selectors not working with ::slotted */
        /* .body > sdt-control + rdk-task,
        ::slotted(sdt-control) + ::slotted(rdk-task) {
          margin-left: 0;
        } */
        /* .body ::slotted(rdk-task) {
          margin-left: 0;
        } */
      `]}render(){return x$3`
      <div class="holder">
        <div class="body">
          <slot>Empty!</slot>
        </div>
      </div>`}}customElements.define("ddm-example",DDMExample);class DDMExampleHuman extends DDMExample{static get properties(){return{trials:{attribute:"trials",type:Number,reflect:!0},duration:{attribute:"duration",type:Number,reflect:!0},coherence:{attribute:"coherence",type:Number,reflect:!0},color:{attribute:"color",type:String,reflect:!0},a:{attribute:!1,type:Number,reflect:!1},z:{attribute:!1,type:Number,reflect:!1},v:{attribute:!1,type:Number,reflect:!1},t0:{attribute:!1,type:Number,reflect:!1}}}constructor(){super(),this.trials=10,this.duration=2e3,this.coherence=.5,this.colors=["none","measure","outcome","all"],this.color="outcome",this.a=DDMMath.a.DEFAULT,this.z=DDMMath.z.DEFAULT,this.v=DDMMath.v.DEFAULT,this.t0=DDMMath.t0.DEFAULT,this.accumulableControl=null,this.rdkTask=null,this.accumulableResponse=null,this.accumulableTable=null,this.ddmParameters=null,this.ddmModel=null,this.ddmFit=null,this.data=void 0}connectedCallback(){super.connectedCallback(),this.accumulableControl=this.querySelector("accumulable-control"),this.rdkTask=this.querySelector("rdk-2afc-task"),this.accumulableResponse=this.querySelector("accumulable-response"),this.accumulableTable=this.querySelector("accumulable-table"),this.ddmParameters=this.querySelector("ddm-parameters"),this.ddmModel=this.querySelector("ddm-model"),this.ddmFit=this.querySelector("ddm-fit"),this.ddmModel.clear(),this.accumulableControl&&(this.accumulableControl.addEventListener("accumulable-control-trials",t=>{this.trials=t.detail.trials}),this.accumulableControl.addEventListener("accumulable-control-duration",t=>{this.duration=t.detail.duration}),this.accumulableControl.addEventListener("accumulable-control-coherence",t=>{this.coherence=t.detail.coherence}),this.accumulableControl.addEventListener("accumulable-control-color",t=>{this.color=t.detail.color}),this.accumulableControl.addEventListener("accumulable-control-run",()=>{this.rdkTask&&(this.rdkTask.running=!0)}),this.accumulableControl.addEventListener("accumulable-control-pause",()=>{this.rdkTask&&(this.rdkTask.running=!1)}),this.accumulableControl.addEventListener("accumulable-control-reset",()=>{this.rdkTask&&this.rdkTask.reset(),this.accumulableResponse&&this.accumulableResponse.reset(),this.accumulableTable&&(this.accumulableTable.correctCount=NaN,this.accumulableTable.errorCount=NaN,this.accumulableTable.nrCount=NaN,this.accumulableTable.accuracy=NaN,this.accumulableTable.correctMeanRT=NaN,this.accumulableTable.errorMeanRT=NaN,this.accumulableTable.meanRT=NaN,this.accumulableTable.correctSDRT=NaN,this.accumulableTable.errorSDRT=NaN,this.accumulableTable.sdRT=NaN),this.ddmModel&&this.ddmModel.clear(),this.ddmFit&&this.ddmFit.clear()})),this.rdkTask&&this.rdkTask.addEventListener("rdk-trial-start",t=>{this.accumulableResponse&&this.accumulableResponse.start(t.detail.signal,t.detail.trial)}),this.rdkTask&&this.rdkTask.addEventListener("rdk-trial-end",()=>{this.accumulableResponse&&this.accumulableResponse.stop()}),this.rdkTask&&this.rdkTask.addEventListener("rdk-block-end",()=>{this.accumulableControl&&this.accumulableControl.complete()}),this.accumulableResponse&&this.accumulableResponse.addEventListener("accumulable-response",t=>{this.data=t.detail.data,this.ddmModel&&this.ddmModel.trial({index:t.detail.trial,rt:t.detail.rt,outcome:t.detail.outcome}),this.ddmFit&&this.ddmFit.set({accuracy:t.detail.data.accuracy,correctMeanRT:t.detail.data.correctMeanRT,errorMeanRT:t.detail.data.errorMeanRT,meanRT:t.detail.data.meanRT,correctSDRT:t.detail.data.correctSDRT,errorSDRT:t.detail.data.errorSDRT,sdRT:t.detail.data.sdRT}),this.requestUpdate()}),this.ddmFit&&this.ddmFit.addEventListener("ddm-fit-update",t=>{this.a=t.detail.a,this.z=.5,this.v=t.detail.v,this.t0=t.detail.t0})}update(t){super.update(t),this.accumulableControl&&(this.accumulableControl.trials=null!=this.accumulableControl.trials?this.trials:void 0,this.accumulableControl.duration=null!=this.accumulableControl.duration?this.duration:void 0,this.accumulableControl.coherence=null!=this.accumulableControl.coherence?this.coherence:void 0,this.accumulableControl.color=null!=this.accumulableControl.color?this.color:void 0),this.rdkTask&&(this.rdkTask.trials=this.trials,this.rdkTask.duration=this.duration,this.rdkTask.wait=this.duration,this.rdkTask.iti=this.duration,this.rdkTask.coherence=this.coherence),this.ddmParameters&&(this.ddmParameters.a=null!=this.ddmParameters.a?this.a:void 0,this.ddmParameters.z=null!=this.ddmParameters.z?this.z:void 0,this.ddmParameters.v=null!=this.ddmParameters.a?this.v:void 0,this.ddmParameters.t0=null!=this.ddmParameters.t0?this.t0:void 0),this.ddmModel&&(this.ddmModel.a=+this.a,this.ddmModel.z=+this.z,this.ddmModel.v=+this.v,this.ddmModel.t0=+this.t0),this.accumulableResponse&&(this.accumulableResponse.trialTotal=this.trials),this.accumulableTable&&(this.accumulableTable.color=this.color),this.accumulableTable&&this.data&&(this.accumulableTable.correctCount=this.data.correctCount,this.accumulableTable.errorCount=this.data.errorCount,this.accumulableTable.nrCount=this.data.nrCount,this.accumulableTable.accuracy=this.data.accuracy,this.accumulableTable.correctMeanRT=this.data.correctMeanRT,this.accumulableTable.errorMeanRT=this.data.errorMeanRT,this.accumulableTable.meanRT=this.data.meanRT,this.accumulableTable.correctSDRT=this.data.correctSDRT,this.accumulableTable.errorSDRT=this.data.errorSDRT,this.accumulableTable.sdRT=this.data.sdRT)}}customElements.define("ddm-example-human",DDMExampleHuman);class DDMExampleInteractive extends DDMExample{static get properties(){return{trials:{attribute:"trials",type:Number,reflect:!0},color:{attribute:"color",type:String,reflect:!0},a:{attribute:"boundary-separation",type:Number,reflect:!0},z:{attribute:"starting-point",type:Number,reflect:!0},v:{attribute:"drift-rate",type:Number,reflect:!0},t0:{attribute:"nondecision-time",type:Number,reflect:!0}}}constructor(){super(),this.trials=10,this.colors=["none","measure","outcome","all"],this.color="outcome",this.a=DDMMath.a.DEFAULT,this.z=DDMMath.z.DEFAULT,this.v=DDMMath.v.DEFAULT,this.t0=DDMMath.t0.DEFAULT,this.accumulableControl=null,this.accumulableTable=null,this.ddmParameters=null,this.ddmModel=null,this.data=void 0,this.model=void 0}connectedCallback(){super.connectedCallback(),this.accumulableControl=this.querySelector("accumulable-control"),this.accumulableTable=this.querySelector("accumulable-table"),this.ddmParameters=this.querySelector("ddm-parameters"),this.ddmModel=this.querySelector("ddm-model"),this.accumulableControl&&(this.accumulableControl.addEventListener("accumulable-control-resample",()=>{this.ddmModel?.resample(),this.requestUpdate()}),this.accumulableControl.addEventListener("accumulable-control-trials",t=>{this.trials=t.detail.trials}),this.accumulableControl.addEventListener("accumulable-control-color",t=>{this.color=t.detail.color})),this.ddmParameters&&(this.ddmParameters.addEventListener("ddm-parameters-a",t=>{this.a=t.detail.a}),this.ddmParameters.addEventListener("ddm-parameters-z",t=>{this.z=t.detail.z}),this.ddmParameters.addEventListener("ddm-parameters-v",t=>{this.v=t.detail.v}),this.ddmParameters.addEventListener("ddm-parameters-t0",t=>{this.t0=t.detail.t0})),this.ddmModel&&(this.ddmModel.addEventListener("ddm-model-a",t=>{this.a=t.detail.a}),this.ddmModel.addEventListener("ddm-model-z",t=>{this.z=t.detail.z}),this.ddmModel.addEventListener("ddm-model-v",t=>{this.v=t.detail.v}),this.ddmModel.addEventListener("ddm-model-t0",t=>{this.t0=t.detail.t0}),this.ddmModel.addEventListener("ddm-model-output",t=>{this.data=t.detail.data,this.model=t.detail.model,this.requestUpdate()})),this.requestUpdate()}update(t){super.update(t),this.accumulableControl&&(this.accumulableControl.trials=null!=this.accumulableControl.trials?this.trials:void 0,this.accumulableControl.color=null!=this.accumulableControl.color?this.color:void 0),this.accumulableTable&&(this.accumulableTable.color=this.color),this.accumulableTable&&this.data&&(this.accumulableTable.correctCount=this.data.correctCount,this.accumulableTable.errorCount=this.data.errorCount,this.accumulableTable.nrCount=this.data.nrCount,this.accumulableTable.accuracy=this.data.accuracy,this.accumulableTable.correctMeanRT=this.data.correctMeanRT,this.accumulableTable.errorMeanRT=this.data.errorMeanRT,this.accumulableTable.meanRT=this.data.meanRT,this.accumulableTable.correctSDRT=this.data.correctSDRT,this.accumulableTable.errorSDRT=this.data.errorSDRT,this.accumulableTable.sdRT=this.data.sdRT),this.ddmParameters&&(this.ddmParameters.a=null!=this.ddmParameters.a?this.a:void 0,this.ddmParameters.z=null!=this.ddmParameters.z?this.z:void 0,this.ddmParameters.v=null!=this.ddmParameters.a?this.v:void 0,this.ddmParameters.t0=null!=this.ddmParameters.t0?this.t0:void 0),this.ddmModel&&(this.ddmModel.trials=this.trials,this.ddmModel.a=+this.a,this.ddmModel.z=+this.z,this.ddmModel.v=+this.v,this.ddmModel.t0=+this.t0)}}customElements.define("ddm-example-interactive",DDMExampleInteractive);class DDMExampleModel extends DDMExample{static get properties(){return{trials:{attribute:"trials",type:Number,reflect:!0},duration:{attribute:"duration",type:Number,reflect:!0},coherence:{attribute:"coherence",type:Number,reflect:!0},color:{attribute:"color",type:String,reflect:!0},a:{attribute:"boundary-separation",type:Number,reflect:!0},z:{attribute:"starting-point",type:Number,reflect:!0},v:{attribute:"drift-rate",type:Number,reflect:!0},t0:{attribute:"nondecision-time",type:Number,reflect:!0}}}constructor(){super(),this.trials=10,this.duration=2e3,this.coherence=.5,this.colors=["none","measure","outcome","all"],this.color="outcome",this.a=DDMMath.a.DEFAULT,this.z=DDMMath.z.DEFAULT,this.v=DDMMath.v.DEFAULT,this.t0=DDMMath.t0.DEFAULT,this.accumulableControl=null,this.rdkTask=null,this.ddmParameters=null,this.ddmModel=null,this.accumulableResponse=null,this.accumulableTable=null,this.trialCount=0,this.signals=["left","right"],this.signal=void 0,this.data=void 0,this.model=void 0}connectedCallback(){super.connectedCallback(),this.accumulableControl=this.querySelector("accumulable-control"),this.rdkTask=this.querySelector("rdk-2afc-task"),this.ddmParameters=this.querySelector("ddm-parameters"),this.ddmModel=this.querySelector("ddm-model"),this.accumulableResponse=this.querySelector("accumulable-response"),this.accumulableTable=this.querySelector("accumulable-table"),this.accumulableControl&&(this.accumulableControl.addEventListener("accumulable-control-trials",t=>{this.trials=t.detail.trials}),this.accumulableControl.addEventListener("accumulable-control-duration",t=>{this.duration=t.detail.duration}),this.accumulableControl.addEventListener("accumulable-control-color",t=>{this.color=t.detail.color}),this.accumulableControl.addEventListener("accumulable-control-run",()=>{this.rdkTask&&(this.rdkTask.running=!0),this.ddmModel&&this.ddmModel.resumeTrial()}),this.accumulableControl.addEventListener("accumulable-control-pause",()=>{this.rdkTask&&(this.rdkTask.running=!1),this.ddmModel&&this.ddmModel.pauseTrial()}),this.accumulableControl.addEventListener("accumulable-control-reset",()=>{this.trialCount=0,this.signal=void 0,this.rdkTask&&this.rdkTask.reset(),this.ddmModel&&(this.ddmModel.trials=this.trialCount),this.accumulableResponse&&this.accumulableResponse.reset(),this.accumulableTable})),this.rdkTask&&(this.rdkTask.addEventListener("rdk-trial-start",t=>{this.signal=t.detail.signal,this.accumulableResponse&&this.accumulableResponse.start(t.detail.signal,t.detail.trial),this.ddmModel&&(this.trialCount+=1,this.ddmModel.trial())}),this.rdkTask.addEventListener("rdk-trial-end",()=>{this.signal=void 0,this.accumulableResponse&&this.accumulableResponse.stop()}),this.rdkTask.addEventListener("rdk-block-end",()=>{this.accumulableControl&&this.accumulableControl.complete()})),this.ddmParameters&&(this.ddmParameters.addEventListener("ddm-parameters-a",t=>{this.a=t.detail.a}),this.ddmParameters.addEventListener("ddm-parameters-z",t=>{this.z=t.detail.z}),this.ddmParameters.addEventListener("ddm-parameters-v",t=>{this.v=t.detail.v}),this.ddmParameters.addEventListener("ddm-parameters-t0",t=>{this.t0=t.detail.t0})),this.ddmModel&&(this.ddmModel.addEventListener("ddm-model-a",t=>{this.a=t.detail.a}),this.ddmModel.addEventListener("ddm-model-z",t=>{this.z=t.detail.z}),this.ddmModel.addEventListener("ddm-model-v",t=>{this.v=t.detail.v}),this.ddmModel.addEventListener("ddm-model-t0",t=>{this.t0=t.detail.t0}),this.ddmModel.addEventListener("ddm-model-output",t=>{this.data=t.detail.data,this.model=t.detail.model,this.requestUpdate()}),this.ddmModel.addEventListener("accumulable-response",t=>{if(this.accumulableResponse){const s="correct"===t.detail.outcome?this.signal:"left"===this.signal?"right":"left";this.accumulableResponse.responded(s)}this.data=t.detail.data,this.model=t.detail.model,this.requestUpdate()})),this.requestUpdate()}update(t){super.update(t),this.trialCount>this.trials&&(this.trialCount=this.trials),this.accumulableControl&&(this.accumulableControl.trials=null!=this.accumulableControl.trials?this.trials:void 0,this.accumulableControl.duration=null!=this.accumulableControl.duration?this.duration:void 0,this.accumulableControl.coherence=null!=this.accumulableControl.coherence?this.coherence:void 0,this.accumulableControl.color=null!=this.accumulableControl.color?this.color:void 0),this.rdkTask&&(this.rdkTask.trials=this.trials,this.rdkTask.duration=this.duration,this.rdkTask.coherence=this.coherence),this.ddmParameters&&(this.ddmParameters.a=null!=this.ddmParameters.a?this.a:void 0,this.ddmParameters.z=null!=this.ddmParameters.z?this.z:void 0,this.ddmParameters.v=null!=this.ddmParameters.a?this.v:void 0,this.ddmParameters.t0=null!=this.ddmParameters.t0?this.t0:void 0),this.ddmModel&&(this.ddmModel.trials=this.trialCount,this.ddmModel.a=+this.a,this.ddmModel.z=+this.z,this.ddmModel.v=+this.v,this.ddmModel.t0=+this.t0),this.accumulableResponse&&(this.accumulableResponse.trialTotal=this.trials),this.accumulableTable&&(this.accumulableTable.color=this.color),this.accumulableTable&&this.data&&(this.accumulableTable.correctCount=this.data.correctCount,this.accumulableTable.errorCount=this.data.errorCount,this.accumulableTable.nrCount=this.data.nrCount,this.accumulableTable.accuracy=this.data.accuracy,this.accumulableTable.correctMeanRT=this.data.correctMeanRT,this.accumulableTable.errorMeanRT=this.data.errorMeanRT,this.accumulableTable.meanRT=this.data.meanRT,this.accumulableTable.correctSDRT=this.data.correctSDRT,this.accumulableTable.errorSDRT=this.data.errorSDRT,this.accumulableTable.sdRT=this.data.sdRT)}}customElements.define("ddm-example-model",DDMExampleModel);
//# sourceMappingURL=page.js.map